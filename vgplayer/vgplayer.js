!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(module,exports,__webpack_require__){function exception(e){return e}function isEnum(e){return null!=e&&e.constructor==stjs.enumEntry}function setAssertHandler(e){stjsAssertHandler=e}function assertArgEquals(e,t,n,i){n!=i&&stjsAssertHandler&&stjsAssertHandler(e,t,"Wrong argument. Expected: "+n+", got:"+i)}function assertArgNotNull(e,t,n){null==n&&stjsAssertHandler&&stjsAssertHandler(e,t,"Wrong argument. Null value")}function assertArgTrue(e,t,n){!n&&stjsAssertHandler&&stjsAssertHandler(e,t,"Wrong argument. Condition is false")}function assertStateEquals(e,t,n,i){n!=i&&stjsAssertHandler&&stjsAssertHandler(e,t,"Wrong state. Expected: "+n+", got:"+i)}function assertStateNotNull(e,t,n){null==n&&stjsAssertHandler&&stjsAssertHandler(e,t,"Wrong state. Null value")}function assertStateTrue(e,t,n){!n&&stjsAssertHandler&&stjsAssertHandler(e,t,"Wrong state. Condition is false")}var _=__webpack_require__(1);_=window._.noConflict();var Rx=__webpack_require__(3),core=__webpack_require__(5),React=__webpack_require__(9),ReactDOM=__webpack_require__(38),Rainbow=__webpack_require__(170),PlayerImpl=core.Player,Captions=core.Captions,TapeTimecode=core.TapeTimecode,LogLevel=core.LogLevel,PlayerError=core.PlayerError,CloseableView=core._private.CloseableView,VGView=core._private.VGView,VGPlayerPluginApi=core._private.VGPlayerPluginApi,ObjectEvents=core._private.ObjectEvents,DataSrc=core._private.DataSrc,VGPlugin=core._private.VGPlugin,VGPlugins=core._private.VGPlugins,PlayerView=core._private.PlayerView,VGPlayerPublicApi=core._private.VGPlayerPublicApi,EbuSubs=core._private.EbuSubs,Http=core._private.Http,TimelineUtil=core._private.TimelineUtil,Utils=core._private.tests.Utils,PlayerOptions=core._private.tests.PlayerOptions,SubtitleEntry=core._private.tests.SubtitleEntry,MutableBoolean=core._private.tests.MutableBoolean,PlayerEvents=core._private.tests.PlayerEvents,KeyOptions=core._private.tests.KeyOptions,HotkeyManager=core._private.tests.HotkeyManager,TimeSample=core._private.tests.TimeSample,Timeline=core._private.tests.Timeline,Subtitles=core._private.tests.Subtitles,NOT_IMPLEMENTED=function(){throw"This method is not implemented in Javascript."};if(JavalikeEquals=function(e){return null!=e&&(e.valueOf?this.valueOf()===e.valueOf():this===e)},JavalikeGetClass=function(){return this.constructor},String.prototype.equals||(String.prototype.equals=JavalikeEquals),String.prototype.getBytes||(String.prototype.getBytes=NOT_IMPLEMENTED),String.prototype.getChars||(String.prototype.getChars=NOT_IMPLEMENTED),String.prototype.contentEquals||(String.prototype.contentEquals=NOT_IMPLEMENTED),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){var n=null!=t?t:0;return this.substring(n,n+e.length)==e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return null!=e&&(!(this.length<e.length)&&this.substring(this.length-e.length,this.length)==e)}),!String.prototype.trim){var trimLeft=/^\s+/,trimRight=/\s+$/;String.prototype.trim=function(){return this.replace(trimLeft,"").replace(trimRight,"")}}String.prototype.matches||(String.prototype.matches=function(e){return null!=this.match("^"+e+"$")}),String.prototype.compareTo||(String.prototype.compareTo=function(e){return null==e?1:this<e?-1:this==e?0:1}),String.prototype.compareToIgnoreCase||(String.prototype.compareToIgnoreCase=function(e){return null==e?1:this.toLowerCase().compareTo(e.toLowerCase())}),String.prototype.equalsIgnoreCase||(String.prototype.equalsIgnoreCase=function(e){return null!=e&&this.toLowerCase()===e.toLowerCase()}),String.prototype.codePointAt||(String.prototype.codePointAt=String.prototype.charCodeAt),String.prototype.codePointBefore||(String.prototype.codePointBefore=NOT_IMPLEMENTED),String.prototype.codePointCount||(String.prototype.codePointCount=NOT_IMPLEMENTED),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)}),String.prototype.replaceFirst||(String.prototype.replaceFirst=function(e,t){return this.replace(new RegExp(e),t)}),String.prototype.regionMatches||(String.prototype.regionMatches=function(e,t,n,i,r){if(4==arguments.length&&(r=arguments[3],i=arguments[2],n=arguments[1],t=arguments[0],e=!1),t<0||i<0||null==n||t+r>this.length||i+r>n.length)return!1;var s=this.substring(t,t+r),o=n.substring(i,i+r);return e?s.equalsIgnoreCase(o):s===o}),String.prototype.contains||(String.prototype.contains=function(e){return this.indexOf(e)>=0}),String.prototype.getClass||(String.prototype.getClass=JavalikeGetClass),String.valueOf=function(e){return new String(e)};var Byte=Number,Double=Number,Float=Number,Integer=Number,Long=Number,Short=Number;Number.prototype.intValue||(Number.prototype.intValue=function(){return parseInt(this)}),Number.prototype.shortValue||(Number.prototype.shortValue=function(){return parseInt(this)}),Number.prototype.longValue||(Number.prototype.longValue=function(){return parseInt(this)}),Number.prototype.byteValue||(Number.prototype.byteValue=function(){return parseInt(this)}),Number.prototype.floatValue||(Number.prototype.floatValue=function(){return parseFloat(this)}),Number.prototype.doubleValue||(Number.prototype.doubleValue=function(){return parseFloat(this)}),Number.parseInt||(Number.parseInt=parseInt),Number.parseShort||(Number.parseShort=parseInt),Number.parseLong||(Number.parseLong=parseInt),Number.parseByte||(Number.parseByte=parseInt),Number.parseDouble||(Number.parseDouble=parseFloat),Number.parseFloat||(Number.parseFloat=parseFloat),Number.isNaN||(Number.isNaN=isNaN),Number.prototype.isNaN||(Number.prototype.isNaN=isNaN),Number.prototype.equals||(Number.prototype.equals=JavalikeEquals),Number.prototype.getClass||(Number.prototype.getClass=JavalikeGetClass),Number.valueOf=function(e){return new Number(e).valueOf()},Boolean.prototype.equals||(Boolean.prototype.equals=JavalikeEquals),Boolean.prototype.getClass||(Boolean.prototype.getClass=JavalikeGetClass),Boolean.valueOf=function(e){return new Boolean(e).valueOf()};var stjs={};stjs.global=this,stjs.skipCopy={prototype:!0,constructor:!0,$typeDescription:!0,$inherit:!0},stjs.ns=function(e){for(var t=e.split("."),n=stjs.global,i=0;i<t.length;++i){var r=t[i];n=n[r]=n[r]||{}}return n},stjs.copyProps=function(e,t){for(key in e)stjs.skipCopy[key]||(t[key]=e[key]);return t},stjs.copyInexistentProps=function(e,t){for(key in e)stjs.skipCopy[key]||t[key]||(t[key]=e[key]);return t},stjs.extend=function(e,t,n,i,r,s){if("object"!=typeof r)return stjs.extend12.apply(this,arguments);e.$inherit=[];var o;if(null!=t){var a=function(){};a.prototype=t.prototype,e.prototype=new a,stjs.copyProps(t,e),stjs.copyProps(t.$typeDescription,r),stjs.copyProps(t.$annotations,s),e.$inherit.push(t)}for(o=0;o<n.length;++o)n[o]&&(stjs.copyProps(n[o],e),stjs.copyInexistentProps(n[o].prototype,e.prototype),e.$inherit.push(n[o]));return e.prototype.constructor=e,null!=i&&i(e,e.prototype),e.$typeDescription=r,e.$annotations=s,null==t&&(e.prototype.equals||(e.prototype.equals=JavalikeEquals),e.prototype.getClass||(e.prototype.getClass=JavalikeGetClass)),e},stjs.extend12=function(e,t,n){var i,r=function(){};for(r.prototype=t.prototype,e.prototype=new r,i=1;i<arguments.length;++i)stjs.copyProps(arguments[i],e);return e.prototype.constructor=e,null==t&&(e.prototype.equals=JavalikeEquals,e.prototype.getClass=JavalikeGetClass),e},stjs.getAnnotations=function(e){return e.$annotations},stjs.getTypeAnnotation=function(e,t){var n=e.$annotations._;return n?n[t]:null},stjs.getMemberAnnotation=function(e,t,n){var i=e.$annotations.memberName;return i?i[n]:null},stjs.getParameterAnnotation=function(e,t,n,i){var r=e.$annotations[t+"$"+n];return r?r[i]:null},stjs.isInstanceOf=function(e,t){if(null==e)return!1;if(e===t)return!0;if(!e.$inherit)return!1;for(var n=0;n<e.$inherit.length;++n)if(stjs.isInstanceOf(e.$inherit[n],t))return!0;return!1},stjs.enumEntry=function(e,t){this._name=t,this._ordinal=e},stjs.enumEntry.prototype.name=function(){return this._name},stjs.enumEntry.prototype.ordinal=function(){return this._ordinal},stjs.enumEntry.prototype.toString=function(){return this._name},stjs.enumEntry.prototype.equals=JavalikeEquals,stjs.enumeration=function(){var e,t={};for(t._values=[],e=0;e<arguments.length;++e)t[arguments[e]]=new stjs.enumEntry(e,arguments[e]),t._values[e]=t[arguments[e]];return t.values=function(){return this._values},t.valueOf=function(e){return this[e]},t},stjs.mainCallDisabled=!1,stjs.exception=function(e){return e},stjs.isEnum=function(e){return null!=e&&e.constructor==stjs.enumEntry},"function"==typeof Math.trunc?stjs.trunc=Math.trunc:stjs.trunc=function(e){return null==e?null:e>=0?Math.floor(e):Math.ceil(e)},stjs.converters={Date:function(e,t){var n=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)$/.exec(e);return n?new Date((+n[1]),+n[2]-1,(+n[3]),(+n[4]),(+n[5]),(+n[6])):null},Enum:function(s,type){return eval(type.arguments[0])[s]}},stjs.serializers={Date:function(e,t){function n(e){return e<10?"0"+e:""+e}return e?""+e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+" "+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds()):null},Enum:function(e,t){return null!=e?e.toString():null}},stjs.bind=function(e,t,n){var i=function(){var i=arguments;return null!=n&&Array.prototype.splice.call(i,n,0,this),"string"==typeof t?e[t].apply(e,i):t.apply(e,i)};return i},stjs.parseJSON=function(){function unescapeOne(e,t,n){return t?escapes[t]:String.fromCharCode(parseInt(n,16))}function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function convert(e,t){if(!e)return t;var n=stjs.converters[e.name||e];return n?n(t,e):constr(e,t)}function builder(e){return e?"function"==typeof e?new e:e.name?"Map"==e.name?{}:"Array"==e.name?[]:constr(e.name):constr(e):{}}function nextMatch(e){var t=jsonToken.exec(e);return null!=t?t[0]:null}var number="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",oneChar='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',string='(?:"'+oneChar+'*")',jsonToken=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+number+"|"+string+")","g"),escapeSequence=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),escapes={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},constructors={},EMPTY_STRING=new String(""),SLASH="\\",firstTokenCtors={"{":Object,"[":Array},hop=Object.hasOwnProperty;return function(e,t){var n,i=nextMatch(e),r=!1;"{"===i?n=builder(t,null):"["===i?n=[]:(n=[],r=!0);var s,o=[n],a=[t];for(i=nextMatch(e);null!=i;i=nextMatch(e)){var l;switch(i.charCodeAt(0)){default:l=o[0],l[s||l.length]=+i,s=void 0;break;case 34:if(i=i.substring(1,i.length-1),i.indexOf(SLASH)!==-1&&(i=i.replace(escapeSequence,unescapeOne)),l=o[0],!s){if(!(l instanceof Array)){s=i||EMPTY_STRING,a[0]=l.constructor.$typeDescription?l.constructor.$typeDescription[s]:a[1].arguments[1];break}s=l.length}l[s]=convert(a[0],i),s=void 0;break;case 91:l=o[0],o.unshift(l[s||l.length]=[]),a.unshift(a[0].arguments[0]),s=void 0;break;case 93:o.shift(),a.shift();break;case 102:l=o[0],l[s||l.length]=!1,s=void 0;break;case 110:l=o[0],l[s||l.length]=null,s=void 0;break;case 116:l=o[0],l[s||l.length]=!0,s=void 0;break;case 123:l=o[0],o.unshift(l[s||l.length]=builder(a[0])),a.unshift(null),s=void 0;break;case 125:o.shift(),a.shift()}}if(r){if(1!==o.length)throw new Error;n=n[0]}else if(o.length)throw new Error;return n}}(),stjs.isArray=function(e){return"[object Array]"===stjs.toString.call(e)},stjs.typefy=function(obj,cls){function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function elementType(type){return"function"==typeof type?type:type.arguments?eval(type.arguments[0]):"string"==typeof type?eval(type):Object}function convert(e,t){if(!e)return t;var n=stjs.converters[e.name||e];return n?n(t,e):constr(e,t)}function builder(e){return e?"function"==typeof e?new e:e.name?"Map"==e.name?{}:"Array"==e.name?[]:constr(e.name):constr(e):{}}if(stjs.isArray(obj)){for(var result=[],idx=0;idx<obj.length;idx++)result.push(stjs.typefy(obj[idx],elementType(cls)));return result}var constructors={};if(null==obj)return null;var ret=new cls;for(var key in obj){var prop=obj[key];if(null!=prop){var td=cls.$typeDescription[key];td?"string"==typeof prop?ret[key]=convert(td,prop):"object"==typeof prop&&(ret[key]=stjs.typefy(prop,td)):ret[key]=prop}}return ret},stjs.hydrate=stjs.typefy,stjs.stringify=function(e,t){if(null==e)return null;var n={};for(var i in e){var r=t.$typeDescription[i],s=e[i],o=null!=r?stjs.serializers[r.name||r]:null;"function"!=typeof s&&(r&&o?"string"!=typeof s&&(o?n[i]=o(s,r):n[i]=stjs.typefy(s,r)):n[i]=s)}return n};var stjsAssertHandler=function(e,t,n){throw n+" at "+e},Throwable=function(e,t){if(Error.call(this),"function"==typeof Error.captureStackTrace)Error.captureStackTrace(this,arguments.callee);else try{throw new Error}catch(n){this.stack=n.stack}"string"==typeof e?(this.detailMessage=e,this.message=e,this.cause=t):this.cause=e};stjs.extend(Throwable,Error,[],function(e,t){t.detailMessage=null,t.cause=null,t.getMessage=function(){return this.detailMessage},t.getLocalizedMessage=function(){return this.getMessage()},t.getCause=function(){return this.cause==this?null:this.cause},t.toString=function(){var e="Exception",t=this.getLocalizedMessage();return null!=t?e+": "+t:e},t.getStackTrace=function(){return this.stack},t.printStackTrace=function(){console.error(this.getStackTrace())}},{});var Exception=function(e,t){Throwable.call(this,e,t)};stjs.extend(Exception,Throwable,[],function(e,t){},{});var RuntimeException=function(e,t){Exception.call(this,e,t)};stjs.extend(RuntimeException,Exception,[],function(e,t){},{}),stjs.setField=function(e,t,n,i){if(stjs.setFieldHandler)return stjs.setFieldHandler(e,t,n,i);var r=i?e[t]:n;return e[t]=n,r},stjs.getField=function(e,t){return stjs.getFieldHandler?stjs.getFieldHandler(e,t):e[t]};var VGIconComponent=function(e){React.Component.call(this,e)};VGIconComponent=stjs.extend(VGIconComponent,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.iconCode=null},{},{}),t.render=function(){return React.DOM.span({className:this.props.iconCode})},e.el=function(e){return React.createElement(VGIconComponent,{iconCode:e})}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var User=function(){};User=stjs.extend(User,null,[],function(e,t){t.id=null,t.first_name=null,t.last_name=null,t.email=null,t.displayName=null,t.avatar=null,t.active=null},{},{});var TrackState=function(e,t){this.id=e,this.displayName=t};TrackState=stjs.extend(TrackState,null,[],function(e,t){e.CREATED=new TrackState("CREATED","Created"),e.NEW=new TrackState("NEW","New"),e.DELETED=new TrackState("DELETED","Deleted"),e.EDITED=new TrackState("EDITED","Edited"),e.COMPLETE=new TrackState("COMPLETE","Complete"),t.id=null,t.displayName=null},{CREATED:"TrackState",NEW:"TrackState",DELETED:"TrackState",EDITED:"TrackState",COMPLETE:"TrackState"},{});var TrackType=stjs.enumeration("id","displayName"),ElementView=function(e){this.el=e};ElementView=stjs.extend(ElementView,null,[],function(e,t){t.el=null},{el:"Element"},{});var FCP=function(){};FCP=stjs.extend(FCP,null,[],function(e,t){t.version=0,t.sequence=null,e.Sequence=function(){},e.Sequence=stjs.extend(e.Sequence,null,[],function(e,t){t.id=null,t.name=null,t.duration=0,t.rate=null,t.timecode=null,t.media=null,t.markers=null,t.ismasterclip="FALSE",t.uuid=null},{rate:"FCP.Rate",timecode:"FCP.Timecode",media:"FCP.Media",markers:{name:"Array",arguments:["FCP.Marker"]}},{}),e.Timecode=function(){},e.Timecode=stjs.extend(e.Timecode,null,[],function(e,t){t.rate=null,t.frame=0,t.source=null,t.displayformat=null,t.string=null},{rate:"FCP.Rate"},{}),e.Rate=function(){},e.Rate=stjs.extend(e.Rate,null,[],function(e,t){t.ntsc=null,t.timebase=0},{},{}),e.Media=function(){},e.Media=stjs.extend(e.Media,null,[],function(e,t){t.video=null,t.audio=null},{video:"FCP.MediaElement",audio:"FCP.MediaElement"},{}),e.MediaElement=function(){},e.MediaElement=stjs.extend(e.MediaElement,null,[],function(e,t){t.track=null,t.format=null},{track:"FCP.Track",format:"FCP.MediaFormat"},{}),e.Track=function(){},e.Track=stjs.extend(e.Track,null,[],function(e,t){t.clipitem=null,t.enabled="TRUE"},{clipitem:{name:"Array",arguments:["FCP.ClipItem"]}},{}),e.ClipItem=function(){this.sourcetrack=new FCP.SourceTrack},e.ClipItem=stjs.extend(e.ClipItem,null,[],function(e,t){t.id=null,t.name=null,t.duration=0,t.rate=null,t.enabled="TRUE",t._in=0,t.out=0,t.start=0,t.end=0,t.masterclipid=null,t.comments=null,t.file=null,t.sourcetrack=null},{rate:"FCP.Rate",comments:"FCP.Comments",file:"FCP.ClipItemFile",sourcetrack:"FCP.SourceTrack"},{}),e.Comments=function(){},e.Comments=stjs.extend(e.Comments,null,[],function(e,t){t.mastercomment1=null,t.mastercomment2=null,t.mastercomment3=null,t.mastercomment4=null,t.clipcommenta=null,t.clipcommentb=null},{},{}),e.comment=function(e,t,n,i,r,s){var o=new FCP.Comments;return o.mastercomment1=e,o.mastercomment2=t,o.mastercomment3=n,o.mastercomment4=i,o.clipcommenta=r,o.clipcommentb=s,o},e.SourceTrack=function(){},e.SourceTrack=stjs.extend(e.SourceTrack,null,[],function(e,t){t.mediatype=null,t.trackindex=1},{},{}),e.ClipItemFile=function(){},e.ClipItemFile=stjs.extend(e.ClipItemFile,null,[],function(e,t){t.id=null,t.name=null,t.rate=null,t.duration=0,t.media=null,t.pathurl=null},{rate:"FCP.Rate",media:"FCP.FileMedia"},{}),e.FileMedia=function(){},e.FileMedia=stjs.extend(e.FileMedia,null,[],function(e,t){t.video=null,t.audio=null},{video:"FCP.FileMediaVideo",audio:"FCP.FileMediaAudio"},{}),e.FileMediaVideo=function(){},e.FileMediaVideo=stjs.extend(e.FileMediaVideo,null,[],function(e,t){t.samplecharacteristics=null,t.duration=0},{samplecharacteristics:"FCP.SampleCharacteristics"},{}),e.SampleCharacteristics=function(){},e.SampleCharacteristics=stjs.extend(e.SampleCharacteristics,null,[],function(e,t){t.width=null,t.height=null,t.anamorphic=null,t.pixelaspectratio=null,t.rate=null,t.samplerate=null},{rate:"FCP.Rate"},{}),e.FileMediaAudio=function(){},e.FileMediaAudio=stjs.extend(e.FileMediaAudio,null,[],function(e,t){t.channelcount=0,t.samplecharacteristics=null},{samplecharacteristics:"FCP.SampleCharacteristics"},{}),t.getClipItems=function(){return this.sequence.media.video.track.clipitem},t.getTimebase=function(){return this.sequence.rate.timebase},t.isDropFrame=function(){return"TRUE".equals(this.sequence.rate.ntsc)&&24!=Math.round(this.getTimebase())},e.readFromInputStream=function(e){return null},e.rate=function(e){var t=new FCP.Rate;return t.ntsc="FALSE",t.timebase=e,t},e.MediaFormat=function(){},e.MediaFormat=stjs.extend(e.MediaFormat,null,[],function(e,t){t.samplecharacteristics=null},{samplecharacteristics:"FCP.SampleCharacteristics"},{}),e.sc=function(e,t,n,i,r,s,o,a,l,u,c,d){var p=new FCP.SimpleClip;return p.id=e,p.filename=t,p._in=n,p.out=i,p.start=r,p.end=s,p.duration=o,p.timebase=a,p.width=l,p.height=u,p.type=c,p.comments=d,p},e.SimpleClip=function(){},e.SimpleClip=stjs.extend(e.SimpleClip,null,[],function(e,t){t.id=null,t.filename=null,t._in=0,t.out=0,t.start=0,t.end=0,t.duration=0,t.timebase=0,t.width=0,t.height=0,t.type=null,t.masterClipId="TODO:UUID.randomUUID().toString().toUpperCase()",t.comments=null},{comments:"FCP.Comments"},{}),e.Marker=function(){},e.Marker=stjs.extend(e.Marker,null,[],function(e,t){t.name=null,t._in=0,t.out=0,t.comment=null},{},{}),e.marker=function(e,t,n,i){var r=new FCP.Marker;return r.name=e,r._in=t,r.out=n,r.comment=i,r},e.aclip=function(e){return e.id=e.id.replaceFirst("video","audio"),e.type="audio",FCP.clip(e)},e.clip=function(e){var t=new FCP.ClipItem;return t.id=e.id,t.name="Clips",t.duration=e.duration,t.rate=FCP.rate(e.timebase),t._in=e._in,t.out=e.out,t.start=e.start,t.end=e.end,t.comments=e.comments,t.masterclipid=e.masterClipId,t.file=new FCP.ClipItemFile,t.file.id="file-"+e.filename,t.file.name=e.filename,t.file.rate=FCP.rate(e.timebase),t.file.duration=e.duration,t.file.pathurl="file://localhost/"+e.filename,t.file.media=new FCP.FileMedia,t.file.media.video=new FCP.FileMediaVideo,t.file.media.video.samplecharacteristics=FCP.vsample(e.width,e.height,e.timebase),t.file.media.video.duration=e.duration,t.sourcetrack.mediatype=e.type,t.file.media.audio=new FCP.FileMediaAudio,t.file.media.audio.channelcount=2,t.file.media.audio.samplecharacteristics=new FCP.SampleCharacteristics,t.file.media.audio.samplecharacteristics.samplerate=48e3,t},e.vsample=function(e,t,n){var i=new FCP.SampleCharacteristics;return i.width=e,i.height=t,i.rate=FCP.rate(n),i.anamorphic="FALSE",i}},{sequence:"FCP.Sequence"},{});var VGTemplates=function(){};VGTemplates=stjs.extend(VGTemplates,null,[],function(e,t){e.dropDownTemplate=function(e,t){return VG["templates/player/ddown.html"]({className:e,title:t})},e.videologLogevent=function(e){return VG["templates/videolog/logevent.html"](e)},e.videologHint=function(e){var t='<ul class="rrtheme_videolog__hintlist">\n';return t+=e.map(function(e,t,n){return"<li data-tag-id='"+e.id+"'>"+e.displayName+"</li>"}).join("\n"),t+="</ul>"},e.rrVideologPlugin=function(e){return VG["templates/videolog/rrtheme_videolog_plugin.html"](e)},e.videologTrack=function(e,t){return VG["templates/videolog/videolog-track.html"]({pluginClass:e,width:t})},e.addonControlDepr=function(e){return VG["templates/player/addon-control.html"](e)},e.addonControl=function(e,t){var n={id:e,iconClass:t};return VG["templates/player/addon-control.html"](n)},e.dropDownItemTemplate=function(e,t){return VG["templates/player/ddown-item.html"]({className:e,item:t})},e.safeAreaItemTemplate=function(e,t){return VG["templates/player/safe-area-item.html"]({color:e,item:t})},e.imageCaptureTemplate=function(){return VG["templates/player/image-capture.html"]({})},e.videologEventTag=function(e,t){return t.map(function(t,n,i){return"<span class='"+e+"__tag-name'><span class='view-tag-displayName'>"+t+"</span><span class='vg_icon-x'></span></span>"}).join(", ")},e.modalRow=function(e,t,n,i){var r={trackName:e,author:t.displayName,state:n.displayName,createdDate:VGTemplates.toDateString(i)};return VG["templates/videolog/modal_row.html"](r)},e.toDateString=function(e){return new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"numeric",day:"2-digit",hour12:!0,hour:"numeric",minute:"numeric"}).replace(" AM","am").replace(", "," - ")},e.cropPluginTemplateElement=function(){return VG["templates/player/crop-plugin.html"](null)},e.queryByVGPartNumber=function(e,t){return e.querySelector("[vgpartn='"+t+"']")},e.elFromHTML=function(e,t){null==t&&(t=window.document);var n=t.createElement("div");return n.innerHTML=e,n.firstElementChild}},{},{});var DropDownMenu=function(e,t,n,i){this.title=e,this.className=t,this.items=null==n?[]:n,this.itemToElement=i};DropDownMenu=stjs.extend(DropDownMenu,null,[],function(e,t){t.title=null,t.className=null,t.items=null,t.itemToElement=null},{items:{name:"Array",arguments:["T"]},itemToElement:{name:"Function1",arguments:["T",{name:"ReactElement",arguments:["Object"]}]}},{});var ContexterConsts=function(){};ContexterConsts=stjs.extend(ContexterConsts,null,[],function(e,t){e.VG_CONTEXTER_CONTAINER="vg_contexter-container",e.VG_CONTEXTER_HEADER="vg_contexter-header",e.VG_CONTEXTER_HEADER_ACTIONS="vg_contexter-header__actions",e.VG_CONTEXTER_MODAL="vg_contexter-modal",e.VG_CONTEXTER_MODAL_CLOSE="vg_contexter-modal-close",e.VG_CONTEXTER_OPEN_LOG="vg_contexter-open_log",e.VG_CONTEXTER_OVERLAY_WORD="vg_contexter-overlay-word",e.VG_CONTEXTER_OVERLAY_WORDS="vg_contexter-overlay-words",e.VG_CONTEXTER_STATUSBAR="vg_contexter-statusbar",e.VG_CONTEXTER_TABLE_WRAPPER="vg_contexter-table-wrapper",e.VG_CONTEXTER_TOGGLE_OVERLAYS="vg_contexter-toggle_overlays",e.VG_CONTEXTER_TRACK="vg_contexter-track",e.VG_CONTEXTER_WORD="vg_contexter-word",e.VG_CONTEXTER_WORD_CONF_COUNT="vg_contexter-word-confCount",e.VG_CONTEXTER_WORD_DATA="vg_contexter-word__data",e.VG_CONTEXTER_WORD_INFO="vg_contexter-word__top",e.VG_CONTEXTER_WORD_LIST="vg_contexter-wordList",e.VG_CONTEXTER_WORD_NAME="vg_contexter-word-name"},{},{});var ContexterWord=function(e){this.name=e,this.confidence=0,this.confCount=0,this.values={},this.frames=[]};ContexterWord=stjs.extend(ContexterWord,null,[],function(e,t){t.name=null,t.confidence=0,t.confCount=0,t.values=null,t.frames=null},{values:{name:"Map",arguments:[null,null]},frames:{name:"Array",arguments:[null]}},{});var ViewConsts=function(){};ViewConsts=stjs.extend(ViewConsts,null,[],function(e,t){e.ABSOLUTE="absolute",e.ACTIVE="active",e.BACKGROUND_COLOR="background-color",e.BLOCK="block",e.BUTTON="button",e.CAPTIONS_LIST="captions-list",e.CLOSE="close",e.CLOSE_ICON="vg_icon-close",e.COLOR="color",e.COMPONENT_CONTAINER="component_container",e.DISPLAY="display",e.FADE="fade",e.FONT_SIZE="fontSize",e.HEIGHT="height",e.HIGHLIGHT_YELLOW="highlight--yellow",e.ID="id",e.KEY="key",e.LEFT="left",e.LIST="list",e.NONE="none",e.OFF="OFF",e.ON="ON",e.ON_SUBMIT="onSubmit",e.OPACITY="opacity",e.PANEL_COLOR="#232432",e.POSITION="position",e.PRIMARY_COLOR="#56c3fe",e.RANGE="range",e.RELATIVE="relative",e.STYLE="style",e.SUBMIT="submit",e.TEXT_YELLOW="text--yellow",e.TIME_ARROW="time-arrow",e.TYPE="type",e.VG_BLACK_BG="vg_black-bg",e.VG_BTN="vg_btn",e.VG_BTN_BLACK="vg_btn--black",e.VG_BTN_DEFAULT="vg_btn--default",e.VG_BTN_INFO="vg_btn--info",e.VG_BTN_PANEL="vg_btn--panel",e.VG_BTN_PRIMARY="vg_btn--primary",e.VG_CAPTION_HIGHLIGHT="vg_caption--highlight",e.VG_DEFAULT="vg_default",e.VG_DEFAULT_BG="vg_default-bg",e.VG_FORM_SEARCH="vg_form-search",e.VG_ICON_FLAG="vg_icon-flag",e.VG_ICON_LOCK="vg_icon-lock",e.VG_ICON_NOTAG="vg_icon-notag",e.VG_ICON_SEARCH="vg_icon-search",e.VG_ICON_TAG="vg_icon-tag",e.VG_ICON_UNLOCK="vg_icon-unlock",e.VG_INFO="vg_info",e.VG_INPUT_RANGE="vg_input--range",e.VG_INPUT_SEARCH="vg_input-search",e.VG_INPUT_SUBMIT="vg_input--submit",e.VG_LOADING_SPINNER="vg_loading-spinner",e.VG_PANEL="vg_panel",e.VG_PANEL_BG="vg_panel-bg",e.VG_PLUGIN_SEARCH="vg_plugin-search",e.VG_PRIMARY_BG="vg_primary-bg",e.VG_PRO_PANEL_CONTAINER="vg_proPanel__container",e.VG_RANGE="vg_range",e.VG_ZOOM="vg_zoom",e.VGTHEME_CONTROL_PLUS="vgtheme_control-plus",e.WIDTH="width",e.YELLOW_COLOR="yellow",e.Z_INDEX="zIndex"},{},{});var Point=function(){};Point=stjs.extend(Point,null,[],function(e,t){t.x=0,t.y=0},{},{});var TrackComponent=function(e){React.Component.call(this,e)};TrackComponent=stjs.extend(TrackComponent,React.Component,[],function(e,t){e.TrackProps=function(e,t,n,i){this.track=e,this.current=t,this.onClick=n,this.onDelete=i},e.TrackProps=stjs.extend(e.TrackProps,null,[],function(e,t){t.track=null,t.current=!1,t.onClick=null,t.onDelete=null},{track:"Track",onClick:{name:"Callback1",arguments:["DOMEvent"]},onDelete:{name:"Callback1",arguments:["DOMEvent"]}},{}),t.render=function(){var e="track-name";return this.props.current&&(e+=" active"),React.DOM.li({className:"li-item"},React.DOM.div({className:"track-name-wrapper",onClick:this.props.onClick},React.DOM.span({className:e},this.props.track.displayName)),React.DOM.span({className:"delete",onClick:this.props.onDelete},"DELETE"))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubtitleEntryProps=function(){};SubtitleEntryProps=stjs.extend(SubtitleEntryProps,null,[],function(e,t){t.row=null,t.key=null,t.className=null,t.timeline=null,t.onClick=null,t.selectedFrameRx=null,t.searchValue=null,t.viewType=null,t.inActiveItem=!1,t.zoomRow=0,t.scrollLock=!1,t.activeRowRx=null},{row:"SubtitleEntry",timeline:"Timeline",onClick:{name:"Callback1",arguments:["DOMEvent"]},selectedFrameRx:{name:"Rx.Subject",arguments:[null]},activeRowRx:{name:"Rx.Subject",arguments:["SubtitleEntry"]}},{});var VGControl=function(){};VGControl=stjs.extend(VGControl,null,[],function(e,t){t.getControlEl=function(e){}},{},{});var IVideologAsyncStorage=function(){};IVideologAsyncStorage=stjs.extend(IVideologAsyncStorage,null,[],function(e,t){t.tracksOfProxy=function(e,t){},t.trackEvents=function(e,t,n){},t.tagNameById=function(e){},t.trackById=function(e,t,n){},t.eventById=function(e,t,n){},t.saveTrack=function(e,t,n){},t.saveEvent=function(e,t,n){},t.deleteEvent=function(e){},t.deleteTrack=function(e){},t.clearTrack=function(e){},t.getEventChangedRx=function(){},t.getEventDeletedRx=function(){},t.getTrackDeletedRx=function(){},t.getTrackChangedRx=function(){}},{},{});var LogScale=function(e,t){this.m=e,this.k=t};LogScale=stjs.extend(LogScale,null,[],function(e,t){t.m=0,t.k=0,e._k=function(e){return e/(Math.E-1)},e.p=function(e){return Math.log((Math.E-1)*e+1)},e.sqrtScale=function(e,t,n){var i=LogScale._k(LogScale._k(n));return t*(Math.sqrt(4*i*(i-1)*LogScale.p(LogScale.p(e))/t+1)-1)/(2*(i-1))},e.invScale=function(e,t,n){var i=Math.sqrt(n*n-2*n+5),r=n-1,s=t+2*t/(r*(r+i)),o=2*t/(r*(r-i-2*r*e/t));return s+o},e._scale=function(e,t,n){return LogScale.sqrtScale(e,t,n)},e._lut=function(e,t,n){var i=[];i[0]=0;for(var r=1;r<=e;r++){var s;s=null!=n?n(r,e,t):LogScale._scale(r,e,t),i[r]=s}return i},e.intLut=function(e,t,n){var i=[];i[0]=0;for(var r=1;r<=e;r++){var s;s=null!=n?n(r,e,t):LogScale._waveScale(r,e,t),i[r]=parseInt(s)}return i},e.expCellFunction=function(e,t,n){return function(i){return parseInt((n-1)*Math.log(i/e)/Math.log(t/e))}},e.expLut=function(e,t,n){var i=new Array(n);i[0]=parseInt(e);for(var r=Math.log(t/e)/(n-1),s=1;s<n-1;s++){var o=i[0]*Math.exp(s*r);i[s]=parseInt(Math.round(o))}return i[n-1]=parseInt(t),i},t.scale=function(e){return LogScale._scale(e,this.m,this.k)},e._waveScale=function(e,t,n){return t*(Math.sqrt(4*n*(n-1)*e/t+1)-1)/(2*(n-1))},t.lut=function(e){return LogScale._lut(this.m,this.k,e)},t._intLut=function(e){return LogScale.intLut(this.m,this.k,e)}},{},{});var InfiniteProps=function(e,t,n){this.elementHeight=e,this.containerHeight=t,this.className=n};InfiniteProps=stjs.extend(InfiniteProps,null,[],function(e,t){t.useWindowAsScrollContainer=!1,t.displayBottomUpwards=!1,t.elementHeight=0,t.containerHeight=0,t.preloadBatchSize=null,t.preloadAdditionalHeight=null,t.className=null},{preloadBatchSize:"Object",preloadAdditionalHeight:"Object"},{});var TrackButtonsView=function(e){this.el=e,this.onEdlExportClickRx=Rx.Observable.fromEvent(e.querySelector(TrackButtonsView.selectorEDLExportButton),"click"),this.onEdlSaveClickRx=Rx.Observable.fromEvent(e.querySelector(TrackButtonsView.selectorEDLSaveButton),"click"),this.onMarkInRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.markInButtonSelector),"click"),this.onMarkOutRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.markOutButtonSelector),"click"),this.onNewTrackRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.newTrackButtonSelector),"click"),this.onHotKeysRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.hotkeysButtonSelector),"click")};TrackButtonsView=stjs.extend(TrackButtonsView,null,[],function(e,t){e.selector=".app-TrackButtonsView",e.markInButtonSelector=".view-markIn",e.markOutButtonSelector=".view-markOut",e.newTrackButtonSelector=".view-newTrack",e.selectorEDLExportButton=".edl .vg_icon-export",e.selectorEDLSaveButton=".edl .edl-save",e.hotkeysButtonSelector=".hotkeys",t.el=null,t.onMarkInRx=null,t.onMarkOutRx=null,t.onNewTrackRx=null,t.onEdlExportClickRx=null,t.onHotKeysRx=null,t.onEdlSaveClickRx=null},{el:"Element",onMarkInRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onMarkOutRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onNewTrackRx:{name:"Rx.Observable",arguments:["DOMEvent"]
},onEdlExportClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onHotKeysRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onEdlSaveClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]}},{});var SubClip=function(e,t,n){this.startTimecode=e,this.endTimecode=t,this.timecodeOverride=n};SubClip=stjs.extend(SubClip,null,[],function(e,t){t.id=null,t.title=null,t.startTimecode=null,t.endTimecode=null,t.timecodeOverride=null,t.thumbPath=null,t.createdById=null,t.thumbSec=0,e.fromEvent=function(e,t){var n=t.getTimeline(),i=new SubClip(n.getTapeByTv(e.startTv),n.getTapeByTv(e.endTv),n.getTapeByFrame(0));return i.id=e.subclipId,i.thumbSec=n.getSecByTv(e.startTv),i}},{},{});var ContexterWordFilmStrip=function(e){React.Component.call(this,e)};ContexterWordFilmStrip=stjs.extend(ContexterWordFilmStrip,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.word=null,t.totalFrames=0,t.rainbow=null,t.videoFramesCount=0,t.containerWidth=0},{word:"ContexterWord",rainbow:"Rainbow"},{}),t.render=function(){var e=stjs.bind(this,function(e){if(null!=e){e.width=this.props.containerWidth,e.height=30;var t=e.getContext("2d",null);t.fillStyle=this.getColorByValue(0),t.fillRect(0,0,e.width,e.height);for(var n=0;n<this.props.word.frames.length;n++){var i=this.props.word.frames[n],r=this.props.word.values[i];null==r&&(r=0),t.fillStyle=this.getColorByValue(r);var s=stjs.trunc(Math.round(i*e.width/this.props.videoFramesCount));t.fillRect(s,0,1,30)}}});return React.DOM.canvas({className:"vg-contextrer-word-filmstrip",ref:e})},t.getColorByValue=function(e){return"#"+this.props.rainbow.colourAt(Math.min(stjs.trunc(Math.round(300*e)),100))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var LeftTop=function(e,t){this.left=e,this.top=t};LeftTop=stjs.extend(LeftTop,null,[],function(e,t){t.left=null,t.top=null},{},{});var ZoomComponent=function(e){React.Component.call(this,e)};ZoomComponent=stjs.extend(ZoomComponent,React.Component,[],function(e,t){t.render=function(){var e=stjs.bind(this,function(e){var t=e.target;this.props.zoomRx.onNext(parseInt(t.value))});return React.DOM.div({className:"zoom-pipka"},React.DOM.div({className:"zoom-pipka-out"}),React.DOM.div({className:"container"},React.DOM.div({className:"container-items"},React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"}))),React.DOM.div({className:"zoomer"},React.DOM.input({type:"range",onChange:e}))),React.DOM.div({className:"zoom-pipka-in"}))},e.ZoomProps=function(e){this.zoomRx=e},e.ZoomProps=stjs.extend(e.ZoomProps,null,[],function(e,t){t.zoomRx=null},{zoomRx:{name:"Rx.Subject",arguments:[null]}},{})},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsSummaryProps=function(){};SubsSummaryProps=stjs.extend(SubsSummaryProps,null,[],function(e,t){t.key=null,t.onClick=null,t.className=null,t.subtitles=null,t.timeline=null,t.switchBtnClick=null,t.isSubsActive=!1,t.matchFound=!1,t.shiftCaptionsRx=null,t.scrollLocked=!1,t.onLock=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]},subtitles:"Subtitles",timeline:"Timeline",switchBtnClick:{name:"Callback1",arguments:["DOMEvent"]},shiftCaptionsRx:{name:"Rx.Subject",arguments:[null]},onLock:{name:"Callback1",arguments:["DOMEvent"]}},{});var SafeAreaView=function(){};SafeAreaView=stjs.extend(SafeAreaView,null,[],function(e,t){t.markup=function(e){},t.getElement=function(){},t.doApplyCrop=function(e){},t.safeAreaPosition=function(e,t){},t.toggleActionSafe=function(){},t.toggleCaptionSafe=function(){},t.isCaptionVisible=function(){},t.isActionVisible=function(){},t.toggleSafeArea=function(e,t){},t.getAspectRatio=function(){},t.setAspectRatio=function(e){},t.switchAspectRatio=function(e){}},{},{});var TimeCodeComponent=function(e,t){React.Component.call(this,e),this.onChange=t};TimeCodeComponent=stjs.extend(TimeCodeComponent,React.Component,[],function(e,t){e.TAPE="tape",e.STANDARD="standard",e.STEPS="steps",t.onChange=null,e.State=function(){},e.State=stjs.extend(e.State,null,[],null,{},{}),e.Props=function(e,t){this.key=e,this.onChange=t},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.key=null,t.value=null,t.onChange=null},{onChange:{name:"Callback1",arguments:["DOMEvent"]}},{}),e.timeCode=function(e,t,n,i){var r={};return React.createElement(TimeCodeComponent,r)},e.readOnlyTimeCode=function(e,t,n,i){var r={};return React.createElement(TimeCodeComponent,r)},t.render=function(){return React.DOM.input({value:"00:01:00:00",onChange:this.onChange})}},{onChange:{name:"Callback1",arguments:["DOMEvent"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsItemState=function(){};SubsItemState=stjs.extend(SubsItemState,null,[],function(e,t){t.subtitles=null,t.isExpanded=!1,t.matchFound=!1,t.scrollLocked=!1,t.timeTrack=0},{subtitles:"Subtitles"},{});var ReactViewUtils=function(){};ReactViewUtils=stjs.extend(ReactViewUtils,null,[],function(e,t){e.CLASS_NAME="className",e.className=function(e){return{className:e}},e.classNames=function(e){for(var t="",n=0;n<arguments.length;n++)t+=arguments[n]+" ";return ReactViewUtils.className(t)},e.VALUE="value",e.ON_SUBMIT="onSubmit",e.ON_CHANGE="onChange",e.ON_CLICK="onClick",e.REF="ref"},{},{});var ContainerProps=function(){};ContainerProps=stjs.extend(ContainerProps,null,[],function(e,t){t.key=null,t.isActive=!1,t.className=null},{children:{name:"Array",arguments:[{name:"ReactElement",arguments:["Object"]}]}},{});var ControlsPanelComponent=function(e){React.Component.call(this,e)};ControlsPanelComponent=stjs.extend(ControlsPanelComponent,React.Component,[],function(e,t){t.playerControlsCss="vg-player-controls",t.filmstripTimelineCss="vg-player-filmstrip_timeline",t.timeCodeValueCss="timecode_value",t.filmstripTimecodeCss="vg-player-filmstrip_timecode",t.render=function(){return React.DOM.div({className:this.playerControlsCss},React.DOM.div({className:"vg-player-controls-timeline"},React.DOM.div({className:"vg-player-controls-timeline_ruler"},React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i()),React.DOM.span({className:"vg-player-timeline-highlight",style:{width:"6%",left:"80%"}}),React.DOM.span({className:"vg-player-timeline-highlight",style:{width:"3.845%",left:"65%"}}),React.DOM.span({className:"vg-player-timeline-highlight",style:{width:"1%",left:"15%"}}),React.DOM.div({className:"vg-player-scrubber",style:{left:"35%"}},React.DOM.div({className:"vg-player-scrubber-tail"}),React.DOM.div({className:"vg-player-scrubber-nose"}))),React.DOM.div({className:"vg-player-controls-buttons"},React.DOM.div({className:"vg-player-controls-left"},React.DOM.span({className:"vg-icon vg-icon-information"}),React.DOM.span({className:"vg-icon vg-icon-volume"}),React.DOM.span({className:"vg-icon vg-icon-auto-black"})),React.DOM.div({className:"vg-player-controls-center"},React.DOM.div({className:"vg-controls-center group-1"},React.DOM.span({className:"vg-icon vg-icon-play-event"}),React.DOM.span({className:"vg-icon vg-icon-loop-event"}),React.DOM.span({className:"vg-icon vg-icon-bracket"}),React.DOM.span({className:"vg-icon vg-icon-bracket-close"}),React.DOM.span({className:"vg-icon vg-icon-new-event"})),React.DOM.div({className:"vg-controls-center group-2"},React.DOM.span({className:"vg-icon vg-icon-rewind"}),React.DOM.span({className:"vg-icon vg-icon-play"}),React.DOM.span({className:"vg-icon vg-icon-flash-forward"})),React.DOM.div({className:"vg-controls-center group-3"},React.DOM.span({className:"vg-icon vg-icon-full-screen"}),React.DOM.span({className:"vg-icon vg-icon-screen-shot"}),React.DOM.span({className:"vg-icon vg-icon-aspect-ratio"}),React.DOM.span({className:"vg-icon vg-icon-sub"}),React.DOM.span({className:"vg-icon vg-icon-save-zone"}))),React.DOM.div({className:"vg-player-controls-right"},React.DOM.input({className:"vg-controls-right-zoom-input",type:"range",min:"0",max:"100",step:"1"}))),React.DOM.div({className:"vg-player-filmstrip"},React.DOM.div({className:this.filmstripTimelineCss},this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!1,"")),React.DOM.div({className:"vg-player-filmstrip_canvas"},React.DOM.div({className:"filmstrip-crop-frame"}))))},t.rulerDashes=function(e,t){var n=null;return e&&(n=React.DOM.div({className:"bg-pyaka"},React.DOM.span({className:this.timeCodeValueCss},t))),React.DOM.div({className:this.filmstripTimecodeCss},React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),n)},e.State=function(){},e.State=stjs.extend(e.State,null,[],null,{},{}),e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],null,{},{})},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var Helpers=function(){};Helpers=stjs.extend(Helpers,null,[],function(e,t){e.playerWidthPercents=function(e){var t=e.container.clientWidth/window.document.body.clientWidth*100;return t+"%"}},{},{});var RangeInputProps=function(){};RangeInputProps=stjs.extend(RangeInputProps,null,[],function(e,t){t.points=null,t.min=0,t.max=0,t.value=0,t.onChange=null},{onChange:{name:"Callback1",arguments:["DOMEvent"]}},{});var ShotsView=function(){};ShotsView=stjs.extend(ShotsView,null,[],function(e,t){t.seekPrevShot=function(){throw new RuntimeException("seekPrevShot TODO")},t.seekNextShot=function(){throw new RuntimeException("seekNextShot TODO")}},{},{});var SubtitleEntryState=function(){};SubtitleEntryState=stjs.extend(SubtitleEntryState,null,[],function(e,t){t.start=null,t.end=null,t.isActive=!1},{},{});var Dimension=function(e,t){this.width=e,this.height=t};Dimension=stjs.extend(Dimension,null,[],function(e,t){t.width=0,t.height=0},{},{});var Range=function(e,t){this.start=e,this.end=t};Range=stjs.extend(Range,null,[],function(e,t){t.start=0,t.end=0,e.fromRange=function(e){return new Range(e.start,e.end)},t.bePositiveRange=function(){this.start<0&&(this.end=this.end+Math.abs(this.start),this.start=0)},t.contains=function(e){return e>=this.start&&e<=this.end},t.containsRange=function(e,t){return this.contains(e)&&this.contains(t)},t.isInbound=function(e){return this.start>=e.start&&this.end<=e.end},t.bound=function(e){return new Range(this.start<e.start?e.start:this.start,this.end>e.end?e.end:this.end)},t.length=function(){return this.end-this.start+1},t.duration=function(){return this.end-this.start+1},t.equals=function(e){var t=e;return t.start==this.start&&t.end==this.end},t.toString=function(){return"["+this.start+" "+this.end+"]"},t.overlapsRange=function(e){return null!=e&&(e.contains(this.start)||e.contains(this.end)||this.contains(e.start))},t._containsRange=function(e){return this.containsRange(e.start,e.end)},t.intersection=function(e){if(!this.overlapsRange(e))return null;if(this._containsRange(e))return Range.fromRange(e);if(e._containsRange(this))return Range.fromRange(this);if(e.start>this.start){var t=e.start,n=this.end;return new Range(t,n)}var n=e.end,t=this.start;return new Range(t,n)},t.offset=function(e){return new Range(this.start+e,this.end+e)},t.includeIn=function(e){if(this.start<e.start){var t=e.start-this.start;this.start=e.start,this.end+=t}if(this.end>e.end){var t=this.end-e.end;this.end=e.end,this.start-=t}return this},t.shift=function(e){return new Range(this.start+e,this.end+e)}},{},{});var WaveData=function(e,t){this.http=e,this.src=t,this.isLoading=!0,this.data=null,this.dataSamples=0,this.onLoadListeners=[]};WaveData=stjs.extend(WaveData,null,[],function(e,t){e.concurrentAjaxRequests=0,t.http=null,t.src=null,t.data8=null,t.data16=null,t.onerror=null,t.dataSampleRange=null,t.onLoadListeners=null,t.dataSamples=0,t.data=null,t.isLoading=!1,t.spp=0,t.containsSample=function(e){return this.dataSampleRange.contains(e)},t.containsRange=function(e,t){return this.containsSample(e)&&this.containsSample(t)},t.addOnLoadListener=function(e){this.onLoadListeners.push(e)},t._fireOnLoad=function(){for(var e=0;e<this.onLoadListeners.length;e++)this.onLoadListeners[e](this);this.onLoadListeners=[]},t.getDataSpp=function(){var e=this.dataSampleRange.duration(),t=this.dataSamples/e;return t},t.getSampleOffset=function(e){var t=this.getDataSpp();return stjs.trunc(Math.floor(t*e))},t._load=function(){var e=this;this.isLoading=!0,WaveData.concurrentAjaxRequests++,this.http.getArrayBuffer(this.src).subscribe(function(t){e.data8=new Uint8Array(t),e.data16=new Int16Array(t),e.data=e.data8,e.isLoading=!1,e._fireOnLoad()},function(t){null!=e.onerror&&e.onerror()})},t.getMinMax8=function(e,t){for(var n=0,i=0,r=Math.max(0,2*e),s=Math.min(this.data.length,2*t),o=r;o<s;o+=2){var a=o,l=this.data[a]-128,u=this.data[a+1]-128;l<n&&(n=l),u>i&&(i=u)}var c=Math.abs(n)+i;return c},t.getMax8=function(e,t){var n=0;e=Math.max(0,e);for(var i=Math.max(0,e);i<Math.min(this.data.length,t);i++){var r=this.data[i];r>n&&(n=r)}return n},t._getMinMax16=function(e,t){var n=e<<1,i=parseInt(this.data16[n]),r=parseInt(this.data16[n+1]);r=r<<8&255|r>>8&255,i=i<<8&255|i>>8&255,t[0]=r,t[1]=i},t.getMinMax16=function(e,t){var n=e<<2,i=0,r=0;if(n+3<this.data.length){var s=this.data[n],o=this.data[n+1],a=this.data[n+2],l=this.data[n+3];r=s<<8|o,i=a<<8|l}t[0]=i,t[1]=r}},{http:"Http",data8:"Uint8Array",data16:"Int16Array",onerror:"Callback0",dataSampleRange:"Range",onLoadListeners:{name:"Array",arguments:["Callback1"]},data:"Uint8Array"},{});var Curve=function(){};Curve=stjs.extend(Curve,null,[],function(e,t){t.range=null,t.bezierControlPoints=null},{range:"Range",bezierControlPoints:{name:"Array",arguments:["Point"]}},{});var VideoLogOptions=function(){};VideoLogOptions=stjs.extend(VideoLogOptions,null,[],function(e,t){e.RAM_STORAGE="RAM",e.REST_STORAGE="REST",t.storage=null,t.storageUrl=null,t.onStorageReady=null},{onStorageReady:{name:"Callback1",arguments:["VideologAsyncStorage"]}},{});var Position=function(e,t){this.left=e,this.top=t};Position=stjs.extend(Position,null,[],function(e,t){t.left=0,t.top=0},{},{});var ProPanelPlugins=function(){};ProPanelPlugins=stjs.extend(ProPanelPlugins,null,[],function(e,t){t.render=function(){var e={className:"vgtheme_pro-panel__right vg_default-bg vg_default"},t=React.DOM.div(e,"Plugins");return t}},{mixins:{name:"Array",arguments:[{name:"Class",arguments:["Object"]}]},statics:{name:"Map",arguments:[null,"Function0"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ShiftTimecodesState=function(){};ShiftTimecodesState=stjs.extend(ShiftTimecodesState,null,[],function(e,t){t.active=!1,t.timecode=null},{},{});var CSSStatus=function(e,t,n){this.rule=e,this.name=t,this.group=n,this.$id=CSSStatus.ids++};CSSStatus=stjs.extend(CSSStatus,null,[],function(e,t){e.ids=0,t.$id=0,t.rule=null,t.name=null,t.group=null},{rule:"MyCSSRule"},{});var SubsHeaderProps=function(){};SubsHeaderProps=stjs.extend(SubsHeaderProps,null,[],function(e,t){t.size=0,t.handleSubmit=null,t.searchValue=null,t.onChange=null,t.onAddCaptions=null,t.onIconClick=null,t.rowsViewType=null,t.zoomRows=null,t.zoomPoints=null,t.zoomMin=0,t.zoomMax=0,t.zoomValue=0},{handleSubmit:{name:"Callback1",arguments:["DOMEvent"]},onChange:{name:"Callback1",arguments:["DOMEvent"]},onAddCaptions:"Callback0",onIconClick:{name:"Callback1",arguments:[null]},zoomRows:{name:"Callback1",arguments:["DOMEvent"]}},{});var SubsPluginState=function(){};SubsPluginState=stjs.extend(SubsPluginState,null,[],function(e,t){t.items=null,t.activeItem=null,t.isSubsActive=!1,t.visible=!1,t.rowsViewType=null,t.searchValue=null,t.timeTrack=0,t.zoom=0},{items:{name:"Array",arguments:["Subtitles"]},activeItem:"Subtitles"},{});var ObjectDetectPlugin=function(){};ObjectDetectPlugin=stjs.extend(ObjectDetectPlugin,null,[],null,{},{});var CropMask=function(e,t,n,i){this.width=e,this.height=t,this.top=n,this.left=i};CropMask=stjs.extend(CropMask,null,[],function(e,t){t.width=0,t.height=0,t.top=0,t.left=0},{},{});var LogEventV4=function(){};LogEventV4=stjs.extend(LogEventV4,null,[],function(e,t){t.version=0,t.trackId=null,t.ownerId=null,t.id=null,t.name=null,t.tags=null,t.timescale=0,t.startTv=0,t.endTv=0,t.notes=null,t.subclipId=null,t.lastModified=null,t.created=null,t.onChange=null},{tags:{name:"Array",arguments:["LogEventTag"]},lastModified:"Date",created:"Date",onChange:{name:"Callback1",arguments:["DOMEvent"]}},{});var CutlistFilmstrip=function(e,t,n){throw exception("CutlistFilmstrip TODO")};CutlistFilmstrip=stjs.extend(CutlistFilmstrip,null,[],function(e,t){t.isVisible=!1},{},{});var ConfirmDialogView=function(e){this.el=e};ConfirmDialogView=stjs.extend(ConfirmDialogView,null,[],function(e,t){t.el=null,e.selectorYesButton=".view-yesBtn",e.selectorNoButton=".view-noBtn",t.onYesSubscr=null,t.onNoSubscr=null,t.onYesNo=function(e,t){this.dispose(),this.onYesSubscr=this.onYesClick().subscribe(e),this.onNoSubscr=this.onNoClick().subscribe(t)},t.onYesClick=function(){return Rx.Observable.fromEvent(this.el.querySelector(ConfirmDialogView.selectorYesButton),"click")},t.onNoClick=function(){return Rx.Observable.fromEvent(this.el.querySelector(ConfirmDialogView.selectorNoButton),"click")},t.close=function(){this.dispose(),this.el.classList.remove("active"),this.el.classList.add("hidden")},t.open=function(){this.el.classList.add("active"),this.el.classList.remove("hidden")},t.dispose=function(){null!=this.onYesSubscr&&this.onYesSubscr.dispose(),null!=this.onNoSubscr&&this.onNoSubscr.dispose()}},{el:"Element",onYesSubscr:"Rx.Disposable",onNoSubscr:"Rx.Disposable"},{});var SubItemProps=function(){};SubItemProps=stjs.extend(SubItemProps,null,[],function(e,t){t.key=null,t.subtitles=null,t.timeline=null,t.onClick=null,t.selectedFrameRx=null,t.isSubsActive=!1,t.switchBtnClick=null,t.selectedItemRx=null,t.visible=!1,t.searchValue=null,t.timeUpdateRx=null,t.activeRow=null,t.rowsViewType=null,t.timeTrack=0,t.isItemActive=!1,t.zoom=0},{subtitles:"Subtitles",timeline:"Timeline",onClick:{name:"Callback1",arguments:["DOMEvent"]},selectedFrameRx:{name:"Rx.Subject",arguments:[null]},switchBtnClick:{name:"Callback1",arguments:["DOMEvent"]},selectedItemRx:{name:"Rx.Subject",arguments:["Subtitles"]},timeUpdateRx:{name:"Rx.Observable",arguments:["TimeSample"]},activeRow:"SubtitleEntry"},{});var SelectedLogEvent=function(e,t,n){this.logEventId=e,this.action=n,this.trackId=t};SelectedLogEvent=stjs.extend(SelectedLogEvent,null,[],function(e,t){e.EDIT_END="editend",e.EDIT_START="editstart",t.logEventId=null,t.action=null,t.trackId=null,t.isEditEnd=function(){return this.action.equals(SelectedLogEvent.EDIT_END)},t.isEditStart=function(){return this.action.equals(SelectedLogEvent.EDIT_START)}},{},{});var ColorBulletDropDownMenuItem=function(e,t,n,i){this.id=e,this.title=t,this.color=n,this.onClick=i};ColorBulletDropDownMenuItem=stjs.extend(ColorBulletDropDownMenuItem,null,[],function(e,t){t.id=null,t.title=null,t.color=null,t.onClick=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]}},{});var ArrayChangeEvent=function(){};ArrayChangeEvent=stjs.extend(ArrayChangeEvent,null,[],function(e,t){t.removed=null,t.object=null,t.index=0,t.type=null,t.addedCount=0},{removed:{name:"Array",arguments:["T"]},object:{name:"ObservableArray",arguments:["T"]}},{});var DrawChannel=function(){};DrawChannel=stjs.extend(DrawChannel,null,[],function(e,t){t.startX=0,t.endX=0,t.sampleRange=null,t.uiSpp=0,t.channel=null,e.newDrawChannel=function(e,t,n,i,r){var s=new DrawChannel;return s.channel=e,s.startX=t,s.endX=n,s.sampleRange=i,s.uiSpp=r,s}},{sampleRange:"Range",channel:"PlayerAudioTrack"},{});var TagsInputComponent=function(e){React.Component.call(this,e)};TagsInputComponent=stjs.extend(TagsInputComponent,React.Component,[],function(e,t){e.State=function(){},e.State=stjs.extend(e.State,null,[],function(e,t){t.active=!1},{},{}),e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],null,{},{}),t.render=function(){return React.DOM.div({className:"vg-event-tag-ddown"},React.DOM.input({className:"vg-event-tag-ddown-input",placeholder:"+ Add tag"}),React.DOM.div({className:"vg-event-tag-ddown-tags"},React.DOM.ul({className:"vg-event-tag-ddown-tags-content"},React.DOM.li({className:"Bars and Tone"}),React.DOM.li({className:"Fade to Black"}),React.DOM.li({className:"Black"}),React.DOM.li({className:"Commercial Blank / Insert Ads"}),React.DOM.li({className:"Commercial Black"}),React.DOM.li({className:"Pull Commercial Black"}),React.DOM.li({className:"Bars and Tone"}),React.DOM.li({className:"Fade to Black"}))))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ObjectDetectView=function(){};ObjectDetectView=stjs.extend(ObjectDetectView,null,[],null,{},{});var TrackData=function(e,t){this.track=e,this.events=t,this.state=TrackData.STATE_IMPORTED};TrackData=stjs.extend(TrackData,null,[],function(e,t){e.STATE_IMPORTING="importing",e.STATE_IMPORTED="imported",e.STATE_ERROR="error",e.STATE_SAVED="saved",t.track=null,t.events=null,t.state=null},{track:"Track",events:{name:"Array",arguments:["LogEvent"]}},{});var HeaderComponent=function(e){React.Component.call(this,e)};HeaderComponent=stjs.extend(HeaderComponent,React.Component,[],function(e,t){e.headerContainerCss="vg-header",e.headerLeftCss="vg-header-left",e.headerItemCss="vg-header_menu-item",e.headerRightCss="vg-header-right",e.headerUserIcon="vg-icon vg-icon-user",e.State=function(){},e.State=stjs.extend(e.State,null,[],null,{},{}),e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],null,{},{}),t.render=function(){return React.DOM.div({className:HeaderComponent.headerContainerCss},React.DOM.div({className:HeaderComponent.headerLeftCss},React.DOM.span({className:HeaderComponent.headerItemCss},"Video Log"),React.DOM.span({className:HeaderComponent.headerItemCss},"Frame Match")),React.DOM.div({className:HeaderComponent.headerRightCss},React.DOM.span({className:HeaderComponent.headerItemCss},"Export"),React.DOM.span({className:HeaderComponent.headerItemCss},"Import"),React.DOM.span({className:HeaderComponent.headerUserIcon})))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SidePanelComponent=function(e){React.Component.call(this,e)};SidePanelComponent=stjs.extend(SidePanelComponent,React.Component,[],function(e,t){e.sadePanelCss="vg-side-panel",e.trackAreaContainerCss="vg-track-area-container",e.trackInputContainerCss="vg-track-input-container",e.trackInputCss="vg-track-input",t.iconScrollRightCss="vg-icon-right vg-icon-scroll",t.trackDropDownCss="vg-track-dropdown",t.trackItemCss="vg-track-item",t.trackItemActionsCss="vg-track-item-actions",t.iconEditCss="vg-icon-edit",t.iconDeleteTrackCss="vg-icon-delete-track",t.trackActionsCss="vg-track-actions",t.iconEditTrackCss="vg-icon vg-icon-edit",t.iconAddTrackCss="vg-icon vg-icon-add-track",t.tagsSearchAreaCss="vg-tags-search-area",t.selectedEventsCss="vg-selected-events",t.selectedEventsInputCss="vg-selected-events-input",t.iconRightSelectedCss="vg-icon-right vg-icon-show-select-inactive",t.tagsSearchCss="vg-tags-search",t.tagsSearchInputCss="vg-tags-search-input",t.iconSearchRightCss="vg-icon-right vg-icon-search",t.sidePanelFooterCss="vg-side-panel-footer",t.sidePanelFooterContentCss="vg-side-panel-footer-content",t.sidePanelFooterInputCss="vg-side-panel-footer-content-input",t.footerInputDdownCss="vg-side-panel-footer-content-input-dropdown",t.iconCopyCss="vg-icon vg-icon-copy",t.iconSelectAllCss="vg-icon vg-icon-select-all-new",t.iconGarbageCss="vg-icon vg-icon-garbage",e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],null,{},{}),e.State=function(){},e.State=stjs.extend(e.State,null,[],null,{},{}),t.render=function(){return React.DOM.div({className:SidePanelComponent.sadePanelCss},React.DOM.div({className:SidePanelComponent.trackAreaContainerCss},React.DOM.div({className:SidePanelComponent.trackInputContainerCss},React.DOM.input({className:SidePanelComponent.trackInputCss,placeholder:"Master",disabled:"true"}),React.DOM.span({className:this.iconScrollRightCss}),React.DOM.ul({className:this.trackDropDownCss},React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"Subtitle"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))),React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"Caption"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))),React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"QC Report"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))),React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"QC Problem"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))))),React.DOM.div({className:this.trackActionsCss},React.DOM.span({className:this.iconEditTrackCss}),React.DOM.span({className:this.iconAddTrackCss}))),React.DOM.div({className:this.tagsSearchAreaCss},React.DOM.div({className:this.selectedEventsCss},React.DOM.input({className:this.selectedEventsInputCss,placeholder:"Selected: 1",disabled:"true"}),React.DOM.span({className:this.iconRightSelectedCss})),React.DOM.div({className:this.tagsSearchCss},React.DOM.input({className:this.tagsSearchInputCss,type:"text",placeholder:"Search tag"}),React.DOM.span({className:this.iconSearchRightCss}))),React.DOM.div({className:this.sidePanelFooterCss},React.DOM.div({className:this.sidePanelFooterContentCss},React.DOM.input({className:this.sidePanelFooterInputCss,placeholder:"Tape Timecode",disabled:"true"}),React.DOM.span({className:this.iconScrollRightCss}),React.DOM.ul({className:this.footerInputDdownCss},React.DOM.li(null,"Tape Timecode"),React.DOM.li(null,"Frame Number"))),React.DOM.div(null,React.DOM.span({className:this.iconCopyCss}),React.DOM.span({className:this.iconSelectAllCss}),React.DOM.span({className:this.iconGarbageCss}))))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var FancySettings=function(){};FancySettings=stjs.extend(FancySettings,null,[],function(e,t){t.padding=0,t.paddingBottom=0},{},{});var ContainerState=function(){};ContainerState=stjs.extend(ContainerState,null,[],function(e,t){t.isActive=!1},{},{});var PluginProps=function(){};PluginProps=stjs.extend(PluginProps,null,[],function(e,t){t.name=null,t.key=null,t.player=null,t.containerWidth=0},{player:"VGPlayerPluginApi"},{});var PluginComponent=function(e){React.Component.call(this,e)};PluginComponent=stjs.extend(PluginComponent,React.Component,[],function(e,t){t.render=function(){return null}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VGControlComponent=function(e){React.Component.call(this,e)};VGControlComponent=stjs.extend(VGControlComponent,React.Component,[],function(e,t){e.REF_VGCOMPONENT="vgcomponent",e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.id=null,t.onClick=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]}},{}),t.render=function(){var e={paddingTop:"6px",paddingLeft:"4px"};return React.DOM.div({className:"vg_iconControls__item vg_ddown vg_info",ref:VGControlComponent.REF_VGCOMPONENT,id:this.props.id,onClick:this.props.onClick},React.DOM.div({style:e},"EDL"))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var LogEventListView=function(e){this.el=e,this.levById={},this.viewWeightArray=[]};LogEventListView=stjs.extend(LogEventListView,null,[],function(e,t){e.ViewWeight=function(e,t){this.id=e,this.weight=t},e.ViewWeight=stjs.extend(e.ViewWeight,null,[],function(e,t){t.id=null,t.weight=0},{},{}),e.selector=".app-LogEventsView",t.levById=null,t.el=null,t.viewWeightArray=null,t.viewById=function(e){return this.levById[e]},t.addEvent=function(e){this.levById[e.logEventId]=e;for(var t=null,n=0;n<this.viewWeightArray.length;n++){var i=this.viewWeightArray[n];if(e.getViewWeight()>i.weight){t=i.id;break}}null!=t?this.el.insertBefore(e.getElement(),this.levById[t].getElement()):this.el.appendChild(e.getElement()),this.viewWeightArray.push(new LogEventListView.ViewWeight(e.logEventId,stjs.trunc(e.getViewWeight()))),this.viewWeightArray.sort(function(e,t){return t.weight-e.weight})},t.deleteEvent=function(e){var t=this.levById[e];this.el.removeChild(t.getElement()),this.viewWeightArray=this.viewWeightArray.filter(function(t,n,i){return!t.id.equals(e)}),delete this.levById[e]}},{levById:{name:"Map",arguments:[null,"LogEventView"]},el:"Element",viewWeightArray:{name:"Array",arguments:["LogEventListView.ViewWeight"]}},{});var ProPanelIcons=function(){};ProPanelIcons=stjs.extend(ProPanelIcons,null,[],function(e,t){
t.render=function(){var e={className:"vgtheme_pro-panel__left vg_panel-bg"},t=React.DOM.div(e,"Icons");return t}},{mixins:{name:"Array",arguments:[{name:"Class",arguments:["Object"]}]},statics:{name:"Map",arguments:[null,"Function0"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ProgressBar=function(e){React.Component.call(this,e)};ProgressBar=stjs.extend(ProgressBar,React.Component,[],function(e,t){e.Props=function(e){this.progress=e},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.progress=0},{},{}),t.render=function(){var e,t,n={width:this.props.progress+"%"},i=this.props.progress>25?this.props.progress+"%":"";return e=React.DOM.span({className:"progress-bar__span",style:n},i),t=React.DOM.div({className:"progress-bar__wrapper"},e)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ShiftTimecodesProps=function(){};ShiftTimecodesProps=stjs.extend(ShiftTimecodesProps,null,[],function(e,t){t.startMsec=0,t.endMsec=0,t.shiftValue=null,t.shiftCaptionsRx=null,t.key=null},{shiftCaptionsRx:{name:"Rx.Subject",arguments:[null]}},{});var PluginData=function(e,t){this.id=e.getId(),this.plugin=e,this.icon=t};PluginData=stjs.extend(PluginData,null,[],function(e,t){t.id=null,t.plugin=null,t.container=null,t.icon=null},{plugin:"VGPlugin",container:"Element"},{});var DropDownMenuItem=function(e,t,n,i){this.id=e,this.title=t,this.selected=n,this.onClick=i};DropDownMenuItem=stjs.extend(DropDownMenuItem,null,[],function(e,t){t.id=null,t.title=null,t.selected=!1,t.onClick=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]}},{});var ZoomRangeProps=function(){};ZoomRangeProps=stjs.extend(ZoomRangeProps,null,[],function(e,t){t.points=null,t.min=0,t.max=0,t.value=0,t.onChange=null},{onChange:{name:"Callback1",arguments:["DOMEvent"]}},{});var SubtitlesMenuComponent=function(e){React.Component.call(this,e)};SubtitlesMenuComponent=stjs.extend(SubtitlesMenuComponent,React.Component,[],function(e,t){e.SubtitlesMenuProps=function(){},e.SubtitlesMenuProps=stjs.extend(e.SubtitlesMenuProps,null,[],function(e,t){t.id=null,t.iconClass=null},{},{}),t.render=function(){return React.DOM.div({id:this.props.id,"class":"vg_iconControls__item vg_ddown vg_info"},React.DOM.span({"class":this.props.iconClass}))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsSummaryState=function(){};SubsSummaryState=stjs.extend(SubsSummaryState,null,[],function(e,t){t.isSubsActive=!1,t.className=null},{},{});var VGContext=function(){};VGContext=stjs.extend(VGContext,null,[],function(e,t){t.className=null,t.tag=null,t.duration=0},{},{});var VGExposed=function(){};VGExposed=stjs.extend(VGExposed,null,[],function(e,t){e.CLIENT_SOLARR="solarr",t.client=function(){}},{},{});var VideoLogComponent=function(e){React.Component.call(this,e)};VideoLogComponent=stjs.extend(VideoLogComponent,React.Component,[],function(e,t){t.render=function(){return null},e.State=function(){},e.State=stjs.extend(e.State,null,[],null,{},{}),e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],null,{},{})},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var PlayerInfo=function(e,t,n){this.durationSec=e,this.durationSTC=t,this.durationTTC=n};PlayerInfo=stjs.extend(PlayerInfo,null,[],function(e,t){t.durationSec=0,t.durationSTC=null,t.durationTTC=null},{},{});var Track=function(e,t){this.displayName=e,this.owner=t,this.canWrite=!0,this.canDelete=!0,this.canRead=!0,this.state=TrackState.NEW,this.lastModified=Utils.currentTimeMillis(),this.version=1};Track=stjs.extend(Track,null,[],function(e,t){t.version=0,t.id=null,t.localId=null,t.mediaId=null,t.displayName=null,t.lastModified=0,t.created=0,t.state=null,t.type=null,t.importedFrom=null,t.owner=null,t.canRead=!1,t.canWrite=!1,t.canDelete=!1,e.fromJson=function(e){var t=stjs.hydrate(e.owner,User);e.owner=null;var n=stjs.hydrate(e,Track);n.owner=t;var i=e.state;if(i.equals(TrackState.CREATED.id))n.state=TrackState.CREATED;else if(i.equals(TrackState.EDITED.id))n.state=TrackState.EDITED;else if(i.equals(TrackState.NEW.id))n.state=TrackState.NEW;else{if(!i.equals(TrackState.DELETED.id))throw new RuntimeException("Unknown state: "+i);n.state=TrackState.DELETED}return n}},{state:"TrackState",type:{name:"Enum",arguments:["TrackType"]},owner:"User"},{});var EventComponent=function(e){React.Component.call(this,e)};EventComponent=stjs.extend(EventComponent,React.Component,[],function(e,t){e.doNothing=function(){},e.EVENT_CANVAS_HEIGHT=46,e.filmstripAbortFuncs={},e.nextCanvasId=0,e.EventProps=function(e,t,n,i,r,s,o,a){this.event=e,this.timeline=t,this.filmstripDrawer=n,this.width=i,this.current=r,this.selectEventRx=s,this.deleteEventRx=o,this.log=a},e.EventProps=stjs.extend(e.EventProps,null,[],function(e,t){t.event=null,t.timeline=null,t.filmstripDrawer=null,t.selectEventRx=null,t.deleteEventRx=null,t.width=0,t.current=!1,t.log=null},{event:"LogEvent",timeline:"Timeline",filmstripDrawer:"FilmStripDrawer",selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log"},{}),t.convertedTv=function(e){return Utils.convertTv(e,this.props.event.timescale,this.props.timeline.getTimeScale())},t.render=function(){var e=this.props.event,t=this.props.timeline.getFrameByTv(this.convertedTv(e.startTv)),n=this.props.timeline.getFrameByTv(this.convertedTv(e.endTv)),i=this.props.timeline.getTapeByTv(this.convertedTv(e.startTv)),r=this.props.timeline.getTapeByTv(this.convertedTv(e.endTv)),s=this.props.timeline.getFrameByTv(this.convertedTv(e.endTv-e.startTv)),o=stjs.bind(this,function(t){return this.props.selectEventRx.onNext(e)}),a=(stjs.bind(this,function(t){return this.props.deleteEventRx.onNext(e)}),stjs.bind(this,function(e){if(null!=e){var i;e.hasChildNodes()?i=e.firstChild:(i=window.document.createElement("canvas"),i.id=EventComponent.nextCanvasId++ +"");var r=EventComponent.filmstripAbortFuncs[i.id];null!=r&&(delete EventComponent.filmstripAbortFuncs[i.id],r());var s=EventComponent.EVENT_CANVAS_HEIGHT,o=e.clientWidth;i.style.setProperty("width","100%",null),i.style.setProperty("height","100%",null);var a=stjs.trunc(Math.max(1,Math.round(80*o/(144*s))));i.height=s,i.width=stjs.trunc(144*s/80)*a,r=this.props.filmstripDrawer.drawFilmstrip(i,t,n,a,!0,EventComponent.doNothing,stjs.bind(this.props.log,"error")),EventComponent.filmstripAbortFuncs[i.id]=r,e.hasChildNodes()||e.appendChild(i)}})),l=React.DOM.li({className:"vg-li-data"},React.DOM.div({className:"vg-log-data"},React.DOM.div({className:"vg_event__data"},React.DOM.div({className:"data"},React.DOM.div({className:"start-end-timecode"},React.DOM.span({className:"start_end_timecode"},React.DOM.span({},i),React.DOM.span({},"- "+r))),React.DOM.span({className:"duration"},React.DOM.span({}," "+s)),React.DOM.div({className:"data-keyword-container"},React.DOM.span({className:"data-keyword"},React.DOM.span({},e.name))))))),u=React.DOM.li({className:"vg-li-filmstrip"},React.DOM.div({className:"vg-log-filmstrip",style:{width:this.props.width+"%"},ref:a}));return React.DOM.li({onClick:o},React.DOM.div({className:"vg-log-event"},React.DOM.ul({},l,u)))}},{doNothing:"Callback0",filmstripAbortFuncs:{name:"Map",arguments:[null,"Callback0"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var TimeCodeView=function(e){this.el=e,this.tapeEl=Utils.querySelectorNotNull(e,TimeCodeView.selectorTapeTimeformat),this.standardEl=Utils.querySelectorNotNull(e,TimeCodeView.selectorStandardFormat),this.frameEl=Utils.querySelectorNotNull(e,TimeCodeView.selectorFrameFormat),this.activeEl=this.tapeEl};TimeCodeView=stjs.extend(TimeCodeView,null,[],function(e,t){e.selector=".app-timecodeView",t.el=null,e.FORMAT_TAPE="tape timecode",e.FORMAT_STANDARD="standard timecode",e.FORMAT_FRAME="frame",e.selectorTapeTimeformat="[data-timeformat='tape']",e.selectorStandardFormat="[data-timeformat='standard']",e.selectorFrameFormat="[data-timeformat='frame']",t.tapeEl=null,t.standardEl=null,t.frameEl=null,t.activeEl=null,t.showAsTape=function(){this.activeEl.classList.toggle("active"),this.tapeEl.classList.toggle("active"),this.activeEl=this.tapeEl},t.showAsStandard=function(){this.activeEl.classList.toggle("active"),this.standardEl.classList.toggle("active"),this.activeEl=this.standardEl},t.showAsFrame=function(){this.activeEl.classList.toggle("active"),this.frameEl.classList.toggle("active"),this.activeEl=this.frameEl},t.changeFormat=function(e){switch(e){case TimeCodeView.FORMAT_TAPE:this.showAsTape();break;case TimeCodeView.FORMAT_STANDARD:this.showAsStandard();break;case TimeCodeView.FORMAT_FRAME:this.showAsFrame();break;default:throw new RuntimeException("unknown time format"+e)}}},{el:"Element",tapeEl:"Element",standardEl:"Element",frameEl:"Element",activeEl:"Element"},{});var DropDown=function(e){this.container=e||window.document.createElement("div");var t=window.document.createComment(Utils.constructorName(this));this.container.appendChild(t),this.container.insertAdjacentHTML("beforeend",VG["templates/ddown.html"]({})),this.el=this.container.firstElementChild;var n=this;Utils.addMethod(this.el,"getView",function(){return n}),this.toggler=this.el.querySelector(".vgtheme__ddown-toggler"),this.list=this.el.querySelector(".vgtheme__ddown-list"),this.listHeader=this.el.querySelector(".vgtheme__ddown-list__header"),this.selected=this.el.querySelector(".vgtheme__ddown-selected"),this.setEventRx()};DropDown=stjs.extend(DropDown,null,[],function(e,t){t.container=null,t.el=null,t.toggler=null,t.list=null,t.listHeader=null,t.selected=null,t.togglerRx=null,t.listRx=null,t.deleteRx=null,t.setEventRx=function(){var e=this,t=this.toggler;this.togglerRx=Rx.Observable.fromEvent(t,"click").filter(function(e){return e.target.isSameNode(t)}),this.togglerRx.subscribe(function(e){return t.classList.toggle("active")}),this.listRx=Rx.Observable.fromEvent(this.list,"click");this.listRx.filter(function(e){return e.target.classList.contains("vgtheme__ddown-name")}).map(function(e){return e.target});this.deleteRx=this.listRx.filter(function(e){return e.target.classList.contains("vgtheme__ddown-delete")}).map(function(e){return e.target}),this.deleteRx.subscribe(function(t){e.list.removeChild(t.parentElement);var n=e.list.querySelector(".vgtheme__ddown-item vgtheme__ddown-name");null!=n?e.selectItem(n):e.selected.innerHTML=""})},t.selectItem=function(e){e.classList.add("active"),this.selected.innerHTML=e.innerHTML}},{container:"Element",el:"Element",toggler:"Element",list:"Element",listHeader:"Element",selected:"Element",togglerRx:{name:"Rx.Observable",arguments:["DOMEvent"]},listRx:{name:"Rx.Observable",arguments:["DOMEvent"]},deleteRx:{name:"Rx.Observable",arguments:["Element"]}},{});var TagComponent=function(e){React.Component.call(this,e)};TagComponent=stjs.extend(TagComponent,React.Component,[],function(e,t){e.iconDelete="vg-icon vg-icon-delete",e.eventTagCss="vg-event-tag",t.deleteIconClick=null,e.State=function(){},e.State=stjs.extend(e.State,null,[],function(e,t){t.disabled=!1},{},{}),e.Props=function(e,t){this.id=e,this.displayName=t,this.created=Utils.currentTimeMillis()},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.id=null,t.displayName=null,t.created=0,t.onClick=null,t.onRemove=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]},onRemove:{name:"Callback1",arguments:["DOMEvent"]}},{}),e.eventTag=function(e,t){var n={};return n.displayName=t,React.createElement(TagComponent,n)},t.render=function(){var e=null,t=new TagComponent.State;return t.disabled||(e=React.DOM.span({className:TagComponent.iconDelete,onClick:this.props.onRemove})),React.DOM.span({className:TagComponent.eventTagCss},this.props.displayName,e)}},{deleteIconClick:{name:"Callback1",arguments:["Object"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var LogEventTag=function(e,t){this.id=e,this.displayName=t,this.created=Utils.currentTimeMillis()};LogEventTag=stjs.extend(LogEventTag,null,[],function(e,t){t.id=null,t.displayName=null,t.created=0},{},{});var MaskedTimecodeInput=function(e,t){this.input=e,this.mask=t||"",this.input.value=this.mask;var n=this;this.input.addEventListener("input",stjs.bind(this,function(e){var t=e.target,i=t.value.substring(0,Math.min(n.newTextStart,t.selectionEnd)),r=this.cleanInput(t.value.substring(Math.min(n.newTextStart,t.selectionEnd),t.selectionEnd),!1),s=t.value.substring(t.selectionEnd),o=i.length+r.length;if(Utils.isNotEmpty(n.mask)){i=this.maskText(this.cleanInput(i,!0),0,i.length),o=i.length+this.maskText(r,i.length,0).length;var a=Math.max(0,n.mask.length-i.length-s.length);r=this.maskText(r,i.length,a);var l=Math.max(0,n.mask.length-i.length-r.length);s=t.value.substring(t.value.length-l),s=this.maskText(this.cleanInput(s,!0),n.mask.length-s.length,s.length)}t.value=i+r+s,t.selectionStart=o,t.selectionEnd=o})),this.input.addEventListener("keydown",function(e){var t=e.target;n.newTextStart=t.selectionStart})};MaskedTimecodeInput=stjs.extend(MaskedTimecodeInput,null,[],function(e,t){t.input=null,t.mask=null,t.newTextStart=0,t.maskText=function(e,t,n){if(null==this.mask)return e;var i=this,r="",s=i.mask.substring(t);e=e.substring(0);for(var o=0;o<s.length&&!Utils.isBlank(e);o++){var a=s.substring(o,o+1);"_".equals(a)?(r+=e.substring(0,1),e=e.substring(1)):r+=a}return n>0&&r.length<n&&(r+=s.substring(r.length,n)),r},t.cleanInput=function(e,t){for(var n="",i=t?new RegExp("^[0-9_]$"):new RegExp("^[0-9]$"),r=0;r<e.length;r++){var s=e.substring(r,r+1);i.test(s)&&(n+=s)}return n}},{input:"Input"},{});var TimecodeHelpers=function(){};TimecodeHelpers=stjs.extend(TimecodeHelpers,null,[],function(e,t){e.getNdftcByTv=function(e,t){var n=e.getTimeline();return n.getTapeByTv(t)},e.getTimecodedDuration=function(e,t){var n=e.getTimeline();return n.getTapeTimecode().getTimecodedDuration(t)},e.getTapeTimecodeByTv=function(e,t){var n=e.getTimeline();return n.getTapeTimecode().getTimecodeAtFrame(TimecodeHelpers.getFrameByTv(e,t))},e.getFrameByTv=function(e,t){var n=e.getTimeline();return n.getFrameByTv(t)},e.getFrameCount=function(e){var t=e.getTimeline();return t.getFrameCount()},e.getStandardByTv=function(e,t){var n=e.getTimeline(),i=n.getMillisByTv(t);return Utils.hhmmssms(i)},e.getStandardDurationByTv=function(e,t,n){var i=e.getTimeline(),r=i.getMillisByTv(t),s=i.getMillisByTv(n);return Utils.hhmmssms(s-r)},e.getStartTimecode=function(e){var t=e.getTimeline();return t.getTapeTimecode().getTimecodeAtFrame(0)},e.convertTimeScale=function(e,t,n){var i=e.getTimeline();return stjs.trunc(t*i.getTimeScale()/n)}},{},{});var ErrorPopupView=function(e,t){ElementView.call(this,e),this.log=t,this.errorsHistory=[]};ErrorPopupView=stjs.extend(ErrorPopupView,ElementView,[],function(e,t){e.ERROR_SERVER_COMMUNICATION="LogTool server request failed",e.selector=".error-informer",t.errorsHistory=null,t.log=null,t.showError=function(e){this.log.error(e),this.errorsHistory.push(e),this.el.innerHTML=e}},{errorsHistory:{name:"Array",arguments:[null]},log:"Log",el:"Element"},{});var FCPXml=function(e,t,n,i,r,s){this.duration=e,this.rate=t,this.width=n,this.height=i,this.filename=r,this.startTimeCode=s,this.fcp=this.initFCP()};FCPXml=stjs.extend(FCPXml,null,[],function(e,t){t.duration=0,t.rate=0,t.width=0,t.height=0,t.filename=null,t.fcp=null,t.startTimeCode=null,t.initFCP=function(){var e=this.filename,t=new FCP;return t.version=5,t.sequence=new FCP.Sequence,t.sequence.markers=new Array,t.sequence.id=e,t.sequence.uuid=e,t.sequence.name=this.filename,t.sequence.duration=this.duration,t.sequence.rate=FCP.rate(this.rate),t.sequence.timecode=new FCP.Timecode,t.sequence.timecode.rate=FCP.rate(this.rate),t.sequence.timecode.frame=0,t.sequence.timecode.string=this.startTimeCode,t.sequence.timecode.source="source",t.sequence.timecode.displayformat="NDF",t.sequence.media=new FCP.Media,t.sequence.media.video=new FCP.MediaElement,t.sequence.media.video.track=new FCP.Track,t.sequence.media.video.format=new FCP.MediaFormat,t.sequence.media.video.format.samplecharacteristics=FCP.vsample(this.width,this.height,this.rate),t.sequence.media.video.track.clipitem=new Array,t.sequence.media.audio=new FCP.MediaElement,t.sequence.media.audio.track=new FCP.Track,t.sequence.media.audio.track.clipitem=new Array,t},t.addLogEvent=function(e,t,n,i,r){var s=stjs.trunc(stjs.trunc(t/i)),o=stjs.trunc(stjs.trunc(n/i)),a=stjs.trunc(stjs.trunc(t/i)),l=stjs.trunc(stjs.trunc(n/i)),u=l-a,c=stjs.trunc(i),d="video",p=FCP.comment(r,null,null,null,null,null),h=FCP.sc(e,this.filename,s,o,a,l,u,c,this.width,this.height,d,p);this.fcp.sequence.media.video.track.clipitem.push(FCP.clip(h)),this.fcp.sequence.media.audio.track.clipitem.push(FCP.aclip(h))},t.addLogMarker=function(e,t,n,i,r){var s=stjs.trunc(stjs.trunc(t/i)),o=stjs.trunc(stjs.trunc(n/i)),a=FCP.marker(e,s,o,r);this.fcp.sequence.markers.push(a)},e.createXml=function(e){var t=FCPXml.getFCPDocument(e),n=t.querySelector("xmeml");n.setAttribute("version",""+e.version);var i=t.createElement("sequence");i.setAttribute("id",e.sequence.id),n.appendChild(i);var r=t.createElement("name");r.textContent=e.sequence.name,i.appendChild(r);var s=t.createElement("duration");s.textContent=e.sequence.duration+"",i.appendChild(s);var o=FCPXml.createRate(e);i.appendChild(o);var a=FCPXml.createTimecode(e);i.appendChild(a);var l=t.createElement("media");i.appendChild(l);var u=t.createElement("video");l.appendChild(u);var c=t.createElement("format");u.appendChild(c);var d=FCPXml.createSampleCharacteristics(e);c.appendChild(d);var p=t.createElement("track");u.appendChild(p);for(var h=0;h<e.sequence.media.video.track.clipitem.length;h++){var f=e.sequence.media.video.track.clipitem[h],m=t.createElement("clipitem");m.setAttribute("id","video-"+e.sequence.id+"-"+h),p.appendChild(m);var g=t.createElement("name");g.textContent=f.name,m.appendChild(g);var v=t.createElement("duration");v.textContent=f.duration+"",m.appendChild(v);var b=t.createElement("start");b.textContent=f.start+"",m.appendChild(b);var y=t.createElement("end");y.textContent=f.end+"",m.appendChild(y);var w=t.createElement("in");w.textContent=f._in+"",m.appendChild(w);var _=t.createElement("out");_.textContent=f.out+"",m.appendChild(_);var C=FCPXml.createComments(e,f);m.appendChild(C);var S=f.file,E=FCPXml.createClipFile(e,S);m.appendChild(E)}for(var h=0;h<e.sequence.markers.length;h++){var T=e.sequence.markers[h],x=t.createElement("marker");i.appendChild(x);var k=t.createElement("name");k.textContent=T.name,x.appendChild(k);var R=t.createElement("in");R.textContent=T._in+"",x.appendChild(R);var D=t.createElement("out");D.textContent=T.out+"",x.appendChild(D);var A=t.createElement("comment");A.textContent=T.comment,x.appendChild(A)}return t},t.log2xml=function(){var e=FCPXml.createXml(this.fcp),t=new XMLSerializer;return t.serializeToString(e)},e.createClipFile=function(e,t){var n=FCPXml.getFCPDocument(e),i=n.createElement("file");i.setAttribute("id",t.id);var r=n.createElement("name");r.textContent=t.name,i.appendChild(r);var s=n.createElement("pathurl");s.textContent=t.pathurl,i.appendChild(s);var o=n.createElement("media");i.appendChild(o);var a=n.createElement("video");o.appendChild(a);var l=n.createElement("duration");l.textContent=t.duration+"",a.appendChild(l);var u=FCPXml.createSampleCharacteristics(e);return a.appendChild(u),i},e.createSampleCharacteristics=function(e){var t=FCPXml.getFCPDocument(e),n=t.createElement("samplecharacteristics"),i=FCPXml.createRate(e);n.appendChild(i);var r=t.createElement("width");r.textContent=e.sequence.media.video.format.samplecharacteristics.width+"",n.appendChild(r);var s=t.createElement("height");s.textContent=e.sequence.media.video.format.samplecharacteristics.height+"",n.appendChild(s);var o=t.createElement("anamorphic");o.textContent=e.sequence.media.video.format.samplecharacteristics.anamorphic,n.appendChild(o);var a=t.createElement("pixelaspectratio");return a.textContent=e.sequence.media.video.format.samplecharacteristics.pixelaspectratio,n.appendChild(a),n},e.createTimecode=function(e){var t=FCPXml.getFCPDocument(e),n=t.createElement("timecode"),i=FCPXml.createRate(e);n.appendChild(i);var r=t.createElement("string");r.textContent=e.sequence.timecode.string,n.appendChild(r);var s=t.createElement("frame");s.textContent=e.sequence.timecode.frame+"",n.appendChild(s);var o=t.createElement("displayformat");return o.textContent=e.sequence.timecode.displayformat,n.appendChild(o),n},e.getFCPDocument=function(e){return(new DOMParser).parseFromString('<?xml version="1.0" encoding="UTF-8"?><xmeml version="'+e.version+'"></xmeml>',"text/xml")},e.createRate=function(e){var t=FCPXml.getFCPDocument(e),n=t.createElement("rate"),i=t.createElement("ntsc");i.textContent=e.sequence.rate.ntsc+"",n.appendChild(i);var r=t.createElement("timebase");return r.textContent=e.sequence.rate.timebase+"",n.appendChild(r),n},e.createComments=function(e,t){var n=FCPXml.getFCPDocument(e),i=n.createElement("comments"),r=n.createElement("mastercomment1");r.textContent=FCPXml.getCommentVal(t.comments.mastercomment1),i.appendChild(r);var s=n.createElement("mastercomment2");s.textContent=FCPXml.getCommentVal(t.comments.mastercomment2),i.appendChild(s);var o=n.createElement("mastercomment3");o.textContent=FCPXml.getCommentVal(t.comments.mastercomment3),i.appendChild(o);var a=n.createElement("mastercomment4");a.textContent=FCPXml.getCommentVal(t.comments.mastercomment4),i.appendChild(a);var l=n.createElement("clipcommenta");l.textContent=FCPXml.getCommentVal(t.comments.clipcommenta),i.appendChild(l);var u=n.createElement("clipcommentb");return u.textContent=FCPXml.getCommentVal(t.comments.clipcommentb),i.appendChild(u),i},e.getCommentVal=function(e){return null==e||"".equals(e)?"":e}},{fcp:"FCP"},{});var DropDownItem=function(e,t){this.id=e,this.title=t};DropDownItem=stjs.extend(DropDownItem,null,[],function(e,t){e.selectorItem=".view-item",t.id=null,t.title=null,t.ownTarget=!1,t.getInnerHTML=function(e){return VGTemplates.dropDownItemTemplate(e+"__list-item",this)},t.createElement=function(e){var t=window.document.createElement("li");return t.className=e+"__list-item",t.innerHTML=this.getInnerHTML(e),t},t.updateElement=function(e){var t=e.querySelector(DropDownItem.selectorItem);t.innerHTML=this.title,t.setAttribute("itemID",this.id)}},{},{});var VGGenericView=function(){CloseableView.call(this)};VGGenericView=stjs.extend(VGGenericView,CloseableView,[],function(e,t){t.el=null,t.container=null,t.getElement=function(){return this.el},t.appendTo=function(e){this.container=e,this.container.appendChild(this.el)}},{el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var SimpleDropDown=function(e,t,n){DropDownMenu.call(this,e,t,n,function(e){var n=t+"__list-item";return e.selected&&(n+=" active"),React.DOM.li({className:n,key:e.id,onClick:e.onClick},React.DOM.span({className:t+"__list-item__radio"}),React.DOM.span({className:t+"__list-item__label vg_info view-item",itemID:e.id},e.title))})};SimpleDropDown=stjs.extend(SimpleDropDown,DropDownMenu,[],null,{items:{name:"Array",arguments:["T"]},itemToElement:{name:"Function1",arguments:["T",{name:"ReactElement",arguments:["Object"]}]}},{});var ColorBulletDropDown=function(e,t,n){DropDownMenu.call(this,e,t,n,function(e){return React.DOM.li({className:t+"__list-item",key:e.id,onClick:e.onClick},React.DOM.div({className:"pipka pipka-"+e.color}),React.DOM.span({className:t+"__list-item__label vg_info view-item",itemID:e.id},e.title))})};ColorBulletDropDown=stjs.extend(ColorBulletDropDown,DropDownMenu,[],null,{items:{name:"Array",arguments:["T"]},itemToElement:{name:"Function1",arguments:["T",{name:"ReactElement",arguments:["Object"]}]}},{});var ContexterData=function(){this.wordsByFrame=[],this.wordByName={}};ContexterData=stjs.extend(ContexterData,null,[],function(e,t){t.wordsByFrame=null,t.wordByName=null,t.bestWords=null,t.filtered=null,t.parent=null,e.IGNORED=["a","on","of","the","in","with","and","is","to","an","two","at","next","are","his"].reduce(function(e,t,n,i){return e[t]=!0,e},{}),e.CONFIDENCE_FILTER_THRESHOLD=.1,e.CONFIDENCE_THRESHOLD=.03,t.filterByWordName=function(e){return this.filtered=new ContexterData,this.filtered.bestWords=this.bestWords.filter(function(t,n,i){return t.name.contains(e)}),this.filtered.wordsByFrame=this.wordsByFrame,this.filtered.wordByName=this.wordByName,this.filtered.parent=this,this.filtered},t.clear=function(){this.filtered=null},e.create=function(e){for(var t=new ContexterData,n=e.length,i=0;i<n;i++){for(var r=[],s=0;s<e[i].length;s++){var o=e[i][s][0];o=o.replace(" ","-");var a=e[i][s][1];if(null==ContexterData.IGNORED[o]&&a>ContexterData.CONFIDENCE_FILTER_THRESHOLD){var l=t.wordByName[o];null==l&&(l=new ContexterWord(o),t.wordByName[o]=l),l.values[i]=a,l.frames.push(i),r.push(l)}}t.wordsByFrame.push(r)}t.bestWords=[];for(var u={},i=0;i<n;i++)for(var c=t.wordsByFrame[i],d=0;d<c.length;d++){var p=c[d];null==u[p.name]&&(t.bestWords.push(p),u[p.name]=0),p.values[i]>ContexterData.CONFIDENCE_THRESHOLD&&(p.confCount++,u[p.name]=u[p.name]+p.values[i])}return t.bestWords.forEach(function(e){return e.confidence=u[e.name]/e.frames.length}),t.bestWords.sort(function(e,t){return t.confCount-e.confCount}),t}},{wordsByFrame:{name:"Array",arguments:[{name:"Array",arguments:["ContexterWord"]}]},wordByName:{name:"Map",arguments:[null,"ContexterWord"]},bestWords:{name:"Array",arguments:["ContexterWord"]},filtered:"ContexterData",parent:"ContexterData",IGNORED:{name:"Map",arguments:[null,null]}},{});var UIUtils=function(){};UIUtils=stjs.extend(UIUtils,null,[],function(e,t){e.getOffset=function(e){var t=new Point;if(null!=e.offsetParent){var n=UIUtils.getOffset(e.offsetParent);return t.x=n.x+e.offsetLeft,t.y=n.y+e.offsetTop,t}return t.x=e.offsetLeft,t.y=e.offsetTop,t},e.getScroll=function(e){if("fixed".equals(window.getComputedStyle(e,null).getPropertyValue("position")))return new Point;if(null!=e.parentElement){var t=UIUtils.getScroll(e.parentElement),n=new Point;return n.x=t.x+e.scrollLeft,n.y=t.y+e.scrollTop,n}var n=new Point;return n.x=e.scrollLeft,n.y=e.scrollTop,n},e.getPosition=function(e){var t=UIUtils.getOffset(e),n=UIUtils.getScroll(e),i=new Point;return i.x=t.x-n.x,i.y=t.y-n.y,i},e.plural=function(e,t){return t+" "+e+(1!=t?"s":"")},e.toPlainObject=function(e){return Object.assign({},e)}},{},{});var Bezier=function(e,t,n,i){this.p1=e,this.cp1=t,this.cp2=n,this.p2=i};Bezier=stjs.extend(Bezier,null,[],function(e,t){t.p1=null,t.cp1=null,t.cp2=null,t.p2=null,e.fromPoints=function(e){return new Bezier(e[0],e[1],e[2],e[3])},t.getPointOnCurve=function(e){var t=this.p1,n=this.cp1,i=this.cp2,r=this.p2,s=new Point;return s.x=r.x*Bezier.B1(e)+i.x*Bezier.B2(e)+n.x*Bezier.B3(e)+t.x*Bezier.B4(e),s.y=r.y*Bezier.B1(e)+i.y*Bezier.B2(e)+n.y*Bezier.B3(e)+t.y*Bezier.B4(e),s},e.B4=function(e){return(1-e)*(1-e)*(1-e)},e.B3=function(e){return 3*e*(1-e)*(1-e)},e.B2=function(e){return 3*e*e*(1-e)},e.B1=function(e){return e*e*e}},{p1:"Point",cp1:"Point",cp2:"Point",p2:"Point"},{});var AddMediaControl=function(e,t){this.player=e,this.onIconClick=t};AddMediaControl=stjs.extend(AddMediaControl,null,[VGControl],function(e,t){t.iconClickRx=null,t.player=null,t.onIconClick=null,t.getControlEl=function(e){var t=VGTemplates.elFromHTML(VGTemplates.addonControl("vg_camera","vg_icon-plus"),this.player.container.ownerDocument);return this.iconClickRx=Rx.Observable.fromEvent(t,"click",function(e){return t}),this.iconClickRx.subscribe(stjs.bind(this,function(e){this.player.pause(),this.onIconClick(this.player)})),t}},{iconClickRx:{name:"Rx.Observable",arguments:["Element"]},player:"PlayerImpl",onIconClick:{name:"Callback1",arguments:["PlayerImpl"]}},{});var FrameCropCaptureControl=function(e,t){this.player=e,this.onCaptureOpen=t};FrameCropCaptureControl=stjs.extend(FrameCropCaptureControl,null,[VGControl],function(e,t){t.cameraClickRx=null,t.player=null,t.onCaptureOpen=null,t.getControlEl=function(e){var t=VGTemplates.elFromHTML(VGTemplates.addonControl("vg_camera","vg_icon-camera"),this.player.container.ownerDocument);return this.cameraClickRx=Rx.Observable.fromEvent(t,"click",function(e){return t}),this.cameraClickRx.subscribe(stjs.bind(this,function(e){var t=this.player.getView().freezeVideo();this.onCaptureOpen(t)})),t}},{cameraClickRx:{name:"Rx.Observable",arguments:["Element"]},player:"PlayerImpl",onCaptureOpen:{name:"Callback1",arguments:["Canvas"]}},{});var VideologAsyncStorage=function(e){this.log=e,this.displayNamesById={},this.trackChangedRx=new Rx.ReplaySubject,this.trackDeletedRx=new Rx.ReplaySubject,this.eventChangedRx=new Rx.ReplaySubject,this.eventDeletedRx=new Rx.ReplaySubject};VideologAsyncStorage=stjs.extend(VideologAsyncStorage,null,[IVideologAsyncStorage],function(e,t){t.trackChangedRx=null,t.trackDeletedRx=null,t.eventChangedRx=null,t.eventDeletedRx=null,t.displayNamesById=null,t.log=null,e.defaultTrackNames=["Sub-Titling","Comments","Promo","Compliance","Commercials","Textless Elements","Dubbing"],t.getEventChangedRx=function(){return this.eventChangedRx},t.getTrackDeletedRx=function(){return this.trackDeletedRx},t.getTrackChangedRx=function(){return this.trackChangedRx},t.getEventDeletedRx=function(){return this.eventDeletedRx},e.canBeTrackName=function(e){for(var t=!0,n=0;n<VideologAsyncStorage.defaultTrackNames.length;n++){var i=VideologAsyncStorage.defaultTrackNames[n];if(i.equals(e)){t=!1;break}}return t},e.getTagNames=function(e){return e.map(function(e,t,n){return e.displayName})},t.findTagDisplayNames=function(e){return VideologAsyncStorage._findTagNames(this.displayNamesById,e)},e._findTagNames=function(e,t){if(Utils.isBlank(t))return[];var n=t.toLowerCase(),i=Utils.filterMap(e,function(e,t){return e.toLowerCase().contains(n)}),r=[];for(var s in i){var o=i[s],a={id:s,displayName:o};r.push(a)}return r.sort(function(e,t){return e.displayName.compareTo(t.displayName)}),r.sort(function(e,t){var i=e.displayName.toLowerCase(),r=t.displayName.toLowerCase(),s=Utils.min(VideologAsyncStorage.splitWords(i).map(function(e,t,i){return e.indexOf(n)}).filter(function(e,t,n){return e!=-1})),o=Utils.min(VideologAsyncStorage.splitWords(r).map(function(e,t,i){return e.indexOf(n)}).filter(function(e,t,n){return e!=-1})),a=s-o;if(0==a){var l=i.indexOf(n),u=r.indexOf(n);a=l-u}return a}),r},e.splitWords=function(e){return e.split(" ")},t.tagNameById=function(e){return this.displayNamesById[e]},t.trackById=function(e,t,n){this._trackById(e,t,n)},t.eventById=function(e,t,n){this._eventById(e,t,n)},t.saveTrack=function(e,t,n){this._saveTrack(e,stjs.bind(this,function(e){this.trackChangedRx.onNext(e),t(e)}),n)},t.saveEvent=function(e,t,n){this._saveEvent(e,stjs.bind(this,function(e){this.eventChangedRx.onNext(e),t(e)}),n)},t.rollbackEventFromServer=function(e){this.eventById(e,stjs.bind(this,function(t){this.log.debug("rollback for event",e),this.eventChangedRx.onNext(t)}),stjs.bind(this,function(e){return this.log.error("can not rollback event!")}))},t.deleteTrack=function(e){this.log.debug("track deleted",e),this._deleteTrack(e,stjs.bind(this.trackDeletedRx,"onNext"))},t.deleteEvent=function(e){this._deleteEvent(e,stjs.bind(this.eventDeletedRx,"onNext"));
},t.clearTrack=function(e){this.trackEvents(e.id,stjs.bind(this,function(t){for(var n=0;n<t.length;n++)this.eventDeletedRx.onNext(t[n]);this._clearTrack(e,stjs.bind(this,function(e){this.log.debug("Track deleted: "+e.displayName)}))}),stjs.bind(this,function(e){this.log.error("can not delete logevent")}))},t.updateEventById=function(e,t,n,i){this.eventById(e,stjs.bind(this,function(e){e=t(e),null!=e&&this.saveEvent(e,n,i)}),i)},t.trackEvents=function(e,t,n){},t.tracksOfProxy=function(e,t){},t._trackById=function(e,t,n){},t._eventById=function(e,t,n){},t._saveTrack=function(e,t,n){},t._saveEvent=function(e,t,n){},t._deleteTrack=function(e,t){},t._clearTrack=function(e,t){},t._deleteEvent=function(e,t){}},{trackChangedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},trackDeletedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},eventChangedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},eventDeletedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},displayNamesById:{name:"Map",arguments:[null,null]},log:"Log",defaultTrackNames:{name:"Array",arguments:[null]}},{});var BlobDataSrc=function(e){throw new RuntimeException("BlobDataSrc TODO")};BlobDataSrc=stjs.extend(BlobDataSrc,null,[DataSrc],function(e,t){t.fetch=function(e,t,n,i){throw new RuntimeException("TODO")}},{},{});var TimeScrubberView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this.duration=e.getSeekableDurationSec();var r=this.durationString(this.duration);this.render(VG["templates/player/timescrubber.html"]({duration:r})),this.el.className="vg_timescrubber",this.currentTimeEl=this.el.querySelector(".vg_current-time"),this.durationEl=this.el.querySelector(".vg_duration-time"),this.scrubberEl=this.el.querySelector(".vg_scrubber"),this.scrubberPlayedEl=this.scrubberEl.querySelector(".vg_scrubber__played"),this.scrubberBufferedEl=this.scrubberEl.querySelector(".vg_scrubber__buffered"),this.timescrubberWrap=this.el.querySelector(".vg_timescrubber__wrap");var s=Rx.Observable.fromEvent(this.timescrubberWrap,"mousemove"),o=stjs.bind(this,function(e){if(this.player.getView().scrubbing){var t=VGView.offsetX(e.clientX,this.timescrubberWrap);this.scrubberPlayedEl.style.width=t+"px"}}),a=Rx.Observer.create(o);this.scrubberMoveRx=Rx.Subject.create(a,s),this.scrubberDownRx=Rx.Observable.fromEvent(this.scrubberEl,"mousedown"),this.scrubberMoveRx.subscribe(o),e.getPlayRx().subscribe(stjs.bind(this,function(e){this.currentTimeEl.classList.contains("active")||this.currentTimeEl.classList.add("active")})),e.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){this.updateCurrentTime(t),this.player.getView().scrubbing||(this.updateScrubberPlayed(t),this.updateBuffered(e.getBuffered()))})),e.getTimelineRx().subscribe(stjs.bind(this,function(t){t.getSeekableDurationSec()!=this.duration&&(this.updateDuration(t),this.updateScrubberPlayed(e.getTimeSample()),this.updateBuffered(e.getBuffered()))})),e.addEventListener("progress",stjs.bind(this,function(e){this.updateBuffered(e)}))};TimeScrubberView=stjs.extend(TimeScrubberView,VGView,[],function(e,t){t.player=null,t.scrubberEl=null,t.scrubberMoveRx=null,t.scrubberDownRx=null,t.currentTimeEl=null,t.scrubberPlayedEl=null,t.scrubberBufferedEl=null,t.durationEl=null,t.timescrubberWrap=null,t.duration=0,t.durationString=function(e){var t=!isFinite(e)||isNaN(e)?"Unknown":Utils.hhmmss(stjs.trunc(1e3*e));return t},t.updateDuration=function(e){this.duration=e.getSeekableDurationSec(),this.player.getLog().debug("updateDuration",this.duration);var t=this.durationString(this.duration);this.durationEl.innerHTML=t},t.updateScrubberPlayed=function(e){var t=e.sec;this.scrubberPlayedEl.style.width=t/this.duration*100+"%"},t.updateCurrentTime=function(e){this.currentTimeEl.innerHTML=Utils.hhmmss(stjs.trunc(1e3*e.sec))},t.updateBuffered=function(e){this.scrubberBufferedEl.innerHTML="";for(var t=0;t<e.length;t++)if(!(this.player.getCurrentTime()<e[t].start||this.player.getCurrentTime()>e[t].end)){var n=e[t].start,i=n/this.duration*100,r=(e[t].end-n)/this.player.getDurationSec()*100,s=window.document.createElement("div");s.style.left=Math.min(100,i)+"%",s.style.width=Math.min(100-i,r)+"%",this.scrubberBufferedEl.appendChild(s)}}},{player:"SkinnedPlayer",scrubberEl:"Element",scrubberMoveRx:{name:"Rx.Subject",arguments:["DOMEvent"]},scrubberDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},currentTimeEl:"Element",scrubberPlayedEl:"Element",scrubberBufferedEl:"Element",durationEl:"Element",timescrubberWrap:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGThemeView=function(e,t,n,i){VGView.call(this,e,t,n),this.render(VG["templates/vg_addon-control.html"](i)),this.el.className="vg_addonview",this.icon=this.el.querySelector("."+i.iconClass),this.list=this.el.querySelector("."+i[VGThemeView.tracksClass]),this.tracksInfo=this.el.querySelector(".vg_tracksInfo"),this.header=this.el.querySelector(".vg_headerText")};VGThemeView=stjs.extend(VGThemeView,VGView,[],function(e,t){e.tracksClass="tracksClass",t.icon=null,t.list=null,t.tracksInfo=null,t.header=null,e.magicContext=function(e,t,n){var i={};return i.header=t,i.iconClass=e,i[VGThemeView.tracksClass]=n,i}},{icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FrameSelectionsView=function(e,t,n,i){VGView.call(this,t,n,i),this.frameSelections=e;var r=this;r.render(""),r.el.className="vg_selections",e.selectionsChangeRx.subscribe(stjs.bind(this,function(e){var t;0!=e.removed.length?(t=e.removed[0],this.removeSelection(t)):(t=e.object.get(e.index),this.appendSelection(t))}))};FrameSelectionsView=stjs.extend(FrameSelectionsView,VGView,[],function(e,t){t.frameSelections=null,t.appendSelection=function(e){var t={left:e.start/e.duration*100+"%",width:(e.end-e.start)/e.duration*100+"%",startHhmmss:Utils.hhmmss(stjs.trunc(1e3*e.start)),endHhmmss:Utils.hhmmss(stjs.trunc(1e3*e.end))},n=window.document.createElement("div");this.el.appendChild(n),n.innerHTML=VG["templates/player/selections.html"](t),e.el=n},t.removeSelection=function(e){this.el.removeChild(e.el)}},{frameSelections:"FrameSelections",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FrameCaptureView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this._parent=e.getView()};FrameCaptureView=stjs.extend(FrameCaptureView,VGView,[VGControl],function(e,t){t.cameraClickRx=null,t._parent=null,t.player=null,t.getControlEl=function(e){var t={id:"vg_camera",iconClass:"vg_icon-camera"},n=VGTemplates.elFromHTML(VGTemplates.addonControlDepr(t),this.player.container.ownerDocument);this.cameraClickRx=Rx.Observable.fromEvent(n,"click",function(e){return n});var i=window.document.createElement("a");return this.cameraClickRx.subscribe(stjs.bind(this,function(e){this._parent.freezeVideo(),i.href=this._parent.getFrozenCanvas().toDataURL("image/jpeg");var t=this.player.getCurrentStandardTimecode();i.download="Screenshot-"+t.replaceAll(":","-")+".jpg",i.click()})),n}},{cameraClickRx:{name:"Rx.Observable",arguments:["Element"]},_parent:"SkinnedPlayerView",player:"PlayerImpl",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var PluginsPanelView=function(e,t,n,i,r,s){VGView.call(this,t,i,r),this.player=e,this.toggle=s,this.render(VG["templates/player/propanel.html"]({})),this.el.className=ViewConsts.VG_PRO_PANEL_CONTAINER,n&&this.el.classList.add("hidden"),this.overlay=this.el.querySelector(".vg_proPanel__overlay"),this.scrubTrackEl=this.overlay.querySelector(".vg_proPanel__scrubtrack");var o=Rx.Observable.fromEvent(this.overlay,"mousemove"),a=stjs.bind(this,function(t){if(e.getView().scrubbing){var n=this.overlay.clientWidth,i=VGView.offsetX(t.clientX,this.overlay),r=i/n*100;this.scrubTrackEl.style.left=r+"%"}}),l=Rx.Observer.create(a);this.overlayMoveRx=Rx.Subject.create(l,o),this.overlayDownRx=Rx.Observable.fromEvent(this.overlay,"mousedown"),this.overlayMoveRx.subscribe(a),e.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){if(!e.getView().scrubbing){var n=t.sec;this.scrubTrackEl.style.left=n/e.getDurationSec()*100+"%"}})),null!=s&&s.addEventListener("click",stjs.bind(this,function(e){this.toggleActive(this.el)}))};PluginsPanelView=stjs.extend(PluginsPanelView,VGView,[],function(e,t){t.player=null,t.toggle=null,t.overlay=null,t.overlayMoveRx=null,t.overlayDownRx=null,t.scrubTrackEl=null},{player:"SkinnedPlayer",toggle:"Element",overlay:"Element",overlayMoveRx:{name:"Rx.Subject",arguments:["DOMEvent"]},overlayDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},scrubTrackEl:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FilmstripView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this.render(VG["templates/player/filmstrip.html"]({})),this.el.className="vg_filmstrip",this.canvas=this.el.querySelector(".vg_filmstrip__canvas"),e.getFilmStripDrawer(stjs.bind(this,function(e){this.drawer=e,this.draw()})),e.getTimelineRx().subscribe(stjs.bind(this,function(e){null!=this.drawer&&e.getSeekableDurationSec()!=this.lastSeekableDuration&&this.draw()}));var r=Rx.Observable.fromEvent(window,"resize");this.resizeSubscription=r.debounce(500).subscribe(stjs.bind(this,function(e){return this.draw()}))};FilmstripView=stjs.extend(FilmstripView,VGView,[],function(e,t){t.player=null,t.drawer=null,t.resizeSubscription=null,t.canvas=null,t.fromFrame=0,t.toFrame=0,t.hasRange=!1,t.lastSeekableDuration=0,t.draw=function(){if(!(null==this.drawer||this.canvas.clientWidth<=0||this.canvas.clientHeight<=0)){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight;var e=this.drawer.getInfo().width,t=this.drawer.getInfo().height,n=e/t,i=this.canvas.height*n,r=stjs.trunc(Math.ceil(this.canvas.width/i)),s=this.player.getTimeline(),o=this.hasRange?this.fromFrame:0,a=this.hasRange?this.toFrame:s.getFrameBySec(s.getSeekableDurationSec())-1;this.lastSeekableDuration=s.getSeekableDurationSec(),this.drawer.drawFilmstrip(this.canvas,o,a,r,!1,stjs.bind(this,function(){this.player.getLog().debug("filmstrip rendered")}),stjs.bind(this,function(e){this.player.getLog().error(e)}))}},t.setRange=function(e,t){this.fromFrame=e,this.toFrame=t-1,this.hasRange=!0},t.clearRange=function(){this.hasRange=!1},t.close=function(){CloseableView.prototype.close.call(this),null!=this.drawer&&this.drawer.close(),this.resizeSubscription.dispose()}},{player:"PlayerImpl",drawer:"FilmStripDrawer",resizeSubscription:"Rx.Disposable",canvas:"Canvas",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGThemeProPanelView=function(e,t,n){VGView.call(this,e,t,n),this.render(VG["templates/theme_propanel.html"]({})),this.iconsEl=this.el.querySelector(".vgtheme_pro-panel__plugin-icons"),this.pluginsEl=this.el.querySelector(".vgtheme_pro-panel__plugin-views"),this.getMaxHeight(),this.setEventRx()};VGThemeProPanelView=stjs.extend(VGThemeProPanelView,VGView,[],function(e,t){t.iconsEl=null,t.pluginsEl=null,t.getMaxHeight=function(){},t.addPluginView=function(){throw new RuntimeException("addPluginView TODO")},t.activeIcon=null,t.setEventRx=function(){var e=Rx.Observable.fromEvent(this.iconsEl,"click"),t=e.filter(function(e){return e.target.classList.contains("vg_icon--plugin")}).map(function(e){return e.target});t.subscribe(stjs.bind(this,function(e){e!=this.activeIcon&&(this.deactivateIcon(),this.activeIcon=e),this.activeIcon.classList.toggle("active")}))},t.deactivateIcon=function(){null!=this.activeIcon&&this.activeIcon.classList.remove("active")}},{iconsEl:"Element",pluginsEl:"Element",activeIcon:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SafeAreaViewRR=function(e,t,n){VGView.call(this,e,t,"vg_safe-area"),this.player=n,this.render(this.markup("action-safe")+this.markup("caption-4-3")+this.markup("caption-16-9")),this.resize=Rx.Observable.fromEvent(window,"resize").subscribe(stjs.bind(this,function(e){if(this.actionVisible){var t=this.el.querySelector(".safe-container.action-safe");this.safeAreaPosition(n,t)}if(this.captionVisible){var t=this.el.querySelector(".safe-container.caption-"+this.aspectRatio);this.safeAreaPosition(n,t)}}))};SafeAreaViewRR=stjs.extend(SafeAreaViewRR,VGView,[SafeAreaView],function(e,t){t.player=null,t.resize=null,t.aspectRatio="16-9",t.captionVisible=!1,t.actionVisible=!1,t.videoWidth=0,t.videoHeight=0,t.markup=function(e){return'<div class="safe-container '+e+' vg_invisible"><div class="safe-outer '+e+'"><div class="safe-inner '+e+'"></div></div></div>'},t.getElement=function(){return this.el},t.doApplyCrop=function(e){e-1>.001?(this.el.style.removeProperty("margin"),this.el.style.removeProperty("width"),this.el.style.setProperty("height","100%",null)):1-e>.001&&(this.el.style.removeProperty("height"),this.el.style.removeProperty("padding-top"),this.el.style.setProperty("margin","0 auto",null),this.el.style.setProperty("width",100*e+"%",null))},t.safeAreaPosition=function(e,t){this.videoWidth=e.getVideoElement().getVideoWidth(),this.videoHeight=e.getVideoElement().getVideoHeight();var n=e.getView().playerContainer.clientWidth,i=e.getView().playerContainer.clientHeight,r=i/this.videoHeight,s=n/this.videoWidth,o=Math.min(r,s);t.style.height=this.videoHeight*o+"px",t.style.width=this.videoWidth*o+"px"},t.toggleActionSafe=function(){this.actionVisible=!this.actionVisible,this.toggleSafeArea("action-safe",this.el)},t.toggleCaptionSafe=function(){this.captionVisible=!this.captionVisible,this.toggleSafeArea("caption-"+this.aspectRatio,this.el)},t.isCaptionVisible=function(){return this.captionVisible},t.isActionVisible=function(){return this.actionVisible},t.toggleSafeArea=function(e,t){var n=t.querySelector(".safe-container."+e);return null==n?void this.player.getLog().error("Safe area class "+e+" not found"):void(n.classList.contains("vg_invisible")?(this.safeAreaPosition(this.player,n),n.classList.remove("vg_invisible")):n.classList.add("vg_invisible"))},t.getAspectRatio=function(){return this.aspectRatio},t.setAspectRatio=function(e){this.isCaptionVisible()&&(this.toggleCaptionSafe(),this.aspectRatio=e,this.toggleCaptionSafe())},t.switchAspectRatio=function(e){this.toggleCaptionSafe(),this.setAspectRatio(e),this.toggleCaptionSafe()}},{player:"SkinnedPlayerImpl",resize:"Rx.Disposable",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SafeAreaViewVG=function(e,t,n){VGView.call(this,e,t,"vg_safe-area"),this.player=n,this.render(this.markup("action-safe")+this.markup("caption-4-3")+this.markup("caption-16-9"));var i=VGTemplates.elFromHTML(VGTemplates.addonControl("vg_safe-areas",""),n.getView().playerContainer.ownerDocument);i.classList.remove("vg_ddown"),i.classList.add("vg_ddown_hover"),this.el.appendChild(i),this.resize=Rx.Observable.fromEvent(window,"resize").subscribe(stjs.bind(this,function(e){if(this.actionVisible){var t=this.el.querySelector(".safe-container.action-safe");this.safeAreaPosition(n,t)}if(this.captionVisible){var t=this.el.querySelector(".safe-container.caption-"+this.aspectRatio);this.safeAreaPosition(n,t)}}))};SafeAreaViewVG=stjs.extend(SafeAreaViewVG,VGView,[SafeAreaView],function(e,t){t.resize=null,t.captionVisible=!1,t.actionVisible=!1,t.aspectRatio="16-9",t.player=null,t.videoWidth=0,t.videoHeight=0,t.close=function(){this.resize.dispose(),CloseableView.prototype.close.call(this)},t.markup=function(e){return'<div class="safe-container '+e+' vg_invisible"><div class="safe-outer '+e+'"><div class="safe-inner '+e+'"></div></div></div>'},t.getElement=function(){return this.el},t.doApplyCrop=function(e){e-1>.001?(this.el.style.removeProperty("margin"),this.el.style.removeProperty("width"),this.el.style.setProperty("height",100/e+"%",null),this.el.style.setProperty("padding-top",450*(e-1)/(16*e)+"%",null)):1-e>.001&&(this.el.style.removeProperty("height"),this.el.style.removeProperty("padding-top"),this.el.style.setProperty("margin","0 auto",null),this.el.style.setProperty("width",100*e+"%",null))},t.safeAreaPosition=function(e,t){this.videoWidth=e.getVideoElement().getVideoWidth(),this.videoHeight=e.getVideoElement().getVideoHeight();var n=e.getView().playerContainer.clientWidth,i=e.getView().playerContainer.clientHeight,r=i/this.videoHeight,s=n/this.videoWidth,o=Math.min(r,s);t.style.height=this.videoHeight*o+"px",t.style.width=this.videoWidth*o+"px"},t.toggleActionSafe=function(){this.actionVisible=!this.actionVisible,this.toggleSafeArea("action-safe",this.el)},t.toggleCaptionSafe=function(){this.captionVisible=!this.captionVisible,this.toggleSafeArea("caption-"+this.aspectRatio,this.el)},t.isCaptionVisible=function(){return this.captionVisible},t.isActionVisible=function(){return this.actionVisible},t.toggleSafeArea=function(e,t){var n=t.querySelector(".safe-container."+e);return null==n?void this.player.getLog().error("Safe area class "+e+" not found"):void(n.classList.contains("vg_invisible")?(this.safeAreaPosition(this.player,n),n.classList.remove("vg_invisible")):n.classList.add("vg_invisible"))},t.getAspectRatio=function(){return this.aspectRatio},t.switchAspectRatio=function(e){this.toggleCaptionSafe(),this.aspectRatio=e,this.setAspectRatio(e),this.toggleCaptionSafe()},t.setAspectRatio=function(e){this.isCaptionVisible()&&this.switchAspectRatio(e)}},{resize:"Rx.Disposable",player:"SkinnedPlayer",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FluentMap=function(){this._map={}};FluentMap=stjs.extend(FluentMap,null,[],function(e,t){t._map=null,t.put=function(e,t){return this.build()[e]=t,this},t.onKeyPress=function(e){return this.build().onKeyPress=e,this},t.onChange=function(e){return this.build()[ReactViewUtils.ON_CHANGE]=e,this},t.onSubmit=function(e){return this.build()[ViewConsts.ON_SUBMIT]=e,this},t.value=function(e){return this.build()[ReactViewUtils.VALUE]=e,this},t.id=function(e){return this.build()[ViewConsts.ID]=e,this},t.key=function(e){return this.build()[ViewConsts.KEY]=e,this},t.type=function(e){return this.build()[ViewConsts.TYPE]=e,this},t.ref=function(e){return this.build()[ReactViewUtils.REF]=e,this},e.withClassName=function(e){return FluentMap.map("className",e)},e.map=function(e,t){var n=new FluentMap;return n.build()[e]=t,n},t.build=function(){return this._map},t.onClick=function(e){return this.build()[ReactViewUtils.ON_CLICK]=e,this},t.addClass=function(e){var t=this._map.className||"",n=t.split(" ");return n.indexOf(e)<0&&(n.push(e),this._map.className=n.join(" ")),this},t.style=function(e,t){null==this._map[ViewConsts.STYLE]&&(this._map[ViewConsts.STYLE]={});var n=this._map[ViewConsts.STYLE];return n[e]=t,this}},{_map:{name:"Map",arguments:[null,"Object"]}},{});var SkinnedPlayer=function(){};SkinnedPlayer=stjs.extend(SkinnedPlayer,null,[VGPlayerPluginApi],function(e,t){t.getView=function(){},t.getVideoElement=function(){},t.getPlayRx=function(){},t.getVolumeChangeRx=function(){},t.getTimelineRx=function(){},t.isChangingVideoSrc=function(){}},{},{});var PlayerThemeOptions=function(){PlayerOptions.call(this)};PlayerThemeOptions=stjs.extend(PlayerThemeOptions,PlayerOptions,[],function(e,t){t.useUTCTimestamp=!1},{logLevel:{name:"Enum",arguments:["LogLevel"]},plugins:{name:"Array",arguments:[null]},drm:"PlayerOptions.DRMOptions",queryParams:{name:"Map",arguments:[null,null]}},{});var DebugInfoBoxView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e;var r='<div class="vg_aligner vg_info"><div class="vg_timecode">\n<div class="vg_seekable_duration_box__label">No data</div></div></div>';this.render(r),this.el.classList.add("vg_centerX"),this.setEventRx(),this.setTimelineRx()};DebugInfoBoxView=stjs.extend(DebugInfoBoxView,VGView,[],function(e,t){t.player=null,t.eventsSubscription=null,t.setTimelineRx=function(){var e=this.player.getTimelineRx(),t=this.el.querySelector(".vg_seekable_duration_box__label");e.subscribe(stjs.bind(this,function(e){var n=e.getDurationSec(),i=this.player.getAudioTracks().map(function(e,t,n){var i="Audio "+t+": ";return i+(null==e.dashStream?"N/A":e.dashStream.getDurationSec())}).join("<br>"),r=e.getSeekableDurationSec();t.innerHTML="Seekable duration: "+r+"<br>Video duration: "+n+"<br>"+i}))},t.setEventRx=function(){var e=Rx.Observable.fromEvent(this.el,"click"),t=Rx.Observable.fromEvent(this.el,"mouseup"),n=Rx.Observable.fromEvent(window.document,"mousemove"),i=Rx.Observable.fromEvent(this.el,"mousedown").filter(function(e){return!"INPUT".equals(e.target.nodeName)});e.subscribe(stjs.bind(this,function(e){this.player.getLog().debug("click"),e.stopPropagation()}));var r=this.el.getBoundingClientRect(),s=i.flatMap(stjs.bind(this,function(e){var i=this.container.getBoundingClientRect(),s=i.width-r.width,o=i.height-r.height,a=VGView.offsetX(e.clientX+i.left,this.el),l=VGView.offsetY(e.clientY+i.top,this.el);return n.map(function(e){e.preventDefault();var t=e.clientX-a,n=e.clientY-l,i=Math.min(Math.max(n,0),o),r=Math.min(Math.max(t,0),s);return new Position(r,i)}).takeUntil(t)}));this.eventsSubscription=s.subscribe(stjs.bind(this,function(e){this.el.classList.remove("vg_centerX"),this.el.style.top=e.top+"px",this.el.style.left=e.left+"px"}))},t.close=function(){CloseableView.prototype.close.call(this),this.eventsSubscription.dispose()}},{player:"PlayerImpl",eventsSubscription:"Rx.Disposable",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var MyCSSRule=function(e){this.selector=e,this.name=0==e.indexOf(".")?e.substring(1):e,this.subrules={},this.statuses={}};MyCSSRule=stjs.extend(MyCSSRule,null,[],function(e,t){e.RESERVED_PROPS={name:!0,selector:!0,subrules:!0},t.name=null,t.selector=null,t.subrules=null,t.statuses=null,t.font=null,t.width=null,t.height=null,t.top=null,t.right=null,t.bottom=null,t.left=null,t.background=null,t.color=null,t.textAlign=null,t.whiteSpace=null,t.overflow=null,t.position=null,t.display=null,t.backgroundColor=null,t.cursor=null,t.border=null,t.padding=null,t.paddingTop=null,t.paddingRight=null,t.paddingBottom=null,t.paddingLeft=null,t.boxShadow=null,t.zIndex=null,t.overflowX=null,t.overflowY=null,t.marginRight=null,t.marginTop=null,t.marginLeft=null,t.marginBottom=null,t.fontSize=null,t.borderStyle=null,t.borderWidth=null,t.borderColor=null,t.borderBottom=null,t.lineHeight=null,t.textDecoration=null,t.subruleStatus=null,t.backgroundPosition=null,t.margin=null,t.listStyle=null,t.fontWeight=null,t.fontFamily=null,t.outline=null,t.borderRadius=null,t.borderLeftWidth=null,t.borderLeftColor=null,t.minHeight=null,t.minWidth=null,t.floatStyle=null,t.borderRight=null,t.borderLeft=null,t.status=function(e,t){var n=this.statuses[e];return null==n&&(n=new CSSStatus(this,e,t),this.statuses[e]=n),n},t.when=function(e){var t=this.subrules[""+e.$id];return null==t&&(t=this.createSubrule(e),this.subrules[""+e.$id]=t),t},t.createSubrule=function(e){var t=e.name.startsWith(":")?e.name:"."+e.name,n=new MyCSSRule(t);return n.subruleStatus=e,n},e.div=function(){return new MyCSSRule("div")},e.span=function(){return new MyCSSRule("div")},e.p=function(){return new MyCSSRule("div")},t.absolute=function(e,t,n,i){return this.position="absolute",this.bottom=n,this.top=e,this.left=t,this.right=i,this},t.relative=function(e,t,n,i){return this.position="relative",this.bottom=n,this.top=e,this.left=t,this.right=i,this},t.size=function(e,t){return this.width=e,this.height=t,this},t.val=function(e){return null==e?0:parseInt((e+"").replace(new RegExp("[^0-9.-]","g"),""))},t.px=function(e,t){return t(this.val(e))+"px"},t.active=function(){return this.status(":active")},t.visited=function(){return this.status(":visited")},t.hover=function(){return this.status(":hover")},t.focus=function(){return this.status(":focus")},t.before=function(){return this.status(":before")},t.after=function(){return this.status(":after")},t.mixin=function(e){for(var t in e)if(!MyCSSRule.RESERVED_PROPS[t]){var n=e[t];if(null!=n&&"function"!=typeof n)if(stjs.isInstanceOf(n.constructor,MyCSSRule)){var i=this[t];null!=i&&i.mixin(n)}else this[t]=n}return this}},{RESERVED_PROPS:{name:"Map",arguments:[null,null]},subrules:{name:"Map",arguments:[null,"MyCSSRule"]},statuses:{name:"Map",arguments:[null,"CSSStatus"]},background:{name:"Array",arguments:[null]},subruleStatus:"CSSStatus"},{});var TrackRowView=function(e){this.trackToCommit=e,this.el=window.document.createElement("tr"),this.el.className="rrtheme-table__row",this.el.innerHTML=VGTemplates.modalRow(this.trackToCommit.displayName,this.trackToCommit.owner,e.state,this.trackToCommit.lastModified),this.inputEl=this.el.querySelector("input"),this.editIconEl=this.el.querySelector(".vg_icon-edit"),this.deleteIconEl=this.el.querySelector(".vg_icon-x"),e.canDelete&&e.canWrite||(this.deleteIconEl.style.display="none",this.editIconEl.style.display="none"),this.onTrackNameChanged=new Rx.Subject,this.onDeleteRx=Rx.Observable.fromEvent(this.deleteIconEl,"click").map(stjs.bind(this,function(e){return this})),Rx.Observable.fromEvent(this.editIconEl,"click").subscribe(stjs.bind(this,function(e){this.inputEl.disabled=!1,this.inputEl.focus()})),this.onFocusRx=Rx.Observable.fromEvent(this.inputEl,"focus",function(e){return e.target}),this.onBlurRx=Rx.Observable.fromEvent(this.inputEl,"blur",function(e){return e.target}),this.onBlurRx.subscribe(stjs.bind(this,function(e){this.inputEl.disabled=!0}));var t=Rx.Observable.fromEvent(this.el,"keyup");t.map(stjs.bind(this,function(e){return e.keyCode==HotkeyManager.getKeyCode("backspace")&&e.preventDefault(),e.keyCode==HotkeyManager.getKeyCode("enter")&&(e.preventDefault(),null!=this.validateTrackNameFunc?this.validateTrackNameFunc(this.inputEl.value)&&this.onTrackNameChanged.onNext(this):this.onTrackNameChanged.onNext(this)),e.keyCode==HotkeyManager.getKeyCode("esc")&&this.el.blur(),e.target.value})).subscribe(function(e){}),this.onFocusRx.subscribe(function(e){e.selectionEnd=e.value.length,e.selectionStart=e.value.length}),this.onBlurRx.subscribe(stjs.bind(this,function(e){e.value=this.trackToCommit.displayName}))};TrackRowView=stjs.extend(TrackRowView,null,[],function(e,t){e.selectorTrackName=".view-trackName",e.selectorDisplayName=".view-state",e.selectorAuthor=".view-author",e.selectorCreatedDate=".view-createdDate",t.el=null,t.inputEl=null,t.editIconEl=null,t.deleteIconEl=null,t.onFocusRx=null,t.onBlurRx=null,t.onTrackNameChanged=null,t.trackId=null,t.onDeleteRx=null,t.isCommited=!1,t.trackToCommit=null,t.validateTrackNameFunc=null,t.getElement=function(){return this.el},t.render=function(e){this.trackToCommit=e,this.el.querySelector(TrackRowView.selectorTrackName).innerHTML=this.trackToCommit.displayName,this.el.querySelector(TrackRowView.selectorDisplayName).innerHTML=this.trackToCommit.state.displayName,this.el.querySelector(TrackRowView.selectorAuthor).innerHTML=this.trackToCommit.owner.displayName,this.el.querySelector(TrackRowView.selectorCreatedDate).innerHTML=VGTemplates.toDateString(this.trackToCommit.created)},t.hide=function(){this.el.classList.add("vg_invisible")},t.show=function(){this.el.classList.remove("vg_invisible")},t.isTrackNew=function(){return this.trackToCommit.state.equals(TrackState.NEW)},t.scheduleForDelete=function(){this.trackToCommit.state=TrackState.DELETED,this.isCommited=!1},t.getInputTrackName=function(){return this.inputEl.value}},{el:"Element",inputEl:"Input",editIconEl:"Element",deleteIconEl:"Element",onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onTrackNameChanged:{name:"Rx.Subject",arguments:["TrackRowView"]},onDeleteRx:{name:"Rx.Observable",arguments:["TrackRowView"]},trackToCommit:"Track",validateTrackNameFunc:{name:"Function1",arguments:[null,null]}},{});var InputView=function(e,t){this.el=e,this.log=t,this.onInputRx=Rx.Observable.fromEvent(this.el,"input"),this.onFocusRx=Rx.Observable.fromEvent(this.el,"focus",function(e){return e.target}),this.onBlurRx=Rx.Observable.fromEvent(this.el,"blur",function(e){return e.target}),this.onKeyDownRx=Rx.Observable.fromEvent(this.el,"keydown"),this.onKeyUpRx=Rx.Observable.fromEvent(this.el,"keyup"),this.inputValueEnteredRx=new Rx.Subject,this.onFocusRx.subscribe(stjs.bind(this,function(e){this.el.parentElement.classList.add("active")})),this.onBlurRx.subscribe(stjs.bind(this,function(e){this.el.parentElement.classList.remove("active")})),this.onBlurRx.filter(stjs.bind(this,function(e){return this.el.classList.contains("vg_replace-input")})).subscribe(function(e){e.classList.remove("vg_replace-input")}),this.replaceKeyDown=this.onKeyDownRx.filter(function(e){return e.target.classList.contains("vg_replace-input")}),this.replaceKeyDown.subscribe(function(e){e.keyCode==HotkeyManager.getKeyCode("backspace")&&(e.preventDefault(),e.target.classList.remove("vg_replace-input"))}),this.onUserTypingRx=this.onKeyUpRx.map(stjs.bind(this,function(e){return e.keyCode==HotkeyManager.getKeyCode("backspace")&&(t.debug("backspace"),e.preventDefault(),e.target.classList.remove("vg_replace-input")),e.keyCode==HotkeyManager.getKeyCode("enter")&&(e.preventDefault(),t.debug("enter",this.el.value),this.inputValueEnteredRx.onNext(this.el.value)),e.keyCode==HotkeyManager.getKeyCode("esc")&&this.el.blur(),e.target.value})),this.onUserTypingRx.subscribe(function(e){t.debug("typing..",e)})};InputView=stjs.extend(InputView,null,[],function(e,t){t.onInputRx=null,t.onFocusRx=null,t.onBlurRx=null,t.onKeyDownRx=null,t.onKeyUpRx=null,t.replaceKeyDown=null,t.onUserTypingRx=null,t.inputValueEnteredRx=null,t.el=null,t.log=null,t.blur=function(){this.el.blur()},t.getElement=function(){return this.el},t.clear=function(){this.el.value="",this.el.focus()},t.getFocusRx=function(){return this.onFocusRx},t.getBlurRx=function(){return this.onBlurRx}},{onInputRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onKeyDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onKeyUpRx:{name:"Rx.Observable",arguments:["DOMEvent"]},replaceKeyDown:{name:"Rx.Observable",arguments:["DOMEvent"]},onUserTypingRx:{name:"Rx.Observable",arguments:[null]},inputValueEnteredRx:{name:"Rx.Subject",arguments:[null]},el:"Input",log:"Log"},{});var ControlsView=function(e,t,n,i){VGView.call(this,t,n,i),this.render(VG["templates/player/controls.html"]({})),this.el.className="vg_controlsContainer",this.playControlsEl=this.el.querySelector(".vg_playControls"),this.fullscreenControl(),this.playPauseControl(e),this.volumeControl(e),this.abcTheme(e)};ControlsView=stjs.extend(ControlsView,VGView,[],function(e,t){t.playControlsEl=null,t.fullscreenButton=null,t.volumeButton=null,t.stepSelectRx=null,t.cameraClickRx=null,t.fullscreenClickRx=null,t.volumeRangeEl=null,t.volumeClick=null,t.playPauseButton=null,t.lastVolumeLevel=0,t._muted=!1,t.abcTheme=function(e){this.onClick(this.el.querySelector(".vg_back1SecButton"),function(t){return e.previousSec(1)}),this.onClick(this.el.querySelector(".vg_back30SecButton"),function(t){return e.previousSec(30)}),this.onClick(this.el.querySelector(".vg_playFasterButton"),function(t){return e.playFaster()}),this.onClick(this.el.querySelector(".vg_forward1SecButton"),function(t){return e.nextSec(1)}),this.onClick(this.el.querySelector(".vg_forward30SecButton"),function(t){return e.nextSec(30)})},t.onClick=function(e,t){null!=e&&e.addEventListener("click",t)},t.volumeControl=function(e){this.volumeRangeEl=this.el.querySelector('input[type="range"]'),HotkeyManager.enableHotkeysForInput(this.volumeRangeEl),this.volumeButton=this.el.querySelector(".vg_volume"),this.volumeClick=Rx.Observable.fromEvent(this.volumeButton,"click"),this.lastVolumeLevel=100*e.getVolume(),this._muted=0==this.lastVolumeLevel,
this.volumeRangeEl.value=String(this.lastVolumeLevel),Rx.Observable.fromEvent(this.volumeRangeEl,"input").subscribe(function(t){t.stopPropagation();var n=t.target;e.setVolume(Number(n.value)/100)}),this.volumeClick.subscribe(stjs.bind(this,function(t){this._muted=!this._muted,this._muted?(this.lastVolumeLevel=Number(this.volumeRangeEl.value),this.volumeRangeEl.value=String(0),e.setVolume(0)):(this.volumeRangeEl.value=String(this.lastVolumeLevel),e.setVolume(this.lastVolumeLevel/100))})),e.getVolumeChangeRx().subscribe(stjs.bind(this,function(e){0!=e?this.volumeButton.classList.remove("vg_volume--mute"):this.volumeButton.classList.add("vg_volume--mute"),this.volumeRangeEl.value=String(100*e)}))},t.playPauseControl=function(e){this.playPauseButton=this.el.querySelector(".vg_playPauseButton");var t=this.el.querySelector(".vg_playBackButton");null!=t&&Rx.Observable.fromEvent(t,"mousedown").subscribe(function(t){e.playFasterBackwards()}),Rx.Observable.fromEvent(this.playPauseButton,"click").subscribe(stjs.bind(this,function(t){this.playPauseButton.classList.contains("active")||this.playPauseButton.classList.add("active"),e.togglePlay()})),e.getPlayRx().subscribe(stjs.bind(this,function(e){e?this.playPauseButton.classList.add("vg_playing"):this.playPauseButton.classList.remove("vg_playing")}))},t.fullscreenControl=function(){this.fullscreenButton=this.el.querySelector(".vg_fullScreen");var e=this.el.querySelector(".vg_fullScreen");this.fullscreenClickRx=Rx.Observable.fromEvent(e,"click",stjs.bind(this,function(t){var n=this.toggleActive(e);return Utils.addField(e,"active",n),e}))},t.getPlayBtn=function(){return this.playPauseButton}},{playControlsEl:"Element",fullscreenButton:"Element",volumeButton:"Element",stepSelectRx:"Object",cameraClickRx:"Object",fullscreenClickRx:{name:"Rx.Observable",arguments:["Element"]},volumeRangeEl:"Input",volumeClick:{name:"Rx.Observable",arguments:["DOMEvent"]},playPauseButton:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var WaveImages=function(e,t){this.http=e,this.channel=t,this.sppArray=t.waveformPreviews,this.images={}};WaveImages=stjs.extend(WaveImages,null,[],function(e,t){t.http=null,t.channel=null,t.sppArray=null,t.images=null,t.nearestSpp=function(e){var t=Utils.binarySearch0(this.sppArray,e);return t>=0?this.sppArray[t]:t==-1?Utils.min(this.sppArray):this.sppArray[-t-2]},t.loadAllImages=function(e){var t=new MutableInt(0),n=function(n){t.value++,t.value>=4&&null!=e&&e()};this.getWaveImage(194,n),this.getWaveImage(3102,n),this.getWaveImage(49620,n),this.getWaveImage(198480,n)},t.getWaveImage=function(e,t){var n=this.nearestSpp(e),i=null;if(0!=n){var r=""+n;if(null==this.images[r]){var s=this.getSppUrl(n);i=new WaveData(this.http,s),i.spp=n,this.images[r]=i,i.addOnLoadListener(t),i._load()}else i=this.images[r],i.isLoading?i.addOnLoadListener(t):t(i)}return i},t.ipadMode=!1,t.onerror=null,t.getSppUrl=function(e){return this.channel.serverUrl+"/"+this.channel.proxyId+"/w00_"+e+".dat"},t.getPreciseWaveImage=function(e,t,n){throw new RuntimeException("getPreciseWaveImage TODO")}},{http:"Http",channel:"PlayerAudioTrack",sppArray:{name:"Array",arguments:[null]},images:{name:"Map",arguments:[null,"WaveData"]},onerror:"Callback0"},{});var ObservableArray=function(){this.arr=[],this.aSubject=new Rx.ReplaySubject};ObservableArray=stjs.extend(ObservableArray,null,[],function(e,t){t.arr=null,t.aSubject=null,t.findIndex=function(e){for(var t=0;t<this.arr.length;t++)if(e(this.arr[t]))return t;return-1},t.push=function(e){var t=this.arr.length;this.arr.push(e);var n=new ArrayChangeEvent;n.type="splice",n.index=t,n.addedCount=1,n.removed=[],n.object=this,this.aSubject.onNext(n)},t.remove=function(e){var t=this.arr.splice(e,1),n=new ArrayChangeEvent;n.type="splice",n.index=e,n.addedCount=0,n.removed=t,n.object=this,this.aSubject.onNext(n)},t.subscribe=function(e){return this.aSubject.subscribe(e,null,null)},t.get=function(e){return this.arr[e]},t.set=function(e,t){this.arr[e]=t}},{arr:{name:"Array",arguments:["T"]},aSubject:{name:"Rx.ReplaySubject",arguments:[{name:"ArrayChangeEvent",arguments:["T"]}]}},{});var BasePlugin=function(e){this.id=e};BasePlugin=stjs.extend(BasePlugin,null,[VGPlugin],function(e,t){t.pluginApi=null,t.id=null,t.getId=function(){return this.id},t.setAPI=function(e){this.pluginApi=e},t.getSkinnedPlayer=function(){return this.pluginApi}},{pluginApi:"VGPlayerPluginApi"},{});var ZoomRange=function(e,t,n,i){ObjectEvents.call(this),this.start=t,this.end=n};ZoomRange=stjs.extend(ZoomRange,ObjectEvents,[],function(e,t){t.start=0,t.end=0},{events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{});var WaveformSettings=function(){};WaveformSettings=stjs.extend(WaveformSettings,null,[],function(e,t){t.getFrame=null,t.color=null,t.fancy=!1,t.fancySettings=null,t.clickToSeek=null,t.volumeControl=null,t.twoSides=!1,t.disableRuler=!1,t.range=null,t.seekFrame=null,t.fillColor=null,e.defaultIfNull=function(e){return null==e&&(e=new WaveformSettings),null==e.fancySettings&&(e.fancySettings=new FancySettings),e}},{getFrame:{name:"Function0",arguments:[null]},fancySettings:"FancySettings",clickToSeek:"Object",volumeControl:"ObjectEvents",range:"ZoomRange",seekFrame:{name:"Callback1",arguments:[null]}},{});var TrackView=function(e,t,n){this.logEventViewAddedRx=new Rx.ReplaySubject,this.onEventIdDeleted=new Rx.Subject,this.trackId=e.id,this.pluginClass=t,this.player=n,this.el=window.document.createElement("div"),this.el.innerHTML=VGTemplates.videologTrack(this.pluginClass,Helpers.playerWidthPercents(n)),this.hide(),this.logEventListView=new LogEventListView(this.el.querySelector(LogEventListView.selector)),this.cleanTrackButton=this.el.querySelector(TrackView.clearTrackButtonSelector),this.cleanTrackButtonRx=Rx.Observable.fromEvent(this.cleanTrackButton,"click"),this.timecodeViews=new Array,this.render(e)};TrackView=stjs.extend(TrackView,null,[],function(e,t){e.selector=".app-TrackView",e.clearTrackButtonSelector=".view-clearTrack",t.el=null,t.cleanTrackButton=null,t.onEventIdDeleted=null,t.cleanTrackButtonRx=null,t.trackId=null,t.player=null,t.pluginClass=null,t.logEventListView=null,t.logEventViewAddedRx=null,t.timecodeViews=null,t.displayName=null,t.hide=function(){this.el.style.display="none"},t.show=function(){this.el.style.display="block"},t.getElement=function(){return this.el},t.render=function(e){this.displayName=e.displayName},t.deleteEvent=function(e){this.logEventListView.deleteEvent(e),this.onEventIdDeleted.onNext(e)}},{el:"Element",cleanTrackButton:"Element",onEventIdDeleted:{name:"Rx.Subject",arguments:[null]},cleanTrackButtonRx:{name:"Rx.Observable",arguments:["DOMEvent"]},player:"PlayerImpl",logEventListView:"LogEventListView",logEventViewAddedRx:{name:"Rx.ReplaySubject",arguments:["LogEventView"]},timecodeViews:{name:"Array",arguments:["TimeCodeView"]}},{});var ProPanelComponent=function(e){React.Component.call(this,e),this.state={plugins:{},activePluginId:null}};ProPanelComponent=stjs.extend(ProPanelComponent,React.Component,[],function(e,t){e.ProPanelProps=function(){},e.ProPanelProps=stjs.extend(e.ProPanelProps,null,[],null,{},{}),e.ProPanelState=function(){},e.ProPanelState=stjs.extend(e.ProPanelState,null,[],function(e,t){t.plugins=null,t.activePluginId=null},{plugins:{name:"Map",arguments:[null,"PluginData"]}},{}),e.createElement=function(){return React.createElement(ProPanelComponent,{})},t.addPlugin=function(e,t,n){var i=new PluginData(e,t);i.container=window.document.createElement("div"),i.container.classList.add("vg-plugin-container");var r=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER).parentElement.clientWidth-41-15;e.renderInto(i.container,r,stjs.bind(this,function(){var t=new ProPanelComponent.ProPanelState;t.plugins=this.state.plugins,t.plugins[e.getId()]=i,this.setState(t),null==this.state.activePluginId&&this.activatePlugin(e.getId()),null!=n&&n()}))},t.activatePlugin=function(e){var t=new ProPanelComponent.ProPanelState;t.activePluginId=e,this.setState(t)},t.getActivePlugin=function(){return this.state.plugins[this.state.activePluginId]},t.icon=function(e,t){var n=e.equals(this.state.activePluginId),i="vg_icon";n&&(i+=" active");var r=stjs.bind(this,function(t){return this.activatePlugin(e)});return React.DOM.div({className:i,onClick:r,key:e},React.DOM.span({className:t}))},t.render=function(){var e=stjs.bind(this,function(e){if(null!=e){e.innerHTML="";var t=this.getActivePlugin();null!=t&&e.appendChild(t.container)}});return React.DOM.div({className:"vg-pro-panel-container"},React.DOM.div({className:"vg-pro-panel"},React.DOM.div({className:"vg-pro-panel-icons"},Utils.mapValues(this.state.plugins).map(stjs.bind(this,function(e,t,n){return this.icon(e.id,e.icon)})))),React.DOM.div({className:"vg-plugin-panel",ref:e}))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var AddTagComponent=function(e){React.Component.call(this,e),this.state=new AddTagComponent.State,this.state.showDdown=!1,e.onClick=stjs.bind(this,function(e){this.state.showDdown=!0})};AddTagComponent=stjs.extend(AddTagComponent,React.Component,[],function(e,t){t.suggestInput=null,e.State=function(){},e.State=stjs.extend(e.State,null,[],function(e,t){t.showDdown=!1},{},{}),e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.suggestArray=null,t.onClick=null,t.onChange=null,t.onCreate=null},{suggestArray:"Array",onClick:{name:"Callback1",arguments:["DOMEvent"]},onChange:{name:"Callback1",arguments:["DOMEvent"]},onCreate:{name:"Callback1",arguments:["DOMEvent"]}},{}),e.addTag=function(){var e={};return React.createElement(AddTagComponent,e)},t.render=function(){this.state.showDdown?this.suggestInput=React.DOM.div({className:"vg-event-tag-ddown"},React.DOM.input({className:"vg-event-tag-ddown-input",placeholder:"Add tag"}),React.DOM.div({className:"vg-event-tag-ddown-tags"},React.DOM.ul({className:"vg-event-tag-ddown-tags-content"},React.DOM.li(null,"Bars and Tone"),React.DOM.li(null,"Fade to Black"),React.DOM.li(null,"Black"),React.DOM.li(null,"Commercial Blank / Insert Ads"),React.DOM.li(null,"Commercial Black"),React.DOM.li(null,"Pull Commercial Black"),React.DOM.li(null,"Bars and Tone"),React.DOM.li(null,"Fade to Black")))):this.suggestInput=null;var e={};e.className=TagComponent.eventTagCss+" add_tag";var t=stjs.bind(this,function(e){this.toggleInputDdown()});return e.onClick=t,React.DOM.div({className:"add_tag-wrapper"},React.DOM.span(e,"+ Add Tag"),this.suggestInput)},t.toggleInputDdown=function(){this.state.showDdown=!this.state.showDdown,this.setState(this.state)}},{suggestInput:{name:"ReactElement",arguments:["Object"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var HintsView=function(e,t){this.el=e,this.log=t,Rx.Observable.fromEvent(this.el,"mousedown").subscribe(function(e){return e.preventDefault()}),this.itemSelectedRx=Rx.Observable.fromEvent(this.el,"click").filter(function(e){return"LI"==e.target.nodeName}).map(function(e){return e.stopPropagation(),e.preventDefault(),e.target}).map(stjs.bind(this,function(e){return this.selectItem(e),this.getSelectedItemId()})),this.itemSelectedRx.subscribe(function(e){t.debug("itemSelectedRx",e)})};HintsView=stjs.extend(HintsView,null,[],function(e,t){e.selector=".app-HintsView",t.el=null,t.log=null,t.hintItems=null,t.selectedItem=null,t.itemSelectedRx=null,t.selectItem=function(e){return null!=this.selectedItem&&this.selectedItem.classList.remove("active"),e.classList.add("active"),this.selectedItem=e,this.selectedItem},t.selectNextItem=function(){if(null==this.selectedItem)return null;var e=this.selectedItem.nextElementSibling;return null!=e&&this.selectItem(e),this.log.debug("selectNextItem->",e),this.selectedItem.getAttribute("data-tag-id")},t.selectPrevItem=function(){if(null==this.selectedItem)return null;var e=this.selectedItem.previousElementSibling;return null!=e&&this.log.debug("selected prev item",this.selectItem(e)),this.selectedItem.getAttribute("data-tag-id")},t.renderTags=function(e,t){this.el.style.display="block";var n=new RegExp(t,"gi"),i=e.map(function(e,t,i){var r=e.displayName.replace(n,function(e){return"<span>"+e+"</span>"});return new LogEventTag(e.id,r)});this.el.innerHTML=VGTemplates.videologHint(i),this.hintItems=this.el.querySelectorAll("li"),this.hintItems.length>0&&this.selectItem(this.hintItems[0])},t.placeTagsHint=function(e){var t=e.ownerDocument.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();this.el.style.top=n.bottom-t.top+"px",this.el.style.left=n.left-t.left+"px"},t.getSelectedItemId=function(){return null==this.selectedItem?null:this.selectedItem.getAttribute("data-tag-id")},t.close=function(){this.el.innerHTML="",this.el.style.display="none",this.selectedItem=null}},{el:"Element",log:"Log",hintItems:{name:"HTMLList",arguments:["Element"]},selectedItem:"Element",itemSelectedRx:{name:"Rx.Observable",arguments:[null]}},{});var LogEvent=function(e,t,n){this.version=0,this.setTrackId(e),this.startTv=t,this.timescale=n,this.endTv=t,this.tags=[],this.created=new Date,this.lastModified=new Date};LogEvent=stjs.extend(LogEvent,null,[],function(e,t){t.version=0,t.trackId=null,t.ownerId=null,t.id=null,t.name=null,t.tags=null,t.timescale=0,t.startTv=0,t.endTv=0,t.notes=null,t.subclipId=null,t.lastModified=null,t.created=null,e.fromJson=function(e){var t=e.tags,n=[];if(Utils.isNotBlank(t)){var i=JSON.parse(t);n=i.map(function(e,t,n){return stjs.hydrate(e,LogEventTag)})}e.tags=null;var r=stjs.hydrate(e,LogEvent);return r.tags=n,r.created=new Date(e.created),r.lastModified=new Date(e.lastModified),r},t.tagNames=function(){var e=this.tags.sort(function(e,t){return stjs.trunc(e.created-t.created)});return e.map(function(e,t,n){return e.displayName})},t.getTrackId=function(){return this.trackId},t.setTrackId=function(e){this.trackId=e},t.getOwnerId=function(){return this.ownerId},t.setOwnerId=function(e){this.ownerId=e},t.removeTagByName=function(e){var t=this.tags.filter(function(t,n,i){return t.displayName.equals(e)});t.length>0&&this.removeTag(t[0])},t.removeTag=function(e){this.tags=this.tags.filter(function(t,n,i){return!e.id.equals(t.id)})}},{tags:{name:"Array",arguments:["LogEventTag"]},lastModified:"Date",created:"Date"},{});var TimecodeInput=function(e,t,n,i,r,s){this.input=e,this.timeline=t,this.onChange=i,this.type=r,this.mask=s,this.maskedInput=new MaskedTimecodeInput(this.input,s),n.subscribe(stjs.bind(this,function(e){return this.timeline=e})),this.input.addEventListener("blur",stjs.bind(this,function(e){return this.__onInput()})),this.input.addEventListener("keypress",function(e){e.keyCode==HotkeyManager.getKeyCode("enter")&&e.target.blur()})};TimecodeInput=stjs.extend(TimecodeInput,null,[],function(e,t){t.timeline=null,t.input=null,t.maskedInput=null,t.lastTimeSample=null,t.type=null,t.mask=null,t.onChange=null,t.update=function(e){this.lastTimeSample=e,this.input.value=this.timeSampleToInputValue(e)},t.timeSampleToInputValue=function(e){},t.inputValueToTimeSample=function(e){},t.__onInput=function(){if(null!=this.input.value&&this.input.value.indexOf("_")<0){var e=this.inputValueToTimeSample(this.input.value);this.onChange(e)}else this.input.value=this.timeSampleToInputValue(this.lastTimeSample)}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var LogEventView=function(e,t,n,i){this.pluginClass=t,this.player=n,this.logEventId=e.id,this.trackId=e.getTrackId(),this.el=window.document.createElement("div"),this.el.className=t+"__logevent",this.el.id=e.id,this.render(n,i),this.onStartTimeEditClickRx=new Rx.Subject,this.onEndTimeEditClickRx=new Rx.Subject,this.onTagDeleteRx=new Rx.Subject,this.onSubclipCreateClickRx=new Rx.Subject,this.onClickStartTimevalueRx=new Rx.Subject,this.onClickEndTimevalueRx=new Rx.Subject,this.onDeleteRx=Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorDeleteButton),"click").map(stjs.bind(this,function(e){return this})),this.update(e,i)};LogEventView=stjs.extend(LogEventView,null,[],function(e,t){e.selectorDeleteButton=".view-deleteEvent",e.selectorStartTape=".timevalue-start_tape",e.selectorEndTape=".timevalue-end_tape",e.selectorStartFrame=".timevalue-start_frame",e.selectorDurationTape=".view-durationTape",e.selectorEndFrame=".timevalue-end_frame",e.selectorDuration=".view-duration",e.selectorStartStandard=".timevalue-start_standard",e.selectorEndStandard=".timevalue-end_standard",e.selectorDurationStandard=".view-durationStandard",e.selectorSubclipButton=".logevent-subclip_button",e.selectorTagsContainer=".view-tags",e.selectorDurationBlock=".view-durationBlock",e.selectorTagDisplayName=".view-tag-displayName",e.selectorTagNameElement=".rrtheme_videolog__tag-name",e.selectorNotesInput=".description-input",e.selectorTimeformat=".logevent-timeformat",e.selectorStart=".logevent-start",e.selectorEnd=".logevent-end",e.selectorTimevalueContainer=".timevalue-container",t.el=null,t.timeCodeView=null,t.player=null,t.pluginClass=null,t.logEventId=null,t.trackId=null,t.onDeleteRx=null,t.onTagDeleteRx=null,t.onSubclipCreateClickRx=null,t.onStartTimeEditClickRx=null,t.onEndTimeEditClickRx=null,t.onClickStartTimevalueRx=null,t.onClickEndTimevalueRx=null,t.durationBlockEl=null,t.logEventToCommit=null,t.subclipEl=null,e.cssSubclipExist=".exist",e.cssSubclipExists=".create",t.getViewWeight=function(){return this.logEventToCommit.created.getTime()},t.commitLogEvent=function(e){this.logEventToCommit=e(this.logEventToCommit)},t.render=function(e,t){this.el.innerHTML=VGTemplates.videologLogevent({playerWidth:Helpers.playerWidthPercents(e),className:this.pluginClass,durationTape:"",startTape:"",endTape:"",durationFrames:"",startFrame:"",endFrame:"",durationStandard:"",startStandard:"",endStandard:"",notes:""}),this.durationBlockEl=Utils.querySelectorNotNull(this.el,LogEventView.selectorDurationBlock),this.subclipEl=Utils.querySelectorNotNull(this.el,LogEventView.selectorSubclipButton);for(var n=this.el.querySelectorAll(LogEventView.selectorStart),i=0;i<n.length;i++){var r=Utils.querySelectorNotNull(n[i],".vg_icon-edit");Rx.Observable.fromEvent(r,"click",stjs.bind(this,function(e){return this})).subscribe(stjs.bind(this,function(e){this.onStartTimeEditClickRx.onNext(e)}))}for(var s=this.el.querySelectorAll(LogEventView.selectorEnd),i=0;i<n.length;i++){var r=Utils.querySelectorNotNull(s[i],".vg_icon-edit");Rx.Observable.fromEvent(r,"click",stjs.bind(this,function(e){return this})).subscribe(stjs.bind(this,function(e){this.onEndTimeEditClickRx.onNext(e)}))}Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorStartTape),"click").subscribe(stjs.bind(this,function(e){this.onClickStartTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorStartFrame),"click").subscribe(stjs.bind(this,function(e){this.onClickStartTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorStartStandard),"click").subscribe(stjs.bind(this,function(e){this.onClickStartTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorEndTape),"click").subscribe(stjs.bind(this,function(e){this.onClickEndTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorEndFrame),"click").subscribe(stjs.bind(this,function(e){this.onClickEndTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorEndStandard),"click").subscribe(stjs.bind(this,function(e){this.onClickEndTimevalueRx.onNext(this)})),this.timeCodeView=new TimeCodeView(Utils.querySelectorNotNull(this.el,TimeCodeView.selector)),this.timeCodeView.changeFormat(t),Rx.Observable.fromEvent(this.subclipEl,"click",stjs.bind(this,function(e){return this})).subscribe(stjs.bind(this,function(e){Utils.isBlank(this.logEventToCommit.subclipId)&&this.onSubclipCreateClickRx.onNext(e.logEventId)}))},t.updateDurationBlock=function(e,t,n){this.durationBlockEl.style.width=t/n*100+"%",this.durationBlockEl.style.left=e/n*100+"%"},t.getElement=function(){return this.el},t.getOnDeleteRx=function(){return this.onDeleteRx},t.renderTags=function(e,t){var n=Utils.querySelectorNotNull(this.el,LogEventView.selectorTagsContainer);n.innerHTML=VGTemplates.videologEventTag(e,t.tagNames());for(var i=n.querySelectorAll(LogEventView.selectorTagNameElement),r=0;r<i.length;r++){var s=i[r],o=s.querySelector(".vg_icon-x");Rx.Observable.fromEvent(o,"click").subscribe(stjs.bind(this,function(e){var t=e.target.parentElement.querySelector(LogEventView.selectorTagDisplayName).innerHTML;this.player.getLog().debug("onClick for deleteTag",t),this.onTagDeleteRx.onNext(t)}))}},t.update=function(e,t){this.logEventToCommit=e,this.el.setAttribute("data-track-id",e.getTrackId()),this.el.querySelector(LogEventView.selectorNotesInput).value=e.notes;var n=TimecodeHelpers.convertTimeScale(this.player,e.startTv,e.timescale),i=TimecodeHelpers.convertTimeScale(this.player,e.endTv,e.timescale),r=TimecodeHelpers.getFrameByTv(this.player,n),s=TimecodeHelpers.getFrameByTv(this.player,i),o=s-r,a=TimecodeHelpers.getStandardByTv(this.player,n),l=TimecodeHelpers.getStandardByTv(this.player,i),u=TimecodeHelpers.getStandardDurationByTv(this.player,n,i),c=TimecodeHelpers.getFrameCount(this.player),d=(TimecodeHelpers.getTimecodedDuration(this.player,o),TimecodeHelpers.getTimecodedDuration(this.player,o)),p=TimecodeHelpers.getNdftcByTv(this.player,n),h=TimecodeHelpers.getNdftcByTv(this.player,i);this.el.querySelector(LogEventView.selectorStartTape).textContent=p,this.el.querySelector(LogEventView.selectorEndTape).textContent=h,this.el.querySelector(LogEventView.selectorDurationTape).textContent=d,this.el.querySelector(LogEventView.selectorStartFrame).textContent=r+"",this.el.querySelector(LogEventView.selectorEndFrame).textContent=s+"",this.el.querySelector(LogEventView.selectorDuration).textContent=o+"",this.el.querySelector(LogEventView.selectorStartStandard).textContent=a+"",this.el.querySelector(LogEventView.selectorEndStandard).textContent=l+"",this.el.querySelector(LogEventView.selectorDurationStandard).textContent=u+"",Utils.isNotBlank(this.logEventToCommit.subclipId)?this.showAsWithSubclip():this.showAsWithoutSubclip(),this.updateDurationBlock(r,o,c),this.timeCodeView.changeFormat(t),this.renderTags(this.pluginClass,e)},t.showAsWithoutSubclip=function(){this.subclipEl.querySelector(LogEventView.cssSubclipExist).style.display="none",this.subclipEl.querySelector(LogEventView.cssSubclipExists).style.display="inline"},t.showAsWithSubclip=function(){this.subclipEl.querySelector(".exist").style.display="inline",this.subclipEl.querySelector(LogEventView.cssSubclipExists).style.display="none"},t.editStartTimevalueMode=function(){for(var e=this.el.querySelectorAll(LogEventView.selectorStart),t=0;t<e.length;t++){var n=Utils.querySelectorNotNull(e[t],LogEventView.selectorTimevalueContainer);n.classList.add("active")}},t.editEndTimevalueMode=function(){for(var e=this.el.querySelectorAll(LogEventView.selectorEnd),t=0;t<e.length;t++){var n=Utils.querySelectorNotNull(e[t],LogEventView.selectorTimevalueContainer);n.classList.add("active")}},t.readOnlyMode=function(){for(var e=this.el.querySelectorAll(LogEventView.selectorTimevalueContainer),t=0;t<e.length;t++)e[t].classList.remove("active")},t.existingTags=function(){return this.logEventToCommit.tags}},{el:"Element",timeCodeView:"TimeCodeView",player:"PlayerImpl",onDeleteRx:{name:"Rx.Observable",arguments:["LogEventView"]},onTagDeleteRx:{name:"Rx.Subject",arguments:[null]},onSubclipCreateClickRx:{name:"Rx.Subject",arguments:[null]},onStartTimeEditClickRx:{name:"Rx.Subject",arguments:["LogEventView"]},onEndTimeEditClickRx:{name:"Rx.Subject",arguments:["LogEventView"]},onClickStartTimevalueRx:{name:"Rx.Subject",arguments:["LogEventView"]},onClickEndTimevalueRx:{name:"Rx.Subject",arguments:["LogEventView"]},durationBlockEl:"Element",logEventToCommit:"LogEvent",subclipEl:"Element"},{});var FCPTests=function(){};FCPTests=stjs.extend(FCPTests,null,[],function(e,t){e.testWrite=function(){var e="75685E87-806A-4E9F-A787-C6E8DB99352E",t=new FCP;t.version=5,t.sequence=new FCP.Sequence,t.sequence.id=e,t.sequence.uuid=e,t.sequence.name="Clips",t.sequence.duration=986,t.sequence.rate=FCP.rate(25),t.sequence.timecode=new FCP.Timecode,t.sequence.timecode.rate=FCP.rate(25),t.sequence.timecode.frame=0,t.sequence.timecode.source="source",t.sequence.timecode.displayformat="NDF",t.sequence.media=new FCP.Media,t.sequence.media.video=new FCP.MediaElement,t.sequence.media.video.track=new FCP.Track,t.sequence.media.video.format=new FCP.MediaFormat,t.sequence.media.video.format.samplecharacteristics=FCP.vsample(1280,960,25);var n=new Array;t.sequence.media.video.track.clipitem=n,t.sequence.media.audio=new FCP.MediaElement,t.sequence.media.audio.track=new FCP.Track;var i=new Array;t.sequence.media.audio.track.clipitem=i;var r=FCP.comment("gagaga",null,null,null,null,null),s=FCP.sc("video-"+e+"-1","GOPR4638.MP4",0,51,0,51,2340,25,1280,960,"video",r);n.push(FCP.clip(s)),i.push(FCP.aclip(s));var o=FCP.sc("video-"+e+"-2","GOPR4642.MP4",283,956,51,724,2685,25,1280,960,"video",r);n.push(FCP.clip(o)),i.push(FCP.aclip(o));var a=FCP.sc("video-"+e+"-3","GOPR4640.MP4",578,840,724,986,2547,25,1280,960,"video",r);n.push(FCP.clip(a)),i.push(FCP.aclip(a)),console.log(t);var l=FCPXml.createXml(t);window.DOC=l,console.log("created",l)},e.mymain=function(){console.log("hello");var e=new DOMParser,t=new Log(LogLevel.DEBUG);new Http(t).get("fcp.xml").subscribe(function(t){var n=e.parseFromString(t,"text/xml");console.log("example",n)},stjs.bind(console,"error")),FCPTests.testWrite()},e.mymain_=function(){console.log("hello");var e=window.document.createElement("xml"),t=window.document.createElement("node");e.appendChild(t);var n=[1,2,3],i=[];i.push(window.document.createElement("div"),window.document.createElement("div"),window.document.createElement("div"),window.document.createElement("div"));for(var r=0;r<n.length;r++){n[r]}e.addEventListener("click",function(t){e.textContent="innerText!",console.log(t,"click!")})}},{},{});var RenderedDropDownItem=function(e,t,n,i){DropDownItem.call(this,e,t),this.innerHTML=n,this.log=i};RenderedDropDownItem=stjs.extend(RenderedDropDownItem,DropDownItem,[],function(e,t){t.innerHTML=null,t.log=null,t.getInnerHTML=function(e){return this.innerHTML},t.updateElement=function(e){this.log.warn("WARNING: trying to update a prerendered menu item",this.id)}},{log:"Log"},{});var ColorBulletDropDownItem=function(e,t,n){DropDownItem.call(this,e,t),this.color=n};ColorBulletDropDownItem=stjs.extend(ColorBulletDropDownItem,DropDownItem,[],function(e,t){t.color=null,t.getInnerHTML=function(e){return VGTemplates.safeAreaItemTemplate(this.color,this)},t.updateElement=function(e){DropDownItem.prototype.updateElement.call(this,e);var t=e.querySelector(".pipka");t.classList.remove("pipka-red","pipka-green","pipka-grey","pipka-white"),t.classList.add("pipka-"+this.color)}},{},{});var DropDownView=function(e,t,n,i,r){VGView.call(this,e,t,n),this.itemsById={},this.itemElById={},this.className=n,this.container=e,this.itemSelectedRx=new Rx.Subject;var s=this;this.render(VGTemplates.dropDownTemplate(n,i)),s.el.className=n+"__content vg_background vg_primary",this.iconClickRx=Rx.Observable.fromEvent(s.container,"click"),this.iconClickRx.subscribe(function(e){e.stopPropagation();var t=s.parent,i=t.el.querySelector(".vg_volumeScreenControls ."+n+".active");s.toggleActive(i),i!=s.container&&s.toggleActive(s.container)}),s.listEl=s.el.querySelector("."+n+"__list"),r.forEach(stjs.bind(this,function(e,t,n){this.addItem(e)})),this.listEl.addEventListener("click",stjs.bind(this,function(e){e.stopPropagation();for(var t=e.target;"LI"!=t.nodeName;){if(t==this.listEl){t=this.listEl.querySelector("li");break}t=e.target.parentElement}this.setActiveItemEl(t);var n=t.textContent.replaceAll("\n","").trim(),i=new DropDownItem(t.querySelector(".vg_info").getAttribute("itemID"),n);i.ownTarget=!0,this.activeItem=i,this.itemSelectedRx.onNext(i)}),!0);var o=s.listEl.getElementsByTagName("li");s.itemSelectedRx.subscribe(function(e){if(!e.ownTarget){var t=Utils.findElement(o,function(t){return t.textContent.toLowerCase().contains(e.title.toLowerCase())});t.click()}})};DropDownView=stjs.extend(DropDownView,VGView,[],function(e,t){t.itemsById=null,t.activeItem=null,t.className=null,t.activeItemEl=null,t.itemSelectedRx=null,t.listEl=null,t.itemElById=null,t.iconClickRx=null,t.getClickRx=function(){return this.iconClickRx},t.updateItem=function(e,t){this.itemsById[e]=t;var n=this.itemElById[e];t.updateElement(n)},t.itemIds=function(){var e=[];for(var t in this.itemsById)e.push(t);return e},t.addItem=function(e){this.itemsById[e.id]=e;var t=e.createElement(this.className),n=this.listEl.lastElementChild;this.itemElById[e.id]=t,this.listEl.insertBefore(t,n)},t.deleteItem=function(e){delete this.itemsById[e];var t=this.itemElementById(e);t.parentElement.removeChild(t)},t.setActiveItem=function(e){if(null==this.itemsById[e])throw new RuntimeException("item not found");this.setActiveItemEl(this.itemElementById(e))},t.itemById=function(e){return this.itemsById[e]},t.itemElementById=function(e){return this.itemElById[e]},t.setActiveItemEl=function(e){null==this.activeItemEl&&(this.activeItemEl=this.listEl.querySelector("."+this.className+"-item.active")),this.activeItemEl!=e&&(this.toggleActive(this.activeItemEl),this.toggleActive(e),this.activeItemEl=e)}},{itemsById:{name:"Map",arguments:[null,"DropDownItem"]},activeItem:"DropDownItem",activeItemEl:"Element",itemSelectedRx:{name:"Rx.Subject",arguments:["DropDownItem"]},listEl:"Element",itemElById:{name:"Map",arguments:[null,"Element"]},iconClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGCropPluginView=function(){VGGenericView.call(this),this.el=window.document.createElement("div"),this.el.className="vg-crop-image-section",this.el.innerHTML=VGTemplates.cropPluginTemplateElement(),this.frameImage=this.el.querySelector(".crop-frame")};VGCropPluginView=stjs.extend(VGCropPluginView,VGGenericView,[],function(e,t){t.frameImage=null,t.appendTo=function(e){this.container=e,this.container.appendChild(this.el)},t.getElement=function(){return this.el}},{frameImage:"Image",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var CaptionsView=function(e,t,n){VGGenericView.call(this),this.player=e,this.el=window.document.createElement("div"),this.searchContainer=n,this.el.className="vg_captionText vg_info",this.appendTo(t)};CaptionsView=stjs.extend(CaptionsView,VGGenericView,[],function(e,t){t.player=null,t.searchContainer=null,t.hideSubs=!1,t.selectedTrack=null,t.select_div=null,t.drawCaps=function(e,t){if(null==this.selectedTrack||this.hideSubs)return void(this.el.innerHTML="");var n=this.getCaptionsSpanWords(e,t);this.el.innerHTML=Utils.defaultString(n,"")},t.setCaptions=function(e,t,n){this.selectedTrack=e,this.clearSearch(),this.hideSubs=!1,this.drawCaps(t,n)},t.hideCaptions=function(e){this.hideSubs=!0,this.drawCaps(e,null)},t.showCaptions=function(e){this.hideSubs=!1,this.drawCaps(e,null)},t.getCaptionsSpanWords=function(e,t){var n=this.getCaptionsByTv(e).map(function(e,t,n){
return e.notes}).join("");if(Utils.isNotEmpty(t)){this.player.getLog().debug(t);var i=new RegExp(t,"gi");return n.replace(i,function(e){return"<span class='vg_caption--highlight'>"+e+"</span>"})}return n},t.getCaptionsByTv=function(e){var t=this.player.getTimeline().getFrameByTv(e),n=[];return null!=this.selectedTrack&&this.selectedTrack.rows.forEach(stjs.bind(this,function(e){var i=this.player.getTimeline().getFrameByTv(e.startTv),r=this.player.getTimeline().getFrameByTv(e.endTv),s=e.startTv<this.player.getTimeline().getLastTv();t>=i&&t<=r&&s&&n.push(e)})),n},t.renderSubs=function(e){var t=Utils.findWhere(this.player.getCaptionsList(),function(t){return t.title.equals(e)});this.player.getLog().debug(e,t)},t.addSearchHit=function(e){var t=window.document.createElement("div");t.classList.add("vg_searchHit"),t.style.left=100*e.left+"%",this.searchContainer.appendChild(t)},t.clearSearch=function(){var e=this.player.getView().playerContainer.querySelectorAll(".vg_searchHit");VGView.removeAll(e)},t.highlighSearchHits=function(e,t){throw new RuntimeException("todo")},t.isSelectEnabled=function(){return 0!=this.select_div.style.opacity},t.toggleSelect=function(){this.isSelectEnabled()?this.select_div.style.opacity=0:this.select_div.style.opacity=.82}},{player:"PlayerImpl",searchContainer:"Element",selectedTrack:"Subtitles",select_div:"Element",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var AddMediaView=function(e){VGGenericView.call(this),this.container=null,this.el=e};AddMediaView=stjs.extend(AddMediaView,VGGenericView,[],function(e,t){t.PN_CANCEL="btn-cancel",t.PN_OK="btn-ok",e.partNumber="addmedia",t.onYesSubscr=null,t.onNoSubscr=null,t.onYesNo=function(e,t){this.dispose(),this.onYesSubscr=this.onYesClick().subscribe(e),this.onNoSubscr=this.onNoClick().subscribe(t)},t.onYesClick=function(){return Rx.Observable.fromEvent(VGTemplates.queryByVGPartNumber(this.el,this.PN_OK),"click")},t.onNoClick=function(){return Rx.Observable.fromEvent(VGTemplates.queryByVGPartNumber(this.el,this.PN_CANCEL),"click")},t.close=function(){this.dispose(),this.el.style.display="none"},t.open=function(){this.el.style.display="block"},t.dispose=function(){null!=this.onYesSubscr&&this.onYesSubscr.dispose(),null!=this.onNoSubscr&&this.onNoSubscr.dispose()},t.getVGProxyId=function(){var e=VGTemplates.queryByVGPartNumber(this.el,"vgproxyid");return e.value}},{onYesSubscr:"Rx.Disposable",onNoSubscr:"Rx.Disposable",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var TrackListComponent=function(e){React.Component.call(this,e);var t=0!=e.tracks.length&&null==Utils.findWhere(e.tracks,function(e){return"Master".equals(e.id)}),n=t?e.tracks[0].id:"Master";this.importCallback=function(t){return e.importTrackRx.onNext(!0)},this.state={open:!1,currentTrack:n};var i=this.getCurrentTrack();null!=i&&e.selectTrackRx.onNext(i)};TrackListComponent=stjs.extend(TrackListComponent,React.Component,[],function(e,t){t.importCallback=null,e.TrackListProps=function(e,t,n,i){this.tracks=e,this.deleteTrackRx=t,this.selectTrackRx=n,this.importTrackRx=i},e.TrackListProps=stjs.extend(e.TrackListProps,null,[],function(e,t){t.tracks=null,t.deleteTrackRx=null,t.selectTrackRx=null,t.importTrackRx=null},{tracks:{name:"Array",arguments:["Track"]},deleteTrackRx:{name:"Rx.Subject",arguments:["Track"]},selectTrackRx:{name:"Rx.Subject",arguments:["Track"]},importTrackRx:{name:"Rx.Subject",arguments:[null]}},{}),e.TrackListState=function(){},e.TrackListState=stjs.extend(e.TrackListState,null,[],function(e,t){t.open=!1,t.currentTrack=null},{},{}),t.render=function(){var e="vg-have-no-tracks-wrapper";0==this.props.tracks.length&&(e+=" active");var t=[React.DOM.div({className:"main-dropdown-menu-name"},"TRACKS"),React.DOM.div({className:e},React.DOM.div({className:"vg-have-no-tracks"},"You have no tracks"),React.DOM.div({className:"vg-import-new-track-wrapper"},React.DOM.div({className:"add-new-track",onClick:this.importCallback},React.DOM.div({className:"plus"},"+"),React.DOM.div({className:"import-new-track"},"IMPORT NEW TRACK"))))];return 0!=this.props.tracks.length&&t.push(this.trackList()),React.DOM.div({className:"vg-tracks-dropdown-menu"},t)},t.trackList=function(){var e=stjs.bind(this,function(e){this.state.open=!this.state.open,this.setState(this.state)}),t="vg-magic-dropdown";0!=this.props.tracks.length&&(t+=" active"),this.state.open&&(t+=" open");var n=this.getCurrentTrack();return React.DOM.div({className:t},React.DOM.div({className:"selected-track",onClick:e},React.DOM.div({className:"triangle"}),React.DOM.div({className:"tracks-name-header"},null==n?"":n.displayName)),React.DOM.div({className:"dropdown-menu-content"},React.DOM.div({className:"add-new-track",onClick:this.importCallback},React.DOM.div({className:"plus"},"+"),React.DOM.div({className:"import-new-track"},"IMPORT NEW TRACK")),React.DOM.ul({},this.props.tracks.map(stjs.bind(this,function(e,t,n){return this.track(e)})))))},t.getCurrentTrack=function(){return this.props.tracks.filter(stjs.bind(this,function(e,t,n){return e.id.equals(this.state.currentTrack)}))[0]},t.track=function(e){var t=new TrackComponent.TrackProps(e,e.id.equals(this.state.currentTrack),stjs.bind(this,function(t){this.state.currentTrack=e.id,this.state.open=!1,this.setState(this.state),this.props.selectTrackRx.onNext(e)}),stjs.bind(this,function(t){return this.props.deleteTrackRx.onNext(e)}));return React.createElement(TrackComponent,UIUtils.toPlainObject(t))}},{importCallback:{name:"Callback1",arguments:["DOMEvent"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var EventListComponent=function(e){React.Component.call(this,e),this.logScale=new LogScale(1,EventListComponent.MIN_WIDTH*e.timeline.getFrameCount())};EventListComponent=stjs.extend(EventListComponent,React.Component,[],function(e,t){e.MIN_WIDTH=.01,t.logScale=null,e.EventListProps=function(e,t,n,i,r,s,o,a,l){this.timeline=t,this.filmstripDrawer=n,this.events=e,this.zoom=i,this.currentEvent=r,this.selectEventRx=s,this.deleteEventRx=o,this.height=a,this.log=l},e.EventListProps=stjs.extend(e.EventListProps,null,[],function(e,t){t.timeline=null,t.filmstripDrawer=null,t.zoom=0,t.events=null,t.currentEvent=0,t.selectEventRx=null,t.deleteEventRx=null,t.height=0,t.log=null},{timeline:"Timeline",filmstripDrawer:"FilmStripDrawer",events:{name:"Array",arguments:["LogEvent"]},selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log"},{}),t.render=function(){return this.props.height>0?React.createElement(Infinite,new InfiniteProps(71,this.props.height,"vg_events"),this.props.events.map(stjs.bind(this,function(e,t,n){return this.logEvent(e,this.props.currentEvent==t)}))):null},t.logEvent=function(e,t){var n=100*(EventListComponent.MIN_WIDTH+this.calculateWidth(e))/(1+EventListComponent.MIN_WIDTH),i=new EventComponent.EventProps(e,this.props.timeline,this.props.filmstripDrawer,n,t,this.props.selectEventRx,this.props.deleteEventRx,this.props.log);return React.createElement(EventComponent,UIUtils.toPlainObject(i))},t.calculateWidth=function(e){var t=(e.endTv-e.startTv)/e.timescale,n=t/this.props.timeline.getDurationSec();return this.logScale.scale(n)}},{logScale:"LogScale",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var DropDownComponent=function(e){React.Component.call(this,e)};DropDownComponent=stjs.extend(DropDownComponent,React.Component,[],function(e,t){e.ddown=function(e){return React.createElement(DropDownComponent,UIUtils.toPlainObject(e))},t.render=function(){var e=[];null!=this.props.items&&(e=this.props.items.map(stjs.bind(this,function(e,t,n){return this.props.itemToElement(e)})));var t=React.DOM.ul({className:this.props.className+"__list"},e),n={className:this.props.className+"__content vg_background vg_primary"};return null!=this.props.title?React.DOM.div(n,React.DOM.div({className:this.props.className+"__title vg_default"},React.DOM.span({className:"vg_info"},this.props.title)),t):React.DOM.div(n,t)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var RAMVideologAsyncStorage=function(e){VideologAsyncStorage.call(this,e),this.tracksById={},this.eventsById={},this.trackVersions={}};RAMVideologAsyncStorage=stjs.extend(RAMVideologAsyncStorage,VideologAsyncStorage,[],function(e,t){t.tracksById=null,t.eventsById=null,t.trackVersions=null,t.trackEvents=function(e,t,n){t(Utils.mapValues(this.eventsById).filter(function(t,n,i){return e==t.getTrackId()}))},t.tracksOfProxy=function(e,t){t(Utils.mapValues(this.tracksById).filter(function(t,n,i){return e==t.mediaId}))},t._trackById=function(e,t,n){t(this.tracksById[e])},t._saveTrack=function(e,t,n){null==e.id&&(e.id=Utils.newUUIDString(),e.version=1,e.lastModified=Utils.currentTimeMillis(),e.created=Utils.currentTimeMillis(),e.state=TrackState.CREATED,this.trackVersions[e.id]=e.version),e.version=e.version+1;var i=this.trackVersions[e.id];i+1!=e.version?n("outdated track version"+e.id):(this.tracksById[e.id]=e,this.trackVersions[e.id]=e.version,t(e))},t._eventById=function(e,t,n){t(this.eventsById[e])},t._saveEvent=function(e,t,n){null==e.id&&(e.id=Utils.newUUIDString()),this.eventsById[e.id]=e,t(e)},t._deleteEvent=function(e,t){var n=this.eventsById[e];delete this.eventsById[e],this.getEventDeletedRx().onNext(n)},t._deleteTrack=function(e,t){this.log.debug("track deleted",e),delete this.tracksById[e.id],delete this.trackVersions[e.id],t(e)},t._clearTrack=function(e,t){this.log.debug("track cleared",e),this.trackEvents(e.id,stjs.bind(this,function(e){return e.forEach(stjs.bind(this,function(e){delete this.eventsById[e.id]}))}),stjs.bind(this,function(e){return this.log.error("Error while sending request",e)}))}},{tracksById:{name:"Map",arguments:[null,"Track"]},eventsById:{name:"Map",arguments:[null,"LogEvent"]},trackVersions:{name:"Map",arguments:[null,null]},trackChangedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},trackDeletedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},eventChangedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},eventDeletedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},displayNamesById:{name:"Map",arguments:[null,null]},log:"Log",defaultTrackNames:{name:"Array",arguments:[null]}},{});var StepsControlView=function(e,t,n,i){VGThemeView.call(this,t,n,i,VGThemeView.magicContext("vg_icon-bars","Step Interval","vg_steps")),this.player=e,this.setEventRx(),this.setStepsList()};StepsControlView=stjs.extend(StepsControlView,VGThemeView,[],function(e,t){t.player=null,t.iconClick=null,t.stepsListRx=null,t.stepElRx=null,e.STEPS=[1,5,10,25,50],t.setStepsList=function(){var e=this.container.querySelector(".vg_steps");StepsControlView.STEPS.forEach(stjs.bind(this,function(t){var n=window.document.createElement("span");n.className="vg_steps-item",n.innerHTML=t+"",e.appendChild(n),e.firstElementChild.classList.add("active"),Rx.Observable.fromEvent(n,"click").subscribe(stjs.bind(this,function(e){e.preventDefault(),this.deactivateSteps(".vg_steps-item.active"),n.classList.add("active"),this.parent.stepInterval=t}))}))},t.setEventRx=function(){var e=this.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");this.iconClick=Rx.Observable.fromEvent(e,"click"),this.iconClick.subscribe(stjs.bind(this,function(e){this.player.iconClick.onNext(this.el)})),this.stepsListRx=Rx.Observable.fromEvent(this.list,"click"),this.stepElRx=this.stepsListRx.map(function(e){return e.target.closest(".vg_steps-item")}).filter(function(e){return null!=e}).map(stjs.bind(this,function(e){var t=e.parentElement,n=t.classList.contains("active");return this.deactivateSteps(".vg_steps.active"),n||t.classList.add("active"),t}))},t.deactivateSteps=function(e){Utils.forEachElement(this.list.querySelectorAll(e),function(e){e.classList.remove("active")})}},{player:"VGThemePlayer",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},stepsListRx:{name:"Rx.Observable",arguments:["DOMEvent"]},stepElRx:{name:"Rx.Observable",arguments:["Element"]},STEPS:{name:"Array",arguments:[null]},icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var AudioControlView=function(e,t,n,i){VGThemeView.call(this,t,n,i,VGThemeView.magicContext("vg_icon-audio","AUDIO","vg_audiolist")),this.player=e,this.tracksInfo.insertAdjacentHTML("afterend","<span class='vg_muteAllButton'></span><input class='vg_horizontal-range' type='range' min='0' max='100' step='1'>"),this.volumeButton=this.el.querySelector(".vg_muteAllButton"),this.volumeRange=this.el.querySelector(".vg_horizontal-range"),this.volumeRange.value=""+100*e.getVolume(),this.infoEl=this.el.querySelector(".vg_audiolist__info"),this.list.setAttribute("data-proxy",this.proxyId),this.setEventRx(),this.addScrubberWave()};AudioControlView=stjs.extend(AudioControlView,VGThemeView,[],function(e,t){e.GetTrack="getTrack",t.player=null,t.volumeButton=null,t.volumeRange=null,t.proxyId=null,t.waveformImg=null,t.iconClick=null,t.infoEl=null,t.muteButtonRx=null,t.volumeRangeRx=null,t.audioListRx=null,t.channelElRx=null,t.volume=0,t.addScrubberWave=function(){var e=this,t=window.document.createElement("div");t.className="vg_audioStrip",e.waveformImg=window.document.createElement("img"),t.appendChild(e.waveformImg);var n=this.player.getView().timeScrubberView.el;null!=n&&n.appendChild(t)},t.waveIconClick=!1,t.activeWaveIcon=null,t.setEventRx=function(){var e=this,t=e.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");e.iconClick=Rx.Observable.fromEvent(t,"click"),e.iconClick.subscribe(stjs.bind(this,function(t){this.player.iconClick.onNext(e.el)}));var n=Rx.Observable.fromEvent(e.volumeButton,"click");e.muteButtonRx=n.map(function(t){return e.volumeButton.classList.contains("vg_volume--mute")});var i=Rx.Observable.fromEvent(e.volumeRange,"mousemove");e.volumeRangeRx=i.map(function(t){return Utils.toDouble(e.volumeRange.value)/100}),e.audioListRx=Rx.Observable.fromEvent(e.list,"click"),e.audioListRx.subscribe(stjs.bind(this,function(e){this.waveIconClick=Boolean(e.target.closest(".vg_waveformIcon"))})),e.channelElRx=e.audioListRx.map(stjs.bind(this,function(e){var t=e.target.closest(".vg_audioTrack__channel");return this.waveIconClick||null==t?null:this.player.isChangingVideoSrc()?null:t}));var r=e.audioListRx.map(function(e){return e.target.closest(".vg_waveformIcon")});r.subscribe(stjs.bind(this,function(t){this.waveIconClick&&(null!=this.activeWaveIcon&&this.activeWaveIcon!=t&&(this.activeWaveIcon.classList.remove("active"),e.waveformImg.classList.remove("active")),e.loadWaveForm(t),this.activeWaveIcon=t)})),n.subscribe(function(t){e.volumeButton.classList.toggle("vg_volume--mute")});var s=[];this.player.audioTracksRx.filter(function(e){return s.indexOf(e.proxyId)<0}).subscribe(stjs.bind(this,function(t){e.appendTrack(t);var n=Utils.sumBy(this.player.getAudioTracks(),function(e){return e.channelCount});e.tracksInfo.innerHTML=UIUtils.plural("track",n),s.push(t.proxyId)})),this.player.audioTracksRx.filter(function(e){return s.indexOf(e.proxyId)>=0}).subscribe(function(t){e.updateTrack(t)}),this.player.getVolumeChangeRx().subscribe(function(t){0!=t?e.volumeButton.classList.remove("vg_volume--mute"):e.volumeButton.classList.add("vg_volume--mute"),e.volumeRange.value=""+100*t}),this.player.getAudioHandlerRx().subscribe(stjs.bind(this,function(e){this.addAudioBtn(e)}))},t.updateTrack=function(e){var t=this.list.querySelector("[data-trackProxy='"+e.proxyId+"']");if(null!=t&&null!=e.dashStream){var n=this,i=this.addFullTrackView(e,n);this.list.replaceChild(i,t)}},t.addAudioBtn=function(e){var t=this,n=window.document.createElement("span");n.className="vgtheme_control-plus",t.infoEl.insertBefore(n,t.infoEl.lastElementChild),Rx.Observable.fromEvent(n,"click").subscribe(function(t){e()})},t.loadWaveForm=function(e){var t=this;t.toggleActive(e),t.toggleActive(t.waveformImg);var n=e.querySelector("img");t.waveformImg.style.width=n.style.width,t.setWaveformSrc(n.src)},t.setWaveformSrc=function(e){Utils.isBlank(e)&&(this.waveformImg.style.width=null),this.waveformImg.src=e},t.appendTrack=function(e){this.player.getLog().debug("appendTrack",e);var t=this,n=null;n=null!=e.dashStream?this.addFullTrackView(e,t):this.addEmptyTrackView(e),t.list.appendChild(n)},t.addEmptyTrackView=function(e){var t=e.getChannels(),n=VGTemplates.elFromHTML(VG["templates/audiotrack.html"]({track:e,width:0,channels:t}),this.player.container.ownerDocument);return n.classList.add("vg_audioTrack--empty"),n.insertAdjacentHTML("beforeend","<div class='vg_loadingstate'><div class='vg_loading-spinner'></div></div>"),n},t.addFullTrackView=function(e,t){var n=this.player.getCurrentAudioTrack(),i=0;null!=e.dashStream&&(i=Math.min(e.dashStream.getDurationSec(),this.player.getSeekableDurationSec()));var r=null!=n&&e.proxyId==n.proxyId?"100%":i/this.player.getSeekableDurationSec()*100+"%",s=e.getChannels(),o=VGTemplates.elFromHTML(VG["templates/audiotrack.html"]({proxyType:this.player.proxyType,track:e,width:r,channels:s}),this.player.container.ownerDocument),a=o.querySelectorAll(".vg_audioTrack__channel"),l=o.querySelectorAll("img");return Rx.Observable.fromEvent(l,"error").subscribe(function(e){e.target.parentElement.removeChild(e.target)}),e.channelMuteRx.subscribe(function(e){var t=e.mute,n=e.channel;t?a[n].classList.add("vg_muted"):a[n].classList.remove("vg_muted")}),o}},{player:"VGThemePlayer",volumeButton:"Element",volumeRange:"Input",waveformImg:"Image",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},infoEl:"Element",muteButtonRx:{name:"Rx.Observable",arguments:[null]},volumeRangeRx:{name:"Rx.Observable",arguments:[null]},audioListRx:{name:"Rx.Observable",arguments:["DOMEvent"]},channelElRx:{name:"Rx.Observable",arguments:["Element"]},activeWaveIcon:"Element",icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var CaptionsControlView=function(e,t,n,i){VGThemeView.call(this,t,n,i,VGThemeView.magicContext("vg_icon-captions","Captions","vg_captionslist")),this.player=e;var r=e.getCaptionsList().length;this.tracksInfo.innerHTML=UIUtils.plural("track",r),this.infoEl=this.el.querySelector(".vg_captionslist__info"),this.setEventRx()};CaptionsControlView=stjs.extend(CaptionsControlView,VGThemeView,[],function(e,t){e.GetCaption="getCaption",t.player=null,t.captionElRx=null,t.captionsFormRx=null,t.infoEl=null,t.iconClick=null,t.captionListRx=null,t.setEventRx=function(){var e=this,t=e.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");e.iconClick=Rx.Observable.fromEvent(t,"click"),e.iconClick.subscribe(stjs.bind(this,function(t){this.player.iconClick.onNext(e.el)})),e.captionListRx=Rx.Observable.fromEvent(e.list,"click"),e.captionElRx=e.captionListRx.map(function(e){return e.target.closest(".vg_caption__item")}).filter(function(e){return null!=e}).map(function(t){var n=t.parentElement,i=n.classList.contains("active");return e.deactivateCaptions(),i||n.classList.add("active"),n}),e.captionsFormRx=new Rx.Subject,this.player.getCaptionListChangeRx().subscribe(function(t){return e.appendCaption(t)}),this.player.getCaptionHandlerRx().subscribe(stjs.bind(this,function(e){this.addCaptionsBtn(e)}))},t.activateCaption=function(e){this.deactivateCaptions();var t=this.list.querySelector("#"+e.id);null!=t&&t.classList.add("active")},t.addCaptionsBtn=function(e){var t=this,n=window.document.createElement("span");n.className="vgtheme_control-plus",t.infoEl.appendChild(n),Rx.Observable.fromEvent(n,"click").subscribe(function(t){e()})},t.appendCaption=function(e){var t=this;t.deactivateCaptions();var n=this.player.getCaptionsList().length;t.tracksInfo.innerHTML=UIUtils.plural("track",n);var i=VGTemplates.elFromHTML(VG["templates/caption.html"]({caption:e}),this.player.container.ownerDocument);if(this.player.options.search){i.insertAdjacentHTML("beforeend",VG["templates/captionsearch.html"]({}));var r=i.querySelector(".vg_captionSearchForm");r.addEventListener("submit",function(e){e.preventDefault();var n=r.querySelector("input");t.captionsFormRx.onNext(n)})}i.id=e.id,i.classList.add("active"),Utils.addMethod(i,CaptionsControlView.GetCaption,function(){return e}),t.list.appendChild(i)},t.deactivateCaptions=function(){Utils.forEachElement(this.list.querySelectorAll(".vg_caption.active"),function(e){e.classList.remove("active");var t=e.querySelector("input");null!=t&&(t.value="")})},t.setSearchValue=function(e){var t=this.list.querySelector(".active input");null!=t&&(t.value=e)}},{player:"VGThemePlayer",captionElRx:{name:"Rx.Observable",arguments:["Element"]},captionsFormRx:{name:"Rx.Subject",arguments:["Input"]},infoEl:"Element",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},captionListRx:{name:"Rx.Observable",arguments:["DOMEvent"]},icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var Filmstrip=function(e){VGPlugins.call(this,e);var t=e.getView();t.pluginsPanelRx.subscribe(function(n){t.filmstrip=new FilmstripView(e,n.container,t,null)})};Filmstrip=stjs.extend(Filmstrip,VGPlugins,[],function(e,t){e.PLUGIN_ID="filmstrip",t.getCut=function(){return this.player.getCurrentCut()},t.show=function(){throw new RuntimeException("show TODO")}},{player:"PlayerImpl",view:"VGView"},{});var TimeTrackComponent=function(e){React.Component.call(this,e),this.state={sec:0,frame:0}};TimeTrackComponent=stjs.extend(TimeTrackComponent,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.id=null,t.onClick=null,t.cssClass=null,t.color=null,t.timeupdate=null,t.duration=0,t.framecount=0},{onClick:{name:"Callback1",arguments:["DOMEvent"]},timeupdate:{name:"Rx.Observable",arguments:["TimeSample"]}},{}),t.timeSubscription=null,t.componentDidMount=function(e){this.timeSubscription=this.props.timeupdate.subscribe(stjs.bind(this,function(e){this.updateState(e)}))},t.updateState=function(e){var t={sec:e.sec,frame:e.frame};this.setState(t)},t.componentWillUnmount=function(){this.timeSubscription.dispose()},t.render=function(){var e=FluentMap.withClassName(this.props.cssClass).style(ViewConsts.POSITION,ViewConsts.ABSOLUTE).style(ViewConsts.Z_INDEX,1).style("top",0).style(ViewConsts.WIDTH,"1px").style(ViewConsts.HEIGHT,"100%").style(ViewConsts.LEFT,this.getLeftPosition()).style(ViewConsts.BACKGROUND_COLOR,this.props.color).build();return React.DOM.div(e)},t.getLeftPosition=function(){var e=100*this.state.frame/this.props.framecount;return e+"%"}},{timeSubscription:"Rx.Disposable",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VGButton=function(e){React.Component.call(this,e)};VGButton=stjs.extend(VGButton,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.label=null,t.className=null,t.onClick=null},{label:"Object",onClick:{name:"Callback1",arguments:["DOMEvent"]}},{}),t.render=function(){var e=FluentMap.withClassName([ViewConsts.VG_BTN,this.props.className].join(" ")).onClick(this.props.onClick);return React.DOM.button(e.build(),this.props.label)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterTableComponent=function(e){React.Component.call(this,e),this.state={word:null},this.rainbow=new Rainbow,this.rainbow.setSpectrum(ViewConsts.PANEL_COLOR,"white","grey","red")};ContexterTableComponent=stjs.extend(ContexterTableComponent,React.Component,[],function(e,t){t.rainbow=null,e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.data=null,t.duration=0,t.sec=0,t.track=null,t.rowClick=null,t.videoFramesCount=0,t.wordSelect=null,t.containerWidth=0},{data:"ContexterData",track:"ReactElement",rowClick:{name:"Callback1",arguments:["DOMEvent"]},wordSelect:{name:"Callback1",arguments:["ContexterWord"]}},{}),t.render=function(){var e,t=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_CONTAINER).style(ViewConsts.POSITION,ViewConsts.RELATIVE).build();e=null!=this.props.data?React.DOM.ul({className:ContexterConsts.VG_CONTEXTER_WORD_LIST},this.props.track,this.props.data.bestWords.map(stjs.bind(this,function(e,t,n){return this.wordRow(e)}))):React.DOM.ul({className:ContexterConsts.VG_CONTEXTER_WORD_LIST});var n=React.DOM.div({className:ContexterConsts.VG_CONTEXTER_TABLE_WRAPPER},e);return React.DOM.div(t,n)},t.wordRow=function(e){var t={};t.word=e,t.totalFrames=this.props.data.wordsByFrame.length,t.rainbow=this.rainbow,t.videoFramesCount=this.props.videoFramesCount,t.containerWidth=this.props.containerWidth;var n=React.createElement(ContexterWordFilmStrip,t),i=this.renderInfo(e),r=React.DOM.div(FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_WORD_DATA).build(),n),s=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_WORD);return e==this.state.word&&s.addClass(ViewConsts.ACTIVE),React.DOM.li(s.onClick(stjs.bind(this,function(t){return this.setActiveWord(t,e)})).build(),i,r)},t.setActiveWord=function(e,t){this.setState({word:t}),this.props.rowClick(e),this.props.wordSelect(t)},t.renderInfo=function(e){var t=React.DOM.div(FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_WORD_INFO).build(),React.DOM.span({className:ContexterConsts.VG_CONTEXTER_WORD_CONF_COUNT},e.confCount),React.DOM.span({className:ContexterConsts.VG_CONTEXTER_WORD_NAME},e.name));return t}},{rainbow:"Rainbow",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ShiftTimecodesView=function(e){React.Component.call(this,e),this.state={active:!1,timecode:Utils.hhmmssms(e.startMsec)},this.initialStart=e.startMsec,this.newStart=e.startMsec};ShiftTimecodesView=stjs.extend(ShiftTimecodesView,React.Component,[],function(e,t){e.CANCEL="Cancel",e.SHIFT_CANCEL="shift__cancel",e.SHIFT_FORM="shift_form",e.SHIFT_INPUT_REF="shiftInput",e.SHIFT="SHIFT",e.CAPTIONS_SHIFT="captions__shift",e.SHIFT_INIT="shift__init",e.SHIFT_APPLY="shift__apply",e.SHIFT_TO="shift__to",e.SHIFT_FROM="shift__from",e.SHIFT_CONTROLS="shift__controls",e.SHIFT_INPUT="shift__input",e.SHIFT_CAPTIONS="SHIFT CAPTIONS",t.initialStart=0,t.newStart=0,t.isChanged=!1,t.componentDidMount=function(e){var t=this.refs[ShiftTimecodesView.SHIFT_INPUT_REF];new MaskedTimecodeInput(t,"__:__:__.___")},t.render=function(){var e=ShiftTimecodesView.CAPTIONS_SHIFT;return this.state.active&&(e+=" "+ViewConsts.ACTIVE),React.DOM.div(ReactViewUtils.className(e),this._initShift(),this._controlsShift())},t._controlsShift=function(){var e=FluentMap.withClassName(ShiftTimecodesView.SHIFT_INPUT).ref(ShiftTimecodesView.SHIFT_INPUT_REF).value(this.state.timecode).onChange(stjs.bind(this,function(e){var t=e.target;this.newStart=Utils.HHmmSSmsecToTimestamp(t.value),isNaN(this.newStart)&&(this.newStart=0),this._newTimecodeState(this.newStart)})).key("controlsShiftKey").build(),t=React.DOM.input(e),n=React.DOM.span(FluentMap.withClassName(ShiftTimecodesView.SHIFT_FROM).key("shiftFromKey").build(),Utils.hhmmssms(this.props.startMsec)),i=React.DOM.span(FluentMap.withClassName(ShiftTimecodesView.SHIFT_TO).key("shiftToKey").build(),Utils.hhmmssms(this.props.endMsec)),r=React.DOM.span(FluentMap.withClassName("").key("toSpanKey").build(),"to"),s=React.DOM.span(FluentMap.withClassName(ViewConsts.TIME_ARROW).key("tArrowSKey").build()),o=React.DOM.input(FluentMap.withClassName(ShiftTimecodesView.SHIFT_APPLY).addClass(ViewConsts.VG_INPUT_SUBMIT).key("applyShiftKey").put("type",ViewConsts.SUBMIT).value(ShiftTimecodesView.SHIFT).build()),a=React.DOM.span(FluentMap.withClassName(ShiftTimecodesView.SHIFT_CANCEL).key("cancelShiftKey").onClick(stjs.bind(this,function(e){return this._cancelShift()})).build(),ShiftTimecodesView.CANCEL),l=[t,r,n,s,i,o],u=FluentMap.withClassName(ShiftTimecodesView.SHIFT_FORM).key("formPKey").onSubmit(stjs.bind(this,function(e){e.preventDefault(),this.props.shiftCaptionsRx.onNext(this.newStart-this.props.startMsec)})),c=React.DOM.form(u.build(),l);return React.DOM.div(ReactViewUtils.className(ShiftTimecodesView.SHIFT_CONTROLS),c,a)},t._newTimecodeState=function(e){var t=new ShiftTimecodesState;t.timecode=Utils.hhmmssms(e),this.setState(t)},t._cancelShift=function(){this._newTimecodeState(this.initialStart),this.isChanged||(this.props.shiftCaptionsRx.onNext(0==this.newStart?this.initialStart:this.initialStart-this.newStart),this.isChanged=!0)},t._initShift=function(){var e=FluentMap.withClassName(ShiftTimecodesView.SHIFT_INIT).key("initShiftKey").onClick(stjs.bind(this,function(e){return this._toggleActive()}));return this.state.active&&e.addClass(ViewConsts.ACTIVE),React.DOM.span(e.build(),ShiftTimecodesView.SHIFT_CAPTIONS)},t._toggleActive=function(){var e=new ShiftTimecodesState;e.active=!this.state.active,this.setState(e)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterWordsComponent=function(e){React.Component.call(this,e),this.timeSubscription=e.timeupdate.throttle(1e3).subscribe(stjs.bind(this,function(e){this.setState(this.wordsByFrameState(e.frame))})),this.state={words:[],frame:0}};ContexterWordsComponent=stjs.extend(ContexterWordsComponent,React.Component,[],function(e,t){t.timeSubscription=null,t.wordsByFrameState=function(e){return null!=this.props.data?{words:this.props.data.wordsByFrame[e],frame:e}:this.state},t.componentWillUnmount=function(){this.timeSubscription.dispose()},e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.data=null,t.timeupdate=null,t.minConfidence=0,t.word=null,t.render=!1},{data:"ContexterData",timeupdate:{name:"Rx.Observable",arguments:["TimeSample"]},word:"ContexterWord"},{}),t.render=function(){return this.props.render&&null!=this.state.words&&this.state.words.length>0?React.DOM.div(FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_OVERLAY_WORDS).id(ContexterConsts.VG_CONTEXTER_OVERLAY_WORDS).addClass(ViewConsts.VG_INFO).build(),this.renderWords(this.state.words)):null},t.renderWords=function(e){return e.filter(stjs.bind(this,function(e,t,n){return this.showWord(e)})).map(stjs.bind(this,function(e,t,n){var i=e.values[this.state.frame+""],r=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_OVERLAY_WORD);return null!=this.props.word&&e.name==this.props.word.name&&(r.style(ViewConsts.COLOR,ViewConsts.YELLOW_COLOR),i=1),r.style(ViewConsts.OPACITY,i),React.DOM.span(r.build(),e.name)}))},t.showWord=function(e){return this.props.data.bestWords.indexOf(e)!=-1}},{timeSubscription:"Rx.Disposable",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var PluginSearchInput=function(e){React.Component.call(this,e);
};PluginSearchInput=stjs.extend(PluginSearchInput,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.handleSubmit=null,t.onChange=null,t.searchValue=null},{handleSubmit:{name:"Callback1",arguments:["DOMEvent"]},onChange:{name:"Callback1",arguments:["DOMEvent"]},searchValue:"Object"},{}),t.render=function(){var e=React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ICON_SEARCH)),t=FluentMap.withClassName(ViewConsts.VG_INPUT_SEARCH).onChange(this.props.onChange).value(this.props.searchValue).build(),n=FluentMap.withClassName(ViewConsts.VG_FORM_SEARCH).addClass(ViewConsts.VG_PLUGIN_SEARCH).put(ReactViewUtils.ON_SUBMIT,this.props.handleSubmit).build(),i=React.DOM.input(t),r=React.DOM.form(n,e,i);return r}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContainerComponent=function(e){React.Component.call(this,e),this.state=new ContainerState,this.state.isActive=!0};ContainerComponent=stjs.extend(ContainerComponent,React.Component,[],function(e,t){t.render=function(){var e=ViewConsts.COMPONENT_CONTAINER;this.props.isActive&&(e+=" "+ViewConsts.ACTIVE);var t=FluentMap.withClassName(e);return React.DOM.div(t.build(),this.props.children)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var RangeInputComponent=function(e){React.Component.call(this,e)};RangeInputComponent=stjs.extend(RangeInputComponent,React.Component,[],function(e,t){t.render=function(){var e=this.props.max/this.props.points,t=FluentMap.withClassName(ViewConsts.VG_INPUT_RANGE).type(ViewConsts.RANGE).value(this.props.value).onChange(this.props.onChange).put("min",this.props.min).put("max",this.props.max).put("step",e),n=React.DOM.input(t.build());return React.DOM.div(ReactViewUtils.className(ViewConsts.VG_RANGE),this._rangePoints(this.props.points),n)},t._rangePoints=function(e){for(var t=[],n=100/e,i=0;i<=e;i++){var r=React.DOM.span({className:"range__point--"+n*i,key:i});t.push(r)}return t}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubtitleEntryComponent=function(e){React.Component.call(this,e),this.state={isActive:!1},this.props.activeRowRx.subscribe(stjs.bind(this,function(e){var t=e==this.props.row;t&&!this.state.isActive?this.changeActiveState(!0):!t&&this.state.isActive&&this.changeActiveState(!1)}))};SubtitleEntryComponent=stjs.extend(SubtitleEntryComponent,React.Component,[],function(e,t){e.ROW="row",e.CAPTION_TIMES="caption__times",e.CAPTION_NOTES="caption__notes",e.CAPTION_END="caption__end",e.CAPTION_START="caption__start",t.getStartMs=function(){return this.props.timeline.getMillisByTv(this.props.row.startTv)},t.getEndMs=function(){return this.props.timeline.getMillisByTv(this.props.row.endTv)},t.getStartFrame=function(){return this.props.timeline.getFrameByTv(this.props.row.startTv)},t.getEndFrame=function(){return this.props.timeline.getFrameByTv(this.props.row.endTv)},t.changeActiveState=function(e){var t=new SubtitleEntryState;t.isActive=e,this.setState(t)},t.render=function(){return this._generateTemplate()},t._generateTemplate=function(){var e=stjs.trunc(1e3*this.props.timeline.getDurationSec()),t=SubtitleEntryComponent.CAPTION_START+" "+ViewConsts.TIME_ARROW,n=SubtitleEntryComponent.CAPTION_END;this.getStartMs()>e&&(t+=" "+ViewConsts.VG_CAPTION_HIGHLIGHT),this.getEndMs()>e&&(n+=" "+ViewConsts.VG_CAPTION_HIGHLIGHT);var i=FluentMap.withClassName(t).key("startMsecKey").build(),r=FluentMap.withClassName(n).key("endMsekKey").build(),s=React.DOM.span(i,Utils.hhmmssms(this.props.row.startMsec)),o=React.DOM.span(r,Utils.hhmmssms(this.props.row.endMsec)),a=React.DOM.div(FluentMap.withClassName(SubtitleEntryComponent.CAPTION_TIMES).key("timesKey").build(),s,o),l=FluentMap.withClassName(this.props.className).key("rowKey").id(SubtitleEntryComponent.ROW+this.props.row.startTv+this.props.row.endTv).ref(SubtitleEntryComponent.ROW).onClick(stjs.bind(this,"onRowClick"));this.state.isActive&&l.addClass(ViewConsts.ACTIVE);var u=React.DOM.div(FluentMap.withClassName(SubtitleEntryComponent.CAPTION_NOTES).key("captNotesKey").build(),this._getNotes());return this.props.viewType==ViewConsts.BLOCK&&this._getBlockView(l),React.DOM.div(l.build(),a,u)},t._getBlockView=function(e){var t=this.getEndFrame()-this.getStartFrame(),n=this.props.timeline.getFrameCount(),i=0,r=1*this.getStartFrame()/n*100;t>0&&(i=1*t/n*100);var s=stjs.trunc(Math.max(10*this.props.zoomRow,i));e.style(ViewConsts.WIDTH,i+"%").style(ViewConsts.FONT_SIZE,s+"%").style(ViewConsts.LEFT,r+"%")},t._getNotes=function(){var e,t=new RegExp("("+this.props.searchValue+")","ig"),n=this.props.row.notes,i=this.props.searchValue.length>0&&t.test(n);if(i){var r=n.split(t);return e=r.map(function(e,n,i){var r=null;return t.test(e)&&(r=FluentMap.withClassName(ViewConsts.HIGHLIGHT_YELLOW).key("noteKey"+n).build()),React.DOM.span(r,e)})}return[React.DOM.span(FluentMap.withClassName("").key("getNKey").build(),n)]},t.onRowClick=function(e){this.props.inActiveItem&&this.props.selectedFrameRx.onNext(this.props.row.startTv)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ModalComponent=function(e){React.Component.call(this,e),this.state={open:e.open}};ModalComponent=stjs.extend(ModalComponent,React.Component,[],function(e,t){e.MODAL="vg_modal",e.MODAL_CONTENT="vg_modal-content",e.MODAL_FOOTER="vg_modal-footer",e.MODAL_BODY="vg_modal-body",e.MODAL_HEADER="vg_modal-header",e.MODAL_DIALOG="vg_modal-dialog",e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.body=null,t.footer=null,t.header=null,t.open=!1,t.contentClass=null,t.modalClass=null,t.id=null},{body:{name:"ReactElement",arguments:["Object"]},footer:{name:"ReactElement",arguments:["Object"]},header:{name:"ReactElement",arguments:["Object"]}},{}),t.componentWillReceiveProps=function(e){var t={open:e.open};this.setState(t)},t.render=function(){var e=React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_DIALOG),this.renderContent()),t=FluentMap.withClassName(ModalComponent.MODAL).addClass(ViewConsts.FADE).addClass(this.props.modalClass);return t.style(ViewConsts.DISPLAY,1==this.state.open?ViewConsts.BLOCK:ViewConsts.NONE),t.id(this.props.id),React.DOM.div(t.build(),e)},t.renderContent=function(){var e=null;null!=this.props.footer&&(e=React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_FOOTER),this.props.footer));var t=FluentMap.withClassName(ModalComponent.MODAL_CONTENT).addClass(this.props.contentClass);return React.DOM.div(t.build(),this.renderHeader(),this.renderBody(),e)},t.renderBody=function(){return React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_BODY),this.props.body)},t.renderHeader=function(){var e=FluentMap.withClassName(ViewConsts.CLOSE).type(ViewConsts.BUTTON).onClick(stjs.bind(this,"closeModal")),t=React.DOM.button(e.build(),React.DOM.span(ReactViewUtils.className(ViewConsts.CLOSE_ICON)));return React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_HEADER),this.props.header,t)},t.closeModal=function(e){var t={open:!1};this.setState(t)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var DebugInfoBox=function(e,t,n){VGPlugins.call(this,e),this.player=e,this.view=new DebugInfoBoxView(e,t,n,"vg_debug_info_box vg_invisible")};DebugInfoBox=stjs.extend(DebugInfoBox,VGPlugins,[],function(e,t){t.player=null,t.view=null},{player:"PlayerImpl",view:"DebugInfoBoxView",player:"PlayerImpl",view:"VGView"},{});var CSSStyleSheet=function(){};CSSStyleSheet=stjs.extend(CSSStyleSheet,null,[],function(e,t){t.stylesheet=null,t.id=null,t.setId=function(e){return this.id=e,this},t.addRule=function(e){this.createStyleSheet(),this.addRuleWithPath([],e,!1)},t.addRuleWithPath=function(e,t,n){var i=e.slice(0);i.push(t);var r="";for(var s in t)if(!MyCSSRule.RESERVED_PROPS[s]){var o=t[s];if(null!=o&&"function"!=typeof o)if(stjs.isInstanceOf(o.constructor,MyCSSRule))this.addRuleWithPath(i,o,!1);else if(s.endsWith("Style")&&(s=s.replace("Style","")),"string"==typeof o&&(r+="\n"+this.dashed(s)+":"+o+";"),Array.isArray(o))for(var a=o,l=0;l<a.length;l++)r+="\n"+this.dashed(s)+":"+a[l]+";"}""!=r&&this.toDom(this.selector(i),r);for(var u in t.subrules)this.addRuleWithPath(i,t.subrules[u],!0)},t.selector=function(e){for(var t="",n=0;n<e.length;++n){var i=e[n];if(null==i.subruleStatus){for(var r=i.selector,s=n+1;s<e.length;++s){var o=e[s];null!=o.subruleStatus&&o.subruleStatus.rule==i&&(r+=o.selector)}t+=" "+r}}return t},t.toDom=function(e,t){null!=this.stylesheet.insertRule?this.stylesheet.insertRule(e+"{"+t+"}",0):this.stylesheet.addRule(e,t,0)},t.dashed=function(e){var t=e.split(""),n=t.map(function(e,t,n){return e.matches("[_A-Z]")?"-"+e.toLowerCase():e});return n.join("")},t.baseRules=null,t.toSass=function(e,t,n){null==this.baseRules&&(this.baseRules={});var i=e+(n?"":" ")+t.selector,r="",s="";for(var o in t)if(!MyCSSRule.RESERVED_PROPS[o]){var a=t[o];null!=a&&"function"!=typeof a&&(stjs.isInstanceOf(a.constructor,MyCSSRule)?s+=this.toSass(i,a,!1):r+=this.dashed(o)+":"+a+";")}for(var l in t.subrules)s+=this.toSass(i,t.subrules[l],!0);if(""!=r){var u=this.baseRules[t.selector];null==u?this.baseRules[t.selector]=r:r==u&&(r="")}return""==s&&""==r?"":(n?"&":"")+t.selector+" {"+r+" "+s+"}"},t.createStyleSheet=function(){if(null==this.stylesheet){var e=window.document.createElement("style");null!=this.id&&(e.id=this.id),e.appendChild(window.document.createTextNode("")),window.document.getElementsByTagName("head")[0].appendChild(e),this.stylesheet=e.sheet}}},{stylesheet:"StyleSheet",baseRules:{name:"Map",arguments:[null,null]}},{});var TrackManagerView=function(e,t){this.el=e,this.log=t;var n=window.document.createComment(Utils.constructorName(this));this.el.appendChild(n),this.trackExistsErrorEl=this.el.querySelector(TrackManagerView.selectorTrackExists),this.incorrectTrackErrorEl=this.el.querySelector(TrackManagerView.selectorEmptyTrack),this.trackTable=this.el.querySelector(".rrtheme-table__body"),this.trackRowViewsByTrackId={},this.newTrackForm=this.el.querySelector(".rrtheme-modal__form"),this.newTrackFormInputView=new InputView(this.newTrackForm.querySelector(TrackManagerView.selectorNewTrackNameInput),t);var i=this.el.querySelector(TrackManagerView.selectorSaveButton),r=this.el.querySelector(TrackManagerView.selectorCancelButton);this.saveBtnClickRx=Rx.Observable.fromEvent(i,"click"),this.cancelBtnClickRx=Rx.Observable.fromEvent(r,"click"),this.onTrackCommitRx=new Rx.Subject,this.onTrackRevertRx=new Rx.Subject,this.onTrackFormSubmitRx=new Rx.Subject,this.addEventsRx()};TrackManagerView=stjs.extend(TrackManagerView,null,[],function(e,t){e.selector=".app-TrackManagerView",e.selectorSaveButton=".view-saveBtn",e.selectorCancelButton=".view-cancelBtn",e.selectorTrackExists=".view-trackExistError",e.selectorEmptyTrack=".view-emptyTrackError",t.trackRowViewsByTrackId=null,t.trackTable=null,t.el=null,t.log=null,t.trackExistsErrorEl=null,t.incorrectTrackErrorEl=null,t.newTrackFormInputView=null,t.newTrackForm=null,t.saveBtnClickRx=null,t.cancelBtnClickRx=null,t.onTrackCommitRx=null,t.onTrackRevertRx=null,t.onTrackFormSubmitRx=null,e.selectorNewTrackNameInput=".view-newTrackName",t.addEventsRx=function(){this.cancelBtnClickRx.subscribe(stjs.bind(this,function(e){for(var t in this.trackRowViewsByTrackId){var n=this.trackRowViewsByTrackId[t];if(0==n.isCommited){var i=n.trackToCommit.state;i.equals(TrackState.DELETED)?n.show():i.equals(TrackState.NEW)?this.deleteRow(n):this.onTrackRevertRx.onNext(n.trackToCommit.id)}}this.close(),this.log.debug("cancel")})),this.saveBtnClickRx.subscribe(stjs.bind(this,function(e){this.close();for(var t in this.trackRowViewsByTrackId){var n=this.trackRowViewsByTrackId[t];this.log.debug(n.isCommited,n.trackToCommit.state.id,"save button:",n.trackToCommit),0==n.isCommited&&(n.trackToCommit.state.equals(TrackState.NEW)&&this.deleteRow(n),n.trackToCommit.state.equals(TrackState.DELETED)&&this.deleteRow(n),this.onTrackCommitRx.onNext(n.trackToCommit))}this.log.debug("save")}));var e=this.el.querySelector(".rrtheme-modal__table");this.el.querySelector(".rrtheme-modal__footer"),Rx.Observable.fromEvent(e,"click");this.addFormRx(this.newTrackForm),this.addCloseRx()},t.deleteRow=function(e){e.getElement().parentElement.removeChild(e.getElement()),delete this.trackRowViewsByTrackId[e.trackId]},t.addFormRx=function(e){Rx.Observable.fromEvent(e,"submit").subscribe(stjs.bind(this,function(t){t.preventDefault(),this.onTrackFormSubmitRx.onNext(e)}))},t.show=function(e){e.classList.add("active")},t.hide=function(e){e.classList.remove("active")},t.addCloseRx=function(){var e=this.el.querySelector(".rrtheme-modal__close"),t=Rx.Observable.fromEvent(e,"click");t.subscribe(stjs.bind(this,function(e){this.close()}))},t.showTrackExistError=function(){this.trackExistsErrorEl.style.display="block"},t.hideTrackExistError=function(){this.trackExistsErrorEl.style.display="none"},t.open=function(){this.hideIncorrectTrackNameError(),this.hideTrackExistError(),this.show(this.el)},t.close=function(){this.hide(this.el)},t.createRowView=function(e){var t=this.trackRowViewsByTrackId[this.getTrackId(e)];if(null!=t)throw new RuntimeException("trView != null");return t=new TrackRowView(e),t.trackId=this.getTrackId(e),t.isCommited=!1,this.trackRowViewsByTrackId[t.trackId]=t,this.trackTable.appendChild(t.getElement()),t},t.updateRow=function(e){var t=this.trackRowViewsByTrackId[e.id];if(null==t)throw new RuntimeException("trView == null");t.render(e),t.show()},t.containsTrack=function(e){return null!=this.trackRowViewsByTrackId[this.getTrackId(e)]},t.showIncorrectTrackNameError=function(){this.incorrectTrackErrorEl.style.display="block"},t.hideIncorrectTrackNameError=function(){this.incorrectTrackErrorEl.style.display="none"},t.getTrackId=function(e){return Utils.defaultString(e.id,e.localId)},t.commit=function(e){var t=this.trackRowViewsByTrackId[this.getTrackId(e)];if(null==t)throw new RuntimeException("trView == null");t.isCommited=!0,this.trackRowViewsByTrackId[t.trackId]=t}},{trackRowViewsByTrackId:{name:"Map",arguments:[null,"TrackRowView"]},trackTable:"Element",el:"Element",log:"Log",trackExistsErrorEl:"Element",incorrectTrackErrorEl:"Element",newTrackFormInputView:"InputView",newTrackForm:"Form",saveBtnClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},cancelBtnClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onTrackCommitRx:{name:"Rx.Subject",arguments:["Track"]},onTrackRevertRx:{name:"Rx.Subject",arguments:[null]},onTrackFormSubmitRx:{name:"Rx.Subject",arguments:["Form"]}},{});var SuggestInputView=function(e,t,n){InputView.call(this,e,n),this.hintsView=t,this.itemSelectedRx=new Rx.Subject,this.replaceSelectedRx=this.itemSelectedRx.filter(stjs.bind(this,function(e){return this.el.classList.contains("vg_replace-input")})),this.emptySelectRx=this.itemSelectedRx.filter(function(e){return null==e}),this.getFocusRx().subscribe(function(e){e.parentElement.classList.add("active"),t.placeTagsHint(e)}),this.getBlurRx().subscribe(stjs.bind(this,function(e){n.debug("onBlurRx",e),e.parentElement.classList.remove("active"),this.blurTagInput(t,e)})),this.getBlurRx().filter(function(e){return e.classList.contains("vg_replace-input")}).subscribe(function(e){n.debug("onBlurRx vg_replace-input",e),e.classList.remove("vg_replace-input")}),this.replaceKeyDown.subscribe(stjs.bind(this,function(e){e.keyCode==HotkeyManager.getKeyCode("backspace")&&(e.preventDefault(),e.target.classList.remove("vg_replace-input"),this.itemSelectedRx.onNext(null))})),this.itemSelectedFromHintRx=this.onKeyUpRx.map(stjs.bind(this,function(e){if(e.keyCode==HotkeyManager.getKeyCode("down")){n.debug("down"),e.preventDefault();var i=t.selectNextItem()}if(e.keyCode==HotkeyManager.getKeyCode("up")){n.debug("up"),e.preventDefault();var i=t.selectPrevItem()}if(e.keyCode==HotkeyManager.getKeyCode("enter")){n.debug("enter"),e.preventDefault();var i=t.getSelectedItemId();null!=i?(this.itemSelectedRx.onNext(i),this.clear()):n.debug("New tag to be created!")}return e.keyCode==HotkeyManager.getKeyCode("esc")&&this.el.blur(),e.target.value}))};SuggestInputView=stjs.extend(SuggestInputView,InputView,[],function(e,t){e.selector=".app-EditFieldsView",t.itemSelectedRx=null,t.replaceSelectedRx=null,t.emptySelectRx=null,t.itemSelectedFromHintRx=null,t.hintsView=null,t.getElement=function(){return this.el},t.blurTagInput=function(e,t){t.value="",e.close()},t.clear=function(){this.el.value="",this.el.focus(),this.hintsView.close()},t.showAsActive=function(){this.el.classList.add("vg_replace-input")}},{itemSelectedRx:{name:"Rx.Subject",arguments:[null]},replaceSelectedRx:{name:"Rx.Observable",arguments:[null]},emptySelectRx:{name:"Rx.Observable",arguments:[null]},itemSelectedFromHintRx:{name:"Rx.Observable",arguments:[null]},hintsView:"HintsView",onInputRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onKeyDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onKeyUpRx:{name:"Rx.Observable",arguments:["DOMEvent"]},replaceKeyDown:{name:"Rx.Observable",arguments:["DOMEvent"]},onUserTypingRx:{name:"Rx.Observable",arguments:[null]},inputValueEnteredRx:{name:"Rx.Subject",arguments:[null]},el:"Input",log:"Log"},{});var CssWaveCollider=function(e,t,n,i){this.http=e,this.log=i,this.waveImages=new WaveImages(e,t),this.canvas=n,this.channel=t,this.getContext().translate(-.5,-.5),this.waveColor=CssWaveCollider.defaultWaveColor,CssWaveCollider._initLogLut(),this.selectionStartSample=-1,this.selectionEndSample=-1};CssWaveCollider=stjs.extend(CssWaveCollider,null,[],function(e,t){t.waveImages=null,t.canvas=null,t.channel=null,t.fades=!1,t._debug=!1,e.defaultWaveColor="#475164",t.waveColor=null,t.ruler=!0,t.rulerText=!0,t.rulerTextColor="rgba(200,200,200,0.5)",t.rulerLines=8,t.rulerTextOffset=10,t.amplify=1,t.preciseWaveImage=null,t.uiSpp=0,t.sampleRange=null,t._fadein=null,t._fadeout=null,t.selectionStartSample=0,t.selectionEndSample=0,t.http=null,t.log=null,t.doBezierIn=function(e,t){var n=this._fadein,i=Bezier.fromPoints(this._fadein.bezierControlPoints),r=n.range,s=e<r.start;if(s)return 0;if(r.contains(e)){var o=e-r.start,a=i.getPointOnCurve(stjs.trunc(o/r.duration())).y;return t*(1-a)}return t},t.doBezierOut=function(e,t){var n=this._fadeout,i=Bezier.fromPoints(this._fadeout.bezierControlPoints),r=n.range,s=r.contains(e),o=e>r.end;if(o)return 0;if(s){var a=e-r.start,l=i.getPointOnCurve(stjs.trunc(a/r.duration())).y;return t*(1-l)}return t},t.bezierFilter=function(e,t){var n=t;return null!=this._fadein&&null!=this._fadein.range&&(n=this.doBezierIn(e,n)),null!=this._fadeout&&null!=this._fadeout.range&&(n=this.doBezierOut(e,n)),n},e._logLut=null,e._logLut16=null,e._initLogLut=function(){null==CssWaveCollider._logLut&&(CssWaveCollider._logLut=LogScale.intLut(128,6,null),CssWaveCollider._logLut16=LogScale.intLut(32768,6,null))},t.setChannel=function(e){this.waveImages=new WaveImages(this.http,e),this.channel=e},t.rulerSampleConvert=function(e){return e},t.getContext=function(){var e=this.canvas.clientWidth,t=this.canvas.clientHeight;return this.canvas.width==e&&this.canvas.height==t||(this.canvas.width=e,this.canvas.height=t),this.canvas.getContext("2d",null)},t.getDimensions=function(){return new Dimension(this.canvas.clientWidth,this.canvas.clientHeight)},t.setAmplification=function(e){this.amplify=e},t.clear=function(){var e=this.getDimensions();if(0!=e.width&&0!=e.height){var t=this.getContext();t.shadowColor="transparent",t.clearRect(0,0,e.width,e.height),this.drawFades(t)}},t.drawWave=function(){this.log.debug("CssWaveCollider drawWave"),this._debug&&(this.ruler=!0,this.rulerText=!0,this.rulerTextOffset=20);var e=this,t=this.getDimensions().width;this.uiSpp=stjs.trunc(this.sampleRange.duration()/t);var n=function(t){return e._drawWave(t,null)},i=function(t){return e._drawPreciseWave(t,null)},r=this.waveImages.getWaveImage(this.uiSpp,n);if(null==r){var s=null==this.preciseWaveImage||this.preciseWaveImage.spp!=this.uiSpp||!this.preciseWaveImage.containsRange(this.sampleRange.start,this.sampleRange.end);s?(this.log.debug("reloading wave data"),this.waveImages.onerror=function(){return e.clear()},r=this.waveImages.getPreciseWaveImage(this.sampleRange,t,i),this.preciseWaveImage=r):(r=this.preciseWaveImage,r.isLoading||this.drawPrecise())}return!r.isLoading},t.drawPrecise=function(){throw new RuntimeException("drawPrecise TODO")},t._drawWave=function(e,t){var n=this.getDimensions();if(0!=n.width&&0!=n.height){var i=this.getContext(),r=this.uiSpp/e.spp,s=(parseInt(n.height/2),n.height+1),o=s/256*this.amplify,a=stjs.trunc(this.sampleRange.start/e.spp);i.shadowColor="transparent",i.clearRect(0,0,n.width,n.height),i.strokeStyle="rgba(0,0,0,0.9)",i.lineWidth=.5,i.lineJoin="bevel",i.fillStyle=this.waveColor,i.beginPath();var l=0;for(i.moveTo(l,s),l=0;l<n.width;l++){var u=Math.round(l*r+a),c=Math.round((l+1)*r+a),d=this.sampleRange.start+Math.round(l*this.uiSpp),p=e.getMinMax8(stjs.trunc(u),stjs.trunc(c));p=CssWaveCollider._logLut[p],p=stjs.trunc(this.bezierFilter(d,p)),i.lineTo(l,s-p*o)}i.lineTo(l,s),i.closePath(),i.fill(),i.stroke(),this.drawSelection(i,s),this.fades&&this.drawFades(i),this.ruler&&this.drawRuler(i)}},t.assertTrue=function(e,t){t||this.log.error(e)},t._drawPreciseWave=function(e,t){this.assertTrue("sample range not within data range",e.dataSampleRange._containsRange(this.sampleRange));var n=this.getDimensions();if(0!=n.width&&0!=n.height){var i=this.getContext(),r=(parseInt(n.height/2),this.canvas.clientHeight+1),s=r/32768*this.amplify*.75;i.shadowColor="transparent",i.clearRect(0,0,n.width,n.height),i.strokeStyle="rgba(0,0,0,0.9)",i.lineWidth=.5,i.lineJoin="bevel",i.fillStyle=this.waveColor,i.beginPath();var o=e.getSampleOffset(this.sampleRange.start),a=[0,0];if(i.moveTo(0,r),this.uiSpp>=1)for(var l=0;l<n.width;l++){e.getMinMax16(l+o,a);var u=this.sampleRange.start+Math.round(l*this.uiSpp),c=CssWaveCollider.avg(a[0],a[1]);c=CssWaveCollider._logLut16[c],c=stjs.trunc(this.bezierFilter(u,c)),i.lineTo(l,r-c*s)}else for(var l=0;parseInt(stjs.trunc(l/e.spp))<n.width;l++){e.getMinMax16(parseInt(stjs.trunc(l/e.spp))+o,a);var u=this.sampleRange.start+Math.round(l),c=CssWaveCollider.avg(a[0],a[1]);0==c&&(e.getMinMax16(parseInt(stjs.trunc(l/e.spp))+1+o,a),c=CssWaveCollider.avg(a[0],a[1]),0==c&&(e.getMinMax16(parseInt(stjs.trunc(l/e.spp))-1+o,a),c=CssWaveCollider.avg(a[0],a[1]))),c=CssWaveCollider._logLut16[c],c=stjs.trunc(this.bezierFilter(u,c)),i.lineTo(parseInt(stjs.trunc(l/e.spp)),r-c*s)}i.lineTo(parseInt(n.width),r),i.closePath(),i.fill(),i.stroke(),this.drawSelection(i,r),this.fades&&this.drawFades(i),this.ruler&&this.drawRuler(i)}},e.avg=function(e,t){return Math.max(Math.abs(e),Math.abs(t))},t.drawSelection=function(e,t){if(this.log.debug("drawSelection"),this.selectionStartSample!=-1&&this.selectionEndSample!=-1){e.beginPath(),e.fillStyle="rgba(0,0,0,0.3)";var n=this.sampleToX(this.selectionStartSample),i=this.sampleToX(this.selectionEndSample);e.fillRect(n,0,i-n,t),e.closePath(),e.fill()}},t.drawFades=function(e){this.log.debug("drawFades"),null==e&&(e=this.getContext()),e.shadowColor="transparent";var t=this.canvas.clientHeight,n=this.canvas.clientWidth;if(null!=this._fadein&&null!=this._fadein.range){var i=this.sampleToX(this._fadein.range.start),r=this.sampleToX(this._fadein.range.end);e.beginPath(),e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,0.7)",e.lineWidth=0,e.moveTo(0,0),e.lineTo(0,t),e.lineTo(i,t),e.lineTo(i,0),e.lineTo(0,0),e.closePath(),e.fill(),e.lineWidth=.5,e.beginPath(),e.strokeStyle="rgba(0,0,0,1)",this.drawBezierin(),e.stroke(),e.beginPath(),e.strokeStyle="rgba(255,255,255,0.5)",this.drawBezierin(),e.stroke()}if(null!=this._fadeout&&null!=this._fadeout.range){var i=this.sampleToX(this._fadeout.range.start),r=this.sampleToX(this._fadeout.range.end);e.beginPath(),e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,0.7)",e.moveTo(r,0),e.lineTo(n,0),e.lineTo(n,t),e.lineTo(r,t),e.closePath(),e.fill(),e.lineWidth=.5,e.beginPath(),e.strokeStyle="rgba(0,0,0,1)",this.drawBezierout(),e.stroke(),e.beginPath(),e.strokeStyle="rgba(255,255,255,0.5)",this.drawBezierout(),e.stroke()}},t.drawBezierout=function(){throw new RuntimeException("drawBezierout TODO")},t.drawBezierin=function(){throw new RuntimeException("drawBezierin TODO")},t.sampleToX=function(e){return parseInt(stjs.trunc((e-this.sampleRange.start)/this.uiSpp))},t.drawRuler=function(e){this.log.debug("drawRuler"),e.shadowColor="rgba(0,0,0,0.8)",e.shadowOffsetX=1,e.shadowOffsetY=1,e.shadowBlur=1;for(var t=this.getDimensions(),n=0,i=t.width,r=this.getRulerSpacing(),s=stjs.trunc(this.sampleRange.duration()/r),o=this.align(this.sampleRange.start),a=this.sampleToPixel(),l=0;l<s;l++){var u=l*r,c=o+u,d=CssWaveCollider.linearSearch1(a,c);d>n&&d<i&&(this.rulerText&&(CssWaveCollider.setColor(e,this.rulerTextColor),e.fillText(""+this.rulerSampleConvert(c),d+3,this.rulerTextOffset,10)),CssWaveCollider.setColor(e,"rgba(0, 0, 0, 0.15)"),e.fillRect(d-1,0,1,t.height),CssWaveCollider.setColor(e,"rgba(255, 255, 255, 0.15)"),e.fillRect(d,0,1,t.height),CssWaveCollider.setColor(e,this.waveColor))}},t.align=function(e){return e},t.setWaveColor=function(e){null!=e?this.waveColor=e:this.waveColor=CssWaveCollider.defaultWaveColor},t.setSampleRange=function(e){this.sampleRange=e},t.sampleToPixel=function(){var e=this.getDimensions(),t=new Array;t[e.width-1]=0;for(var n=0;n<e.width;n++)t[n]=parseInt(this.uiSpp*n)+this.sampleRange.start;return t},t.getRulerSpacing=function(){var e=this.getDimensions(),t=e.width/this.rulerLines,n=parseInt(t*this.uiSpp);return CssWaveCollider.nearestPowerOfTwo(n)},e.setColor=function(e,t){e.fillStyle=t},e.nearestPowerOfTwo=function(e){return CssWaveCollider._powersOfTwo[Utils.binarySearch1(CssWaveCollider._powersOfTwo,e)]},e._powersOfTwo=[2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824],e.linearSearch1=function(e,t){for(var n=Utils.binarySearch1(e,t),i=n;i>=0;i--)if(e[i]!=t)return i;return 0}},{waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var FrameSelections=function(e){VGPlugins.call(this,e);var t=new ObservableArray;this.selectionsChangeRx=t,this.add=stjs.bind(this,function(n,i){var r=e.getTimeline();n=r.boundsFn(n),i=r.boundsFn(i);var s=r.getTvByFrame(n),o=r.getSecByTv(s),a=r.getTvByFrame(i),l=r.getSecByTv(a);t.push(this.selection(n,i,o,l,s,a,e.getSeekableDurationSec()))}),this.remove=function(e,n){var i=t.findIndex(function(t){return t.startFrame==e&&t.endFrame==n});t.remove(i)},e.addSelection=this.add,e.removeSelection=this.remove,e.getView().pluginsPanelRx.subscribe(stjs.bind(this,function(e){({parentView:this.player.getView(),model:this,container:e.overlay}),new FrameSelectionsView(this,e.overlay,this.player.getView(),null)}))};FrameSelections=stjs.extend(FrameSelections,VGPlugins,[],function(e,t){t.selectionsChangeRx=null,t.add=null,t.remove=null,e.Selection=function(){},e.Selection=stjs.extend(e.Selection,null,[],function(e,t){t.startFrame=0,t.endFrame=0,t.start=0,t.end=0,t.startTv=0,t.endTv=0,t.duration=0,t.el=null},{el:"Element"},{}),t.selection=function(e,t,n,i,r,s,o){var a=new FrameSelections.Selection;return a.startFrame=e,a.endFrame=t,a.start=n,a.end=i,a.startTv=r,a.endTv=s,a.duration=o,a}},{selectionsChangeRx:{name:"ObservableArray",arguments:["FrameSelections.Selection"]},add:{name:"Callback2",arguments:[null,null]},remove:{name:"Callback2",arguments:[null,null]},player:"PlayerImpl",view:"VGView"},{});var LogEventComponent=function(e){React.Component.call(this,e),this.state={editable:!0,showModifierInfo:!1}};LogEventComponent=stjs.extend(LogEventComponent,React.Component,[],function(e,t){e.eventCss="vg-side-panel-events-item",e.editEventCss="vg-side-panel-events-item editable",e.newEventCss="vg-side-panel-events-item new_event",e.tagsCss="vg-side-panel-events-item-tags",e.eventItemTimeCss="vg-side-panel-events-item-time",e.startTimeCss="start-time",e.endTimeCss="end-time",e.durationCss="duration",e.durationIcon="vg-icon-duration",e.durationValueCss="duration-value",e.modifiedCss="vg_modified vg-icon vg-icon-information",e.modifiedByCss="vg_modified-by",e.modifiedTitleCss="vg_modified-by_title",e.modifiedInfoCss="vg_modified-by_info",e.avatarCss="avatar",e.modifierAndDateCss="modifier_and_date",e.personInfoCss="person_info",e.dateInfoCss="date_info",e.tagsInputCss="vg-side-panel-events-item-tags-input",e.eventTagCss="vg-event-tag",e.deleteIcon="vg-icon vg-icon-delete",e.addTagCss="vg-event-tag add_tag",e.itemDescriptionCss="vg-side-panel-events-item-description",e.descriptionInputCss="description-input",t.event=null,e.State=function(){},e.State=stjs.extend(e.State,null,[],function(e,t){t.editable=!1,t.newEvent=!1,t.showModifierInfo=!1},{},{}),t.setEditable=function(e){this.setState({editable:e})},t.render=function(){var e=TimeCodeComponent.timeCode(TimeCodeComponent.TAPE,this.props.startTv,this.props.timescale,this.props.onChange),t=TimeCodeComponent.readOnlyTimeCode(TimeCodeComponent.TAPE,this.props.endTv,this.props.timescale,this.props.onChange),n=null;this.state.showModifierInfo&&(n=React.DOM.span({className:LogEventComponent.modifiedCss},React.DOM.div({className:LogEventComponent.modifiedByCss},React.DOM.div({className:LogEventComponent.modifiedTitleCss},"Last modification"),React.DOM.div({className:LogEventComponent.modifiedInfoCss},React.DOM.span({className:LogEventComponent.avatarCss}),React.DOM.div({className:LogEventComponent.modifierAndDateCss},React.DOM.div({className:LogEventComponent.personInfoCss},"By: Dylan Brown"),React.DOM.div({className:LogEventComponent.dateInfoCss},"At: 17:45 11/11/2016"))))));var i=stjs.bind(this,function(e){this.state.showModifierInfo=!this.state.showModifierInfo,this.setState(this.state)}),r=React.DOM.span({className:LogEventComponent.durationIcon,onClick:i});return this.state.editable?this.event=React.DOM.div({className:LogEventComponent.editEventCss},React.DOM.div({className:LogEventComponent.eventItemTimeCss},React.DOM.div({className:LogEventComponent.startTimeCss},React.DOM.span(null,"Start:"),e),React.DOM.div({className:LogEventComponent.endTimeCss},React.DOM.span(null,"End:"),t),React.DOM.div({className:LogEventComponent.durationCss},r,React.DOM.span({className:LogEventComponent.durationValueCss},"00:01:00:00"),n)),React.DOM.div({className:LogEventComponent.tagsCss},TagComponent.eventTag("42","Frame Shmrame Tag Name"),TagComponent.eventTag("43","Second Tag Name"),AddTagComponent.addTag()),React.DOM.div({className:LogEventComponent.itemDescriptionCss},React.DOM.input({className:LogEventComponent.descriptionInputCss,placeholder:"Add Description"}))):this.state.newEvent?this.event=React.DOM.div({className:LogEventComponent.newEventCss},React.DOM.div({className:LogEventComponent.eventItemTimeCss},React.DOM.div({className:LogEventComponent.startTimeCss},React.DOM.span(null,"Start:"),e),React.DOM.div({className:LogEventComponent.endTimeCss
},React.DOM.span(null,"End:"),t),React.DOM.div({className:LogEventComponent.durationCss},r,React.DOM.span({className:LogEventComponent.durationValueCss},"00:01:00:00"),n)),React.DOM.div({className:LogEventComponent.tagsCss},React.DOM.input({className:LogEventComponent.tagsInputCss,placeholder:"+ Add tag"}),React.DOM.div({className:"vg-side-panel-events-item-tags-input-container"},React.DOM.ul({className:"vg-side-panel-events-item-tags-input-dropdown"},React.DOM.li(null,"Bars and Tone"),React.DOM.li(null,"Fade toBlack"),React.DOM.li(null,"Black"),React.DOM.li(null,"Commercial Black / Insert Ads"),React.DOM.li(null,"Pull Commercial Black"),React.DOM.li(null,"Fade toBlack"),React.DOM.li(null,"Black"),React.DOM.li(null,"Commercial Black / Insert Ads"),React.DOM.li(null,"Pull Commercial Black")))),React.DOM.div({className:LogEventComponent.itemDescriptionCss},React.DOM.input({className:LogEventComponent.descriptionInputCss,placeholder:"Add Description"}))):this.event=React.DOM.div({className:LogEventComponent.eventCss},React.DOM.div({className:LogEventComponent.eventItemTimeCss},React.DOM.div({className:LogEventComponent.startTimeCss},React.DOM.span(null,"Start:"),e),React.DOM.div({className:LogEventComponent.endTimeCss},React.DOM.span(null,"End:"),t),React.DOM.div({className:LogEventComponent.durationCss},r,React.DOM.span({className:LogEventComponent.durationValueCss},"00:01:00:00"),n)),React.DOM.div({className:LogEventComponent.tagsCss},TagComponent.eventTag("42","Frame Shmrame Tag Name"),TagComponent.eventTag("43","Second Tag Name")),React.DOM.div({className:LogEventComponent.itemDescriptionCss},React.DOM.input({className:LogEventComponent.descriptionInputCss,placeholder:"Add Description"}))),this.event}},{event:{name:"ReactElement",arguments:["Object"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var RestVideoLogAsyncStorage=function(e,t,n,i){VideologAsyncStorage.call(this,i),this.http=e,this.url=t,this.coldStart(n)};RestVideoLogAsyncStorage=stjs.extend(RestVideoLogAsyncStorage,VideologAsyncStorage,[],function(e,t){t.http=null,t.url=null,t.coldStart=function(e){this.loadTags(this.url+"tags.json",stjs.bind(this,function(t){this.displayNamesById=t,e(this)}))},t.tracksOfProxy=function(e,t){this.http.get(this.url+"media/tracks/"+e+"/").subscribe(stjs.bind(this,function(e){if(null==e)throw this.log.debug("empty response"),new RuntimeException("empty response");var n=JSON.parse(e);t(n.map(function(e,t,n){return Track.fromJson(e)}))}),stjs.bind(this,function(e){this.log.error("failed to load tracks list for media")}))},t.trackEvents=function(e,t,n){this.http.get(this.url+"trackevents/"+e+"/").subscribe(function(e){if(null==e)n(null);else{var i=JSON.parse(e),r=i.map(function(e,t,n){return LogEvent.fromJson(e)});t(r)}},stjs.bind(this,function(e){this.log.error("failed to load track events!"),n("failed to load track events!")}))},t.loggedUser=function(e,t){this.http.request(function(){return e},null,"GET",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(stjs.bind(this,function(e){if(null!=e){var n=stjs.hydrate(JSON.parse(e),User);t(n)}else this.log.error("can not load VideoLog User")}),stjs.bind(this,function(e){this.log.error("failed to load User",e)}))},t.loadTags=function(e,t){var n={};this.http.get(e).subscribe(stjs.bind(this,function(e){if(null!=e){for(var i=JSON.parse(e),r=0;r<i.length;r++){var s=i[r];n[s.id]=s.displayName}this.log.info(i.length," tags loaded"),t(n)}}),stjs.bind(this,function(t){this.log.error("failed to load tags",t,e)}))},t._trackById=function(e,t,n){var i=this.url+"track/"+e+"/";this.http.get(i).subscribe(stjs.bind(this,function(e){null!=e?t(Track.fromJson(JSON.parse(e))):(this.log.error("trackLoad response is null"),n(null))}),stjs.bind(this,function(e){this.log.error(e,i),n(e)}))},t._saveTrack=function(e,t,n){this.log.debug(e);var i=RestVideoLogAsyncStorage.getCRFTTokenHeader();i["Content-Type"]="application/json",null==e.id?this.http.request(stjs.bind(this,function(){return this.url+"track/"}),JSON.stringify(e),"POST",i).subscribe(function(e){t(Track.fromJson(JSON.parse(e)))},stjs.bind(this,function(e){this.log.error(e.responseText),n(e)})):this.http.request(stjs.bind(this,function(){return this.url+"track/"+e.id+"/"}),JSON.stringify(e),"PUT",i).subscribe(function(e){t(Track.fromJson(JSON.parse(e)))},stjs.bind(this,function(e){this.log.error(e.responseText),n(e)}))},t._eventById=function(e,t,n){this.http.getJson(this.url+"event/"+e+"/",Map).subscribe(function(e){t(LogEvent.fromJson(e))},function(e){n(e)})},t._saveEvent=function(e,t,n){var i=RestVideoLogAsyncStorage.getCRFTTokenHeader();i["Content-Type"]="application/json",null==e.id?this.http.request(stjs.bind(this,function(){return this.url+"event/"}),JSON.stringify(e),"POST",i).subscribe(function(e){t(LogEvent.fromJson(JSON.parse(e)))},stjs.bind(this,function(e){this.log.error(e.responseText),n(e)})):this.http.request(stjs.bind(this,function(){return this.url+"event/"+e.id+"/"}),JSON.stringify(e),"PUT",i).subscribe(function(e){t(LogEvent.fromJson(JSON.parse(e)))},stjs.bind(this,function(e){this.log.error(e.responseText),n(e)}))},t._deleteTrack=function(e,t){this.http.request(stjs.bind(this,function(){return this.url+"track/"+e.id+"/"}),null,"DELETE",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(function(n){return t(e)})},t._deleteEvent=function(e,t){this.http.request(stjs.bind(this,function(){return this.url+"event/"+e}),null,"DELETE",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(function(e){return t(LogEvent.fromJson(JSON.parse(e)))})},t._clearTrack=function(e,t){this.http.request(stjs.bind(this,function(){return this.url+"clear/track/"+e.id+"/"}),null,"DELETE",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(function(n){return t(e)})},e.getCRFTTokenHeader=function(){return{"X-CSRFToken":Utils.readCookie("csrftoken")}}},{http:"Http",trackChangedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},trackDeletedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},eventChangedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},eventDeletedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},displayNamesById:{name:"Map",arguments:[null,null]},log:"Log",defaultTrackNames:{name:"Array",arguments:[null]}},{});var TimestampInput=function(e,t,n,i){TimecodeInput.call(this,e,t,n,i,"standard","__:__:__.___")};TimestampInput=stjs.extend(TimestampInput,TimecodeInput,[],function(e,t){t.timeSampleToInputValue=function(e){var t=this.timeline.getUTCTimestampBySec(e.sec);return t.replaceAll(".*T|Z","")},t.inputValueToTimeSample=function(e){var t=new Date(this.timeline.getStartUTCTimestamp()).getTime(),n=new Date(this.timeline.getStartUTCTimestamp().replaceAll("T.*Z","T"+e+"Z")).getTime(),i=stjs.trunc(n-t),r=this.timeline.getFrameByMillis(i),s=i/1e3,o=this.timeline.getTvBySec(s);return new TimeSample(o,r,s)}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var TapeTimecodeInput=function(e,t,n,i){TimecodeInput.call(this,e,t,n,i,"tape","__:__:__:__")};TapeTimecodeInput=stjs.extend(TapeTimecodeInput,TimecodeInput,[],function(e,t){t.timeSampleToInputValue=function(e){return this.timeline.getTapeByFrame(e.frame)},t.inputValueToTimeSample=function(e){var t=this.timeline.getFrameByTimecode(e),n=this.timeline.getSecByFrame(t),i=this.timeline.getTvByFrame(t),r=new TimeSample(i,t,n);return r}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var StandardTimecodeInput=function(e,t,n,i){TimecodeInput.call(this,e,t,n,i,"standard","__:__:__.___")};StandardTimecodeInput=stjs.extend(StandardTimecodeInput,TimecodeInput,[],function(e,t){t.timeSampleToInputValue=function(e){return Utils.hhmmssms(stjs.trunc(1e3*e.sec))},t.inputValueToTimeSample=function(e){var t=Utils.HHmmSSmsecToTimestamp(e),n=this.timeline.getFrameByMillis(t),i=t/1e3,r=this.timeline.getTvBySec(i);return new TimeSample(r,n,i)}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var FrameTimecodeInput=function(e,t,n,i){TimecodeInput.call(this,e,t,n,i,"frame","")};FrameTimecodeInput=stjs.extend(FrameTimecodeInput,TimecodeInput,[],function(e,t){t.timeSampleToInputValue=function(e){return""+e.frame},t.inputValueToTimeSample=function(e){var t=Utils.toInt(e),n=this.timeline.getSecByFrame(t),i=this.timeline.getTvByFrame(t),r=new TimeSample(i,t,n);return r}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var SafeAreaDropDownRRControl=function(e,t){CloseableView.call(this),this.el=window.document.createElement("div"),this.dropDownElementId="vg_safe-areas";var n=VGTemplates.elFromHTML(VGTemplates.addonControl(this.dropDownElementId,"vg_icon-map"),this.el.ownerDocument);n.classList.remove("vg_ddown"),n.classList.add("vg_ddown_hover"),this.el.appendChild(n);var i=this.el.querySelector("#"+this.dropDownElementId),r=[new ColorBulletDropDownItem("4-3","4:3","grey"),new ColorBulletDropDownItem("caption","Caption","grey"),new ColorBulletDropDownItem("action","Action","grey"),new RenderedDropDownItem("separator","",'<div class="vg_ddown_hover__title vg_default" style="width: 100%"></div>',t),new ColorBulletDropDownItem("16-9","16:9","white")];this.dropDown=new DropDownView(i,this,"vg_ddown_hover","",r),SafeAreaDropDownRRControl.initDropDownEvents(this.dropDown,e)};SafeAreaDropDownRRControl=stjs.extend(SafeAreaDropDownRRControl,CloseableView,[VGControl],function(e,t){t.el=null,t.dropDownElementId=null,t.dropDown=null,e.initDropDownEvents=function(e,t){e.itemSelectedRx.subscribe(function(n){null!=n&&("16-9".equals(n.id)?(t.setAspectRatio(n.id),e.updateItem("16-9",new ColorBulletDropDownItem("16-9","16:9","white")),e.updateItem("4-3",new ColorBulletDropDownItem("4-3","4:3","grey"))):"4-3".equals(n.id)?(t.setAspectRatio(n.id),e.updateItem("16-9",new ColorBulletDropDownItem("16-9","16:9","grey")),e.updateItem("4-3",new ColorBulletDropDownItem("4-3","4:3","white"))):"action".equals(n.id)?(t.toggleActionSafe(),e.updateItem(n.id,new ColorBulletDropDownItem("action","Action",t.isActionVisible()?"green":"grey"))):"caption".equals(n.id)&&(t.toggleCaptionSafe(),e.updateItem(n.id,new ColorBulletDropDownItem("caption","Caption",t.isCaptionVisible()?"red":"grey"))))})},t.getControlEl=function(e){return this.el}},{el:"Element",dropDown:"DropDownView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGCropPlugin=function(e,t){BasePlugin.call(this,"crop"),this.view=e,this.log=t,this.editMode=null,this.cropMaskEl=this.view.getElement().querySelector(".crop-mask"),this.imageEl=this.view.getElement().querySelector(".crop-frame"),this.disposable=new Rx.CompositeDisposable,this.initListeners()};VGCropPlugin=stjs.extend(VGCropPlugin,BasePlugin,[],function(e,t){e.EDIT_MODE_W="W",e.EDIT_MODE_L="L",e.EDIT_MODE_H="H",e.EDIT_MODE_T="T",t.cropMask=null,t.cropMaskEl=null,t.imageEl=null,t.editMode=null,t.view=null,t.log=null,t.disposable=null,e.vgEnableCropPlugin=function(e,t){var n=new VGThemeView(e.getView().controlsPanelView.getControlsContainer(),e.getView(),null,{iconClass:"vg_icon-camera",header:"Image Capture",tracksClass:"vg_crop"});n.el.addEventListener("click",function(i){e.getView().controlsPanelView.deactivate();var r=e.getView().freezeVideo();VGCropPlugin.initCropPluginView(e,t,r),n.el.classList.add("active")})},e.rrEnableCropPlugin=function(e,t){e.getView().controlsPanelView.enableControl(new FrameCropCaptureControl(e,function(n){VGCropPlugin.initCropPluginView(e,t,n)}))},e.initCropPluginView=function(e,t,n){e.isPlaying()&&e.pause();var i=new VGCropPluginView;i.frameImage.src=n.toDataURL("image/png"),i.frameImage.setAttribute("draggable","false"),i.frameImage.onload=function(n){var r=new VGCropPlugin(i,e.getLog());setTimeout(function(){var e=i.frameImage.clientWidth,t=i.frameImage.clientHeight;r.drawCropMask(e,t,0,0)},142),t(i,r)}},t.drawCropMask=function(e,t,n,i){this.cropMask=new CropMask(e,t,n,i),this.drawMask()},t.getCroppedCanvas=function(){var e=window.document.createElement("canvas"),t=window.document.createElement("img");t.src=this.view.frameImage.src;var n=t.width/this.view.frameImage.width,i=t.height/this.view.frameImage.height;e.width=stjs.trunc(n*this.cropMask.width),e.height=stjs.trunc(i*this.cropMask.height);var r=e.getContext("2d",null),s=n*this.cropMask.left*-1,o=i*this.cropMask.top*-1;return r.drawImage(t,stjs.trunc(s),stjs.trunc(o)),e},t.initListeners=function(){for(var e=window.document,t=this.view.getElement().querySelectorAll(".pipka"),n=0;n<t.length;n++){var i=t[n];Rx.Observable.fromEvent(i,"mousedown").subscribe(stjs.bind(this,function(e){this.log.debug("edit mode on!"),e.target.classList.contains("mr")?this.editMode=VGCropPlugin.EDIT_MODE_W:e.target.classList.contains("bm")?this.editMode=VGCropPlugin.EDIT_MODE_H:e.target.classList.contains("ml")?this.editMode=VGCropPlugin.EDIT_MODE_L:e.target.classList.contains("tm")&&(this.editMode=VGCropPlugin.EDIT_MODE_T)}))}this.disposable.add(Rx.Observable.fromEvent(e,"mouseup").subscribe(stjs.bind(this,function(e){null!=this.editMode&&this.editModeOff()()}))),this.disposable.add(Rx.Observable.fromEvent(this.view.getElement(),"mousemove").subscribe(stjs.bind(this,function(e){if(null!=this.editMode){var t=this.cropMaskEl.getBoundingClientRect(),n=this.imageEl.getBoundingClientRect(),i=15,r=e.clientX-t.left,s=e.clientY-t.top,o=Math.min(e.clientY-n.top,n.height-i),a=Math.min(e.clientX-n.left,n.width-2*i);return this.editMode.contains(VGCropPlugin.EDIT_MODE_W)&&(this.cropMask.width=r),this.editMode.contains(VGCropPlugin.EDIT_MODE_H)&&(this.cropMask.height=Math.max(s,i)),this.editMode.contains(VGCropPlugin.EDIT_MODE_L)&&(this.cropMask.left=a,this.cropMask.width=Math.max(t.width-r,i)),this.editMode.contains(VGCropPlugin.EDIT_MODE_T)&&(this.cropMask.top=o,this.cropMask.height=Math.max(t.height-s,i)),e.clientX>=n.right||e.clientX<=n.left||e.clientY>=n.bottom||e.clientY<=n.top?void this.editModeOff()():void this.drawMask()}})))},t.close=function(){this.disposable.dispose()},t.editModeOff=function(){return stjs.bind(this,function(){this.log.debug("edit mode off!"),this.editMode=null})},t.drawMask=function(){this.cropMaskEl.style.left=this.cropMask.left+"px",this.cropMaskEl.style.width=this.cropMask.width+"px",this.cropMaskEl.style.height=this.cropMask.height+"px",this.cropMaskEl.style.top=this.cropMask.top+"px"},t.renderInto=function(e,t,n){this.view.appendTo(e),n()}},{cropMask:"CropMask",cropMaskEl:"Element",imageEl:"Element",view:"VGCropPluginView",log:"Log",disposable:"Rx.CompositeDisposable",pluginApi:"VGPlayerPluginApi"},{});var SubtitlesToggleControl=function(e,t){this.player=e,this.dialogRequested=t,this.captionsView=new CaptionsView(e,e.getView().getCaptionsContainer(),null),e.getTimeUpdateRx().subscribe(stjs.bind(this,function(e){this.captionsView.drawCaps(e.tv,null)}))};SubtitlesToggleControl=stjs.extend(SubtitlesToggleControl,null,[VGControl],function(e,t){t.captionsView=null,t.iconClickRx=null,t.player=null,t.dialogRequested=null,t.showCaptions=function(e){this.captionsView.setCaptions(e,this.player.getCurrentTimeValue(),null)},t.getControlEl=function(e){var t=VGTemplates.elFromHTML(VGTemplates.addonControl("external-control-subs","vg_icon-subs"),this.player.container.ownerDocument);return this.iconClickRx=Rx.Observable.fromEvent(t,"click",function(e){return t}),this.iconClickRx.subscribe(stjs.bind(this,function(e){this.player.pause(),this.dialogRequested(this)})),t}},{captionsView:"CaptionsView",iconClickRx:{name:"Rx.Observable",arguments:["Element"]},player:"SkinnedPlayerImpl",dialogRequested:{name:"Callback1",arguments:["SubtitlesToggleControl"]}},{});var VideoLogComponent=function(e){React.Component.call(this,e),this.state={tracks:[],events:[],zoom:50,currentEvent:0}};VideoLogComponent=stjs.extend(VideoLogComponent,React.Component,[],function(e,t){e.VideoLogProps=function(e,t,n,i,r,s,o,a){this.timeline=e,this.filmstripDrawer=t,this.selectTrackRx=n,this.deleteTrackRx=i,this.importTrackRx=r,this.selectEventRx=s,this.deleteEventRx=o,this.log=a},e.VideoLogProps=stjs.extend(e.VideoLogProps,null,[],function(e,t){t.timeline=null,t.filmstripDrawer=null,t.deleteTrackRx=null,t.selectTrackRx=null,t.importTrackRx=null,t.selectEventRx=null,t.deleteEventRx=null,t.log=null},{timeline:"Timeline",filmstripDrawer:"FilmStripDrawer",deleteTrackRx:{name:"Rx.Subject",arguments:["Track"]},selectTrackRx:{name:"Rx.Subject",arguments:["Track"]},importTrackRx:{name:"Rx.Subject",arguments:[null]},selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log"},{}),t.setEvents=function(e){this.state.events=null==e?[]:e,this.setState(this.state)},t.setTracks=function(e){this.state.tracks=null==e?[]:e,this.setState(this.state)},t.setCurrentEvent=function(e){this.state.currentEvent=e,this.setState(this.state)},t.getHeight=function(){return null!=this.refs.panel?this.refs.panel.clientHeight:0},t.getEvents=function(){return this.state.events},t.render=function(){var e=new TrackListComponent.TrackListProps(this.state.tracks,this.props.deleteTrackRx,this.props.selectTrackRx,this.props.importTrackRx),t=new EventListComponent.EventListProps(this.state.events,this.props.timeline,this.props.filmstripDrawer,this.state.zoom,this.state.currentEvent,this.props.selectEventRx,this.props.deleteEventRx,this.getHeight()-70-73,this.props.log);return React.DOM.div({className:"vg-events-and-tracks-container"},React.DOM.div({className:"vg-events-and-tracks-wrapper"},React.DOM.div({className:"vg-tracks-panel"},React.createElement(TrackListComponent,UIUtils.toPlainObject(e))),React.DOM.div({className:"vg-events-panel",ref:"panel"},React.createElement(EventListComponent,UIUtils.toPlainObject(t)))))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var RadioButtonMenuComponent=function(e){React.Component.call(this,e),this.state={mute:!1,selectedId:null,items:{}},this.iconClickRx=new Rx.Subject,this.selectedItemRx=new Rx.Subject};RadioButtonMenuComponent=stjs.extend(RadioButtonMenuComponent,React.Component,[],function(e,t){e.HoverMenuProps=function(e,t,n,i){this.title=e,this.className=t,this.icon=n,this.muteIcon=null!=i?i:n},e.HoverMenuProps=stjs.extend(e.HoverMenuProps,null,[],function(e,t){t.title=null,t.className=null,t.icon=null,t.muteIcon=null},{},{}),t.iconClickRx=null,t.selectedItemRx=null,t.getIconClickRx=function(){return this.iconClickRx},t.getSelectedItemRx=function(){return this.selectedItemRx},t.render=function(){var e=stjs.bind(this,function(e){this.toggleMute(),this.iconClickRx.onNext(this.state.mute)});return React.DOM.div({className:"vg_iconControls__item vg_ddown_hover vg_info"},React.DOM.span({className:this.state.mute?this.props.muteIcon:this.props.icon,onClick:e}),DropDownComponent.ddown(this.createDropDown()))},t.createDropDown=function(){return new ColorBulletDropDown(this.props.title,this.props.className,Utils.map(this.state.items,stjs.bind(this,function(e,t){return new ColorBulletDropDownMenuItem(e,t,e.equals(this.state.selectedId)?"white":"grey",stjs.bind(this,function(t){this.state.selectedId=e,this.setState(this.state),this.selectedItemRx.onNext(e)}))})))},t.toggleMute=function(){this.state.mute=!this.state.mute,this.setState(this.state)},t.updateItems=function(e){this.state.items=e,this.setState(this.state)}},{iconClickRx:{name:"Rx.Subject",arguments:[null]},selectedItemRx:{name:"Rx.Subject",arguments:[null]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var MenuControlComponent=function(e){React.Component.call(this,e),this.state={active:!1}};MenuControlComponent=stjs.extend(MenuControlComponent,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.icon=null},{},{}),t.render=function(){var e="vg_iconControls__item vg_ddown vg_info";if(null!=this.state.dropDown){var t=stjs.bind(this,function(e){return this.toggle()});return this.state.active&&(e+=" active"),React.DOM.div({className:e,onClick:t},React.DOM.span({className:this.props.icon}),DropDownComponent.ddown(this.state.dropDown))}return React.DOM.div({className:e},React.DOM.span({className:this.props.icon}))},t.setActiveItem=function(e){null!=this.state.dropDown&&(this.state.dropDown.items.forEach(function(t){t.selected=t.id.equals(e)}),this.setState(this.state))},t.updateDropDown=function(e){this.state.dropDown=e,this.setState(this.state)},t.setActive=function(e){this.state.active=e,this.setState(this.state)},t.show=function(){this.setActive(!0)},t.hide=function(){this.setActive(!1)},t.toggle=function(){this.setActive(!this.state.active)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var MuteableHoverMenuComponent=function(e){React.Component.call(this,e),this.state={mute:!1},this.iconClickRx=new Rx.Subject};MuteableHoverMenuComponent=stjs.extend(MuteableHoverMenuComponent,React.Component,[],function(e,t){e.HoverMenuProps=function(e,t){this.icon=e,this.muteIcon=t},e.HoverMenuProps=stjs.extend(e.HoverMenuProps,null,[],function(e,t){t.icon=null,t.muteIcon=null},{},{}),t.iconClickRx=null,t.getIconClickRx=function(){return this.iconClickRx},t.render=function(){var e=stjs.bind(this,function(e){this.toggleMute(),this.iconClickRx.onNext(this.state.mute)});return React.DOM.div({className:"vg_iconControls__item vg_ddown_hover vg_info"},React.DOM.span({className:this.state.mute?this.props.muteIcon:this.props.icon,onClick:e}),DropDownComponent.ddown(this.state.dropDown))},t.toggleMute=function(){this.state.mute=!this.state.mute,this.setState(this.state)},t.updateDropDown=function(e){this.state.dropDown=e,this.setState(this.state)},t.setItemColor=function(e,t){null!=this.state.dropDown&&(this.state.dropDown.items.forEach(stjs.bind(this,function(n){n.id.equals(e)&&(n.color=t,this.state.mute=!1)})),this.setState(this.state))}},{iconClickRx:{name:"Rx.Subject",arguments:[null]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var StepsControl=function(e){VGPlugins.call(this,e),this.view=new StepsControlView(e,e.getView().controlsPanelView.getControlsContainer(),e.getView(),null)};StepsControl=stjs.extend(StepsControl,VGPlugins,[VGControl],function(e,t){t.getControlEl=function(e){return this.view.el}},{player:"PlayerImpl",view:"VGView"},{});var AudioControl=function(e){VGPlugins.call(this,e),this.log=e.getLog(),this.view=new AudioControlView(e,e.getView().controlsPanelView.getControlsContainer(),e.getView(),null),this.setEventSubscriptions()};AudioControl=stjs.extend(AudioControl,VGPlugins,[VGControl],function(e,t){t.log=null,t.view=null,t.volume=0,t.getControlEl=function(e){return this.view.el},t.setEventSubscriptions=function(){this.volume=this.player.getVolume(),this.player.audioTracksRx.distinct(function(e){return e.id()}).subscribe(stjs.bind(this,"addAudioTrack")),this.player.getVolumeChangeRx().subscribe(stjs.bind(this,function(e){0!=e&&(this.volume=e)})),this.view.muteButtonRx.subscribe(stjs.bind(this,function(e){e?this.player.setVolume(0):this.player.setVolume(this.volume)})),this.view.volumeRangeRx.subscribe(stjs.bind(this.player,"setVolume")),this.view.channelElRx.subscribe(stjs.bind(this,function(e){if(null!=e){var t=e.closest(".vg_audioTrack"),n=this.player.getCurrentAudioTrack(),i=this.player.getAudioTrack(t.getAttribute("data-trackproxy"));if(null!=n&&i.proxyId==n.proxyId){if(this.player.proxyType==ProxyType.VG){var r=Utils.toInt(e.getAttribute("data-channel")),s=!i.getChannelMuted(r);this.log.debug(s?"mute":"unmute",i,r),i.setChannelMuted(r,s)}}else this.player.setVolume(this.volume),this.switchAudio(i)}}))},t.addAudioTrack=function(e){e.channelMuteRx.throttle(2).doOnNext(stjs.bind(this,function(e){this.player.isAllMuted()&&0!=this.player.getVolume()?this.player.setVolume(0):this.player.setVolume(this.volume),this.player.applyAudioChanges()})).subscribe()},t.switchAudio=function(e){this.log.debug("switch audio track"),this.player.setCurrentAudioTrack(e.id())}},{log:"Log",view:"AudioControlView",player:"PlayerImpl",view:"VGView"},{});var CaptionsControl=function(e){VGPlugins.call(this,e),this.view=new CaptionsControlView(e,e.getView().controlsPanelView.getControlsContainer(),e.getView(),null);var t=e.getView().getCaptionsContainer(),n=null;e.options.search&&(n=e.getView().timeScrubberView.el),this.captionsView=new CaptionsView(e,t,n),this.captionsChangeRx=new Rx.Subject,this.captionsSearchRx=new Rx.Subject,this.setEventSubscriptions()};CaptionsControl=stjs.extend(CaptionsControl,VGPlugins,[VGControl],function(e,t){t.tv=0,t.captionsView=null,t.captionsChangeRx=null,t.captions=null,t.searchValue=null,t.captionsSearchRx=null,t.getControlEl=function(e){return this.view.el},t.search=function(e){return Utils.filter(this.getCaptions().rows,function(t){return Utils.includes(t.notes.toLowerCase(),e.toLowerCase())})},t.addSearchHits=function(e){var t=this,n=this.player.getTimeline();e.forEach(function(e){var i=n.getFrameByTv(e.startTv);if(i<n.getLastFrame()){var r=i/n.getFrameCount();t.captionsView.addSearchHit(new Position(r,0))}})},t.setEventSubscriptions=function(){var e=this.view;this.player.getTimeUpdateRx().subscribe(stjs.bind(this,function(e){this.captionsView.drawCaps(e.tv,this.searchValue),this.tv=e.tv})),this.captionsChangeRx.subscribe(stjs.bind(this,function(e){return e==this.getCaptions()?(this.captionsView.hideCaptions(this.tv),this.captionsView.clearSearch(),this.setCaptions(null),void this.view.deactivateCaptions()):(this.setCaptions(e),this.view.activateCaption(e),this.captionsView.setCaptions(this.getCaptions(),this.tv,this.searchValue),void 0)})),this.captionsSearchRx.subscribe(stjs.bind(this,function(e){if(this.captionsView.clearSearch(),this.searchValue=e,this.captionsView.drawCaps(this.tv,this.searchValue),this.view.setSearchValue(e),Utils.isNotEmpty(e)){var t=this.search(e);this.addSearchHits(t)}})),this.player.getCaptionListChangeRx().subscribe(stjs.bind(this,function(e){this.captionsChangeRx.onNext(e)})),e.captionElRx.subscribe(stjs.bind(this,function(e){this.captionsChangeRx.onNext(Utils.callMethod(e,CaptionsControlView.GetCaption))})),e.captionsFormRx.subscribe(stjs.bind(this,function(e){this.captionsSearchRx.onNext(e.value)}))},t.getCaptions=function(){return this.captions},t.setCaptions=function(e){this.captions=e}},{captionsView:"CaptionsView",captionsChangeRx:{name:"Rx.Subject",arguments:["Subtitles"]},captions:"Subtitles",captionsSearchRx:{name:"Rx.Subject",arguments:[null]},player:"PlayerImpl",view:"VGView"},{});var VideoControlView=function(e,t,n,i){VGThemeView.call(this,t,n,i,VGThemeView.magicContext("vg_icon-video","VIDEO","vg_videolist")),this.player=e,this.tracksInfo.insertAdjacentHTML("afterend",'<div class="vg_hdButton vg_primary-bg vg_panel active"></div>'),this.hdButton=this.el.querySelector(".vg_hdButton");var r=e.cutList.length;this.tracksInfo.innerHTML=UIUtils.plural("track",r);var s=VGTemplates.elFromHTML(VG["templates/videotrack.html"]({}),e.container.ownerDocument);if(this.littlePlayButton=s.querySelector(".vg_littlePlayButton"),this.list.appendChild(s),e.options.plugins.indexOf(Filmstrip.PLUGIN_ID)!=-1){var o=s.querySelector(".vg_videoTrack__canvas");e.getFilmStripDrawer(function(t){t.drawFilmstrip(o,0,e.getTimeline().getLastFrame(),4,!1,function(){e.getLog().debug("Filmstrip generated successfully")},function(t){e.getLog().error(t,"Couldn't draw filmstrip")})})}this.setEventRx()};VideoControlView=stjs.extend(VideoControlView,VGThemeView,[],function(e,t){t.player=null,t.hdButton=null,t.littlePlayButton=null,t.iconClick=null,t.littlePlayButtonClick=null,t.hdButtonRX=null,t.setEventRx=function(){var e=this,t=e.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");e.iconClick=Rx.Observable.fromEvent(t,"click"),e.littlePlayButtonClick=Rx.Observable.fromEvent(e.littlePlayButton,"click"),e.iconClick.subscribe(stjs.bind(this,function(t){this.player.iconClick.onNext(e.el)})),e.littlePlayButtonClick.subscribe(function(t){e.littlePlayButton.classList.toggle("vg_playing")}),e.hdButtonRX=Rx.Observable.fromEvent(e.hdButton,"click").filter(stjs.bind(this,function(e){return!this.player.isChangingVideoSrc()})).map(function(t){return e.toggleActive(e.hdButton)}),this.player.getPlayRx().subscribe(function(t){t?e.littlePlayButton.classList.add("vg_playing"):e.littlePlayButton.classList.remove("vg_playing")})}},{player:"VGThemePlayer",hdButton:"Element",littlePlayButton:"Element",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},littlePlayButtonClick:{name:"Rx.Observable",arguments:["DOMEvent"]},hdButtonRX:{name:"Rx.Observable",arguments:[null]},icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var ContexterStatusComponent=function(e){React.Component.call(this,e)};ContexterStatusComponent=stjs.extend(ContexterStatusComponent,React.Component,[],function(e,t){e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.progress=0,t.detect=null,t.stop=null,t.redo=null},{detect:"Callback0",stop:"Callback0",redo:{name:"Callback1",arguments:["DOMEvent"]}},{}),t.render=function(){var e,t={};t.className=ViewConsts.VG_BTN_PRIMARY;var n=null;return this.props.progress==-1?(e=React.DOM.span({},"press to detect"),t.onClick=stjs.bind(this,function(e){return this.props.detect()}),t.label="detect",n=React.createElement(VGButton,t)):this.props.progress<100?(e=React.DOM.span({},React.DOM.span({className:ViewConsts.VG_LOADING_SPINNER}),this.props.progress+"%"),t.onClick=stjs.bind(this,function(e){return this.props.stop()}),t.label="stop",n=React.createElement(VGButton,t)):e=React.DOM.span({},"detected"),React.DOM.div({className:ContexterConsts.VG_CONTEXTER_STATUSBAR},e,n)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsSummaryComponent=function(e){React.Component.call(this,e),this.state={isSubsActive:!1,className:e.className}};SubsSummaryComponent=stjs.extend(SubsSummaryComponent,React.Component,[],function(e,t){e.CAPTION_SCROLL_LOCK="caption_scroll-lock",e.CAPTION_SWITCH_BTN="caption_switch-btn",e.CAPTION_TIMEVALUES="caption_timevalues",e.CAPTION_OPEN="caption_open",t.render=function(){var e=this._generateTemplate();return e},t._generateTemplate=function(){var e=[],t=FluentMap.withClassName("caption__title").onClick(this.props.onClick).key("opnCaptKey").build(),n=this.props.subtitles.rows,i=ViewConsts.VG_INFO;this.props.matchFound&&(i=ViewConsts.TEXT_YELLOW);var r=stjs.trunc(1e3*this.props.timeline.getDurationSec()),s=this.props.timeline.getMillisByTv(n[0].startTv),o=this.props.timeline.getMillisByTv(n[n.length-1].endTv),a=React.DOM.span(ReactViewUtils.className(i),this.props.subtitles.title),l=this._timeValues(s,o,r);e.push(this._switchBtn()),e.push(this._scrollLock()),e.push(React.DOM.div(t,React.DOM.span(FluentMap.withClassName(SubsSummaryComponent.CAPTION_OPEN).build()),a,l)),
e.push(this._shift(s,o));var u=React.DOM.div(ReactViewUtils.className(this.state.className),e);return u},t._scrollLock=function(){var e,t=FluentMap.withClassName(SubsSummaryComponent.CAPTION_SCROLL_LOCK).key("scrollLockKey").onClick(this.props.onLock);return this.props.scrollLocked?(e=ViewConsts.VG_ICON_LOCK,t.addClass(ViewConsts.ACTIVE)):e=ViewConsts.VG_ICON_UNLOCK,React.DOM.div(t.build(),React.DOM.span(ReactViewUtils.className(e)))},t._shift=function(e,t){var n={};return n.startMsec=e,n.endMsec=t,n.shiftCaptionsRx=this.props.shiftCaptionsRx,n.key="shiftPKey",React.createElement(ShiftTimecodesView,n)},t._timeValues=function(e,t,n){var i=Utils.hhmmss(e),r=Utils.hhmmss(t),s=ReactViewUtils.className(SubsSummaryComponent.CAPTION_TIMEVALUES),o=null,a=null;return e>n&&(o=ReactViewUtils.className(ViewConsts.VG_CAPTION_HIGHLIGHT)),t>n&&(a=ReactViewUtils.className(ViewConsts.VG_CAPTION_HIGHLIGHT)),React.DOM.span(s,React.DOM.span(o,i),React.DOM.span(ReactViewUtils.className(ViewConsts.TIME_ARROW)),React.DOM.span(a,r))},t._switchBtn=function(){var e=ViewConsts.OFF,t=FluentMap.withClassName(SubsSummaryComponent.CAPTION_SWITCH_BTN).key("switchBtnKey").onClick(this.props.switchBtnClick);return this.props.isSubsActive&&(e=ViewConsts.ON,t.addClass(ViewConsts.ACTIVE)),React.DOM.div(t.build(),e)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ZoomRangeComponent=function(e){React.Component.call(this,e)};ZoomRangeComponent=stjs.extend(ZoomRangeComponent,React.Component,[],function(e,t){t.render=function(){var e={};e.points=this.props.points,e.min=this.props.min,e.max=this.props.max,e.value=this.props.value,e.onChange=this.props.onChange;var t=React.createElement(RangeInputComponent,e);return React.DOM.div(ReactViewUtils.className(ViewConsts.VG_ZOOM),React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ZOOM+"--min")),t,React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ZOOM+"--max")))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VideoLogView=function(e,t){VGGenericView.call(this),this.player=e,this.container=t,this.pluginClass="rrtheme_videolog",this.enabledTCFormats=[TimeCodeView.FORMAT_TAPE,TimeCodeView.FORMAT_STANDARD,TimeCodeView.FORMAT_FRAME],this.defaultTimecodeFormat=TimeCodeView.FORMAT_TAPE,this.trackSwitchedRx=new Rx.ReplaySubject,this.trackViewsByTrackId={},this.icon=window.document.createElement("div"),this.icon.className="vg_icon--plugin "+this.pluginClass+"__icon";var n={pluginClass:this.pluginClass,header:{title:"VideoLog",name:"Event Log"},timeformat:this.defaultTimecodeFormat,width:Helpers.playerWidthPercents(e)};this.el=window.document.createElement("div"),this.el.className=this.el.className+" "+this.pluginClass,this.el.innerHTML=VGTemplates.rrVideologPlugin(n),this.container.appendChild(this.el),this.modalConfirmDialogEl=Utils.querySelectorNotNull(this.el,".rrtheme-modal__confirm"),this.modalCleanEventsConfirmDialogEl=Utils.querySelectorNotNull(this.el,".rrtheme-modal__confirm.clean-events-confirm"),this.errorView=new ErrorPopupView(this.el.querySelector(ErrorPopupView.selector),e.getLog()),this.trackButtons(),this.tagHintsView(),this.trackDropDown(),this.timeformatDropDown(),this.trackManagerDialog(),this.rxDropDowns()};VideoLogView=stjs.extend(VideoLogView,VGGenericView,[],function(e,t){e.selector=".app-VideoLogView",t.player=null,t.defaultTimecodeFormat=null,t.enabledTCFormats=null,t.trackSwitchedRx=null,t.trackViewsByTrackId=null,t.trackButtonsView=null,t.trackDropDownView=null,t.timeformatDropDownView=null,t.currentTrackView=null,t.trackManagerView=null,t.icon=null,t.pluginClass=null,t.dropDownElementsRx=null,t.createTrackEl=null,t.modalConfirmDialogEl=null,t.modalCleanEventsConfirmDialogEl=null,t.dropDownElements=null,t.hintsView=null,t.errorView=null,t.forEachTrackView=function(e){for(var t in this.trackViewsByTrackId)e(this.trackViewsByTrackId[t])},t.trackButtons=function(){this.trackButtonsView=new TrackButtonsView(this.el.querySelector(TrackButtonsView.selector))},t.tagHintsView=function(){this.hintsView=new HintsView(this.el.querySelector(HintsView.selector),this.player.getLog())},t.trackManagerDialog=function(){this.trackManagerView=new TrackManagerView(Utils.querySelectorNotNull(this.el,TrackManagerView.selector),this.player.getLog()),this.trackButtonsView.onNewTrackRx.subscribe(stjs.bind(this,function(e){this.trackManagerView.open()}))},t.timeformatDropDown=function(){var e=this.el.querySelector("."+this.pluginClass+"__timeformat-ddown"),t=this.enabledTCFormats.map(function(e,t,n){return new DropDownItem(e,e)});this.timeformatDropDownView=new DropDownView(e,this,this.pluginClass+"-ddown",null,t);var n=this.el.querySelector("."+this.pluginClass+"__timeformat-selected"),i=n.querySelector("."+this.pluginClass+"__timeformat-value");this.timeformatDropDownView.itemSelectedRx.subscribe(function(e){i.textContent=e.title,n.classList.remove("active")})},t.trackDropDown=function(){var e=this.el.querySelector("."+this.pluginClass+"__track-ddown");this.trackDropDownView=new DropDownView(e,this,this.pluginClass+"-ddown",null,[]);var t=this.el.querySelector("."+this.pluginClass+"__track-selected"),n=t.querySelector("."+this.pluginClass+"__track-value");this.trackSwitchedRx.subscribe(stjs.bind(this,function(e){this.player.getLog().debug("trackSwitchedRx",e);var t=this.trackViewsByTrackId[e];this.showTrackView(t),n.textContent=t.displayName})),this.trackDropDownView.itemSelectedRx.subscribe(stjs.bind(this,function(e){this.player.getLog().debug("DDitemSelectedRx",e.id),t.classList.remove("active")}))},t.rxDropDowns=function(){this.dropDownElements=this.el.getElementsByClassName(this.pluginClass+"__ddown"),this.dropDownElementsRx=Rx.Observable.fromEvent(this.dropDownElements,"click",stjs.bind(this,function(e){return e.target.classList.contains(this.pluginClass+"__ddown")?e.target:e.target.closest("."+this.pluginClass+"__ddown")})).filter(function(e){return Utils.toBoolean(e)}),this.dropDownElementsRx.subscribe(function(e){e.classList.toggle("active")})},t.showTrackView=function(e){null!=this.currentTrackView&&this.currentTrackView.hide(),this.currentTrackView=e,this.currentTrackView.show()},t.switchTrack=function(e){this.trackSwitchedRx.onNext(e)},t.addTrackView=function(e){this.trackViewsByTrackId[e.trackId]=e,this.el.querySelector(VideoLogView.selector).appendChild(e.getElement())},t.getCurrentTrackView=function(){return this.currentTrackView},t.getTrackView=function(e){return this.trackViewsByTrackId[e]},t.deleteTrackView=function(e){var t=this.trackViewsByTrackId[e];delete this.trackViewsByTrackId[e],t.getElement().parentElement.removeChild(t.getElement())}},{player:"VGPlayerPluginApi",enabledTCFormats:{name:"Array",arguments:[null]},trackSwitchedRx:{name:"Rx.ReplaySubject",arguments:[null]},trackViewsByTrackId:{name:"Map",arguments:[null,"TrackView"]},trackButtonsView:"TrackButtonsView",trackDropDownView:"DropDownView",timeformatDropDownView:"DropDownView",currentTrackView:"TrackView",trackManagerView:"TrackManagerView",icon:"Element",dropDownElementsRx:{name:"Rx.Observable",arguments:["Element"]},createTrackEl:"Element",modalConfirmDialogEl:"Element",modalCleanEventsConfirmDialogEl:"Element",dropDownElements:{name:"HTMLCollection",arguments:["Element"]},hintsView:"HintsView",errorView:"ErrorPopupView",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var TagSuggestInputView=function(e,t,n,i,r){SuggestInputView.call(this,n,i,r),this.pluginClass=e,this.logEventView=t,this.hintsView=i};TagSuggestInputView=stjs.extend(TagSuggestInputView,SuggestInputView,[],function(e,t){t.pluginClass=null,t.logEventView=null,t.hintsView=null,t.itemFromHint=null,t.findIndexAndRemoveTag=function(e){var t=VGView.findIndex(this.getTagsListElement().children,this.el);t!=-1&&this.removeTag(e,t)},t.getTagsListElement=function(){return this.el.parentElement.querySelector(LogEventView.selectorTagsContainer)},t.removeTag=function(e,t){t<e.length&&e.splice(t,1)},t.onTagSelected=function(e,t,n){e.tags.splice(n,0,t),this.logEventView.renderTags(this.pluginClass,e)},t.showHint=function(e,t){e.length>0?this.hintsView.renderTags(e,t):this.hintsView.close()},t.closeHint=function(){this.hintsView.close()}},{logEventView:"LogEventView",hintsView:"HintsView",itemFromHint:"Rx.Disposable",itemSelectedRx:{name:"Rx.Subject",arguments:[null]},replaceSelectedRx:{name:"Rx.Observable",arguments:[null]},emptySelectRx:{name:"Rx.Observable",arguments:[null]},itemSelectedFromHintRx:{name:"Rx.Observable",arguments:[null]},hintsView:"HintsView",onInputRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onKeyDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onKeyUpRx:{name:"Rx.Observable",arguments:["DOMEvent"]},replaceKeyDown:{name:"Rx.Observable",arguments:["DOMEvent"]},onUserTypingRx:{name:"Rx.Observable",arguments:[null]},inputValueEnteredRx:{name:"Rx.Subject",arguments:[null]},el:"Input",log:"Log"},{});var ExtendedCssWaveCollider=function(e,t,n,i){CssWaveCollider.call(this,e.http,t,n,i),this.waveform=e};ExtendedCssWaveCollider=stjs.extend(ExtendedCssWaveCollider,CssWaveCollider,[],function(e,t){t.waveform=null,t.drawWave=function(){if(this.log.debug("ExtendedCssWaveCollider drawWave"),null==this.channel||0==this.channel.sampleRate)return!1;var e=null,t=0,n=this.channel,i=Math.floor(this.waveform.getLeftFor(this.waveform.range.start)),r=Math.ceil(this.waveform.getLeftFor(this.waveform.range.end));if(null!=n){var s=this.waveform.timeline.getTvByFrame(this.waveform.range.start),o=this.waveform.timeline.getTvByFrame(this.waveform.range.end),a=Utils.convertTv(s,this.waveform.timeline.getTimeScale(),n.sampleRate),l=Utils.convertTv(o,this.waveform.timeline.getTimeScale(),n.sampleRate);e=new Range(stjs.trunc(a),stjs.trunc(l)).offset(stjs.trunc(n.channelOffset)),t=stjs.trunc(e.duration()/(r-i))}return this.drawChannel(DrawChannel.newDrawChannel(n,stjs.trunc(i),stjs.trunc(r),e,t)),!1},e.WAVE_IMAGES={},e.preciseWaveImages={},t.getWaveImages=function(e){var t=JSON.stringify(e),n=ExtendedCssWaveCollider.WAVE_IMAGES[t];return null==n&&(ExtendedCssWaveCollider.WAVE_IMAGES[t]=new WaveImages(this.http,e)),ExtendedCssWaveCollider.WAVE_IMAGES[t]},t.drawChannel=function(e){this.log.debug("ExtendedCssWaveCollider drawChannel");var t=this.getDimensions().width;if(!(e.startX>t||e.endX<0)){if(null==e.sampleRange)return void this.getContext().clearRect(e.startX,0,e.endX-e.startX,this.getDimensions().height+2);e.startX<0&&(e.sampleRange.start+=Math.round(Math.abs(e.startX)*e.uiSpp),e.startX=0),e.endX>t&&(e.sampleRange.end-=Math.round((e.endX-t)*e.uiSpp),e.endX=t);var n=this.getWaveImages(e.channel),i=n.getWaveImage(e.uiSpp,stjs.bind(this,function(t){this._drawWave(t,e)}));if(null==i){var r=JSON.stringify(e.channel),s=ExtendedCssWaveCollider.preciseWaveImages[r];null!=s&&s.containsRange(e.sampleRange.start,e.sampleRange.end)&&s.spp==e.uiSpp?null==s||s.isLoading||this._drawPreciseWave(s,e):n.getPreciseWaveImage(e.sampleRange,Math.round(e.endX-e.startX),stjs.bind(this,function(t){this._drawPreciseWave(t,e)}))}}}},{waveform:"Waveform",WAVE_IMAGES:{name:"Map",arguments:[null,"WaveImages"]},preciseWaveImages:{name:"Map",arguments:[null,"WaveData"]},waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var EmptyWaveCollider=function(){throw CssWaveCollider.call(this,null,null,null,null),new RuntimeException("EmptyWaveCollider TODO")};EmptyWaveCollider=stjs.extend(EmptyWaveCollider,CssWaveCollider,[],null,{waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var TimeControlsBoxView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this.render(VG["templates/timecontrolsbox.html"]({})),this.el.classList.add("vg_centerX"),this.setTimecodeInputs(),this.setEventRx()};TimeControlsBoxView=stjs.extend(TimeControlsBoxView,VGView,[],function(e,t){t.player=null,t.eventsSubscription=null,t.onExitFullScreenMode=null,t.setTimecodeInputs=function(){var e=this,t=e.el.querySelectorAll("input.vg_timecode__value");Rx.Observable.fromEvent(t,"focus").subscribe(stjs.bind(this,function(e){return this.player.pause()}));var n=e.el.querySelector("input.vg_standard_time"),i=e.el.querySelector("input.vg_ndftc_time"),r=e.el.querySelector("input.vg_frame_number"),s=stjs.bind(this,function(e){var t=this.player.getView(),n=e.frame;if(n!=this.player.getCurrentFrame()&&!this.player.isPlaying()){var i=this.player.getTimeline().boundsFn(n);t.scrubbing=!0,this.player.pause(),t.seekFrameAndCheckRange(i),setTimeout(function(){t.seekFrameAndCheckRange(i),t.scrubbing=!1},100)}}),o=this.player.getTimeline(),a=this.player.getTimelineRx(),l=new FrameTimecodeInput(r,o,a,s),u=this.player.getOptions().useUTCTimestamp?new TimestampInput(n,o,a,s):new StandardTimecodeInput(n,o,a,s),c=new TapeTimecodeInput(i,o,a,s);this.player.getTimeUpdateRx().subscribe(stjs.bind(this,function(e){this.player.isChangingVideoSrc()||(u.update(e),c.update(e),l.update(e))}))},t.setEventRx=function(){var e=this,t=Rx.Observable.fromEvent(e.el,"click"),n=Rx.Observable.fromEvent(window.document,"mouseup"),i=Rx.Observable.fromEvent(window.document,"mousemove"),r=Rx.Observable.fromEvent(e.el,"mousedown").filter(function(e){return"INPUT"!=e.target.nodeName});t.subscribe(function(e){e.stopPropagation()});var s=e.el.getBoundingClientRect(),o=r.flatMap(function(t){var r=e.container.getBoundingClientRect(),o=r.width-s.width,a=r.height-s.height,l=VGView.offsetX(t.clientX+r.left,e.el),u=VGView.offsetY(t.clientY+r.top,e.el);return i.map(function(e){e.preventDefault();var t=e.clientX-l,n=e.clientY-u,i=Math.min(Math.max(n,0),a),r=Math.min(Math.max(t,0),o);return new Position(r,i)}).takeUntil(n)});this.eventsSubscription=o.subscribe(function(t){e.el.classList.remove("vg_centerX"),e.el.style.top=t.top+"px",e.el.style.left=t.left+"px",e.el.style.transform="none"}),this.onExitFullScreenMode=stjs.bind(this,function(e){if(!e){var t=this.container.querySelector(".vg_time_controls_box");t.style.top="50px",t.style.left="50%",t.style.transform="translateX(-50%)"}}),this.player.addEventListener("fullscreen",this.onExitFullScreenMode)},t.close=function(){CloseableView.prototype.close.call(this),this.eventsSubscription.dispose(),this.player.removeEventListener("fullscreen",this.onExitFullScreenMode)}},{player:"SkinnedPlayerImpl",eventsSubscription:"Rx.Disposable",onExitFullScreenMode:"Callback1",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var TimeControlsView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this.render(VG["templates/player/timecontrols.html"]({}))};TimeControlsView=stjs.extend(TimeControlsView,VGView,[],function(e,t){t.player=null,t.timecodeInputsInit=function(e){var t=this.el.querySelector(".vg_timecode.vg_timecode_standard input"),n=this.el.querySelector(".vg_timecode.vg_timecode_tape input"),i=this.el.querySelector(".vg_timecode.vg_timecode_frame input"),r=this.player.getTimeline(),s=this.player.getTimelineRx(),o=this.player.getOptions().useUTCTimestamp?new TimestampInput(t,r,s,e):new StandardTimecodeInput(t,r,s,e),a=new TapeTimecodeInput(n,r,s,e),l=new FrameTimecodeInput(i,r,s,e),u=this.el.querySelectorAll("input");Rx.Observable.fromEvent(u,"focus").subscribe(stjs.bind(this,function(e){return this.player.pause()}));var c=stjs.bind(this,function(e){this.player.isChangingVideoSrc()||(o.update(e),a.update(e),l.update(e))});this.player.getTimeUpdateRx().subscribe(c),c(this.player.getTimeSample())}},{player:"SkinnedPlayer",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SafeAreaDropDownVGView=function(e,t,n,i,r){VGThemeView.call(this,n,i,r,VGThemeView.magicContext(SafeAreaDropDownVGView.iconClass,"Safe Areas",SafeAreaDropDownVGView.dropDownContainerClass)),this.safeAreaView=e,this.player=t,this.renderDropdown(this.el.querySelector("."+SafeAreaDropDownVGView.dropDownContainerClass));var s=window.document.createElement("span");s.className="vg_safe-areas__deactivate",s.innerHTML="<span>Deactivate</span>";var o=window.document.querySelector(".vg_ddown_hover__content.vg_background.vg_primary");if(o.appendChild(s),Rx.Observable.fromEvent(s,"click").subscribe(stjs.bind(this,function(e){this.setVisible(this.visible),this.visible?s.classList.add("active"):s.classList.remove("active"),this.visible=!this.visible})),Utils.isSafari){this.safeAreaView.getElement().style.display="block";for(var a=this.safeAreaView.getElement().querySelectorAll(".safe-container"),l=0;l<a.length;l++)a[l].style.top="50%",a[l].style.left="50%",a[l].style.transform="translate(-50%,-50%)"}var u=this.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon"),c=Rx.Observable.fromEvent(u,"click");c.subscribe(stjs.bind(this,function(e){t.iconClick.onNext(this.el)}))};SafeAreaDropDownVGView=stjs.extend(SafeAreaDropDownVGView,VGThemeView,[VGControl],function(e,t){e.dropDownContainerClass="vg_safe-areas",e.iconClass="vg_icon-map",t.safeAreaView=null,t.player=null,t.visible=!0,t.renderDropdown=function(e){var t=[new ColorBulletDropDownItem("4-3","4:3","grey"),new ColorBulletDropDownItem("caption","Caption","grey"),new ColorBulletDropDownItem("action","Action","grey"),new RenderedDropDownItem("separator","",'<div class="vg_ddown_hover__title vg_default" style="width: 100%"></div>',this.player.getLog()),new ColorBulletDropDownItem("16-9","16:9","white")],n=new DropDownView(e,this,"vg_ddown_hover","",t);SafeAreaDropDownRRControl.initDropDownEvents(n,this.safeAreaView)},t.setVisible=function(e){if(e){var t=window.document.querySelector("."+SafeAreaDropDownVGView.iconClass);t.classList.remove(SafeAreaDropDownVGView.iconClass),t.classList.add("vg_icon-map-stroke"),this.safeAreaView.getElement().style.opacity=0}else{var t=window.document.querySelector(".vg_icon-map-stroke");t.classList.remove("vg_icon-map-stroke"),t.classList.add(SafeAreaDropDownVGView.iconClass),this.safeAreaView.getElement().style.opacity=1}},t.getControlEl=function(e){return this.el}},{safeAreaView:"SafeAreaView",player:"VGThemePlayer",icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var CropControl=function(e){VGPlugins.call(this,e),this.autoDisposables=new Rx.CompositeDisposable;new VGCropPluginView;VGCropPlugin.vgEnableCropPlugin(e,stjs.bind(this,function(t,n){this.vgCPlugin=n,this.captureDialog=window.document.createElement("div"),this.captureDialog.className="vg-image-capture",this.captureDialog.innerHTML=VGTemplates.imageCaptureTemplate();var i=e.getView().playerContainer.parentElement;i.appendChild(this.captureDialog);var r=window.document.querySelector(".vg-image-capture_input");this.dialogBg=window.document.createElement("div"),this.dialogBg.className="vg-image-capture_background",i.appendChild(this.dialogBg);var s=Rx.Observable.fromEvent(this.dialogBg,"click"),o=window.document.body.querySelector(".vg-image-capture_image-section");t.appendTo(o);var a=window.document.querySelector(".vg-image-capture_close"),l=window.document.querySelector(".vg-image-capture_cancel-button"),u=window.document.querySelector(".vg-image-capture_save-button");r.addEventListener("keypress",stjs.bind(this,function(t){13==t.keyCode&&(this.saveCapture(e,n,r,u),u.click())}));var c=Rx.Observable.fromEvent(a,"click"),d=Rx.Observable.fromEvent(l,"click"),p=Rx.Observable.fromEvent(window,"resize").subscribe(stjs.bind(this,function(e){this.cropFrameSize(t,n,o),this.vgCPlugin.drawCropMask(t.frameImage.clientWidth,t.frameImage.clientHeight,0,0)})),h=e.getView().controlsPanelView,f=Rx.Observable.merge(s,d,c).subscribe(stjs.bind(this,function(t){e.activeAddon=h.el.querySelector(".vg_addonview.active"),e.deactivateAddon(),this.dialogBg.classList.add("vg-image-capture_hidden"),this.captureDialog.remove(),setTimeout(stjs.bind(this,function(){this.player.getView().unfreezeVideo(),this.dialogBg.remove()}),1e3)})),m=Rx.Observable.fromEvent(u,"click").subscribe(stjs.bind(this,function(t){this.saveCapture(e,n,r,u)}));this.autoDisposables.add(f),this.autoDisposables.add(m),this.autoDisposables.add(p),this.cropFrameSize(t,n,o)}))};CropControl=stjs.extend(CropControl,VGPlugins,[VGControl],function(e,t){t.activeAddon=null,t.dialogBg=null,t.captureDialog=null,t.autoDisposables=null,t.vgCPlugin=null,t.cropFrameSize=function(e,t,n){var i=stjs.trunc(n.offsetWidth/e.frameImage.width)*e.frameImage.height;if(i>42){var r=e.container;r.style.height=.6*this.captureDialog.clientHeight+"px";var s=t.imageEl.getBoundingClientRect();r.style.width=s.width+"px"}},t.saveCapture=function(e,t,n,i){var r=t.getCroppedCanvas().toDataURL("image/png");i.setAttribute("href",r);var s=n.value;""==s?i.setAttribute("download",e.getCurrentTapeTimecode()+".png"):i.setAttribute("download",s+"-"+e.getCurrentTapeTimecode()+".png")},t.close=function(){this.autoDisposables.dispose(),null!=this.vgCPlugin&&this.vgCPlugin.close()},t.getControlEl=function(e){return null}},{activeAddon:"Element",dialogBg:"Element",captureDialog:"Element",autoDisposables:"Rx.CompositeDisposable",vgCPlugin:"VGCropPlugin",player:"PlayerImpl",view:"VGView"},{});var ExternalTheme=function(){};ExternalTheme=stjs.extend(ExternalTheme,null,[],function(e,t){e.enableAddMediaDialog=function(e,t){var n=new AddMediaControl(e,t);return e.getView().controlsPanelView.enableControl(n),n},e.enableSubtitleSelectDialog=function(e,t){var n=new SubtitlesToggleControl(e,t);return e.getView().controlsPanelView.enableControl(n),n},e.enableCropPlugin=function(e,t){VGCropPlugin.rrEnableCropPlugin(e,t)},e.enableEDLExportButton=function(e,t){var n=new(stjs.extend(function(){},null,[VGControl],function(e,n){n.getControlEl=function(e){var n=React.createElement(VGControlComponent,{id:"edl-export",onClick:function(e){t()}}),i=window.document.createElement("span");return ReactDOM.render(n,i),i}},{},{}));e.getView().controlsPanelView.enableControl(n)}},{},{});var VideoLog=function(e){BasePlugin.call(this,VideoLog.PLUGIN_ID),this.options=e,this.deleteTrackRx=new Rx.Subject,this.selectTrackRx=new Rx.Subject,this.importTrackRx=new Rx.Subject,this.deleteEventRx=new Rx.Subject,this.selectEventRx=new Rx.Subject};VideoLog=stjs.extend(VideoLog,BasePlugin,[],function(e,t){e.PLUGIN_ID="videolog",e.PLUGIN_ICON="vg_icon-flag",t.storage=null,t.proxyId=null,t.view=null,t.currentTrack=null,t.importHandler=null,t.filmstripDrawer=null,t.deleteTrackRx=null,t.selectTrackRx=null,t.importTrackRx=null,t.deleteEventRx=null,t.selectEventRx=null,t.log=null,t.options=null,t.init=function(e){this.log=this.pluginApi.getLog(),VideoLogOptions.RAM_STORAGE.equals(this.options.storage)?this.storage=new RAMVideologAsyncStorage(this.pluginApi.getLog()):this.storage=new RestVideoLogAsyncStorage(this.pluginApi.getHttp(),this.options.storageUrl,this.options.onStorageReady,this.pluginApi.getLog()),this.initRx(),this.pluginApi.getFilmStripDrawer(stjs.bind(this,function(t){this.filmstripDrawer=t,this.pluginApi.addEventListener(PlayerEvents.TIMEUPDATE_EVENT,stjs.bind(this,function(e){return this.updateTime(e)})),e()}))},t.updateTime=function(e){this.view.getEvents().forEach(stjs.bind(this,function(t,n,i){t.startTv<=e.tv&&t.endTv>=e.tv&&this.view.setCurrentEvent(stjs.trunc(stjs.trunc(n)))}))},t.loadProxy=function(e){this.proxyId=e,this.storage.tracksOfProxy(e,stjs.bind(this,function(e){this.view.setTracks(e),null!=e&&null!=e[0]&&this.storage.trackEvents(e[0].id,stjs.bind(this,function(e){return this.view.setEvents(e)}),stjs.bind(this.log,"error"))}))},t.initRx=function(){this.deleteTrackRx.subscribe(stjs.bind(this,function(e){this.log.debug("DELETE TRACK "+e.id),this.storage.deleteTrack(e)})),this.selectTrackRx.subscribe(stjs.bind(this,function(e){this.log.debug("SELECT TRACK "+e.id),this.currentTrack=e.id,this.storage.trackEvents(this.currentTrack,stjs.bind(this,function(t){this.log.debug("Loaded "+t.length+" events for "+e.displayName),this.view.setEvents(t)}),stjs.bind(this.log,"error"))})),this.importTrackRx.subscribe(stjs.bind(this,function(e){this.log.debug("IMPORT TRACK"),null!=this.importHandler&&this.importHandler(stjs.bind(this,function(e){e.forEach(stjs.bind(this,function(e){this.importTrack(e,this.proxyId)})),this.log.debug("Imported tracks: "+e.map(function(e,t,n){return e.track.displayName}).join(", "))}))})),this.deleteEventRx.subscribe(stjs.bind(this,function(e){this.log.debug("DELETE EVENT "+e.id),this.storage.deleteEvent(e.id)})),this.selectEventRx.subscribe(stjs.bind(this,function(e){this.log.debug("SELECT EVENT "+e.id),this.pluginApi.seekSec(e.startTv/e.timescale)})),Rx.Observable.merge(this.storage.getEventChangedRx(),this.storage.getEventDeletedRx()).bufferWithTime(500).subscribe(stjs.bind(this,function(e){e.map(function(e,t,n){return e.getTrackId()}).indexOf(this.currentTrack)!=-1&&(this.log.debug(e),this.storage.trackEvents(this.currentTrack,stjs.bind(this,function(e){return this.view.setEvents(e)}),stjs.bind(this.log,"error")))})),Rx.Observable.merge(this.storage.getTrackChangedRx(),this.storage.getTrackDeletedRx()).subscribe(stjs.bind(this,function(e){this.log.debug("RX updating tracks from storage"),this.log.debug(e),this.storage.tracksOfProxy(this.proxyId,stjs.bind(this,function(e){null!=this.view&&this.view.setTracks(e)}))}))},t.importTrack=function(e,t){e.track.mediaId=t,this.storage.saveTrack(e.track,stjs.bind(this,function(t){this.log.debug("Saved track "+t.id),e.events.forEach(stjs.bind(this,function(e){e.setTrackId(t.id),this.storage.saveEvent(e,function(e){},stjs.bind(this.log,"error"))}))}),stjs.bind(this.log,"error"))},t.setImportHandler=function(e){this.importHandler=e},t.renderInto=function(e,t,n){var i=new VideoLogComponent.VideoLogProps(this.pluginApi.getTimeline(),this.filmstripDrawer,this.selectTrackRx,this.deleteTrackRx,this.importTrackRx,this.selectEventRx,this.deleteEventRx,this.pluginApi.getLog()),r=React.createElement(VideoLogComponent,UIUtils.toPlainObject(i));this.view=ReactDOM.render(r,e),this.storage.tracksOfProxy(this.proxyId,stjs.bind(this,function(e){this.view.setTracks(e),n()}))}},{storage:"IVideologAsyncStorage",view:"VideoLogComponent",importHandler:{name:"Callback1",arguments:[{name:"Callback1",arguments:[{name:"Array",arguments:["TrackData"]}]}]},filmstripDrawer:"FilmStripDrawer",deleteTrackRx:{name:"Rx.Subject",arguments:["Track"]},selectTrackRx:{name:"Rx.Subject",arguments:["Track"]},importTrackRx:{name:"Rx.Subject",arguments:[null]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log",options:"VideoLogOptions",pluginApi:"VGPlayerPluginApi"},{});var SubtitlesMenuControl=function(e){this.player=e,this.captionsView=new CaptionsView(e,e.getView().getCaptionsContainer(),null),e.getTimeUpdateRx().subscribe(stjs.bind(this,function(e){this.captionsView.drawCaps(e.tv,null)}))};SubtitlesMenuControl=stjs.extend(SubtitlesMenuControl,null,[VGControl],function(e,t){t.player=null,t.items=null,t.menuComponent=null,t.captionsView=null,t.getControlEl=function(e){var t=VGTemplates.elFromHTML('<div id="vg_subtitles" class="vg_react-container"></div>',this.player.container.ownerDocument),n=new RadioButtonMenuComponent.HoverMenuProps("Subtitles","vg_ddown_hover","vg_icon-subs","vg_icon-no_subs"),i=React.createElement(RadioButtonMenuComponent,UIUtils.toPlainObject(n));return this.menuComponent=ReactDOM.render(i,t),this.items={},this.player.getCaptionsList().forEach(stjs.bind(this,function(e,t,n){return this.items[e.title]=e.title})),this.menuComponent.updateItems(this.items),this.player.getCaptionListChangeRx().subscribe(stjs.bind(this,function(e){this.items[e.title]=e.title,this.menuComponent.updateItems(this.items)})),this.menuComponent.getIconClickRx().subscribe(stjs.bind(this,function(e){e?this.hideCaptions():this.captionsView.showCaptions(this.player.getCurrentTimeValue())})),this.menuComponent.getSelectedItemRx().subscribe(stjs.bind(this,function(e){return this.selectCaptions(e)})),t},t.selectCaptions=function(e){var t=Utils.find(this.player.getCaptionsList(),function(t){return t.title.equals(e)});null!=t?this.captionsView.setCaptions(t,this.player.getCurrentTimeValue(),null):this.hideCaptions()},t.hideCaptions=function(){this.captionsView.hideCaptions(this.player.getCurrentTimeValue())}},{player:"SkinnedPlayerImpl",items:{name:"Map",arguments:[null,null]},menuComponent:"RadioButtonMenuComponent",captionsView:"CaptionsView"},{});var StepsView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this._parentView=e.getView()};StepsView=stjs.extend(StepsView,VGView,[VGControl],function(e,t){t.player=null,t._parentView=null,t.menuComponent=null,t.getControlEl=function(e){var t=VGTemplates.elFromHTML('<div id="vg_step-interval" class="vg_react-container"></div>',this.player.container.ownerDocument),n={};n.icon="vg_icon-bars";var i=React.createElement(MenuControlComponent,n);this.menuComponent=ReactDOM.render(i,t);var r=new SimpleDropDown("Step Interval","vg_ddown",[this.item(1,!0),this.item(5,!1),this.item(10,!1),this.item(25,!1),this.item(50,!1)]);return this.menuComponent.updateDropDown(r),t},t.item=function(e,t){var n=""+e;return new DropDownMenuItem(n,n,t,stjs.bind(this,function(t){return e==this._parentView.stepInterval?void(this._parentView.stepInterval=1):(this._parentView.stepInterval=e,void this.menuComponent.setActiveItem(n))}))}},{player:"SkinnedPlayerImpl",_parentView:"SkinnedPlayerView",menuComponent:"MenuControlComponent",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VideoControl=function(e){VGPlugins.call(this,e),this.view=new VideoControlView(e,e.getView().controlsPanelView.getControlsContainer(),e.getView(),null),this.setEventSubscriptions()};VideoControl=stjs.extend(VideoControl,VGPlugins,[VGControl],function(e,t){t.getControlEl=function(e){return this.view.el},t.setEventSubscriptions=function(){var e=this.view;e.hdButtonRX.subscribe(stjs.bind(this,function(e){e?this.player.setVideoQuality(PlayerImpl.FULL_RES):this.player.setVideoQuality(PlayerImpl.LOW_RES)})),e.littlePlayButtonClick.subscribe(stjs.bind(this,function(e){this.player.togglePlay()}))}},{player:"PlayerImpl",view:"VGView"},{});var ContexterHeader=function(e){React.Component.call(this,e),this.state={openModal:!1}};ContexterHeader=stjs.extend(ContexterHeader,React.Component,[],function(e,t){e.ContexterHeaderState=function(){},e.ContexterHeaderState=stjs.extend(e.ContexterHeaderState,null,[],function(e,t){t.openModal=!1},{},{}),e.Props=function(){},e.Props=stjs.extend(e.Props,null,[],function(e,t){t.handleSubmit=null,t.onSearchChange=null,t.detect=null,t.stop=null,t.openInVideoLog=null,t.searchString=null,t.progress=0,t.toggleOverlays=null,t.overlayClass=null},{handleSubmit:{name:"Callback1",arguments:["DOMEvent"]},onSearchChange:{name:"Callback1",arguments:["DOMEvent"]},detect:"Callback0",stop:"Callback0",openInVideoLog:"Callback0",searchString:"Object",toggleOverlays:{name:"Callback1",arguments:["DOMEvent"]}},{}),t.render=function(){var e=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_HEADER).id(ContexterConsts.VG_CONTEXTER_HEADER);return React.DOM.div(e.build(),this.renderContexterStatus(),this.renderActions(),this.renderSearch(),this.renderModal());
},t.renderActions=function(){var e={};e.className=[ViewConsts.VG_BTN_DEFAULT,ContexterConsts.VG_CONTEXTER_TOGGLE_OVERLAYS].join(" "),e.onClick=this.props.toggleOverlays,e.label=React.DOM.span(FluentMap.withClassName(this.props.overlayClass).style(ViewConsts.FONT_SIZE,"18px").build());var t=React.createElement(VGButton,e),n={};n.className=[ViewConsts.VG_BTN_DEFAULT,ContexterConsts.VG_CONTEXTER_OPEN_LOG].join(" "),n.onClick=stjs.bind(this,function(e){return this.props.openInVideoLog()}),n.label=React.DOM.span(FluentMap.withClassName(ViewConsts.VG_ICON_FLAG).style(ViewConsts.FONT_SIZE,"18px").build());var i=React.createElement(VGButton,n);return React.DOM.div(ReactViewUtils.className(ContexterConsts.VG_CONTEXTER_HEADER_ACTIONS),t,i)},t.renderModal=function(){var e={};e.open=this.state.openModal,e.contentClass=ViewConsts.VG_DEFAULT_BG,e.modalClass=ViewConsts.VG_INFO,e.body=React.DOM.span(null,"are you sure you want to rerun detection for this title");var t={};t.className=[ViewConsts.VG_BTN_DEFAULT,ContexterConsts.VG_CONTEXTER_MODAL_CLOSE].join(" "),t.onClick=stjs.bind(this,"onCancel"),t.label="Cancel";var n=React.createElement(VGButton,t),i={};i.className=ViewConsts.VG_BTN_PRIMARY,i.onClick=stjs.bind(this,function(e){this.onCancel(e)}),i.label="Rerun";var r=React.createElement(VGButton,i);return e.footer=React.DOM.div(null,n,r),e.id=ContexterConsts.VG_CONTEXTER_MODAL,React.createElement(ModalComponent,e)},t.renderSearch=function(){var e={};e.handleSubmit=this.props.handleSubmit,e.onChange=this.props.onSearchChange,e.searchValue=this.props.searchString;var t=React.createElement(PluginSearchInput,e);return t},t.renderContexterStatus=function(){var e={};return e.progress=this.props.progress,e.detect=this.props.detect,e.stop=this.props.stop,e.redo=stjs.bind(this,"redo"),React.createElement(ContexterStatusComponent,e)},t.redo=function(e){this.setState({openModal:!0})},t.onCancel=function(e){this.setState({openModal:!1})}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsItemComponent=function(e){React.Component.call(this,e),this.state={subtitles:e.subtitles,isExpanded:!1,matchFound:!1,scrollLocked:!1},this.activeRow=e.subtitles.rows[0];var t=this._findClosest(e.timeline.getLastFrame(),e.subtitles.rows,this.activeRow);this.rowsInTimeline=e.subtitles.rows.slice(0,e.subtitles.rows.indexOf(t)+1),this.notes=this.props.subtitles.rows.reduce(function(e,t,n,i){return e+t.notes},""),this.timeUpdate=e.timeUpdateRx,this.timeUpdate.subscribe(stjs.bind(this,function(e){this._onTimeUpdate(e)})),this.activeRowRx=new Rx.Subject,this.shiftCaptionsRx=new Rx.Subject,this.shiftCaptionsRx.subscribe(stjs.bind(this,function(e){this._shiftSubs(e)}))};SubsItemComponent=stjs.extend(SubsItemComponent,React.Component,[],function(e,t){e.TRACK="track",t.shiftCaptionsRx=null,e.CAPTION_ROWS="caption__rows",e.CAPTION_SUMMARY="caption__summary",e.CAPTIONS_LIST_ITEM="captions-list__item",e.CAPTION_ROW="caption__row",t.notes=null,t.timeUpdate=null,t.lastUpdateTv=0,t.rowsInTimeline=null,t.activeRow=null,t.activeRowRx=null,t._onTimeUpdate=function(e){var t=e.tv;this.lastUpdateTv!=t&&(this.lastUpdateTv=t,this.props.isItemActive&&this._activeRowUpdate(e),this._trackUpdate(e.frame))},t._activeRowUpdate=function(e){var t=this._findClosest(e.frame,this.rowsInTimeline,this.activeRow),n=this.props.timeline.getFrameByTv(t.startTv),i=this.props.timeline.getFrameByTv(t.endTv);n<=e.frame&&e.frame<i?(this.activeRow=t,this.activeRowRx.onNext(t)):this.activeRowRx.onNext(null),this.state.scrollLocked&&this._scrollRow(t)},t._scrollRow=function(e){if(this.props.rowsViewType==ViewConsts.LIST){var t="#row"+e.startTv+e.endTv,n=this.refs[SubsItemComponent.CAPTION_ROWS],i=n.querySelector(t);if(null!=i){var r=n.offsetParent;r.scrollTop=i.offsetTop}}},t._trackUpdate=function(e){if(this.props.rowsViewType==ViewConsts.BLOCK){var t=this.refs[SubsItemComponent.TRACK],n=1*e/this.props.timeline.getFrameCount()*100;t.style.left=n+"%",this.state.scrollLocked&&this._scrollTrack()}},t._findClosest=function(e,t,n){var i=this.props.timeline.getFrameByTv(n.startTv),r=this.props.timeline.getFrameByTv(n.endTv);if(null!=n&&i<=e&&e<r)return n;if(1==t.length)return t[0];var s=t.length,o=stjs.trunc(s/2);return n=t[o],i=this.props.timeline.getFrameByTv(n.startTv),e<i?(n=t[o-1],this._findClosest(e,t.slice(0,o),n)):this._findClosest(e,t.slice(o,s),n)},t._shiftSubs=function(e){var t=new SubsItemState;Captions.offsetCaptions(this.state.subtitles,this.props.timeline.getTvBySec(e/1e3),this.props.timeline),t.subtitles=this.state.subtitles,this.setState(t)},t._scrollTrack=function(){if(this.props.rowsViewType==ViewConsts.BLOCK&&this.state.isExpanded){var e=this.refs[SubsItemComponent.TRACK],t=this.refs[SubsItemComponent.CAPTION_ROWS],n=t.offsetParent,i=e.offsetLeft-stjs.trunc(n.clientWidth/2);i>=0&&(n.scrollLeft=i)}},t.componentWillReceiveProps=function(e){var t=new RegExp(e.searchValue,"ig"),n=new SubsItemState;n.matchFound=e.searchValue.length>0&&t.test(this.notes),this.setState(n)},t._getRows=function(){return this.state.subtitles.rows.map(stjs.bind(this,function(e,t,n){var i={};return i.row=e,i.key=""+n.indexOf(e),i.className=SubsItemComponent.CAPTION_ROW+" "+this.props.rowsViewType,i.timeline=this.props.timeline,i.selectedFrameRx=this.props.selectedFrameRx,i.searchValue=this.props.searchValue,i.viewType=this.props.rowsViewType,i.inActiveItem=this.props.isItemActive,i.zoomRow=this.props.zoom,i.scrollLock=this.state.scrollLocked,i.activeRowRx=this.activeRowRx,React.createElement(SubtitleEntryComponent,i)}))},t.render=function(){var e=SubsItemComponent.CAPTIONS_LIST_ITEM+" "+this.props.rowsViewType;return this.state.isExpanded&&(e+=" "+ViewConsts.ACTIVE),React.DOM.div(ReactViewUtils.className(e),this._generateTemplate())},t._generateTemplate=function(){var e=[],t={};if(t.onClick=stjs.bind(this,"onTitleClick"),t.switchBtnClick=stjs.bind(this,"switchBtnClick"),t.className=SubsItemComponent.CAPTION_SUMMARY,t.subtitles=this.state.subtitles,t.timeline=this.props.timeline,t.isSubsActive=this.props.isItemActive&&this.props.visible,t.matchFound=this.state.matchFound,t.shiftCaptionsRx=this.shiftCaptionsRx,t.scrollLocked=this.state.scrollLocked,t.onLock=stjs.bind(this,"toggleLock"),t.key="ssPropsKey",e.push(React.createElement(SubsSummaryComponent,t)),null!=this.state.subtitles){var n=new ContainerProps;n.isActive=this.state.isExpanded,n.key="cPropsKey";var i=null;ViewConsts.BLOCK.equals(this.props.rowsViewType)&&(i=React.DOM.div(FluentMap.withClassName(SubsItemComponent.TRACK).ref(SubsItemComponent.TRACK).build()));var r=this._rows(i),s=React.createElement(ContainerComponent,UIUtils.toPlainObject(n),r);e.push(s)}return e},t.toggleLock=function(e){var t=new SubsItemState;t.scrollLocked=!this.state.scrollLocked,this.setState(t)},t._rows=function(e){var t=Math.max(this.props.zoom,1),n=100*t+"%",i=FluentMap.withClassName(SubsItemComponent.CAPTION_ROWS).addClass(this.props.rowsViewType).style(ViewConsts.WIDTH,n).ref(SubsItemComponent.CAPTION_ROWS);return React.DOM.div(i.build(),e,this._getRows())},t.onTitleClick=function(e){var t=new SubsItemState;t.isExpanded=!this.state.isExpanded,this.setState(t)},t.switchBtnClick=function(e){e.preventDefault(),e.stopPropagation(),this.props.selectedItemRx.onNext(this.state.subtitles)}},{shiftCaptionsRx:{name:"Rx.Subject",arguments:[null]},timeUpdate:{name:"Rx.Observable",arguments:["TimeSample"]},rowsInTimeline:{name:"Array",arguments:["SubtitleEntry"]},activeRow:"SubtitleEntry",activeRowRx:{name:"Rx.Subject",arguments:["SubtitleEntry"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsHeaderView=function(e){React.Component.call(this,e)};SubsHeaderView=stjs.extend(SubsHeaderView,React.Component,[],function(e,t){e.VG_ICON_LIST="vg_icon-list",e.VG_ICON_BLOCK="vg_icon-block",e.CAPTION_HEADER_SWITCH_VIEW="captions-header__switch-view",e.CAPTIONS_HEADER="captions-header",e.CAPTIONS_HEADER_DATA="captions-header__data",e.CAPTIONS_HEADER_SIZE="captions-header__size",e.CAPTIONS_HEADER_TITLE="captions-header__title",e.CAPTIONS_HEADER_SEARCH="captions-header__search",t.title="CAPTIONS",t.searchIndex=0,t.render=function(){var e=this._generateTemplate();return e},t._generateTemplate=function(){var e=this._headerData(),t=this._switchBtns(),n=this._headerSearch(),i=this._headerZoom(),r=FluentMap.withClassName(SubsHeaderView.CAPTIONS_HEADER).addClass(this.props.rowsViewType).build(),s=React.DOM.div(r,e,i,t,n);return s},t._headerZoom=function(){var e={};e.points=this.props.zoomPoints,e.min=this.props.zoomMin,e.max=this.props.zoomMax,e.value=this.props.zoomValue,e.onChange=this.props.zoomRows;var t=React.createElement(ZoomRangeComponent,e);return React.DOM.div(ReactViewUtils.className("captions-header__zoom"),t)},t._headerSearch=function(){var e=ReactViewUtils.className(SubsHeaderView.CAPTIONS_HEADER_SEARCH),t=React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ICON_SEARCH)),n=FluentMap.withClassName(ViewConsts.VG_INPUT_SEARCH).onChange(this.props.onChange).onKeyPress(stjs.bind(this,function(e){var t=window.document.querySelectorAll("."+ViewConsts.HIGHLIGHT_YELLOW),n=window.document.querySelector(".captions-list__item.list"),i=window.document.querySelector(".component_container"),r=i.classList.contains("active");if(13==e.charCode&&0!=t.length){r||(n.classList.add("active"),i.classList.add("active"));var s=t[this.searchIndex];this.searchIndex=this.searchIndex<t.length?this.searchIndex+1:0,s.scrollIntoView()}})).value(this.props.searchValue).build(),i=FluentMap.withClassName(ViewConsts.VG_FORM_SEARCH).put(ReactViewUtils.ON_SUBMIT,this.props.handleSubmit).build(),r=React.DOM.input(n),s=React.DOM.form(i,t,r);return React.DOM.div(e,s)},t._switchBtns=function(){var e=FluentMap.withClassName(SubsHeaderView.VG_ICON_BLOCK).onClick(stjs.bind(this,"_listClick"));this.props.rowsViewType==ViewConsts.BLOCK&&e.addClass(ViewConsts.VG_INFO);var t=FluentMap.withClassName(SubsHeaderView.VG_ICON_LIST).onClick(stjs.bind(this,"_listClick"));return this.props.rowsViewType==ViewConsts.LIST&&t.addClass(ViewConsts.VG_INFO),React.DOM.div(ReactViewUtils.className(SubsHeaderView.CAPTION_HEADER_SWITCH_VIEW),React.DOM.span(e.build()),React.DOM.span(t.build()))},t._listClick=function(e){this.props.rowsViewType==ViewConsts.LIST?this.props.onIconClick(ViewConsts.BLOCK):this.props.onIconClick(ViewConsts.LIST)},t._headerData=function(){var e=ReactViewUtils.className(SubsHeaderView.CAPTIONS_HEADER_DATA),t=this._getTitleEl(),n=this._getSizeEl(),i=this._getBtnEl();return React.DOM.div(e,t,n,i)},t._getBtnEl=function(){var e=this.props.onAddCaptions;if(null!=e){var t=FluentMap.withClassName(ViewConsts.VGTHEME_CONTROL_PLUS).put(ReactViewUtils.ON_CLICK,e).build();return React.DOM.span(t)}return null},t._getSizeEl=function(){var e=ReactViewUtils.classNames(SubsHeaderView.CAPTIONS_HEADER_SIZE,ViewConsts.VG_DEFAULT);return React.DOM.span(e,this.props.size," files")},t._getTitleEl=function(){var e=ReactViewUtils.classNames(SubsHeaderView.CAPTIONS_HEADER_TITLE,ViewConsts.VG_INFO);return React.DOM.span(e,this.title)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VideoLogPlugin=function(e,t,n){BasePlugin.call(this,"rrtheme_videolog"),this.log=t.getLog(),this.storage=e,this.player=t,this.view=n,this.pluginClass=this.getId(),this.errorPopupCallback=stjs.bind(this,function(e){this.view.errorView.showError(ErrorPopupView.ERROR_SERVER_COMMUNICATION)}),this.view.trackButtonsView.onHotKeysRx.subscribe(stjs.bind(this,function(e){null!=this.onHotkeysClicked&&this.onHotkeysClicked(e)})),this.currentTimeFormat=n.defaultTimecodeFormat,this.hm=new HotkeyManager(this.log),this.playerListeners(),this.trackButtonsListeners(),this.edlButtonsListeners(),this.storageListeners(),this.tracksDropDownListeners(),this.timeformatDropDownListeners(),this.trackManagerListeners()};VideoLogPlugin=stjs.extend(VideoLogPlugin,BasePlugin,[],function(e,t){t.log=null,t.storage=null,t.hm=null,t.videoUrl=null,t.player=null,t.pluginClass=null,t.view=null,t.onCleanEventsClick=null,t.onCreateSubclipClick=null,t.onSaveEDLClick=null,t.onSubclipUpdate=null,t.onHotkeysClicked=null,t.currentTimeFormat=null,t.currentUser=null,t.mediaId=null,t.selectedLogEvent=null,t.errorPopupCallback=null,t.mediaFilename=null,t.initialTrackName=null,t.enableHotKeysForDocument=function(e){this.hm.enableHotKeysForDocument(e)},t.setCurrentUser=function(e){this.currentUser=e},t.getCurrentUser=function(){return this.currentUser},t.onError=function(){},t.playerListeners=function(){this.player.getTimeUpdateRx().throttle(100).subscribe(stjs.bind(this,function(e){null!=this.selectedLogEvent&&this.storage.updateEventById(this.selectedLogEvent.logEventId,stjs.bind(this,function(t){if(null==this.selectedLogEvent)return null;if(this.selectedLogEvent.isEditEnd())if(e.tv>t.startTv){if(t.endTv!=e.tv&&(t.endTv=e.tv,Utils.isNotBlank(t.subclipId))){var n=SubClip.fromEvent(t,this.player);this.onSubclipUpdate(n)}}else this.player.checkRangeAndSeek(TimecodeHelpers.getFrameByTv(this.player,t.startTv)+1);else{if(!this.selectedLogEvent.isEditStart())throw new RuntimeException("selected LogEvent unknown state");if(e.tv<t.endTv){if(t.startTv!=e.tv&&(t.startTv=e.tv,Utils.isNotBlank(t.subclipId))){var n=SubClip.fromEvent(t,this.player);this.onSubclipUpdate(n)}}else this.player.checkRangeAndSeek(TimecodeHelpers.getFrameByTv(this.player,t.endTv)-1)}return t}),function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}))},t.timeformatDropDownListeners=function(){this.view.timeformatDropDownView.itemSelectedRx.subscribe(stjs.bind(this,function(e){this.currentTimeFormat=e.id,this.view.forEachTrackView(stjs.bind(this,function(e){e.timecodeViews.map(stjs.bind(this,function(e,t,n){return e.changeFormat(this.currentTimeFormat),!0}))}))}))},t.trackManagerListeners=function(){this.storage.getTrackChangedRx().subscribe(stjs.bind(this,function(e){this.updateTrack(e),this.view.trackManagerView.commit(e)})),this.view.trackManagerView.onTrackRevertRx.subscribe(stjs.bind(this,function(e){this.storage.trackById(e,stjs.bind(this,function(e){this.updateTrack(e),this.view.trackManagerView.commit(e)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),this.view.trackManagerView.newTrackFormInputView.onUserTypingRx.subscribe(stjs.bind(this,function(e){var t=VideologAsyncStorage.canBeTrackName(e);t?this.view.trackManagerView.hideTrackExistError():this.view.trackManagerView.showTrackExistError()})),this.view.trackManagerView.onTrackFormSubmitRx.subscribe(stjs.bind(this,function(e){var t=(e.querySelector("input[type='radio']:checked"),e.querySelector("input[name='trackName']")),n=t.value,i=VideologAsyncStorage.canBeTrackName(n);if(n.equals(""))return void this.view.trackManagerView.showIncorrectTrackNameError();if(i){this.view.trackManagerView.hideTrackExistError(),this.view.trackManagerView.hideIncorrectTrackNameError();var r=new Track(t.value,this.currentUser);r.mediaId=this.mediaId,r.localId="tempIdBeforeCommit"+Utils.currentTimeMillis(),this.updateTrack(r),t.value=""}else this.view.trackManagerView.showTrackExistError()})),this.view.trackManagerView.onTrackCommitRx.subscribe(stjs.bind(this,function(e){this.log.debug("on Track Commit",e),e.state.equals(TrackState.DELETED)?this.storage.deleteTrack(e):e.state.equals(TrackState.NEW)?this.storage.saveTrack(e,function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})):this.storage.saveTrack(e,function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}))},t.updateTrack=function(e){if(this.view.trackManagerView.containsTrack(e))this.view.trackManagerView.updateRow(e);else{var t=this.view.trackManagerView.createRowView(e);this.trackRowListeners(t)}},t.trackRowListeners=function(e){e.onDeleteRx.subscribe(stjs.bind(this,function(e){if(e.isTrackNew())this.view.trackManagerView.deleteRow(e);else{var t=stjs.bind(this,function(t){if(t.length>0){var n=new ConfirmDialogView(this.view.modalConfirmDialogEl);n.onYesNo(function(t){e.scheduleForDelete(),e.hide(),n.close()},function(e){n.close()}),n.open()}else e.scheduleForDelete(),e.hide()});this.storage.trackEvents(e.trackId,t,function(e){alert("Error while communicating with server")})}})),e.validateTrackNameFunc=stjs.bind(this,function(e){return VideologAsyncStorage.canBeTrackName(e)?(this.view.trackManagerView.hideIncorrectTrackNameError(),!0):(this.log.warn("new track name is incorrect "+e),this.view.trackManagerView.showIncorrectTrackNameError(),!1)}),e.onTrackNameChanged.subscribe(function(e){e.isCommited=!1,e.trackToCommit.displayName=e.getInputTrackName(),e.isTrackNew()||(e.trackToCommit.state=TrackState.EDITED)})},t.trackButtonsListeners=function(){var e=stjs.bind(this,function(e){if(this.log.debug("Mark in event",this.player.getCurrentFrame()),null!=this.selectedLogEvent){var t=this.view.getCurrentTrackView(),n=t.logEventListView.viewById(this.selectedLogEvent.logEventId);null!=n&&n.readOnlyMode(),this.selectedLogEvent=null}var i=this.player.getCurrentTimeValue(),r=this.player.getTimeline(),s=new LogEvent(this.view.getCurrentTrackView().trackId,i,r.getTimeScale());s.endTv=r.getTvByFrame(r.getFrameByTv(i)+1),s.setOwnerId(this.currentUser.id),this.storage.saveEvent(s,stjs.bind(this,function(e){this.selectedLogEvent=new SelectedLogEvent(e.id,e.getTrackId(),SelectedLogEvent.EDIT_END);var t=this.view.getCurrentTrackView().logEventListView.viewById(e.id);t.editEndTimevalueMode()}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}),t=stjs.bind(this,function(e){null!=this.selectedLogEvent&&this.storage.updateEventById(this.selectedLogEvent.logEventId,stjs.bind(this,function(e){var t=this.player.getTimeline();return e.endTv=this.player.getCurrentTimeValue(),e.startTv>e.endTv&&(e.endTv=t.getTvByFrame(t.getFrameByTv(e.endTv)+1)),e}),stjs.bind(this,function(e){this.player.pause(),this.selectedLogEvent=null;var t=this.view.getCurrentTrackView().logEventListView.viewById(e.id);t.readOnlyMode()}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))});this.view.trackButtonsView.onMarkInRx.subscribe(e),this.view.trackButtonsView.onMarkOutRx.subscribe(t),this.hm.addShortcut("I",function(t){return e(t)},KeyOptions.gd("VideoLog","Mark In Event",!1)),this.hm.addShortcut("O",function(e){return t(e)},KeyOptions.gd("VideoLog","Mark Out Event",!1))},t.edlButtonsListeners=function(){this.view.trackButtonsView.onEdlSaveClickRx.subscribe(stjs.bind(this,function(e){var t=this.view.getCurrentTrackView().trackId;this.storage.trackById(t,stjs.bind(this,function(e){this.storage.trackEvents(t,stjs.bind(this,function(t){var n=VideoLogPlugin.buildFCPXml(this.player,t,this.mediaFilename);null!=this.onSaveEDLClick&&this.onSaveEDLClick(e,n)}),stjs.bind(this,function(e){this.log.error("error getting tracks")}))}),stjs.bind(this,function(e){this.log.error("error getting track object")}))})),this.view.trackButtonsView.onEdlExportClickRx.subscribe(stjs.bind(this,function(e){this.log.debug("EDL export requested");var t=this.view.getCurrentTrackView().trackId;this.storage.trackById(t,stjs.bind(this,function(e){this.storage.trackEvents(t,stjs.bind(this,function(e){var t=VideoLogPlugin.buildFCPXml(this.player,e,this.mediaFilename),n=window.document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+window.encodeURIComponent(t)),n.setAttribute("download",this.mediaFilename+"_"+this.view.getCurrentTrackView().displayName+".xml"),n.style.display="none",window.document.body.appendChild(n),n.click(),window.document.body.removeChild(n)}),stjs.bind(this,function(e){this.log.error("error getting tracks")}))}),stjs.bind(this,function(e){this.log.error("error getting track object")}))}))},e.buildFCPXml=function(e,t,n){for(var i=stjs.trunc(e.getTimeline().getTvByFrame(1)-e.getTimeline().getTvByFrame(0)),r=e.getTimeline().getFrameCount(),s=stjs.trunc(e.getTimeline().getTimeScale()/i+.5),o=e.getVideoElement().getVideoWidth(),a=e.getVideoElement().getVideoHeight(),l=e.getTimeline().getTapeByFrame(0),u=new FCPXml(r,s,o,a,n,l),c=0;c<t.length;c++){var d=t[c];u.addLogEvent(d.id,d.startTv,d.endTv,d.timescale,d.notes);var p=d.tagNames().join(", ");u.addLogMarker(p,d.startTv,d.endTv,d.timescale,d.notes)}return u.log2xml()},t.tracksDropDownListeners=function(){this.storage.getTrackDeletedRx().subscribe(stjs.bind(this,function(e){this.view.trackDropDownView.deleteItem(e.id),this.view.deleteTrackView(e.id);var t=this.view.trackDropDownView.itemIds();if(t.length>0){var n=this.view.trackDropDownView.itemById(t[0]);this.view.trackDropDownView.setActiveItem(n.id),this.view.switchTrack(n.id)}})),this.storage.getTrackChangedRx().subscribe(stjs.bind(this,function(e){null==this.view.trackDropDownView.itemElementById(e.id)?this.view.trackDropDownView.addItem(new DropDownItem(e.id,e.displayName)):this.view.trackDropDownView.updateItem(e.id,new DropDownItem(e.id,e.displayName))})),this.view.trackDropDownView.itemSelectedRx.subscribe(stjs.bind(this,function(e){this.log.debug("DropDown selected track",e.id),this.view.getCurrentTrackView().trackId.equals(e.id)||(null!=this.selectedLogEvent&&(this.deselectLogEventById(this.selectedLogEvent.logEventId),this.selectedLogEvent=null),this.view.switchTrack(e.id),this.view.trackDropDownView.setActiveItem(e.id))}))},t.storageListeners=function(){this.storage.getEventDeletedRx().subscribe(stjs.bind(this,function(e){this.log.debug("event deleted",e);var t=this.view.getTrackView(e.getTrackId());null!=t&&t.logEventListView.deleteEvent(e.id)})),this.storage.getEventChangedRx().subscribe(stjs.bind(this,function(e){var t=this.view.getTrackView(e.getTrackId());this.log.debug("event changed",e,t),null!=t?this.renderEventForTrack(t,e):this.log.error("event exist with no track",e.getTrackId(),e)})),this.storage.getTrackChangedRx().subscribe(stjs.bind(this,function(e){this.log.debug("track change from storage",e.displayName,e.id);var t=this.view.getTrackView(e.id);null==t?(t=new TrackView(e,this.pluginClass,this.player),this.trackViewListeners(t),this.view.addTrackView(t),this.storage.trackEvents(e.id,stjs.bind(this,function(e){e.map(stjs.bind(this,function(e,t,n){return this.storage.getEventChangedRx().onNext(e),!0}))}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})),t.onEventIdDeleted.subscribe(stjs.bind(this,function(e){this.storage.deleteEvent(e)}))):t.render(e),null==this.view.getCurrentTrackView()&&(null==this.initialTrackName||e.displayName.toLowerCase().equals(this.initialTrackName.toLowerCase()))&&this.view.switchTrack(e.id)}))},t.setSubclipIdForEvent=function(e,t,n,i){this.storage.updateEventById(t,function(t){return t.subclipId=e,t},n,stjs.bind(this,function(e){this.log.error("Error while sending request",e),i(e),this.errorPopupCallback(e)}))},t.renderEventForTrack=function(e,t){var n=e.logEventListView.viewById(t.id);null==n?(n=new LogEventView(t,this.pluginClass,this.player,this.currentTimeFormat),n.onSubclipCreateClickRx.subscribe(stjs.bind(this,function(e){null!=this.onCreateSubclipClick&&this.storage.eventById(e,stjs.bind(this,function(e){this.onCreateSubclipClick(SubClip.fromEvent(e,this.player),e)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),n.getOnDeleteRx().subscribe(stjs.bind(this,function(t){this.log.debug("Deleting event",t.logEventId),e.deleteEvent(t.logEventId),null!=this.selectedLogEvent&&this.selectedLogEvent.logEventId.equals(t.logEventId)&&(this.selectedLogEvent=null)})),n.onStartTimeEditClickRx.subscribe(stjs.bind(this,function(e){this.player.pause();var t=null!=this.selectedLogEvent&&!e.logEventId.equals(this.selectedLogEvent.logEventId);if(null!=this.selectedLogEvent)if(t)this.deselectLogEventById(this.selectedLogEvent.logEventId);else{if(e.readOnlyMode(),this.selectedLogEvent.action.equals(SelectedLogEvent.EDIT_START))return void(this.selectedLogEvent=null);this.selectedLogEvent=null}this.storage.eventById(e.logEventId,stjs.bind(this,function(t){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(t.startTv)),e.editStartTimevalueMode(),this.selectedLogEvent=new SelectedLogEvent(t.id,t.getTrackId(),SelectedLogEvent.EDIT_START)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),n.onEndTimeEditClickRx.subscribe(stjs.bind(this,function(e){this.player.pause();var t=null!=this.selectedLogEvent&&!e.logEventId.equals(this.selectedLogEvent.logEventId);if(null!=this.selectedLogEvent)if(t)this.deselectLogEventById(this.selectedLogEvent.logEventId);else{if(e.readOnlyMode(),this.selectedLogEvent.action.equals(SelectedLogEvent.EDIT_END))return void(this.selectedLogEvent=null);this.selectedLogEvent=null}this.storage.eventById(e.logEventId,stjs.bind(this,function(t){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(t.endTv)),e.editEndTimevalueMode(),this.selectedLogEvent=new SelectedLogEvent(t.id,t.getTrackId(),SelectedLogEvent.EDIT_END)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),e.timecodeViews.push(n.timeCodeView),e.logEventListView.addEvent(n),e.logEventViewAddedRx.onNext(n)):n.update(t,this.currentTimeFormat)},t.deselectLogEventById=function(e){this.view.getTrackView(this.selectedLogEvent.trackId).logEventListView.viewById(e).readOnlyMode()},t.trackViewListeners=function(e){e.cleanTrackButtonRx.subscribe(stjs.bind(this,function(t){var n=new ConfirmDialogView(this.view.modalCleanEventsConfirmDialogEl);n.onYesNo(stjs.bind(this,function(t){this.log.debug("clean the track"),this.storage._trackById(e.trackId,stjs.bind(this,function(e){this.storage.clearTrack(e)}),stjs.bind(this,function(e){this.log.error(e)})),n.close()}),function(e){n.close()}),n.open()})),e.logEventViewAddedRx.subscribe(stjs.bind(this,function(e){this.logEventViewListeners(e)}))},t.logEventViewListeners=function(e){this.storage.eventById(e.logEventId,stjs.bind(this,function(t){e.onTagDeleteRx.subscribe(stjs.bind(this,function(t){this.storage.updateEventById(e.logEventId,function(e){return e.removeTagByName(t),e},function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),e.onClickStartTimevalueRx.subscribe(stjs.bind(this,function(e){this.storage.eventById(e.logEventId,stjs.bind(this,function(e){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(e.startTv))}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),e.onClickEndTimevalueRx.subscribe(stjs.bind(this,function(e){this.storage.eventById(e.logEventId,stjs.bind(this,function(e){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(e.endTv))}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}));var n=e.getElement().querySelector(".app-tagInputView"),i=new TagSuggestInputView(this.pluginClass,e,n,this.view.hintsView,this.log);this.controlTagSuggestInputView(i,e);var r=e.getElement().querySelector(".description-input"),s=new InputView(r,this.player.getLog());this.controlDescriptionInputView(s,e)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))},t.controlDescriptionInputView=function(e,t){e.getFocusRx().subscribe(stjs.bind(this,function(e){this.player.pause()})),e.getBlurRx().subscribe(function(t){e.inputValueEnteredRx.onNext(t.value)}),e.inputValueEnteredRx.subscribe(stjs.bind(this,function(n){this.log.debug("new description",n),this.storage.updateEventById(t.logEventId,function(e){return e.notes=n,e},function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})),e.blur()}))},t.controlTagSuggestInputView=function(e,t){e.itemSelectedRx.subscribe(stjs.bind(this,function(n){this.log.debug("Suggested itemSelectedRx",n);var i=VGView.findIndex(e.getElement().parentElement.children,e.getElement());if(i!=-1){var r=this.storage.tagNameById(n),s=new LogEventTag(n,r);this.storage.updateEventById(t.logEventId,function(t){return e.onTagSelected(t,s,i),t},function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})),this.storage.eventById(t.logEventId,function(e){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}})),e.getFocusRx().subscribe(stjs.bind(this,function(t){this.log.debug("tag input focused",t),this.player.pause(),e.showAsActive();var n=this.storage.findTagDisplayNames(t.value);e.showHint(n,t.value),e.itemFromHint=this.view.hintsView.itemSelectedRx.subscribe(stjs.bind(this,function(t){this.log.debug("ITEM SELECTED FROM HINT",t),e.itemSelectedRx.onNext(t),e.getElement().blur()}))})),e.getBlurRx().subscribe(function(t){e.itemFromHint.dispose()}),e.itemSelectedFromHintRx.subscribe(stjs.bind(this,function(e){this.log.debug("tagID selected",e)})),e.onUserTypingRx.subscribe(stjs.bind(this,function(n){var i=this.storage.findTagDisplayNames(n),r=t.existingTags().map(function(e,t,n){return e.id});i=i.filter(function(e,t,n){return r.indexOf(e.id)==-1}),e.showHint(i,n)})),e.inputValueEnteredRx.subscribe(stjs.bind(this,function(t){this.log.debug("newTAG!",t),e.closeHint()}))},t.setMediaId=function(e){this.mediaId=e},t.setMediaFilename=function(e){this.mediaFilename=e},t.renderInto=function(e,t,n){this.view.appendTo(e),n()}},{log:"Log",storage:"VideologAsyncStorage",hm:"HotkeyManager",player:"PlayerImpl",view:"VideoLogView",onCleanEventsClick:{name:"Callback1",arguments:["DOMEvent"]},onCreateSubclipClick:{name:"Callback2",arguments:["SubClip","LogEvent"]},onSaveEDLClick:{name:"Callback2",arguments:["Track",null]},onSubclipUpdate:{name:"Callback1",arguments:["SubClip"]},onHotkeysClicked:{name:"Callback1",arguments:["DOMEvent"]},currentUser:"User",selectedLogEvent:"SelectedLogEvent",errorPopupCallback:"Callback1",pluginApi:"VGPlayerPluginApi"},{});var FancyCssWaveCollider=function(e,t,n,i){ExtendedCssWaveCollider.call(this,e,t,n,i),this.settings=e.settings};FancyCssWaveCollider=stjs.extend(FancyCssWaveCollider,ExtendedCssWaveCollider,[],function(e,t){t.settings=null,t.amplified=!1,t.setMaxAmplification=function(e){if(!this.amplified){var t=256/e.getMinMax8(0,e.data.length);this.setAmplification(t),this.amplified=!0}},t._drawWave=function(e,t){this.log.debug("FancyCssWaveCollider _drawWave"),this.setMaxAmplification(e);var n=this.getDimensions();if(0!=n.width&&0!=n.height){var i=n.height+1,r=t.startX,s=0!=t.endX?t.endX:n.width,o=this.getContext();this.log.debug("FancyCssWaveCollider _drawWave start");var a=o.createLinearGradient(0,0,0,n.height),l=o.createLinearGradient(0,0,0,n.height);this.settings.twoSides?(a.addColorStop(.25,"rgba(80,85,91,255)"),a.addColorStop(.5,"rgba(80,85,91,255)")):(a.addColorStop(.25,"rgba(80,85,91,255)"),a.addColorStop(.5,"rgba(80,85,91,255)")),l.addColorStop(.5,"rgba(50,50,50,255)"),l.addColorStop(1,"rgba(50,50,50,255)");var u=t.uiSpp/e.spp,c=(parseInt(n.height/2),stjs.trunc(t.sampleRange.start/e.spp));o.shadowColor="transparent",o.clearRect(r,0,s-r,n.height+2),o.lineWidth=1,o.lineJoin="bevel",o.fillStyle=this.waveColor;var d=this.settings.fancySettings.padding,p=this.settings.fancySettings.paddingBottom;this.settings.twoSides&&(i=stjs.trunc(i/2));var h=(i-d-p)/256*this.amplify,f=0;
if(this.settings.twoSides){for(o.beginPath(),o.moveTo(r,i+p),o.strokeStyle=o.fillStyle,f=0;f<s-r;f++){var m=Math.round(f*u+c),g=Math.round((f+1)*u+c),v=t.sampleRange.start+Math.round(f*t.uiSpp),b=e.getMinMax8(stjs.trunc(m),stjs.trunc(g));b=CssWaveCollider._logLut[b],b=stjs.trunc(this.bezierFilter(v,b)),o.lineTo(r+f,Math.round(i+p+b*h))}o.lineTo(f+r,i+p),o.closePath(),o.fillStyle=l,o.fill(),o.stroke()}for(o.strokeStyle="rgb(70, 70, 70)",f=0,o.beginPath(),o.moveTo(r,i-d-1),f=0;f<s-r;f++){var m=Math.round(f*u+c),g=Math.round((f+1)*u+c),v=t.sampleRange.start+Math.round(f*t.uiSpp),b=e.getMinMax8(stjs.trunc(m),stjs.trunc(g));b=CssWaveCollider._logLut[b],b=stjs.trunc(this.bezierFilter(v,b)),o.lineTo(f+r,Math.round(i-d-b*h))}o.lineTo(f+r,i-d-1),o.closePath(),o.stroke(),o.fillStyle=null!=this.settings.fillColor?this.settings.fillColor:a,o.fill(),this.drawSelection(o,i),this.fades&&this.drawFades(o),this.ruler&&this.drawRuler(o),this.log.debug("FancyCssWaveCollider _drawWave end")}},t._drawPreciseWave=function(e,t){this.log.debug("FancyCssWaveCollider _drawPreciseWave");var n=this.getDimensions();if(0!=n.width&&0!=n.height){var i=t.startX,r=0!=t.endX?t.endX:n.width,s=this.getContext(),o=s.createLinearGradient(0,0,0,n.height),a=s.createLinearGradient(0,0,0,n.height);this.settings.twoSides?(o.addColorStop(.25,"rgba(8,107,189,255)"),o.addColorStop(.5,"rgba(5,62,132,255)")):(o.addColorStop(.5,"rgba(8,107,189,255)"),o.addColorStop(1,"rgba(5,62,132,255)")),a.addColorStop(.5,"rgba(1,79,107,255)"),a.addColorStop(1,"rgba(1,22,62,255)");var l=(parseInt(n.height/2),this.canvas.clientHeight+1),u=this.settings.fancySettings.padding,c=this.settings.fancySettings.paddingBottom;this.settings.twoSides&&(l=stjs.trunc(l/2));var d=(l-u-c)/32768*this.amplify*.75;s.shadowColor="transparent",s.clearRect(i,0,r-i,n.height),s.strokeStyle="rgba(0,0,0,0.9)",s.lineWidth=1,s.lineJoin="bevel",s.fillStyle=this.waveColor,s.beginPath();var p,h=e.getSampleOffset(t.sampleRange.start),f=[0,0];if(this.settings.twoSides){if(s.strokeStyle="rgb(29, 126, 209)",s.beginPath(),s.moveTo(i,l+c),this.uiSpp>=1)for(var m=0;m<r-i;m++){e.getMinMax16(m+h,f);var g=this.sampleRange.start+Math.round(m*this.uiSpp);p=CssWaveCollider.avg(f[0],f[1]),p=CssWaveCollider._logLut[p],p=stjs.trunc(this.bezierFilter(g,p)),s.lineTo(i+m,l+c+p*d)}else for(var m=0;parseInt(stjs.trunc(m/e.spp))<r-i;m++){e.getMinMax16(parseInt(stjs.trunc(m/e.spp))+h,f);var g=this.sampleRange.start+Math.round(m);p=CssWaveCollider.avg(f[0],f[1]),0==p&&(e.getMinMax16(parseInt(stjs.trunc(m/e.spp))+1+h,f),p=CssWaveCollider.avg(f[0],f[1]),0==p&&(e.getMinMax16(parseInt(stjs.trunc(m/e.spp))-1+h,f),p=CssWaveCollider.avg(f[0],f[1]))),p=CssWaveCollider._logLut[p],p=stjs.trunc(this.bezierFilter(g,p)),s.lineTo(i+parseInt(stjs.trunc(m/e.spp)),l+c+p*d)}s.lineTo(parseInt(r),l+c),s.closePath(),s.fillStyle=a,s.fill(),s.stroke()}if(s.strokeStyle="rgb(29, 126, 209)",s.beginPath(),s.moveTo(i,l-u),this.uiSpp>=1)for(var m=0;m<n.width;m++){e.getMinMax16(m+h,f);var g=this.sampleRange.start+Math.round(m*this.uiSpp);p=CssWaveCollider.avg(f[0],f[1]),p=CssWaveCollider._logLut[p],p=stjs.trunc(this.bezierFilter(g,p)),s.lineTo(m+i,l-u-p*d)}else for(var m=0;parseInt(stjs.trunc(m/e.spp))<n.width;m++){e.getMinMax16(parseInt(stjs.trunc(m/e.spp))+h,f);var g=this.sampleRange.start+Math.round(m);p=CssWaveCollider.avg(f[0],f[1]),0==p&&(e.getMinMax16(parseInt(stjs.trunc(m/e.spp))+1+h,f),p=CssWaveCollider.avg(f[0],f[1]),0==p&&(e.getMinMax16(parseInt(stjs.trunc(m/e.spp))-1+h,f),p=CssWaveCollider.avg(f[0],f[1]))),p=CssWaveCollider._logLut[p],p=stjs.trunc(this.bezierFilter(g,p)),s.lineTo(i+parseInt(stjs.trunc(m/e.spp)),l-u-p*d)}s.lineTo(parseInt(r),l-u),s.closePath(),s.fillStyle=o,s.fill(),s.stroke(),this.drawSelection(s,l),this.fades&&this.drawFades(s),this.ruler&&this.drawRuler(s)}}},{settings:"WaveformSettings",waveform:"Waveform",WAVE_IMAGES:{name:"Map",arguments:[null,"WaveImages"]},preciseWaveImages:{name:"Map",arguments:[null,"WaveData"]},waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var TimeControlsBox=function(e,t,n){VGPlugins.call(this,e),this.view=new TimeControlsBoxView(e,t,n,"vg_time_controls_box")};TimeControlsBox=stjs.extend(TimeControlsBox,VGPlugins,[],null,{player:"PlayerImpl",view:"VGView"},{});var ControlsPanelView=function(e,t,n,i){VGView.call(this,t,n,i),this.render('<div class="vg_closeLeftPanel"><div></div></div>'),this.el.className="vg_controlsPanel vg_panel-bg",this.controlsView=new ControlsView(e,this.el,this.parent,i),null!=e.getOptions().theme&&e.getOptions().theme.equals("delta")?this.playRateBox=this.addPlayRateBox(this.controlsView.playControlsEl):this.playRateBox=this.addPlayRateBox(this.el);var r=this.playRateBox.querySelector(".vg_speedText");this.timeControlsEl=this.controlsView.el.querySelector(".vg_time_controls"),this.timeControlsView=new TimeControlsView(e,this.timeControlsEl,this.parent,i),e.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){var n=e.getVideoElement().getPlayRate(),i=0==n||1==n;null==r||i?i&&this.getPlayRateBox().classList.add("vg_invisible"):(this.getPlayRateBox().classList.remove("vg_invisible"),r.innerHTML=n+"X")}));var s=function(t){var n=e.getView(),i=t.frame;if(i!=e.getCurrentFrame()&&!e.isPlaying()){var r=e.getTimeline().boundsFn(i);n.scrubbing=!0,e.pause(),n.seekFrameAndCheckRange(r),setTimeout(function(){n.seekFrameAndCheckRange(r),n.scrubbing=!1},100)}};this.timeControlsView.timecodeInputsInit(s);var o=stjs.bind(this,function(e){var t=this.el.querySelector(".vg_volumeScreenControls .vg_ddown.active");this.toggleActive(t)});window.document.addEventListener("click",o,!1)};ControlsPanelView=stjs.extend(ControlsPanelView,VGView,[],function(e,t){e.VG_PLAY_RATE_BOX="vg_playRateBox",t.timeControlsEl=null,t.el=null,t.controlsView=null,t.timeControlsView=null,t.playRateBox=null,t.addPlayRateBox=function(e){return e.insertAdjacentHTML("beforeend","<div class='"+ControlsPanelView.VG_PLAY_RATE_BOX+" vg_info vg_invisible'>PLAYBACK SPEED <span class='vg_speedText'></span></div>"),e.querySelector("."+ControlsPanelView.VG_PLAY_RATE_BOX)},t.getVolumeBtn=function(){return this.controlsView.volumeButton},t.getStepSelectRx=function(){return this.controlsView.stepSelectRx},t.getCameraClickRx=function(){return this.controlsView.cameraClickRx},t.getFullscreenClickRx=function(){return this.controlsView.fullscreenClickRx},t.getControlsContainer=function(){return this.el.querySelector(".vg_controls--addOn")},t.activate=function(){return this.el.classList.add("active")},t.deactivate=function(){var e=this.el.querySelector(".vg_addonview.active");return null!=e&&e.classList.remove("active"),this.el.classList.remove("active")},t.getVolumeRangeEl=function(){return this.controlsView.volumeRangeEl},t.getPlayBtn=function(){return this.controlsView.getPlayBtn()},t.getTimeControls=function(){return this.timeControlsView.el},t.activateControlsPanel=function(){throw exception("activateControlsPanel TODO")},t.deactivateControlsPanel=function(){throw exception("deactivateControlsPanel TODO")},t.getVolumeClick=function(){return this.controlsView.volumeClick},t.enableControl=function(e){var t=this.el.querySelector(".vg_controls--addOn");t.appendChild(e.getControlEl(this))},t.getPlayRateBox=function(){return this.playRateBox}},{timeControlsEl:"Element",el:"Element",controlsView:"ControlsView",timeControlsView:"TimeControlsView",playRateBox:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SafeAreaPlugin=function(e){VGPlugins.call(this,e);var t=e.getView().controlsPanelView.getControlsContainer();if("vg".equals(e.getOptions().theme)){this.view=new SafeAreaViewVG(e.getView().playerContainer,e.getView(),e);var n=e;this.controlButton=new SafeAreaDropDownVGView(this.view,n,t,e.getView(),null)}else this.view=new SafeAreaViewRR(e.getView().playerContainer,e.getView(),e),this.controlButton=new SafeAreaDropDownRRControl(this.view,e.getLog()),e.getView().playerContainer.appendChild(this.view.getElement());var i=null==this.view.getAspectRatio()?null:"caption-"+this.view.getAspectRatio(),r=e.getView();r.hm.addShortcut("shift-a",stjs.bind(this,function(e){return this.view.toggleActionSafe()}),KeyOptions.gd("Player","Show/hide action safe area",!1)),null!=i&&r.hm.addShortcut("shift-c",stjs.bind(this,function(e){return this.view.toggleCaptionSafe()}),KeyOptions.gd("Player","Show/hide action safe area",!1))};SafeAreaPlugin=stjs.extend(SafeAreaPlugin,VGPlugins,[],function(e,t){t.view=null,t.controlButton=null,t.applyCrop=function(e){var t=e.getVideoHeight(),n=e.getVideoWidth(),i=n/t;this.player.getLog().debug("Aspect ratio: "+i),Math.abs(3*i/4-1)<.01&&this.view.setAspectRatio("4-3");var r=this.view.getElement().parentElement.getBoundingClientRect();this.view.doApplyCrop(i*r.height/r.width)},t.getControlButton=function(){return this.controlButton}},{view:"SafeAreaView",controlButton:"VGControl",player:"PlayerImpl",view:"VGView"},{});var ContexterComponent=function(e){React.Component.call(this,e);var t=e.player.getTimeline();this.timeupdate=e.player.getTimeUpdateRx(),this.state={initialized:!1,progress:-1,data:null,duration:t.getDurationSec(),framecount:t.getFrameCount(),searchString:"",overlays:!0}};ContexterComponent=stjs.extend(ContexterComponent,React.Component,[],function(e,t){t.timeupdate=null,t.selectedWord=null,t.renderWordsComponent=function(e,t,n){var i={};i.data=e,i.timeupdate=this.timeupdate,i.minConfidence=.3,i.word=t,i.render=n;var r=React.createElement(ContexterWordsComponent,i);ReactDOM.render(r,this.props.wordsContainer)},t.init=function(){this.setState({initialized:!0,progress:this.state.progress,data:this.state.data})},t.render=function(){if(this.state.initialized){var e={};e.data=this.state.data,e.track=this.renderTrack(),e.rowClick=stjs.bind(this,"rowClick"),e.wordSelect=stjs.bind(this,"wordSelect"),e.videoFramesCount=this.state.framecount,e.containerWidth=this.props.containerWidth;var t={};return t.handleSubmit=stjs.bind(this,"handleSearchSubmit"),t.detect=this.props.detect,t.stop=this.props.stop,t.openInVideoLog=this.props.openInVideoLog,t.onSearchChange=stjs.bind(this,"onSearchChange"),t.progress=this.state.progress,t.searchString=this.state.searchString,t.toggleOverlays=stjs.bind(this,"onToggleOverlays"),t.overlayClass=this.state.overlays?ViewConsts.VG_ICON_TAG:ViewConsts.VG_ICON_NOTAG,React.DOM.div({className:ContexterConsts.VG_CONTEXTER_CONTAINER},React.createElement(ContexterHeader,t),React.createElement(ContexterTableComponent,e))}return React.DOM.div({className:ViewConsts.VG_LOADING_SPINNER})},t.onToggleOverlays=function(e){var t=!this.state.overlays;this.renderWordsComponent(this.state.data,this.selectedWord,t),this.setState({overlays:t})},t.handleSearchSubmit=function(e){e.preventDefault(),this.renderWordsComponent(this.state.data,this.selectedWord,this.state.overlays)},t.onSearchChange=function(e){var t,n=e.target.value;this.state.searchString.contains(n)&&n.length==this.state.searchString.length-1?(t=this.state.data.parent,t.clear()):t=this.state.data.filterByWordName(n),this.setState({searchString:n,data:t})},t.wordSelect=function(e){this.selectedWord=e,this.renderWordsComponent(this.state.data,this.selectedWord,this.state.overlays)},t.rowClick=function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,i=n/t.width,r=stjs.trunc(this.state.framecount*i);this.props.player.seekFrame(r)},t.renderTrack=function(){var e={};return e.cssClass=ContexterConsts.VG_CONTEXTER_TRACK,e.color=ViewConsts.PRIMARY_COLOR,e.framecount=this.state.framecount,e.timeupdate=this.timeupdate,React.createElement(TimeTrackComponent,e)},t.setData=function(e){this.setState({initialized:this.state.initialized,progress:this.state.progress,data:e}),this.renderWordsComponent(e,this.selectedWord,this.state.overlays)},t.setProgress=function(e){this.setState({initialized:this.state.initialized,progress:e,data:this.state.data})}},{timeupdate:{name:"Rx.Observable",arguments:["TimeSample"]},selectedWord:"ContexterWord",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsPluginComponent=function(e){React.Component.call(this,e),this.timeUpdateRx=e.player.getTimeUpdateRx(),this.timeline=this.props.player.getTimeline(),this.state={items:[],activeItem:null,visible:!1,searchValue:"",rowsViewType:ViewConsts.LIST,timeTrack:0,zoom:SubsPluginComponent.ZOOM_MIN}};SubsPluginComponent=stjs.extend(SubsPluginComponent,React.Component,[],function(e,t){e.ZOOM_POINTS=5,e.ZOOM_MAX=10,e.ZOOM_MIN=0,t.disposables=null,e.WRAP_CAPTIONS="wrap-captions",t.props=null,t.state=null,t.selectedFrameRx=null,t.selectedItemRx=null,t.captionsControl=null,t.captionHandlerCallBack=null,t.timeUpdateRx=null,t.timeline=null,t.componentDidMount=function(e){this.disposables=new Rx.CompositeDisposable,this.disposables.add(this.props.subsRx.subscribe(stjs.bind(this,function(e){var t=new SubsPluginState,n=[e];t.items=this.state.items.concat(n),t.activeItem=e,t.visible=!0,this.setState(t)}))),this.selectedFrameRx=new Rx.Subject,this.disposables.add(this.selectedFrameRx.subscribe(stjs.bind(this,function(e){var t=this.timeline.getMillisByTv(e)/1e3;this.props.player.seekSec(t)}))),this.captionsControl=this.props.captionsControl,this.selectedItemRx=new Rx.Subject,this.disposables.add(this.selectedItemRx.subscribe(stjs.bind(this,function(e){this.captionsControl.captionsChangeRx.onNext(e)}))),this.captionsControl.captionsSearchRx.subscribe(stjs.bind(this,function(e){this.setStateSearchValue(e)})),this.disposables.add(this.captionsControl.captionsChangeRx.subscribe(stjs.bind(this,function(e){var t=e!=this.state.activeItem,n=null,i=new SubsPluginState;t&&(n=e),i.activeItem=n,i.visible=t,this.setState(i)})));var t=this.props.player.getCaptionHandlerRx();this.disposables.add(t.subscribe(stjs.bind(this,function(e){this.captionHandlerCallBack=e})))},t.componentWillUnmount=function(){this.disposables.dispose()},t._getSubs=function(){var e=this.state.items.map(stjs.bind(this,function(e,t,n){var i={};return i.key=e.id,i.subtitles=e,i.rowsViewType=this.state.rowsViewType,i.timeline=this.timeline,i.timeUpdateRx=this.timeUpdateRx,i.selectedFrameRx=this.selectedFrameRx,i.selectedItemRx=this.selectedItemRx,i.isItemActive=this.state.activeItem==e,i.visible=this.state.visible,i.searchValue=this.state.searchValue,i.timeTrack=this.state.timeTrack,i.zoom=this.state.zoom,React.createElement(SubsItemComponent,i)}));return e},t._subsHeader=function(){var e={};return e.size=this.state.items.length,e.handleSubmit=stjs.bind(this,"handleSearchSubsSubmit"),e.onChange=stjs.bind(this,"onSearchSubsChange"),e.zoomRows=stjs.bind(this,"_zoomRows"),e.searchValue=this.state.searchValue,e.onAddCaptions=this.captionHandlerCallBack,e.onIconClick=stjs.bind(this,"onSwitchViewType"),e.rowsViewType=this.state.rowsViewType,e.zoomMax=SubsPluginComponent.ZOOM_MAX,e.zoomMin=SubsPluginComponent.ZOOM_MIN,e.zoomPoints=SubsPluginComponent.ZOOM_POINTS,e.zoomValue=this.state.zoom,React.createElement(SubsHeaderView,e)},t.onSwitchViewType=function(e){var t=new SubsPluginState;t.rowsViewType=e,e==ViewConsts.LIST&&(t.zoom=0),this.setState(t)},t.onSearchSubsChange=function(e){var t=e.target;this.setStateSearchValue(t.value)},t.setStateSearchValue=function(e){var t=new SubsPluginState;t.searchValue=e,this.setState(t)},t.handleSearchSubsSubmit=function(e){e.preventDefault(),this.captionsControl.captionsSearchRx.onNext(this.state.searchValue)},t._zoomRows=function(e){e.preventDefault();var t=e.target,n=new SubsPluginState;n.zoom=parseInt(t.value),this.setState(n)},t.render=function(){return React.DOM.div(ReactViewUtils.className(SubsPluginComponent.WRAP_CAPTIONS),this._subsHeader(),React.DOM.div(ReactViewUtils.className(ViewConsts.CAPTIONS_LIST),this._getSubs()))},e.SubsPluginProps=function(){PluginProps.call(this)},e.SubsPluginProps=stjs.extend(e.SubsPluginProps,PluginProps,[],function(e,t){t.subsRx=null,t.captionsControl=null,t.displayName=null},{subsRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},captionsControl:"CaptionsControl",player:"VGPlayerPluginApi"},{})},{disposables:"Rx.CompositeDisposable",props:"SubsPluginComponent.SubsPluginProps",state:"SubsPluginState",selectedFrameRx:{name:"Rx.Subject",arguments:[null]},selectedItemRx:{name:"Rx.Subject",arguments:["Subtitles"]},captionsControl:"CaptionsControl",captionHandlerCallBack:"Callback0",timeUpdateRx:{name:"Rx.Observable",arguments:["TimeSample"]},timeline:"Timeline",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var PlayerMain=function(){};PlayerMain=stjs.extend(PlayerMain,null,[],function(e,t){e.canvasToBlob=function(e){return Utils.canvasToBlob(e)},e.parseSubtitlesFromUrl=function(e,t,n,i){Captions.parseSubs(t,n,Captions.guessSubtitleCodec(n),function(t,r){null==t?(r.title=e,i(r)):console.error("bummer. failed importing subtitles from "+n)},LogLevel.INFO)},e.videolog=function(e,t,n,i,r,s){var o=new RestVideoLogAsyncStorage(e.http,n,function(e){},e.getLog()),a=new VideoLogView(e,i),l=new VideoLogPlugin(o,e,a);l.initialTrackName=r,l.setMediaId(t),o.loggedUser(n+"user.json",function(e){console.log("vlog user is",e),l.setCurrentUser(e),o.loadTags(n+"tags.json",function(e){o.displayNamesById=e,o.tracksOfProxy(t,function(e){for(var n=0;n<e.length;n++){var i=e[n];o.getTrackChangedRx().onNext(i)}for(var r=RAMVideologAsyncStorage.defaultTrackNames.filter(function(t,n,i){return 0==e.filter(function(e,n,i){return e.displayName.equals(t)}).length}),n=0;n<r.length;n++){var s=r[n],i=new Track(s,l.getCurrentUser());i.mediaId=t,i.canDelete=!1,o.saveTrack(i,function(e){console.log("default track created",e.displayName)},function(e){console.error("Can not create default track",e)})}})})}),s(l)}},{},{});var Waveform=function(e,t,n,i,r,s,o){ObjectEvents.call(this),this.http=e,this.div=t,this.timeline=n,this.log=o,i.subscribe(stjs.bind(this,function(e){this.timeline=e})),this.channel=r,this.settings=WaveformSettings.defaultIfNull(s),this.defaultColor="#393B40",this.range=this.settings.range,this.init(),this.waveCollider.setChannel(this.channel),this.initCollider(),this.update()};Waveform=stjs.extend(Waveform,ObjectEvents,[],function(e,t){t.http=null,t.div=null,t.timeline=null,t.log=null,t.channel=null,t.settings=null,t.defaultColor=null,t.range=null,t.waveCollider=null,t.updateTimeout=null,t.canvas=null,t.initCollider=function(){null!=this.canvas&&this.div.removeChild(this.canvas),this.canvas=window.document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.div.appendChild(this.canvas);var e=this.channel;null!=e?(this.settings.fancy?this.waveCollider=new FancyCssWaveCollider(this,e,this.canvas,this.log):this.waveCollider=new ExtendedCssWaveCollider(this,e,this.canvas,this.log),this.waveCollider.setWaveColor(null!=this.settings.color?this.settings.color:this.defaultColor),this.waveCollider.ruler=!1,this.waveCollider.rulerLines=10):this.waveCollider=new EmptyWaveCollider},t._getClientHeight=function(e){return parseInt(e._clientHeight)},t._setClientHeight=function(e,t){Utils.addField(e,"_clientHeight",t)},t._setClientWidth=function(e,t){Utils.addField(e,"_clientWidth",t)},t._getClientWidth=function(e){return parseInt(e._clientWidth)},t.init=function(){this.initCollider();var e=this;setInterval(stjs.bind(this,function(){(e.div.clientWidth!=this._getClientWidth(e.div)||e.div.clientHeight!=this._getClientHeight(e.div))&&e.div.clientHeight>0&&e.div.clientWidth>0&&(this._setClientWidth(e.div,e.div.clientWidth),this._setClientHeight(e.div,e.div.clientHeight),null!=e.updateTimeout&&clearTimeout(e.updateTimeout),e.updateTimeout=setTimeout(stjs.bind(e,"update"),100),e.fireEvent("resize",null))}),100),null!=this.settings.clickToSeek&&this.div.addEventListener("click",function(t){e.settings.seekFrame(e.getClosestFrame(t.pageX-UIUtils.getPosition(e.div).x))}),null!=this.settings.volumeControl&&this.settings.volumeControl.addEvent("changed",function(t){var n=t;e.waveCollider.setAmplification(1+(n-.5)/2),e.waveCollider.drawWave()})},t.getLeftFor=function(e){var t=this.range.end-this.range.start,n=e-this.range.start;return this.div.clientWidth/t*n},t.getClosestFrame=function(e){var t=this.range.start+Math.floor(e/stjs.trunc(this.div.clientWidth/(this.range.end-this.range.start)));return this.timeline.boundsFn(stjs.trunc(t))},t.update=function(e){null!=e&&(this.timeline=e),this.range=new ZoomRange(this.timeline,0,this.timeline.getFrameCount(),this.settings.getFrame),this.range.addEvent("changed",stjs.bind(this,function(e){return this.update()}));var t=this.timeline.getTvByFrame(this.range.start),n=this.timeline.getTvByFrame(this.range.end),i=Utils.convertTv(t,this.timeline.getTimeScale(),this.waveCollider.channel.sampleRate),r=Utils.convertTv(n,this.timeline.getTimeScale(),this.waveCollider.channel.sampleRate),s=new Range(stjs.trunc(i),stjs.trunc(r)).offset(stjs.trunc(this.waveCollider.channel.channelOffset));null!=this.waveCollider.sampleRange&&s.equals(this.waveCollider.sampleRange)||this.waveCollider.setSampleRange(s),this.waveCollider.drawWave(),this.fireEvent("show",null)}},{http:"Http",div:"Element",timeline:"Timeline",log:"Log",channel:"PlayerAudioTrack",settings:"WaveformSettings",range:"ZoomRange",waveCollider:"CssWaveCollider",updateTimeout:"TimeoutHandler",canvas:"Canvas",events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{});var SkinnedPlayerView=function(e,t){PlayerView.call(this,e,t),this.pluginsPanelRx=new Rx.ReplaySubject};SkinnedPlayerView=stjs.extend(SkinnedPlayerView,PlayerView,[],function(e,t){e.WEBKITFULLSCREENCHANGE="webkitfullscreenchange",e.MOZFULLSCREENCHANGE="mozfullscreenchange",e.MS_FULLSCREEN_CHANGE="msfullscreenchange",e.FULLSCREENCHANGE="fullscreenchange",t.controlsPanelView=null,t.pluginsPanelRx=null,t.playerContainer=null,t.lastCutlistHeight=0,t.lastTimecodesPosition=null,t.timeControls=null,t.cutlistFilmstrip=null,t.filmstripEl=null,t.bottomPanel=null,t.leftPanelEl=null,t.filmstrip=null,t.audioMutable=!1,t.volumeRangeEl=null,t.muteAllButton=null,t.proPanelModeRx=null,t.fullscreenClickRx=null,t.shotsView=null,t.skin=null,t.videoList=null,t.captionsList=null,t.captionsHeader=null,t.audioViewEl=null,t.cutlistFilmstripEl=null,t.scrubbing=!1,t.scrubberMouseDown=!1,t.timeScrubberView=null,t.isPropanelFullScreenOpenedRx=null,t.proPanelOpened=!1,t.disposables=null,t.openLeftPanel=function(e){var t=this;e?(this.container.classList.remove("vg_minimizedLeftPanel"),this.timeControls.style.left="105px",this.timeControls.style.top="auto",this.timeControls.draggable=!1,this.container.classList.remove("vg_cutlistOpened"),this.player.options.playlist&&(this.cutlistFilmstrip.isVisible=!1),this.computePlayerContainerHeight()):(this.container.classList.add("vg_minimizedLeftPanel"),this.timeControls.style.left=this.lastTimecodesPosition.left,this.timeControls.style.top=this.lastTimecodesPosition.top,this.timeControls.draggable=!0),setTimeout(stjs.bind(this,function(){t.filmstripEl.style.width=t.bottomPanel.getBoundingClientRect().width-t.leftPanelEl.getBoundingClientRect().width+"px";try{t.filmstrip.draw()}catch(e){this.player.getLog().error("filmstrip load error")}}),10)},t.init=function(e){if(this.disposables=new Rx.CompositeDisposable,!stjs.isInstanceOf(e.constructor,SkinnedPlayer))throw new RuntimeException("SkinnedPlayer implementation expected");PlayerView.prototype.init.call(this,e),this.audioMutable=this.player.isAudioMutable();var t=this.container.querySelector(".vg_allControls"),n=new ControlsPanelView(this.player,t,this,null);this.volumeRangeEl=n.getVolumeRangeEl(),this.timeControls=n.getTimeControls(),this.muteAllButton=n.getVolumeBtn(),this.fullscreenClickRx=n.getFullscreenClickRx(),this.fullscreenClickRx.subscribe(stjs.bind(this,function(e){this.toggleFullscreen()})),this.controlsPanelView=n,this.initTimeScrubs(t),this.includeProPanel();var i=window.document;this.isPropanelFullScreenOpenedRx=Rx.Observable.merge(Rx.Observable.fromEvent(i,SkinnedPlayerView.WEBKITFULLSCREENCHANGE),Rx.Observable.fromEvent(i,SkinnedPlayerView.MOZFULLSCREENCHANGE),Rx.Observable.fromEvent(i,SkinnedPlayerView.FULLSCREENCHANGE),Rx.Observable.fromEvent(i,SkinnedPlayerView.MS_FULLSCREEN_CHANGE)).map(stjs.bind(this,function(e){return this.container.classList.contains("vg_propane_fullscreen")})),this.disposables.add(this.isPropanelFullScreenOpenedRx.subscribe(stjs.bind(this,function(e){!e&this.proPanelOpened?this.container.classList.add("vg_propane_fullscreen"):this.container.classList.remove("vg_propane_fullscreen")})))},t.initTimeScrubs=function(e){this.timeScrubberView=new TimeScrubberView(this.player,e,this,null);var t=this.timeScrubberView.scrubberEl,n=stjs.bind(this,function(e){this.scrubbing=!0;var n=VGView.offsetX(e.clientX,t),i=this.getSecByMouseX(n,t);this.player.getVideoElement().startQuickSeek(),this.seekSecAndCheckRange(i)}),i=stjs.bind(this,function(e){if(e.stopPropagation(),this.scrubbing){var n=VGView.offsetX(e.clientX,t),i=this.getSecByMouseX(n,t);this.seekSecAndCheckRange(i)}}),r=stjs.bind(this,function(e){this.scrubbing&&(this.scrubbing=!1,this.player.getVideoElement().endQuickSeek())});this.disposables.add(this.timeScrubberView.scrubberDownRx.subscribe(stjs.bind(this,function(e){var n=VGView.offsetX(e.clientX,t),i=this.getSecByMouseX(n,t);this.seekSecAndCheckRange(i),this.scrubberMouseDown=!0}))),this.disposables.add(this.timeScrubberView.scrubberMoveRx.subscribe(stjs.bind(this,function(e){this.scrubberMouseDown&&(this.scrubbing?i(e):n(e))}))),this.disposables.add(this.pluginsPanelRx.subscribe(stjs.bind(this,function(e){this.disposables.add(this.timeScrubberView.scrubberMoveRx.subscribe(function(t){e.overlayMoveRx.onNext(t)})),this.disposables.add(e.overlayDownRx.subscribe(n)),this.disposables.add(e.overlayMoveRx.subscribe(stjs.bind(this,function(e){this.scrubbing&&(i(e),this.timeScrubberView.scrubberMoveRx.onNext(e))})))}))),this.autoDisposable(Rx.Observable.fromEvent(t.ownerDocument,"mouseup").subscribe(stjs.bind(this,function(e){this.scrubberMouseDown=!1,r(e)})))},t.getSecByMouseX=function(e,t){var n=this.player.getSeekableDurationSec(),i=t.clientWidth;return e*n/i},t.includeProPanel=function(){this.container.classList.add("vg_propanelMode");var e=this.container.querySelector(".vg_proPanel");this.controlsPanelView.el.insertAdjacentHTML("beforeend",'<div class="vg_default vg_proPanel__toggle"></div>'),this.proPanelModeRx=Rx.Observable.fromEvent(this.controlsPanelView.el.querySelector(".vg_proPanel__toggle"),"click").map(stjs.bind(this,function(e){this.player.getLog().debug("PRO"),this.player.getLog().debug(e);var t=this.container.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER);return t.classList.contains("hidden")})),this.disposables.add(this.proPanelModeRx.subscribe(stjs.bind(this,function(e){this.proPanelOpened=e;var t=this.container.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER);Utils.isFullScreen()&&e&&this.container.classList.add("vg_propane_fullscreen"),e?t.classList.remove("hidden"):(t.classList.add("hidden"),this.container.classList.remove("vg_propane_fullscreen"))})));var t=Utils.defaultArray(this.player.options.plugins).filter(function(e,t,n){var i=PlayerOptions.PLUGINS.valueOf(e);return i!=PlayerOptions.PLUGINS.filmstrip&&i!=PlayerOptions.PLUGINS.waveform}),n=0!=t.length,i=new PluginsPanelView(this.player,e,n,this,null,this.controlsPanelView.el);this.pluginsPanelRx.onNext(i)},t.captionsAddHandler=function(){throw new RuntimeException("captionsAddHandler TODO")},t.audioAddHandler=function(){throw new RuntimeException("audioAddHandler TODO")},t.createLogo=function(){var e=window.document.createElement("div");e.classList.add("vg_vglogo"),this.container.appendChild(e)},t.createNoSourcePlaceholder=function(){var e=window.document.createElement("div");e.classList.add("vg_noSourcePlaceholder"),e.innerHTML="<p>No movie to play</p>",this.container.appendChild(e)},t.computePlayerContainerHeight=function(){if(this.player.options.playlist){var e=this.container.querySelector(".vg_cutlistPanel").getBoundingClientRect().height;this.playerContainer.style.marginTop=e+"px",this.playerContainer.style.height=this.container.getBoundingClientRect().height-30-e+"px",Integer.parseInt(this.timeControls.style.top)==this.lastCutlistHeight+30&&(this.lastTimecodesPosition.top="40px",this.timeControls.style.top="40px"),Utils.toInt(this.timeControls.offsetTop)<e&&(this.lastTimecodesPosition.top=e+30+"px",this.timeControls.style.top=e+30+"px")}},t.openPlaylistPanel=function(){var e=this;e.container.classList.add("vg_cutlistOpened"),this.cutlistFilmstrip.isVisible=!0,e.videoList.classList.remove("is-shown"),e.captionsList.classList.remove("is-shown"),e.captionsHeader.classList.remove("is-opened"),e.audioViewEl.classList.remove("is-shown"),this.lastCutlistHeight=stjs.trunc(this.container.querySelector(".vg_cutlistPanel").getBoundingClientRect().height),this.computePlayerContainerHeight(),e.openLeftPanel(!1)},t.closePlaylistPanel=function(){var e=this;e.container.classList.remove("vg_cutlistOpened"),this.cutlistFilmstrip.isVisible=!1,e.videoList.classList.remove("is-shown"),e.captionsList.classList.remove("is-shown"),e.captionsHeader.classList.remove("is-opened"),e.audioViewEl.classList.remove("is-shown"),this.computePlayerContainerHeight(),e.openLeftPanel(!1)},t.createProPanel=function(){this.leftPanelEl=window.document.createElement("div"),this.leftPanelEl.innerHTML=VG["templates/player/propanel.html"]({}),this.container.appendChild(this.leftPanelEl)},t.seekFrameAndCheckRange=function(e){this.player.checkRangeAndSeek(e)},t.seekSecAndCheckRange=function(e){this.player.checkRangeAndSeekSec(e)},t.getTime=function(){return this.player.getTimeline()},t.getFrame=function(){return this.player.getCurrentFrame()},t.makeCutlistFilmstrip=function(){this.cutlistFilmstrip=new CutlistFilmstrip(this.player,this.cutlistFilmstripEl,{zoomMode:!0})},t.activateControlsPanel=function(){this.controlsPanelView.activateControlsPanel()},t.deactivateControlsPanel=function(){this.controlsPanelView.deactivateControlsPanel()},t.getCaptionsContainer=function(){return this.video.parentElement},t.initHotkeys=function(){PlayerView.prototype.initHotkeys.call(this),this.hm.addShortcut("down",stjs.bind(this,function(e){this.player.previousSec(1)}),KeyOptions.gd("Player","Next cut",!1)),this.hm.addShortcut("up",stjs.bind(this,function(e){return this.player.nextSec(1)}),KeyOptions.gd("Player","Previous cut",!1)),this.hm.addShortcut(",",stjs.bind(this,function(e){null!=this.shotsView&&this.filmstripEl.classList.contains("vg_shotsOn")&&this.shotsView.seekPrevShot()}),KeyOptions.gd("Player","Prev shot",!1)),this.hm.addShortcut(".",stjs.bind(this,function(e){null!=this.shotsView&&this.filmstripEl.classList.contains("vg_shotsOn")&&this.shotsView.seekNextShot()}),KeyOptions.gd("Player","Next shot",!1))},t.renderFatalError=function(e){var t;t="404"==e?"File you are trying to load was not found.":null==e||stjs.isInstanceOf(e.constructor,String)&&Utils.isNotBlank(e)?e:"Loading failed",this.playerContainer.innerHTML=VG["templates/player/load-error.html"]({message:t})},t.renderRange=function(e,t){null!=this.filmstrip&&(this.filmstrip.setRange(e,t),this.filmstrip.draw())},t.renderWhole=function(){if(null!=this.filmstrip)try{this.filmstrip.clearRange(),this.filmstrip.draw()}catch(e){this.player.getLog().error("filmstrip load error");
}},t.showAsAudioPlayer=function(){this.playerContainer.classList.add("vg_invisible"),this.controlsPanelView.controlsView.fullscreenButton.classList.add("vg_invisible"),Utils.querySelectorNotNull(this.controlsPanelView.el,".vg_controls--addOn").classList.add("vg_invisible"),this.controlsPanelView.timeControlsEl.classList.add("vg_invisible"),this.controlsPanelView.controlsView.playControlsEl.classList.add("vg_audioControls")},t.close=function(){PlayerView.prototype.close.call(this),this.disposables.dispose()}},{controlsPanelView:"ControlsPanelView",pluginsPanelRx:{name:"Rx.ReplaySubject",arguments:["PluginsPanelView"]},playerContainer:"Element",lastTimecodesPosition:"LeftTop",timeControls:"Element",cutlistFilmstrip:"CutlistFilmstrip",filmstripEl:"Element",bottomPanel:"Element",leftPanelEl:"Element",filmstrip:"FilmstripView",volumeRangeEl:"Input",muteAllButton:"Element",proPanelModeRx:{name:"Rx.Observable",arguments:[null]},fullscreenClickRx:{name:"Rx.Observable",arguments:["Element"]},shotsView:"ShotsView",videoList:"Element",captionsList:"Element",captionsHeader:"Element",audioViewEl:"Element",cutlistFilmstripEl:"Element",timeScrubberView:"TimeScrubberView",isPropanelFullScreenOpenedRx:{name:"Rx.Observable",arguments:[null]},disposables:"Rx.CompositeDisposable",player:"PlayerImpl",parentEl:"Element",log:"Log",container:"Element",video:"Video",trickVideo:"Video",hm:"HotkeyManager",playerContainer:"Element",frozenCanvas:"Canvas",fullscreenRx:{name:"Rx.Subject",arguments:[null]},spinner:"Element",autoDisposables:"Rx.CompositeDisposable",DO_NOTHING:{name:"Callback1",arguments:["DOMEvent"]},children:{name:"Array",arguments:["CloseableView"]}},{});var ContexterPlugin=function(){BasePlugin.call(this,ContexterPlugin.PLUGIN_ID)};ContexterPlugin=stjs.extend(ContexterPlugin,BasePlugin,[],function(e,t){e.PLUGIN_ID="contexter",e.PLUGIN_ICON="vg_icon-tag",t.view=null,t.wordsContainer=null,t.detect=null,t.stop=null,t.openInVideoLog=null,t.renderInto=function(e,t,n){var i={};i.player=this.pluginApi,i.wordsContainer=this.wordsContainer,i.containerWidth=t,i.detect=stjs.bind(this,"onDetect"),i.stop=stjs.bind(this,"onStop"),i.openInVideoLog=stjs.bind(this,"onOpenInVideoLog");var r=React.createElement(ContexterComponent,i);this.view=ReactDOM.render(r,e),n()},t.init=function(){this.view.init()},t.setData=function(e){this.view.setData(e)},t.setProgress=function(e){this.view.setProgress(e)},t.setWordsContainer=function(e){this.wordsContainer=e},t.setDetectHandler=function(e){this.detect=e},t.onDetect=function(){null!=this.detect&&this.detect()},t.setStopHandler=function(e){this.stop=e},t.onStop=function(){null!=this.stop&&this.stop()},t.setOpenInVideoLogHandler=function(e){this.openInVideoLog=e},t.onOpenInVideoLog=function(){null!=this.openInVideoLog&&this.openInVideoLog()}},{view:"ContexterComponent",wordsContainer:"Element",detect:"Callback0",stop:"Callback0",openInVideoLog:"Callback0",pluginApi:"VGPlayerPluginApi"},{});var SubsPlugin=function(e){BasePlugin.call(this,SubsPlugin.PLUGIN_ID),e.registerPlugin(this),this.props={},this.props.displayName="SubsPluginView",this.props.name="SubsPlugin",this.props.key="SubsPlugin",this.props.subsRx=this.pluginApi.getCaptionListChangeRx(),this.props.player=this.pluginApi,this.props.captionsControl=this.getSkinnedPlayer().getCaptionControl()};SubsPlugin=stjs.extend(SubsPlugin,BasePlugin,[],function(e,t){e.VG_ICON_CC="vg_icon-cc",e.PLUGIN_ID="subsplugin",t.props=null,t.getProps=function(){return this.props},t.renderInto=function(e,t,n){ReactDOM.render(React.createElement(SubsPluginComponent,this.props),e),n()}},{props:"SubsPluginComponent.SubsPluginProps",pluginApi:"VGPlayerPluginApi"},{});var WaveformView=function(e,t,n,i,r,s,o){VGView.call(this,t,n,i),this.player=e,this.container=n.el,this.render(VG["templates/player/waveform.html"]({trackid:r,trackname:s})),this.waveformEl=this.el.querySelector(".vg_waveform"),this.track=o;var a=new WaveformSettings;a.color="#f4f4f4",a.fillColor="#1DABFD",a.disableRuler=!0,a.twoSides=!0,a.fancy=!0,a.getFrame=function(){return e.getCurrentFrame()},this.waveform=new Waveform(e.http,this.waveformEl,e.getTimeline(),e.getTimelineRx(),o,a,e.getLog()),this.onButton=this.el.querySelector(".vg_audioTrack__on"),this.offButton=this.el.querySelector(".vg_audioTrack__off"),this.onButton.addEventListener("click",stjs.bind(this,function(e){this.enableTrack(!0)})),this.offButton.addEventListener("click",stjs.bind(this,function(e){this.enableTrack(!1)}))};WaveformView=stjs.extend(WaveformView,VGView,[],function(e,t){t.player=null,t.waveformEl=null,t.onButton=null,t.offButton=null,t.waveform=null,t.track=null,t.enableTrack=function(e){this.onButton.classList.remove("vg_enabled"),this.offButton.classList.remove("vg_enabled");for(var t=this.parent,n=t.el.querySelectorAll(".vg_currenttrack"),i=0;i<n.length;i++)n[i].classList.remove("vg_currenttrack");if(e){t.waveforms.forEach(stjs.bind(this,function(e){e.getTrack().id().equals(this.getTrack().id())||e.enableTrack(!1)})),this.player.getCurrentAudioTrack().proxyId!=this.track.proxyId&&this.player.setCurrentAudioTrack(this.track.id());var r=Utils.toInt(this.player.getView().volumeRangeEl.value);0==r&&(this.player.setVolume(Math.max(.5,r/100)),this.player.getView().volumeRangeEl.value=Double.toString(100*this.player.getVolume())),this.onButton.classList.add("vg_enabled"),this.el.classList.add("vg_currenttrack")}else this.offButton.classList.add("vg_enabled"),t.waveforms.length>1&&this.player.muteAudioTrack(this.track.id()),0!=t.el.querySelectorAll(".vg_currenttrack").length&&(this.player.setVolume(0),this.player.getView().volumeRangeEl.value="0")},t.getTrack=function(){return this.track},t.update=function(e){this.waveform.update(e)}},{player:"SkinnedPlayerImpl",waveformEl:"Element",onButton:"Element",offButton:"Element",waveform:"Waveform",track:"PlayerAudioTrack",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var WaveformListView=function(e,t,n,i){VGView.call(this,t,n,i),this.player=e,this.el=VGTemplates.elFromHTML('<div class="vg_waveforms__wrap vg_background"></div>',e.container.ownerDocument),this.el.className="vg_waveforms",this.container.appendChild(this.el),this.appendEl=this.el.querySelector(".vg_waveforms__wrap"),this.waveforms=[],e.audioTracksRx.subscribe(stjs.bind(this,function(t){for(var n=0;n<this.waveforms.length;n++){var r=this.waveforms[n].getTrack().id();if(t.id().equals(r))return}t.channelOffset=0,this.waveforms.push(new WaveformView(e,this.appendEl,this,i,t.id(),t.filename,t))}))};WaveformListView=stjs.extend(WaveformListView,VGView,[],function(e,t){t.player=null,t.appendEl=null,t.waveforms=null,t.update=function(e){for(var t=0;t<this.waveforms.length;t++)this.waveforms[t].update(e)}},{player:"SkinnedPlayerImpl",appendEl:"Element",waveforms:{name:"Array",arguments:["WaveformView"]},el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var WaveFormPlugin=function(e){VGPlugins.call(this,e),e.getView().pluginsPanelRx.subscribe(stjs.bind(this,function(t){this.player.container.classList.add("vg_propanelMode"),this.waveformListView=new WaveformListView(e,t.container,e.getView(),null)})),e.getTimelineRx().debounce(200).subscribe(stjs.bind(this,function(t){e.getLog().debug("getTimelineRx()"),this.waveformListView.update(t)}))};WaveFormPlugin=stjs.extend(WaveFormPlugin,VGPlugins,[],function(e,t){t.waveformListView=null},{waveformListView:"WaveformListView",player:"PlayerImpl",view:"VGView"},{});var SkinnedPlayerImpl=function(e,t){PlayerImpl.call(this,e,t)};SkinnedPlayerImpl=stjs.extend(SkinnedPlayerImpl,PlayerImpl,[SkinnedPlayer],function(e,t){t.captionsControl=null,t.addSelection=null,t.removeSelection=null,t.filmstrip=null,t.selections=null,t.waveform=null,t.videoLog=null,t.createView=function(){var e=new SkinnedPlayerView(this.container,this.getLog());return this.getErrorRx().subscribe(function(t){t.severity==PlayerError.FATAL&&e.renderFatalError(t.message)}),e},t.getView=function(){return this.view},t.setCaptionControl=function(e){this.captionsControl=e},t.getCaptionControl=function(){return this.captionsControl},t.initPlugins=function(e){({model:this,mainView:this.view,serverUrl:this.options.serverUrl});Utils.contains(e,"selections")&&null==this.selections&&(this.selections=new FrameSelections(this),this.pluginRx.onNext(this.selections)),Utils.contains(e,Filmstrip.PLUGIN_ID)&&null==this.filmstrip&&(this.filmstrip=new Filmstrip(this),this.pluginRx.onNext(this.filmstrip)),Utils.contains(e,"waveform")&&null==this.waveform&&(this.waveform=new WaveFormPlugin(this),this.pluginRx.onNext(this.waveform))},t.getOptions=function(){return this.options}},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var RRThemePlayer=function(e,t){SkinnedPlayerImpl.call(this,e,t),this.initRx.subscribe(stjs.bind(this,function(e){var t=this.getView();if(null==t.skin){var n=new SafeAreaPlugin(e);this.getVideoElement().getVideoShownRx().subscribe(stjs.bind(this,function(e){n.applyCrop(this.getVideoElement())})),t.controlsPanelView.enableControl(n.getControlButton()),t.controlsPanelView.enableControl(new StepsView(this,t.playerContainer,t,null)),t.controlsPanelView.enableControl(new SubtitlesMenuControl(this)),t.skin=RRThemePlayer.THEME,this.getLog().info("rr theme enabled")}}))};RRThemePlayer=stjs.extend(RRThemePlayer,SkinnedPlayerImpl,[],function(e,t){e.THEME="rr",e.buildFCPXml=function(e,t,n){var i=JSON.parse(t),r=i.map(function(e,t,n){return LogEvent.fromJson(e)});return VideoLogPlugin.buildFCPXml(e,r,n)}},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var VGThemePlayer=function(e,t){SkinnedPlayerImpl.call(this,e,t),this.iconClick=new Rx.Subject,this.panelDisplay=new Rx.Subject,this.initRx.subscribe(stjs.bind(this,function(e){this.onEveryPlayerInit()})),this.initRx.distinctUntilChanged().subscribe(stjs.bind(this,function(e){this.getLog().debug("distinctUntilChanged",e),this.onDistinctPlayerInit()})),this.iconClick.subscribe(stjs.bind(this,function(e){e!=this.activeAddon&&(this.deactivateAddon(),this.activeAddon=e),this.activeAddon.classList.toggle("active")}))};VGThemePlayer=stjs.extend(VGThemePlayer,SkinnedPlayerImpl,[],function(e,t){e.THEME="vg",t.captionsControl=null,t.cropControl=null,t.deactivateAddon=function(){null!=this.activeAddon&&this.activeAddon.classList.remove("active")},t.activatePanel=function(){this.controlsPanel.classList.add("active"),this.panelDisplay.onNext(!0)},t.deactivatePanel=function(){this.controlsPanel.classList.remove("active"),this.panelDisplay.onNext(!1)},t.hide=function(e){e.classList.add("vg_invisible")},t.show=function(e){e.classList.remove("vg_invisible")},t.toggle=function(e){return e.classList.contains("vg_invisible")?(this.show(e),!0):(this.hide(e),!1)},t.iconClick=null,t.panelDisplay=null,t.activeAddon=null,t.controlsPanel=null,t.onDistinctPlayerInit=function(){this.getView().pluginsPanelRx.subscribe(stjs.bind(this,function(e){this.getLog().debug("pluginpanel ready");var t=({parentView:e,container:e.el,model:this,className:"vgtheme_pro-panel"},new VGThemeProPanelView(e.el,e,"vgtheme_pro-panel"));this.pluginRx.subscribe(stjs.bind(this,function(e){"videolog".equals(e.type)&&(this.getLog().debug("videolog ready"),t.addPluginView())}))}))},t.onEveryPlayerInit=function(){var e=this.getView().controlsPanelView.getControlsContainer(),t=({container:e,mainView:this.view,parentView:this.view,model:this,serverUrl:this.options.serverUrl},this.container.querySelector(".vg_player"));new VideoControl(this),new AudioControl(this),new StepsControl(this),this.cropControl=new CropControl(this);var n=new SafeAreaPlugin(this);n.applyCrop(this.getVideoElement()),this.setCaptionControl(new CaptionsControl(this));var i=({container:t,mainView:this.view,parentView:this.view,model:this,serverUrl:this.options.serverUrl},new TimeControlsBox(this,t,this.view)),r=new DebugInfoBox(this,t,this.view);null!=this.view.hm&&this.view.hm.addShortcut("`",stjs.bind(this,function(e){return this.toggle(r.view.el)}),KeyOptions.gd("Player","Show/hide debug panel",!1));var s=this.getView().controlsPanelView;this.controlsPanel=s.el;var o=null;null!=this.getView().filmstrip&&(o=this.getView().filmstrip.el);var a=s.el.querySelector(".vg_closeLeftPanel"),l=Rx.Observable.fromEvent(a,"click");this.activeAddon=s.el.querySelector(".vg_addonview.active");var u=o;l.subscribe(stjs.bind(this,function(e){this.deactivatePanel(),this.deactivateAddon(),null!=u&&u.classList.toggle("vg_filmstrip--narrow")})),this.iconClick.subscribe(stjs.bind(this,function(e){this.activatePanel(),null!=u&&u.classList.add("vg_filmstrip--narrow")})),this.panelDisplay.subscribe(stjs.bind(this,function(e){var t=i.view.el;e?this.hide(t):this.show(t)}))},t.setCaptionControl=function(e){this.captionsControl=e},t.getCaptionControl=function(){return this.captionsControl},t.getCaptionListChangeRx=function(){return this.captionListChangeRx},t.close=function(){PlayerImpl.prototype.close.call(this),null!=this.cropControl&&this.cropControl.close()}},{captionsControl:"CaptionsControl",cropControl:"CropControl",iconClick:{name:"Rx.Subject",arguments:["Element"]},panelDisplay:{name:"Rx.Subject",arguments:[null]},activeAddon:"Element",controlsPanel:"Element",captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var ABCThemePlayer=function(e,t){SkinnedPlayerImpl.call(this,e,t)};ABCThemePlayer=stjs.extend(ABCThemePlayer,SkinnedPlayerImpl,[],function(e,t){e.THEME="abc"},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var DeltaThemePlayer=function(e,t){SkinnedPlayerImpl.call(this,e,t),this.initRx.subscribe(stjs.bind(this,function(e){null==this.getView().skin&&(this.getView().skin=DeltaThemePlayer.THEME,this.getLog().info(DeltaThemePlayer.THEME+" theme enabled"))}))};DeltaThemePlayer=stjs.extend(DeltaThemePlayer,SkinnedPlayerImpl,[],function(e,t){e.THEME="delta"},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var RequireModuleExposed=function(){};RequireModuleExposed=stjs.extend(RequireModuleExposed,null,[],function(e,t){e.Captions=Captions,e.Player=PlayerImpl,e.RRThemePlayer=RRThemePlayer,e.PlayerMain=PlayerMain,e.ExternalTheme=ExternalTheme,e.LogLevel=LogLevel},{Captions:"Class",Player:"Class",RRThemePlayer:"Class",PlayerMain:"Class",ExternalTheme:"Class",LogLevel:"Class"},{});var Player=function(e,t){VGThemePlayer.THEME.equals(t.theme)?this.player=new VGThemePlayer(e,t):RRThemePlayer.THEME.equals(t.theme)?this.player=new RRThemePlayer(e,t):DeltaThemePlayer.THEME.equals(t.theme)?this.player=new DeltaThemePlayer(e,t):ABCThemePlayer.THEME.equals(t.theme)?this.player=new ABCThemePlayer(e,t):this.player=new PlayerImpl(e,t)};Player=stjs.extend(Player,null,[VGPlayerPublicApi],function(e,t){t.player=null,t.close=function(){this.player.close()},t.addCaptionsHandler=function(e){this.player.addCaptionsHandler(e)},t.audioAddHandler=function(e){this.player.audioAddHandler(e)},t.addCaptions=function(e){this.player.addCaptions(e)},t.load=function(e,t){this.player.load(e,t)},t.loadUrl=function(e,t){this.player.loadUrl(e,t)},t.loadAudioTrack=function(e,t,n){this.player.loadAudioTrack(e,t,n)},t.setAudioTrackUrl=function(e,t,n){this.player.setAudioTrackUrl(e,t,n)},t.conformAudioTrack=function(e,t){this.player.conformAudioTrack(e,t)},t.getAudioTrack=function(e){return this.player.getAudioTrack(e)},t.setCurrentAudioTrack=function(e){this.player.setCurrentAudioTrack(e)},t.addAudioTrack=function(e,t){return this.player.addAudioTrack(e,t)},t.addAudioTrackWithId=function(e,t,n){return this.player.addAudioTrackWithId(e,t,n)},t.muteAudioTrack=function(e){this.player.muteAudioTrack(e)},t.togglePlay=function(){this.player.togglePlay()},t.play=function(){this.player.play()},t.pause=function(){this.player.pause()},t.getTimeline=function(){return this.player.getTimeline()},t.getCurrentTapeTimecode=function(){return this.player.getCurrentTapeTimecode()},t.getCurrentStandardTimecode=function(){return this.player.getCurrentStandardTimecode()},t.getCurrentFrame=function(){return this.player.getCurrentFrame()},t.getCurrentTime=function(){return this.player.getCurrentTime()},t.getCurrentTimeValue=function(){return this.player.getCurrentTimeValue()},t.getCurrentUTCTimestamp=function(){return this.player.getCurrentUTCTimestamp()},t.seekSec=function(e){this.player.seekSec(e)},t.seekUTCTimestamp=function(e){this.player.seekUTCTimestamp(e)},t.seek=function(e){this.player.seek(e)},t.seekFrame=function(e){this.player.seekFrame(e)},t.nextFrame=function(e){this.player.nextFrame(e)},t.previousFrame=function(e){this.player.previousFrame(e)},t.nextSec=function(e){this.player.nextSec(e)},t.previousSec=function(e){this.player.previousSec(e)},t.enterFullscreen=function(){this.player.enterFullscreen()},t.exitFullscreen=function(){this.player.exitFullscreen()},t.setRange=function(e,t){this.player.setRange(e,t)},t.cancelRange=function(){this.player.cancelRange()},t.hasRange=function(){return this.player.hasRange()},t.playAtRate=function(e){this.player.playAtRate(e)},t.playFasterBackwards=function(){this.player.playFasterBackwards()},t.playFaster=function(){this.player.playFaster()},t.setLoop=function(e){this.player.setLoop(e)},t.setPauseOnLoop=function(e){this.player.setPauseOnLoop(e)},t.getPlaybackRate=function(){return this.player.getPlaybackRate()},t.isPlaying=function(){return this.player.isPlaying()},t.getCurrentAudioTrack=function(){return this.player.getCurrentAudioTrack()},t.isAudioMutable=function(){return this.player.isAudioMutable()},t.setVolume=function(e){this.player.setVolume(e)},t.getVolume=function(){return this.player.getVolume()},t.getSeekableDurationSec=function(){return this.player.getSeekableDurationSec()},t.getDurationSec=function(){return this.player.getDurationSec()},t.getTimeSample=function(){return this.player.getTimeSample()},t.setVideoQuality=function(e){this.player.setVideoQuality(e)},t.setStartTapeTimecode=function(e){this.player.setStartTapeTimecode(e)},t.getStartTapeTimecode=function(){return this.player.getStartTapeTimecode()},t.getCaptionsList=function(){return this.player.getCaptionsList()},t.getAudioTracks=function(){return this.player.getAudioTracks()},t.disableHotKeys=function(){this.player.disableHotKeys()},t.enableHotKeys=function(){this.player.enableHotKeys()},t.addEventListener=function(e,t){this.player.addEventListener(e,t)},t.removeEventListener=function(e,t){this.player.removeEventListener(e,t)},t.getFilmStripDrawer=function(e){this.player.getFilmStripDrawer(e)},t.registerPlugin=function(e){this.player.registerPlugin(e)},t.getBuffered=function(){return this.player.getBuffered()},t.setLogLevel=function(e){this.player.setLogLevel(e)},t.isLive=function(){return this.player.isLive()},t.setStartUTCTimestamp=function(e){this.player.setStartUTCTimestamp(e)},t.getStartUTCTimestamp=function(){return this.player.getStartUTCTimestamp()}},{player:"PlayerImpl"},{});var PlayerDev=function(){};PlayerDev=stjs.extend(PlayerDev,null,[],function(e,t){e.SERVER_URL_KOTE="http://kote.videogorillas.com:8042/dash",e.justKoteProxyPlayer=function(e){var t=new PlayerOptions;return t.hotkeys=!0,t.playlist=!1,t.search=!0,t.serverUrl=PlayerDev.SERVER_URL_KOTE,t.plugins=[PlayerOptions.PLUGINS.filmstrip.toString(),PlayerOptions.PLUGINS.waveform.toString()],new Player(e,t)},e.mityaTest=function(){var e=window.document.body;ReactDOM.render(React.createElement(ZoomComponent,null),PlayerDev.createTestContainer(e)),ReactDOM.render(React.createElement(EventComponent,null),PlayerDev.createTestContainer(e))},e.createTestContainer=function(e){var t=window.document.createElement("div");return e.appendChild(window.document.createElement("hr")),e.appendChild(t),t},e.vgVideoLog=function(){console.log("vgVideoLog"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n="http://localhost",i=new Player(t,{hotkeys:!0,playlist:!1,search:!1,serverUrl:n,theme:VGThemePlayer.THEME,plugins:["filmstrip"]});i.loadUrl("http://localhost/qtspec.mov",function(e){if(console.log("loaded",i),Utils.isSomething(e))console.error(e);else{i.setStartTapeTimecode("01:00:00:00");var t=i.getTimeline(),n=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),r=ReactDOM.render(ProPanelComponent.createElement(),n);r.addPlugin(new SubsPlugin(i),SubsPlugin.VG_ICON_CC,function(){});var s=new VideoLog({storage:VideoLogOptions.RAM_STORAGE});i.registerPlugin(s),s.init(function(){console.log("videolog init done"),r.addPlugin(s,VideoLog.PLUGIN_ICON,function(){s.setImportHandler(function(e){return new Http(new Log(LogLevel.DEBUG)).getJson("http://localhost/code/vgplayer/JumpStreet.js",TrackData).subscribe(function(t){var n=t.events;t.events=[];for(var i=0;i<n.length;i++)t.events.push(Utils.cast(LogEvent,n[i]));e([t])},stjs.bind(console,"error"))}),console.log("everything loaded "+t)})})}}),window.PLAYER=i}},e.testCreateDocument=function(){var e=window.document.implementation.createDocument("http://www.w3.org/1999/xhtml","xml",null);console.log(e)},e.vgMain=function(e,t,n){var i=new PlayerOptions;i.hotkeys=!0,i.playlist=!1,i.search=!0,i.serverUrl=n,i.plugins=[PlayerOptions.PLUGINS.filmstrip.toString()],i.theme=VGThemePlayer.THEME;var r=new Player(e,i);return r.load(t,function(e){console.log("player Loaded")}),r},e.testVGThemePlayer=function(){var e=window.document.querySelector(".vgplayer"),t=PlayerDev.vgMain(e,"m3019/v6374",PlayerDev.SERVER_URL_KOTE);return t.loadAudioTrack("m3020/v6379","m3020/v6379",function(e){return console.log("loadAudioTrack",e)}),t},e.testRRThemePlayer=function(e,t,n,i,r,s){var o=window.document.querySelector(".vgplayer"),a=new PlayerOptions;a.hotkeys=!0,a.playlist=!1,a.search=!0,a.serverUrl=t,a.staticVideoSrc=Utils.toBoolean(e),a.plugins=[PlayerOptions.PLUGINS.filmstrip.toString(),PlayerOptions.PLUGINS.waveform.toString()],a.theme=RRThemePlayer.THEME,console.log("player options: ",a,n),console.log("timecodes: ",i,r,s);var l=new RRThemePlayer(o,a);window.player=l;var u=new AddMediaView(VGTemplates.queryByVGPartNumber(window.document.body,AddMediaView.partNumber));return u.onYesNo(function(e){l.loadAudioTrack(u.getVGProxyId(),u.getVGProxyId(),function(e){return console.log("loadAudioTrack",e)}),u.close()},function(e){u.close()}),l.addEventListener("init",function(e){l.getView().controlsPanelView.enableControl(new AddMediaControl(l,function(e){u.open(),console.log("+ addmedia")})),VGCropPlugin.rrEnableCropPlugin(l,function(e,t){var n=window.document.body.querySelector(".vg-cropplugin");n.innerHTML="",e.appendTo(n),n.style.display="block";var i=stjs.trunc(n.offsetWidth/e.frameImage.width)*e.frameImage.height;i>42&&(e.container.style.height=i+"px")})}),l.load(n,function(e){Utils.isNotBlank(i)&&l.setStartTapeTimecode(i),Utils.isNotBlank(r)&&Utils.isNotBlank(s)&&l.setRange(r,s),l.loadAudioTrack("m3205/v7143","m3205/v7143",function(e){return console.log("loadAudioTrack",e)})}),l},e.testLogMain=function(e,t,n,i){window.onload=function(i){var r=window.document.querySelector(".vglog-vgplayer"),s=window.document.querySelector(".vlog"),o=s.closest("html").parentNode,a=new PlayerOptions;
a.hotkeys=!0,a.playlist=!1,a.search=!0,a.serverUrl=e,a.plugins=[PlayerOptions.PLUGINS.filmstrip.toString()],a.theme=RRThemePlayer.THEME;var l=new RRThemePlayer(r,a);window.player=l,l.load(t,function(e){PlayerMain.videolog(l,n,"/api/source/vglogtool/",s,"CoMplIance",function(e){l.enableHotKeysForDocument(o),e.enableHotKeysForDocument(o),e.onHotkeysClicked=function(e){alert("HotKeys!")},e.onCreateSubclipClick=function(e,t){console.log("Subclip store request for ",t)};var t=l.getTimeline();Captions.parseSubs(t,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(e,n){null!=e?console.error(e):(Captions.offsetCaptions(n,t.getTvByTimecode("09:59:50:00"),t),n.title="Czech",l.addCaptionsObject(n))},LogLevel.DEBUG)})})}},e.mymain=function(){console.log("hello"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n="http://localhost/",i=new PlayerImpl(t,{hotkeys:!0,playlist:!1,search:!0,serverUrl:n,plugins:[Filmstrip.PLUGIN_ID,"waveform"]});i.load("taxi42",function(e){if(console.log(i),Utils.isSomething(e))console.error(e);else{var t=i.getTimeline();Captions.parseSubs(t,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(e,n){null!=e?console.error(e):(Captions.offsetCaptions(n,t.getTvByTimecode("09:59:50:00"),t),n.title="Czech",i.addCaptionsObject(n))},LogLevel.DEBUG),console.log("everything loaded "+t)}}),window.PLAYER=i}},e.lenamain=function(){console.log("hello"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n="http://localhost:8042/dash",i=new VGThemePlayer(t,{hotkeys:!0,playlist:!1,search:!0,serverUrl:n,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});i.load("m16/v29",function(e){if(console.log(i),Utils.isSomething(e))console.error(e);else{var t=i.getTimeline();i.addCaptionsHandler(function(){console.log("kuku"),Captions.parseSubs(t,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(e,n){null!=e?console.error(e):(Captions.offsetCaptions(n,t.getTvByTimecode("09:59:50:00"),t),n.title="Czech",i.addCaptions(n))},LogLevel.DEBUG)}),i.audioAddHandler(function(){i.loadAudioTrack("m2725/v5533","1.mp3",function(e){return console.log("loadAudioTrack",e)})}),console.log("everything loaded "+t)}}),window.PLAYER=i}},e.mp4main=function(){var e="http://localhost/vgplayer_ng/pete51a.mp4";console.log("hello"),window.onload=function(t){var n=window.document.querySelector("#playerContainer"),i="http://localhost/",r=new VGThemePlayer(n,{hotkeys:!0,playlist:!1,search:!0,serverUrl:i,staticVideoSrc:!0,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});r.load(e,function(e){if(console.log("loaded",r),r.setStartTapeTimecode("01:00:00:00"),Utils.isSomething(e))console.error(e);else{var t=r.getTimeline(),n=SimpleTimeline.newEndlessTime(t);Captions.parseSubs(n,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(e,i){null!=e?console.error(e):(Captions.offsetCaptions(i,n.getTvByTimecode("09:59:50:00"),t),i.title="Czech",r.addCaptionsObject(i))},LogLevel.DEBUG),console.log("everything loaded "+t)}}),window.PLAYER=r}},e.loadVGHDVideo=function(e,t){return Rx.Observable.create(function(n){var i=new Log(LogLevel.DEBUG);new ProxyLoader(new Http(i),i).dashify(e+t+"/video.mov",function(e,t){null==e?(n.onNext(t),n.onCompleted()):n.onError(e)})})},e.loadVGAudio=function(e,t){return Rx.Observable.create(function(n){var i=new Log(LogLevel.DEBUG);new ProxyLoader(new Http(i),i).loadAudio(e,t,function(e,t){null==e?(n.onNext(t),n.onCompleted()):n.onError(e)})})},e.filmstripmain=function(){console.log("filmstripmain"),window.onload=function(e){var t=window.document.createElement("canvas");t.width=2540,t.height=20,window.document.body.appendChild(t);var n=new Log(LogLevel.DEBUG),i=new Http(n);new ProxyLoader(i,n).dashify("http://chugai.local/code/vgplayer/thumbs/thumbs_g25.mov",function(e,r){var s=new FilmStripDrawer(i,n,new Rx.Subject),o=GenericTimeline.newGenericTime(24e3,1001);o.setDurationSec(6041.035),s.initWithDashStream(r,o,function(e){var n=stjs.trunc(Math.ceil(t.width/(144*t.height/80)));s.drawFilmstrip(t,0,144839,n,!1,function(){return console.log("done drawing filmstrip")},null)})})}},e.conformmain=function(){window.onload=function(e){var t=new Log(LogLevel.DEBUG);new ProxyLoader(new Http(t),t).loadAudioFromMpd("http://localhost/code/vgplayer/tests/pete_rus20/file.mpd").subscribe(function(e){var n=ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION+5120+666,i=15*e.sampleRate,r=n+e.totalSamples+i,s=new ConformedM4sAudioStream(e,n,r,t);DashStreamUtils.createDownloadLink(s);var o=new DynamicDash(null,s,t,new Rx.Subject),a=window.document.querySelector("#media");o.attach(a),window.DASH=o})}},e.chugaimain=function(){console.log("chugaimain"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n="http://localhost/code/vgplayer",i=new Player(t,{hotkeys:!0,serverUrl:n,plugins:[Filmstrip.PLUGIN_ID],theme:RRThemePlayer.THEME,drm:{widevine:{laUrl:"http://widevine-proxy.appspot.com/proxy"},fairplay:{laUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?type=FPS&WVCustomUserToken=34241&WVCustomProductId=1234",certUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?FairPlayCert=true"}},useUTCTimestamp:!0});i.loadUrl(n+"/maleficent/file.mpd",function(e){if(null!=e)return void console.error("player could not load",e);console.log("loaded !!!!!!",i),i.setStartUTCTimestamp("2010-10-10T12:00:00.000Z"),i.setStartTapeTimecode("12:00:00:00");var t=window.document.querySelector("#from"),n=window.document.querySelector("#to"),r=window.document.querySelector("#setrange"),s=window.document.querySelector("#clearrange");r.addEventListener("click",function(e){i.setRange(t.value,n.value),i.setLoop(!0),i.setPauseOnLoop(!0)}),s.addEventListener("click",function(e){i.cancelRange()})}),window.PLAYER=i}},e.mityamain=function(){window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n="http://localhost/player",i=new Player(t,{hotkeys:!0,serverUrl:n,theme:VGThemePlayer.THEME,plugins:[Filmstrip.PLUGIN_ID,SubsPlugin.PLUGIN_ID],preservePlaybackRate:!0});i.loadUrl("http://kote.videogorillas.com/vmir/maleficent/file.mpd",function(e){var t=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),n=ReactDOM.render(ProPanelComponent.createElement(),t),r=new SubsPlugin(i);n.addPlugin(r,SubsPlugin.VG_ICON_CC,function(){});var s=i.getTimeline();Captions.guessSubtitleCodec("http://kote.videogorillas.com/vmir/eng.stl");i.addCaptionsHandler(function(){var e=Captions.guessSubtitleCodec("http://kote.videogorillas.com/vmir/eng.stl");Captions.parseSubs(s,"http://kote.videogorillas.com/vmir/eng.stl",e,function(e,t){return null!=e?void console.error("error parsing subs",e):(t.title="pete_rus",t.id="pete_rus",void i.addCaptions(t))},LogLevel.DEBUG)})}),window.PLAYER=i}},e.mityaLog4=function(){var e={};e.trackId="t100";var t=React.createElement(LogEventComponent,e),n=(React.createElement(HeaderComponent,null),React.createElement(SidePanelComponent,null),React.createElement(ControlsPanelComponent,null),window.document.createElement("div"));n.className="vg-main-container";var i=window.document.createComment("div");i.className="vg-player-wrapper";var r=window.document.createElement("div");r.className="vg-main",r.appendChild(i),n.appendChild(r);var s=window.document.body;s.appendChild(n),ReactDOM.render(t,n)},e.andrewmain=function(){console.log("andrewmain"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n=new Player(t,{hotkeys:!0,playlist:!1,search:!0,serverUrl:"http://kote.videogorillas.com/vmir/dplayer/tests",plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});n.load("http://kote.videogorillas.com/vmir/maleficent/file.mpd",function(e){null!=e?console.error(e):(console.log("Player loaded",n),window.player=n)})}},e.testProPanel=function(){var e=window.document.createElement("div");window.document.body.appendChild(e);var t=new Player(e,{hotkeys:!0,serverUrl:PlayerDev.SERVER_URL_KOTE,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});t.load("m3612/v8478",function(e){console.error(e)})},e.vgthememain=function(){console.log("vgthememain"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n=new Player(t,{hotkeys:!0,playlist:!1,search:!0,plugins:[Filmstrip.PLUGIN_ID,SubsPlugin.PLUGIN_ID],theme:VGThemePlayer.THEME});n.loadUrl("http://kote.videogorillas.com:8042/api/1/storage/m3134/v6953/file.mpd",function(e){if(console.log("loaded",n),Utils.isSomething(e))console.error(e);else{var t=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),i=ReactDOM.render(ProPanelComponent.createElement(),t),r=new SubsPlugin(n);i.addPlugin(r,SubsPlugin.VG_ICON_CC,function(){});var s=n.getTimeline(),o=Captions.guessSubtitleCodec("http://kote.local/storage/clients/giantsource/ShortPeteTong4min/eng.srt");Captions.parseSubs(s,"http://kote.local/storage/clients/giantsource/ShortPeteTong4min/eng.srt",o,function(e,t){return null!=e?void console.error("error parsing subs",e):(t.title="english",t.id="english",void n.addCaptions(t))},LogLevel.DEBUG),n.addCaptionsHandler(function(){var e=Captions.guessSubtitleCodec("http://localhost:9080/tests/captions/pete_rus.srt");Captions.parseSubs(s,"http://localhost:9080/tests/captions/pete_rus.srt",e,function(e,t){return null!=e?void console.error("error parsing subs",e):(t.title="pete_rus",t.id="pete_rus",void n.addCaptions(t))},LogLevel.DEBUG)})}}),window.PLAYER=n}},e.vgMpdMain=function(){console.log("vgMpdMain"),window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n=new Player(t,{hotkeys:!0,playlist:!1,search:!0,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});n.loadUrl("http://localhost/v208/file.mpd",function(e){console.log("loaded",n);var t=n.getTimeline();console.log("everything loaded ",t)}),window.PLAYER=n}},e.contexterMain=function(){window.onload=function(e){var t=window.document.querySelector("#playerContainer"),n=new Player(t,{serverUrl:"http://localhost/code/stjs-DPlayer",hotkeys:!0,theme:VGThemePlayer.THEME});n.load("http://localhost:8042/api/1/storage/m216/v1001/file.mpd",function(e){if(console.log("player loaded",n),Utils.isSomething(e))return void console.error(e);var i=new ContexterPlugin,r=t.querySelector(".vg_player"),s=window.document.createElement("div");null!=r&&(r.appendChild(s),i.setWordsContainer(s)),i.setDetectHandler(function(){i.setProgress(0),Rx.Observable.from([25,50,75,100]).concatMap(function(e){return Rx.Observable.just(e).delay(3e3)}).concatMap(function(e){console.log((new Date).toISOString(),"start load contexter data");var t=new Log(LogLevel.DEBUG);return new Http(t).get("http://localhost:8042/api/1/storage/m8/v54/words.js").doOnNext(function(t){var n=JSON.parse(t);console.log("loaded frames from contexter",n.length),console.log((new Date).toISOString(),"contexter data parsed"),n=n.slice(0,stjs.trunc(n.length*e/100));var r=ContexterData.create(n);console.log((new Date).toISOString(),"contexter data processed"),i.setProgress(e),i.setData(r)})}).subscribe()}),i.setStopHandler(function(){return console.log("STOP pressed")}),n.registerPlugin(i);var o=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),a=ReactDOM.render(ProPanelComponent.createElement(),o);a.addPlugin(i,ContexterPlugin.PLUGIN_ICON,function(){i.init()})}),window.PLAYER=n}}},{},{}),window.VG={Player:Player,Captions:Captions,TapeTimecode:TapeTimecode,LogLevel:LogLevel},window.VG.Player._debug={PlayerMain:PlayerMain,PlayerDev:PlayerDev},window.VG.Player._internal={TimelineUtil:TimelineUtil,PlayerOptions:PlayerOptions,VideoLog:VideoLog,VideoLogOptions:VideoLogOptions,ViewConsts:ViewConsts,ProPanelComponent:ProPanelComponent,SubsPlugin:SubsPlugin,ContexterPlugin:ContexterPlugin},module.exports=window.VG,window.VG.Player.buildNumber="1498";var Infinite=__webpack_require__(171),VG={};VG["templates/videotrack.html"]=function(e){var t="";_.escape;return t+='<div class="vg_videoTrack vg_addon">\n    <div class="vg_littlePlayButton vg_addon__left vg_info"><span class="vg_addon__icon vg_icon-vgplay"></span></div>\n    <div class="vg_currentVideoInfo vg_addon__right">\n        <div class="vg_videoTrack__img">\n            <canvas class="vg_videoTrack__canvas" width="150" height="30"></canvas>\n        </div>\n    </div>\n</div>'},VG["templates/vgtheme_videolog_plugin.html"]=function(e){var t,n="";_.escape;return n+='<div class="'+(null==(t=e.pluginClass)?"":t)+'__view">\n    <div class="'+(null==(t=e.pluginClass)?"":t)+'__header">\n        <div class="'+(null==(t=e.pluginClass)?"":t)+'__info vg_info">\n            <div class="'+(null==(t=e.pluginClass)?"":t)+'__name">\n                <span>'+(null==(t=e.header.name)?"":t)+'</span>\n            </div>\n            <div class="'+(null==(t=e.header.cssClass)?"":t)+' vg_default">\n\n            </div>\n        </div>\n        <div class="'+(null==(t=e.pluginClass)?"":t)+'__right">\n            <div class="'+(null==(t=e.pluginClass)?"":t)+'__zoom">\n                <span class="'+(null==(t=e.pluginClass)?"":t)+'-zoom-min"></span>\n\n                <div class="'+(null==(t=e.pluginClass)?"":t)+'-range">\n                    <span class="'+(null==(t=e.pluginClass)?"":t)+'-range__point--0"></span>\n                    <span class="'+(null==(t=e.pluginClass)?"":t)+'-range__point--20"></span>\n                    <span class="'+(null==(t=e.pluginClass)?"":t)+'-range__point--40"></span>\n                    <span class="'+(null==(t=e.pluginClass)?"":t)+'-range__point--60"></span>\n                    <span class="'+(null==(t=e.pluginClass)?"":t)+'-range__point--80"></span>\n                    <span class="'+(null==(t=e.pluginClass)?"":t)+'-range__point--100"></span>\n                    <input type="range" class="vg_vertical-range '+(null==(t=e.pluginClass)?"":t)+'-range__input"/>\n                </div>\n                <span class="'+(null==(t=e.pluginClass)?"":t)+'-zoom-max"></span>\n            </div>\n        </div>\n\n        <div class="'+(null==(t=e.pluginClass)?"":t)+'__controls">\n            <div class="'+(null==(t=e.pluginClass)?"":t)+'__controls--new vg_primary">\n                <span>'+(null==(t=e.controls.create)?"":t)+'</span>\n            </div>\n            <div class="'+(null==(t=e.pluginClass)?"":t)+'__controls--details">\n                <span>'+(null==(t=e.controls.details)?"":t)+'</span>\n            </div>\n        </div>\n\n    </div>\n    <div class="'+(null==(t=e.pluginClass)?"":t)+'__content"></div>\n</div>'},VG["templates/vg_addon-control.html"]=function(e){var t,n="";_.escape;return n+='<div class="vg_addon vg_addon__header">\n    <div class="vg_addon__left vg_default">\n        <i class="vg_addon__icon '+(null==(t=e.iconClass)?"":t)+'"></i>\n    </div>\n    <div class="vg_addon__right '+(null==(t=e.tracksClass+"__info")?"":t)+'">\n        <span class="vg_headerText vg_info">'+(null==(t=e.header)?"":t)+'</span>\n\n        <span class="vg_tracksInfo vg_default"></span>\n    </div>\n</div>\n<div class="vg_addon vg_addon__list vg_default-bg '+(null==(t=e.tracksClass)?"":t)+'"></div>\n'},VG["templates/timecontrolsbox.html"]=function(e){var t="";_.escape;return t+='<div class="vg_aligner vg_info">\n    <div class="vg_timecode vg_timecode_standard">\n        <div class="vg_time_controls_box__label">TIMECODE</div>\n        <input type="text" class="vg_timecode__value vg_standard_time"></div>\n</div>\n<div class="vg_aligner vg_info">\n    <div class="vg_timecode vg_timecode_tape">\n        <div class="vg_time_controls_box__label vg_ndftc_header">TAPE</div>\n        <input type="text" class="vg_timecode__value vg_ndftc_time"></div>\n</div>\n<div class="vg_aligner vg_info">\n    <div class="vg_timecode vg_timecode_frame">\n        <div class="vg_time_controls_box__label vg_frame_number_header vg_timecode__label">FRAME</div>\n        <input type="text" class="vg_timecode__value vg_frame_number"></div>\n</div>\n'},VG["templates/theme_propanel.html"]=function(e){var t="";_.escape;return t+='<div class="vgtheme_pro-panel__left vg_panel-bg">\n    <div class="vgtheme_pro-panel__plugin-icons vg_default">\n\n    </div>\n</div>\n<div class="vgtheme_pro-panel__right vg_default-bg vg_default">\n    <div class="vgtheme_pro-panel__plugin-views"></div>\n</div>'},VG["templates/theme_plugin.html"]=function(e){var t,n="";_.escape;return n+='<div class="'+(null==(t=e.pluginClass)?"":t)+'__view"></div>'},VG["templates/player/waveform.html"]=function(e){var t,n="";_.escape;return n+='<div class="vg_waveform__wrap vg_proPanel__wrap" id="#waveform'+(null==(t=e.trackid)?"":t)+'">\n    <div class="vg_proPanel__left vg_waveform__left">\n        <div class="vg_audioTrackName">'+(null==(t=e.trackname)?"":t)+'</div>\n        <div class="vg_audioTrackControlls">\n            <div class="vg_audioTrack__on">on</div>/<div class="vg_audioTrack__off">off</div>\n        </div>\n    </div>\n    <div class="vg_proPanel__right vg_waveform"></div>\n</div>'},VG["templates/player/safe-area-item.html"]=function(e){var t="",n=_.escape;return t+='<div class="pipka pipka-'+n(e.color)+'"></div><span class="vg_ddown_hover__list-item__label vg_info view-item" itemId="'+n(e.item.id)+'">'+n(e.item.title)+"</span>"},VG["templates/player/image-capture.html"]=function(e){var t="";_.escape;return t+='<div class="vg-image-capture_header">\n    <span>Image Capture</span>\n    <i class="vg-image-capture_close vg_icon-x"></i>\n</div>\n<div class="vg-image-capture_content">\n    <div class="vg-image-capture_image-section"></div>\n    <input class="vg-image-capture_input" placeholder="File name" type="text"/>\n    <div class="vg-image-capture_actions">\n        <a class="vg-image-capture_cancel-button vg-image-capture_button">Cancel</a>\n        <a class="vg-image-capture_save-button vg-image-capture_button">Save & Download</a>\n    </div>\n</div>'},VG["templates/player/ddown.html"]=function(e){var t,n="";_.escape,Array.prototype.join;return e.title&&(n+='\n<div class="'+(null==(t=e.className)?"":t)+'__title vg_default">\n    <span class="vg_info">'+(null==(t=e.title)?"":t)+"</span>\n</div>\n"),n+='\n\n<ul class="'+(null==(t=e.className)?"":t)+'__list">\n</ul>\n'},VG["templates/player/ddown-item.html"]=function(e){var t,n="",i=_.escape;return n+='<span class="'+(null==(t=e.className)?"":t)+'__radio"></span>\n<span class="'+(null==(t=e.className)?"":t)+'__label vg_info view-item" itemId="'+i(e.item.id)+'">'+i(e.item.title)+"</span>"},VG["templates/player/crop-plugin.html"]=function(e){var t="";_.escape;return t+='<div class="vg-crop-container">\n    <div class="crop-mask">\n        <div class="pipka tl"></div>\n        <div class="pipka tm"></div>\n        <div class="pipka tr"></div>\n        <div class="pipka ml"></div>\n        <div class="pipka mr"></div>\n        <div class="pipka bl"></div>\n        <div class="pipka bm"></div>\n        <div class="pipka br"></div>\n    </div>\n    <img class="crop-frame" src="">\n</div>'},VG["templates/player/addon-control.html"]=function(e){var t,n="";_.escape;return n+='<div id="'+(null==(t=e.id)?"":t)+'" class="vg_iconControls__item vg_ddown vg_info">\n    <span class="'+(null==(t=e.iconClass)?"":t)+'"></span>\n</div>'},VG["templates/logevent.html"]=function(e){var t,n="";_.escape;return n+='<div class="'+(null==(t=e.className)?"":t)+'__details">\n    <div class="'+(null==(t=e.className)?"":t)+'__tags">\n        <span class="vg_info '+(null==(t=e.className)?"":t)+'__tag-name">'+(null==(t=e.tag)?"":t)+'</span>\n        <span class="vg_default '+(null==(t=e.className)?"":t)+'__tag-times">'+(null==(t=e.startTv)?"":t)+" - "+(null==(t=e.endTv)?"":t)+'</span>\n    </div>\n    <div class="'+(null==(t=e.className)?"":t)+'__duration vg_default"><span></span><span>'+(null==(t=e.duration)?"":t)+'</span></div>\n</div>\n<div class="'+(null==(t=e.className)?"":t)+"__tracks "+(null==(t=e.className)?"":t)+"__"+(null==(t=e.tag)?"":t)+'">\n    <div class="'+(null==(t=e.className)?"":t)+'__canvas" style="width: '+(null==(t=e.width)?"":t)+"; left:"+(null==(t=e.left)?"":t)+';">\n        <canvas></canvas>\n    </div>\n</div>'},VG["templates/ddown.html"]=function(e){var t="";_.escape;return t+='<div class="vgtheme__ddown">\n    <span class="vgtheme__ddown-toggler">\n\n        <ul class="vgtheme__ddown-list">\n            <li class="vgtheme__ddown-list__header"></li>\n        </ul>\n    </span>\n    <span class="vgtheme__ddown-selected"></span>\n</div>'},VG["templates/captionsearch.html"]=function(e){var t="";_.escape;return t+='<div class="vg_captionSearch vg_default">\n    <div class="vg_addon">\n        <div class="vg_addon__left">\n            <span class="vg_addon__icon vg_captionSearchButton"></span>\n        </div>\n        <div class="vg_addon__right">\n            <form class="vg_captionSearchForm"><input class="vg_captionSearchField" type="text"></form>\n        </div>\n    </div>\n\n</div>'},VG["templates/captionNew.html"]=function(e){var t="";_.escape;return t+='<div id="wrap-captions">\n    <div class="captions-header">\n        <div class="caption-row">\n            <div class="captions-header__left">\n                <div class="captions-header__left_title">\n                    CAPTIONS\n                </div>\n                <div class="captions-header__left_countFiles">\n                    5 Files\n                </div>\n                <div class="vgCaption__plusButton vgtheme_control-plus"></div>\n            </div>\n            <div class="captions-header__right caption-search__active">\n                <span class="vg_icon-search"></span>\n                <input type="search" placeholder="Search...">\n            </div>\n        </div>\n    </div>\n    <div class="captions-main">\n        <ul class="captions-main__list">\n            <li class="captions-main__list__item">\n                <div class="caption-row">\n                <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                    </div>\n                </div>\n            </li>\n\n            <li class="captions-main__list__item caption-row__active">\n                <div class="caption-row">\n                <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name find-match">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:02:25\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:03:30\n                    </span>\n                    </div>\n                    <div class="swift-timecode">\n                        <span class="swift-timecode__name">\n                            swift timecodes\n                        </span>\n                        <div class="swift-timecode__time">\n                            <span class="swift_timecode__from">\n                                00:00:22:01\n                            </span>\n                            <span>\n                                to\n                            </span>\n                            <div class="caption-time">\n                                <span class="caption-time_from">\n                                    00:00:02:25\n                                </span>\n                                <span class="caption-time_divider">\n                                    --\n                                </span>\n                                <span class="caption-time_to">\n                                    00:00:03:30\n                                </span>\n                            </div>\n                        </div>\n                        <div class="vgCaption__swiftButton"></div>\n                    </div>\n\n                </div>\n            </li>\n\n            <li class="captions-main__list__item caption-row__expand\n            ">\n                <div class="caption-row caption-row__find-match__ct">\n                    <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name captions-name__inActive">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                    </div>\n                </div>\n\n                <ul class="caption-subtitle-list">\n                    <li class="caption-subtitle-list__subItem caption-subRow__find-match__ct">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur <span class="find-match__inWord">adipisicing elit</span>. Voluptas, voluptates?\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur <span class="find-match__inWord">adipisicing elit. Voluptas, voluptates?</span>\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from caption-time_red">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to caption-time_red">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas, voluptates?\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas, voluptates?\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas, voluptates?\n                        </p>\n                    </li>\n                </ul>\n            </li>\n\n            <li class="captions-main__list__item">\n                <div class="caption-row">\n                <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                    </div>\n                </div>\n            </li>\n\n        </ul>\n    </div>\n\n</div>'},VG["templates/caption.html"]=function(e){var t,n="";_.escape;return n+='<div class="vg_caption vg_default">\n    <div class="vg_addon vg_caption__item">\n        <div class="vg_addon__left">\n            <span class="vg_addon__icon vg_caption__switch"></span>\n        </div>\n        <div class="vg_caption__info vg_addon__right">\n            <span class="vg-controls__label vg_caption__label vg_info">'+(null==(t=e.caption.title||e.caption.displayName)?"":t)+"</span>\n        </div>\n    </div>\n</div>"},VG["templates/audiotrack.html"]=function(e){var t,n="",i=_.escape;Array.prototype.join;return n+='<div class="vg_audioTrack" data-trackProxy="'+(null==(t=e.track.proxyId)?"":t)+'">\n    ',e.track.filename&&(n+='\n    <div class="vg_audioTrackName vg_addon" title="'+(null==(t=e.track.filename)?"":t)+'">\n        <span class="vg_info">'+(null==(t=e.track.filename)?"":t)+"</span>\n    </div>\n    "),n+="\n    ",_.forEach(e.channels,function(r,s){n+='\n\n    <div class="vg_addon vg_audioTrack__channel ',r.muted&&(n+="vg_muted"),n+='"\n         id="track-'+i(e.track.proxyId)+"_channel-"+i(s)+'" data-track="'+i(e.track.proxyId)+'" data-channel="'+i(s)+'">\n        <div class="vg_volumeIcon vg_info vg_addon__left">\n            <span class="vg_addon__icon vg_icon-vgvolume"></span>\n        </div>\n        <div class="vg_currentAudioInfo vg_addon__right">\n            <span class="vg-controls__label vg_audioTrack__label vg_info">'+i(r.label||"undefined")+'</span>\n\n            <div class="vg_waveformIcon hello">\n                ',"VG"==e.proxyType&&(n+='\n                    <img style="width:'+(null==(t=e.width)?"":t)+';" src="'+(null==(t=r.waveformPngUrl)?"":t)+'">\n                '),n+="\n            </div>\n        </div>\n    </div>\n    ";
}),n+="\n</div>"},VG["templates/player/timescrubber.html"]=function(e){var t,n="";_.escape;return n+='<div class="vg_proPanel__left vg_background"></div>\n<div class="vg_timescrubber__wrap vg_background">\n    <div class="vg_timevalues vg_default">\n        <div class="vg_timevalues__item">\n            <span class="vg_current-time">00:00:00</span>\n        </div>\n        <div class="vg_timevalues__item">\n            <span class="vg_duration-time">'+(null==(t=e.duration)?"":t)+'</span>\n        </div>\n    </div>\n    <div class="vg_scrubber">\n        <div class="vg_scrubber__wrap vg_default-bg">\n            <div class="vg_scrubber__buffered"></div>\n            <div class="vg_scrubber__played vg_primary-bg">\n                <div class="vg_handle vg_info-bg"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},VG["templates/player/timecontrols.html"]=function(e){var t="";_.escape;return t+='<div class="vg_iconControls">\n    <div class="vg_iconControls__item">\n        <span class="vg_icon-clock vg_default"></span>\n    </div>\n    <div class="vg_iconControls__item">\n        <div class="vg_timecode vg_vertical-rule vg_timecode_standard">\n            <span class="vg_timecode__label vg_standard_header vg_default">Standard</span>\n            <input type="text" class="vg_timecode__value vg_standard_time vg_info">\n        </div>\n    </div>\n    <div class="vg_iconControls__item">\n        <div class="vg_timecode vg_vertical-rule vg_timecode_tape">\n            <span class="vg_timecode__label vg_ndftc_header vg_default">Tape</span>\n            <input type="text" class="vg_timecode__value vg_ndftc_time vg_info">\n        </div>\n    </div>\n    <div class="vg_iconControls__item">\n        <div class="vg_timecode vg_timecode_frame">\n            <span class="vg_timecode__label vg_frame_number_header vg_timecode__label vg_default">Frames</span>\n            <input type="text" class="vg_timecode__value vg_frame_number vg_info">\n        </div>\n    </div>\n</div>\n'},VG["templates/player/selections.html"]=function(e){var t,n="";_.escape;return n+='<div class="vg_selection vg_info" style="width:'+(null==(t=e.width)?"":t)+";left:"+(null==(t=e.left)?"":t)+';">\n    <span class="vg_selection__start">'+(null==(t=e.startHhmmss)?"":t)+'</span>\n    <span class="vg_selection__end">'+(null==(t=e.endHhmmss)?"":t)+"</span>\n</div>\n"},VG["templates/player/propanel.html"]=function(e){var t="";_.escape;return t+='<div class="vg_proPanel__overlay">\n    <div class="vg_proPanel__scrubtrack"></div>\n</div>\n'},VG["templates/player/my.html"]=function(e){var t="";_.escape;return t+="global"},VG["templates/player/main.html"]=function(e){var t="";_.escape;return t+='<div class="vg_embed-container">\n    <div class="vg_player embed-responsive embed-responsive-80 vg_background">\n        <div class="vg_loading-spinner vg_invisible"></div>\n        <video class="embed-responsive-item vg_player_opacity_0" type="hires+audio"\n               src=""></video>\n        <video class="embed-responsive-item vg_player_opacity_1" type="lowres"\n               src=""></video>\n\n    </div>\n<div class="vg_allControls"></div>\n</div>\n<div class="vg_proPanel vg_background"></div>\n    <!--<div class="vg_vglogo"></div>-->\n<!--<div class="vg_captionText"></div>-->\n\n'},VG["templates/player/load-error.html"]=function(e){var t,n="";_.escape,Array.prototype.join;return n+='<div class="vg_error">\n    <div class="vg_error__icon vg_info">\n        <span class="vg_icon-broken_video"></span>\n    </div>\n    <div class="vg_error__message vg_info">\n        <h3 class="vg_error__heading">That\'s unexpected</h3>\n\n        <div class="vg_error__body">\n            ',n+=e.message?"\n                <p>"+(null==(t=e.message)?"":t)+"</p>\n            ":"\n                <p>Something wrong has happened preventing player from loading and opening files.</p>\n                <p>We expect the next try to bring more success!</p>\n            ",n+="\n        </div>\n    </div>\n\n</div>"},VG["templates/player/filmstrip.html"]=function(e){var t="";_.escape;return t+='<div class="vg_proPanel__wrap">\n    <div class="vg_proPanel__left"></div>\n    <div class="vg_proPanel__right">\n        <div class="vg_filmstrip__container">\n            <canvas class="vg_filmstrip__canvas"></canvas>\n        </div>\n    </div>\n</div>'},VG["templates/player/controls.html"]=function(e){var t="";_.escape;return t+='<div class="vg_controlls">\n    <div class="vg_playControls">\n        <div class="vg_iconControls vg_info">\n            <div class="vg_playBackButton vg_iconControls__item"><span\n                    class="vg_icon-playbackward vg_default"></span>\n            </div>\n            <div class="vg_playPauseButton vg_iconControls__item vg_default"><span\n                    class="vg_icon-play"></span></div>\n            <div class="vg_playFasterButton vg_iconControls__item"><span\n                    class="vg_icon-playforward vg_default"></span>\n            </div>\n        </div>\n    </div>\n    <div class="vg_time_controls vg_info">\n\n    </div>\n\n    <div class="vg_volumeScreenControls">\n        <div class="vg_iconControls vg_controls--addOn vg_vertical-rule">\n\n        </div>\n        <div class="vg_iconControls">\n\n            <div class="vg_iconControls__item vg_ddown--hover vg_default">\n                <span class="vg_volume vg_icon-volume "></span>\n\n\n                <div class="vg_ddown__content vg_background vg_primary">\n                    <div class="vg_vertical-range">\n                        <input class="vg_vertical-inputrange" type="range" min="0" max="100" step="1">\n                    </div>\n                </div>\n\n            </div>\n\n            <div class="vg_fullScreen vg_iconControls__item">\n                <span class="vg_icon-fullscreen vg_default"></span>\n            </div>\n        </div>\n    </div>\n</div>\n'}},function(e,t,n){var i;(function(e,r){(function(){function s(e,t){return e.push.apply(e,t),e}function o(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function a(e){return function(t){return null==t?it:t[e]}}function l(e){return function(t){return null==e?it:e[t]}}function u(e,t,n,i,r){return r(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function c(e,t){return P(t,function(t){return e[t]})}function d(e,t){return function(n){return e(t(n))}}function p(e){return e instanceof h?e:new h(e)}function h(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t}function f(e,t,n){var i=e[t];Nt.call(e,t)&&ke(i,n)&&(n!==it||t in e)||m(e,t,n)}function m(e,t,n){e[t]=n}function g(e,t,n){if("function"!=typeof e)throw new TypeError(st);return setTimeout(function(){e.apply(it,n)},t)}function v(e,t){var n=!0;return Wt(e,function(e,i,r){return n=!!t(e,i,r)}),n}function b(e,t,n){for(var i=-1,r=e.length;++i<r;){var s=e[i],o=t(s);if(null!=o&&(a===it?o===o&&!0:n(o,a)))var a=o,l=s}return l}function y(e,t){var n=[];return Wt(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function w(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=J),r||(r=[]);++o<a;){var l=e[o];t>0&&n(l)?t>1?w(l,t-1,n,i,r):s(r,l):i||(r[r.length]=l)}return r}function _(e,t){return e&&zt(e,t,cn)}function C(e,t){return y(t,function(t){return Me(e[t])})}function S(e){return ee(e)}function E(e,t){return e>t}function T(e){return Le(e)&&S(e)==gt}function x(e,t,n,i,r){return e===t||(null==e||null==t||!Le(e)&&!Le(t)?e!==e&&t!==t:k(e,t,n,i,x,r))}function k(e,t,n,i,r,s){var o=en(e),a=en(t),l=o?ht:S(e),u=a?ht:S(t);l=l==pt?_t:l,u=u==pt?_t:u;var c=l==_t,d=u==_t,p=l==u;s||(s=[]);var h=Xt(s,function(t){return t[0]==e}),f=Xt(s,function(e){return e[0]==t});if(h&&f)return h[1]==t;if(s.push([e,t]),s.push([t,e]),p&&!c){var m=o?Y(e,t,n,i,r,s):X(e,t,l,n,i,r,s);return s.pop(),m}if(!(n&ot)){var g=c&&Nt.call(e,"__wrapped__"),v=d&&Nt.call(t,"__wrapped__");if(g||v){var b=g?e.value():e,y=v?t.value():t,m=r(b,y,n,i,s);return s.pop(),m}}if(!p)return!1;var m=Q(e,t,n,i,r,s);return s.pop(),m}function R(e){return Le(e)&&S(e)==St}function D(e){return"function"==typeof e?e:null==e?Xe:("object"==typeof e?I:a)(e)}function A(e,t){return e<t}function P(e,t){var n=-1,i=Re(e)?Array(e.length):[];return Wt(e,function(e,r,s){i[++n]=t(e,r,s)}),i}function I(e){var t=Ht(e);return function(n){var i=t.length;if(null==n)return!i;for(n=Object(n);i--;){var r=t[i];if(!(r in n&&x(e[r],n[r],ot|at)))return!1}return!0}}function M(e,t){return e=Object(e),ye(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function O(e,t){return Yt(te(e,t,Xe),e+"")}function N(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=e[i+t];return s}function L(e){return N(e,0,e.length)}function F(e,t){var n;return Wt(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function V(e,t){var n=e;return ye(t,function(e,t){return t.func.apply(t.thisArg,s([e],t.args))},n)}function B(e,t){if(e!==t){var n=e!==it,i=null===e,r=e===e,s=!1,o=t!==it,a=null===t,l=t===t,u=!1;if(!a&&!u&&!s&&e>t||s&&o&&l&&!a&&!u||i&&o&&l||!n&&l||!r)return 1;if(!i&&!s&&!u&&e<t||u&&n&&r&&!i&&!s||a&&n&&r||!o&&r||!l)return-1}return 0}function U(e,t,n,i){var r=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(n[a],e[a],a,n,e):it;l===it&&(l=e[a]),r?m(n,a,l):f(n,a,l)}return n}function j(e){return O(function(t,n){var i=-1,r=n.length,s=r>1?n[r-1]:it;for(s=e.length>3&&"function"==typeof s?(r--,s):it,t=Object(t);++i<r;){var o=n[i];o&&e(t,o,i,s)}return t})}function H(e,t){return function(n,i){if(null==n)return n;if(!Re(n))return e(n,i);for(var r=n.length,s=t?r:-1,o=Object(n);(t?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}function G(e){return function(t,n,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[e?a:++r];if(n(s[l],l,s)===!1)break}return t}}function q(e){return function(){var t=arguments,n=qt(e.prototype),i=e.apply(n,t);return Ne(i)?i:n}}function W(e){return function(t,n,i){var r=Object(t);if(!Re(t)){var s=D(n,3);t=cn(t),n=function(e){return s(r[e],e,r)}}var o=e(t,n,i);return o>-1?r[s?t[o]:o]:it}}function z(e,t,n,i){function r(){for(var t=-1,a=arguments.length,l=-1,u=i.length,c=Array(u+a),d=this&&this!==At&&this instanceof r?o:e;++l<u;)c[l]=i[l];for(;a--;)c[l++]=arguments[++t];return d.apply(s?n:this,c)}if("function"!=typeof e)throw new TypeError(st);var s=t&lt,o=q(e);return r}function K(e,t,n,i){return e===it||ke(e,Ot[n])&&!Nt.call(i,n)?t:e}function Y(e,t,n,i,r,s){var o=n&ot,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;for(var u=-1,c=!0,d=n&at?[]:it;++u<a;){var p,h=e[u],f=t[u];if(p!==it){if(p)continue;c=!1;break}if(d){if(!F(t,function(e,t){if(!le(d,t)&&(h===e||r(h,e,n,i,s)))return d.push(t)})){c=!1;break}}else if(h!==f&&!r(h,f,n,i,s)){c=!1;break}}return c}function X(e,t,n,i,r,s,o){switch(n){case mt:case gt:case wt:return ke(+e,+t);case vt:return e.name==t.name&&e.message==t.message;case St:case Et:return e==t+""}return!1}function Q(e,t,n,i,r,s){var o=n&ot,a=cn(e),l=a.length,u=cn(t),c=u.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var p=a[d];if(!(o?p in t:Nt.call(t,p)))return!1}for(var h=!0,f=o;++d<l;){p=a[d];var m,g=e[p],v=t[p];if(!(m===it?g===v||r(g,v,n,i,s):m)){h=!1;break}f||(f="constructor"==p)}if(h&&!f){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(h=!1)}return h}function $(e){return Yt(te(e,it,se),e+"")}function J(e){return en(e)||Zt(e)}function Z(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function ee(e){return Ft.call(e)}function te(e,t,n){return t=Gt(t===it?e.length-1:t,0),function(){for(var i=arguments,r=-1,s=Gt(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(o),e.apply(this,a)}}function ne(e){return y(e,Boolean)}function ie(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return s(en(n)?L(n):[n],w(t,1))}function re(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:rn(n);return r<0&&(r=Gt(i+r,0)),o(e,D(t,3),r)}function se(e){var t=null==e?0:e.length;return t?w(e,1):[]}function oe(e){var t=null==e?0:e.length;return t?w(e,ct):[]}function ae(e){return e&&e.length?e[0]:it}function le(e,t,n){var i=null==e?0:e.length;n="number"==typeof n?n<0?Gt(i+n,0):n:0;for(var r=(n||0)-1,s=t===t;++r<i;){var o=e[r];if(s?o===t:o!==o)return r}return-1}function ue(e){var t=null==e?0:e.length;return t?e[t-1]:it}function ce(e,t,n){var i=null==e?0:e.length;return t=null==t?0:+t,n=n===it?i:+n,i?N(e,t,n):[]}function de(e){var t=p(e);return t.__chain__=!0,t}function pe(e,t){return t(e),e}function he(e,t){return t(e)}function fe(){return V(this.__wrapped__,this.__actions__)}function me(e,t,n){return t=n?it:t,v(e,D(t))}function ge(e,t){return y(e,D(t))}function ve(e,t){return Wt(e,D(t))}function be(e,t){return P(e,D(t))}function ye(e,t,n){return u(e,D(t),n,arguments.length<3,Wt)}function we(e){return null==e?0:(e=Re(e)?e:Ht(e),e.length)}function _e(e,t,n){return t=n?it:t,F(e,D(t))}function Ce(e,t){var n=0;return t=D(t),P(P(e,function(e,i,r){return{value:e,index:n++,criteria:t(e,i,r)}}).sort(function(e,t){return B(e.criteria,t.criteria)||e.index-t.index}),a("value"))}function Se(e,t){var n;if("function"!=typeof t)throw new TypeError(st);return e=rn(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=it),n}}function Ee(e){if("function"!=typeof e)throw new TypeError(st);return function(){var t=arguments;return!e.apply(this,t)}}function Te(e){return Se(2,e)}function xe(e){return Ne(e)?en(e)?L(e):U(e,Ht(e)):e}function ke(e,t){return e===t||e!==e&&t!==t}function Re(e){return null!=e&&Oe(e.length)&&!Me(e)}function De(e){return e===!0||e===!1||Le(e)&&S(e)==mt}function Ae(e){return Re(e)&&(en(e)||Ue(e)||Me(e.splice)||Zt(e))?!e.length:!Ht(e).length}function Pe(e,t){return x(e,t)}function Ie(e){return"number"==typeof e&&jt(e)}function Me(e){if(!Ne(e))return!1;var t=S(e);return t==bt||t==yt||t==ft||t==Ct}function Oe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=dt}function Ne(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Le(e){return null!=e&&"object"==typeof e}function Fe(e){return Be(e)&&e!=+e}function Ve(e){return null===e}function Be(e){return"number"==typeof e||Le(e)&&S(e)==wt}function Ue(e){return"string"==typeof e||!en(e)&&Le(e)&&S(e)==Et}function je(e){return e===it}function He(e){return Re(e)?e.length?L(e):[]:Ke(e)}function Ge(e){return"string"==typeof e?e:null==e?"":e+""}function qe(e,t){var n=qt(e);return null==t?n:on(n,t)}function We(e,t){return null!=e&&Nt.call(e,t)}function ze(e,t,n){var i=null==e?it:e[t];return i===it&&(i=n),Me(i)?i.call(e):i}function Ke(e){return null==e?[]:c(e,cn(e))}function Ye(e){return e=Ge(e),e&&xt.test(e)?e.replace(Tt,It):e}function Xe(e){return e}function Qe(e){return I(on({},e))}function $e(e,t,n){var i=cn(t),r=C(t,i);null!=n||Ne(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=C(t,cn(t)));var o=!(Ne(n)&&"chain"in n&&!n.chain),a=Me(e);return Wt(r,function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=L(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,s([this.value()],arguments))})}),e}function Je(){return At._===this&&(At._=Vt),this}function Ze(){}function et(e){var t=++Lt;return Ge(e)+t}function tt(e){return e&&e.length?b(e,Xe,E):it}function nt(e){return e&&e.length?b(e,Xe,A):it}var it,rt="4.17.4",st="Expected a function",ot=1,at=2,lt=1,ut=32,ct=1/0,dt=9007199254740991,pt="[object Arguments]",ht="[object Array]",ft="[object AsyncFunction]",mt="[object Boolean]",gt="[object Date]",vt="[object Error]",bt="[object Function]",yt="[object GeneratorFunction]",wt="[object Number]",_t="[object Object]",Ct="[object Proxy]",St="[object RegExp]",Et="[object String]",Tt=/[&<>"']/g,xt=RegExp(Tt.source),kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rt="object"==typeof e&&e&&e.Object===Object&&e,Dt="object"==typeof self&&self&&self.Object===Object&&self,At=Rt||Dt||Function("return this")(),Pt="object"==typeof t&&t&&!t.nodeType&&t,It=(Pt&&"object"==typeof r&&r&&!r.nodeType&&r,l(kt)),Mt=Array.prototype,Ot=Object.prototype,Nt=Ot.hasOwnProperty,Lt=0,Ft=Ot.toString,Vt=At._,Bt=Object.create,Ut=Ot.propertyIsEnumerable,jt=At.isFinite,Ht=d(Object.keys,Object),Gt=Math.max,qt=function(){function e(){}return function(t){if(!Ne(t))return{};if(Bt)return Bt(t);e.prototype=t;var n=new e;return e.prototype=it,n}}();h.prototype=qt(p.prototype),h.prototype.constructor=h;var Wt=H(_),zt=G(),Kt=Ze,Yt=Xe,Xt=W(re),Qt=O(function(e,t,n){return z(e,lt|ut,t,n)}),$t=O(function(e,t){return g(e,1,t)}),Jt=O(function(e,t,n){return g(e,sn(t)||0,n)}),Zt=Kt(function(){return arguments}())?Kt:function(e){return Le(e)&&Nt.call(e,"callee")&&!Ut.call(e,"callee")},en=Array.isArray,tn=T,nn=R,rn=Number,sn=Number,on=j(function(e,t){U(t,Ht(t),e)}),an=j(function(e,t){U(t,Z(t),e)}),ln=j(function(e,t,n,i){U(t,dn(t),e,i)}),un=O(function(e){return e.push(it,K),ln.apply(it,e)}),cn=Ht,dn=Z,pn=$(function(e,t){return null==e?{}:M(e,t)}),hn=D;p.assignIn=an,p.before=Se,p.bind=Qt,p.chain=de,p.compact=ne,p.concat=ie,p.create=qe,p.defaults=un,p.defer=$t,p.delay=Jt,p.filter=ge,p.flatten=se,p.flattenDeep=oe,p.iteratee=hn,p.keys=cn,p.map=be,p.matches=Qe,p.mixin=$e,p.negate=Ee,p.once=Te,p.pick=pn,p.slice=ce,p.sortBy=Ce,p.tap=pe,p.thru=he,p.toArray=He,p.values=Ke,p.extend=an,$e(p,p),p.clone=xe,p.escape=Ye,p.every=me,p.find=Xt,p.forEach=ve,p.has=We,p.head=ae,p.identity=Xe,p.indexOf=le,p.isArguments=Zt,p.isArray=en,p.isBoolean=De,p.isDate=tn,p.isEmpty=Ae,p.isEqual=Pe,p.isFinite=Ie,p.isFunction=Me,p.isNaN=Fe,p.isNull=Ve,p.isNumber=Be,p.isObject=Ne,p.isRegExp=nn,p.isString=Ue,p.isUndefined=je,p.last=ue,p.max=tt,p.min=nt,p.noConflict=Je,p.noop=Ze,p.reduce=ye,p.result=ze,p.size=we,p.some=_e,p.uniqueId=et,p.each=ve,p.first=ae,$e(p,function(){var e={};return _(p,function(t,n){Nt.call(p.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),p.VERSION=rt,Wt(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?String.prototype:Mt)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(e);p.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(en(r)?r:[],e)}return this[n](function(n){return t.apply(en(n)?n:[],e)})}}),p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=fe,At._=p,i=function(){return p}.call(t,n,t,r),!(i!==it&&(r.exports=i))}).call(this)}).call(t,function(){return this}(),n(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){var i;(function(e,r,s){(function(o){function a(e){return e&&e.Object===Object?e:null}function l(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t}function u(e){return function(){try{return e.apply(this,arguments)}catch(t){return it.e=t,it}}}function c(e){throw e}function d(e,t){if(st&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(ut)===-1){for(var n=[],i=t;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(e.stack);var r=n.join("\n"+ut+"\n");e.stack=p(r)}}function p(e){for(var t=e.split("\n"),n=[],i=0,r=t.length;i<r;i++){var s=t[i];h(s)||f(s)||!s||n.push(s)}return n.join("\n")}function h(e){var t=g(e);if(!t)return!1;var n=t[0],i=t[1];return n===at&&i>=lt&&i<=Bo}function f(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function m(){if(st)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],i=g(n);if(!i)return;return at=i[0],i[1]}}function g(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function v(e,t,n,i,r,s){var a=Qt(e),l=a.length,u=Qt(t),c=u.length;if(l!==c&&!i)return!1;for(var d,p=l;p--;)if(d=a[p],!(i?d in t:Kt.call(t,d)))return!1;for(var h=i;++p<l;){d=a[p];var f,m=e[d],g=t[d];if(!(f===o?n(m,g,i,r,s):f))return!1;h||(h="constructor"===d)}if(!h){var v=e.constructor,b=t.constructor;if(v!==b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b))return!1}return!0}function b(e,t,n){switch(n){case Et:case Tt:return+e===+t;case xt:return e.name===t.name&&e.message===t.message;case Dt:return e!==+e?t!==+t:e===+t;case Pt:case Mt:return e===t+""}return!1}function y(e){return!!e&&"object"==typeof e}function w(e){return"number"==typeof e&&e>-1&&e%1===0&&e<=Xt}function _(e){return y(e)&&w(e.length)&&!!Wt[Yt.call(e)]}function C(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function S(e,t,n,i,r,s){var a=-1,l=e.length,u=t.length;if(l!==u&&!(i&&u>l))return!1;for(;++a<l;){var c,d=e[a],p=t[a];if(c!==o){if(c)continue;return!1}if(i){if(!C(t,function(e){return d===e||n(d,e,i,r,s)}))return!1}else if(d!==p&&!n(d,p,i,r,s))return!1}return!0}function E(e,t,n,i,r,s){var o=Jt(e),a=Jt(t),l=St,u=St;o||(l=Yt.call(e),l===Ct?l=At:l!==At&&(o=_(e))),a||(u=Yt.call(t),u===Ct&&(u=At));var c=l===At&&!$t(e),d=u===At&&!$t(t),p=l===u;if(p&&!o&&!c)return b(e,t,l);if(!i){var h=c&&Kt.call(e,"__wrapped__"),f=d&&Kt.call(t,"__wrapped__");if(h||f)return n(h?e.value():e,f?t.value():t,i,r,s)}if(!p)return!1;r||(r=[]),s||(s=[]);for(var m=r.length;m--;)if(r[m]===e)return s[m]===t;r.push(e),s.push(t);var g=(o?S:v)(e,t,n,i,r,s);return r.pop(),s.pop(),g}function T(e,t,n,i,r){return e===t||(null==e||null==t||!ae(e)&&!y(t)?e!==e&&t!==t:E(e,t,T,n,i,r))}function x(e,t){for(var n=new Array(e),i=0;i<e;i++)n[i]=t();return n}function k(e,t){this.id=e,this.value=t}function R(e,t){this.scheduler=e,this.disposable=t,this.isDisposed=!1}function D(e,t){t.isDisposed||(t.isDisposed=!0,t.disposable.dispose())}function A(e){this._s=e,this.isDisposed=!1}function P(e){this._s=e}function I(e){this._s=e,this._l=e.length,this._i=0}function M(e){this._a=e}function O(e){this._a=e,this._l=V(e),this._i=0}function N(e){return"number"==typeof e&&Ke.isFinite(e)}function L(e){var t,n=e[gt];if(!n&&"string"==typeof e)return t=new P(e),t[gt]();if(!n&&e.length!==o)return t=new M(e),t[gt]();if(!n)throw new TypeError("Object is not iterable");return e[gt]()}function F(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}function V(e){var t=+e.length;return isNaN(t)?0:0!==t&&N(t)?(t=F(t)*Math.floor(Math.abs(t)),t<=0?0:t>bi?bi:t):t}function B(e,t){return Cn(e)||(e=Dn),new wi(t,e)}function U(e,t){this.observer=e,this.parent=t}function j(e,t){return e.amb(t)}function H(){return!1}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function H(){return!1}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function H(){return!1}function q(){return[]}function H(){return!1}function q(){return[]}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function W(e){return function(t){return e.subscribe(t)}}function z(e){return e.toArray()}function K(e){return e.length>0}function Y(e){return{"@@iterator":function(){return{next:function(){return{done:!1,value:e}}}}}}function Y(e){return{"@@iterator":function(){return{next:function(){return{done:!1,value:e}}}}}}function X(e,t,n){var i=wt(t,n,3);return e.map(function(t,n){var r=i(t,n,e);return tt(r)&&(r=ci(r)),(yt(r)||bt(r))&&(r=yi(r)),r}).concatAll()}function Q(e,t,n){for(var i=0,r=e.length;i<r;i++)if(n(e[i],t))return i;return-1}function $(e){this.comparer=e,this.set=[]}function J(e,t){return function(n){for(var i=n,r=0;r<t;r++){var s=i[e[r]];if("undefined"==typeof s)return o;i=s}return i}}function Z(e){if(0===e.length)throw new ct;return e[0]}function ee(e,t,n,i){var r=wt(t,n,3);return new Ao(function(t){return e.subscribe(new hs(t,e,r,i))},e)}function te(e){return e?$n.isObservable(e)?e:tt(e)?$n.fromPromise(e):oe(e)||se(e)?Cs.call(this,e):nt(e)?re.call(this,e):yt(e)||bt(e)?ne.call(this,e):ae(e)?ie.call(this,e):e:e}function ne(e){return $n.from(e).concatMap(function(e){return $n.isObservable(e)||ae(e)?te.call(null,e):Ye.Observable.just(e)}).toArray()}function ie(e){function t(e,t){n[t]=o,r.push(e.map(function(e){n[t]=e}))}for(var n=new e.constructor,i=Object.keys(e),r=[],s=0,a=i.length;s<a;s++){var l=i[s],u=te.call(this,e[l]);u&&$n.isObservable(u)?t(u,l):n[l]=e[l]}return $n.forkJoin.apply($n,r).map(function(){return n})}function re(e){var t=this;return new Ao(function(n){e.call(t,function(){var e=arguments[0],t=arguments[1];if(e)return n.onError(e);if(arguments.length>2){for(var i=[],r=1,s=arguments.length;r<s;r++)i.push(arguments[r]);t=i}n.onNext(t),n.onCompleted()})})}function se(e){return nt(e.next)&&nt(e["throw"])}function oe(e){var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||se(t.prototype))}function ae(e){return Object==e.constructor}function le(e,t,n,i){var r=new No;return i.push(ue(r,t,n)),e.apply(t,i),r.asObservable()}function ue(e,t,n){return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];if(nt(n)){if(r=rt(n).apply(t,r),r===it)return e.onError(r.e);e.onNext(r)}else r.length<=1?e.onNext(r[0]):e.onNext(r);e.onCompleted()}}function ce(e,t,n,i){var r=new No;return i.push(de(r,t,n)),e.apply(t,i),r.asObservable()}function de(e,t,n){return function(){var i=arguments[0];if(i)return e.onError(i);for(var r=arguments.length,s=[],o=1;o<r;o++)s[o-1]=arguments[o];if(nt(n)){var s=rt(n).apply(t,s);if(s===it)return e.onError(s.e);e.onNext(s)}else s.length<=1?e.onNext(s[0]):e.onNext(s);e.onCompleted()}}function pe(e){return Ke.StaticNodeList?e instanceof Ke.StaticNodeList||e instanceof Ke.NodeList:"[object NodeList]"===Object.prototype.toString.call(e)}function he(e,t,n){this._e=e,this._n=t,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function fe(e,t,n){var i=new on,r=Object.prototype.toString.call(e);if(pe(e)||"[object HTMLCollection]"===r)for(var s=0,o=e.length;s<o;s++)i.add(fe(e.item(s),t,n));else e&&i.add(new he(e,t,n));return i}function me(e,t,n){return new Ao(function(i){function r(e,t){if(u[t]=e,o[t]=!0,a||(a=o.every(Qe))){if(s)return i.onError(s);var r=rt(n).apply(null,u);if(r===it)return i.onError(r.e);i.onNext(r)}l&&u[1]&&i.onCompleted()}var s,o=[!1,!1],a=!1,l=!1,u=new Array(2);return new gn(e.subscribe(function(e){r(e,0)},function(e){u[1]?i.onError(e):s=e},function(){l=!0,u[1]&&i.onCompleted()}),t.subscribe(function(e){r(e,1)},function(e){i.onError(e)},function(){l=!0,r(!0,1)}))},e)}function z(e){return e.toArray()}function ge(e,t){return e.groupJoin(this,t,gi,function(e,t){return t})}function ve(e){var t=this;return new Ao(function(n){var i=new Oo,r=new on,s=new bn(r);return n.onNext(nn(i,s)),r.add(t.subscribe(function(e){i.onNext(e)},function(e){i.onError(e),n.onError(e)},function(){i.onCompleted(),n.onCompleted()})),tt(e)&&(e=ci(e)),r.add(e.subscribe(function(e){i.onCompleted(),i=new Oo,n.onNext(nn(i,s))},function(e){i.onError(e),n.onError(e)},function(){i.onCompleted(),n.onCompleted()})),s},t)}function be(e){var t=this;return new Ao(function(n){function i(){var t;try{t=e()}catch(s){return void n.onError(s)}tt(t)&&(t=ci(t));var l=new fn;r.setDisposable(l),l.setDisposable(t.take(1).subscribe(Xe,function(e){a.onError(e),n.onError(e)},function(){a.onCompleted(),a=new Oo,n.onNext(nn(a,o)),i()}))}var r=new mn,s=new on(r),o=new bn(s),a=new Oo;return n.onNext(nn(a,o)),s.add(t.subscribe(function(e){a.onNext(e)},function(e){a.onError(e),n.onError(e)},function(){a.onCompleted(),n.onCompleted()})),i(),o},t)}function ye(e,t){return new Bs(e,t)}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function we(e){this.patterns=e}function _e(e,t){this.expression=e,this.selector=t}function Ce(e){return function(t){e.onError(t)}}function Se(e,t){return function(){var n=rt(e.selector).apply(e,arguments);return n===it?t.onError(n.e):void t.onNext(n)}}function Ee(e,t,n){var i=e.get(t);if(!i){var r=new Ks(t,n);return e.set(t,r),r}return i}function Te(e,t,n){this.joinObserverArray=e,this.onNext=t,this.onCompleted=n,this.joinObservers=new zs;for(var i=0,r=this.joinObserverArray.length;i<r;i++){var s=this.joinObserverArray[i];this.joinObservers.set(s,s)}}function xe(e,t){return new Ys(e,t)}function ke(e,t,n){return new Ao(function(i){var r=e,s=_n(t);return n.scheduleRecursiveFuture(0,r,function(e,t){if(s>0){var o=n.now();r=new Date(r.getTime()+s),r.getTime()<=o&&(r=new Date(o+s))}i.onNext(e),t(e+1,new Date(r))})})}function Re(e,t,n){return e===t?new Ao(function(e){return n.schedulePeriodic(0,t,function(t){return e.onNext(t),t+1})}):hi(function(){return ke(new Date(n.now()+e),t,n)})}function De(e,t,n){return new Ao(function(i){var r,s=!1,o=new mn,a=null,l=[],u=!1;return r=e.materialize().timestamp(n).subscribe(function(e){var r,c;"E"===e.value.kind?(l=[],l.push(e),a=e.value.error,c=!u):(l.push({value:e.value,timestamp:e.timestamp+t}),c=!s,s=!0),c&&(null!==a?i.onError(a):(r=new fn,o.setDisposable(r),r.setDisposable(n.scheduleRecursiveFuture(null,t,function(e,t){var r,o,c,d;if(null===a){u=!0;do c=null,l.length>0&&l[0].timestamp-n.now()<=0&&(c=l.shift().value),null!==c&&c.accept(i);while(null!==c);d=!1,o=0,l.length>0?(d=!0,o=Math.max(0,l[0].timestamp-n.now())):s=!1,r=a,u=!1,null!==r?i.onError(r):d&&t(null,o)}}))))}),new gn(r,o)},e)}function Ae(e,t,n){return hi(function(){return De(e,t-n.now(),n)})}function Pe(e,t,n){var i,r;return nt(t)?r=t:(i=t,r=n),new Ao(function(t){function n(){l.setDisposable(e.subscribe(function(e){var n=rt(r)(e);if(n===it)return t.onError(n.e);var i=new fn;o.add(i),i.setDisposable(n.subscribe(function(){t.onNext(e),o.remove(i),s()},function(e){t.onError(e)},function(){t.onNext(e),o.remove(i),s()}))},function(e){t.onError(e)},function(){a=!0,l.dispose(),s()}))}function s(){a&&0===o.length&&t.onCompleted()}var o=new on,a=!1,l=new mn;return i?l.setDisposable(i.subscribe(n,function(e){t.onError(e)},n)):n(),new gn(l,o)},e)}function Ie(e,t){return new Ao(function(n){var i,r=!1,s=new mn,o=0,a=e.subscribe(function(e){var a=rt(t)(e);if(a===it)return n.onError(a.e);tt(a)&&(a=ci(a)),r=!0,i=e,o++;var l=o,u=new fn;s.setDisposable(u),u.setDisposable(a.subscribe(function(){r&&o===l&&n.onNext(i),r=!1,u.dispose()},function(e){n.onError(e)},function(){r&&o===l&&n.onNext(i),r=!1,u.dispose()}))},function(e){s.dispose(),n.onError(e),r=!1,o++},function(){s.dispose(),r&&n.onNext(i),n.onCompleted(),r=!1,o++});return new gn(a,s)},e)}function z(e){return e.toArray()}function z(e){return e.toArray()}function Me(e,t,n,i){return nt(t)&&(i=n,n=t,t=Ti()),$n.isObservable(i)||(i=Pi(new so)),new Ao(function(r){function s(e){function t(){return d=n===c}var n=c,s=new fn;l.setDisposable(s),s.setDisposable(e.subscribe(function(){t()&&a.setDisposable(i.subscribe(r)),s.dispose()},function(e){t()&&r.onError(e)},function(){t()&&a.setDisposable(i.subscribe(r))}))}function o(){var e=!d;return e&&c++,e}var a=new mn,l=new mn,u=new fn;a.setDisposable(u);var c=0,d=!1;return s(t),u.setDisposable(e.subscribe(function(e){if(o()){r.onNext(e);var t=rt(n)(e);if(t===it)return r.onError(t.e);s(tt(t)?ci(t):t)}},function(e){o()&&r.onError(e)},function(){o()&&r.onCompleted()})),new gn(a,l)},e)}function Oe(e,t,n,i){return Cn(n)&&(i=n,n=Pi(new so)),n instanceof Error&&(n=Pi(n)),Cn(i)||(i=On),$n.isObservable(n)||(n=Pi(new so)),new Ao(function(r){function s(){var e=o;c.setDisposable(i.scheduleFuture(null,t,function(){u=o===e,u&&(tt(n)&&(n=ci(n)),l.setDisposable(n.subscribe(r)))}))}var o=0,a=new fn,l=new mn,u=!1,c=new mn;return l.setDisposable(a),s(),a.setDisposable(e.subscribe(function(e){u||(o++,r.onNext(e),s())},function(e){u||(o++,r.onError(e))},function(){u||(o++,r.onCompleted())})),new gn(l,c)},e)}function Ne(e){return{"@@transducer/init":function(){return e},"@@transducer/step":function(e,t){return e.onNext(t)},"@@transducer/result":function(e){return e.onCompleted()}}}function Le(e){this.predicate=e;
}function Fe(e){this.predicate=e}function Ve(e,t){var n=this;this.scheduler=e,this.messages=t,this.subscriptions=[],this.observers=[];for(var i=0,r=this.messages.length;i<r;i++){var s=this.messages[i],o=s.value;!function(t){e.scheduleAbsolute(null,s.time,function(){for(var e=n.observers.slice(0),i=0,r=e.length;i<r;i++)t.accept(e[i]);return cn})}(o)}}var Be={"function":!0,object:!0},Ue=Be[typeof t]&&t&&!t.nodeType?t:null,je=Be[typeof e]&&e&&!e.nodeType?e:null,He=a(Ue&&je&&"object"==typeof r&&r),Ge=a(Be[typeof self]&&self),qe=a(Be[typeof window]&&window),We=je&&je.exports===Ue?Ue:null,ze=a(Be[typeof this]&&this),Ke=He||qe!==(ze&&ze.window)&&qe||Ge||ze||Function("return this")(),Ye={internals:{},config:{Promise:Ke.Promise},helpers:{}},Xe=Ye.helpers.noop=function(){},Qe=Ye.helpers.identity=function(e){return e},$e=Ye.helpers.defaultNow=Date.now,Je=Ye.helpers.defaultComparer=function(e,t){return Zt(e,t)},Ze=Ye.helpers.defaultSubComparer=function(e,t){return e>t?1:e<t?-1:0},et=(Ye.helpers.defaultKeySerializer=function(e){return e.toString()},Ye.helpers.defaultError=function(e){throw e}),tt=Ye.helpers.isPromise=function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then},nt=Ye.helpers.isFunction=function(){var e=function(e){return"function"==typeof e||!1};return e(/x/)&&(e=function(e){return"function"==typeof e&&"[object Function]"==toString.call(e)}),e}(),it={e:{}},rt=Ye.internals.tryCatch=function(e){if(!nt(e))throw new TypeError("fn must be a function");return u(e)};Ye.config.longStackSupport=!1;var st=!1,ot=rt(function(){throw new Error})();st=!!ot.e&&!!ot.e.stack;var at,lt=m(),ut="From previous event:",ct=Ye.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};ct.prototype=Object.create(Error.prototype),ct.prototype.name="EmptyError";var dt=Ye.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};dt.prototype=Object.create(Error.prototype),dt.prototype.name="ObjectDisposedError";var pt=Ye.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};pt.prototype=Object.create(Error.prototype),pt.prototype.name="ArgumentOutOfRangeError";var ht=Ye.NotSupportedError=function(e){this.message=e||"This operation is not supported",Error.call(this)};ht.prototype=Object.create(Error.prototype),ht.prototype.name="NotSupportedError";var ft=Ye.NotImplementedError=function(e){this.message=e||"This operation is not implemented",Error.call(this)};ft.prototype=Object.create(Error.prototype),ft.prototype.name="NotImplementedError";var mt=Ye.helpers.notImplemented=function(){throw new ft},gt=(Ye.helpers.notSupported=function(){throw new ht},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Ke.Set&&"function"==typeof(new Ke.Set)["@@iterator"]&&(gt="@@iterator");var vt=Ye.doneEnumerator={done:!0,value:o},bt=Ye.helpers.isIterable=function(e){return e&&e[gt]!==o},yt=Ye.helpers.isArrayLike=function(e){return e&&e.length!==o};Ye.helpers.iterator=gt;var wt=Ye.internals.bindCallback=function(e,t,n){if("undefined"==typeof t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},_t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ct=(_t.length,"[object Arguments]"),St="[object Array]",Et="[object Boolean]",Tt="[object Date]",xt="[object Error]",kt="[object Function]",Rt="[object Map]",Dt="[object Number]",At="[object Object]",Pt="[object RegExp]",It="[object Set]",Mt="[object String]",Ot="[object WeakMap]",Nt="[object ArrayBuffer]",Lt="[object Float32Array]",Ft="[object Float64Array]",Vt="[object Int8Array]",Bt="[object Int16Array]",Ut="[object Int32Array]",jt="[object Uint8Array]",Ht="[object Uint8ClampedArray]",Gt="[object Uint16Array]",qt="[object Uint32Array]",Wt={};Wt[Lt]=Wt[Ft]=Wt[Vt]=Wt[Bt]=Wt[Ut]=Wt[jt]=Wt[Ht]=Wt[Gt]=Wt[qt]=!0,Wt[Ct]=Wt[St]=Wt[Nt]=Wt[Et]=Wt[Tt]=Wt[xt]=Wt[kt]=Wt[Rt]=Wt[Dt]=Wt[At]=Wt[Pt]=Wt[It]=Wt[Mt]=Wt[Ot]=!1;var zt=Object.prototype,Kt=zt.hasOwnProperty,Yt=zt.toString,Xt=Math.pow(2,53)-1,Qt=Object.keys||function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var s,o,a=[];for(s in r)e.call(r,s)&&a.push(s);if(t)for(o=0;o<i;o++)e.call(r,n[o])&&a.push(n[o]);return a}}(),ae=Ye.internals.isObject=function(e){var t=typeof e;return!!e&&("object"===t||"function"===t)},$t=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}(),Jt=Array.isArray||function(e){return y(e)&&w(e.length)&&Yt.call(e)===St},Zt=Ye.internals.isEqual=function(e,t){return T(e,t)},en=({}.hasOwnProperty,Array.prototype.slice,Ye.internals.inherits=function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}),tn=Ye.internals.addProperties=function(e){for(var t=[],n=1,i=arguments.length;n<i;n++)t.push(arguments[n]);for(var r=0,s=t.length;r<s;r++){var o=t[r];for(var a in o)e[a]=o[a]}},nn=Ye.internals.addRef=function(e,t){return new Ao(function(n){return new gn(t.getDisposable(),e.subscribe(n))})};k.prototype.compareTo=function(e){var t=this.value.compareTo(e.value);return 0===t&&(t=this.id-e.id),t};var rn=Ye.internals.PriorityQueue=function(e){this.items=new Array(e),this.length=0},sn=rn.prototype;sn.isHigherPriority=function(e,t){return this.items[e].compareTo(this.items[t])<0},sn.percolate=function(e){if(!(e>=this.length||e<0)){var t=e-1>>1;if(!(t<0||t===e)&&this.isHigherPriority(e,t)){var n=this.items[e];this.items[e]=this.items[t],this.items[t]=n,this.percolate(t)}}},sn.heapify=function(e){if(+e||(e=0),!(e>=this.length||e<0)){var t=2*e+1,n=2*e+2,i=e;if(t<this.length&&this.isHigherPriority(t,i)&&(i=t),n<this.length&&this.isHigherPriority(n,i)&&(i=n),i!==e){var r=this.items[e];this.items[e]=this.items[i],this.items[i]=r,this.heapify(i)}}},sn.peek=function(){return this.items[0].value},sn.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=o,this.heapify()},sn.dequeue=function(){var e=this.peek();return this.removeAt(0),e},sn.enqueue=function(e){var t=this.length++;this.items[t]=new k((rn.count++),e),this.percolate(t)},sn.remove=function(e){for(var t=0;t<this.length;t++)if(this.items[t].value===e)return this.removeAt(t),!0;return!1},rn.count=0;var on=Ye.CompositeDisposable=function(){var e,t,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];this.disposables=n,this.isDisposed=!1,this.length=n.length},an=on.prototype;an.add=function(e){this.isDisposed?e.dispose():(this.disposables.push(e),this.length++)},an.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);n!==-1&&(t=!0,this.disposables.splice(n,1),this.length--,e.dispose())}return t},an.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<e;n++)t[n].dispose()}};var ln=Ye.Disposable=function(e){this.isDisposed=!1,this.action=e||Xe};ln.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var un=ln.create=function(e){return new ln(e)},cn=ln.empty={dispose:Xe},dn=ln.isDisposable=function(e){return e&&nt(e.dispose)},pn=ln.checkDisposed=function(e){if(e.isDisposed)throw new dt},hn=ln._fixup=function(e){return dn(e)?e:cn},fn=Ye.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};fn.prototype.getDisposable=function(){return this.current},fn.prototype.setDisposable=function(e){if(this.current)throw new Error("Disposable has already been assigned");var t=this.isDisposed;!t&&(this.current=e),t&&e&&e.dispose()},fn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null,e&&e.dispose()}};var mn=Ye.SerialDisposable=function(){this.isDisposed=!1,this.current=null};mn.prototype.getDisposable=function(){return this.current},mn.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e}n&&n.dispose(),t&&e&&e.dispose()},mn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null}e&&e.dispose()};var gn=Ye.BinaryDisposable=function(e,t){this._first=e,this._second=t,this.isDisposed=!1};gn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this._first;this._first=null,e&&e.dispose();var t=this._second;this._second=null,t&&t.dispose()}};var vn=Ye.NAryDisposable=function(e){this._disposables=e,this.isDisposed=!1};vn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=0,t=this._disposables.length;e<t;e++)this._disposables[e].dispose();this._disposables.length=0}};var bn=Ye.RefCountDisposable=function(){function e(e){this.disposable=e,this.disposable.count++,this.isInnerDisposed=!1}function t(e){this.underlyingDisposable=e,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return e.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?cn:new e(this)},t}();R.prototype.dispose=function(){this.scheduler.schedule(this,D)};var yn=Ye.internals.ScheduledItem=function(e,t,n,i,r){this.scheduler=e,this.state=t,this.action=n,this.dueTime=i,this.comparer=r||Ze,this.disposable=new fn};yn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},yn.prototype.compareTo=function(e){return this.comparer(this.dueTime,e.dueTime)},yn.prototype.isCancelled=function(){return this.disposable.isDisposed},yn.prototype.invokeCore=function(){return hn(this.action(this.scheduler,this.state))};var wn=Ye.Scheduler=function(){function e(){}e.isScheduler=function(t){return t instanceof e};var t=e.prototype;return t.schedule=function(e,t){throw new ft},t.scheduleFuture=function(t,n,i){var r=n;return r instanceof Date&&(r-=this.now()),r=e.normalize(r),0===r?this.schedule(t,i):this._scheduleFuture(t,r,i)},t._scheduleFuture=function(e,t,n){throw new ft},e.now=$e,e.prototype.now=$e,e.normalize=function(e){return e<0&&(e=0),e},e}(),_n=wn.normalize,Cn=wn.isScheduler;!function(e){function t(e,t){function n(t){function i(e,t){return o?s.remove(l):a=!0,r(t,n),cn}var o=!1,a=!1,l=e.schedule(t,i);a||(s.add(l),o=!0)}var i=t[0],r=t[1],s=new on;return r(i,n),s}function n(e,t){function n(t,i){function o(e,t){return a?s.remove(u):l=!0,r(t,n),cn}var a=!1,l=!1,u=e.scheduleFuture(t,i,o);l||(s.add(u),a=!0)}var i=t[0],r=t[1],s=new on;return r(i,n),s}e.scheduleRecursive=function(e,n){return this.schedule([e,n],t)},e.scheduleRecursiveFuture=function(e,t,i){return this.scheduleFuture([e,i],t,n)}}(wn.prototype),function(e){e.schedulePeriodic=function(e,t,n){if("undefined"==typeof Ke.setInterval)throw new ht;t=_n(t);var i=e,r=Ke.setInterval(function(){i=n(i)},t);return un(function(){Ke.clearInterval(r)})}}(wn.prototype),function(e){e.catchError=e["catch"]=function(e){return new Nn(this,e)}}(wn.prototype);var Sn,En,Tn=Ye.internals.SchedulePeriodicRecursive=function(){function e(e){return function(t,n){n(0,e._period);var i=rt(e._action)(e._state);i===it&&(e._cancel.dispose(),c(i.e)),e._state=i}}function t(e,t,n,i){this._scheduler=e,this._state=t,this._period=n,this._action=i}return t.prototype.start=function(){var t=new fn;return this._cancel=t,t.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,e(this))),t},t}(),xn=function(e){function t(){e.call(this)}return en(t,e),t.prototype.schedule=function(e,t){return hn(t(this,e))},t}(wn),kn=wn.immediate=new xn,Rn=function(e){function t(){for(;i.length>0;){var e=i.dequeue();!e.isCancelled()&&e.invoke()}}function n(){e.call(this)}var i;return en(n,e),n.prototype.schedule=function(e,n){var r=new yn(this,e,n,this.now());if(i)i.enqueue(r);else{i=new rn(4),i.enqueue(r);var s=rt(t)();i=null,s===it&&c(s.e)}return r.disposable},n.prototype.scheduleRequired=function(){return!i},n}(wn),Dn=wn.currentThread=new Rn,An=function(){var e,t=Xe;if(Ke.setTimeout)e=Ke.setTimeout,t=Ke.clearTimeout;else{if(!Ke.WScript)throw new ht;e=function(e,t){Ke.WScript.Sleep(t),e()}}return{setTimeout:e,clearTimeout:t}}(),Pn=An.setTimeout,In=An.clearTimeout;!function(){function e(t){if(r)Pn(function(){e(t)},0);else{var n=i[t];if(n){r=!0;var s=rt(n)();En(t),r=!1,s===it&&c(s.e)}}}function t(){if(!Ke.postMessage||Ke.importScripts)return!1;var e=!1,t=Ke.onmessage;return Ke.onmessage=function(){e=!0},Ke.postMessage("","*"),Ke.onmessage=t,e}var n=1,i={},r=!1;En=function(e){delete i[e]};var o=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),a="function"==typeof(a=He&&We&&He.setImmediate)&&!o.test(a)&&a;if(nt(a))Sn=function(t){var r=n++;return i[r]=t,a(function(){e(r)}),r};else if("undefined"!=typeof s&&"[object process]"==={}.toString.call(s))Sn=function(t){var r=n++;return i[r]=t,s.nextTick(function(){e(r)}),r};else if(t()){var l="ms.rx.schedule"+Math.random(),u=function(t){"string"==typeof t.data&&t.data.substring(0,l.length)===l&&e(t.data.substring(l.length))};Ke.addEventListener("message",u,!1),Sn=function(e){var t=n++;return i[t]=e,Ke.postMessage(l+t,"*"),t}}else if(Ke.MessageChannel){var d=new Ke.MessageChannel;d.port1.onmessage=function(t){e(t.data)},Sn=function(e){var t=n++;return i[t]=e,d.port2.postMessage(t),t}}else Sn="document"in Ke&&"onreadystatechange"in Ke.document.createElement("script")?function(t){var r=Ke.document.createElement("script"),s=n++;return i[s]=t,r.onreadystatechange=function(){e(s),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},Ke.document.documentElement.appendChild(r),s}:function(t){var r=n++;return i[r]=t,Pn(function(){e(r)},0),r}}();var Mn=function(e){function t(){e.call(this)}function n(e,t,n,i){return function(){e.setDisposable(ln._fixup(t(n,i)))}}function i(e){this._id=e,this.isDisposed=!1}function r(e){this._id=e,this.isDisposed=!1}function s(e,t,n){return function(){t(e,n)}}return en(t,e),i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,En(this._id))},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,In(this._id))},t.prototype.schedule=function(e,t){var r=new fn,s=Sn(n(r,t,this,e));return new gn(r,new i(s))},t.prototype._scheduleFuture=function(e,t,i){if(0===t)return this.schedule(e,i);var s=new fn,o=Pn(n(s,i,this,e),t);return new gn(s,new r(o))},t.prototype.scheduleLongRunning=function(e,t){var n=un(Xe);return Sn(s(e,t,n)),n},t}(wn),On=wn["default"]=wn.async=new Mn,Nn=function(e){function t(t,n){this._scheduler=t,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,e.call(this)}return en(t,e),t.prototype.schedule=function(e,t){return this._scheduler.schedule(e,this._wrap(t))},t.prototype._scheduleFuture=function(e,t,n){return this._scheduler.schedule(e,t,this._wrap(n))},t.prototype.now=function(){return this._scheduler.now()},t.prototype._clone=function(e){return new t(e,this._handler)},t.prototype._wrap=function(e){var t=this;return function(n,i){var r=rt(e)(t._getRecursiveWrapper(n),i);return r===it?(t._handler(r.e)||c(r.e),cn):hn(r)}},t.prototype._getRecursiveWrapper=function(e){if(this._recursiveOriginal!==e){this._recursiveOriginal=e;var t=this._clone(e);t._recursiveOriginal=e,t._recursiveWrapper=t,this._recursiveWrapper=t}return this._recursiveWrapper},t.prototype.schedulePeriodic=function(e,t,n){var i=this,r=!1,s=new fn;return s.setDisposable(this._scheduler.schedulePeriodic(e,t,function(e){if(r)return null;var t=rt(n)(e);return t===it?(r=!0,i._handler(t.e)||c(t.e),s.dispose(),null):t})),s},t}(wn),Ln=Ye.Notification=function(){function e(){}return e.prototype._accept=function(e,t,n){throw new ft},e.prototype._acceptObserver=function(e,t,n){throw new ft},e.prototype.accept=function(e,t,n){return e&&"object"==typeof e?this._acceptObserver(e):this._accept(e,t,n)},e.prototype.toObservable=function(e){var t=this;return Cn(e)||(e=kn),new Ao(function(n){return e.schedule(t,function(e,t){t._acceptObserver(n),"N"===t.kind&&n.onCompleted()})})},e}(),Fn=function(e){function t(e){this.value=e,this.kind="N"}return en(t,e),t.prototype._accept=function(e){return e(this.value)},t.prototype._acceptObserver=function(e){return e.onNext(this.value)},t.prototype.toString=function(){return"OnNext("+this.value+")"},t}(Ln),Vn=function(e){function t(e){this.error=e,this.kind="E"}return en(t,e),t.prototype._accept=function(e,t){return t(this.error)},t.prototype._acceptObserver=function(e){return e.onError(this.error)},t.prototype.toString=function(){return"OnError("+this.error+")"},t}(Ln),Bn=function(e){function t(){this.kind="C"}return en(t,e),t.prototype._accept=function(e,t,n){return n()},t.prototype._acceptObserver=function(e){return e.onCompleted()},t.prototype.toString=function(){return"OnCompleted()"},t}(Ln),Un=Ln.createOnNext=function(e){return new Fn(e)},jn=Ln.createOnError=function(e){return new Vn(e)},Hn=Ln.createOnCompleted=function(){return new Bn},Gn=Ye.Observer=function(){};Gn.prototype.toNotifier=function(){var e=this;return function(t){return t.accept(e)}},Gn.prototype.asObserver=function(){var e=this;return new Kn(function(t){e.onNext(t)},function(t){e.onError(t)},function(){e.onCompleted()})},Gn.prototype.checked=function(){return new Yn(this)};var qn=Gn.create=function(e,t,n){return e||(e=Xe),t||(t=et),n||(n=Xe),new Kn(e,t,n)};Gn.fromNotifier=function(e,t){var n=wt(e,t,1);return new Kn(function(e){return n(Un(e))},function(e){return n(jn(e))},function(){return n(Hn())})},Gn.prototype.notifyOn=function(e){return new Qn(e,this)},Gn.prototype.makeSafe=function(e){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,e)};var Wn,zn=Ye.internals.AbstractObserver=function(e){function t(){this.isStopped=!1}return en(t,e),t.prototype.next=mt,t.prototype.error=mt,t.prototype.completed=mt,t.prototype.onNext=function(e){!this.isStopped&&this.next(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.error(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.error(e),!0)},t}(Gn),Kn=Ye.AnonymousObserver=function(e){function t(t,n,i){e.call(this),this._onNext=t,this._onError=n,this._onCompleted=i}return en(t,e),t.prototype.next=function(e){this._onNext(e)},t.prototype.error=function(e){this._onError(e)},t.prototype.completed=function(){this._onCompleted()},t}(zn),Yn=function(e){function t(t){e.call(this),this._observer=t,this._state=0}en(t,e);var n=t.prototype;return n.onNext=function(e){this.checkAccess();var t=rt(this._observer.onNext).call(this._observer,e);this._state=0,t===it&&c(t.e)},n.onError=function(e){this.checkAccess();var t=rt(this._observer.onError).call(this._observer,e);this._state=2,t===it&&c(t.e)},n.onCompleted=function(){this.checkAccess();var e=rt(this._observer.onCompleted).call(this._observer);this._state=2,e===it&&c(e.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},t}(Gn),Xn=Ye.internals.ScheduledObserver=function(e){function t(t,n){e.call(this),this.scheduler=t,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new mn}function n(e,t){return function(){e.onNext(t)}}function i(e,t){return function(){e.onError(t)}}function r(e){return function(){e.onCompleted()}}function s(e,t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();var i=rt(n)();return i===it?(e.queue=[],e.hasFaulted=!0,c(i.e)):void t(e)}return en(t,e),t.prototype.next=function(e){this.queue.push(n(this.observer,e))},t.prototype.error=function(e){this.queue.push(i(this.observer,e))},t.prototype.completed=function(){this.queue.push(r(this.observer))},t.prototype.ensureActive=function(){var e=!1;!this.hasFaulted&&this.queue.length>0&&(e=!this.isAcquired,this.isAcquired=!0),e&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,s))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposable.dispose()},t}(zn),Qn=function(e){function t(t,n,i){e.call(this,t,n),this._cancel=i}return en(t,e),t.prototype.next=function(t){e.prototype.next.call(this,t),this.ensureActive()},t.prototype.error=function(t){e.prototype.error.call(this,t),this.ensureActive()},t.prototype.completed=function(){e.prototype.completed.call(this),this.ensureActive()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},t}(Xn),$n=Ye.Observable=function(){function e(e,t){return function(n){var i=n.onError;return n.onError=function(t){d(t,e),i.call(n,t)},t.call(e,n)}}function t(){if(Ye.config.longStackSupport&&st){var t=this._subscribe,n=rt(c)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=e(this,t)}}return Wn=t.prototype,t.isObservable=function(e){return e&&nt(e.subscribe)},Wn.subscribe=Wn.forEach=function(e,t,n){return this._subscribe("object"==typeof e?e:qn(e,t,n))},Wn.subscribeOnNext=function(e,t){return this._subscribe(qn("undefined"!=typeof t?function(n){e.call(t,n)}:e))},Wn.subscribeOnError=function(e,t){return this._subscribe(qn(null,"undefined"!=typeof t?function(n){e.call(t,n)}:e))},Wn.subscribeOnCompleted=function(e,t){return this._subscribe(qn(null,null,"undefined"!=typeof t?function(){e.call(t)}:e))},t}(),Jn=Ye.ObservableBase=function(e){function t(e){return e&&nt(e.dispose)?e:nt(e)?un(e):cn}function n(e,n){var i=n[0],r=n[1],s=rt(r.subscribeCore).call(r,i);s!==it||i.fail(it.e)||c(it.e),i.setDisposable(t(s))}function i(){e.call(this)}return en(i,e),i.prototype._subscribe=function(e){var t=new Po(e),i=[t,this];return Dn.scheduleRequired()?Dn.schedule(i,n):n(null,i),t},i.prototype.subscribeCore=mt,i}($n),Zn=Ye.FlatMapObservable=function(e){function t(t,n,i,r){this.resultSelector=nt(i)?i:null,this.selector=wt(nt(n)?n:function(){return n},r,3),this.source=t,e.call(this)}function n(e,t,n,i){this.i=0,this.selector=t,this.resultSelector=n,this.source=i,this.o=e,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this.selector,this.resultSelector,this))},en(n,zn),n.prototype._wrapResult=function(e,t,n){return this.resultSelector?e.map(function(e,i){return this.resultSelector(t,e,n,i)},this):e},n.prototype.next=function(e){var t=this.i++,n=rt(this.selector)(e,t,this.source);return n===it?this.o.onError(n.e):(tt(n)&&(n=ci(n)),(yt(n)||bt(n))&&(n=$n.from(n)),void this.o.onNext(this._wrapResult(n,e,t)))},n.prototype.error=function(e){this.o.onError(e)},n.prototype.completed=function(){this.o.onCompleted()},t}(Jn),ei=Ye.internals.Enumerable=function(){};A.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var ti=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t){if(!e.isDisposed){var n=rt(e.e.next).call(e.e);if(n===it)return e.o.onError(n.e);if(n.done)return e.o.onCompleted();var r=n.value;tt(r)&&(r=ci(r));var s=new fn;e.subscription.setDisposable(s),s.setDisposable(r.subscribe(new i(e,t)))}}function i(e,t){this._state=e,this._recurse=t,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn,i={isDisposed:!1,o:e,subscription:t,e:this.sources[gt]()},r=Dn.scheduleRecursive(i,n);return new vn([t,r,new A(i)])},en(i,zn),i.prototype.next=function(e){this._state.o.onNext(e)},i.prototype.error=function(e){this._state.o.onError(e)},i.prototype.completed=function(){this._recurse(this._state)},t}(Jn);ei.prototype.concat=function(){return new ti(this)};var ni=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t){if(!e.isDisposed){var n=rt(e.e.next).call(e.e);if(n===it)return e.o.onError(n.e);if(n.done)return null!==e.lastError?e.o.onError(e.lastError):e.o.onCompleted();var r=n.value;tt(r)&&(r=ci(r));var s=new fn;e.subscription.setDisposable(s),s.setDisposable(r.subscribe(new i(e,t)))}}function i(e,t){this._state=e,this._recurse=t,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn,i={isDisposed:!1,e:this.sources[gt](),subscription:t,lastError:null,o:e},r=Dn.scheduleRecursive(i,n);return new vn([t,r,new A(i)])},en(i,zn),i.prototype.next=function(e){this._state.o.onNext(e)},i.prototype.error=function(e){this._state.lastError=e,this._recurse(this._state)},i.prototype.completed=function(){this._state.o.onCompleted()},t}(Jn);ei.prototype.catchError=function(){return new ni(this)};var ii=function(e){function t(e,t){this.v=e,this.c=null==t?-1:t}function n(e){this.v=e.v,this.l=e.c}return en(t,e),t.prototype[gt]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?vt:(this.l>0&&this.l--,{done:!1,value:this.v})},t}(ei),ri=ei.repeat=function(e,t){return new ii(e,t)},si=function(e){function t(e,t,n){this.s=e,this.fn=t?wt(t,n,3):null}function n(e){this.i=-1,this.s=e.s,this.l=this.s.length,this.fn=e.fn}return en(t,e),t.prototype[gt]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:vt},t}(ei),oi=ei.of=function(e,t,n){return new si(e,t,n)},ai=function(e){function t(t,n){this.source=t,this._s=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Qn(this._s,e))},t}(Jn);Wn.observeOn=function(e){return new ai(this,e)};var li=function(e){function t(t,n){this.source=t,this._s=n,e.call(this)}function n(e,t){var n=t[0],i=t[1],r=t[2];i.setDisposable(new R(e,n.subscribe(r)))}return en(t,e),t.prototype.subscribeCore=function(e){var t=new fn,i=new mn;return i.setDisposable(t),t.setDisposable(this._s.schedule([this.source,i,e],n)),i},t}(Jn);Wn.subscribeOn=function(e){return new li(this,e)};var ui=function(e){function t(t,n){this._p=t,this._s=n,e.call(this)}function n(e,t){var n=t[0],i=t[1];n.onNext(i),n.onCompleted()}function i(e,t){var n=t[0],i=t[1];n.onError(i)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new fn,r=this,s=this._p;return nt(s)&&(s=rt(s)(),s===it)?(e.onError(s.e),t):(s.then(function(i){t.setDisposable(r._s.schedule([e,i],n))},function(n){t.setDisposable(r._s.schedule([e,n],i))}),t)},t}(Jn),ci=$n.fromPromise=function(e,t){return t||(t=On),new ui(e,t)};Wn.toPromise=function(e){if(e||(e=Ye.config.Promise),!e)throw new ht("Promise type not provided nor in Rx.config.Promise");var t=this;return new e(function(e,n){var i;t.subscribe(function(e){i=e},n,function(){e(i)})})};var di=function(e){function t(t){this.source=t,e.call(this)}function n(e){this.o=e,this.a=[],zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e))},en(n,zn),n.prototype.next=function(e){this.a.push(e)},n.prototype.error=function(e){this.o.onError(e)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},t}(Jn);Wn.toArray=function(){return new di(this)},$n.create=function(e,t){return new Ao(e,t)};var pi=function(e){function t(t){this._f=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=rt(this._f)();return t===it?Pi(t.e).subscribe(e):(tt(t)&&(t=ci(t)),t.subscribe(e))},t}(Jn),hi=$n.defer=function(e){return new pi(e)},fi=function(e){function t(t){this.scheduler=t,e.call(this)}function n(e,t){this.observer=e,this.scheduler=t}function i(e,t){return t.onCompleted(),cn}return en(t,e),t.prototype.subscribeCore=function(e){var t=new n(e,this.scheduler);return t.run()},n.prototype.run=function(){var e=this.observer;return this.scheduler===kn?i(null,e):this.scheduler.schedule(e,i)},t}(Jn),mi=new fi(kn),gi=$n.empty=function(e){return Cn(e)||(e=kn),e===kn?mi:new fi(e)},vi=function(e){function t(t,n,i){this._iterable=t,this._fn=n,this._scheduler=i,e.call(this)}function n(e,t,n){return function(i,r){var s=rt(t.next).call(t);if(s===it)return e.onError(s.e);if(s.done)return e.onCompleted();var o=s.value;return nt(n)&&(o=rt(n)(o,i),o===it)?e.onError(o.e):(e.onNext(o),void r(i+1))}}return en(t,e),t.prototype.subscribeCore=function(e){var t=Object(this._iterable),i=L(t);return this._scheduler.scheduleRecursive(0,n(e,i,this._fn))},t}(Jn),bi=Math.pow(2,53)-1;P.prototype[gt]=function(){return new I(this._s)},I.prototype[gt]=function(){return this},I.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:vt},M.prototype[gt]=function(){return new O(this._a)},O.prototype[gt]=function(){return this},O.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:vt};var yi=$n.from=function(e,t,n,i){if(null==e)throw new Error("iterable cannot be null.");if(t&&!nt(t))throw new Error("mapFn when provided must be a function");if(t)var r=wt(t,n,2);return Cn(i)||(i=Dn),new vi(e,r,i)},wi=function(e){function t(t,n){this._args=t,this._scheduler=n,e.call(this)}function n(e,t){var n=t.length;return function(i,r){i<n?(e.onNext(t[i]),r(i+1)):e.onCompleted()}}return en(t,e),t.prototype.subscribeCore=function(e){return this._scheduler.scheduleRecursive(0,n(e,this._args))},t}(Jn),_i=$n.fromArray=function(e,t){return Cn(t)||(t=Dn),new wi(e,t)},Ci=function(e){function t(t,n,i,r,s){this._initialState=t,this._cndFn=n,this._itrFn=i,this._resFn=r,this._s=s,e.call(this)}function n(e,t){if(e.first)e.first=!1;else if(e.newState=rt(e.self._itrFn)(e.newState),e.newState===it)return e.o.onError(e.newState.e);var n=rt(e.self._cndFn)(e.newState);if(n===it)return e.o.onError(n.e);if(n){var i=rt(e.self._resFn)(e.newState);if(i===it)return e.o.onError(i.e);e.o.onNext(i),t(e)}else e.o.onCompleted()}return en(t,e),t.prototype.subscribeCore=function(e){var t={o:e,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(t,n)},t}(Jn);$n.generate=function(e,t,n,i,r){return Cn(r)||(r=Dn),new Ci(e,t,n,i,r)},$n.of=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wi(t,Dn)},$n.ofWithScheduler=function(e){for(var t=arguments.length,n=new Array(t-1),i=1;i<t;i++)n[i-1]=arguments[i];return new wi(n,e)},$n.ofArrayChanges=function(e){if(!Array.isArray(e))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Ao(function(t){function n(e){for(var n=0,i=e.length;n<i;n++)t.onNext(e[n])}return Array.observe(e,n),function(){Array.unobserve(e,n)}})},$n.ofObjectChanges=function(e){if(null==e)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Ao(function(t){function n(e){for(var n=0,i=e.length;n<i;n++)t.onNext(e[n])}return Object.observe(e,n),function(){Object.unobserve(e,n)}})};var Si=function(e){function t(){e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return cn},t}(Jn),Ei=new Si,Ti=$n.never=function(){return Ei},xi=function(e){function t(t,n){this._o=t,this._keys=Object.keys(t),this._scheduler=n,e.call(this)}function n(e,t,n){return function(i,r){if(i<n.length){
var s=n[i];e.onNext([s,t[s]]),r(i+1)}else e.onCompleted()}}return en(t,e),t.prototype.subscribeCore=function(e){return this._scheduler.scheduleRecursive(0,n(e,this._o,this._keys))},t}(Jn);$n.pairs=function(e,t){return t||(t=Dn),new xi(e,t)};var ki=function(e){function t(t,n,i){this.start=t,this.rangeCount=n,this.scheduler=i,e.call(this)}function n(e,t,n){return function(i,r){i<t?(n.onNext(e+i),r(i+1)):n.onCompleted()}}return en(t,e),t.prototype.subscribeCore=function(e){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,e))},t}(Jn);$n.range=function(e,t,n){return Cn(n)||(n=Dn),new ki(e,t,n)};var Ri=function(e){function t(t,n,i){this.value=t,this.repeatCount=null==n?-1:n,this.scheduler=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new U(e,this);return t.run()},t}(Jn);U.prototype.run=function(){function e(e,i){return(e===-1||e>0)&&(t.onNext(n),e>0&&e--),0===e?t.onCompleted():void i(e)}var t=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,e)},$n.repeat=function(e,t,n){return Cn(n)||(n=Dn),new Ri(e,t,n)};var Di=function(e){function t(t,n){this._value=t,this._scheduler=n,e.call(this)}function n(e,t){var n=t[0],i=t[1];return i.onNext(n),i.onCompleted(),cn}return en(t,e),t.prototype.subscribeCore=function(e){var t=[this._value,e];return this._scheduler===kn?n(null,t):this._scheduler.schedule(t,n)},t}(Jn),Ai=($n["return"]=$n.just=function(e,t){return Cn(t)||(t=kn),new Di(e,t)},function(e){function t(t,n){this._error=t,this._scheduler=n,e.call(this)}function n(e,t){var n=t[0],i=t[1];return i.onError(n),cn}return en(t,e),t.prototype.subscribeCore=function(e){var t=[this._error,e];return this._scheduler===kn?n(null,t):this._scheduler.schedule(t,n)},t}(Jn)),Pi=$n["throw"]=function(e,t){return Cn(t)||(t=kn),new Ai(e,t)},Ii=function(e){function t(t,n){this._resFn=t,this._obsFn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=cn,n=rt(this._resFn)();if(n===it)return new gn(Pi(n.e).subscribe(e),t);n&&(t=n);var i=rt(this._obsFn)(n);return i===it?new gn(Pi(i.e).subscribe(e),t):new gn(i.subscribe(e),t)},t}(Jn);$n.using=function(e,t){return new Ii(e,t)},Wn.amb=function(e){var t=this;return new Ao(function(n){function i(){s||(s=o,u.dispose())}function r(){s||(s=a,l.dispose())}var s,o="L",a="R",l=new fn,u=new fn;tt(e)&&(e=ci(e));var c=qn(function(e){i(),s===o&&n.onNext(e)},function(e){i(),s===o&&n.onError(e)},function(){i(),s===o&&n.onCompleted()}),d=qn(function(e){r(),s===a&&n.onNext(e)},function(e){r(),s===a&&n.onError(e)},function(){r(),s===a&&n.onCompleted()});return l.setDisposable(t.subscribe(c)),u.setDisposable(e.subscribe(d)),new gn(l,u)})},$n.amb=function(){var e,t=Ti();if(Array.isArray(arguments[0]))e=arguments[0];else{var n=arguments.length;e=new Array(e);for(var i=0;i<n;i++)e[i]=arguments[i]}for(var i=0,n=e.length;i<n;i++)t=j(t,e[i]);return t};var Mi=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new fn,n=new mn;return n.setDisposable(t),t.setDisposable(this.source.subscribe(new Oi(e,n,this._fn))),n},t}(Jn),Oi=function(e){function t(t,n,i){this._o=t,this._s=n,this._fn=i,e.call(this)}return en(t,e),t.prototype.next=function(e){this._o.onNext(e)},t.prototype.completed=function(){return this._o.onCompleted()},t.prototype.error=function(e){var t=rt(this._fn)(e);if(t===it)return this._o.onError(t.e);tt(t)&&(t=ci(t));var n=new fn;this._s.setDisposable(n),n.setDisposable(t.subscribe(this._o))},t}(zn);Wn["catch"]=function(e){return nt(e)?new Mi(this,e):Ni([this,e])};var Ni=$n["catch"]=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;n<t;n++)e[n]=arguments[n]}return oi(e).catchError()};Wn.combineLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.isArray(t[0])?t[0].unshift(this):t.unshift(this),Vi.apply(this,t)};var Li=function(e){function t(t,n){this._params=t,this._cb=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){for(var t=this._params.length,n=new Array(t),i={hasValue:x(t,H),hasValueAll:!1,isDone:x(t,H),values:new Array(t)},r=0;r<t;r++){var s=this._params[r],o=new fn;n[r]=o,tt(s)&&(s=ci(s)),o.setDisposable(s.subscribe(new Fi(e,r,this._cb,i)))}return new vn(n)},t}(Jn),Fi=function(e){function t(t,n,i,r){this._o=t,this._i=n,this._cb=i,this._state=r,e.call(this)}function n(e){return function(t,n){return n!==e}}return en(t,e),t.prototype.next=function(e){if(this._state.values[this._i]=e,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Qe))){var t=rt(this._cb).apply(null,this._state.values);if(t===it)return this._o.onError(t.e);this._o.onNext(t)}else this._state.isDone.filter(n(this._i)).every(Qe)&&this._o.onCompleted()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Qe)&&this._o.onCompleted()},t}(zn),Vi=$n.combineLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=nt(t[e-1])?t.pop():G;return Array.isArray(t[0])&&(t=t[0]),new Li(t,i)};Wn.concat=function(){for(var e=[],t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e.unshift(this),ji.apply(null,e)};var Bi=function(e){function t(t,n){this._s=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.next=function(e){this._s.o.onNext(e)},t.prototype.error=function(e){this._s.o.onError(e)},t.prototype.completed=function(){this._s.i++,this._fn(this._s)},t}(zn),Ui=function(e){function t(t){this._sources=t,e.call(this)}function n(e,t){if(!e.disposable.isDisposed){if(e.i===e.sources.length)return e.o.onCompleted();var n=e.sources[e.i];tt(n)&&(n=ci(n));var i=new fn;e.subscription.setDisposable(i),i.setDisposable(n.subscribe(new Bi(e,t)))}}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn,i=un(Xe),r={o:e,i:0,subscription:t,disposable:i,sources:this._sources},s=kn.scheduleRecursive(r,n);return new vn([t,i,s])},t}(Jn),ji=$n.concat=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(arguments.length);for(var t=0,n=arguments.length;t<n;t++)e[t]=arguments[t]}return new Ui(e)};Wn.concatAll=function(){return this.merge(1)};var Hi=function(e){function t(t,n){this.source=t,this.maxConcurrent=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new on;return t.add(this.source.subscribe(new Gi(e,this.maxConcurrent,t))),t},t}(Jn),Gi=function(e){function t(t,n,i){this.o=t,this.max=n,this.g=i,this.done=!1,this.q=[],this.activeCount=0,e.call(this)}function n(t,n){this.parent=t,this.sad=n,e.call(this)}return en(t,e),t.prototype.handleSubscribe=function(e){var t=new fn;this.g.add(t),tt(e)&&(e=ci(e)),t.setDisposable(e.subscribe(new n(this,t)))},t.prototype.next=function(e){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(e)):this.q.push(e)},t.prototype.error=function(e){this.o.onError(e)},t.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},en(n,e),n.prototype.next=function(e){this.parent.o.onNext(e)},n.prototype.error=function(e){this.parent.o.onError(e)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},t}(zn);Wn.merge=function(e){return"number"!=typeof e?qi(this,e):new Hi(this,e)};var qi=$n.merge=function(){var e,t,n=[],i=arguments.length;if(arguments[0])if(Cn(arguments[0]))for(e=arguments[0],t=1;t<i;t++)n.push(arguments[t]);else for(e=kn,t=0;t<i;t++)n.push(arguments[t]);else for(e=kn,t=1;t<i;t++)n.push(arguments[t]);return Array.isArray(n[0])&&(n=n[0]),B(e,n).mergeAll()},Wi=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new on,n=new fn;return t.add(n),n.setDisposable(this.source.subscribe(new zi(e,t))),t},t}(Jn),zi=function(e){function t(t,n){this.o=t,this.g=n,this.done=!1,e.call(this)}function n(t,n){this.parent=t,this.sad=n,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=new fn;this.g.add(t),tt(e)&&(e=ci(e)),t.setDisposable(e.subscribe(new n(this,t)))},t.prototype.error=function(e){this.o.onError(e)},t.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},en(n,e),n.prototype.next=function(e){this.parent.o.onNext(e)},n.prototype.error=function(e){this.parent.o.onError(e)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},t}(zn);Wn.mergeAll=function(){return new Wi(this)};var Ki=Ye.CompositeError=function(e){this.innerErrors=e,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Ki.prototype=Object.create(Error.prototype),Ki.prototype.name="CompositeError";var Yi=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new on,n=new fn,i={isStopped:!1,errors:[],o:e};return t.add(n),n.setDisposable(this.source.subscribe(new Xi(t,i))),t},t}(Jn),Xi=function(e){function t(t,n){this._group=t,this._state=n,e.call(this)}function n(e,t){0===t.length?e.onCompleted():1===t.length?e.onError(t[0]):e.onError(new Ki(t))}function i(t,n,i){this._inner=t,this._group=n,this._state=i,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=new fn;this._group.add(t),tt(e)&&(e=ci(e)),t.setDisposable(e.subscribe(new i(t,this._group,this._state)))},t.prototype.error=function(e){this._state.errors.push(e),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},t.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},en(i,e),i.prototype.next=function(e){this._state.o.onNext(e)},i.prototype.error=function(e){this._state.errors.push(e),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},i.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},t}(zn);$n.mergeDelayError=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;n<t;n++)e[n]=arguments[n]}var i=B(null,e);return new Yi(i)},Wn.onErrorResumeNext=function(e){if(!e)throw new Error("Second observable is required");return Ji([this,e])};var Qi=function(e){function t(t){this.sources=t,e.call(this)}function n(e,t){if(e.pos<e.sources.length){var n=e.sources[e.pos++];tt(n)&&(n=ci(n));var i=new fn;e.subscription.setDisposable(i),i.setDisposable(n.subscribe(new $i(e,t)))}else e.o.onCompleted()}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn,i={pos:0,subscription:t,o:e,sources:this.sources},r=kn.scheduleRecursive(i,n);return new gn(t,r)},t}(Jn),$i=function(e){function t(t,n){this._state=t,this._recurse=n,e.call(this)}return en(t,e),t.prototype.next=function(e){this._state.o.onNext(e)},t.prototype.error=function(){this._recurse(this._state)},t.prototype.completed=function(){this._recurse(this._state)},t}(zn),Ji=$n.onErrorResumeNext=function(){var e=[];if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var n=0;n<t;n++)e[n]=arguments[n]}return new Qi(e)},Zi=function(e){function t(t,n){this._s=t,this._o=tt(n)?ci(n):n,this._open=!1,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new fn;t.setDisposable(this._s.subscribe(new er(e,this))),tt(this._o)&&(this._o=ci(this._o));var n=new fn;return n.setDisposable(this._o.subscribe(new tr(e,this,n))),new gn(t,n)},t}(Jn),er=function(e){function t(t,n){this._o=t,this._p=n,e.call(this)}return en(t,e),t.prototype.next=function(e){this._p._open&&this._o.onNext(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},t}(zn),tr=function(e){function t(t,n,i){this._o=t,this._p=n,this._r=i,e.call(this)}return en(t,e),t.prototype.next=function(){this._p._open=!0,this._r.dispose()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.onCompleted=function(){this._r.dispose()},t}(zn);Wn.skipUntil=function(e){return new Zi(this,e)};var nr=function(e){function t(t){this.source=t,e.call(this)}function n(e,t){this.o=e,this.inner=t,this.stopped=!1,this.latest=0,this.hasLatest=!1,zn.call(this)}function i(e,t){this.parent=e,this.id=t,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn,i=this.source.subscribe(new n(e,t));return new gn(i,t)},en(n,zn),n.prototype.next=function(e){var t=new fn,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(t),tt(e)&&(e=ci(e)),t.setDisposable(e.subscribe(new i(this,n)))},n.prototype.error=function(e){this.o.onError(e)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},en(i,zn),i.prototype.next=function(e){this.parent.latest===this.id&&this.parent.o.onNext(e)},i.prototype.error=function(e){this.parent.latest===this.id&&this.parent.o.onError(e)},i.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},t}(Jn);Wn["switch"]=Wn.switchLatest=function(){return new nr(this)};var ir=function(e){function t(t,n){this.source=t,this.other=tt(n)?ci(n):n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return new gn(this.source.subscribe(e),this.other.subscribe(new rr(e)))},t}(Jn),rr=function(e){function t(t){this._o=t,e.call(this)}return en(t,e),t.prototype.next=function(){this._o.onCompleted()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.onCompleted=Xe,t}(zn);Wn.takeUntil=function(e){return new ir(this,e)};var sr=function(e){function t(t,n,i){this._s=t,this._ss=n,this._cb=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){for(var t=this._ss.length,n={hasValue:x(t,H),hasValueAll:!1,values:new Array(t)},i=this._ss.length,r=new Array(i+1),s=0;s<i;s++){var o=this._ss[s],a=new fn;tt(o)&&(o=ci(o)),a.setDisposable(o.subscribe(new or(e,s,n))),r[s]=a}var l=new fn;return l.setDisposable(this._s.subscribe(new ar(e,this._cb,n))),r[i]=l,new vn(r)},t}(Jn),or=function(e){function t(t,n,i){this._o=t,this._i=n,this._state=i,e.call(this)}return en(t,e),t.prototype.next=function(e){this._state.values[this._i]=e,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Qe)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=Xe,t}(zn),ar=function(e){function t(t,n,i){this._o=t,this._cb=n,this._state=i,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=[e].concat(this._state.values);if(this._state.hasValueAll){var n=rt(this._cb).apply(null,t);return n===it?this._o.onError(n.e):void this._o.onNext(n)}},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=nt(t[e-1])?t.pop():G;return Array.isArray(t[0])&&(t=t[0]),new sr(this,t,i)};var lr=function(e){function t(t,n){this._s=t,this._cb=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){for(var t=this._s.length,n=new Array(t),i=x(t,H),r=x(t,q),s=0;s<t;s++){var o=this._s[s],a=new fn;n[s]=a,tt(o)&&(o=ci(o)),a.setDisposable(o.subscribe(new ur(e,s,this,r,i)))}return new vn(n)},t}(Jn),ur=function(e){function t(t,n,i,r,s){this._o=t,this._i=n,this._p=i,this._q=r,this._d=s,e.call(this)}function n(e){return e.length>0}function i(e){return e.shift()}function r(e){return function(t,n){return n!==e}}return en(t,e),t.prototype.next=function(e){if(this._q[this._i].push(e),this._q.every(n)){var t=this._q.map(i),s=rt(this._p._cb).apply(null,t);if(s===it)return this._o.onError(s.e);this._o.onNext(s)}else this._d.filter(r(this._i)).every(Qe)&&this._o.onCompleted()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Qe)&&this._o.onCompleted()},t}(zn);Wn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=nt(t[e-1])?t.pop():G;Array.isArray(t[0])&&(t=t[0]);var r=this;return t.unshift(r),new lr(t,i)},$n.zip=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.isArray(t[0])&&(t=nt(t[1])?t[0].concat(t[1]):t[0]);var i=t.shift();return i.zip.apply(i,t)};var cr=function(e){function t(t,n){this.sources=t,this._cb=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){for(var t=this.sources,n=t.length,i=new Array(n),r={q:x(n,q),done:x(n,H),cb:this._cb,o:e},s=0;s<n;s++)!function(e){var n=t[e],s=new fn;(yt(n)||bt(n))&&(n=yi(n)),i[e]=s,s.setDisposable(n.subscribe(new dr(r,e)))}(s);return new vn(i)},t}(Jn),dr=function(e){function t(t,n){this._s=t,this._i=n,e.call(this)}function n(e){return e.length>0}function i(e){return e.shift()}function r(e){return function(t,n){return n!==e}}return en(t,e),t.prototype.next=function(e){if(this._s.q[this._i].push(e),this._s.q.every(n)){var t=this._s.q.map(i),s=rt(this._s.cb).apply(null,t);if(s===it)return this._s.o.onError(s.e);this._s.o.onNext(s)}else this._s.done.filter(r(this._i)).every(Qe)&&this._s.o.onCompleted()},t.prototype.error=function(e){this._s.o.onError(e)},t.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Qe)&&this._s.o.onCompleted()},t}(zn);Wn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=nt(t[e-1])?t.pop():G,r=this;return t.unshift(r),new cr(t,i)},Wn.asObservable=function(){return new Ao(W(this),this)},Wn.bufferWithCount=Wn.bufferCount=function(e,t){return"number"!=typeof t&&(t=e),this.windowWithCount(e,t).flatMap(z).filter(K)};var pr=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new hr(e))},t}(Jn),hr=function(e){function t(t){this._o=t,e.call(this)}return en(t,e),t.prototype.next=function(e){e.accept(this._o)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.dematerialize=function(){return new pr(this)};var fr=function(e){function t(t,n,i){this.source=t,this.keyFn=n,this.comparer=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new mr(e,this.keyFn,this.comparer))},t}(Jn),mr=function(e){function t(t,n,i){this.o=t,this.keyFn=n,this.comparer=i,this.hasCurrentKey=!1,this.currentKey=null,e.call(this)}return en(t,e),t.prototype.next=function(e){var t,n=e;return nt(this.keyFn)&&(n=rt(this.keyFn)(e),n===it)?this.o.onError(n.e):this.hasCurrentKey&&(t=rt(this.comparer)(this.currentKey,n),t===it)?this.o.onError(t.e):void(this.hasCurrentKey&&t||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(e)))},t.prototype.error=function(e){this.o.onError(e)},t.prototype.completed=function(){this.o.onCompleted()},t}(zn);Wn.distinctUntilChanged=function(e,t){return t||(t=Je),new fr(this,e,t)};var gr=function(e){function t(t,n,i,r){this.source=t,this._oN=n,this._oE=i,this._oC=r,e.call(this)}function n(e,t){this.o=e,this.t=!t._oN||nt(t._oN)?qn(t._oN||Xe,t._oE||Xe,t._oC||Xe):t._oN,this.isStopped=!1,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this))},en(n,zn),n.prototype.next=function(e){var t=rt(this.t.onNext).call(this.t,e);t===it&&this.o.onError(t.e),this.o.onNext(e)},n.prototype.error=function(e){var t=rt(this.t.onError).call(this.t,e);return t===it?this.o.onError(t.e):void this.o.onError(e)},n.prototype.completed=function(){var e=rt(this.t.onCompleted).call(this.t);return e===it?this.o.onError(e.e):void this.o.onCompleted()},t}(Jn);Wn["do"]=Wn.tap=Wn.doAction=function(e,t,n){return new gr(this,e,t,n)},Wn.doOnNext=Wn.tapOnNext=function(e,t){return this.tap("undefined"!=typeof t?function(n){e.call(t,n)}:e)},Wn.doOnError=Wn.tapOnError=function(e,t){return this.tap(Xe,"undefined"!=typeof t?function(n){e.call(t,n)}:e)},Wn.doOnCompleted=Wn.tapOnCompleted=function(e,t){return this.tap(Xe,null,"undefined"!=typeof t?function(){e.call(t)}:e)};var vr=function(e){function t(t,n,i){this.source=t,this._fn=wt(n,i,0),e.call(this)}function n(e,t){this.isDisposed=!1,this._s=e,this._fn=t}return en(t,e),t.prototype.subscribeCore=function(e){var t=rt(this.source.subscribe).call(this.source,e);return t===it&&(this._fn(),c(t.e)),new n(t,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var e=rt(this._s.dispose).call(this._s);this._fn(),e===it&&c(e.e)}},t}(Jn);Wn["finally"]=function(e,t){return new vr(this,e,t)};var br=function(e){function t(t){this.source=t,e.call(this)}function n(e){this.o=e,this.isStopped=!1}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e))},n.prototype.onNext=Xe,n.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.o.onError(e))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(e),!0)},t}(Jn);Wn.ignoreElements=function(){return new br(this)};var yr=function(e){function t(t,n){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new wr(e))},t}(Jn),wr=function(e){function t(t){this._o=t,e.call(this)}return en(t,e),t.prototype.next=function(e){this._o.onNext(Un(e))},t.prototype.error=function(e){this._o.onNext(jn(e)),this._o.onCompleted()},t.prototype.completed=function(){this._o.onNext(Hn()),this._o.onCompleted()},t}(zn);Wn.materialize=function(){return new yr(this)},Wn.repeat=function(e){return ri(this,e).concat()},Wn.retry=function(e){return ri(this,e).catchError()};var _r=function(e){function t(e){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,e.isDisposed=!0)}}}function n(t,n){this.source=t,this._notifier=n,e.call(this)}return en(n,e),n.prototype.subscribeCore=function(e){var n,i=new Oo,r=new Oo,s=this._notifier(i),o=s.subscribe(r),a=this.source["@@iterator"](),l={isDisposed:!1},u=new mn,c=Dn.scheduleRecursive(null,function(t,s){if(!l.isDisposed){var o=a.next();if(o.done)return void(n?e.onError(n):e.onCompleted());var c=o.value;tt(c)&&(c=ci(c));var d=new fn,p=new fn;u.setDisposable(new gn(p,d)),d.setDisposable(c.subscribe(function(t){e.onNext(t)},function(t){p.setDisposable(r.subscribe(s,function(t){e.onError(t)},function(){e.onCompleted()})),i.onNext(t),d.dispose()},function(){e.onCompleted()}))}});return new vn([o,u,c,t(l)])},n}(Jn);Wn.retryWhen=function(e){return new _r(Y(this),e)};var Cr=function(e){function t(e){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,e.isDisposed=!0)}}}function n(t,n){this.source=t,this._notifier=n,e.call(this)}return en(n,e),n.prototype.subscribeCore=function(e){var n,i=new Oo,r=new Oo,s=this._notifier(i),o=s.subscribe(r),a=this.source["@@iterator"](),l={isDisposed:!1},u=new mn,c=Dn.scheduleRecursive(null,function(t,s){if(!l.isDisposed){var o=a.next();if(o.done)return void(n?e.onError(n):e.onCompleted());var c=o.value;tt(c)&&(c=ci(c));var d=new fn,p=new fn;u.setDisposable(new gn(p,d)),d.setDisposable(c.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){p.setDisposable(r.subscribe(s,function(t){e.onError(t)},function(){e.onCompleted()})),i.onNext(null),d.dispose()}))}});return new vn([o,u,c,t(l)])},n}(Jn);Wn.repeatWhen=function(e){return new Cr(Y(this),e)};var Sr=function(e){function t(t,n,i,r){this.source=t,this.accumulator=n,this.hasSeed=i,this.seed=r,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Er(e,this))},t}(Jn),Er=function(e){function t(t,n){this._o=t,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){return!this._hv&&(this._hv=!0),this._ha?this._a=rt(this._fn)(this._a,e,this._i,this._p):(this._a=this._hs?rt(this._fn)(this._s,e,this._i,this._p):e,this._ha=!0),this._a===it?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},t}(zn);Wn.scan=function(){var e,t=!1,n=arguments[0];return 2===arguments.length&&(t=!0,e=arguments[1]),new Sr(this,n,t,e)};var Tr=function(e){function t(t,n){this.source=t,this._c=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new xr(e,this._c))},t}(Jn),xr=function(e){function t(t,n){this._o=t,this._c=n,this._q=[],e.call(this)}return en(t,e),t.prototype.next=function(e){this._q.push(e),this._q.length>this._c&&this._o.onNext(this._q.shift())},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.skipLast=function(e){if(e<0)throw new pt;return new Tr(this,e)},Wn.startWith=function(){var e,t=0;arguments.length&&Cn(arguments[0])?(e=arguments[0],t=1):e=kn;for(var n=[],i=t,r=arguments.length;i<r;i++)n.push(arguments[i]);return ji.apply(null,[_i(n,e),this])};var kr=function(e){function t(t,n){this._o=t,this._c=n,this._q=[],e.call(this)}return en(t,e),t.prototype.next=function(e){this._q.push(e),this._q.length>this._c&&this._q.shift()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},t}(zn);Wn.takeLast=function(e){if(e<0)throw new pt;var t=this;return new Ao(function(n){return t.subscribe(new kr(n,e))},t)};var Rr=function(e){function t(t,n){this._o=t,this._c=n,this._q=[],e.call(this)}return en(t,e),t.prototype.next=function(e){this._q.push(e),this._q.length>this._c&&this._q.shift()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},t}(zn);Wn.takeLastBuffer=function(e){if(e<0)throw new pt;var t=this;return new Ao(function(n){return t.subscribe(new Rr(n,e))},t)},Wn.windowWithCount=Wn.windowCount=function(e,t){var n=this;if(+e||(e=0),Math.abs(e)===1/0&&(e=0),e<=0)throw new pt;if(null==t&&(t=e),+t||(t=0),Math.abs(t)===1/0&&(t=0),t<=0)throw new pt;return new Ao(function(i){function r(){var e=new Oo;l.push(e),i.onNext(nn(e,o))}var s=new fn,o=new bn(s),a=0,l=[];return r(),s.setDisposable(n.subscribe(function(n){for(var i=0,s=l.length;i<s;i++)l[i].onNext(n);var o=a-e+1;o>=0&&o%t===0&&l.shift().onCompleted(),++a%t===0&&r()},function(e){for(;l.length>0;)l.shift().onError(e);i.onError(e)},function(){for(;l.length>0;)l.shift().onCompleted();i.onCompleted()})),o},n)},Wn.selectConcat=Wn.concatMap=function(e,t,n){return nt(e)&&nt(t)?this.concatMap(function(n,i){var r=e(n,i);return tt(r)&&(r=ci(r)),(yt(r)||bt(r))&&(r=yi(r)),r.map(function(e,r){return t(n,e,i,r)})}):nt(e)?X(this,e,n):X(this,function(){return e})},Wn.concatMapObserver=Wn.selectConcatObserver=function(e,t,n,i){var r=this,s=wt(e,i,2),o=wt(t,i,1),a=wt(n,i,0);return new Ao(function(e){var t=0;return r.subscribe(function(n){var i;try{i=s(n,t++)}catch(r){return void e.onError(r)}tt(i)&&(i=ci(i)),e.onNext(i)},function(t){var n;try{n=o(t)}catch(i){return void e.onError(i)}tt(n)&&(n=ci(n)),e.onNext(n),e.onCompleted()},function(){var t;try{t=a()}catch(n){return void e.onError(n)}tt(t)&&(t=ci(t)),e.onNext(t),e.onCompleted()})},this).concatAll()};var Dr=function(e){function t(t,n){this._o=t,this._d=n,this._f=!1,e.call(this)}return en(t,e),t.prototype.next=function(e){this._f=!0,this._o.onNext(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},t}(zn);Wn.defaultIfEmpty=function(e){var t=this;return e===o&&(e=null),new Ao(function(n){return t.subscribe(new Dr(n,e))},t)},$.prototype.push=function(e){var t=Q(this.set,e,this.comparer)===-1;return t&&this.set.push(e),t};var Ar=function(e){function t(t,n,i){this.source=t,this._keyFn=n,this._cmpFn=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Pr(e,this._keyFn,this._cmpFn))},t}(Jn),Pr=function(e){function t(t,n,i){this._o=t,this._keyFn=n,this._h=new $(i),e.call(this)}return en(t,e),t.prototype.next=function(e){var t=e;return nt(this._keyFn)&&(t=rt(this._keyFn)(e),t===it)?this._o.onError(t.e):void(this._h.push(t)&&this._o.onNext(e))},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.distinct=function(e,t){return t||(t=Je),new Ar(this,e,t)},Wn.groupBy=function(e,t){return this.groupByUntil(e,t,Ti)},Wn.groupByUntil=function(e,t,n){var i=this;return new Ao(function(r){var s=new zs,a=new on,l=new bn(a),u=function(e){return function(t){t.onError(e)}};return a.add(i.subscribe(function(i){var c=rt(e)(i);if(c===it)return s.forEach(u(c.e)),r.onError(c.e);var d=!1,p=s.get(c);if(p===o&&(p=new Oo,s.set(c,p),d=!0),d){var h=new Mo(c,p,l),f=new Mo(c,p),m=rt(n)(f);if(m===it)return s.forEach(u(m.e)),r.onError(m.e);r.onNext(h);var g=new fn;a.add(g),g.setDisposable(m.take(1).subscribe(Xe,function(e){s.forEach(u(e)),r.onError(e)},function(){s["delete"](c)&&p.onCompleted(),a.remove(g)}))}var v=i;return nt(t)&&(v=rt(t)(i),v===it)?(s.forEach(u(v.e)),r.onError(v.e)):void p.onNext(v)},function(e){s.forEach(u(e)),r.onError(e)},function(){s.forEach(function(e){e.onCompleted()}),r.onCompleted()})),l},i)};var Ir=function(e){function t(t,n,i){this.source=t,this.selector=wt(n,i,3),e.call(this)}function n(e,t){return function(n,i,r){return e.call(this,t.selector(n,i,r),i,r)}}function i(e,t,n){this.o=e,this.selector=t,this.source=n,this.i=0,zn.call(this)}return en(t,e),t.prototype.internalMap=function(e,i){return new t(this.source,n(e,this),i)},t.prototype.subscribeCore=function(e){return this.source.subscribe(new i(e,this.selector,this))},en(i,zn),i.prototype.next=function(e){var t=rt(this.selector)(e,this.i++,this.source);return t===it?this.o.onError(t.e):void this.o.onNext(t)},i.prototype.error=function(e){this.o.onError(e)},i.prototype.completed=function(){this.o.onCompleted()},t}(Jn);Wn.map=Wn.select=function(e,t){var n="function"==typeof e?e:function(){return e};return this instanceof Ir?this.internalMap(n,t):new Ir(this,n,t)},Wn.pluck=function(){var e=arguments.length,t=new Array(e);if(0===e)throw new Error("List of properties cannot be empty.");for(var n=0;n<e;n++)t[n]=arguments[n];return this.map(J(t,e))},Wn.flatMap=Wn.selectMany=Wn.mergeMap=function(e,t,n){return new Zn(this,e,t,n).mergeAll()},Wn.flatMapObserver=Wn.selectManyObserver=function(e,t,n,i){var r=this;return new Ao(function(s){var o=0;return r.subscribe(function(t){var n;try{n=e.call(i,t,o++)}catch(r){return void s.onError(r)}tt(n)&&(n=ci(n)),s.onNext(n)},function(e){var n;try{n=t.call(i,e)}catch(r){return void s.onError(r)}tt(n)&&(n=ci(n)),s.onNext(n),s.onCompleted()},function(){var e;try{e=n.call(i)}catch(t){return void s.onError(t)}tt(e)&&(e=ci(e)),s.onNext(e),s.onCompleted()})},r).mergeAll()},Wn.flatMapLatest=Wn.switchMap=function(e,t,n){return new Zn(this,e,t,n).switchLatest()};var Mr=function(e){function t(t,n){this.source=t,this._count=n,e.call(this)}function n(e,t){this._o=e,this._r=t,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this._count))},en(n,zn),n.prototype.next=function(e){this._r<=0?this._o.onNext(e):this._r--},n.prototype.error=function(e){this._o.onError(e)},n.prototype.completed=function(){this._o.onCompleted()},t}(Jn);
Wn.skip=function(e){if(e<0)throw new pt;return new Mr(this,e)};var Or=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Nr(e,this))},t}(Jn),Nr=function(e){function t(t,n){this._o=t,this._p=n,this._i=0,this._r=!1,e.call(this)}return en(t,e),t.prototype.next=function(e){if(!this._r){var t=rt(this._p._fn)(e,this._i++,this._p);if(t===it)return this._o.onError(t.e);this._r=!t}this._r&&this._o.onNext(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.skipWhile=function(e,t){var n=wt(e,t,3);return new Or(this,n)};var Lr=function(e){function t(t,n){this.source=t,this._count=n,e.call(this)}function n(e,t){this._o=e,this._c=t,this._r=t,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new n(e,this._count))},en(n,zn),n.prototype.next=function(e){this._r-- >0&&(this._o.onNext(e),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(e){this._o.onError(e)},n.prototype.completed=function(){this._o.onCompleted()},t}(Jn);Wn.take=function(e,t){if(e<0)throw new pt;return 0===e?gi(t):new Lr(this,e)};var Fr=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Vr(e,this))},t}(Jn),Vr=function(e){function t(t,n){this._o=t,this._p=n,this._i=0,this._r=!0,e.call(this)}return en(t,e),t.prototype.next=function(e){return this._r&&(this._r=rt(this._p._fn)(e,this._i++,this._p),this._r===it)?this._o.onError(this._r.e):void(this._r?this._o.onNext(e):this._o.onCompleted())},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.takeWhile=function(e,t){var n=wt(e,t,3);return new Fr(this,n)};var Br=function(e){function t(t,n,i){this.source=t,this.predicate=wt(n,i,3),e.call(this)}function n(e,t){return function(n,i,r){return t.predicate(n,i,r)&&e.call(this,n,i,r)}}function i(e,t,n){this.o=e,this.predicate=t,this.source=n,this.i=0,zn.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new i(e,this.predicate,this))},t.prototype.internalFilter=function(e,i){return new t(this.source,n(e,this),i)},en(i,zn),i.prototype.next=function(e){var t=rt(this.predicate)(e,this.i++,this.source);return t===it?this.o.onError(t.e):void(t&&this.o.onNext(e))},i.prototype.error=function(e){this.o.onError(e)},i.prototype.completed=function(){this.o.onCompleted()},t}(Jn);Wn.filter=Wn.where=function(e,t){return this instanceof Br?this.internalFilter(e,t):new Br(this,e,t)};var Ur=function(e){function t(t,n,i){this.source=t,this._k=n,this._c=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new jr(e,this._k,this._c))},t}(Jn),jr=function(e){function t(t,n,i){this._o=t,this._k=n,this._c=i,this._v=null,this._hv=!1,this._l=[],e.call(this)}return en(t,e),t.prototype.next=function(e){var t=rt(this._k)(e);if(t===it)return this._o.onError(t.e);var n=0;if(this._hv){if(n=rt(this._c)(t,this._v),n===it)return this._o.onError(n.e)}else this._hv=!0,this._v=t;n>0&&(this._v=t,this._l=[]),n>=0&&this._l.push(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},t}(zn),Hr=function(e){function t(t,n,i,r){this.source=t,this.accumulator=n,this.hasSeed=i,this.seed=r,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Gr(e,this))},t}(Jn),Gr=function(e){function t(t,n){this._o=t,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){return!this._hv&&(this._hv=!0),this._ha?this._a=rt(this._fn)(this._a,e,this._i,this._p):(this._a=this._hs?rt(this._fn)(this._s,e,this._i,this._p):e,this._ha=!0),this._a===it?this._o.onError(this._a.e):void this._i++},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new ct),this._o.onCompleted()},t}(zn);Wn.reduce=function(){var e,t=!1,n=arguments[0];return 2===arguments.length&&(t=!0,e=arguments[1]),new Hr(this,n,t,e)};var qr=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Wr(e,this._fn,this.source))},t}(Jn),Wr=function(e){function t(t,n,i){this._o=t,this._fn=n,this._s=i,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=rt(this._fn)(e,this._i++,this._s);return t===it?this._o.onError(t.e):void(Boolean(t)&&(this._o.onNext(!0),this._o.onCompleted()))},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},t}(zn);Wn.some=function(e,t){var n=wt(e,t,3);return new qr(this,n)};var zr=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Kr(e))},t}(Jn),Kr=function(e){function t(t){this._o=t,e.call(this)}return en(t,e),t.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},t}(zn);Wn.isEmpty=function(){return new zr(this)};var Yr=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Xr(e,this._fn,this.source))},t}(Jn),Xr=function(e){function t(t,n,i){this._o=t,this._fn=n,this._s=i,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=rt(this._fn)(e,this._i++,this._s);return t===it?this._o.onError(t.e):void(Boolean(t)||(this._o.onNext(!1),this._o.onCompleted()))},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},t}(zn);Wn.every=function(e,t){var n=wt(e,t,3);return new Yr(this,n)};var Qr=function(e){function t(t,n,i){var r=+i||0;Math.abs(r)===1/0&&(r=0),this.source=t,this._elem=n,this._n=r,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this._n<0?(e.onNext(!1),e.onCompleted(),cn):this.source.subscribe(new $r(e,this._elem,this._n))},t}(Jn),$r=function(e){function t(t,n,i){this._o=t,this._elem=n,this._n=i,this._i=0,e.call(this)}function n(e,t){return 0===e&&0===t||e===t||isNaN(e)&&isNaN(t)}return en(t,e),t.prototype.next=function(e){this._i++>=this._n&&n(e,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},t}(zn);Wn.includes=function(e,t){return new Qr(this,e,t)};var Jr=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Zr(e,this._fn,this.source))},t}(Jn),Zr=function(e){function t(t,n,i){this._o=t,this._fn=n,this._s=i,this._i=0,this._c=0,e.call(this)}return en(t,e),t.prototype.next=function(e){if(this._fn){var t=rt(this._fn)(e,this._i++,this._s);if(t===it)return this._o.onError(t.e);Boolean(t)&&this._c++}else this._c++},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},t}(zn);Wn.count=function(e,t){var n=wt(e,t,3);return new Jr(this,n)};var es=function(e){function t(t,n,i){this.source=t,this._e=n,this._n=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this._n<0?(e.onNext(-1),e.onCompleted(),cn):this.source.subscribe(new ts(e,this._e,this._n))},t}(Jn),ts=function(e){function t(t,n,i){this._o=t,this._e=n,this._n=i,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){this._i>=this._n&&e===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},t}(zn);Wn.indexOf=function(e,t){var n=+t||0;return Math.abs(n)===1/0&&(n=0),new es(this,e,n)};var ns=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new is(e,this._fn,this.source))},t}(Jn),is=function(e){function t(t,n,i){this._o=t,this._fn=n,this._s=i,this._i=0,this._c=0,e.call(this)}return en(t,e),t.prototype.next=function(e){if(this._fn){var t=rt(this._fn)(e,this._i++,this._s);if(t===it)return this._o.onError(t.e);this._c+=t}else this._c+=e},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},t}(zn);Wn.sum=function(e,t){var n=wt(e,t,3);return new ns(this,n)},Wn.minBy=function(e,t){return t||(t=Ze),new Ur(this,e,function(e,n){return t(e,n)*-1})},Wn.min=function(e){return this.minBy(Qe,e).map(Z)},Wn.maxBy=function(e,t){return t||(t=Ze),new Ur(this,e,t)},Wn.max=function(e){return this.maxBy(Qe,e).map(Z)};var rs=function(e){function t(t,n){this.source=t,this._fn=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new ss(e,this._fn,this.source))},t}(Jn),ss=function(e){function t(t,n,i){this._o=t,this._fn=n,this._s=i,this._c=0,this._t=0,e.call(this)}return en(t,e),t.prototype.next=function(e){if(this._fn){var t=rt(this._fn)(e,this._c++,this._s);if(t===it)return this._o.onError(t.e);this._t+=t}else this._c++,this._t+=e},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){return 0===this._c?this._o.onError(new ct):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},t}(zn);Wn.average=function(e,t){var n,i=this;return nt(e)&&(n=wt(e,t,3)),new rs(i,n)},Wn.sequenceEqual=function(e,t){var n=this;return t||(t=Je),new Ao(function(i){var r=!1,s=!1,o=[],a=[],l=n.subscribe(function(e){if(a.length>0){var n=a.shift(),r=rt(t)(n,e);if(r===it)return i.onError(r.e);r||(i.onNext(!1),i.onCompleted())}else s?(i.onNext(!1),i.onCompleted()):o.push(e)},function(e){i.onError(e)},function(){r=!0,0===o.length&&(a.length>0?(i.onNext(!1),i.onCompleted()):s&&(i.onNext(!0),i.onCompleted()))});(yt(e)||bt(e))&&(e=yi(e)),tt(e)&&(e=ci(e));var u=e.subscribe(function(e){if(o.length>0){var n=o.shift(),s=rt(t)(n,e);if(s===it)return i.onError(s.e);s||(i.onNext(!1),i.onCompleted())}else r?(i.onNext(!1),i.onCompleted()):a.push(e)},function(e){i.onError(e)},function(){s=!0,0===a.length&&(o.length>0?(i.onNext(!1),i.onCompleted()):r&&(i.onNext(!0),i.onCompleted()))});return new gn(l,u)},n)};var os=function(e){function t(t,n,i){this.source=t,this._i=n,this._d=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new as(e,this._i,this._d))},t}(Jn),as=function(e){function t(t,n,i){this._o=t,this._i=n,this._d=i,e.call(this)}return en(t,e),t.prototype.next=function(e){0===this._i--&&(this._o.onNext(e),this._o.onCompleted())},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._d===o?this._o.onError(new pt):(this._o.onNext(this._d),this._o.onCompleted())},t}(zn);Wn.elementAt=function(e,t){if(e<0)throw new pt;return new os(this,e,t)};var ls=function(e){function t(t,n,i){this._o=t,this._obj=n,this._s=i,this._i=0,this._hv=!1,this._v=null,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=!1;if(this._obj.predicate){var n=rt(this._obj.predicate)(e,this._i++,this._s);if(n===it)return this._o.onError(n.e);Boolean(n)&&(t=!0)}else this._obj.predicate||(t=!0);if(t){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=e}},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===o?this._o.onError(new ct):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},t}(zn);Wn.single=function(e,t){var n={},i=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},nt(n.predicate)){var r=n.predicate;n.predicate=wt(r,n.thisArg,3)}return new Ao(function(e){return i.subscribe(new ls(e,n,i))},i)};var us=function(e){function t(t,n){this.source=t,this._obj=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new cs(e,this._obj,this.source))},t}(Jn),cs=function(e){function t(t,n,i){this._o=t,this._obj=n,this._s=i,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){if(this._obj.predicate){var t=rt(this._obj.predicate)(e,this._i++,this._s);if(t===it)return this._o.onError(t.e);Boolean(t)&&(this._o.onNext(e),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(e),this._o.onCompleted())},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._obj.defaultValue===o?this._o.onError(new ct):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},t}(zn);Wn.first=function(){var e={};if(e="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},nt(e.predicate)){var t=e.predicate;e.predicate=wt(t,e.thisArg,3)}return new us(this,e)};var ds=function(e){function t(t,n){this.source=t,this._obj=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new ps(e,this._obj,this.source))},t}(Jn),ps=function(e){function t(t,n,i){this._o=t,this._obj=n,this._s=i,this._i=0,this._hv=!1,this._v=null,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=!1;if(this._obj.predicate){var n=rt(this._obj.predicate)(e,this._i++,this._s);if(n===it)return this._o.onError(n.e);Boolean(n)&&(t=!0)}else this._obj.predicate||(t=!0);t&&(this._hv=!0,this._v=e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===o?this._o.onError(new ct):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},t}(zn);Wn.last=function(){var e={};if(e="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},nt(e.predicate)){var t=e.predicate;e.predicate=wt(t,e.thisArg,3)}return new ds(this,e)};var hs=function(e){function t(t,n,i,r){this._o=t,this._s=n,this._cb=i,this._y=r,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=rt(this._cb)(e,this._i,this._s);return t===it?this._o.onError(t.e):void(t?(this._o.onNext(this._y?this._i:e),this._o.onCompleted()):this._i++)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},t}(zn);Wn.find=function(e,t){return ee(this,e,t,!1)},Wn.findIndex=function(e,t){return ee(this,e,t,!0)};var fs=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new ms(e))},t}(Jn),ms=function(e){function t(t){this._o=t,this._s=new Ke.Set,e.call(this)}return en(t,e),t.prototype.next=function(e){this._s.add(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},t}(zn);Wn.toSet=function(){if("undefined"==typeof Ke.Set)throw new TypeError;return new fs(this)};var gs=function(e){function t(t,n,i){this.source=t,this._k=n,this._e=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new vs(e,this._k,this._e))},t}(Jn),vs=function(e){function t(t,n,i){this._o=t,this._k=n,this._e=i,this._m=new Ke.Map,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=rt(this._k)(e);if(t===it)return this._o.onError(t.e);var n=e;return this._e&&(n=rt(this._e)(e),n===it)?this._o.onError(n.e):void this._m.set(t,n)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},t}(zn);Wn.toMap=function(e,t){if("undefined"==typeof Ke.Map)throw new TypeError;return new gs(this,e,t)};var bs=function(e){function t(t,n,i){this.source=t,this._b=n,this._e=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new ys(e,this._b,this._e))},t}(Jn),ys=function(e){function t(t,n,i){this._o=t,this._b=n,this._e=i,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(e)),this._i++},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.slice=function(e,t){var n=e||0;if(n<0)throw new Ye.ArgumentOutOfRangeError;if("number"==typeof t&&t<n)throw new Ye.ArgumentOutOfRangeError;return new bs(this,n,t)};var ws=function(e){function t(t,n,i){this.source=t,this._e=n,this._n=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this._n<0?(e.onNext(-1),e.onCompleted(),cn):this.source.subscribe(new _s(e,this._e,this._n))},t}(Jn),_s=function(e){function t(t,n,i){this._o=t,this._e=n,this._n=i,this._v=0,this._hv=!1,this._i=0,e.call(this)}return en(t,e),t.prototype.next=function(e){this._i>=this._n&&e===this._e&&(this._hv=!0,this._v=this._i),this._i++},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},t}(zn);Wn.lastIndexOf=function(e,t){var n=+t||0;return Math.abs(n)===1/0&&(n=0),new ws(this,e,n)},$n.wrap=function(e){function t(){return $n.spawn.call(this,e.apply(this,arguments))}return t.__generatorFunction__=e,t};var Cs=$n.spawn=function(){for(var e=arguments[0],t=this,n=[],i=1,r=arguments.length;i<r;i++)n.push(arguments[i]);return new Ao(function(i){function r(t){var n=rt(e.next).call(e,t);return n===it?i.onError(n.e):void o(n)}function s(t){var n=rt(e.next).call(e,t);return n===it?i.onError(n.e):void o(n)}function o(e){if(e.done)return i.onNext(e.value),void i.onCompleted();var n=te.call(t,e.value),o=null,l=!1;$n.isObservable(n)?a.add(n.subscribe(function(e){l=!0,o=e},s,function(){l&&r(o)})):s(new TypeError("type not supported"))}var a=new on;return nt(e)&&(e=e.apply(t,n)),e&&nt(e.next)?(r(),a):(i.onNext(e),i.onCompleted())})};$n.start=function(e,t,n){return Ss(e,t,n)()};var Ss=$n.toAsync=function(e,t,n){return Cn(n)||(n=On),function(){var i=arguments,r=new No;return n.schedule(null,function(){var n;try{n=e.apply(t,i)}catch(s){return void r.onError(s)}r.onNext(n),r.onCompleted()}),r.asObservable()}};$n.fromCallback=function(e,t,n){return function(){"undefined"==typeof t&&(t=this);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return le(e,t,n,r)}},$n.fromNodeCallback=function(e,t,n){return function(){"undefined"==typeof t&&(t=this);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return ce(e,t,n,r)}},he.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Ye.config.useNativeEvents=!1;var Es=function(e){function t(t,n,i){this._el=t,this._n=n,this._fn=i,e.call(this)}function n(e,t){return function(){var n=arguments[0];return nt(t)&&(n=rt(t).apply(null,arguments),n===it)?e.onError(n.e):void e.onNext(n)}}return en(t,e),t.prototype.subscribeCore=function(e){return fe(this._el,this._n,n(e,this._fn))},t}(Jn);$n.fromEvent=function(e,t,n){return e.addListener?xs(function(n){e.addListener(t,n)},function(n){e.removeListener(t,n)},n):Ye.config.useNativeEvents||"function"!=typeof e.on||"function"!=typeof e.off?new Es(e,t,n).publish().refCount():xs(function(n){e.on(t,n)},function(n){e.off(t,n)},n)};var Ts=function(e){function t(t,n,i){this._add=t,this._del=n,this._fn=i,e.call(this)}function n(e,t){return function(){var n=arguments[0];return nt(t)&&(n=rt(t).apply(null,arguments),n===it)?e.onError(n.e):void e.onNext(n)}}function i(e,t,n){this._del=e,this._fn=t,this._ret=n,this.isDisposed=!1}return en(t,e),t.prototype.subscribeCore=function(e){var t=n(e,this._fn),r=this._add(t);return new i(this._del,t,r)},i.prototype.dispose=function(){this.isDisposed||(nt(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},t}(Jn),xs=$n.fromEventPattern=function(e,t,n){return new Ts(e,t,n).publish().refCount()};$n.startAsync=function(e){var t=rt(e)();return t===it?Pi(t.e):ci(t)};var ks=function(e){function t(t,n){this.source=t,this.controller=new Oo,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,e.call(this)}return en(t,e),t.prototype._subscribe=function(e){var t=this.source.publish(),n=t.subscribe(e),i=cn,r=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(e){e?i=t.connect():(i.dispose(),i=cn)});return new vn([n,i,r])},t.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},t.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},t}($n);Wn.pausable=function(e){return new ks(this,e)};var Rs=function(e){function t(t,n){this.source=t,this.controller=new Oo,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,e.call(this)}return en(t,e),t.prototype._subscribe=function(e){function t(){for(;i.length>0;)e.onNext(i.shift())}var n,i=[],r=me(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(e,t){return{data:e,shouldFire:t}}).subscribe(function(r){n!==o&&r.shouldFire!==n?(n=r.shouldFire,r.shouldFire&&t()):(n=r.shouldFire,r.shouldFire?e.onNext(r.data):i.push(r.data))},function(n){t(),e.onError(n)},function(){t(),e.onCompleted()});return r},t.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},t.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},t}($n);Wn.pausableBuffered=function(e){return new Rs(this,e)};var Ds=function(e){function t(t,n,i){e.call(this),this.subject=new As(n,i),this.source=t.multicast(this.subject).refCount()}return en(t,e),t.prototype._subscribe=function(e){return this.source.subscribe(e)},t.prototype.request=function(e){return this.subject.request(null==e?-1:e)},t}($n),As=function(e){function t(t,n){null==t&&(t=!0),e.call(this),this.subject=new Oo,this.enableQueue=t,this.queue=t?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||Dn}return en(t,e),tn(t.prototype,Gn,{_subscribe:function(e){return this.subject.subscribe(e)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Ln.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(e){this.hasFailed=!0,this.error=e,this.enableQueue&&0!==this.queue.length?this.queue.push(Ln.createOnError(e)):(this.subject.onError(e),this.disposeCurrentRequest())},onNext:function(e){this.requestedCount<=0?this.enableQueue&&this.queue.push(Ln.createOnNext(e)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(e))},_processRequest:function(e){if(this.enableQueue)for(;this.queue.length>0&&(e>0||"N"!==this.queue[0].kind);){var t=this.queue.shift();t.accept(this.subject),"N"===t.kind?e--:(this.disposeCurrentRequest(),this.queue=[])}return e},request:function(e){this.disposeCurrentRequest();var t=this;return this.requestedDisposable=this.scheduler.schedule(e,function(e,n){var i=t._processRequest(n),r=t.hasCompleted||t.hasFailed;if(!r&&i>0)return t.requestedCount=i,un(function(){t.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),t}($n);Wn.controlled=function(e,t){return e&&Cn(e)&&(t=e,e=!0),null==e&&(e=!0),new Ds(this,e,t)};var Ps=function(e){function t(t){e.call(this),this.source=t}function n(e,t){return t.source.request(1)}en(t,e),t.prototype._subscribe=function(e){return this.subscription=this.source.subscribe(new i(e,this,this.subscription)),new gn(this.subscription,On.schedule(this,n))};var i=function(e){function t(t,n,i){e.call(this),this.observer=t,this.observable=n,this.cancel=i,this.scheduleDisposable=null}function n(e,t){return t.observable.source.request(1)}return en(t,e),t.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},t.prototype.error=function(e){this.observer.onError(e),this.dispose()},t.prototype.next=function(e){this.observer.onNext(e),this.scheduleDisposable=On.schedule(this,n)},t.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),e.prototype.dispose.call(this)},t}(zn);return t}($n);Ds.prototype.stopAndWait=function(){return new Ps(this)};var Is=function(e){function t(t,n){e.call(this),this.source=t,this.windowSize=n}function n(e,t){return t.source.request(t.windowSize)}en(t,e),t.prototype._subscribe=function(e){return this.subscription=this.source.subscribe(new i(e,this,this.subscription)),new gn(this.subscription,On.schedule(this,n))};var i=function(e){function t(t,n,i){this.observer=t,this.observable=n,this.cancel=i,this.received=0,this.scheduleDisposable=null,e.call(this)}function n(e,t){return t.observable.source.request(t.observable.windowSize)}return en(t,e),t.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},t.prototype.error=function(e){this.observer.onError(e),this.dispose()},t.prototype.next=function(e){this.observer.onNext(e),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=On.schedule(this,n))},t.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),e.prototype.dispose.call(this)},t}(zn);return t}($n);Ds.prototype.windowed=function(e){return new Is(this,e)},Wn.pipe=function(e){function t(){n.resume()}var n=this.pausableBuffered();return e.addListener("drain",t),n.subscribe(function(t){!e.write(t)&&n.pause()},function(t){e.emit("error",t)},function(){!e._isStdio&&e.end(),e.removeListener("drain",t)}),n.resume(),e};var Ms=function(e){function t(t,n,i){this.source=t,this._fn1=n,this._fn2=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=this.source.multicast(this._fn1());return new gn(this._fn2(t).subscribe(e),t.connect())},t}(Jn);Wn.multicast=function(e,t){return nt(e)?new Ms(this,e,t):new Ls(this,e)},Wn.publish=function(e){return e&&nt(e)?this.multicast(function(){return new Oo},e):this.multicast(new Oo)},Wn.share=function(){return this.publish().refCount()},Wn.publishLast=function(e){return e&&nt(e)?this.multicast(function(){return new No},e):this.multicast(new No)},Wn.publishValue=function(e,t){return 2===arguments.length?this.multicast(function(){return new Lo(t)},e):this.multicast(new Lo(e))},Wn.shareValue=function(e){return this.publishValue(e).refCount()},Wn.replay=function(e,t,n,i){return e&&nt(e)?this.multicast(function(){return new Fo(t,n,i)},e):this.multicast(new Fo(t,n,i))},Wn.shareReplay=function(e,t,n){return this.replay(null,e,t,n).refCount()};var Os=function(e,t){this._s=e,this._o=t};Os.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var e=this._s.observers.indexOf(this._o);this._s.observers.splice(e,1),this._o=null}};var Ns=function(e){function t(t){this.source=t,this._count=0,this._connectableSubscription=null,e.call(this)}function n(e,t){this._p=e,this._s=t,this.isDisposed=!1}return en(t,e),t.prototype.subscribeCore=function(e){var t=this.source.subscribe(e);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,t)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},t}(Jn),Ls=Ye.ConnectableObservable=function(e){function t(t,n){this.source=t,this._connection=null,this._source=t.asObservable(),this._subject=n,e.call(this)}function n(e,t){this._p=e,this._s=t}return en(t,e),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},t.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return cn;var e=this._source.subscribe(this._subject);this._connection=new n(this,e)}return this._connection},t.prototype._subscribe=function(e){return this._subject.subscribe(e)},t.prototype.refCount=function(){return new Ns(this)},t}($n);Wn.singleInstance=function(){function e(){return i||(i=!0,t=n["finally"](function(){i=!1}).publish().refCount()),t}var t,n=this,i=!1;return new Ao(function(t){return e().subscribe(t)})},Wn.join=function(e,t,n,i){var r=this;return new Ao(function(s){var o=new on,a=!1,l=!1,u=0,c=0,d=new zs,p=new zs,h=function(e){s.onError(e)};return o.add(r.subscribe(function(e){var n=u++,r=new fn;d.set(n,e),o.add(r);var l=rt(t)(e);return l===it?s.onError(l.e):(r.setDisposable(l.take(1).subscribe(Xe,h,function(){d["delete"](n)&&0===d.size&&a&&s.onCompleted(),o.remove(r)})),void p.forEach(function(t){var n=rt(i)(e,t);return n===it?s.onError(n.e):void s.onNext(n)}))},h,function(){a=!0,(l||0===d.size)&&s.onCompleted()})),o.add(e.subscribe(function(e){var t=c++,r=new fn;p.set(t,e),o.add(r);var a=rt(n)(e);return a===it?s.onError(a.e):(r.setDisposable(a.take(1).subscribe(Xe,h,function(){p["delete"](t)&&0===p.size&&l&&s.onCompleted(),o.remove(r)})),void d.forEach(function(t){var n=rt(i)(t,e);return n===it?s.onError(n.e):void s.onNext(n)}))},h,function(){l=!0,(a||0===p.size)&&s.onCompleted()})),o},r)},Wn.groupJoin=function(e,t,n,i){var r=this;return new Ao(function(s){function o(e){}var a=new on,l=new bn(a),u=new zs,c=new zs,d=0,p=0,o=function(e){return function(t){t.onError(e)}};return a.add(r.subscribe(function(e){var n=new Oo,r=d++;u.set(r,n);var p=rt(i)(e,nn(n,l));if(p===it)return u.forEach(o(p.e)),s.onError(p.e);s.onNext(p),c.forEach(function(e){n.onNext(e)});var h=new fn;a.add(h);var f=rt(t)(e);return f===it?(u.forEach(o(f.e)),s.onError(f.e)):void h.setDisposable(f.take(1).subscribe(Xe,function(e){u.forEach(o(e)),s.onError(e)},function(){u["delete"](r)&&n.onCompleted(),a.remove(h)}))},function(e){u.forEach(o(e)),s.onError(e)},function(){s.onCompleted()})),a.add(e.subscribe(function(e){var t=p++;c.set(t,e);var i=new fn;a.add(i);var r=rt(n)(e);return r===it?(u.forEach(o(r.e)),s.onError(r.e)):(i.setDisposable(r.take(1).subscribe(Xe,function(e){u.forEach(o(e)),s.onError(e)},function(){c["delete"](t),a.remove(i)})),void u.forEach(function(t){t.onNext(e)}))},function(e){u.forEach(o(e)),s.onError(e)})),l},r)},Wn.buffer=function(){return this.window.apply(this,arguments).flatMap(z)},Wn.window=function(e,t){return 1===arguments.length&&"function"!=typeof arguments[0]?ve.call(this,e):"function"==typeof e?be.call(this,e):ge.call(this,e,t)};var Fs=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Vs(e))},t}(Jn),Vs=function(e){function t(t){this._o=t,this._p=null,this._hp=!1,e.call(this)}return en(t,e),t.prototype.next=function(e){this._hp?this._o.onNext([this._p,e]):this._hp=!0,this._p=e},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.pairwise=function(){return new Fs(this)},Wn.partition=function(e,t){var n=wt(e,t,3);return[this.filter(e,t),this.filter(function(e,t,i){return!n(e,t,i)})]};var Bs=function(e){function t(e,t){this.c=e,this.s=t}return en(t,e),t.prototype[gt]=function(){var e=this;return{next:function(){return e.c()?{done:!1,value:e.s}:{done:!0,value:void 0}}}},t}(ei);Wn.letBind=Wn["let"]=function(e){return e(this)},$n["if"]=function(e,t,n){return hi(function(){return n||(n=gi()),tt(t)&&(t=ci(t)),tt(n)&&(n=ci(n)),"function"==typeof n.now&&(n=gi(n)),e()?t:n})},$n["for"]=$n.forIn=function(e,t,n){return oi(e,t,n).concat()};var Us=$n["while"]=$n.whileDo=function(e,t){
return tt(t)&&(t=ci(t)),ye(e,t).concat()};Wn.doWhile=function(e){return ji([this,Us(e,this)])},$n["case"]=function(e,t,n){return hi(function(){tt(n)&&(n=ci(n)),n||(n=gi()),Cn(n)&&(n=gi(n));var i=t[e()];return tt(i)&&(i=ci(i)),i||n})};var js=function(e){function t(t,n,i){this.source=t,this._fn=n,this._scheduler=i,e.call(this)}function n(e,t){var n,i=e[0],r=e[1];if(!(i.q.length>0))return void(i.isAcquired=!1);n=i.q.shift();var s=new fn;i.d.add(s),s.setDisposable(n.subscribe(new Hs(i,r,s))),t([i,r])}return en(t,e),t.prototype._ensureActive=function(e){var t=!1;e.q.length>0&&(t=!e.isAcquired,e.isAcquired=!0),t&&e.m.setDisposable(this._scheduler.scheduleRecursive([e,this],n))},t.prototype.subscribeCore=function(e){var t=new mn,n=new on(t),i={q:[],m:t,d:n,activeCount:0,isAcquired:!1,o:e};return i.q.push(this.source),i.activeCount++,this._ensureActive(i),n},t}(Jn),Hs=function(e){function t(t,n,i){this._s=t,this._p=n,this._m1=i,e.call(this)}return en(t,e),t.prototype.next=function(e){this._s.o.onNext(e);var t=rt(this._p._fn)(e);return t===it?this._s.o.onError(t.e):(this._s.q.push(t),this._s.activeCount++,void this._p._ensureActive(this._s))},t.prototype.error=function(e){this._s.o.onError(e)},t.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},t}(zn);Wn.expand=function(e,t){return Cn(t)||(t=Dn),new js(this,e,t)};var Gs=function(e){function t(t,n){this._sources=t,this._cb=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){if(0===this._sources.length)return e.onCompleted(),cn;for(var t=this._sources.length,n={finished:!1,hasResults:new Array(t),hasCompleted:new Array(t),results:new Array(t)},i=new on,r=0,s=this._sources.length;r<s;r++){var o=this._sources[r];tt(o)&&(o=ci(o)),i.add(o.subscribe(new qs(e,n,r,this._cb,i)))}return i},t}(Jn),qs=function(e){function t(t,n,i,r,s){this._o=t,this._s=n,this._i=i,this._cb=r,this._subs=s,e.call(this)}return en(t,e),t.prototype.next=function(e){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=e)},t.prototype.error=function(e){this._s.finished=!0,this._o.onError(e),this._subs.dispose()},t.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var e=0;e<this._s.results.length;e++)if(!this._s.hasCompleted[e])return;this._s.finished=!0;var t=rt(this._cb).apply(null,this._s.results);if(t===it)return this._o.onError(t.e);this._o.onNext(t),this._o.onCompleted()}},t}(zn);$n.forkJoin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=nt(t[e-1])?t.pop():G;return Array.isArray(t[0])&&(t=t[0]),new Gs(t,i)},Wn.forkJoin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.isArray(t[0])?t[0].unshift(this):t.unshift(this),$n.forkJoin.apply(null,t)},Wn.manySelect=Wn.extend=function(e,t){Cn(t)||(t=Ye.Scheduler.immediate);var n=this;return hi(function(){var i;return n.map(function(e){var t=new Ws(e);return i&&i.onNext(e),i=t,t}).tap(Xe,function(e){i&&i.onError(e)},function(){i&&i.onCompleted()}).observeOn(t).map(e)},n)};var Ws=function(e){function t(t){e.call(this),this.head=t,this.tail=new No}return en(t,e),tn(t.prototype,Gn,{_subscribe:function(e){var t=new on;return t.add(Dn.schedule(this,function(n,i){e.onNext(i.head),t.add(i.tail.mergeAll().subscribe(e))})),t},onCompleted:function(){this.onNext($n.empty())},onError:function(e){this.onNext($n["throw"](e))},onNext:function(e){this.tail.onNext(e),this.tail.onCompleted()}}),t}($n),zs=Ke.Map||function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype["delete"]=function(e){var t=this._keys.indexOf(e);return t!==-1&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.get=function(e){var t=this._keys.indexOf(e);return t===-1?o:this._values[t]},e.prototype.set=function(e,t){var n=this._keys.indexOf(e);return n===-1?(this._keys.push(e),this._values.push(t),this.size++):this._values[n]=t,this},e.prototype.forEach=function(e,t){for(var n=0;n<this.size;n++)e.call(t,this._values[n],this._keys[n])},e}();we.prototype.and=function(e){return new we(this.patterns.concat(e))},we.prototype.thenDo=function(e){return new _e(this,e)},_e.prototype.activate=function(e,t,n){for(var i=[],r=Ce(t),s=0,o=this.expression.patterns.length;s<o;s++)i.push(Ee(e,this.expression.patterns[s],r));var a=new Te(i,Se(this,t),function(){for(var e=0,t=i.length;e<t;e++)i[e].removeActivePlan(a);n(a)});for(s=0,o=i.length;s<o;s++)i[s].addActivePlan(a);return a},Te.prototype.dequeue=function(){this.joinObservers.forEach(function(e){e.queue.shift()})},Te.prototype.match=function(){var e,t,n=!0;for(e=0,t=this.joinObserverArray.length;e<t;e++)if(0===this.joinObserverArray[e].queue.length){n=!1;break}if(n){var i=[],r=!1;for(e=0,t=this.joinObserverArray.length;e<t;e++)i.push(this.joinObserverArray[e].queue[0]),"C"===this.joinObserverArray[e].queue[0].kind&&(r=!0);if(r)this.onCompleted();else{this.dequeue();var s=[];for(e=0,t=i.length;e<i.length;e++)s.push(i[e].value);this.onNext.apply(this,s)}}};var Ks=function(e){function t(t,n){e.call(this),this.source=t,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new fn,this.isDisposed=!1}en(t,e);var n=t.prototype;return n.next=function(e){if(!this.isDisposed){if("E"===e.kind)return this.onError(e.error);this.queue.push(e);for(var t=this.activePlans.slice(0),n=0,i=t.length;n<i;n++)t[n].match()}},n.error=Xe,n.completed=Xe,n.addActivePlan=function(e){this.activePlans.push(e)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(e){this.activePlans.splice(this.activePlans.indexOf(e),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){e.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},t}(zn);Wn.and=function(e){return new we([this,e])},Wn.thenDo=function(e){return new we([this]).thenDo(e)},$n.when=function(){var e,t=arguments.length;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(t);for(var n=0;n<t;n++)e[n]=arguments[n]}return new Ao(function(t){var n=[],i=new zs,r=qn(function(e){t.onNext(e)},function(e){i.forEach(function(t){t.onError(e)}),t.onError(e)},function(e){t.onCompleted()});try{for(var s=0,o=e.length;s<o;s++)n.push(e[s].activate(i,r,function(e){var i=n.indexOf(e);n.splice(i,1),0===n.length&&t.onCompleted()}))}catch(a){return Pi(a).subscribe(t)}var l=new on;return i.forEach(function(e){e.subscribe(),l.add(e)}),l})};var Ys=function(e){function t(t,n){this._dt=t,this._s=n,e.call(this)}function n(e,t){t.onNext(0),t.onCompleted()}return en(t,e),t.prototype.subscribeCore=function(e){return this._s.scheduleFuture(e,this._dt,n)},t}(Jn),Xs=$n.interval=function(e,t){return Re(e,e,Cn(t)?t:On)};$n.timer=function(e,t,n){var i;return Cn(n)||(n=On),null!=t&&"number"==typeof t?i=t:Cn(t)&&(n=t),(e instanceof Date||"number"==typeof e)&&i===o?xe(e,n):e instanceof Date&&i!==o?ke(e,t,n):Re(e,i,n)};Wn.delay=function(){var e=arguments[0];if("number"==typeof e||e instanceof Date){var t=e,n=arguments[1];return Cn(n)||(n=On),t instanceof Date?Ae(this,t,n):De(this,t,n)}if($n.isObservable(e)||nt(e))return Pe(this,e,arguments[1]);throw new Error("Invalid arguments")};var Qs=function(e){function t(t,n,i){Cn(i)||(i=On),this.source=t,this._dt=n,this._s=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn;return new gn(this.source.subscribe(new $s(e,this._dt,this._s,t)),t)},t}(Jn),$s=function(e){function t(t,n,i,r){this._o=t,this._d=n,this._scheduler=i,this._c=r,this._v=null,this._hv=!1,this._id=0,e.call(this)}return en(t,e),t.prototype.next=function(e){this._hv=!0,this._v=e;var t=++this._id,n=new fn;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,i){i._hv&&i._id===t&&i._o.onNext(e),i._hv=!1}))},t.prototype.error=function(e){this._c.dispose(),this._o.onError(e),this._hv=!1,this._id++},t.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},t}(zn);Wn.debounce=function(){if(nt(arguments[0]))return Ie(this,arguments[0]);if("number"==typeof arguments[0])return new Qs(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Wn.windowWithTime=Wn.windowTime=function(e,t,n){var i,r=this;return null==t&&(i=e),Cn(n)||(n=On),"number"==typeof t?i=t:Cn(t)&&(i=e,n=t),new Ao(function(t){function s(){var e=new fn,r=!1,o=!1;d.setDisposable(e),u===l?(r=!0,o=!0):u<l?r=!0:o=!0;var h=r?u:l,f=h-p;p=h,r&&(u+=i),o&&(l+=i),e.setDisposable(n.scheduleFuture(null,f,function(){if(o){var e=new Oo;c.push(e),t.onNext(nn(e,a))}r&&c.shift().onCompleted(),s()}))}var o,a,l=i,u=e,c=[],d=new mn,p=0;return o=new on(d),a=new bn(o),c.push(new Oo),t.onNext(nn(c[0],a)),s(),o.add(r.subscribe(function(e){for(var t=0,n=c.length;t<n;t++)c[t].onNext(e)},function(e){for(var n=0,i=c.length;n<i;n++)c[n].onError(e);t.onError(e)},function(){for(var e=0,n=c.length;e<n;e++)c[e].onCompleted();t.onCompleted()})),a},r)},Wn.windowWithTimeOrCount=Wn.windowTimeOrCount=function(e,t,n){var i=this;return Cn(n)||(n=On),new Ao(function(r){function s(t){var i=new fn;o.setDisposable(i),i.setDisposable(n.scheduleFuture(null,e,function(){if(t===c){u=0;var e=++c;d.onCompleted(),d=new Oo,r.onNext(nn(d,l)),s(e)}}))}var o=new mn,a=new on(o),l=new bn(a),u=0,c=0,d=new Oo;return r.onNext(nn(d,l)),s(0),a.add(i.subscribe(function(e){var n=0,i=!1;d.onNext(e),++u===t&&(i=!0,u=0,n=++c,d.onCompleted(),d=new Oo,r.onNext(nn(d,l))),i&&s(n)},function(e){d.onError(e),r.onError(e)},function(){d.onCompleted(),r.onCompleted()})),l},i)},Wn.bufferWithTime=Wn.bufferTime=function(e,t,n){return this.windowWithTime(e,t,n).flatMap(z)},Wn.bufferWithTimeOrCount=Wn.bufferTimeOrCount=function(e,t,n){return this.windowWithTimeOrCount(e,t,n).flatMap(z)};var Js=function(e){function t(t,n){this.source=t,this._s=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new Zs(e,this._s))},t}(Jn),Zs=function(e){function t(t,n){this._o=t,this._s=n,this._l=n.now(),e.call(this)}return en(t,e),t.prototype.next=function(e){var t=this._s.now(),n=t-this._l;this._l=t,this._o.onNext({value:e,interval:n})},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.timeInterval=function(e){return Cn(e)||(e=On),new Js(this,e)};var eo=function(e){function t(t,n){this.source=t,this._s=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new to(e,this._s))},t}(Jn),to=function(e){function t(t,n){this._o=t,this._s=n,e.call(this)}return en(t,e),t.prototype.next=function(e){this._o.onNext({value:e,timestamp:this._s.now()})},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.timestamp=function(e){return Cn(e)||(e=On),new eo(this,e)};var no=function(e){function t(t,n){this.source=t,this._sampler=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t={o:e,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new fn};return t.sourceSubscription.setDisposable(this.source.subscribe(new ro(t))),new gn(t.sourceSubscription,this._sampler.subscribe(new io(t)))},t}(Jn),io=function(e){function t(t){this._s=t,e.call(this)}return en(t,e),t.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},t.prototype.next=function(){this._handleMessage()},t.prototype.error=function(e){this._s.onError(e)},t.prototype.completed=function(){this._handleMessage()},t}(zn),ro=function(e){function t(t){this._s=t,e.call(this)}return en(t,e),t.prototype.next=function(e){this._s.hasValue=!0,this._s.value=e},t.prototype.error=function(e){this._s.o.onError(e)},t.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},t}(zn);Wn.sample=function(e,t){return Cn(t)||(t=On),"number"==typeof e?new no(this,Xs(e,t)):new no(this,e)};var so=Ye.TimeoutError=function(e){this.message=e||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};so.prototype=Object.create(Error.prototype),Wn.timeout=function(){var e=arguments[0];if(e instanceof Date||"number"==typeof e)return Oe(this,e,arguments[1],arguments[2]);if($n.isObservable(e)||nt(e))return Me(this,e,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var oo=function(e){function t(t,n,i,r,s,o){this._state=t,this._cndFn=n,this._itrFn=i,this._resFn=r,this._timeFn=s,this._s=o,e.call(this)}function n(e,t){if(e.hasResult&&e.o.onNext(e.result),e.first)e.first=!1;else if(e.newState=rt(e.self._itrFn)(e.newState),e.newState===it)return e.o.onError(e.newState.e);if(e.hasResult=rt(e.self._cndFn)(e.newState),e.hasResult===it)return e.o.onError(e.hasResult.e);if(e.hasResult){if(e.result=rt(e.self._resFn)(e.newState),e.result===it)return e.o.onError(e.result.e);var n=rt(e.self._timeFn)(e.newState);if(n===it)return e.o.onError(n.e);t(e,n)}else e.o.onCompleted()}return en(t,e),t.prototype.subscribeCore=function(e){var t={o:e,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(t,new Date(this._s.now()),n)},t}(Jn);$n.generateWithAbsoluteTime=function(e,t,n,i,r,s){return Cn(s)||(s=On),new oo(e,t,n,i,r,s)};var ao=function(e){function t(t,n,i,r,s,o){this._state=t,this._cndFn=n,this._itrFn=i,this._resFn=r,this._timeFn=s,this._s=o,e.call(this)}function n(e,t){if(e.hasResult&&e.o.onNext(e.result),e.first)e.first=!1;else if(e.newState=rt(e.self._itrFn)(e.newState),e.newState===it)return e.o.onError(e.newState.e);if(e.hasResult=rt(e.self._cndFn)(e.newState),e.hasResult===it)return e.o.onError(e.hasResult.e);if(e.hasResult){if(e.result=rt(e.self._resFn)(e.newState),e.result===it)return e.o.onError(e.result.e);var n=rt(e.self._timeFn)(e.newState);if(n===it)return e.o.onError(n.e);t(e,n)}else e.o.onCompleted()}return en(t,e),t.prototype.subscribeCore=function(e){var t={o:e,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(t,0,n)},t}(Jn);$n.generateWithRelativeTime=function(e,t,n,i,r,s){return Cn(s)||(s=On),new ao(e,t,n,i,r,s)};var lo=function(e){function t(t,n,i){this.source=t,this._dt=n,this._s=i,e.call(this)}function n(e,t){var n=t[0],i=t[1],r=t[2];r.setDisposable(n.subscribe(i))}return en(t,e),t.prototype.subscribeCore=function(e){var t=new mn;return t.setDisposable(this._s.scheduleFuture([this.source,e,t],this._dt,n)),t},t}(Jn);Wn.delaySubscription=function(e,t){return Cn(t)||(t=On),new lo(this,e,t)};var uo=function(e){function t(t,n,i){this.source=t,this._d=n,this._s=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new co(e,this))},t}(Jn),co=function(e){function t(t,n){this._o=t,this._s=n._s,this._d=n._d,this._q=[],e.call(this)}return en(t,e),t.prototype.next=function(e){var t=this._s.now();for(this._q.push({interval:t,value:e});this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){for(var e=this._s.now();this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},t}(zn);Wn.skipLastWithTime=function(e,t){return Cn(t)||(t=On),new uo(this,e,t)};var po=function(e){function t(t,n,i){this.source=t,this._d=n,this._s=i,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return this.source.subscribe(new ho(e,this._d,this._s))},t}(Jn),ho=function(e){function t(t,n,i){this._o=t,this._d=n,this._s=i,this._q=[],e.call(this)}return en(t,e),t.prototype.next=function(e){var t=this._s.now();for(this._q.push({interval:t,value:e});this._q.length>0&&t-this._q[0].interval>=this._d;)this._q.shift()},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){for(var e=this._s.now();this._q.length>0;){var t=this._q.shift();e-t.interval<=this._d&&this._o.onNext(t.value)}this._o.onCompleted()},t}(zn);Wn.takeLastWithTime=function(e,t){return Cn(t)||(t=On),new po(this,e,t)},Wn.takeLastBufferWithTime=function(e,t){var n=this;return Cn(t)||(t=On),new Ao(function(i){var r=[];return n.subscribe(function(n){var i=t.now();for(r.push({interval:i,value:n});r.length>0&&i-r[0].interval>=e;)r.shift()},function(e){i.onError(e)},function(){for(var n=t.now(),s=[];r.length>0;){var o=r.shift();n-o.interval<=e&&s.push(o.value)}i.onNext(s),i.onCompleted()})},n)};var fo=function(e){function t(t,n,i){this.source=t,this._d=n,this._s=i,e.call(this)}function n(e,t){t.onCompleted()}return en(t,e),t.prototype.subscribeCore=function(e){return new gn(this._s.scheduleFuture(e,this._d,n),this.source.subscribe(e))},t}(Jn);Wn.takeWithTime=function(e,t){return Cn(t)||(t=On),new fo(this,e,t)};var mo=function(e){function t(t,n,i){this.source=t,this._d=n,this._s=i,this._open=!1,e.call(this)}function n(e,t){t._open=!0}return en(t,e),t.prototype.subscribeCore=function(e){return new gn(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new go(e,this)))},t}(Jn),go=function(e){function t(t,n){this._o=t,this._p=n,e.call(this)}return en(t,e),t.prototype.next=function(e){this._p._open&&this._o.onNext(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.skipWithTime=function(e,t){return Cn(t)||(t=On),new mo(this,e,t)};var vo=function(e){function t(t,n,i){this.source=t,this._st=n,this._s=i,e.call(this)}function n(e,t){t._open=!0}return en(t,e),t.prototype.subscribeCore=function(e){return this._open=!1,new gn(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new bo(e,this)))},t}(Jn),bo=function(e){function t(t,n){this._o=t,this._p=n,e.call(this)}return en(t,e),t.prototype.next=function(e){this._p._open&&this._o.onNext(e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._o.onCompleted()},t}(zn);Wn.skipUntilWithTime=function(e,t){return Cn(t)||(t=On),new vo(this,e,t)},Wn.takeUntilWithTime=function(e,t){Cn(t)||(t=On);var n=this;return new Ao(function(i){return new gn(t.scheduleFuture(i,e,function(e,t){t.onCompleted()}),n.subscribe(i))},n)},Wn.throttle=function(e,t){Cn(t)||(t=On);var n=+e||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var i=this;return new Ao(function(e){var r=0;return i.subscribe(function(i){var s=t.now();(0===r||s-r>=n)&&(r=s,e.onNext(i))},function(t){e.onError(t)},function(){e.onCompleted()})},i)};var yo=function(e){function t(t,n){this._o=t,this._xform=n,e.call(this)}return en(t,e),t.prototype.next=function(e){var t=rt(this._xform["@@transducer/step"]).call(this._xform,this._o,e);t===it&&this._o.onError(t.e)},t.prototype.error=function(e){this._o.onError(e)},t.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},t}(zn);Wn.transduce=function(e){var t=this;return new Ao(function(n){var i=e(Ne(n));return t.subscribe(new yo(n,i))},t)};var wo=function(e){function t(t){this.source=t,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){var t=new fn,n=new on,i={hasCurrent:!1,isStopped:!1,o:e,g:n};return n.add(t),t.setDisposable(this.source.subscribe(new _o(i))),n},t}(Jn),_o=function(e){function t(t){this._s=t,e.call(this)}function n(t,n){this._s=t,this._i=n,e.call(this)}return en(t,e),t.prototype.next=function(e){if(!this._s.hasCurrent){this._s.hasCurrent=!0,tt(e)&&(e=ci(e));var t=new fn;this._s.g.add(t),t.setDisposable(e.subscribe(new n(this._s,t)))}},t.prototype.error=function(e){this._s.o.onError(e)},t.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},en(n,e),n.prototype.next=function(e){this._s.o.onNext(e)},n.prototype.error=function(e){this._s.o.onError(e)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},t}(zn);Wn.switchFirst=function(){return new wo(this)},Wn.flatMapFirst=Wn.exhaustMap=function(e,t,n){return new Zn(this,e,t,n).switchFirst()},Wn.flatMapWithMaxConcurrent=Wn.flatMapMaxConcurrent=function(e,t,n,i){return new Zn(this,t,n,i).merge(e)};var Co=Ye.VirtualTimeScheduler=function(e){function t(t,n){this.clock=t,this.comparer=n,this.isEnabled=!1,this.queue=new rn(1024),e.call(this)}en(t,e);var n=t.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(e,t){return this.scheduleAbsolute(e,this.clock,t)},n.scheduleFuture=function(e,t,n){var i=t instanceof Date?this.toRelativeTime(t-this.now()):this.toRelativeTime(t);return this.scheduleRelative(e,i,n)},n.add=mt,n.toAbsoluteTime=mt,n.toRelativeTime=mt,n.schedulePeriodic=function(e,t,n){var i=new Tn(this,e,t,n);return i.start()},n.scheduleRelative=function(e,t,n){var i=this.add(this.clock,t);return this.scheduleAbsolute(e,i,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var e=this.getNext();null!==e?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(e){var t=this.comparer(this.clock,e);if(this.comparer(this.clock,e)>0)throw new pt;if(0!==t&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,e)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=e}},n.advanceBy=function(e){var t=this.add(this.clock,e),n=this.comparer(this.clock,t);if(n>0)throw new pt;0!==n&&this.advanceTo(t)},n.sleep=function(e){var t=this.add(this.clock,e);if(this.comparer(this.clock,t)>=0)throw new pt;this.clock=t},n.getNext=function(){for(;this.queue.length>0;){var e=this.queue.peek();if(!e.isCancelled())return e;this.queue.dequeue()}return null},n.scheduleAbsolute=function(e,t,n){function i(e,t){return r.queue.remove(s),n(e,t)}var r=this,s=new yn(this,e,i,t,this.comparer);return this.queue.enqueue(s),s.disposable},t}(wn);Ye.HistoricalScheduler=function(e){function t(t,n){var i=null==t?0:t,r=n||Ze;e.call(this,i,r)}en(t,e);var n=t.prototype;return n.add=function(e,t){return e+t},n.toAbsoluteTime=function(e){return new Date(e).getTime()},n.toRelativeTime=function(e){return e},t}(Ye.VirtualTimeScheduler),Le.prototype.equals=function(e){return e===this||null!=e&&("N"===e.kind&&this.predicate(e.value))},Fe.prototype.equals=function(e){return e===this||null!=e&&("E"===e.kind&&this.predicate(e.error))};var So=Ye.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(e,t){return"function"==typeof t?new Eo(e,new Le(t)):new Eo(e,Ln.createOnNext(t))},onError:function(e,t){return"function"==typeof t?new Eo(e,new Fe(t)):new Eo(e,Ln.createOnError(t))},onCompleted:function(e){return new Eo(e,Ln.createOnCompleted())},subscribe:function(e,t){return new To(e,t)}},Eo=Ye.Recorded=function(e,t,n){this.time=e,this.value=t,this.comparer=n||Je};Eo.prototype.equals=function(e){return this.time===e.time&&this.comparer(this.value,e.value)},Eo.prototype.toString=function(){return this.value.toString()+"@"+this.time};var To=Ye.Subscription=function(e,t){this.subscribe=e,this.unsubscribe=t||Number.MAX_VALUE};To.prototype.equals=function(e){return this.subscribe===e.subscribe&&this.unsubscribe===e.unsubscribe},To.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var xo=Ye.MockDisposable=function(e){this.scheduler=e,this.disposes=[],this.disposes.push(this.scheduler.clock)};xo.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var ko=function(e){function t(t){e.call(this),this.scheduler=t,this.messages=[]}en(t,e);var n=t.prototype;return n.onNext=function(e){this.messages.push(new Eo(this.scheduler.clock,Ln.createOnNext(e)))},n.onError=function(e){this.messages.push(new Eo(this.scheduler.clock,Ln.createOnError(e)))},n.onCompleted=function(){this.messages.push(new Eo(this.scheduler.clock,Ln.createOnCompleted()))},t}(Gn);Ve.prototype.then=function(e,t){var n=this;this.subscriptions.push(new To(this.scheduler.clock));var i,r=this.subscriptions.length-1,s=Ye.Observer.create(function(t){var a=e(t);if(a&&"function"==typeof a.then)i=a;else{var l=n.scheduler.clock;i=new Ve(n.scheduler,[Ye.ReactiveTest.onNext(l,o),Ye.ReactiveTest.onCompleted(l)])}var u=n.observers.indexOf(s);n.observers.splice(u,1),n.subscriptions[r]=new To(n.subscriptions[r].subscribe,n.scheduler.clock)},function(e){t(e);var i=n.observers.indexOf(s);n.observers.splice(i,1),n.subscriptions[r]=new To(n.subscriptions[r].subscribe,n.scheduler.clock)});return this.observers.push(s),i||new Ve(this.scheduler,this.messages)};var Ro=function(e){function t(t,n){e.call(this);var i,r,s=this;this.scheduler=t,this.messages=n,this.subscriptions=[],this.observers=[];for(var o=0,a=this.messages.length;o<a;o++)i=this.messages[o],r=i.value,function(e){t.scheduleAbsolute(null,i.time,function(){for(var t=s.observers.slice(0),n=0,i=t.length;n<i;n++)e.accept(t[n]);return cn})}(r)}return en(t,e),t.prototype._subscribe=function(e){var t=this;this.observers.push(e),this.subscriptions.push(new To(this.scheduler.clock));var n=this.subscriptions.length-1;return un(function(){var i=t.observers.indexOf(e);t.observers.splice(i,1),t.subscriptions[n]=new To(t.subscriptions[n].subscribe,t.scheduler.clock)})},t}($n),Do=function(e){function t(t,n){e.call(this),this.scheduler=t,this.messages=n,this.subscriptions=[]}return en(t,e),t.prototype._subscribe=function(e){var t,n,i=this;this.subscriptions.push(new To(this.scheduler.clock));for(var r=this.subscriptions.length-1,s=new on,o=0,a=this.messages.length;o<a;o++)t=this.messages[o],n=t.value,function(n){s.add(i.scheduler.scheduleRelative(null,t.time,function(){return n.accept(e),cn}))}(n);return un(function(){i.subscriptions[r]=new To(i.subscriptions[r].subscribe,i.scheduler.clock),s.dispose()})},t}($n);Ye.TestScheduler=function(e){function t(e,t){return e>t?1:e<t?-1:0}function n(){e.call(this,0,t)}return en(n,e),n.prototype.scheduleAbsolute=function(t,n,i){return n<=this.clock&&(n=this.clock+1),e.prototype.scheduleAbsolute.call(this,t,n,i)},n.prototype.add=function(e,t){return e+t},n.prototype.toAbsoluteTime=function(e){return new Date(e).getTime()},n.prototype.toRelativeTime=function(e){return e},n.prototype.startScheduler=function(e,t){t||(t={}),null==t.created&&(t.created=So.created),null==t.subscribed&&(t.subscribed=So.subscribed),null==t.disposed&&(t.disposed=So.disposed);var n,i,r=this.createObserver();return this.scheduleAbsolute(null,t.created,function(){return n=e(),cn}),this.scheduleAbsolute(null,t.subscribed,function(){return i=n.subscribe(r),cn}),this.scheduleAbsolute(null,t.disposed,function(){return i.dispose(),cn}),this.start(),r},n.prototype.createHotObservable=function(){var e,t=arguments.length;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(t);for(var n=0;n<t;n++)e[n]=arguments[n]}return new Ro(this,e)},n.prototype.createColdObservable=function(){var e,t=arguments.length;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(t);for(var n=0;n<t;n++)e[n]=arguments[n]}return new Do(this,e)},n.prototype.createResolvedPromise=function(e,t){return new Ve(this,[Ye.ReactiveTest.onNext(e,t),Ye.ReactiveTest.onCompleted(e)])},n.prototype.createRejectedPromise=function(e,t){return new Ve(this,[Ye.ReactiveTest.onError(e,t)])},n.prototype.createObserver=function(){return new ko(this)},n}(Co);var Ao=Ye.AnonymousObservable=function(e){function t(e){return e&&nt(e.dispose)?e:nt(e)?un(e):cn}function n(e,n){var i=n[0],r=n[1],s=rt(r.__subscribe).call(r,i);s!==it||i.fail(it.e)||c(it.e),i.setDisposable(t(s))}function i(t,n){this.source=n,this.__subscribe=t,e.call(this)}return en(i,e),i.prototype._subscribe=function(e){var t=new Po(e),i=[t,this];return Dn.scheduleRequired()?Dn.schedule(i,n):n(null,i),t},i}($n),Po=function(e){function t(t){e.call(this),this.observer=t,this.m=new fn}en(t,e);var n=t.prototype;return n.next=function(e){var t=rt(this.observer.onNext).call(this.observer,e);t===it&&(this.dispose(),c(t.e))},n.error=function(e){var t=rt(this.observer.onError).call(this.observer,e);this.dispose(),t===it&&c(t.e)},n.completed=function(){var e=rt(this.observer.onCompleted).call(this.observer);this.dispose(),e===it&&c(e.e)},n.setDisposable=function(e){this.m.setDisposable(e)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){e.prototype.dispose.call(this),this.m.dispose()},t}(zn),Io=function(e){function t(t,n){this._m=t,this._u=n,e.call(this)}return en(t,e),t.prototype.subscribeCore=function(e){return new gn(this._m.getDisposable(),this._u.subscribe(e))},t}(Jn),Mo=function(e){function t(t,n,i){e.call(this),this.key=t,this.underlyingObservable=i?new Io(i,n):n}return en(t,e),t.prototype._subscribe=function(e){return this.underlyingObservable.subscribe(e)},t}($n),Oo=Ye.Subject=function(e){function t(){e.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return en(t,e),tn(t.prototype,Gn.prototype,{_subscribe:function(e){return pn(this),this.isStopped?this.hasError?(e.onError(this.error),cn):(e.onCompleted(),cn):(this.observers.push(e),new Os(this,e))},hasObservers:function(){return pn(this),this.observers.length>0},onCompleted:function(){if(pn(this),!this.isStopped){this.isStopped=!0;for(var e=0,t=l(this.observers),n=t.length;e<n;e++)t[e].onCompleted();this.observers.length=0}},onError:function(e){if(pn(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;for(var t=0,n=l(this.observers),i=n.length;t<i;t++)n[t].onError(e);this.observers.length=0}},onNext:function(e){if(pn(this),!this.isStopped)for(var t=0,n=l(this.observers),i=n.length;t<i;t++)n[t].onNext(e)},dispose:function(){this.isDisposed=!0,this.observers=null}}),t.create=function(e,t){return new Vo(e,t)},t}($n),No=Ye.AsyncSubject=function(e){function t(){e.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return en(t,e),tn(t.prototype,Gn.prototype,{_subscribe:function(e){return pn(this),this.isStopped?(this.hasError?e.onError(this.error):this.hasValue?(e.onNext(this.value),e.onCompleted()):e.onCompleted(),cn):(this.observers.push(e),new Os(this,e))},hasObservers:function(){return pn(this),this.observers.length>0},onCompleted:function(){var e,t;if(pn(this),!this.isStopped){this.isStopped=!0;var n=l(this.observers),t=n.length;if(this.hasValue)for(e=0;e<t;e++){var i=n[e];i.onNext(this.value),i.onCompleted()}else for(e=0;e<t;e++)n[e].onCompleted();this.observers.length=0}},onError:function(e){if(pn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var t=0,n=l(this.observers),i=n.length;t<i;t++)n[t].onError(e);this.observers.length=0}},onNext:function(e){pn(this),this.isStopped||(this.value=e,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),t}($n),Lo=Ye.BehaviorSubject=function(e){function t(t){e.call(this),this.value=t,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return en(t,e),tn(t.prototype,Gn.prototype,{_subscribe:function(e){return pn(this),this.isStopped?(this.hasError?e.onError(this.error):e.onCompleted(),cn):(this.observers.push(e),e.onNext(this.value),new Os(this,e))},getValue:function(){return pn(this),this.hasError&&c(this.error),this.value},hasObservers:function(){return pn(this),this.observers.length>0},onCompleted:function(){if(pn(this),!this.isStopped){this.isStopped=!0;for(var e=0,t=l(this.observers),n=t.length;e<n;e++)t[e].onCompleted();this.observers.length=0}},onError:function(e){if(pn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=e;for(var t=0,n=l(this.observers),i=n.length;t<i;t++)n[t].onError(e);this.observers.length=0}},onNext:function(e){if(pn(this),!this.isStopped){this.value=e;for(var t=0,n=l(this.observers),i=n.length;t<i;t++)n[t].onNext(e);
}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),t}($n),Fo=Ye.ReplaySubject=function(e){function t(e,t){return un(function(){t.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(t),1)})}function n(t,n,r){this.bufferSize=null==t?i:t,this.windowSize=null==n?i:n,this.scheduler=r||Dn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,e.call(this)}var i=Math.pow(2,53)-1;return en(n,e),tn(n.prototype,Gn.prototype,{_subscribe:function(e){pn(this);var n=new Xn(this.scheduler,e),i=t(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var r=0,s=this.q.length;r<s;r++)n.onNext(this.q[r].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),i},hasObservers:function(){return pn(this),this.observers.length>0},_trim:function(e){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&e-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(e){if(pn(this),!this.isStopped){var t=this.scheduler.now();this.q.push({interval:t,value:e}),this._trim(t);for(var n=0,i=l(this.observers),r=i.length;n<r;n++){var s=i[n];s.onNext(e),s.ensureActive()}}},onError:function(e){if(pn(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;var t=this.scheduler.now();this._trim(t);for(var n=0,i=l(this.observers),r=i.length;n<r;n++){var s=i[n];s.onError(e),s.ensureActive()}this.observers.length=0}},onCompleted:function(){if(pn(this),!this.isStopped){this.isStopped=!0;var e=this.scheduler.now();this._trim(e);for(var t=0,n=l(this.observers),i=n.length;t<i;t++){var r=n[t];r.onCompleted(),r.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}($n),Vo=Ye.AnonymousSubject=function(e){function t(t,n){this.observer=t,this.observable=n,e.call(this)}return en(t,e),tn(t.prototype,Gn.prototype,{_subscribe:function(e){return this.observable.subscribe(e)},onCompleted:function(){this.observer.onCompleted()},onError:function(e){this.observer.onError(e)},onNext:function(e){this.observer.onNext(e)}}),t}($n);Ye.Pauser=function(e){function t(){e.call(this)}return en(t,e),t.prototype.pause=function(){this.onNext(!1)},t.prototype.resume=function(){this.onNext(!0)},t}(Oo),Ke.Rx=Ye,i=function(){return Ye}.call(t,n,t,e),!(i!==o&&(e.exports=i));var Bo=m()}).call(this)}).call(t,n(2)(e),function(){return this}(),n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){m&&h&&(m=!1,h.length?f=h.concat(f):g=-1,f.length&&a())}function a(){if(!m){var e=r(o);m=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,m=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var h,f=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||m||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(module,exports,__webpack_require__){function exception(e){return e}function isEnum(e){return null!=e&&e.constructor==stjs.enumEntry}function Downloader(){this.isActive=!1,this.realtime=!1,this.chunkStart=0,this.chunkSize=0,this.totalLength=0,this.chunkTimeout=1e3,this.url=null,this.callback=null,this.eof=!1,this.setDownloadTimeoutCallback=null,this.withCredentials=!1}var stjs={};stjs.NOT_IMPLEMENTED=function(){throw"This method is not implemented in Javascript."},stjs.JavalikeEquals=function(e){return null!=e&&(e.valueOf?this.valueOf()===e.valueOf():this===e)},stjs.JavalikeGetClass=function(){return this.constructor},String.prototype.equals||(String.prototype.equals=stjs.JavalikeEquals),String.prototype.getBytes||(String.prototype.getBytes=stjs.NOT_IMPLEMENTED),String.prototype.getChars||(String.prototype.getChars=stjs.NOT_IMPLEMENTED),String.prototype.contentEquals||(String.prototype.contentEquals=stjs.NOT_IMPLEMENTED),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){var n=null!=t?t:0;return this.substring(n,n+e.length)==e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return null!=e&&(!(this.length<e.length)&&this.substring(this.length-e.length,this.length)==e)}),String.prototype.trim||(stjs.trimLeftRegExp=/^\s+/,stjs.trimRightRegExp=/\s+$/,String.prototype.trim=function(){return this.replace(stjs.trimLeftRegExp,"").replace(stjs.trimRightRegExp,"")}),String.prototype.matches||(String.prototype.matches=function(e){return null!=this.match("^"+e+"$")}),String.prototype.compareTo||(String.prototype.compareTo=function(e){return null==e?1:this<e?-1:this==e?0:1}),String.prototype.compareToIgnoreCase||(String.prototype.compareToIgnoreCase=function(e){return null==e?1:this.toLowerCase().compareTo(e.toLowerCase())}),String.prototype.equalsIgnoreCase||(String.prototype.equalsIgnoreCase=function(e){return null!=e&&this.toLowerCase()===e.toLowerCase()}),String.prototype.codePointAt||(String.prototype.codePointAt=String.prototype.charCodeAt),String.prototype.codePointBefore||(String.prototype.codePointBefore=stjs.NOT_IMPLEMENTED),String.prototype.codePointCount||(String.prototype.codePointCount=stjs.NOT_IMPLEMENTED),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)}),String.prototype.replaceFirst||(String.prototype.replaceFirst=function(e,t){return this.replace(new RegExp(e),t)}),String.prototype.regionMatches||(String.prototype.regionMatches=function(e,t,n,i,r){if(4==arguments.length&&(r=arguments[3],i=arguments[2],n=arguments[1],t=arguments[0],e=!1),t<0||i<0||null==n||t+r>this.length||i+r>n.length)return!1;var s=this.substring(t,t+r),o=n.substring(i,i+r);return e?s.equalsIgnoreCase(o):s===o}),String.prototype.contains||(String.prototype.contains=function(e){return this.indexOf(e)>=0}),String.prototype.getClass||(String.prototype.getClass=stjs.JavalikeGetClass),String.valueOf=function(e){return new String(e)};var Byte=Number,Double=Number,Float=Number,Integer=Number,Long=Number,Short=Number;Number.prototype.intValue||(Number.prototype.intValue=function(){return parseInt(this)}),Number.prototype.shortValue||(Number.prototype.shortValue=function(){return parseInt(this)}),Number.prototype.longValue||(Number.prototype.longValue=function(){return parseInt(this)}),Number.prototype.byteValue||(Number.prototype.byteValue=function(){return parseInt(this)}),Number.prototype.floatValue||(Number.prototype.floatValue=function(){return parseFloat(this)}),Number.prototype.doubleValue||(Number.prototype.doubleValue=function(){return parseFloat(this)}),Number.parseInt||(Number.parseInt=parseInt),Number.parseShort||(Number.parseShort=parseInt),Number.parseLong||(Number.parseLong=parseInt),Number.parseByte||(Number.parseByte=parseInt),Number.parseDouble||(Number.parseDouble=parseFloat),Number.parseFloat||(Number.parseFloat=parseFloat),Number.isNaN||(Number.isNaN=isNaN),Number.prototype.isNaN||(Number.prototype.isNaN=function(){return isNaN(this)}),Number.prototype.equals||(Number.prototype.equals=stjs.JavalikeEquals),Number.prototype.getClass||(Number.prototype.getClass=stjs.JavalikeGetClass),Number.valueOf=function(e){return new Number(e).valueOf()},Boolean.prototype.equals||(Boolean.prototype.equals=stjs.JavalikeEquals),Boolean.prototype.getClass||(Boolean.prototype.getClass=stjs.JavalikeGetClass),Boolean.valueOf=function(e){return new Boolean(e).valueOf()},stjs.global=this,stjs.skipCopy={prototype:!0,constructor:!0,$typeDescription:!0,$inherit:!0},stjs.ns=function(e){for(var t=e.split("."),n=stjs.global,i=0;i<t.length;++i){var r=t[i];n=n[r]=n[r]||{}}return n},stjs.copyProps=function(e,t){for(var n in e)stjs.skipCopy[n]||(t[n]=e[n]);return t},stjs.copyInexistentProps=function(e,t){for(var n in e)stjs.skipCopy[n]||t[n]||(t[n]=e[n]);return t},stjs.extend=function(e,t,n,i,r,s){if("object"!=typeof r)return stjs.extend12.apply(this,arguments);if(e.$inherit=[],null!=t){var o=function(){};o.prototype=t.prototype,e.prototype=new o,stjs.copyProps(t,e),stjs.copyProps(t.$typeDescription,r),stjs.copyProps(t.$annotations,s),e.$inherit.push(t)}for(var a=0;a<n.length;++a)n[a]&&(stjs.copyProps(n[a],e),stjs.copyInexistentProps(n[a].prototype,e.prototype),e.$inherit.push(n[a]));return e.prototype.constructor=e,null!=i&&i(e,e.prototype),e.$typeDescription=r,e.$annotations=s,null==t&&(e.prototype.equals||(e.prototype.equals=stjs.JavalikeEquals),e.prototype.getClass||(e.prototype.getClass=stjs.JavalikeGetClass)),e},stjs.extend12=function(e,t,n){var i=function(){};i.prototype=t.prototype,e.prototype=new i;for(var r=1;r<arguments.length;++r)stjs.copyProps(arguments[r],e);return e.prototype.constructor=e,null==t&&(e.prototype.equals=stjs.JavalikeEquals,e.prototype.getClass=stjs.JavalikeGetClass),e},stjs.getAnnotations=function(e){return e.$annotations},stjs.getTypeAnnotation=function(e,t){var n=e.$annotations._;return n?n[t]:null},stjs.getMemberAnnotation=function(e,t,n){var i=e.$annotations.memberName;return i?i[n]:null},stjs.getParameterAnnotation=function(e,t,n,i){var r=e.$annotations[t+"$"+n];return r?r[i]:null},stjs.isInstanceOf=function(e,t){if(null==e)return!1;if(e===t)return!0;if(!e.$inherit)return!1;for(var n=0;n<e.$inherit.length;++n)if(stjs.isInstanceOf(e.$inherit[n],t))return!0;return!1},stjs.enumEntry=function(e,t){this._name=t,this._ordinal=e},stjs.enumEntry.prototype.name=function(){return this._name},stjs.enumEntry.prototype.ordinal=function(){return this._ordinal},stjs.enumEntry.prototype.toString=function(){return this._name},stjs.enumEntry.prototype.equals=stjs.JavalikeEquals,stjs.enumeration=function(){var e,t={};for(t._values=[],e=0;e<arguments.length;++e)t[arguments[e]]=new stjs.enumEntry(e,arguments[e]),t._values[e]=t[arguments[e]];return t.values=function(){return this._values},t.valueOf=function(e){return this[e]},t},stjs.mainCallDisabled=!1,stjs.exception=function(e){return e},stjs.isEnum=function(e){return null!=e&&e.constructor==stjs.enumEntry},"function"==typeof Math.trunc?stjs.trunc=Math.trunc:stjs.trunc=function(e){return null==e?null:e>=0?Math.floor(e):Math.ceil(e)},stjs.converters={Date:function(e,t){var n=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)$/.exec(e);return n?new Date((+n[1]),+n[2]-1,(+n[3]),(+n[4]),(+n[5]),(+n[6])):null},Enum:function(s,type){return eval(type.arguments[0])[s]}},stjs.serializers={Date:function(e,t){function n(e){return e<10?"0"+e:""+e}return e?""+e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+" "+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds()):null},Enum:function(e,t){return null!=e?e.toString():null}},stjs.bind=function(e,t,n){var i=!1;null==t&&(t=e,e=null,i=!0);var r=null!=n,s=function(){var s=arguments;return r&&Array.prototype.splice.call(s,n,0,this),i&&(e=Array.prototype.shift.call(s)),"string"==typeof t?e[t].apply(e,s):t.apply(e,s)};return s},stjs.parseJSON=function(){function unescapeOne(e,t,n){return t?escapes[t]:String.fromCharCode(parseInt(n,16))}function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function convert(e,t){if(!e)return t;var n=stjs.converters[e.name||e];return n?n(t,e):constr(e,t)}function builder(e){return e?"function"==typeof e?new e:e.name?"Map"==e.name?{}:"Array"==e.name?[]:constr(e.name):constr(e):{}}function nextMatch(e){var t=jsonToken.exec(e);return null!=t?t[0]:null}var number="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",oneChar='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',string='(?:"'+oneChar+'*")',jsonToken=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+number+"|"+string+")","g"),escapeSequence=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),escapes={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},constructors={},EMPTY_STRING=new String(""),SLASH="\\",firstTokenCtors={"{":Object,"[":Array},hop=Object.hasOwnProperty;return function(e,t){var n,i=nextMatch(e),r=!1;"{"===i?n=builder(t,null):"["===i?n=[]:(n=[],r=!0);var s,o=[n],a=[t];for(i=nextMatch(e);null!=i;i=nextMatch(e)){var l;switch(i.charCodeAt(0)){default:l=o[0],l[s||l.length]=+i,s=void 0;break;case 34:if(i=i.substring(1,i.length-1),i.indexOf(SLASH)!==-1&&(i=i.replace(escapeSequence,unescapeOne)),l=o[0],!s){if(!(l instanceof Array)){s=i||EMPTY_STRING,a[0]=l.constructor.$typeDescription?l.constructor.$typeDescription[s]:a[1].arguments[1];break}s=l.length}l[s]=convert(a[0],i),s=void 0;break;case 91:l=o[0],o.unshift(l[s||l.length]=[]),a.unshift(a[0].arguments[0]),s=void 0;break;case 93:o.shift(),a.shift();break;case 102:l=o[0],l[s||l.length]=!1,s=void 0;break;case 110:l=o[0],l[s||l.length]=null,s=void 0;break;case 116:l=o[0],l[s||l.length]=!0,s=void 0;break;case 123:l=o[0],o.unshift(l[s||l.length]=builder(a[0])),a.unshift(null),s=void 0;break;case 125:o.shift(),a.shift()}}if(r){if(1!==o.length)throw new Error;n=n[0]}else if(o.length)throw new Error;return n}}(),stjs.isArray=function(e){return"[object Array]"===stjs.toString.call(e)},stjs.typefy=function(obj,cls){function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function elementType(type){return"function"==typeof type?type:type.arguments?eval(type.arguments[0]):"string"==typeof type?eval(type):Object}function convert(e,t){if(!e)return t;var n=stjs.converters[e.name||e];return n?n(t,e):constr(e,t)}function builder(e){return e?"function"==typeof e?new e:e.name?"Map"==e.name?{}:"Array"==e.name?[]:constr(e.name):constr(e):{}}if(stjs.isArray(obj)){for(var result=[],idx=0;idx<obj.length;idx++)result.push(stjs.typefy(obj[idx],elementType(cls)));return result}var constructors={};if(null==obj)return null;var ret=new cls;for(var key in obj){var prop=obj[key];if(null!=prop){var td=cls.$typeDescription[key];td?"string"==typeof prop?ret[key]=convert(td,prop):"object"==typeof prop&&("string"==typeof td&&(td=eval(td)),ret[key]=stjs.typefy(prop,td)):ret[key]=prop}}return ret},stjs.hydrate=stjs.typefy,stjs.stringify=function(e,t){if(null==e)return null;var n={};for(var i in e){var r=t.$typeDescription[i],s=e[i],o=null!=r?stjs.serializers[r.name||r]:null;"function"!=typeof s&&(r&&o?"string"!=typeof s&&(o?n[i]=o(s,r):n[i]=stjs.typefy(s,r)):n[i]=s)}return n},stjs.assertHandler=function(e,t,n){throw n+" at "+e},stjs.STJSAssert={},stjs.STJSAssert.setAssertHandler=function(e){stjs.assertHandler=e},stjs.STJSAssert.assertArgEquals=function(e,t,n,i){n!=i&&stjs.assertHandler&&stjs.assertHandler(e,t,"Wrong argument. Expected: "+n+", got:"+i)},stjs.STJSAssert.assertArgNotNull=function(e,t,n){null==n&&stjs.assertHandler&&stjs.assertHandler(e,t,"Wrong argument. Null value")},stjs.STJSAssert.assertArgTrue=function(e,t,n){!n&&stjs.assertHandler&&stjs.assertHandler(e,t,"Wrong argument. Condition is false")},stjs.STJSAssert.assertStateEquals=function(e,t,n,i){n!=i&&stjs.assertHandler&&stjs.assertHandler(e,t,"Wrong state. Expected: "+n+", got:"+i)},stjs.STJSAssert.assertStateNotNull=function(e,t,n){null==n&&stjs.assertHandler&&stjs.assertHandler(e,t,"Wrong state. Null value")},stjs.STJSAssert.assertStateTrue=function(e,t,n){!n&&stjs.assertHandler&&stjs.assertHandler(e,t,"Wrong state. Condition is false")};var Throwable=function(e,t){if(Error.call(this),"function"==typeof Error.captureStackTrace)Error.captureStackTrace(this,arguments.callee);else try{throw new Error}catch(n){this.stack=n.stack}"string"==typeof e?(this.detailMessage=e,this.message=e,this.cause=t):this.cause=e};stjs.extend(Throwable,Error,[],function(e,t){t.detailMessage=null,t.cause=null,t.getMessage=function(){return this.detailMessage},t.getLocalizedMessage=function(){return this.getMessage()},t.getCause=function(){return this.cause==this?null:this.cause},t.toString=function(){var e="Exception",t=this.getLocalizedMessage();return null!=t?e+": "+t:e},t.getStackTrace=function(){return this.stack},t.printStackTrace=function(){console.error(this.getStackTrace())}},{});var Exception=function(e,t){Throwable.call(this,e,t)};stjs.extend(Exception,Throwable,[],function(e,t){},{});var RuntimeException=function(e,t){Exception.call(this,e,t)};stjs.extend(RuntimeException,Exception,[],function(e,t){},{});var Iterator=function(){};Iterator=stjs.extend(Iterator,null,[],function(e,t){t.hasNext=function(){},t.next=function(){},t.remove=function(){}},{},{});var Iterable=function(){};Iterable=stjs.extend(Iterable,null,[],function(e,t){t.iterator=function(){}},{},{}),stjs.setField=function(e,t,n,i){if(stjs.setFieldHandler)return stjs.setFieldHandler(e,t,n,i);var r=i?e[t]:n;return e[t]=n,r},stjs.getField=function(e,t){return stjs.getFieldHandler?stjs.getFieldHandler(e,t):e[t]};var Decoder=__webpack_require__(6),MovDasher=__webpack_require__(7),Rx=__webpack_require__(3),_mp4box=__webpack_require__(8),DataStream=_mp4box.DataStream,BoxParser=_mp4box.BoxParser,ISOFile=_mp4box.ISOFile,MP4Box=_mp4box.MP4Box,Extend={};Extend.extend=function(e,t){var n=function(){e.apply(this,arguments),t.apply(this,arguments)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=t,n};var FrameExtractor=function(e,t,n){this.url=e||"",this.http=t,this.log=n};FrameExtractor.prototype.init=function(e){this.mp4box=new MP4Box((!1)),this.downloader=new Downloader,this.samples=[],this.chunkSize=1048576,this.maintrack=1,this.nextStart=0;var t=this;this.moovLoaded=!1,this.mp4box.onReady=function(){t.log.debug("moov processed"),t.moovLoaded=!0,t.mp4box.flush(),t.maintrack=t.mp4box.getInfo().tracks[0].id,t.samples=t.mp4box.getTrackSamplesInfo(t.maintrack);var n=t.mp4box.inputIsoFile.moov.traks[0].mdia.minf.stbl.stss;if(n){t.iframes=new Array(n.sample_numbers.length);for(var i=0;i<n.sample_numbers.length;i++)t.iframes[i]=n.sample_numbers[i]-1}t.downloader.stop(),e&&e(t.getInfo())},this.frameData=[],this.downloader.setCallback(function(e,n,i){if(e){var r=t.mp4box.appendBuffer(e);t.downloader.setChunkSize(t.chunkSize),t.mp4box.inputIsoFile.hasIncompleteMdat()&&!t.moovLoaded?(t.skippingMdat=!0,t.nextStart+=r):t.nextStart+=t.chunkSize}t.downloader.setChunkStart(t.nextStart)}),this.downloader.setInterval(10),this.downloader.setChunkSize(131072),this.downloader.setUrl(Utils.addQueryParams(this.url,this.http.queryParams)),this.downloader.setWithCredentials(this.http.withCredentials),this.downloader.start()},FrameExtractor.prototype.getRange=function(e,t){return this.http.getArrayBufferRange(this.url,e,e+t+1).map(function(t){return t.fileStart=e,t.fileStart||(t=t.slice(0),t.fileStart=e),t})},FrameExtractor.prototype.getPrevIframe=function(e){for(var t=0;t<this.iframes.length;t++)if(this.iframes[t]<=e&&e<this.iframes[t+1])return this.iframes[t];return this.iframes[this.iframes.length-1]},FrameExtractor.prototype.saveNALUnits=function(e,t){for(var n=0,i=this.getFrameSize(t),r=[];i-n>0;){var s=new DataView(e.buffer,n).getUint32(0);r.push(e.subarray(n+4,n+s+4)),n=n+s+4}this.frameData[t]=r},FrameExtractor.prototype.loadFrameData=function(e){if(this.moovLoaded){var t=this;if(e>=this.samples.length)return Rx.Observable.just(e);if(this.iframes){for(var n=this.getPrevIframe(e),i=[],r=0,s=!0,o=this.getFrameOffset(n),a=n;a<=e;a++){var l=this.getFrameSize(a);i.push({rangeFrameOffset:this.getFrameOffset(a)-o,size:l,id:a}),r+=l,this.frameData[a]||(s=!1)}return s?Rx.Observable.just(e):this.getRange(o,r).doOnNext(function(e){for(var n=new Uint8Array(e),r=0;r<i.length;r++)t.saveNALUnits(n.subarray(i[r].rangeFrameOffset,i[r].rangeFrameOffset+i[r].size),i[r].id)}).map(function(t){return e})}return this.frameData[e]?Rx.Observable.just(e):this.getRange(this.getFrameOffset(e),this.getFrameSize(e)).doOnNext(function(n){t.saveNALUnits(new Uint8Array(n),e)}).map(function(t){return e})}return this.log.error("moov is not loaded"),Rx.Observable["throw"]("moov is not loaded")},FrameExtractor.prototype.getFrameOffset=function(e){return this.samples[e].offset},FrameExtractor.prototype.getFrameSize=function(e){return this.samples[e].size},FrameExtractor.prototype.getInfo=function(){var e=this.mp4box.inputIsoFile.moov.traks[0];return{width:e.tkhd.width>>16,height:e.tkhd.height>>16,framesTotal:this.samples.length}},FrameExtractor.prototype.getAvcC=function(){return MovDasher.getAvcC(this.mp4box)},Downloader.prototype.setDownloadTimeoutCallback=function(e){return this.setDownloadTimeoutCallback=e,this},Downloader.prototype.reset=function(){return this.chunkStart=0,this.totalLength=0,this.eof=!1,this},Downloader.prototype.setRealTime=function(e){return this.realtime=e,this},Downloader.prototype.setChunkSize=function(e){return this.chunkSize=e,this},Downloader.prototype.setChunkStart=function(e){return this.chunkStart=e,this.eof=!1,this},Downloader.prototype.setInterval=function(e){return this.chunkTimeout=e,this},Downloader.prototype.setUrl=function(e){return this.url=e,this},Downloader.prototype.setWithCredentials=function(e){return this.withCredentials=!!e,this},Downloader.prototype.setCallback=function(e){return this.callback=e,this},Downloader.prototype.isStopped=function(){return!this.isActive},Downloader.prototype.getFileLength=function(){return this.totalLength},Downloader.prototype.getFile=function(){var e=this;if(e.totalLength&&this.chunkStart>=e.totalLength&&(e.eof=!0),e.eof===!0)return void this.callback(null,!0);var t=new XMLHttpRequest;t.open("GET",this.url,!0),t.responseType="arraybuffer";var n=null;t.start=this.chunkStart;var i;this.chunkStart+this.chunkSize<1/0&&(n="bytes="+this.chunkStart+"-",i=this.chunkStart+this.chunkSize-1,n+=i,t.setRequestHeader("Range",n)),t.onerror=function(t){e.callback(null,!1,!0)},t.onreadystatechange=function(n){if((200==t.status||206==t.status||304==t.status||416==t.status)&&t.readyState==this.DONE){var i=t.getResponseHeader("Content-Range");if(!e.totalLength&&i){var r;r=i.indexOf("/"),r>-1&&(e.totalLength=+i.slice(r+1))}e.eof=t.response.byteLength!==e.chunkSize||t.response.byteLength===e.totalLength;var s=t.response;if(s.fileStart=t.start,s.fileStart||(s=s.slice(0),s.fileStart=t.start),e.callback(s,e.eof),e.isActive===!0&&e.eof===!1){var o=0;o=e.realtime?computeWaitingTimeFromBuffer(video):e.chunkTimeout,e.setDownloadTimeoutCallback&&e.setDownloadTimeoutCallback(o),e.timeoutID=window.setTimeout(e.getFile.bind(e),o)}else e.isActive=!1}},e.isActive&&t.send()},Downloader.prototype.start=function(){return this.chunkStart=0,this.resume(),this},Downloader.prototype.resume=function(){return this.isActive=!0,0===this.chunkSize&&(this.chunkSize=1/0),this.getFile(),this},Downloader.prototype.stop=function(){return this.isActive=!1,this.timeoutID&&(window.clearTimeout(this.timeoutID),delete this.timeoutID),this},function(e){e.closest=e.closest||function t(e){return this.parentNode?this.matches(e)?this:t.call(this.parentNode,e):null}}(Element.prototype),Array.prototype.fill||(Array.prototype.fill=function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=i>>0,s=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],a=void 0===o?n:o>>0,l=a<0?Math.max(n+a,0):Math.min(a,n);s<l;)t[s]=e,s++;return t}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],s=0;s<i;s++)if(t=n[s],e.call(r,t,s,n))return t}),Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),i=n.length>>>0,r=0;if(2==arguments.length)t=arguments[1];else{for(;r<i&&!(r in n);)r++;if(r>=i)throw new TypeError("Reduce of empty array with no initial value");t=n[r++]}for(;r<i;r++)r in n&&(t=e(t,n[r],r,n));return t});var VideoSrc=function(){};VideoSrc=stjs.extend(VideoSrc,null,[],function(e,t){e.VIDEO_ONLY=0,e.VIDEO_AUDIO=1,t.detach=function(){},t.attach=function(e){},t.canSetAudioWithoutReattach=function(e){},t.setAudio=function(e){},t.clearAudioBuffer=function(){}},{},{});var Timeline=function(){};Timeline=stjs.extend(Timeline,null,[],function(e,t){e.UNKNOWN=null,t.getTimeScale=function(){},t.getFrameCount=function(){},t.getTvBySec=function(e){},t.getLastFrame=function(){},t.getLastTv=function(){},t.getTvByTimecode=function(e){},t.getTvByFrame=function(e){},t.getFrameByTv=function(e){},t.getFrameBySec=function(e){},t.getFrameByTimecode=function(e){},t.getFrameByMillis=function(e){},t.floorTv=function(e){},t.boundsFn=function(e){},t.getSecByFrame=function(e){},t.getSecByTv=function(e){},t.getMillisByTv=function(e){},t.getTapeByTv=function(e){},t.getTapeByFrame=function(e){},t.getTapeBySec=function(e){},t.getTapeTimecode=function(){},t.getDurationSec=function(){},t.getSeekableDurationSec=function(){},t.setSeekableDurationSec=function(e){},t.getUpdateRx=function(){},t.getStartUTCTimestamp=function(){},t.setStartUTCTimestamp=function(e){},t.getUTCTimestampBySec=function(e){}},{UNKNOWN:"Timeline"},{});var AudioInfo=function(){};AudioInfo=stjs.extend(AudioInfo,null,[],function(e,t){e.AAC_CHANNEL_CONFIGS=[null,["FrontCenter"],["FrontLeft","FrontRight"],["FrontCenter","FrontLeft","FrontRight"],["FrontCenter","FrontLeft","FrontRight","BackCenter"],["FrontCenter","FrontLeft","FrontRight","BackLeft","BackRight"],["FrontCenter","FrontLeft","FrontRight","BackLeft","BackRight","LFE"],["FrontCenter","FrontLeft","FrontRight","SideLeft","SideRight","BackLeft","BackRight","LFE"]],t.audioType=null,t.channelCount=0,t.channelLabels=null,t.sampleRate=0,t.totalSamples=0,t.waveformPreviews=null},{AAC_CHANNEL_CONFIGS:{name:"Array",arguments:[{name:"Array",arguments:[null]}]},channelLabels:{name:"Array",arguments:[null]},waveformPreviews:{name:"Array",arguments:[null]}},{});var Utils=function(){};Utils=stjs.extend(Utils,null,[],function(e,t){e.match=function(e,t){var n=e.match(new RegExp(t,"i"));return null!=n&&n.length>0},e.timestampToHHmmSS=function(e){var t=stjs.trunc(e.getUTCHours()),n=stjs.trunc(e.getUTCMinutes()),i=stjs.trunc(e.getUTCSeconds());return Utils.zeroPad2(t)+":"+Utils.zeroPad2(n)+":"+Utils.zeroPad2(i)},e.timestampToHHmmSSmsec=function(e){var t=Utils.zeroPad(stjs.trunc(e.getUTCMilliseconds()),3);return Utils.timestampToHHmmSS(e)+"."+t},e.isString=function(e){return"string".equals(typeof e)},e.isNumber=function(e){return"number".equals(typeof e)},e.isNormalNumber=function(e){return Utils.isNumber(e)&&isFinite(e)},e.isSomething=function(e){return Boolean(e)},e.isObject=function(e){return"object".equals(typeof e)},e.findWhere=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(t(i))return i}return null},e.toInt=function(e){return Utils.isString(e)?Integer.parseInt(Utils.defaultString(e,"0")):parseInt(e)},e.toDouble=function(e){return Utils.isString(e)?parseFloat(Utils.defaultString(e,"0")):parseFloat(e)},e.isPropertyDefined=function(e,t){return!"undefined".equals(typeof e[t])},e.removeFromList=function(e,t){var n=e.indexOf(t);return n>=0&&(e.splice(n,1),!0)},e.userAgentContains=function(e){return null!=window&&Utils.match(window.navigator.userAgent,e)},e.isChrome=Utils.userAgentContains("chrome"),e.isFirefox=Utils.userAgentContains("firefox"),e.isSafari=Utils.userAgentContains("safari")&&!Utils.userAgentContains("chrome"),e.isMobileSafari=Utils.isSafari&&Utils.userAgentContains("mobile"),e.constructorName=function(e){return e.constructor.name},e.defaultObject=function(e,t){return e||t},e.convertTv=function(e,t,n){return stjs.trunc(e*n/t)},e.binarySearch0=function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>>1,s=e[r];if(s<t)n=r+1;else{if(!(s>t))return r;i=r-1}}return-(n+1)},e.binarySearch1=function(e,t){var n=Utils.binarySearch0(e,t);return n>=0?n:(n+=1,n=-n,0==n?0:n>=e.length?e.length-1:n-1)},e.min=function(e){for(var t=Integer.MAX_VALUE,n=0;n<e.length;n++)t=Math.min(t,e[n]);return stjs.trunc(t)},e.hms=function(e){return Utils.hhmmss(stjs.trunc(1e3*e))},e.hhmmss=function(e){var t=new Date(e);return Utils.timestampToHHmmSS(t)},e.hhmmssms=function(e){var t=new Date(e);return Utils.timestampToHHmmSSmsec(t)},e.toDuration=function(e){var t=Math.abs(e);return t<1e3?Math.round(e)+" msec":t<6e4?Math.round(stjs.trunc(e/1e3))+" sec":Math.round(stjs.trunc(stjs.trunc(e/1e3)/60))+" mins"},e.zeroPad=function(e,t){var n="0",i=e+"";return i.length>=t?i:new Array(t-i.length+1).join(n)+i},e.zeroPad2=function(e){var t=e+"";return t.length<2?"0"+t:t},e.hmsf=function(e,t,n,i){return Utils.zeroPad2(e)+":"+Utils.zeroPad2(t)+":"+Utils.zeroPad2(n)+":"+Utils.zeroPad2(i)},e.currentTimeMillis=function(){return stjs.trunc((new Date).getTime())},e.defaultString=function(e,t){return null!=e&&Utils.isString(e)&&!"".equals(e)?e:t},e.isEmpty=function(e){return null==e||"".equals(e)},e.isNotEmpty=function(e){return null!=e&&!"".equals(e)},e.isBlank=function(e){return null==e||"".equals(e)||e.matches("\\s+")},e.isNotBlank=function(e){return null!=e&&!"".equals(e)&&!e.matches("\\s+")},e.contains=function(e,t){return e.indexOf(t)>-1},e.includes=function(e,t){return Utils.defaultString(e,"").indexOf(t)>=0},e.filter=function(e,t){for(var n=new Array,i=0;i<e.length;i++){var r=e[i],s=t(r);s&&n.push(r)}return n},e.isDigit=function(e){return!isNaN(parseFloat(e))},e.replaceAt=function(e,t,n){return e.substring(0,t)+n+e.substring(t+n.length)},e.addMethod=function(e,t,n){e[t]=n},e.addField=function(e,t,n){e[t]=n},e.callMethod=function(e,t){var n=e[t];return n()},e.toBoolean=function(e){return Boolean(e)},e.binarySearch=function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>>1,s=e[r],o=t(s);if(o<0)n=r+1;else{if(!(o>0))return r;i=r-1}}var a=n-1;return-a-1},e.binarySearchFloor=function(e,t){var n=Utils.binarySearch(e,t);return n<0&&(n+=1,n=-n),n},e.isFullScreen=function(){return null!=window.document.fullscreenElement||null!=window.document.webkitFullscreenElement||null!=window.document.mozFullscreenElement||window.document.mozFullScreen||window.document.webkitIsFullScreen||Utils.isPropertyDefined(window.document,"msFullscreenElement")},e.fullScreenElement=function(e){return e.msFullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.fullscreenElement},e.map=function(e,t){var n=[];for(var i in e){var r=e[i];n.push(t(i,r))}return n},e.mapValues=function(e){var t=[];for(var n in e){var i=e[n];t.push(i)}return t},e.filterMapValues=function(e,t){var n=[];for(var i in e){var r=e[i];t(r,i)&&n.push(r)}return n},e.filterMap=function(e,t){var n={};for(var i in e){var r=e[i];t(r,i)&&(n[i]=r)}return n},e.jdb=function(){},e.newUUIDString=function(){var e=stjs.trunc(1e4*Math.abs(Math.random())),t=stjs.trunc(1e4*Math.abs(Math.random())),n=stjs.trunc(1e4*Math.abs(Math.random())),i=stjs.trunc(1e4*Math.abs(Math.random()));return t+"-"+e+"-"+n+"-"+i},e.cast=function(e,t){var n=Object.create(e.prototype),i=Object.assign(n,t);return i},e.isDashBrowser=function(){return null!=window.MediaSource},e.querySelectorNotNull=function(e,t){
if(null==t)throw new RuntimeException("query is null");var n=e.querySelector(t);if(null==n)throw new RuntimeException("query selector returned Great Emptiness but should not: "+t);return n},e.readCookie=function(e){for(var t=e+"=",n=window.document.cookie.split(";"),i=n,r=0;r<i.length;r++){for(var s=i[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null},e.jsonClone=function(e){return JSON.parse(JSON.stringify(e))},e.jsonToString=function(e){return JSON.stringify(e)},e.toAbsoluteUri=function(e,t){var n=t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/");if(!n){var i=e.lastIndexOf("/");i>=0&&(t=e.substring(0,i)+"/"+t)}return t},e.dataURLtoBlob=function(e){var t="^data:((.*?)(;charset=.*?)?)(;base64)?,",n=new RegExp(t),i=n.exec(e);if(null==i||0==i.length)throw new RuntimeException("invalid data URI");var r,s=Utils.isNotBlank(i[2])?i[1]:"text/plain"+Utils.defaultString(i[3],";charset=US-ASCII"),o=Utils.isNotBlank(i[4]),a=e.substring(i[0].length);r=o?window.atob(a):decodeURIComponent(a);for(var l=new Uint8Array(r.length),u=0;u<r.length;u+=1)l[u]=r.codePointAt(u);return new Blob([l],{type:s})},e.canvasToBlob=function(e){return Utils.dataURLtoBlob(e.toDataURL("image/jpeg"))},e.forEach=function(e,t){null!=e&&Object.keys(e).forEach(function(n){t(e[n],n)})},e.sumBy=function(e,t){for(var n=0,i=0;i<e.length;i++){var r=t(e[i]);n+=r}return n},e.defaults=function(e,t){return Utils.forEach(t,function(t,n){void 0==e[n]&&(e[n]=t)}),e},e.forEachElement=function(e,t){if(null!=e)for(var n=0;n<e.length;n++)t(e[n])},e.findElement=function(e,t){for(var n=0;n<e.length;n++){var i=t(e[n]);if(i)return e[n]}return null},e.find=function(e,t){for(var n=0;n<e.length;n++){var i=t(e[n]);if(i)return e[n]}return null},e.defaultArray=function(e){return null==e?[]:e},e.base64ToArrayBuffer=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer},e.secondsToTv=function(e,t){return stjs.trunc(e*t+1e-6)},e.keys=function(e){return null==e?[]:Object.keys(e)},e.HHmmSSmsecToTimestamp=function(e){var t=e.split(":",3);if(3!=t.length)return-1;var n=t[2].split(".",2);if(2!=n.length)return-1;var i=Integer.parseInt(n[1]),r=Integer.parseInt(n[0]),s=Integer.parseInt(t[1]),o=Integer.parseInt(t[0]);return i+1e3*r+60*s*1e3+60*o*60*1e3},e.XS_DURATION_PATTERN="^(-)?P(([0-9]*)Y)?(([0-9]*)M)?(([0-9]*)D)?(T(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?)?$",e.parseXsDuration=function(e){var t=e.match(new RegExp(Utils.XS_DURATION_PATTERN));if(null!=t){var n=Utils.isNotEmpty(t[1]),i=t[3],r=null!=i?31556908*Double.parseDouble(i):0,s=t[5];r+=null!=s?2629739*Double.parseDouble(s):0;var o=t[7];r+=null!=o?86400*Double.parseDouble(o):0;var a=t[10];r+=null!=a?3600*Double.parseDouble(a):0;var l=t[12];r+=null!=l?60*Double.parseDouble(l):0;var u=t[14];r+=null!=u?Double.parseDouble(u):0;var c=stjs.trunc(1e3*r);return n?-c:c}return stjs.trunc(3600*Double.parseDouble(e)*1e3)},e.arrayFrom=function(e){return Array.from(e)},e.addQueryParams=function(e,t){if(null==t)return e;for(var n=e.replaceAll("^[^?]*",""),i=Utils.keys(t),r=0;r<i.length;r++){var s=encodeURIComponent(i[r]),o=encodeURIComponent(t[i[r]]),a=s+"="+o,l=new RegExp("(&|\\?)"+s+"=[^&]*");null!=n.match(l)?n=n.replace(l,"$1"+a):(n+=0==n.length?"?":"&",n+=a)}return e.replaceAll("\\?.*","")+n},e.fromCharCodes=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e.stringToArray=function(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},e.buffersEqual=function(e,t){var n=new Uint8Array(e),i=new Uint8Array(t);if(n.length!=i.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}},{},{});var SegmentedStream=function(){this.updateRx=new Rx.Subject};SegmentedStream=stjs.extend(SegmentedStream,null,[],function(e,t){t.id=null,t.mimeType=null,t.codecs=null,t.url=null,t.updateRx=null,t.getDashInit=function(e,t){},t.loadSegment=function(e,t,n){},t.getDashDescriptor=function(){},t.getSegmentIdxByTime=function(e){return this.getDashDescriptor().getSegmentIdxByTime(e)},t.getSegmentStartTime=function(e){return this.getDashDescriptor().getSegmentStartTime(e)},t.getSegmentStartTv=function(e){return this.getDashDescriptor().getSegmentStartTv(e)},t.getSegmentTimestampOffset=function(e){return 0},t.getSegmentDuration=function(e){return this.getDashDescriptor().getSegmentDuration(e)},t.getSegmentCount=function(){return this.getDashDescriptor().getSegmentCount()},t.getDurationSec=function(){var e=this.getDashDescriptor();return e.duration/e.timescale},t.getUpdateRx=function(){return this.updateRx},t.isDynamic=function(){return this.getDashDescriptor().dynamic}},{updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var VideoElement=function(){};VideoElement=stjs.extend(VideoElement,null,[],function(e,t){e.SEEKING="seeking",e.SEEKED="seeked",e.VG_PLAYER_OPACITY_0="vg_player_opacity_0",e.PAUSE="pause",e.PLAYING="playing",e.LOADEDMETADATA="loadedmetadata",e.VOLUMECHANGE="volumechange",e.mediaErrors=["lalala","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],e.networkStates=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],e.readyStates=["HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"],e.TIMEUPDATE="timeupdate",e.CANPLAY="canplay",e.PROGRESS="progress",t.seek=function(e){},t.getBusyRx=function(){},t.playAtRate=function(e){},t.close=function(){},t.pause=function(){},t.isPlaying=function(){},t.getFrame=function(){},t.getVolume=function(){},t.setVolume=function(e){},t.getTimeSec=function(){},t.getVideoWidth=function(){},t.getVideoHeight=function(){},t.getTimeline=function(){},t.getVideoShownRx=function(){},t.getTimeUpdateRx=function(){},t.forwardSec=function(e){},t.forward1=function(e){},t.backward1=function(e){},t.seekFrame=function(e){},t.backwardSec=function(e){},t.getPlayRate=function(){},t.getTimeValue=function(){},t.playFaster=function(){},t.playFasterBackwards=function(){},t.getDuration=function(){},t.getSeekableDuration=function(){},t.endQuickSeek=function(){},t.startQuickSeek=function(){},t.setInitialTime=function(e){},t.setLoop=function(e){},t.setPauseOnLoop=function(e){},t.hasRange=function(){},t.inRange=function(e){},t.setRange=function(e,t){},t.cancelRange=function(){},t.getPlayRx=function(){},t.getVolumeChangeRx=function(){},t.setCrossOrigin=function(e){},t.setResetPlayRateOnSeek=function(e){},t.getBuffered=function(){},t.getProgressRx=function(){}},{mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var LogLevel=stjs.enumeration("DEBUG","INFO","WARN","ERROR","OFF"),TimeSample=function(e,t,n){this.tv=e,this.frame=t,this.sec=n};TimeSample=stjs.extend(TimeSample,null,[],function(e,t){t.tv=0,t.frame=0,t.sec=0},{},{});var PlayerOptions=function(){};PlayerOptions=stjs.extend(PlayerOptions,null,[],function(e,t){e.PLUGINS=stjs.enumeration("filmstrip","waveform","videolog"),t.logLevel=null,t.enableCORS=!1,t.staticVideoSrc=!1,t.hotkeys=!1,t.serverUrl=null,t.playlist=!1,t.search=!1,t.streaming=null,t.plugins=null,t.theme=null,t.preservePlaybackRate=!1,t.allowCrossSiteCredentials=!1,t.drm=null,t.queryParams=null,e.STREAMING_CUTLIST="cutlist",e.STREAMING_VFILE="vfile",e.STREAMING_FILE="file",e.DRMOptions=function(){},e.DRMOptions=stjs.extend(e.DRMOptions,null,[],function(e,t){t.widevine=null,t.playready=null,t.fairplay=null},{widevine:"PlayerOptions.DRMWidevineOptions",playready:"PlayerOptions.DRMPlayreadyOptions",fairplay:"PlayerOptions.DRMFairplayOptions"},{}),e.DRMWidevineOptions=function(){},e.DRMWidevineOptions=stjs.extend(e.DRMWidevineOptions,null,[],function(e,t){t.laUrl=null},{},{}),e.DRMPlayreadyOptions=function(){},e.DRMPlayreadyOptions=stjs.extend(e.DRMPlayreadyOptions,null,[],function(e,t){t.laUrl=null},{},{}),e.DRMFairplayOptions=function(){},e.DRMFairplayOptions=stjs.extend(e.DRMFairplayOptions,null,[],function(e,t){t.laUrl=null,t.certUrl=null},{},{})},{logLevel:{name:"Enum",arguments:["LogLevel"]},plugins:{name:"Array",arguments:[null]},drm:"PlayerOptions.DRMOptions",queryParams:{name:"Map",arguments:[null,null]}},{});var CutInfo=function(e,t,n,i,r,s,o){this.start=e,this.end=t,this.proxyId=n,this.cutListFrameStart=i,this.cutListFrameEnd=r,this.audioDashFile=s,this.audioInfo=o};CutInfo=stjs.extend(CutInfo,null,[],function(e,t){t.start=0,t.end=0,t.proxyId=null,t.cutListFrameStart=0,t.cutListFrameEnd=0,t.audioDashFile=null,t.audioInfo=null,t.frameCount=0,t.cutListFrameCount=0,t.cutId=0},{audioDashFile:"SegmentedAudioStream",audioInfo:"AudioInfo"},{});var ProxyType=stjs.enumeration("HLS","DASH","GENERIC","VG","MP4"),TimeRange=function(e,t){this.start=e,this.end=t};TimeRange=stjs.extend(TimeRange,null,[],function(e,t){t.start=0,t.end=0},{},{});var Proxy=function(){};Proxy=stjs.extend(Proxy,null,[],function(e,t){t.audioInfo=null,t.proxyId=null,t.video=null,t.audio=null,t.thumbshq=null},{audioInfo:"AudioInfo",video:"SegmentedVideoStream",audio:"SegmentedAudioStream",thumbshq:"SegmentedVideoStream"},{});var PlayerEvents=function(){};PlayerEvents=stjs.extend(PlayerEvents,null,[],function(e,t){e.PLAY_EVENT="play",e.LOAD_EVENT="load",e.TIMEUPDATE_EVENT="timeupdate",e.FULLSCREEN_EVENT="fullscreen",e.INIT_EVENT="init",e.TIMELINE_EVENT="timeline",e.ERROR_EVENT="error",e.VOLUME_CHANGED="volumechange",e.PROGRESS="progress"},{},{});var VGPlugins=function(e){this.player=e};VGPlugins=stjs.extend(VGPlugins,null,[],function(e,t){t.player=null,t.type=null,t.view=null},{player:"PlayerImpl",view:"VGView"},{});var PlayerCut=function(e,t,n){null!=e&&(this.proxyId=e.proxyId,this.videoDashFile=e.video,this.audioDashFile=e.audio,this.audioInfo=e.audioInfo),this.startFrame=t,this.endFrame=n};PlayerCut=stjs.extend(PlayerCut,null,[],function(e,t){t.audioDashFile=null,t.audioInfo=null,t.endFrame=0,t.startFrame=0,t.videoDashFile=null,t.proxyId=null,t.start=0,t.end=0,e.fromProxyId=function(e){var t=new PlayerCut(null,0,0);return t.proxyId=e,t},e.LowRes=function(e,t,n){var i=new PlayerCut(e,t,n);return i.videoDashFile=e.thumbshq,i},t.setAudio=function(e){this.audioDashFile=e,this.audioInfo=e.audioInfo}},{audioDashFile:"SegmentedAudioStream",audioInfo:"AudioInfo",videoDashFile:"SegmentedVideoStream"},{});var DataSrc=function(){};DataSrc=stjs.extend(DataSrc,null,[],function(e,t){t.fetch=function(e,t,n,i){}},{},{});var Subtitles=function(){};Subtitles=stjs.extend(Subtitles,null,[],function(e,t){t.id=null,t.rows=null,t.title=null},{rows:{name:"Array",arguments:["SubtitleEntry"]}},{});var DashSegment=function(){};DashSegment=stjs.extend(DashSegment,null,[],function(e,t){t.dataIntervals=null,t.header=null},{dataIntervals:{name:"Array",arguments:["DashSegmentDataInterval"]},header:"ArrayBuffer"},{});var DashSegmentDataInterval=function(){};DashSegmentDataInterval=stjs.extend(DashSegmentDataInterval,null,[],function(e,t){t.dataFrom=0,t.dataTo=0},{},{});var VGPlayerPublicApi=function(){};VGPlayerPublicApi=stjs.extend(VGPlayerPublicApi,null,[],function(e,t){t.close=function(){},t.addCaptionsHandler=function(e){},t.audioAddHandler=function(e){},t.addCaptions=function(e){},t.load=function(e,t){},t.loadUrl=function(e,t){},t.loadAudioTrack=function(e,t,n){},t.setAudioTrackUrl=function(e,t,n){},t.conformAudioTrack=function(e,t){},t.getAudioTrack=function(e){},t.setCurrentAudioTrack=function(e){},t.addAudioTrack=function(e,t){},t.addAudioTrackWithId=function(e,t,n){},t.muteAudioTrack=function(e){},t.togglePlay=function(){},t.play=function(){},t.pause=function(){},t.getTimeline=function(){},t.getCurrentTapeTimecode=function(){},t.getCurrentStandardTimecode=function(){},t.getCurrentFrame=function(){},t.getCurrentTime=function(){},t.getCurrentTimeValue=function(){},t.getCurrentUTCTimestamp=function(){},t.seekSec=function(e){},t.seekUTCTimestamp=function(e){},t.seek=function(e){},t.seekFrame=function(e){},t.nextFrame=function(e){},t.previousFrame=function(e){},t.nextSec=function(e){},t.previousSec=function(e){},t.enterFullscreen=function(){},t.exitFullscreen=function(){},t.setRange=function(e,t){},t.cancelRange=function(){},t.hasRange=function(){},t.playAtRate=function(e){},t.playFasterBackwards=function(){},t.playFaster=function(){},t.setLoop=function(e){},t.setPauseOnLoop=function(e){},t.getPlaybackRate=function(){},t.isPlaying=function(){},t.getCurrentAudioTrack=function(){},t.isAudioMutable=function(){},t.setVolume=function(e){},t.getVolume=function(){},t.getSeekableDurationSec=function(){},t.getDurationSec=function(){},t.getTimeSample=function(){},t.setVideoQuality=function(e){},t.setStartTapeTimecode=function(e){},t.getStartTapeTimecode=function(){},t.getCaptionsList=function(){},t.getAudioTracks=function(){},t.disableHotKeys=function(){},t.enableHotKeys=function(){},t.addEventListener=function(e,t){},t.removeEventListener=function(e,t){},t.getFilmStripDrawer=function(e){},t.registerPlugin=function(e){},t.getBuffered=function(){},t.setLogLevel=function(e){},t.isLive=function(){},t.setStartUTCTimestamp=function(e){},t.getStartUTCTimestamp=function(){}},{},{});var InternalApi=function(){};InternalApi=stjs.extend(InternalApi,null,[],null,{},{});var SubtitleEntry=function(){};SubtitleEntry=stjs.extend(SubtitleEntry,null,[],function(e,t){t.startMsec=0,t.endMsec=0,t.startTv=0,t.endTv=0,t.timeCodeIn=null,t.timeCodeOut=null,t.notes=null,t.red=!1},{},{});var SubsUtils=function(){};SubsUtils=stjs.extend(SubsUtils,null,[],function(e,t){e.parseTimestamp=function(e){var t=e.split(new RegExp("[:,.]")),n=Integer.parseInt(t.pop()),i=Integer.parseInt(t.pop()),r=Integer.parseInt(t.pop()),s=Integer.parseInt(t.pop());return 36e5*s+6e4*r+1e3*i+n}},{},{});var PacketCache=function(){};PacketCache=stjs.extend(PacketCache,null,[],function(e,t){t.updateTimePackets=function(e,t){},t.getFrameByTv=function(e){},t.getTvByFrame=function(e){},t.floorTv=function(e){},t.getFrameCount=function(e){},e.longCompare=function(e,t){return e<t?-1:e==t?0:1},t.getAverageFrameDuration=function(){}},{},{});var Pair=function(e,t){this.k=e,this.v=t};Pair=stjs.extend(Pair,null,[],function(e,t){t.k=null,t.v=null,e.of=function(e,t){return new Pair(e,t)},t.getKey=function(){return this.k},t.getValue=function(){return this.v}},{},{});var AbstractFrameExtractor=function(){};AbstractFrameExtractor=stjs.extend(AbstractFrameExtractor,null,[],function(e,t){t.mp4box=null,t.iframes=null,t.frameData=null,t.init=function(e){},t.getInfo=function(){},t.getPrevIframe=function(e){},t.loadFrameData=function(e){},t.getAvcC=function(){return MovDasher.getAvcC(this.mp4box)}},{mp4box:"MP4Box",iframes:{name:"Array",arguments:[null]},frameData:{name:"Array",arguments:[{name:"Array",arguments:["Uint8Array"]}]}},{});var FilmstripInfo=function(e,t,n){this.width=e,this.height=t,this.framesTotal=n};FilmstripInfo=stjs.extend(FilmstripInfo,null,[],function(e,t){t.width=0,t.height=0,t.framesTotal=0},{},{});var ChannelMute=function(e,t){this.mute=e,this.channel=t};ChannelMute=stjs.extend(ChannelMute,null,[],function(e,t){t.mute=!1,t.channel=0},{},{});var PlayerAudioChannel=function(){};PlayerAudioChannel=stjs.extend(PlayerAudioChannel,null,[],function(e,t){t.muted=!1,t.label=null,t.waveformPngUrl=null},{},{});var PublicApi=function(){};PublicApi=stjs.extend(PublicApi,null,[],null,{},{});var CloseableView=function(){};CloseableView=stjs.extend(CloseableView,null,[],function(e,t){t.children=null,t.addChild=function(e){null==this.children&&(this.children=new Array),this.children.push(e)},t.close=function(){if(null!=this.children){for(var e=0;e<this.children.length;e++)this.children[e].close();this.children=null}}},{children:{name:"Array",arguments:["CloseableView"]}},{});var MutableInt=function(e){this.value=e};MutableInt=stjs.extend(MutableInt,null,[],function(e,t){t.value=0,t.decrementAndGet=function(){return--this.value},t.incrementAndGet=function(){return++this.value}},{},{});var DashSegmentUrls=function(e,t){this.urls=t,this.init=e};DashSegmentUrls=stjs.extend(DashSegmentUrls,null,[],function(e,t){t.urls=null,t.init=null,t.getInitUrl=function(){return this.init},t.getSegmentUrl=function(e){return this.urls[e]},t.getCount=function(){return this.urls.length}},{urls:{name:"Array",arguments:[null]}},{});var DashStreamUtils=function(){};DashStreamUtils=stjs.extend(DashStreamUtils,null,[],function(e,t){e.createDownloadLink=function(e){console.log("creating downloadable mp4");var t=Rx.Observable.create(function(t){e.getDashInit(function(e){t.onNext(e),t.onCompleted()},stjs.bind(t,"onError"))}),n=Rx.Observable.range(0,e.getSegmentCount()).concatMap(function(t){return Rx.Observable.create(function(n){console.log("segment "+t+"/"+e.getSegmentCount()),e.loadSegment(t,function(e){n.onNext(e),n.onCompleted()},function(e){return n.onError(e)})})});t.concat(n).reduce(function(e,t,n,i){return e.push(t),e},[]).subscribe(function(e){console.log("finished creating downloadable mp4");var t=new Blob(e,{type:"video/mp4"}),n=window.document.createElement("a");n.href=URL.createObjectURL(t),n.target="_blank",n.download="generated.mp4",n.innerHTML="download mp4",window.document.body.appendChild(n)})},e.segmentSize=function(e){for(var t=0,n=0;n<e.dataIntervals.length;n++){var i=e.dataIntervals[n];t+=i.dataTo-i.dataFrom}return t}},{},{});var PriorityQueue=function(e){this.comparator=e,this.arr=new Array};PriorityQueue=stjs.extend(PriorityQueue,null,[],function(e,t){t.arr=null,t.comparator=null,t.isEmpty=function(){return 0==this.arr.length},t.add=function(e){this.arr.push(e),this.arr.sort(this.comparator)},t.poll=function(){return this.arr.shift()}},{arr:{name:"Array",arguments:["T"]},comparator:{name:"SortFunction",arguments:["T"]}},{});var MutableBoolean=function(e){this.value=e};MutableBoolean=stjs.extend(MutableBoolean,null,[],function(e,t){t.value=!1},{},{});var KeyOptions=function(){};KeyOptions=stjs.extend(KeyOptions,null,[],function(e,t){t.group=null,t.description=null,t.allowInputs=!1,t.scope=null,t.ignoreSummary=!1,t.onKeyUp=!1,e.gd=function(e,t,n){var i=new KeyOptions;return i.group=e,i.description=t,i.allowInputs=n,i}},{},{});var ObjectEvents=function(){this.events={},this.mandatoryEvents={},this.listenAlls=[]};ObjectEvents=stjs.extend(ObjectEvents,null,[],function(e,t){t.events=null,t.listenAlls=null,t.mandatoryEvents=null,t.addEventListener=function(e,t){this.addEvent(e,t)},t.addEvent=function(e,t){if(null==this.events[e]&&(this.events[e]=[]),this.events[e].push(t),null!=this.mandatoryEvents[e])for(var n=0;n<this.mandatoryEvents[e].length;n++){var i=this.mandatoryEvents[e][n];t(i)}},t.fireEvent=function(e,t){var n=this.events[e];if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];r(t)}for(var s=0;s<this.listenAlls.length;s++){var r=this.listenAlls[s];r(e,t)}},t.fireMandatoryEvent=function(e,t){this.fireEvent(e,t),null==this.mandatoryEvents[e]&&(this.mandatoryEvents[e]=[]),this.mandatoryEvents[e].push(t)},t.removeEvent=function(e,t){if(null!=this.events[e])for(var n=this.events[e],i=0;i<n.length;i++){var r=n[i];if(t==r)return n.splice(i,1),void this.removeEvent(e,t)}},t.removeEvents=function(e){null!=this.events[e]&&(this.events[e]=[])},t.listenAll=function(e){this.listenAlls.push(e)}},{events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{});var FrameDrawer=function(e){this.frameExtractor=e,this.iframes=e.iframes,this.canvas=window.document.createElement("canvas"),this.canvas.height=e.getInfo().height,this.canvas.width=e.getInfo().width,this.ctx=this.canvas.getContext("2d",null),this.imgData=this.ctx.createImageData(this.canvas.width,this.canvas.height),this.decoder=new Decoder({rgb:!0}),this.lastDecodedFn=-1;var t=e.getAvcC();this.sps=t.SPS[0],this.pps=t.PPS[0]};FrameDrawer=stjs.extend(FrameDrawer,null,[],function(e,t){t.frameExtractor=null,t.iframes=null,t.canvas=null,t.ctx=null,t.imgData=null,t.decoder=null,t.lastDecodedFn=0,t.sps=null,t.pps=null,t.resetDecoder=function(){this.decoder.decode(this.sps),this.decoder.decode(this.pps)},t.renderFromPrevIframe=function(e){var t;if(e==this.lastDecodedFn)return Rx.Observable.just(this.canvas);if(null!=this.iframes){var n=this.frameExtractor.getPrevIframe(e);this.lastDecodedFn!=-1&&this.lastDecodedFn<e&&this.frameExtractor.getPrevIframe(this.lastDecodedFn)==n?t=this.lastDecodedFn+1:(t=n,this.resetDecoder())}else t=e,this.resetDecoder();return this.decoder.onPictureDecoded=function(e){},Rx.Observable.create(stjs.bind(this,function(n){for(var i=t;i<=e;i++){var r=this.frameExtractor.frameData[i];if(null==r){n.onNext(null),n.onCompleted();break}this.lastDecodedFn=i;for(var s=0;s<r.length;s++)i==e&&s==r.length-1&&(this.decoder.onPictureDecoded=stjs.bind(this,function(e){this.imgData.data.set(e,0),this.ctx.putImageData(this.imgData,0,0),n.onNext(this.canvas),n.onCompleted()})),this.decoder.decode(r[s])}}))},t.decodeFrame=function(e){return e>=0&&e<this.frameExtractor.getInfo().framesTotal?this.renderFromPrevIframe(e):Rx.Observable.just(null)}},{frameExtractor:"AbstractFrameExtractor",iframes:{name:"Array",arguments:[null]},canvas:"Canvas",ctx:"CanvasRenderingContext2D",imgData:"CanvasImageData",decoder:"Decoder",sps:"Uint8Array",pps:"Uint8Array"},{});var Platform=function(){};Platform=stjs.extend(Platform,null,[],function(e,t){e.isJava="9007199254740993".equals("9007199254740992"),e.regexSplit=function(e,t){return Platform.isJava?e.split(t):e.split(new RegExp(t))},e.fromCharCode=function(e){return Platform.isJava?String.valueOf(stjs.trunc(e)):String.fromCharCode(e)},e.ascii=function(e,t,n){for(var i="",r=t;r<t+n;r++){var s=e.getUint8(r);i+=Platform.fromCharCode(s)}return i}},{},{});var Mp4Streams=function(){};Mp4Streams=stjs.extend(Mp4Streams,null,[],function(e,t){t.video=null,t.audio=null,t.timeline=null},{video:"SegmentedStream",audio:{name:"Array",arguments:["SegmentedAudioStream"]},timeline:"Timeline"},{});var MPDStreams=function(){};MPDStreams=stjs.extend(MPDStreams,null,[],function(e,t){t.video=null,t.audio=null,t.thumbshq=null,t.thumbs=null,t.drmInfo=null},{video:"MPDSegmentedVideoStream",audio:"MPDSegmentedAudioStream",thumbshq:"MPDSegmentedVideoStream",thumbs:"MPDSegmentedVideoStream",drmInfo:{name:"Array",arguments:["DRMInfo"]}},{});var DRMInfo=function(e,t,n,i){this.streamId=e,this.keySystem=t,this.initData=n,this.contentType=i};DRMInfo=stjs.extend(DRMInfo,null,[],function(e,t){t.streamId=null,t.keySystem=null,t.initData=null,t.contentType=null},{},{});var VGPlugin=function(){};VGPlugin=stjs.extend(VGPlugin,null,[],function(e,t){t.setAPI=function(e){},t.getId=function(){},t.renderInto=function(e,t,n){}},{},{});var FileStreaming=function(e,t,n,i){throw new RuntimeException("TODO")};FileStreaming=stjs.extend(FileStreaming,null,[VideoSrc],function(e,t){t.detach=function(){throw new RuntimeException("TODO")},t.attach=function(e){throw new RuntimeException("TODO")},t.canSetAudioWithoutReattach=function(e){return!1},t.setAudio=function(e){throw new RuntimeException("TODO")},t.clearAudioBuffer=function(){throw new RuntimeException("TODO")}},{},{});var CutListStreaming=function(e,t,n){throw new RuntimeException("TODO")};CutListStreaming=stjs.extend(CutListStreaming,null,[VideoSrc],function(e,t){t.detach=function(){throw new RuntimeException("TODO")},t.attach=function(e){throw new RuntimeException("TODO")},t.canSetAudioWithoutReattach=function(e){return!1},t.setAudio=function(e){throw new RuntimeException("TODO")},t.clearAudioBuffer=function(){throw new RuntimeException("TODO")}},{},{});var DashCutListStreaming=function(e,t,n,i){throw new RuntimeException("DashCutListStreaming TODO")};DashCutListStreaming=stjs.extend(DashCutListStreaming,null,[VideoSrc],function(e,t){t.detach=function(){throw new RuntimeException("TODO")},t.attach=function(e){throw new RuntimeException("TODO")},t.canSetAudioWithoutReattach=function(e){return!1},t.setAudio=function(e){throw new RuntimeException("TODO")},t.clearAudioBuffer=function(){throw new RuntimeException("TODO")}},{},{});var DashDescriptor=function(){};DashDescriptor=stjs.extend(DashDescriptor,null,[],function(e,t){t.timecode=null,t.timescale=0,t.avgFrameDuration=0,t.segmentStartTv=null,t.segmentStartFrame=null,t.duration=0,t.mimeType=null,t.codecs=null,t.dynamic=!1,t.width=0,t.height=0,t.channelConfig=0,t.baseTv=0,t.availabilityStartTime=null,t.getSegmentCount=function(){return this.segmentStartTv.length-1},t.getSegmentDuration=function(e){var t=this.segmentStartTv[e],n=this.segmentStartTv[e+1];return(n-t)/this.timescale},t.frameDataAvailable=function(){return null!=this.segmentStartFrame},t.getSegmentFrameCount=function(e){return this.frameDataAvailable()?this.segmentStartFrame[e+1]-this.segmentStartFrame[e]:-1},t.getSegmentIdxByFrame=function(e){return this.frameDataAvailable()?Utils.binarySearchFloor(this.segmentStartFrame,function(t){return t-e}):-1},t.getSegmentIdxByTime=function(e){var t=Utils.secondsToTv(e,this.timescale),n=Utils.binarySearchFloor(this.segmentStartTv,function(e){return stjs.trunc(e-t)});return n},t.getSegmentStartTime=function(e){return this.segmentStartTv[e]/this.timescale},t.getSegmentStartTv=function(e){return this.segmentStartTv[e]},t.update=function(e){this.segmentStartTv=e.segmentStartTv,this.duration=e.duration}},{segmentStartTv:{name:"Array",arguments:[null]},segmentStartFrame:{name:"Array",arguments:[null]}},{});var Http=function(e){this.log=e};Http=stjs.extend(Http,null,[],function(e,t){t.log=null,t.queryParams=null,t.withCredentials=!1,e.bandwidth=-1,t.setWithCredentials=function(e){this.withCredentials=e},t.loadTime=function(e){return stjs.trunc(e/(1024*Http.bandwidth/8)*1e3)},t.postAsJson=function(e,t){return this.request(function(){return e},JSON.stringify(t),"POST",{"Content-type":"application/json"})},t.putAsJson=function(e,t){return this.request(function(){return e},JSON.stringify(t),"PUT",{"Content-type":"application/json"})},t.get=function(e){return this.request(function(){return e},null,"GET",null)},t.delete_=function(e){return this.request(function(){return e},null,"DELETE",null)},t.getJson=function(e,t){return this.request(function(){return e},null,"GET",null).map(stjs.bind(this,function(n){try{return stjs.parseJSON(n,t)}catch(i){this.log.warn("error parsing json. using default json parser",e);var r=JSON.parse(n);return Utils.cast(t,r)}}))},t.request=function(e,t,n,i){return this.requestBinary(e,t,n,i,!1)},t.requestBinary=function(e,t,n,i,r){var s=Rx.Observable.create(stjs.bind(this,function(s){var o=Utils.addQueryParams(e(),this.queryParams),a=new Http.RequestObserver(o,t,i,null,n,s,this.withCredentials,r,this.log).invoke(),l=a.getHttp();return stjs.bind(this,function(){a.loaded||4!=l.readyState&&(this.log.debug("abort "+n+" "+a.url),l.abort())})}));return s},t.getWithUrlFunc=function(e){return this.request(e,null,"GET",null)},t.getArrayBuffer=function(e){return this.getArrayBufferRange(e,0,0)},t.getArrayBufferRange=function(e,t,n){var i=Utils.addQueryParams(e,this.queryParams),r=Rx.Observable.create(stjs.bind(this,function(e){var r=new XMLHttpRequest;return r.open("GET",i,!0),n>0&&r.setRequestHeader("Range","bytes="+t+"-"+(n-1)),r.withCredentials=this.withCredentials,r.responseType="arraybuffer",r.onreadystatechange=function(){4==r.readyState&&(200==r.status||206==r.status||304==r.status?(e.onNext(r.response),e.onCompleted()):e.onError(r))},r.send(null),stjs.bind(this,function(){4!=r.readyState&&(this.log.debug("abort GET "+i),r.abort())})}));return Http.bandwidth!=-1&&(r=r.flatMap(function(e){return Http.slowdown(e)})),r},e.slowdown=function(e){for(var t=1e5,n=new Array,i=0;i<stjs.trunc(e.byteLength/t);i++)n.push(t);return e.byteLength%t>0&&n.push(e.byteLength%t),Rx.Observable.from(n).concatMap(function(e){return Http.Slowdown.create(e)}).takeLast(1).map(function(t){return e})},t.setQueryParams=function(e){this.queryParams=e},e.RequestObserver=function(e,t,n,i,r,s,o,a,l){this.url=e,this.data=t,this.withCredentials=o,this.binary=a,this.log=l,this.headers=null==n?{}:n,this.form=i,this.method=r,this.observer=s},e.RequestObserver=stjs.extend(e.RequestObserver,null,[],function(e,t){t.url=null,t.data=null,t.withCredentials=!1,t.binary=!1,t.log=null,t.form=null,t.method=null,t.observer=null,t.http=null,t.loaded=!1,t.headers=null,t.getHttp=function(){return this.http},t.getLoaded=function(){return this.loaded},t.invoke=function(){return this.http=new XMLHttpRequest,this.http.open(this.method,this.url),this.http.withCredentials=this.withCredentials,this.binary&&(this.http.responseType="arraybuffer"),Utils.keys(this.headers).forEach(stjs.bind(this,function(e){return this.http.setRequestHeader(e,this.headers[e])})),this.log.debug(this.method,this.url),this.loaded=!1,this.http.onreadystatechange=stjs.bind(this,function(){1==this.http.readyState&&Utils.keys(this.headers).forEach(stjs.bind(this,function(e){return this.http.setRequestHeader(e,this.headers[e])}))}),this.http.onload=stjs.bind(this,function(){this.loaded=!0,204==this.http.status&&(this.observer.onNext(null),this.observer.onCompleted()),this.http.status>=200&&this.http.status<400&&(this.observer.onNext(this.http.response),this.observer.onCompleted()),this.http.status>=400&&(this.log.debug("error "+this.http.status+" "+this.method+" "+this.url),this.observer.onError(this.http)),0==this.http.status&&(this.log.debug("error "+this.http.status+" "+this.method+" "+this.url),this.observer.onError(this.http))}),this.http.onerror=stjs.bind(this,function(e){this.log.debug("error "+this.http.status+" "+this.method+" "+this.url),this.observer.onError(e)}),null==this.data?this.http.send(this.form):this.http.send(this.data),this}},{data:"Object",log:"Log",form:"FormData",observer:{name:"Rx.Observer",arguments:["T"]},http:"XMLHttpRequest",headers:{name:"Map",arguments:[null,null]}},{}),e.Slowdown=function(){},e.Slowdown=stjs.extend(e.Slowdown,null,[],function(e,t){t.tid=null,e.create=function(e){var t=new Http.Slowdown;return Rx.Observable.create(function(n){if(Http.bandwidth==-1)return n.onNext(!0),n.onCompleted(),function(){};var i=stjs.trunc(e/(1024*Http.bandwidth/8)*1e3);return t.tid=setTimeout(function(){n.onNext(!0),n.onCompleted()},i),function(){return clearTimeout(t.tid)}})}},{tid:"TimeoutHandler"},{})},{log:"Log",queryParams:{name:"Map",arguments:[null,null]}},{});var PlayerError=function(e){this.message=arguments[0],this.severity=stjs.trunc(arguments[1]),this.data=Utils.arrayFrom(arguments).slice(2)};PlayerError=stjs.extend(PlayerError,null,[],function(e,t){t.message=null,t.severity=0,t.data=null,e.FATAL=0,e.NONFATAL=1},{data:{name:"Array",arguments:["Object"]}},{});var PlayerUtils=function(){};PlayerUtils=stjs.extend(PlayerUtils,null,[],function(e,t){e.MAX_INT=2147483648,e.randomString=function(){var e=Utils.currentTimeMillis().toString(36),t=stjs.trunc(Math.random()*PlayerUtils.MAX_INT).toString(36);return e+"-"+t}},{},{});var TapeTimecode=function(e,t,n){this.dropFrame=e,this.startTimecode=t,this.tapeFps=n};TapeTimecode=stjs.extend(TapeTimecode,null,[],function(e,t){t.startTimecode=0,t.dropFrame=!1,t.tapeFps=0,e.timecodeFromString=function(e,t){var n=TapeTimecode.isDropFrameString(e);return new TapeTimecode(n,TapeTimecode.parseTimecode(e,t,n),t)},t.setStartTimecode=function(e){this.startTimecode=e},t.getTapeFps=function(){return this.tapeFps},t.setTapeFps=function(e){this.tapeFps=e},t.isDropFrame=function(){return this.dropFrame},e.parseTimecode=function(e,t,n){var i=e.replace(";",":").split(":",4),r=parseInt(i[0],10),s=parseInt(i[1],10),o=parseInt(i[2],10),a=parseInt(i[3],10),l=(3600*r+60*s+o)*t+a;if(n){var u=stjs.trunc(stjs.trunc(l/17982)),c=l%17982;l-=18*u+2*parseInt(stjs.trunc((c-2)/1798))}return l},e.timecodeToString=function(e,t,n){if(t){var i=stjs.trunc(stjs.trunc(e/17982)),r=e%17982;e+=18*i+2*stjs.trunc(stjs.trunc((r-2)/1798))}var s=e%n;e=parseInt(stjs.trunc(e/n));var o=e%60;e=parseInt(stjs.trunc(e/60));var a=e%60;e=parseInt(stjs.trunc(e/60));var l=e%24,u="";
return u+=Utils.zeroPad2(l)+":",u+=Utils.zeroPad2(a)+":",u+=Utils.zeroPad2(o),u+=t?";":":",u+=Utils.zeroPad2(s)},e.isDropFrameString=function(e){return 8==e.indexOf(";")},t.getTimecodedDuration=function(e){return TapeTimecode.timecodeToString(parseInt(e),this.dropFrame,this.tapeFps)},t.getTimecodeAtFrame=function(e){return TapeTimecode.timecodeToString(this.startTimecode+e,this.dropFrame,this.tapeFps)},t.getFrameByTimecode=function(e){return TapeTimecode.parseTimecode(e,this.tapeFps,this.dropFrame)-this.startTimecode},e.TIMECODE_REGEX=new RegExp("^\\d\\d[:;]\\d\\d[:;]\\d\\d[:;]\\d\\d$"),e.isTimecode=function(e){return TapeTimecode.TIMECODE_REGEX.test(e)}},{TIMECODE_REGEX:"RegExp"},{});var SegmentedAudioStream=function(){SegmentedStream.call(this)};SegmentedAudioStream=stjs.extend(SegmentedAudioStream,SegmentedStream,[],function(e,t){e.FRAMES_PER_SEGMENT=84,t.channelMuted=null,t.proxyId=null,t.sampleRate=0,t.totalSamples=0,t.serverUrl=null,t.audioInfo=null,t.BITRATE=0,t.getProxyId=function(){return this.proxyId},t.setAudioInfo=function(e){this.audioInfo=e},t.silenceAppended=function(){}},{channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var Log=function(e){this.level=e};Log=stjs.extend(Log,null,[],function(e,t){t.level=null,t.setLevel=function(e){this.level=e},t.getLevel=function(){return this.level},t.debug=function(e){this.level.ordinal()<=LogLevel.DEBUG.ordinal()&&this.log(arguments)},t.info=function(e){this.level.ordinal()<=LogLevel.INFO.ordinal()&&this.log(arguments)},t.warn=function(e){this.level.ordinal()<=LogLevel.WARN.ordinal()&&this.log(arguments)},t.error=function(e){this.level.ordinal()<=LogLevel.ERROR.ordinal()&&this.err(arguments)},t.log=function(e){console.log.apply(console,e)},t.err=function(e){console.error.apply(console,e)}},{level:{name:"Enum",arguments:["LogLevel"]}},{});var HttpDataSrc=function(e,t){this.http=e,this.url=t};HttpDataSrc=stjs.extend(HttpDataSrc,null,[DataSrc],function(e,t){t.http=null,t.url=null,t.fetch=function(e,t,n,i){var r=this.http.getArrayBufferRange(this.url,e,t).subscribe(n,function(e){return i(""+e.status)});return stjs.bind(r,"dispose")}},{http:"Http"},{});var VGPlayerPluginApi=function(){};VGPlayerPluginApi=stjs.extend(VGPlayerPluginApi,null,[VGPlayerPublicApi],function(e,t){t.getCaptionListChangeRx=function(){},t.getTimeUpdateRx=function(){},t.getTimeline=function(){},t.seekSec=function(e){},t.getCaptionHandlerRx=function(){},t.getOptions=function(){},t.getHttp=function(){},t.getLog=function(){},t.getErrorRx=function(){}},{},{});var DCSubs=function(){};DCSubs=stjs.extend(DCSubs,null,[],function(e,t){e.probe=function(e){if(e.length<256)return-1;var t=0;e.startsWith("<?xml")&&(t=1),e.contains("<DCSubtitle")&&t++;for(var n=-1;-1!=(n=e.indexOf("<Subtitle",n+1));)t++;for(n=-1;-1!=(n=e.indexOf("<Text",n+1));)t++;return t},e.parse=function(e,t){var n=window.document.createElement("div");n.innerHTML=e;var i=n.querySelectorAll("Subtitle"),r=Rx.Observable.from(DCSubs.toArray(i)),s=r.map(function(e){var n=SubsUtils.parseTimestamp(e.getAttribute("timein")),i=SubsUtils.parseTimestamp(e.getAttribute("timeout")),r=new SubtitleEntry;return r.startMsec=n,r.endMsec=i,r.startTv=t.getTvBySec(n/1e3),r.endTv=t.getTvBySec(i/1e3),r.timeCodeIn=t.getTapeBySec(n/1e3),r.timeCodeOut=t.getTapeBySec(i/1e3),r.notes=e.innerText,r}),o=new Subtitles;o.rows=[];var a=s.reduce(function(e,t){return e.rows.push(t),e},o);return a},e.toArray=function(e){if(null==e)return null;for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},{},{});var DefaultPacketCache=function(e){this.avgFrameDuration=0!=e?e:DefaultPacketCache.DEFAULT_SAMPLE_DURATION,this.knownPkts=[]};DefaultPacketCache=stjs.extend(DefaultPacketCache,null,[PacketCache],function(e,t){e.DEFAULT_SAMPLE_DURATION=1001,t.knownPkts=null,t.avgFrameDuration=0,t.contiguousDuration=0,t.contiguousFrames=0,t.packetIsKnown=function(e){if(0==this.knownPkts.length)return!1;var t=Utils.binarySearch(this.knownPkts,function(t){return PacketCache.longCompare(t.pts,e.pts)});return t>=0},t.updateTimePackets=function(e,t){for(var n=0,i=0;i<t.length;i++)this.packetIsKnown(t[i])||(n++,this.knownPkts.push(t[i]));if(0!=n){this.knownPkts.sort(function(e,t){return PacketCache.longCompare(e.pts,t.pts)});for(var r=0,s=this.knownPkts.length,o=0,a=0,l=!0,i=0;i<s;i++){var u=this.knownPkts[i];r+=u.duration,l&&(u.pts==o?(u.frame=a,a++,o+=u.duration):l=!1)}this.contiguousDuration=o,this.contiguousFrames=a,this.avgFrameDuration=r/s}},t.estimateFrameByTv=function(e){return stjs.trunc(e/this.avgFrameDuration)},t.estimateTvByFrame=function(e){return stjs.trunc(e*this.avgFrameDuration)},t.getFrameByTv=function(e){if(e<0)return 0;if(e<this.contiguousDuration){var t=Utils.binarySearch(this.knownPkts,function(t){return PacketCache.longCompare(t.pts,e)});if(t>=0)return this.knownPkts[t].frame;var n=-(t+1),i=this.knownPkts[n];return i.frame}return this.estimateFrameByTv(e)},t.getTvByFrame=function(e){return e<0?0:e<this.contiguousFrames?this.knownPkts[e].pts:e==this.contiguousFrames&&e>0?this.knownPkts[e-1].pts+this.knownPkts[e-1].duration:this.estimateTvByFrame(e)},t.estimateFloorTv=function(e){return stjs.trunc(e/stjs.trunc(this.avgFrameDuration))*stjs.trunc(this.avgFrameDuration)},t.floorTv=function(e){if(0==this.knownPkts.length)return this.estimateFloorTv(e);var t=Utils.binarySearch(this.knownPkts,function(t){return PacketCache.longCompare(t.pts,e)});if(t>=0)return this.knownPkts[t].pts;var n=-(t+1),i=this.knownPkts[n];return e>=i.pts&&e<i.pts+i.duration?i.pts:this.estimateFloorTv(e)},t.getFrameCount=function(e){return this.contiguousDuration==e?this.knownPkts.length:stjs.trunc(e/this.avgFrameDuration)},t.getAverageFrameDuration=function(){return this.avgFrameDuration}},{knownPkts:{name:"Array",arguments:["MovDasher.TimePacket"]}},{});var OptimizedPacketCache=function(e,t,n){this.segmentStartFrames=e,this.segmentStartTv=t,this.log=n,this.knownPkts=[],this.framesByTv={}};OptimizedPacketCache=stjs.extend(OptimizedPacketCache,null,[PacketCache],function(e,t){t.knownPkts=null,t.framesByTv=null,t.segmentStartFrames=null,t.segmentStartTv=null,t.log=null,t.segmentCached=function(e){var t=this.segmentStartFrames[e];return null!=this.knownPkts[t]},t.updateTimePackets=function(e,t){if(this.segmentCached(e))return void this.log.debug("Segment "+e+" is already cached, skiping");for(var n=this.segmentStartFrames[e],i=0;i<t.length;i++){var r=t[i],s=n+i;r.frame=s,this.knownPkts[s]=r,this.framesByTv[""+r.pts]=s}},t.segmentIndexByFrame=function(e){return Utils.binarySearchFloor(this.segmentStartFrames,function(t){return PacketCache.longCompare(t,e)})},t.segmentIndexByTv=function(e){return Utils.binarySearchFloor(this.segmentStartTv,function(t){return PacketCache.longCompare(t,e)})},t.averageFrameDuration=function(e){var t=this.segmentStartFrames[e],n=this.segmentStartTv[e],i=this.segmentStartTv[e+1]-n,r=this.segmentStartFrames[e+1]-t;return i/r},t.estimateFrameByTv=function(e){var t=this.segmentIndexByTv(e),n=this.segmentStartFrames[t],i=this.segmentStartTv[t];return n+stjs.trunc((e-i)/this.averageFrameDuration(t))},t.estimateTvByFrame=function(e){var t=this.segmentIndexByFrame(e),n=this.segmentStartFrames[t],i=this.segmentStartTv[t];return i+stjs.trunc((e-n)*this.averageFrameDuration(t))},t.getFrameByTv=function(e){if(e<this.getTotalDuration()){var t=this.framesByTv[""+this.floorTv(e)];return null!=t?t:this.estimateFrameByTv(e)}return this.getFrameCount(this.getTotalDuration())-1},t.getTvByFrame=function(e){var t=this.knownPkts[e];return null!=t?t.pts:this.estimateTvByFrame(e)},t.estimateFloorTv=function(e){var t=this.segmentIndexByTv(e),n=this.segmentStartTv[t],i=stjs.trunc(this.averageFrameDuration(t));return n+stjs.trunc((e-n)/i)*i},t.floorTv=function(e){var t=this.segmentIndexByTv(e);if(this.segmentCached(t)){var n=this.getSegmentPackets(t),i=Utils.binarySearchFloor(n,function(t){return PacketCache.longCompare(t.pts,e)});return n[i].pts}return this.estimateFloorTv(e)},t.getSegmentPackets=function(e){return this.knownPkts.slice(this.segmentStartFrames[e],this.segmentStartFrames[e+1])},t.getFrameCount=function(e){return this.segmentStartFrames[this.segmentStartFrames.length-1]},t.getTotalDuration=function(){return this.segmentStartTv[this.segmentStartTv.length-1]},t.getAverageFrameDuration=function(){var e=this.getTotalDuration(),t=this.getFrameCount(e);return e/t}},{knownPkts:{name:"Array",arguments:["MovDasher.TimePacket"]},framesByTv:{name:"Map",arguments:[null,null]},segmentStartFrames:{name:"Array",arguments:[null]},segmentStartTv:{name:"Array",arguments:[null]},log:"Log"},{});var PlayerAudioTrack=function(e,t){this.proxyId=e,this.log=t,this.channelMuted=[],this.channelMuteRx=new Rx.ReplaySubject(1)};PlayerAudioTrack=stjs.extend(PlayerAudioTrack,null,[],function(e,t){t.dashStream=null,t.channelCount=0,t.channelLabels=null,t.channelMuted=null,t.filename=null,t.proxyId=null,t.log=null,t.sampleRate=0,t.serverUrl=null,t.totalSamples=0,t.waveformPreviews=null,t.channelMuteRx=null,t.channelOffset=0,t.offset=0,t.movieId=null,t.targetSampleRate=0,e.DEFAULT_LABELS=["Stereo-Left","Stereo-Right","Stereo-Left","Stereo-Right","Left","Right","Center","LFE","Left Surround","Right Surround","Mono","MOS"],t.id=function(){return this.proxyId},e.fromChannelLabels=function(e,t,n,i){var r=new PlayerAudioTrack(e,i);return r.filename=t,r.channelCount=n.length,r.channelLabels=n.slice(0),r.channelMuted=new Array(r.channelCount),r},e.fromDashStream=function(e,t,n){var i=new PlayerAudioTrack(e,n);return i.update(t),i},t.setChannelMuted=function(e,t){this.channelMuted[e]=t,this.channelMuteRx.onNext(new ChannelMute(t,e))},t.setChannelsMuted=function(e){this.log.debug("setChannelsMuted",e,this.proxyId);for(var t=0;t<this.channelMuted.length;t++)this.setChannelMuted(t,e)},t.getChannelMuted=function(e){return this.channelMuted[e]},t.getChannels=function(){for(var e=[],t=0;t<this.channelCount;t++){var n=new PlayerAudioChannel;n.label=this.channelLabels[t],n.muted=this.channelMuted[t],n.waveformPngUrl=this.serverUrl+"/"+this.proxyId+"/tw"+Utils.zeroPad2(t)+".png",e.push(n)}return e},t.update=function(e){this.dashStream=e;var t=null==e?null:e.audioInfo;this.log.debug("update audio stream",e),null!=t&&(this.totalSamples=t.totalSamples,this.sampleRate=t.sampleRate,this.waveformPreviews=t.waveformPreviews||new Array,this.channelCount=t.channelCount,this.channelMuted=new Array(t.channelCount),this.dashStream.channelMuted=this.channelMuted,this.channelLabels=t.channelLabels||PlayerAudioTrack.DEFAULT_LABELS.slice(0,this.channelCount)),null!=e&&(this.serverUrl=e.serverUrl)},t.initWithChannelNames=function(e){this.channelCount=e.length,this.channelLabels=e.slice(0),this.channelMuted=new Array(this.channelCount)},e.fromAudioInfo=function(e,t,n,i){var r=new PlayerAudioTrack(e,i);return r},t.isMuted=function(){return this.channelMuted.every(function(e,t,n){return e})}},{dashStream:"SegmentedAudioStream",channelLabels:{name:"Array",arguments:[null]},channelMuted:{name:"Array",arguments:[null]},log:"Log",waveformPreviews:{name:"Array",arguments:[null]},channelMuteRx:{name:"Rx.ReplaySubject",arguments:["ChannelMute"]},DEFAULT_LABELS:{name:"Array",arguments:[null]}},{});var VGView=function(e,t,n){CloseableView.call(this),this.container=e,this.parent=t,this.el=window.document.createElement("div"),Utils.addMethod(this.el,"getView",stjs.bind(this,function(){return this})),this.parent.addChild(this),Utils.isNotBlank(n)&&(this.el.className=n)};VGView=stjs.extend(VGView,CloseableView,[],function(e,t){t.el=null,t.container=null,t.parent=null,t.render=function(e){var t=window.document.createComment(Utils.constructorName(this));this.el.innerHTML=e,this.container.appendChild(t),this.container.appendChild(this.el)},t.toggleActive=function(e){var t=!1;return null!=e&&(t=e.classList.toggle("active")),t},e.findIndex=function(e,t){for(var n=0;n<e.length;n++)if(e[n].isEqualNode(t))return n;return-1},e.offsetLeft=function(e){return e.getBoundingClientRect().left},e.offsetX=function(e,t){return e-VGView.offsetLeft(t)},e.offsetTop=function(e){return e.getBoundingClientRect().top},e.offsetY=function(e,t){return e-VGView.offsetTop(t)},e.toggleCollectionClass=function(e,t){for(var n=e.length-1;n>=0;n--)e[n].classList.toggle(t)},e.toggleListClass=function(e,t){for(var n=e.length-1;n>=0;n--)e[n].classList.toggle(t)},e.removeAll=function(e){Utils.forEachElement(e,function(e){e.outerHTML=""})},t.addHandlers=function(e){Utils.forEach(e,stjs.bind(this,function(e,t){var n=t.split(" "),i=n[0],r=this.el.querySelector(n[1]),s=Boolean(n[2]);null!=r&&null!=i&&null!=e&&r.addEventListener(i,e,s)}))}},{el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var RetryWithDelay=function(){};RetryWithDelay=stjs.extend(RetryWithDelay,null,[],function(e,t){e.create=function(e,t){var n=new MutableInt(0);return function(i){return i.flatMap(function(i){return++n.value<e?Rx.Observable.timer(t):Rx.Observable["throw"](i)})}}},{},{});var DashifiedMp4SegmentedVideoStream=function(e,t,n,i,r){SegmentedStream.call(this),this.desc=i,this.moovbuf=e,this.segments=t,this.dataSrc=n,this.sampleDuration=r,this.timecode=i.timecode,this.timescale=i.timescale,this.mimeType=this.getDashDescriptor().mimeType,this.codecs=this.getDashDescriptor().codecs};DashifiedMp4SegmentedVideoStream=stjs.extend(DashifiedMp4SegmentedVideoStream,SegmentedStream,[],function(e,t){t.desc=null,t.segments=null,t.moovbuf=null,t.dataSrc=null,t.sampleDuration=0,t.timecode=null,t.timescale=0,t.getFrameCount=function(){return stjs.trunc(stjs.trunc(this.desc.duration/this.sampleDuration))},t.getDashDescriptor=function(){return this.desc},t.getDashInit=function(e,t){e(this.moovbuf)},t.loadSegment=function(e,t,n){var i=this.segments[e],r=new Int8Array(i.header.byteLength+DashStreamUtils.segmentSize(i));r.set(new Int8Array(i.header),0);var s=new DashSegmentDataInterval;s.dataFrom=i.dataIntervals[0].dataFrom,s.dataTo=i.dataIntervals[i.dataIntervals.length-1].dataTo;var o=this.fetchSingle(s).doOnCompleted(function(){return t(r.buffer)}).subscribe(function(e){for(var t=stjs.trunc(i.header.byteLength),n=0;n<i.dataIntervals.length;n++){var o=i.dataIntervals[n],a=e.slice(stjs.trunc(o.dataFrom-s.dataFrom),stjs.trunc(o.dataTo-s.dataFrom));r.set(a,t),t+=o.dataTo-o.dataFrom}},function(e){return n(e)});return stjs.bind(o,"dispose")},t.fetchSingle=function(e){return Rx.Observable.create(stjs.bind(this,function(t){return this.dataSrc.fetch(e.dataFrom,e.dataTo,function(e){t.onNext(new Int8Array(e)),t.onCompleted()},stjs.bind(t,"onError"))}))}},{desc:"DashDescriptor",segments:{name:"Array",arguments:["DashSegment"]},moovbuf:"ArrayBuffer",dataSrc:"DataSrc",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var RxUtil=function(){};RxUtil=stjs.extend(RxUtil,null,[],function(e,t){e.split=function(e,t){var n=e.scan(function(e,n){return 0!=e.length&&t(e,n)&&(e=new Array),e.push(n),e},new Array),i=n.bufferWithCount(2,1).flatMap(function(e){return 1==e.length||e[0]!=e[1]?Rx.Observable.just(e[0]):Rx.Observable.empty()});return i},e.doOnFirst=function(e,t){var n=new MutableBoolean((!0));return e.doOnNext(function(e){n.value&&(n.value=!1,t(e))})},e.sequential=function(e,t,n){var i=new MutableInt(0),r=new PriorityQueue(function(e,n){return t(e)-t(n)}),s=e.flatMap(function(e){var s=e,o=new Array;do{var a=t(s);if(a!=n[i.value]){r.add(s);break}i.value++,o.push(s)}while(null!=(s=r.poll()));return Rx.Observable.from(o)});return s},e.takeWhileWithFinalValue=function(e,t){return Rx.Observable.create(function(n){return e.subscribe(function(e){n.onNext(e),t(e)||n.onCompleted()},function(e){n.onError(e)},function(){n.onCompleted()})})},e.firstOutIgnoreNext=function(e){return Rx.Observable.create(function(t){var n=new MutableBoolean((!1));return e.subscribe(function(e){n.value||(n.value=!0,t.onNext(e))},function(e){t.onError(e)},function(){t.onCompleted()})})}},{},{});var Mp4Loader=function(e,t,n){this.dataSrc=e,this.onDone=t,this.onError=n};Mp4Loader=stjs.extend(Mp4Loader,null,[],function(e,t){t.moovParsed=!1,t.dataSrc=null,t.onDone=null,t.onError=null,t.inputMp4Box=null,t.load=function(){this.inputMp4Box=new MP4Box((!1)),this.inputMp4Box.onReady=stjs.bind(this,function(){this.moovParsed=!0,this.inputMp4Box.flush(),this.onDone(this.inputMp4Box)}),this.loadChunk(0,1e4)},t.loadChunk=function(e,t){this.dataSrc.fetch(e,t,stjs.bind(this,function(t){var n=t;n.fileStart=e,n.fileStart!=e&&(n=n.slice(0),n.fileStart=e);var i=this.inputMp4Box.appendBuffer(n);this.moovParsed||(i!=e?this.loadChunk(i,i+1048576):this.onError("mp4 parser went into a deadlock"))}),this.onError)},e.loadMp4=function(e,t,n){new Mp4Loader(e,t,n).load()},e.parseMoov=function(e){var t=new MP4Box((!1)),n=new MutableBoolean((!1));t.onReady=function(){n.value=!0,t.flush()};var i=e;return i.fileStart=0,t.appendBuffer(i),n.value?t:null},e.parseMoof=function(e){var t=new MP4Box((!1)),n=e;return n.fileStart=0,t.appendBuffer(n),t}},{dataSrc:"DataSrc",onDone:{name:"Callback1",arguments:["MP4Box"]},onError:{name:"Callback1",arguments:["Object"]},inputMp4Box:"MP4Box"},{});var HotkeyManager=function(e){ObjectEvents.call(this),this.log=e,this._keyHistory="",this._keyUpHistory="",this._curShortcut=[],this.shortcuts={},this._groups={},this._descriptions={},this._summary={},this._allowInputs={},this._lastIsTriggered=!1,this.disable=!1,this.initKeyDown=stjs.bind(this,function(e){return this._keyDown(e)}),this.initKeyUp=stjs.bind(this,function(e){return this._keyUp(e)}),this.onFullScreenChange=stjs.bind(this,function(e){return this._curShortcut=[]})};HotkeyManager=stjs.extend(HotkeyManager,ObjectEvents,[],function(e,t){e.KEYS={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,"*":106,"+":107,"-":189,";":186,"=":187,",":188,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,'"':222,space:32,esc:27,"?":"16+191",del:46},e.HOTKEYS_OKAY="hotkeysenabled",t.log=null,t.initKeyUp=null,t.initKeyDown=null,t.onFullScreenChange=null,t._summary=null,t._allowInputs=null,t._lastIsTriggered=!1,t._descriptions=null,t._groups=null,t.shortcuts=null,t._curShortcut=null,t._keyUpHistory=null,t._keyHistory=null,t._lastEscTime=0,t.disable=!1,t.bindedElement=null,t.bindedDocument=null,t.bindedWindow=null,t.enableHotKeysForWindow=function(e){this.destruct(),this.bindedWindow=e,this.bindedWindow.addEventListener("keydown",this.initKeyDown),this.bindedWindow.addEventListener("keyup",this.initKeyUp),this.bindedWindow.document.body.addEventListener("webkitfullscreenchange",this.onFullScreenChange)},t.enableHotKeysForDocument=function(e){this.destruct(),this.bindedDocument=e,this.bindedDocument.addEventListener("keydown",this.initKeyDown),this.bindedDocument.addEventListener("keyup",this.initKeyUp),this.bindedDocument.body.addEventListener("webkitfullscreenchange",this.onFullScreenChange)},t.enableHotKeysForElement=function(e){this.destruct(),this.bindedElement=e,this.bindedElement.addEventListener("keydown",this.initKeyDown),this.bindedElement.addEventListener("keyup",this.initKeyUp),this.bindedElement.addEventListener("webkitfullscreenchange",this.onFullScreenChange)},t.setDisable=function(e){this.disable=e},e.enableHotkeysForInput=function(e){e.setAttribute(HotkeyManager.HOTKEYS_OKAY,"true")},e.isHotkeysEnabled=function(e){var t=["textarea","input"].indexOf(e.nodeName.toLowerCase())>=0||1==e.contentEditable,n=Utils.isNotBlank(e.getAttribute(HotkeyManager.HOTKEYS_OKAY));return!!n||!t},t.destruct=function(){null!=this.bindedWindow&&(this.bindedWindow.removeEventListener("keydown",this.initKeyDown),this.bindedWindow.removeEventListener("keyup",this.initKeyUp),this.bindedWindow.document.body.removeEventListener("webkitfullscreenchange",this.onFullScreenChange)),null!=this.bindedDocument&&(this.bindedDocument.removeEventListener("keydown",this.initKeyDown),this.bindedDocument.removeEventListener("keyup",this.initKeyUp),this.bindedDocument.body.removeEventListener("webkitfullscreenchange",this.onFullScreenChange)),null!=this.bindedElement&&(this.bindedElement.removeEventListener("keydown",this.initKeyDown),this.bindedElement.removeEventListener("keyup",this.initKeyUp),this.bindedElement.document.body.removeEventListener("webkitfullscreenchange",this.onFullScreenChange))},t._fireShortcut=function(e,t){var n=(e.keyCode,t?this._keyHistory:this._keyUpHistory);for(var i in this.shortcuts){var r=Math.max(0,n.length-i.length-1),s=n.length;if(n.substring(r,s).equals(" "+i))for(var o=this.shortcuts[i],a=0;a<o.length;a++){var l=o[a],u=l.func;t&&l.options.onKeyUp||!t&&!l.options.onKeyUp||null==this._allowInputs[u.toString()]&&this._lastIsTriggered||u.apply(void 0,[e,this._groups[i],this._descriptions[i]])}}},e.notIn=function(e,t){return null==t[e]},t._keyDown=function(e){if(!this.disable&&HotkeyManager.isHotkeysEnabled(e.target)){var t=e.keyCode;if(this._lastIsTriggered!=HotkeyManager.isHotkeysEnabled(e.target)&&(this._keyHistory=""),this._lastIsTriggered=HotkeyManager.isHotkeysEnabled(e.target),27==t){if(0!=this._lastEscTime&&Utils.currentTimeMillis()-this._lastEscTime<200)return;this._lastEscTime=Utils.currentTimeMillis()}if(91==t||e.metaKey)return void(this._curShortcut=[]);if(!e.ctrlKey&&this._curShortcut.indexOf(HotkeyManager.getKeyCode("ctrl"))>=0&&this._curShortcut.splice(this._curShortcut.indexOf(HotkeyManager.getKeyCode("ctrl")),1),!e.shiftKey&&this._curShortcut.indexOf(HotkeyManager.getKeyCode("shift"))>=0&&this._curShortcut.splice(this._curShortcut.indexOf(HotkeyManager.getKeyCode("shift")),1),20==t)return;this._curShortcut.indexOf(t)<0&&this._curShortcut.push(t),this._keyHistory+=" "+this._curShortcut.join("+"),this._fireShortcut(e,!0)}},t._keyUp=function(e){if(!this.disable){var t=e.keyCode;if(91==t||e.metaKey)return;27==t&&(this._lastEscTime=0),this._curShortcut.splice(this._curShortcut.indexOf(t),1),this._keyUpHistory+=" "+t,this._fireShortcut(e,!1)}},t.addShortcut=function(e,t,n){var i=null;n.ignoreSummary||(n.group=Utils.defaultString(n.group,""),n.description=Utils.defaultString(n.description,""),HotkeyManager.notIn(n.group,this._summary)&&(this._summary[n.group]={}),i=Array.isArray(e)?e.constructor.join(", "):e,this._summary[n.group][i]=n.description);var r=HotkeyManager._parseKeyChain(e);this._groups[r]=n.group,this._descriptions[r]=n.description,this._allowInputs[t.toString()]=n.allowInputs,this.shortcuts[r]=[HotkeyManager.shortCutObj(t,n)],n.ignoreSummary||this.fireEvent("added",{shortcut:i,description:this._descriptions[r],groups:this._groups[r]})},e.ShortCut=function(){},e.ShortCut=stjs.extend(e.ShortCut,null,[],function(e,t){t.func=null,t.options=null},{func:{name:"Callback1",arguments:["DOMEvent"]},options:"KeyOptions"},{}),e.shortCutObj=function(e,t){var n=new HotkeyManager.ShortCut;return n.func=e,n.options=t,n},e._parseKeyChain=function(e){var t=e.split(" "),n=[];return t.forEach(function(e){for(var t=e.split("-"),i=[],r=0;r<t.length;r++){var s=t[r].toLowerCase();if(s.equals("")){if(!(r>0&&t[r-1].equals("")))continue;s="-"}i.push(HotkeyManager.getKeyCode(s))}n.push(i.join("+"))}),n.join(" ")},e.getKeyCode=function(e){return HotkeyManager.KEYS[e]}},{KEYS:{name:"Map",arguments:[null,null]},log:"Log",initKeyUp:{name:"Callback1",arguments:["DOMEvent"]},initKeyDown:{name:"Callback1",arguments:["DOMEvent"]},onFullScreenChange:{name:"Callback1",arguments:["DOMEvent"]},_summary:{name:"Map",arguments:[null,{name:"Map",arguments:[null,"Object"]}]},_allowInputs:{name:"Map",arguments:[null,"Object"]},_descriptions:{name:"Map",arguments:[null,"Object"]},_groups:{name:"Map",arguments:[null,"Object"]},shortcuts:{name:"Map",arguments:[null,{name:"Array",arguments:["HotkeyManager.ShortCut"]}]},_curShortcut:{name:"Array",arguments:["Object"]},bindedElement:"Element",bindedDocument:"Document",bindedWindow:"Window",events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{}),function(){for(var e=0;e<10;e++)HotkeyManager.KEYS["num-"+e]=e+95,HotkeyManager.KEYS[""+e]=e+48;for(var e=1;e<25;e++)HotkeyManager.KEYS["f"+e]=e+111;for(var e=65;e<91;e++){var t=String.fromCharCode(e).toLowerCase();HotkeyManager.KEYS[t]=e}}();var EbuSubs=function(){};EbuSubs=stjs.extend(EbuSubs,null,[],function(e,t){e.HEADER_SIZE=1024,e.TTI_SIZE=128,e.TEXT_FIELD_CRLF=138,e.TEXT_FIELD_TERMINATOR=143,e.MODE_SYMBOLS_RANGE_FROM=128,e.MODE_SYMBOLS_RANGE_TO=133,e.fromEbuSubs=function(e,t){var n=function(e,n,i){var r=new SubtitleEntry,s=e.getTimecodeIn(),o=e.getTimecodeOut(),a=t.getFrameByTimecode(s),l=t.getFrameByTimecode(o);return r.startMsec=stjs.trunc(1e3*t.getSecByFrame(a)),r.endMsec=stjs.trunc(1e3*t.getSecByFrame(l)),r.startTv=t.getTvByFrame(a),r.endTv=t.getTvByFrame(l),r.notes=e.text,r.timeCodeIn=s,r.timeCodeOut=o,r},i=e.map(n),r=new Subtitles;return r.rows=i,r},e.parse=function(e,t,n){var i=EbuSubs.parseFile(e,n),r=EbuSubs.fromEbuSubs(i,t);return r},e.probe=function(e,t){var n=EbuSubs.parseFile(e,t);if(null==n)return-1;for(var i=0,r=0;r<n.length;r++){var s=n[r],o=3600*s.timeCodeInHours+60*s.timeCodeInMinutes+s.timeCodeInSeconds,a=3600*s.timeCodeOutHours+60*s.timeCodeOutMinutes+s.timeCodeOutSeconds;a>o&&i++,a<o&&i--}return i},e.parseFile=function(e,t){var n=new DataView(e);if(n.byteLength>EbuSubs.HEADER_SIZE){var i=EbuSubs.parseHeader(n);if(EbuSubs.isHeaderValid(i)){var r=EbuSubs.parseTTI(n,i,t);return r}}return null},e.VALID_CODEPAGES_SORTED=[437,850,860,863,865],e.isHeaderValid=function(e){var t;try{t=Integer.parseInt(e.codePageNumber)}catch(n){return!1}return Utils.binarySearch0(EbuSubs.VALID_CODEPAGES_SORTED,t)!=-1},e.parseHeader=function(e){var t=new EbuSubs.EbuHeader;return t.codePageNumber=Platform.ascii(e,0,3),t.diskFormatCode=Platform.ascii(e,3,8),t.displayStandardCode=Platform.ascii(e,11,1),t.characterCodeTableNumber=Platform.ascii(e,12,2),t.languageCode=Platform.ascii(e,14,2),t.originalProgrammeTitle=Platform.ascii(e,16,32),t.originalEpisodeTitle=Platform.ascii(e,48,32),t.translatedProgrammeTitle=Platform.ascii(e,80,32),t.translatedEpisodeTitle=Platform.ascii(e,112,32),t.translatorsName=Platform.ascii(e,144,32),t.translatorsContactDetails=Platform.ascii(e,176,32),t.subtitleListReferenceCode=Platform.ascii(e,208,16),t.creationDate=Platform.ascii(e,224,6),t.revisionDate=Platform.ascii(e,230,6),t.revisionNumber=Platform.ascii(e,236,2),t.totalNumberOfTextAndTimingInformationBlocks=Platform.ascii(e,238,5),t.totalNumberOfSubtitles=Platform.ascii(e,243,5),t.totalNumberOfSubtitleGroups=Platform.ascii(e,248,3),t.maximumNumberOfDisplayableCharactersInAnyTextRow=Platform.ascii(e,251,2),t.maximumNumberOfDisplayableRows=Platform.ascii(e,253,2),t.timeCodeStatus=Platform.ascii(e,255,1),t.timeCodeStartOfProgramme=Platform.ascii(e,256,8),t},e.parseTTI=function(e,t,n){var i=new Array,r=EbuSubs.HEADER_SIZE;t.diskFormatCode.startsWith("STL24.01")||t.diskFormatCode.startsWith("STL25.01")||t.diskFormatCode.startsWith("STL30.01")||n.warn("Unknown disk format code: "+t.diskFormatCode+", was set to defult value: 24");for(var s="00".equals(t.characterCodeTableNumber);r+EbuSubs.TTI_SIZE<e.byteLength;){var o=new EbuSubs.EbuTextTimeInfo;o.offset=r,o.subtitleGroupNumber=e.getUint8(r),o.subtitleNumber=256*e.getUint8(r+2)+e.getUint8(r+1),o.extensionBlockNumber=e.getUint8(r+3),o.cumulativeStatus=e.getUint8(r+4),o.timeCodeInHours=e.getUint8(r+5+0),o.timeCodeInMinutes=e.getUint8(r+5+1),o.timeCodeInSeconds=e.getUint8(r+5+2),o.timeCodeInFrames=e.getUint8(r+5+3),o.timeCodeOutHours=e.getUint8(r+9+0),o.timeCodeOutMinutes=e.getUint8(r+9+1),o.timeCodeOutSeconds=e.getUint8(r+9+2),o.timeCodeOutFrames=e.getUint8(r+9+3),o.verticalPosition=e.getUint8(r+13),o.justificationCode=e.getUint8(r+14),o.commentFlag=e.getUint8(r+15);for(var a="",l=16;l<EbuSubs.TTI_SIZE;l++){var u=e.getUint8(r+l);if(u==EbuSubs.TEXT_FIELD_TERMINATOR)break;if(!EbuSubs.isTextModeChange(u)&&!EbuSubs.isColorSymbol(u))if(u==EbuSubs.TEXT_FIELD_CRLF)a+="\n";else if(s&&EbuSubs.isCombining(u)){if(l<EbuSubs.TTI_SIZE-1){var c=e.getUint8(r+l+1);if(EbuSubs.isCharacter(255&c)){var d=EbuSubs.combineChars(u,255&c);a+=d,l++}}}else if(EbuSubs.isCharacter(u)){var d=Platform.fromCharCode(u);a+=d}}o.text=a,i.push(o),r+=EbuSubs.TTI_SIZE}return i},e.CombinedChars=function(e,t,n){this.prefix=e,this.fromChars=n,this.toChars=t},e.CombinedChars=stjs.extend(e.CombinedChars,null,[],function(e,t){t.prefix=0,t.fromChars=null,t.toChars=null},{},{}),e.combinedChars=new Array,e.combineChars=function(e,t){for(var n=String.fromCharCode(t),i=0;i<EbuSubs.combinedChars.length;i++){var r=EbuSubs.combinedChars[i];if(r.prefix==e){var s=r.fromChars.indexOf(n);if(s!=-1)return r.toChars.substring(s,s+1)}}return n},e.CODE_TABLE=["US-ASCII","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8"],e.isColorSymbol=function(e){return e>=0&&e<=23},e.isCharacter=function(e){return e>=32&&e<=127||e>=161},e.isCombining=function(e){return e>=193&&e<=207},e.isTextModeChange=function(e){return e>=EbuSubs.MODE_SYMBOLS_RANGE_FROM&&e<=EbuSubs.MODE_SYMBOLS_RANGE_TO},e.EbuHeader=function(){},e.EbuHeader=stjs.extend(e.EbuHeader,null,[],function(e,t){t.codePageNumber=null,t.diskFormatCode=null,t.displayStandardCode=null,t.characterCodeTableNumber=null,t.languageCode=null,t.originalProgrammeTitle=null,t.originalEpisodeTitle=null,t.translatedProgrammeTitle=null,t.translatedEpisodeTitle=null,t.translatorsName=null,t.translatorsContactDetails=null,t.subtitleListReferenceCode=null,t.creationDate=null,t.revisionDate=null,t.revisionNumber=null,t.totalNumberOfTextAndTimingInformationBlocks=null,t.totalNumberOfSubtitles=null,t.totalNumberOfSubtitleGroups=null,t.maximumNumberOfDisplayableCharactersInAnyTextRow=null,t.maximumNumberOfDisplayableRows=null,t.timeCodeStatus=null,t.timeCodeStartOfProgramme=null,t.toString=function(){return Utils.jsonToString(this)}},{},{}),e.EbuTextTimeInfo=function(){},e.EbuTextTimeInfo=stjs.extend(e.EbuTextTimeInfo,null,[],function(e,t){t.offset=0,t.subtitleGroupNumber=0,t.subtitleNumber=0,t.extensionBlockNumber=0,t.cumulativeStatus=0,t.timeCodeInHours=0,t.timeCodeInMinutes=0,t.timeCodeInSeconds=0,t.timeCodeInFrames=0,t.timeCodeOutHours=0,t.timeCodeOutMinutes=0,t.timeCodeOutSeconds=0,t.timeCodeOutFrames=0,t.verticalPosition=0,t.justificationCode=0,t.commentFlag=0,t.text=null,t.getTimecodeIn=function(){return Utils.hmsf(this.timeCodeInHours,this.timeCodeInMinutes,this.timeCodeInSeconds,this.timeCodeInFrames)},t.getTimecodeOut=function(){return Utils.hmsf(this.timeCodeOutHours,this.timeCodeOutMinutes,this.timeCodeOutSeconds,this.timeCodeOutFrames)}},{},{})},{VALID_CODEPAGES_SORTED:{name:"Array",arguments:[null]},combinedChars:{name:"Array",arguments:["EbuSubs.CombinedChars"]},CODE_TABLE:{name:"Array",arguments:[null]}},{}),function(){EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(193,"","AEIOUaeiou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(194,"","ACEILNORSUYZacegilnorsuyz")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(195,"","ACEGHIJOSUWYaceghijosuwy")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(196,"","AINOUainou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(197,"","AEIOUaeiou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(198,"","AGUagu")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(199,"","CEGIZcegiz")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(200,"","AEIOUYaeiouy")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(202,"","AUau")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(203,"","CGKLNRSTcklnrst")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(205,"","OUou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(206,"","AEIUaeiu")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(207,"","CDELNRSTZcdelnrstz"));
}();var Cavena890=function(){};Cavena890=stjs.extend(Cavena890,null,[],function(e,t){e.LanguageIdDanish=7,e.LanguageIdEnglish=9,e.LanguageIdRussian=86,e.LanguageIdArabic=128,e.LanguageIdHebrew=143,e.LanguageIdChineseTraditional=144,e.LanguageIdChineseSimplified=145,e.hebrew=null,e.russian=null,e.noencoding=null,e.encodings=[],e.textLength=51,e.LANGID1_OFFSET=146,e.LANGID2_OFFSET=147,e.FONTNAME1_OFFSET=187,e.FONTNAME2_OFFSET=246,e.FONTNAME_SIZE=6,e.TEXTSTART_OFFSET=455,e.probe=function(e){if(e.byteLength<Cavena890.TEXTSTART_OFFSET)return-1;var t=new DataView(e),n=t.getUint8(Cavena890.LANGID1_OFFSET),i=(t.getUint8(Cavena890.LANGID2_OFFSET),Cavena890.isAsciiString(t,Cavena890.FONTNAME1_OFFSET,Cavena890.FONTNAME_SIZE)),r=Cavena890.isAsciiString(t,Cavena890.FONTNAME2_OFFSET,Cavena890.FONTNAME_SIZE),s=0;if(!i||!r)return s;s=1,n==Cavena890.LanguageIdEnglish&&s++;for(var o=Cavena890.TEXTSTART_OFFSET,a=-1;o<t.byteLength-20;){var l=o-Cavena890.textLength,u=t.getUint16(l-16);a<u?s++:s--;var c=Cavena890.uint24(t,l-14),d=Cavena890.uint24(t,l-11);c<d?s++:s--,a=u,o+=128}return s},e.parse=function(e,t,n){var i=new DataView(e),r=i.getUint8(Cavena890.LANGID1_OFFSET),s=i.getUint8(Cavena890.LANGID2_OFFSET),o=Platform.ascii(i,Cavena890.FONTNAME1_OFFSET,Cavena890.FONTNAME_SIZE),a=Platform.ascii(i,Cavena890.FONTNAME2_OFFSET,Cavena890.FONTNAME_SIZE),l=s;(r==Cavena890.LanguageIdRussian||o.startsWith("KYRIL")||a.startsWith("KYRIL"))&&(l=Cavena890.LanguageIdRussian),(r==Cavena890.LanguageIdHebrew||o.startsWith("HEBNOA")||a.startsWith("HEBNOA"))&&(l=Cavena890.LanguageIdHebrew);var u=Cavena890.encodings[l];null==u&&(r!=Cavena890.LanguageIdEnglish&&n.warn("unknown encoding "+r+"/"+s+" "+o+"/"+a),u=Cavena890.noencoding);var c=new Subtitles;c.rows=[];for(var d=Cavena890.TEXTSTART_OFFSET;d<i.byteLength-20;){var p=d-Cavena890.textLength,h=(i.getUint16(p-16),Cavena890.uint24(i,p-14)),f=Cavena890.uint24(i,p-11),m=new DataView(e,p,Cavena890.textLength),g=new DataView(e,p+Cavena890.textLength+6,Cavena890.textLength),v=Cavena890.makeString(m,u),b=Cavena890.makeString(g,u),y=new SubtitleEntry;y.timeCodeIn=t.getTapeByFrame(h),y.timeCodeOut=t.getTapeByFrame(f),y.startTv=t.getTvByFrame(h),y.endTv=t.getTvByFrame(f),y.startMsec=stjs.trunc(1e3*t.getSecByFrame(h)),y.endMsec=stjs.trunc(1e3*t.getSecByFrame(f)),y.notes=[v,b].join(" "),c.rows.push(y),d+=128}return c},e.makeString=function(e,t){for(var n="",i=0;i<e.byteLength;i++){var r=e.getInt8(i);if(127==r)break;var s=t[r];if(null==s){var o=String.fromCharCode(r);n+=o}else n+=s}return n},e.uint24=function(e,t){return e.getUint16(t)<<8|e.getUint8(t+2)},e.isAsciiString=function(e,t,n){for(var i=0;i<n;i++){var r=e.getUint8(t+i);if(r<32||r>127)return!1}return!0}},{hebrew:{name:"Array",arguments:[null]},russian:{name:"Array",arguments:[null]},noencoding:{name:"Array",arguments:[null]},encodings:{name:"Array",arguments:[{name:"Array",arguments:[null]}]}},{}),function(){Cavena890.hebrew=new Array(256),Cavena890.russian=new Array(256),Cavena890.noencoding=new Array(256),Cavena890.encodings[Cavena890.LanguageIdRussian]=Cavena890.russian,Cavena890.encodings[Cavena890.LanguageIdHebrew]=Cavena890.hebrew,Cavena890.hebrew[64]="",Cavena890.hebrew[65]="",Cavena890.hebrew[66]="",Cavena890.hebrew[67]="",Cavena890.hebrew[68]="",Cavena890.hebrew[69]="",Cavena890.hebrew[70]="",Cavena890.hebrew[71]="",Cavena890.hebrew[73]="",Cavena890.hebrew[76]="",Cavena890.hebrew[77]="",Cavena890.hebrew[78]="",Cavena890.hebrew[79]="",Cavena890.hebrew[80]="",Cavena890.hebrew[81]="",Cavena890.hebrew[82]="",Cavena890.hebrew[84]="",Cavena890.hebrew[86]="",Cavena890.hebrew[87]="",Cavena890.hebrew[88]="",Cavena890.hebrew[89]="",Cavena890.hebrew[90]="",Cavena890.hebrew[75]="",Cavena890.hebrew[74]="",Cavena890.hebrew[72]="",Cavena890.hebrew[83]="",Cavena890.hebrew[85]="",Cavena890.russian[66]="",Cavena890.russian[69]="",Cavena890.russian[90]="",Cavena890.russian[86]="",Cavena890.russian[73]="",Cavena890.russian[78]="",Cavena890.russian[88]="",Cavena890.russian[81]="",Cavena890.russian[86]="",Cavena890.russian[83]="",Cavena890.russian[114]="",Cavena890.russian[105]="",Cavena890.russian[113]="",Cavena890.russian[110]="",Cavena890.russian[116]="",Cavena890.russian[92]="",Cavena890.russian[119]="",Cavena890.russian[70]="",Cavena890.russian[94]="",Cavena890.russian[68]="",Cavena890.russian[98]="",Cavena890.russian[115]="",Cavena890.russian[117]="",Cavena890.russian[100]="",Cavena890.russian[96]="",Cavena890.russian[106]="",Cavena890.russian[108]="",Cavena890.russian[71]="",Cavena890.russian[120]="",Cavena890.russian[122]="",Cavena890.russian[126]="",Cavena890.russian[109]="",Cavena890.russian[103]="",Cavena890.russian[121]="",Cavena890.russian[112]="",Cavena890.russian[118]="",Cavena890.russian[85]="",Cavena890.russian[125]="",Cavena890.russian[102]="",Cavena890.russian[124]="",Cavena890.russian[123]="",Cavena890.russian[64]="",Cavena890.russian[65]="",Cavena890.russian[72]="",Cavena890.russian[74]="",Cavena890.russian[75]="",Cavena890.russian[76]="",Cavena890.russian[77]="",Cavena890.russian[79]="",Cavena890.russian[80]="",Cavena890.russian[82]="",Cavena890.russian[84]="",Cavena890.russian[89]="",Cavena890.russian[97]="",Cavena890.russian[99]="",Cavena890.russian[101]="",Cavena890.russian[104]="",Cavena890.russian[107]="",Cavena890.russian[111]=""}();var Fairplay=function(e,t,n,i){this.video=e,this.options=t,this.log=n,this.errorRx=i,this.autoDisposables=new Rx.CompositeDisposable,this.autoDisposable(Rx.Observable.combineLatest(this.fetchCertificate(),Rx.Observable.fromEvent(e,"webkitneedkey"),stjs.bind(this,function(e,t){return this.certificate=e,this.onVideoWebkitNeedKey(t),!0})).subscribe())};Fairplay=stjs.extend(Fairplay,null,[],function(e,t){t.video=null,t.options=null,t.log=null,t.errorRx=null,t.certificate=null,t.autoDisposables=null,t.onVideoWebkitNeedKey=function(e){this.log.debug("onVideoWebkitNeedKey()");var t=e,n="com.apple.fps.1_0",i=this.extractContentId(Utils.fromCharCodes(new Uint16Array(t.initData.buffer))),r=Utils.stringToArray(i).buffer,s=this.concatInitDataIdAndCertificate(t.initData.buffer,r,this.certificate),o=this.createKeySession(n,s);null!=o&&(o.contentId=i,this.autoDisposable(Rx.Observable.fromEvent(o,"webkitkeyadded").subscribe(stjs.bind(this,"onKeySessionWebkitKeyAdded"))),this.autoDisposable(Rx.Observable.fromEvent(o,"webkitkeyerror").subscribe(stjs.bind(this,"onKeySessionWebkitKeyError"))),this.autoDisposable(Rx.Observable.fromEvent(o,"webkitkeymessage").subscribe(stjs.bind(this,"onKeySessionWebkitKeyMessage"))))},t.extractContentId=function(e){var t=e.split("skd://")[1];return t.indexOf(";")==-1?t:t.split(";",2)[1]},t.onKeySessionWebkitKeyAdded=function(e){this.log.debug("onKeySessionWebkitKeyAdded()")},t.onKeySessionWebkitKeyError=function(e){this.log.debug("onKeySessionWebkitKeyError()"),this.errorRx.onNext(new PlayerError("onKeySessionWebkitKeyError",PlayerError.FATAL,e))},t.onKeySessionWebkitKeyMessage=function(e){this.log.debug("onKeySessionWebkitKeyMessage()");var t=e.message,n=e.target;this.fetchLicense(n,t)},t.concatInitDataIdAndCertificate=function(e,t,n){var i=e.byteLength+4+t.byteLength+4+n.byteLength,r=0,s=new Uint8Array(i),o=new DataView(s.buffer);return s.set(new Uint8Array(e),r),r+=e.byteLength,o.setUint32(r,t.byteLength,!0),r+=4,s.set(new Uint8Array(t),r),r+=t.byteLength,o.setUint32(r,n.byteLength,!0),r+=4,s.set(new Uint8Array(n),r),s},t.createKeySession=function(e,t){if(this.log.debug("createKeySession()"),null==this.video.webkitKeys){if(!WebKitMediaKeys.isTypeSupported(e,"video/mp4"))return this.errorRx.onNext(new PlayerError("Key System not supported "+e,PlayerError.FATAL)),null;this.video.webkitSetMediaKeys(new WebKitMediaKeys(e))}if(null==this.video.webkitKeys)return this.errorRx.onNext(new PlayerError("Could not create WebKitMediaKeys",PlayerError.FATAL)),null;var n=this.video.webkitKeys.createSession("video/mp4",t);return null==n?(this.errorRx.onNext(new PlayerError("Could not create key session",PlayerError.FATAL)),null):n},t.fetchCertificate=function(){return this.log.debug("fetchCertificate()"),new Http(this.log).requestBinary(stjs.bind(this,function(){return this.options.certUrl}),"","GET",{},!0).doOnNext(stjs.bind(this,function(e){return this.log.debug("cert len="+e.byteLength)})).doOnError(stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("error fetching certificate",PlayerError.FATAL))}))},t.fetchLicense=function(e,t){this.log.debug("fetchLicense()");var n={"Content-Type":"application/octet-stream"};new Http(this.log).requestBinary(stjs.bind(this,function(){return this.options.laUrl}),t,"POST",n,!0).subscribe(stjs.bind(this,function(t){this.log.debug("license fetched"),e.update(new Uint8Array(t))}),stjs.bind(this,function(e){this.errorRx.onNext(new PlayerError("error fetching license",PlayerError.FATAL))}))},t.autoDisposable=function(e){this.autoDisposables.add(e)},t.close=function(){this.autoDisposables.dispose(),this.autoDisposables=null}},{video:"Video",options:"PlayerOptions.DRMFairplayOptions",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},certificate:"ArrayBuffer",autoDisposables:"Rx.CompositeDisposable"},{});var DynamicDash=function(e,t,n,i){if(this.videoSegmentedStream=e,this.audioDashStream=t,this.log=n,this.errorRx=i,this.hasAudio=null!=t,this.hasVideo=null!=e,!this.hasVideo&&!this.hasAudio)throw i.onNext(new PlayerError("no audio and no video streams!",PlayerError.FATAL)),new RuntimeException("no audio and no video streams!");this.hasAudio&&(this.rawAudioStream="audio/mpeg".equals(this.audioDashStream.mimeType)),this.audioToSet=[],this.autoDisposables=new Rx.CompositeDisposable};DynamicDash=stjs.extend(DynamicDash,null,[VideoSrc],function(e,t){t.log=null,t.errorRx=null,e.SOURCEOPEN="sourceopen",e.READYSTATE_CLOSED="closed",e.READYSTATE_OPEN="open",e.READYSTATE_ENDED="ended",e.BUFFER_ERROR="error",e.BUFFER_UPDATEEND="updateend",e.ABORT_IMPOSSIBLE=function(){},t.MIN_TIME=1e-4,t.VIDEO_END_THRESHOLD=.01,t.hasAudio=!1,t.hasVideo=!1,t.rawAudioStream=!1,t.mediaSource=null,t.video=null,t.videoBuffer=null,t.audioBuffer=null,t.videoQueriedQueue=null,t.videoLoadedQueue=null,t.audioQueriedQueue=null,t.audioLoadedQueue=null,t.audioDashStream=null,t.videoSegmentedStream=null,t.videoTimeupdateRx=null,t.videoSeekingRx=null,t.audioUpdateSubscription=null,t.audioToSet=null,t.audioInitInProgress=!1,t.audioInitialized=!1,t.lastAppendedVideoSegment=0,t.lastAppendedAudioSegment=0,t.lastAppendedResetterInterval=null,t.autoDisposables=null,e.VIDEO_PREBUFFER_TIME=15,e.AUDIO_PREBUFFER_TIME=15,t.reset=function(){this.video=null,this.mediaSource=null,this.videoBuffer=null,this.audioBuffer=null,this.videoQueriedQueue={},this.videoLoadedQueue={},this.audioQueriedQueue={},this.audioLoadedQueue={},clearInterval(this.lastAppendedResetterInterval),this.lastAppendedAudioSegment=-1,this.lastAppendedVideoSegment=-1},t.detach=function(){null!=this.video&&(this.autoDisposables.dispose(),this.autoDisposables=new Rx.CompositeDisposable,this.abortAllSegmentsLoading(this.videoQueriedQueue),this.abortAllSegmentsLoading(this.audioQueriedQueue),null!=this.video&&(this.video.src=""),this.reset())},t.attach=function(e){this.reset(),this.mediaSource=new MediaSource,this.autoDisposable(Rx.Observable.fromEvent(this.mediaSource,DynamicDash.SOURCEOPEN).doOnNext(stjs.bind(this,function(e){return this.initMediaSource()})).subscribe()),this.video=e,this.video.src=URL.createObjectURL(this.mediaSource)},t.canSetAudioWithoutReattach=function(e){return this.hasAudio&&this.audioDashStream.mimeType==e.mimeType},t.setAudio=function(e){if(this.log.debug("set audio"),this.audioInitInProgress&&(this.log.debug("postponed setting audio. another audio init is in progress"),this.audioToSet.push(e)),this.hasAudio=!0,this.rawAudioStream="audio/mpeg".equals(e.mimeType),null==this.mediaSource||this.mediaSource.readyState!=DynamicDash.READYSTATE_OPEN&&this.mediaSource.readyState!=DynamicDash.READYSTATE_ENDED)return void(this.audioDashStream=e);if(this.audioInitialized=!1,this.audioInitInProgress=!0,null==this.audioBuffer){var t=e.mimeType+(null==e.codecs?"":'; codecs="'+e.codecs+'"');this.audioBuffer=this.mediaSource.addSourceBuffer(t),this.audioBuffer.addEventListener(DynamicDash.BUFFER_ERROR,function(e){throw exception("audio source buffer error")}),this.audioBuffer.addEventListener("abort",stjs.bind(this,function(e){return this.log.debug("audio buffer abort",e)})),this.audioUpdateRx=Rx.Observable.fromEvent(this.audioBuffer,DynamicDash.BUFFER_UPDATEEND).filter(stjs.bind(this,function(e){return!this.audioBuffer.updating}))}null!=this.audioUpdateSubscription&&(this.audioUpdateSubscription.dispose(),this.audioUpdateSubscription=null);var n=this.clearAudioBufferRx(),i=n.flatMap(stjs.bind(this,function(t){return this.log.debug("adding new audio"),this.audioDashStream=e,this.initAudio()})).subscribe(stjs.bind(this,function(e){this.autoDisposable(this.audioDashStream.getUpdateRx().subscribe(stjs.bind(this,function(e){this.lastAppendedAudioSegment=-1,this.regularBuffersCheck()}))),this.audioUpdateSubscription=this.audioUpdateRx.subscribe(stjs.bind(this,function(e){return this.audioUpdateEnd()})),this.autoDisposable(this.audioUpdateSubscription),this.audioInitialized=!0,this.audioInitInProgress=!1;var t=this.audioToSet.shift();null!=t&&this.setAudio(t)}));this.autoDisposable(i)},t.appendAudioBuffer=function(e){var t=Rx.Observable.create(stjs.bind(this,function(t){this.audioBuffer.updating?t.onError("audio buffer updating"):(this.audioBuffer.appendBuffer(e),t.onNext(!0),t.onCompleted())}));return t.retryWhen(stjs.bind(this,function(e){return e.flatMap(stjs.bind(this,function(e){return this.audioUpdateRx.take(1)}))}))},t.trySetDuration=function(){if(null!=this.audioBuffer&&this.audioBuffer.updating||null!=this.videoBuffer&&this.videoBuffer.updating){var e=this.videoUpdateRx;null!=this.audioUpdateRx&&(e=Rx.Observable.merge(this.videoUpdateRx,this.audioUpdateRx)),this.autoDisposable(e.take(1).subscribe(stjs.bind(this,function(e){return this.trySetDuration()})))}else this.hasVideo?this.videoSegmentedStream.isDynamic()?this.mediaSource.duration=100500:this.mediaSource.duration=this.videoSegmentedStream.getDurationSec():this.audioDashStream.isDynamic()?this.mediaSource.duration=100500:this.mediaSource.duration=this.audioDashStream.getDurationSec(),this.log.debug("media source duration "+this.mediaSource.duration)},t.initAudio=function(){this.log.debug("adding audio init segment");var e=Rx.Observable.create(stjs.bind(this,function(e){this.audioDashStream.getDashInit(function(t){e.onNext(t),e.onCompleted()},stjs.bind(this,function(t){var n=new PlayerError("can not load initialization segment",PlayerError.FATAL,this.audioDashStream.url);this.errorRx.onNext(n),e.onError(n)}))})),t=e.flatMap(stjs.bind(this,function(e){return null==e?(this.log.debug("special case for no init segment mp3 stream, triggering audio update end"),this.audioBuffer.appendBuffer(new ArrayBuffer(0)),Rx.Observable.just(!0)):this.appendAudioBuffer(e)}));return t.doOnNext(stjs.bind(this,function(e){return this.log.debug("audio init done")}))},t.appendVideoInit=function(){this.log.debug("adding video init segment"),this.videoSegmentedStream.getDashInit(stjs.bind(this,function(e){null!=e&&null!=this.videoBuffer&&this.videoBuffer.appendBuffer(e)}),stjs.bind(this,function(e){this.errorRx.onNext(new PlayerError("can not load initialization segment",PlayerError.FATAL,this.videoSegmentedStream.url))}))},t.initMediaSource=function(){this.mediaSource.readyState!=DynamicDash.READYSTATE_OPEN||this.mediaSource.sourceBuffers.length>0||(this.log.debug("initializing media source"),this.hasVideo&&(this.videoBuffer=this.mediaSource.addSourceBuffer(this.videoSegmentedStream.mimeType+'; codecs="'+this.videoSegmentedStream.codecs+'"'),this.videoBuffer.addEventListener(DynamicDash.BUFFER_ERROR,function(e){throw exception("video source buffer error")}),this.autoDisposable(this.videoSegmentedStream.getUpdateRx().subscribe(stjs.bind(this,function(e){this.lastAppendedVideoSegment=-1,this.regularBuffersCheck()}))),this.videoUpdateRx=Rx.Observable.fromEvent(this.videoBuffer,DynamicDash.BUFFER_UPDATEEND),this.autoDisposable(this.videoUpdateRx.subscribe(stjs.bind(this,function(e){return this.videoUpdateEnd()})))),this.trySetDuration(),this.hasVideo&&this.appendVideoInit(),this.hasAudio&&this.setAudio(this.audioDashStream),this.videoTimeupdateRx=Rx.Observable.fromEvent(this.video,VideoElement.TIMEUPDATE),this.videoSeekingRx=Rx.Observable.fromEvent(this.video,VideoElement.SEEKING),this.autoDisposable(this.videoTimeupdateRx.subscribe(stjs.bind(this,function(e){return this.regularBuffersCheck()}))),this.autoDisposable(this.videoSeekingRx.subscribe(stjs.bind(this,function(e){return this.controlSegmentsRequests()}))),this.lastAppendedResetterInterval=setInterval(stjs.bind(this,function(){this.lastAppendedVideoSegment=-1,this.lastAppendedAudioSegment=-1}),3e4))},t.videoUpdateEnd=function(){var e=this;return this.log.debug("videoUpdateEnd"),null==e.videoBuffer?void this.log.debug("self.videoBuffer == null"):(e.processVideoLoadedQueue(),void(this.videoBufferUpdating(e)||(e.bufferedEnough(e.videoBuffer,DynamicDash.VIDEO_PREBUFFER_TIME)||e.queryVideoSegment(e.nextUnbufferedTime(e.videoBuffer)),e.mediaSource.readyState==DynamicDash.READYSTATE_ENDED||!e.bufferedEndOfStream()||this.videoBufferUpdating(e)||this.audioBufferUpdating(e)||(this.log.debug("end of stream"),e.mediaSource.endOfStream()))))},t.videoBufferUpdating=function(e){return null==e.videoBuffer&&this.log.debug("self.videoBuffer == null"),null!=e.videoBuffer&&e.videoBuffer.updating},t.audioBufferUpdating=function(e){return null!=e.audioBuffer&&e.audioBuffer.updating},t.audioUpdateEnd=function(){var e=this;return this.log.debug("audioUpdateEnd"),null==e.audioBuffer?void this.log.debug("self.audioBuffer == null"):(e.processAudioLoadedQueue(),void(this.audioBufferUpdating(e)||(e.bufferedEnough(e.audioBuffer,DynamicDash.AUDIO_PREBUFFER_TIME)||e.queryAudioSegment(e.nextUnbufferedTime(e.audioBuffer)),e.mediaSource.readyState==DynamicDash.READYSTATE_ENDED||!e.bufferedEndOfStream()||this.videoBufferUpdating(e)||this.audioBufferUpdating(e)||(this.log.debug("end of stream"),e.mediaSource.endOfStream()))))},t.regularBuffersCheck=function(){this.hasVideo&&null!=this.videoBuffer&&!this.videoBuffer.updating&&(this.bufferedEnough(this.videoBuffer,DynamicDash.VIDEO_PREBUFFER_TIME)||this.queryVideoSegment(this.nextUnbufferedTime(this.videoBuffer))),this.hasAudio&&this.audioInitialized&&null!=this.audioBuffer&&!this.audioBuffer.updating&&(this.bufferedEnough(this.audioBuffer,DynamicDash.AUDIO_PREBUFFER_TIME)||this.queryAudioSegment(this.nextUnbufferedTime(this.audioBuffer)))},t.controlSegmentsRequests=function(){this.abortUnneededSegmentsLoading(this.videoQueriedQueue,DynamicDash.VIDEO_PREBUFFER_TIME),this.abortUnneededSegmentsLoading(this.audioQueriedQueue,DynamicDash.AUDIO_PREBUFFER_TIME),this.regularBuffersCheck()},t.bufferedEndOfStream=function(){var e,t;if(this.hasVideo){if(this.videoSegmentedStream.isDynamic())return!1;if(null==this.videoBuffer)return!1;var n=this.videoBuffer.buffered;if(e=n.length>0&&n.end(n.length-1)>=this.getTimelineEnd()-this.VIDEO_END_THRESHOLD,!this.hasAudio||!this.audioInitialized)return e;var i=this.audioBuffer.buffered;return t=i.length>0&&i.end(i.length-1)>=this.getTimelineEnd()-this.MIN_TIME,e&&t}if(this.hasAudio){var i=this.audioBuffer.buffered;return t=i.length>0&&i.end(i.length-1)>=this.getTimelineEnd()-this.MIN_TIME}throw new RuntimeException("invalid state")},e.Infinity=1/0,t.videoUpdateRx=null,t.audioUpdateRx=null,t.nextUnbufferedTime=function(e){for(var t=e.buffered,n=this.video.currentTime,i=n,r=0;r<t.length;r++)if(n>=t.start(r)&&n<=t.end(r)){i=t.end(r);break}return i<this.getTimelineEnd()?i+this.MIN_TIME:DynamicDash.Infinity},t.nextBufferedTime=function(e,t){for(var n=e.buffered,i=0;i<n.length;i++)if(n.start(i)>t)return n.start(i);return DynamicDash.Infinity},t.bufferedEnough=function(e,t){var n=this.nextUnbufferedTime(e);if(Math.abs(n-this.video.currentTime)<=this.MIN_TIME&&this.video.readyState==this.video.constructor.HAVE_ENOUGH_DATA)return 0!=e.buffered.length;var i=Math.min(this.video.currentTime+t,this.getTimelineEnd()-this.MIN_TIME);return n>=i},t.queryVideoSegment=function(e){this.log.debug("querying video segment. time="+e+" nextBuf="+this.nextBufferedTime(this.videoBuffer,e));var t=this.videoSegmentedStream.getSegmentIdxByTime(e);this.log.debug("queryVideoSegment "+t+" "+this.videoSegmentedStream.url),this.lastAppendedVideoSegment!=t&&this.querySegment(this.videoSegmentedStream,t,this.videoQueriedQueue,this.videoLoadedQueue,stjs.bind(this,"processVideoLoadedQueue"))},t.queryAudioSegment=function(e){this.log.debug("querying audio segment. time="+e+" nextBuf="+this.nextBufferedTime(this.audioBuffer,e));var t=this.audioDashStream.getSegmentIdxByTime(e);this.lastAppendedAudioSegment!=t&&this.querySegment(this.audioDashStream,t,this.audioQueriedQueue,this.audioLoadedQueue,stjs.bind(this,"processAudioLoadedQueue"))},t.getTimelineEnd=function(){return this.hasAudio&&!this.hasVideo?this.audioDashStream.getDurationSec():this.hasAudio&&this.audioInitialized&&!this.audioDashStream.silenceAppended()?Math.min(this.videoSegmentedStream.getDurationSec(),this.audioDashStream.getDurationSec()):this.videoSegmentedStream.getDurationSec()},e.Key=function(){},e.Key=stjs.extend(e.Key,null,[],function(e,t){t.segmentIdx=0,t.segStartTime=0,t.segEndTime=0,t.toString=function(){return DynamicDash.keyToString(this.segmentIdx,this.segStartTime,this.segEndTime)}},{},{}),e.keyToString=function(e,t,n){return e+":"+t+":"+n},e.keyFromString=function(e){var t=e.split(":"),n=new DynamicDash.Key;return n.segmentIdx=Utils.toInt(t[0]),n.segStartTime=Utils.toDouble(t[1]),n.segEndTime=Utils.toDouble(t[2]),n},t.querySegment=function(e,t,n,i,r){var s=e.getSegmentStartTime(t),o=s+e.getSegmentDuration(t),a=DynamicDash.keyToString(t,s,o);if(null==n[a]&&null==i[a]){this.log.debug("requesting "+Utils.constructorName(e)+" seg="+t),n[a]=DynamicDash.ABORT_IMPOSSIBLE;var l=new MutableBoolean((!1)),u=e.loadSegment(t,function(e){null!=n[a]&&(l.value=!0,delete n[a],i[a]=e,r())},stjs.bind(this,function(t){delete n[a],this.errorRx.onNext(new PlayerError("can not load "+Utils.constructorName(e)+" segment "+a,PlayerError.NONFATAL))}));l.value||(n[a]=u)}},t.appendVideoSegment=function(e,t){this.videoBuffer.timestampOffset=this.videoSegmentedStream.getSegmentTimestampOffset(e),this.videoBuffer.appendBuffer(t)},t.appendM4sAudioSegment=function(e,t){this.audioBuffer.timestampOffset=this.audioDashStream.getSegmentTimestampOffset(e),this.audioBuffer.appendBuffer(t)},t.appendRawAudioSegment=function(e,t){var n=this.audioDashStream.getSegmentStartTime(e),i=this.audioDashStream.getSegmentDuration(e);this.audioBuffer.appendWindowStart=0,this.audioBuffer.appendWindowEnd=n+i,this.audioBuffer.appendWindowStart=n,this.audioBuffer.timestampOffset=n+this.audioDashStream.getSegmentTimestampOffset(e),this.audioBuffer.appendBuffer(t)},t.processVideoLoadedQueue=function(){null!=this.videoBuffer&&(this.videoBuffer.updating||this.processLoadedQueue(this.videoLoadedQueue,stjs.bind(this,function(e,t){this.lastAppendedVideoSegment=e,this.appendVideoSegment(e,t)})))},t.processAudioLoadedQueue=function(){this.audioBuffer.updating||this.processLoadedQueue(this.audioLoadedQueue,stjs.bind(this,function(e,t){this.lastAppendedAudioSegment=e,this.rawAudioStream?this.appendRawAudioSegment(e,t):this.appendM4sAudioSegment(e,t)}))},t.processLoadedQueue=function(e,t){var n=[];if(Utils.forEach(e,function(e,t){n.push(DynamicDash.keyFromString(t))}),0!=n.length){n.sort(function(e,t){return stjs.trunc(e.segStartTime-t.segStartTime)});var i=n[0],r=i.segmentIdx,s=e[i.toString()];delete e[i.toString()],t(r,s)}},t.clearAudioBufferRx=function(){var e=Rx.Observable.just(!0);return null!=this.audioBuffer&&(this.audioBuffer.updating&&(e=this.audioUpdateRx.take(1).doOnNext(stjs.bind(this,function(e){return this.log.debug("abort() cought audioupdateend")})).map(function(e){return!0})),e=e.flatMap(stjs.bind(this,function(e){return this.audioQueriedQueue={},this.audioLoadedQueue={},this.log.debug("abort++"),this.audioBuffer.updating&&this.log.debug("unexpected audio source buffer state: updating=true"),this.mediaSource.readyState!=DynamicDash.READYSTATE_CLOSED&&(this.mediaSource.readyState==DynamicDash.READYSTATE_OPEN&&this.audioBuffer.abort(),this.audioBuffer.buffered.length>0)?(this.log.debug("removing buffered audio"),this.audioBuffer.remove(0,this.audioBuffer.buffered.end(this.audioBuffer.buffered.length-1)),this.audioUpdateRx.take(1).map(function(e){return!0})):Rx.Observable.just(!0)})).doOnNext(stjs.bind(this,function(e){return this.lastAppendedAudioSegment=-1}))),e},t.clearAudioBuffer=function(){this.autoDisposable(this.clearAudioBufferRx().subscribe(stjs.bind(this,function(e){return this.audioUpdateEnd()})))},t.abortSegment=function(e,t){var n=e[t];delete e[t],n()},t.abortUnneededSegmentsLoading=function(e,t){var n=this.video.currentTime,i=n+t;Utils.forEach(e,stjs.bind(this,function(t,r){var s=r.split(":"),o=parseFloat(s[2]),a=parseFloat(s[3]);(o>=i||a<=n)&&this.abortSegment(e,r)}))},t.abortAllSegmentsLoading=function(e){Utils.forEach(e,stjs.bind(this,function(t,n){this.abortSegment(e,n)}))},t.autoDisposable=function(e){this.autoDisposables.add(e)}},{log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},ABORT_IMPOSSIBLE:"Callback0",mediaSource:"MediaSource",video:"Video",videoBuffer:"SourceBuffer",audioBuffer:"SourceBuffer",videoQueriedQueue:{name:"Map",arguments:[null,"Callback0"]},videoLoadedQueue:{name:"Map",arguments:[null,"ArrayBuffer"]},audioQueriedQueue:{name:"Map",arguments:[null,"Callback0"]},audioLoadedQueue:{name:"Map",arguments:[null,"ArrayBuffer"]},audioDashStream:"SegmentedAudioStream",videoSegmentedStream:"SegmentedStream",videoTimeupdateRx:{name:"Rx.Observable",arguments:["DOMEvent"]},videoSeekingRx:{name:"Rx.Observable",arguments:["DOMEvent"]},audioUpdateSubscription:"Rx.Disposable",audioToSet:{name:"Array",arguments:["SegmentedAudioStream"]},lastAppendedResetterInterval:"TimeoutHandler",autoDisposables:"Rx.CompositeDisposable",videoUpdateRx:{name:"Rx.Observable",arguments:["DOMEvent"]},audioUpdateRx:{name:"Rx.Observable",arguments:["DOMEvent"]}},{});var DRM=function(e,t,n,i){this.drmOptions=e,this.drmInfo=t,this.log=n,this.errorRx=i,this.keySystemRx=new Rx.ReplaySubject(1),this.http=new Http(n),this.autoDisposables=new Rx.CompositeDisposable,this.autoDisposable(Rx.Observable.from(t).map(function(e){return e.keySystem}).distinct().flatMap(stjs.bind(this,function(e){var t=this.getConfigForKeySystem(e);return Rx.Observable.fromPromise(window.navigator.requestMediaKeySystemAccess(e,[t])).flatMapObserver(function(e,t){return Rx.Observable.just(e)},function(e){return e.message.contains("Unsupported keySystem")||e.message.contains("NotSupportedError")||i.onNext(new PlayerError(e.message,PlayerError.FATAL,e)),Rx.Observable.empty()},Rx.Observable.empty)})).take(1).doOnNext(stjs.bind(this,function(e){n.info("using keysystem",e.keySystem),this.keySystemRx.onNext(e)})).subscribe())};DRM=stjs.extend(DRM,null,[],function(e,t){t.log=null,t.errorRx=null,t.drmOptions=null,t.drmInfo=null,t.autoDisposables=null,t.keySystemRx=null,t.http=null,e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",t.setHttp=function(e){this.http=e},t.initVideo=function(e,t){var n=this.keySystemRx.flatMap(stjs.bind(this,function(t){return Rx.Observable.fromPromise(t.createMediaKeys()["catch"](stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("Unable to create MediaKeys",PlayerError.FATAL,e))}))).flatMap(stjs.bind(this,function(n){return Rx.Observable.fromPromise(e.setMediaKeys(n)["catch"](stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("Unable to set MediaKeys",PlayerError.FATAL,e))}))).map(function(e){return t.keySystem})}))})),i=new Rx.ReplaySubject;this.autoDisposable(Rx.Observable.fromEvent(e,"encrypted").map(function(e){var t=e;return new DRM.InitData(t.initDataType,t.initData)}).filter(function(e){return null!=e.initData}).doOnNext(stjs.bind(this,function(e){return this.log.debug("initData from encrypted event",e)})).doOnNext(stjs.bind(i,"onNext")).subscribe()),this.autoDisposable(n.flatMap(stjs.bind(this,function(n){var r=Rx.Observable.from(t).map(stjs.bind(this,function(e){var t=this.drmInfo.filter(function(t,i,r){return t.streamId==e&&t.keySystem==n})[0];if(null==t)throw this.errorRx.onNext(new PlayerError("unknown stream/keysystem combination "+e+" "+n,PlayerError.FATAL)),new RuntimeException;return t})).filter(function(e){return null!=e.initData}).map(function(e){var t=Utils.base64ToArrayBuffer(e.initData);return new DRM.InitData("cenc",t)}).doOnNext(stjs.bind(this,function(e){return this.log.debug("initData from mpd",e)}));return Rx.Observable.merge(r,i).distinct(function(e){return e},stjs.bind("equals")).flatMap(stjs.bind(this,function(t){return this.createSession(e,n,t)}))})).subscribe())},t.createSession=function(e,t,n){var i,r=e.mediaKeys,s=r.createSession();switch(t){case DRM.WIDEVINE:i=this.drmOptions.widevine.laUrl;break;case DRM.PLAYREADY:i=this.drmOptions.playready.laUrl;break;default:return Rx.Observable["throw"]("unsupported key system "+t)}return this.autoDisposable(Rx.Observable.fromEvent(s,"message").subscribe(stjs.bind(this,function(e){var n,r=e,o={};if(t==DRM.PLAYREADY){var a=Utils.fromCharCodes(new Uint16Array(r.message)),l=(new DOMParser).parseFromString(a,"application/xml"),u=l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;n=window.atob(u);for(var c=l.getElementsByTagName("name"),d=l.getElementsByTagName("value"),p=0;p<c.length;p++)o[c[p].childNodes[0].nodeValue]=d[p].childNodes[0].nodeValue}else n=r.message;i.indexOf("axtest.net")!=-1&&(o["X-AxDRM-Message"]="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiNjllNTQwODgtZTllMC00NTMwLThjMWEtMWViNmRjZDBkMTRlIiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiNmU1YTFkMjYtMjc1Ny00N2Q3LTgwNDYtZWFhNWQxZDM0YjVhIn1dfX0.yF7PflOPv9qHnu3ZWJNZ12jgkqTabmwXbDWk_47tLNE"),this.http.requestBinary(function(){return i},n,"POST",o,!0).subscribe(stjs.bind(this,function(e){s.update(e)["catch"](stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("keySession.update() failed",PlayerError.FATAL,e))}))}),stjs.bind(this,function(e){this.errorRx.onNext(new PlayerError("failed to acquire license",PlayerError.FATAL,e))}))}))),Rx.Observable.fromPromise(s.generateRequest(n.initDataType,n.initData)["catch"](stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("cannot generate license request",PlayerError.FATAL,e))})))},t.getConfigForKeySystem=function(e){return this.drmInfo.filter(function(t,n,i){return t.keySystem==e}).reduce(function(e,t,n,i){var r=t.contentType.startsWith("video"),s=r?e.videoCapabilities:e.audioCapabilities;if(null==s&&(s=[]),!s.some(function(e,n,i){return e.contentType==t.contentType})){var o={};o.contentType=t.contentType,o.robustness="",s.push(o),r?e.videoCapabilities=s:e.audioCapabilities=s}return e},{})},t.autoDisposable=function(e){this.autoDisposables.add(e)},t.close=function(){this.autoDisposables.dispose(),this.autoDisposables=null},e.InitData=function(e,t){this.initDataType=e,this.initData=t},e.InitData=stjs.extend(e.InitData,null,[],function(e,t){t.initDataType=null,t.initData=null,t.equals=function(e){if(!stjs.isInstanceOf(e.constructor,DRM.InitData))return!1;var t=e;return this.initDataType==t.initDataType&&Utils.buffersEqual(this.initData,t.initData)}},{initData:"ArrayBuffer"},{})},{log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drmOptions:"PlayerOptions.DRMOptions",drmInfo:{name:"Array",arguments:["DRMInfo"]},autoDisposables:"Rx.CompositeDisposable",keySystemRx:{name:"Rx.Subject",arguments:["MediaKeySystemAccess"]},http:"Http"},{});var StaticVideoSrc=function(e,t){this.url=e,
this.errorRx=t};StaticVideoSrc=stjs.extend(StaticVideoSrc,null,[VideoSrc],function(e,t){t.url=null,t.errorRx=null,t.video=null,t.autoDisposables=null,t.detach=function(){null!=this.video&&(this.video.src=""),null!=this.autoDisposables&&this.autoDisposables.dispose()},t.attach=function(e){this.autoDisposables=new Rx.CompositeDisposable,this.video=e,this.video.src=this.url,this.autoDisposables.add(Rx.Observable.fromEvent(e,"error").skipUntil(this.loadedMetadata()).subscribe(stjs.bind(this,function(t){var n=new PlayerError("media element error code="+e.error.code,PlayerError.FATAL,e.error);this.errorRx.onNext(n)})))},t.getLoadingErrors=function(){return Rx.Observable.fromEvent(this.video,"error").takeUntil(this.loadedMetadata()).map(stjs.bind(this,function(e){return new PlayerError("can not load media. error code="+this.video.error.code,PlayerError.FATAL,this.video.error)}))},t.loadedMetadata=function(){return Rx.Observable.fromEvent(this.video,"loadedmetadata")},t.canSetAudioWithoutReattach=function(e){return!0},t.setAudio=function(e){},t.clearAudioBuffer=function(){}},{errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},video:"Video",autoDisposables:"Rx.CompositeDisposable"},{});var GenericTimeline=function(e,t,n){this.timeScale=e,this.frameDurationTv=t,this.timecode=n,this.updateRx=new Rx.Subject};GenericTimeline=stjs.extend(GenericTimeline,null,[Timeline],function(e,t){t.updateRx=null,t.timeScale=0,t.frameDurationTv=0,t.timecode=null,t.durationSec=0,t.seekableDurationSec=-1,e.newGenericTime=function(e,t){var n=stjs.trunc(Math.round(e/t)),i=new TapeTimecode((!1),0,n);return new GenericTimeline(e,t,i)},t.getTimeScale=function(){return this.timeScale},t.getFrameCount=function(){return stjs.trunc(this.durationSec*this.timeScale/this.frameDurationTv)},t.getTvBySec=function(e){return stjs.trunc(this.timeScale*e)},t.getLastFrame=function(){return this.getFrameCount()-1},t.getLastTv=function(){return this.getTvByFrame(this.getLastFrame())},t.getTvByTimecode=function(e){var t=this.getTapeTimecode().getFrameByTimecode(e);return this.getTvByFrame(t)},t.getTvByFrame=function(e){return e*this.frameDurationTv},t.getFrameByTv=function(e){var t=e%this.frameDurationTv;return 0==t?stjs.trunc(stjs.trunc(e/this.frameDurationTv)):stjs.trunc(stjs.trunc((e-t)/this.frameDurationTv))},t.getFrameBySec=function(e){return this.getFrameByTv(this.floorTv(stjs.trunc(e*this.timeScale+42e-5)))},t.getFrameByTimecode=function(e){return this.timecode.getFrameByTimecode(e)},t.getFrameByMillis=function(e){return this.getFrameBySec(e/1e3)},t.floorTv=function(e){var t=e%this.frameDurationTv;return 0==t?e:e-t},t.boundsFn=function(e){return Math.min(Math.max(e,0),this.getFrameCount()-1)},t.getSecByFrame=function(e){var t=this.boundsFn(e);return t*this.frameDurationTv/this.timeScale},t.getSecByTv=function(e){return e/this.timeScale},t.getMillisByTv=function(e){return stjs.trunc(1e3*e/this.timeScale)},t.getTapeByTv=function(e){return this.timecode.getTimecodeAtFrame(this.getFrameByTv(e))},t.getTapeByFrame=function(e){return this.timecode.getTimecodeAtFrame(e)},t.getTapeBySec=function(e){return this.timecode.getTimecodeAtFrame(this.getFrameBySec(e))},t.getTapeTimecode=function(){return this.timecode},t.getDurationSec=function(){return this.durationSec},t.getSeekableDurationSec=function(){return this.seekableDurationSec},t.setSeekableDurationSec=function(e){this.seekableDurationSec=e,this.updateRx.onNext(this)},t.setDurationSec=function(e){this.durationSec=e,this.seekableDurationSec==-1&&(this.seekableDurationSec=e),this.updateRx.onNext(this)},t.getUpdateRx=function(){return this.updateRx},t.getStartUTCTimestamp=function(){throw new RuntimeException("not supported")},t.setStartUTCTimestamp=function(e){throw new RuntimeException("not supported")},t.getUTCTimestampBySec=function(e){throw new RuntimeException("not supported")}},{updateRx:{name:"Rx.Subject",arguments:["Timeline"]},timecode:"TapeTimecode",UNKNOWN:"Timeline"},{});var BoundedTimeline=function(e){this.timeline=e};BoundedTimeline=stjs.extend(BoundedTimeline,null,[Timeline],function(e,t){t.timeline=null,t.assertFinite=function(e){if(!Utils.isNormalNumber(e))throw new RuntimeException(e+" is not a valid value")},t.checkTimecode=function(e){if(!TapeTimecode.isTimecode(e))throw new RuntimeException(e+" is not a valid timecode")},t.boundsTv=function(e){return Math.max(0,Math.min(e,this.timeline.getLastTv()))},t.getTimeScale=function(){return this.timeline.getTimeScale()},t.getFrameCount=function(){return this.timeline.getFrameCount()},t.getTvBySec=function(e){return this.assertFinite(e),this.boundsTv(this.timeline.getTvBySec(e))},t.getLastFrame=function(){return this.timeline.getLastFrame()},t.getLastTv=function(){return this.timeline.getLastTv()},t.getTvByTimecode=function(e){return this.checkTimecode(e),this.boundsTv(this.timeline.getTvByTimecode(e))},t.getTvByFrame=function(e){return this.assertFinite(e),this.timeline.getTvByFrame(this.boundsFn(e))},t.getFrameByTv=function(e){return this.assertFinite(e),this.timeline.getFrameByTv(this.boundsTv(e))},t.getFrameBySec=function(e){return this.assertFinite(e),this.boundsFn(this.timeline.getFrameBySec(e))},t.getFrameByTimecode=function(e){return this.checkTimecode(e),this.boundsFn(this.timeline.getFrameByTimecode(e))},t.getFrameByMillis=function(e){return this.assertFinite(e),this.boundsFn(this.timeline.getFrameByMillis(e))},t.floorTv=function(e){return this.assertFinite(e),this.timeline.floorTv(this.boundsTv(e))},t.boundsFn=function(e){return this.assertFinite(e),this.timeline.boundsFn(e)},t.getSecByFrame=function(e){return this.assertFinite(e),this.timeline.getSecByFrame(this.boundsFn(e))},t.getSecByTv=function(e){return this.assertFinite(e),this.timeline.getSecByTv(this.boundsTv(e))},t.getMillisByTv=function(e){return this.assertFinite(e),this.timeline.getMillisByTv(this.boundsTv(e))},t.getTapeByTv=function(e){return this.assertFinite(e),this.timeline.getTapeByTv(this.boundsTv(e))},t.getTapeByFrame=function(e){return this.assertFinite(e),this.timeline.getTapeByFrame(this.boundsFn(e))},t.getTapeBySec=function(e){return this.assertFinite(e),this.timeline.getTapeByFrame(this.getFrameBySec(e))},t.getTapeTimecode=function(){return this.timeline.getTapeTimecode()},t.getDurationSec=function(){return this.timeline.getDurationSec()},t.getSeekableDurationSec=function(){return this.timeline.getSeekableDurationSec()},t.setSeekableDurationSec=function(e){this.assertFinite(e),this.timeline.setSeekableDurationSec(e)},t.getUpdateRx=function(){return this.timeline.getUpdateRx()},t.originalTimeline=function(){return this.timeline},t.getStartUTCTimestamp=function(){return this.timeline.getStartUTCTimestamp()},t.setStartUTCTimestamp=function(e){this.timeline.setStartUTCTimestamp(e)},t.getUTCTimestampBySec=function(e){return this.timeline.getUTCTimestampBySec(e)}},{UNKNOWN:"Timeline"},{});var MP4Timeline=function(e){this.pkts=e,this.timeScale=e[0].timescale;var t=!1,n=stjs.trunc(e[0].timecode),i=stjs.trunc(Math.round(this.timeScale/e[0].duration));this.timecode=new TapeTimecode(t,n,i),this.pkts.sort(function(e,t){var n=e.pts,i=t.pts;return MP4Timeline.longCompare(n,i)}),this.seekableDurationSec=this.getDurationSec(),this.updateRx=new Rx.Subject};MP4Timeline=stjs.extend(MP4Timeline,null,[Timeline],function(e,t){t.timeScale=0,t.timecode=null,t.pkts=null,t.seekableDurationSec=0,t.updateRx=null,e.longCompare=function(e,t){return e<t?-1:e==t?0:1},t.getTimeScale=function(){return this.timeScale},t.getFrameCount=function(){return this.pkts.length},t.getTvBySec=function(e){return stjs.trunc(this.timeScale*e)},t.getLastFrame=function(){return this.getFrameCount()-1},t.getLastTv=function(){return this.getTvByFrame(this.getLastFrame())},t.getTvByTimecode=function(e){var t=this.getTapeTimecode().getFrameByTimecode(e);return this.getTvByFrame(this.boundsFn(t))},t.getTvByFrame=function(e){if(e==this.pkts.length){var t=this.pkts[e-1];return t.pts+t.duration}return this.pkts[e].pts},t.getFrameByTv=function(e){var t=Utils.binarySearch(this.pkts,function(t){return MP4Timeline.longCompare(t.pts,e)});return t>=0?t:-(t+1)},t.getFrameBySec=function(e){return this.getFrameByTv(this.floorTv(stjs.trunc(e*this.timeScale+42e-5)))},t.getFrameByTimecode=function(e){return this.timecode.getFrameByTimecode(e)},t.getFrameByMillis=function(e){return this.getFrameBySec(e/1e3)},t.floorTv=function(e){var t=this.getFrameByTv(e),n=this.pkts[t];return n.pts},t.boundsFn=function(e){return Math.min(Math.max(e,0),this.getFrameCount()-1)},t.getSecByFrame=function(e){var t=this.boundsFn(e),n=this.pkts[t];return n.pts/n.timescale},t.getSecByTv=function(e){return e/this.timeScale},t.getMillisByTv=function(e){return stjs.trunc(1e3*e/this.timeScale)},t.getTapeByTv=function(e){return this.timecode.getTimecodeAtFrame(this.getFrameByTv(e))},t.getTapeByFrame=function(e){return this.timecode.getTimecodeAtFrame(e)},t.getTapeBySec=function(e){return this.timecode.getTimecodeAtFrame(this.getFrameBySec(e))},t.getTapeTimecode=function(){return this.timecode},t.getDurationSec=function(){var e=this.pkts[this.pkts.length-1],t=e.pts+e.duration;return t/e.timescale},t.getSeekableDurationSec=function(){return this.seekableDurationSec},t.setSeekableDurationSec=function(e){this.seekableDurationSec=e,this.updateRx.onNext(this)},t.getUpdateRx=function(){return this.updateRx},t.getStartUTCTimestamp=function(){throw new RuntimeException("not supported")},t.setStartUTCTimestamp=function(e){throw new RuntimeException("not supported")},t.getUTCTimestampBySec=function(e){throw new RuntimeException("not supported")}},{timecode:"TapeTimecode",pkts:{name:"Array",arguments:["MovDasher.TimePacket"]},updateRx:{name:"Rx.Subject",arguments:["Timeline"]},UNKNOWN:"Timeline"},{});var M4ASegmentedStream=function(e){SegmentedAudioStream.call(this),this.segmentedStream=e,this.sampleRate=this.getDashDescriptor().timescale,this.totalSamples=this.getDashDescriptor().duration,this.mimeType=this.getDashDescriptor().mimeType,this.codecs=this.getDashDescriptor().codecs};M4ASegmentedStream=stjs.extend(M4ASegmentedStream,SegmentedAudioStream,[],function(e,t){t.segmentedStream=null,t.silenceAppended=function(){return!1},t.getDashInit=function(e,t){this.segmentedStream.getDashInit(e,t)},t.loadSegment=function(e,t,n){return this.segmentedStream.loadSegment(e,t,n)},t.getDashDescriptor=function(){return this.segmentedStream.getDashDescriptor()},t.getChannelConfig=function(){return this.segmentedStream.getDashDescriptor().channelConfig}},{segmentedStream:"SegmentedStream",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var M4SMp3SegmentedStream=function(e){SegmentedAudioStream.call(this),this.mp3=e,this.proxyId=e.proxyId,this.sampleRate=e.sampleRate,this.channelMuted=new Array(e.audioInfo.channelCount),this.frameSize=stjs.trunc(Math.round(1e3*e.BITRATE*1152/(8*e.sampleRate))),this.mimeType="audio/mp4",this.serverUrl=e.serverUrl,this.audioInfo=e.audioInfo,this.url=e.url};M4SMp3SegmentedStream=stjs.extend(M4SMp3SegmentedStream,SegmentedAudioStream,[],function(e,t){t.mp3=null,t.frameSize=0,t.loadSegment=function(e,t,n){var i=this;return this.mp3.channelMuted=this.channelMuted,this.mp3.loadSegment(e,stjs.bind(this,function(n){var r,s=stjs.trunc(n.byteLength/i.frameSize);r=s>SegmentedAudioStream.FRAMES_PER_SEGMENT&&e<i.getSegmentCount()-1?new Uint8Array(n,0,SegmentedAudioStream.FRAMES_PER_SEGMENT*i.frameSize):new Uint8Array(n);var o=MovDasher.wrapMp3Segment(e,SegmentedAudioStream.FRAMES_PER_SEGMENT,this.totalSamples,this.frameSize,r);t(o)}),n)},t.getDurationSec=function(){return this.mp3.getDurationSec()},t.getDashDescriptor=function(){throw new RuntimeException("TODO")},t.getSegmentCount=function(){return this.mp3.getSegmentCount()},t.getSegmentDuration=function(e){return this.mp3.getSegmentDuration(e)},t.getSegmentIdxByTime=function(e){return this.mp3.getSegmentIdxByTime(e)},t.getSegmentStartTime=function(e){return this.mp3.getSegmentStartTime(e)},t.getDashInit=function(e,t){MovDasher.mp3InitSegment(this.sampleRate,this.totalSamples,this.frameSize,e)},t.silenceAppended=function(){return this.mp3.silenceAppended()}},{mp3:"SegmentedAudioStream",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var Mp3SegmentedAudioStream=function(e,t,n,i){throw SegmentedAudioStream.call(this),new RuntimeException("Mp3DashFile TODO")};Mp3SegmentedAudioStream=stjs.extend(Mp3SegmentedAudioStream,SegmentedAudioStream,[],function(e,t){t.getSegmentCount=function(){throw new RuntimeException("TODO")},t.loadSegment=function(e,t,n){throw new RuntimeException("TODO")},t.getSegmentDuration=function(e){throw new RuntimeException("TODO")},t.getSegmentIdxByTime=function(e){throw new RuntimeException("TODO")},t.getSegmentStartTime=function(e){throw new RuntimeException("TODO")},t.getDashInit=function(e,t){throw new RuntimeException("TODO")},t.getDashDescriptor=function(){throw new RuntimeException("TODO")},t.silenceAppended=function(){throw new RuntimeException("TODO")}},{channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var HLSPlaylist=function(){this.headers={},this.mediaList=[],this.variantList=[]};HLSPlaylist=stjs.extend(HLSPlaylist,null,[],function(e,t){e.NO="NO",e.YES="YES",e.ENDLIST="#EXT-X-ENDLIST",e.EXTM3U="#EXTM3U",e.EXTINF="#EXTINF",e.ALLOW_CACHE="#EXT-X-ALLOW-CACHE",e.START="#EXT-X-START",e.MEDIA_SEQUENCE="#EXT-X-MEDIA-SEQUENCE",e.TARGETDURATION="#EXT-X-TARGETDURATION",e.PLAYLIST_TYPE="#EXT-X-PLAYLIST-TYPE",e.VERSION="#EXT-X-VERSION",e.BANDWIDTH="BANDWIDTH",e.RESOLUTION="RESOLUTION",e.URI="URI",e.AUTOSELECT="AUTOSELECT",e.DEFAULT="DEFAULT",e.GROUP_ID="GROUP-ID",e.TYPE="TYPE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.NAME="NAME",e.Related="#EXT-X-MEDIA",e._Variant="#EXT-X-STREAM-INF",e.EVENT="EVENT",e.VOD="VOD",e.RelatedPlaylist=function(e){this.attributes=e},e.RelatedPlaylist=stjs.extend(e.RelatedPlaylist,null,[],function(e,t){t.attributes=null},{attributes:{name:"Map",arguments:[null,null]}},{}),e.createVariant=function(e,t){var n=new HLSPlaylist.Variant;return n.uri=e,n.attributes=t,n},e.Variant=function(){},e.Variant=stjs.extend(e.Variant,null,[],function(e,t){t.uri=null,t.attributes=null},{attributes:{name:"Map",arguments:[null,null]}},{}),e.Media=function(e,t){this.url=e,this.durationSec=t},e.Media=stjs.extend(e.Media,null,[],function(e,t){t.url=null,t.durationSec=0},{},{}),t.uri=null,t.headers=null,t.mediaList=null,t.variantList=null,t.endList=!1,t.getRelatedPlaylists=function(){var e=this.headers[HLSPlaylist.Related],t=e.map(function(e,t,n){return new HLSPlaylist.RelatedPlaylist(HLSPlaylist.parseAttributeList(e))});return t},t.getVariantList=function(){return this.copyOf(this.variantList)},t.copyOf=function(e){return e.slice(0)},t.getDurationSec=function(){for(var e=0,t=0;t<this.mediaList.length;t++)e+=this.mediaList[t].durationSec;return e},t.getMediaList=function(){return this.copyOf(this.mediaList)},t.setEndList=function(e){this.endList=e},t.hasEndList=function(){return this.endList},t.addMedia=function(e,t){this.mediaList.push(new HLSPlaylist.Media(e,t))},t.setVersion=function(e){this.setHeader(HLSPlaylist.VERSION,Integer.toString(e))},t.setHeader=function(e,t){this.headers[e]=[t]},t.getVersion=function(){return this.toInt(this.getHeader(HLSPlaylist.VERSION))},t.toInt=function(e){return parseInt(e)},t.setTargetDuration=function(e){this.setHeader(HLSPlaylist.TARGETDURATION,Integer.toString(e))},t.getTargetDuration=function(){return this.toInt(this.getHeader(HLSPlaylist.TARGETDURATION))},t.setPlaylistType=function(e){this.setHeader(HLSPlaylist.PLAYLIST_TYPE,e)},t.getPlaylistType=function(){return this.getHeader(HLSPlaylist.PLAYLIST_TYPE)},t.getHeader=function(e){return this.containsKey(e)?this.headers[e][0]:null},t.containsKey=function(e){return this.headers.hasOwnProperty(e)},t.setMediaSequence=function(e){this.setHeader(HLSPlaylist.MEDIA_SEQUENCE,Integer.toString(e))},t.getMediaSequence=function(){return this.toInt(this.getHeader(HLSPlaylist.MEDIA_SEQUENCE))},t.setAllowCache=function(e){this.setHeader(HLSPlaylist.ALLOW_CACHE,e?HLSPlaylist.YES:HLSPlaylist.NO)},t.getAllowCache=function(){return HLSPlaylist.toBooleanObject(this.getHeader(HLSPlaylist.ALLOW_CACHE))},e.toBooleanObject=function(e){return!!HLSPlaylist.YES.equals(e)||!HLSPlaylist.NO.equals(e)&&null},e.attrsToString=function(e){var t="";for(var n in e){""!=t&&(t+=",");var i=e[n];null!=i&&(t+="="+i)}return t},e.parseString=function(e,t){return HLSPlaylist.parseM3U8(e.replaceAll("\r\n","\n").split("\n"),t)},e.parseM3U8=function(e,t){var n=e.length>0?e.shift():null;if(!HLSPlaylist.EXTM3U.equals(n))return null;for(var i=new HLSPlaylist,r=!1,s=!1,o=-1;e.length>0;)if(n=e.shift(),""!=n.trim())if(n.startsWith("#")){if(n.startsWith(HLSPlaylist.EXTINF)){var a=HLSPlaylist.split(n);o=Double.parseDouble(a[1].replaceAll(",$","")),r=!0}else if(n.startsWith(HLSPlaylist._Variant)){var a=HLSPlaylist.split(n),l=new HLSPlaylist.Variant;l.attributes=HLSPlaylist.parseAttributeList(a[1]),i.variantList.push(l),s=!0}else if(n.startsWith(HLSPlaylist.ENDLIST))i.endList=!0;else if(n.startsWith("#EXT-X")){var a=HLSPlaylist.split(n),u=a[0],c=a[1];i.addHeader(u,c)}}else if(r)i.addMedia(n,o);else{if(!s)throw new HLSPlaylist.HLSParseException("error parsing m3u8 line: "+n);i.variantList[i.variantList.length-1].uri=n}return i},e.split=function(e){var t=e.indexOf(":");return t<0?[e]:[e.substring(0,t),e.substring(t+1)]},t.setStart=function(e,t){this.setHeader(HLSPlaylist.START,String.format("TIME-OFFSET=%f,PRECISE=%s",e,t?HLSPlaylist.YES:HLSPlaylist.NO))},t.getStart=function(){var e=this.getHeader(HLSPlaylist.START);if(null==e)return null;var t=HLSPlaylist.parseAttributeList(e);return Pair.of(HLSPlaylist.toFloatObject(t["TIME-OFFSET"]),HLSPlaylist.toBooleanObject(t.PRECISE))},e.parseAttributeList=function(e){for(var t={},n=new RegExp('(([^,]+)=(".+?"|[^,]+)),?',"g"),i=[];null!=(i=n.exec(e));)t[i[2]]=i[3];return t},e.toFloatObject=function(e){try{return Float.parseFloat(e)}catch(t){return null}},t.addRelatedPlaylist=function(e){this.addHeader(HLSPlaylist.Related,HLSPlaylist.attrsToString(e))},t.addHeader=function(e,t){this.containsKey(e)||(this.headers[e]=[]),this.headers[e].push(t)},t.addVariantStream=function(e){this.variantList.push(e)},e.quote=function(e){return'"'+e+'"'},e.audio=function(e,t,n){var i={};return i[HLSPlaylist.TYPE]=HLSPlaylist.AUDIO,i[HLSPlaylist.GROUP_ID]=n,i[n]=HLSPlaylist.quote(e),i[HLSPlaylist.URI]=HLSPlaylist.quote(t),i[HLSPlaylist.TYPE]=HLSPlaylist.AUDIO,i},e.testParse4=function(){var e=["#EXTM3U","#EXT-X-VERSION:4",'#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="index_audio",NAME="eredeti",DEFAULT=NO,AUTOSELECT=YES,URI="AUD_MUL.m3u8"','#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="index_audio",NAME="magyar",DEFAULT=YES,AUTOSELECT=YES,LANGUAGE="hu",URI="AUD_HUN.m3u8"','#EXT-X-STREAM-INF:PROGRAM-ID=16,BANDWIDTH=2699680,RESOLUTION=1280x720,CODECS="avc1.4d401f,mp4a.40.2",AUDIO="index_audio"',"VID_1280x720.m3u8",'#EXT-X-STREAM-INF:PROGRAM-ID=16,BANDWIDTH=2185312,RESOLUTION=1024x576,CODECS="avc1.4d401f,mp4a.40.2",AUDIO="index_audio"',"VID_640x360_1.m3u8",'#EXT-X-STREAM-INF:PROGRAM-ID=16,BANDWIDTH=645216,RESOLUTION=384x216,CODECS="avc1.42e015,mp4a.40.2",AUDIO="index_audio"',"VID_384x216.m3u8"],t=new Log(LogLevel.DEBUG);t.debug(HLSPlaylist.parseM3U8(e,t));var n=["#EXTM3U","#EXT-X-PLAYLIST-TYPE:VOD","#EXT-X-TARGETDURATION:3","#EXT-X-VERSION:3","#EXTINF:2.13547,","0.ts","#EXTINF:2.13547,","1.ts","#EXTINF:2.13547,","2.ts","#EXT-X-ENDLIST"];t.debug(HLSPlaylist.parseM3U8(n,t))},e.HLSParseException=function(e){Exception.call(this,e)},e.HLSParseException=stjs.extend(e.HLSParseException,Exception,[],null,{},{})},{headers:{name:"Map",arguments:[null,{name:"Array",arguments:[null]}]},mediaList:{name:"Array",arguments:["HLSPlaylist.Media"]},variantList:{name:"Array",arguments:["HLSPlaylist.Variant"]}},{});var Mp3MixSegmentedAudioStream=function(e,t,n,i){SegmentedAudioStream.call(this),this.http=e,this.serverUrl=t,this.proxyId=n,this.audioInfo=i,this.sampleRate=i.sampleRate,this.totalSamples=i.totalSamples,this.channelMuted=new Array(i.channelCount),this.mimeType="audio/mpeg",this.BITRATE=128};Mp3MixSegmentedAudioStream=stjs.extend(Mp3MixSegmentedAudioStream,SegmentedAudioStream,[],function(e,t){t.BITRATE=0,t.http=null,t.getDurationSec=function(){return this.totalSamples/this.sampleRate},t.getSegmentCount=function(){var e=Math.ceil(stjs.trunc(this.totalSamples/1152));return stjs.trunc(Math.ceil(e/SegmentedAudioStream.FRAMES_PER_SEGMENT))},t.getSegmentDuration=function(e){return 1152*SegmentedAudioStream.FRAMES_PER_SEGMENT/this.sampleRate},t.getSegmentIdxByTime=function(e){var t=parseInt(e*this.sampleRate),n=parseInt(stjs.trunc(t/1152));return parseInt(stjs.trunc(n/SegmentedAudioStream.FRAMES_PER_SEGMENT))},t.getSegmentStartTime=function(e){var t=1152*SegmentedAudioStream.FRAMES_PER_SEGMENT;return e*t/this.sampleRate},t.loadSegment=function(e,t,n){for(var i="",r=!0,s=0;s<this.channelMuted.length;s++)r=r&&this.channelMuted[s],i+=this.channelMuted[s]?"0":"1";var o=Math.ceil(stjs.trunc(this.totalSamples/1152)),a=e*SegmentedAudioStream.FRAMES_PER_SEGMENT,l=(e+1)*SegmentedAudioStream.FRAMES_PER_SEGMENT;if(!r&&a<o){var u=new HttpDataSrc(this.http,this.serverUrl+"/"+this.proxyId+"/"+i+".mp3"),c=Math.round(stjs.trunc(1e3*this.BITRATE*1152/(8*this.sampleRate))),d=a*c,p=(l+1)*c,h=function(e){var n=stjs.trunc(stjs.trunc(e.byteLength/c));if(n>=SegmentedAudioStream.FRAMES_PER_SEGMENT)t(e);else{var i=new Int8Array(e),r=SegmentedAudioStream.FRAMES_PER_SEGMENT-n+1,s=new Int8Array(i.length+r*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length);s.set(i,0);for(var o=0,a=i.length;o<r;o++)s.set(Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb,a+o*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length);t(s.buffer)}};return u.fetch(d,p,h,n)}for(var f=l-a+2,m=new Int8Array(f*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length),g=0;g<f;g++)m.set(Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb,g*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length);var v=setTimeout(function(){return t(m.buffer)},0),b=function(){return clearTimeout(v)};return b},e.SILENCE_FRAME_48_128kb=new Int8Array([-1,-5,-108,4,0,15,-16,0,0,105,0,0,0,8,0,0,13,32,0,0,1,0,0,1,-92,0,0,0,32,0,0,52,-128,0,0,4,76,65,77,69,51,46,57,57,46,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.getDashInit=function(e,t){e(null)},t.getDashDescriptor=function(){throw new RuntimeException("TODO")},t.isDynamic=function(){return!1},t.silenceAppended=function(){return!0}},{http:"Http",SILENCE_FRAME_48_128kb:"Int8Array",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var DashTimeline=function(e,t,n,i,r,s){this.duration=n,this.seekableDurationSec=n/e,this.timeScale=e,this.dropFrame=!1;var o=0!=t?stjs.trunc(Math.round(e/t)):DashTimeline.DEFAULT_TAPE_FPS;this.tapeTimecode=new TapeTimecode(this.dropFrame,0,o),null!=i?this.packetCache=new OptimizedPacketCache(i,r,s):this.packetCache=new DefaultPacketCache(t),this.updateRx=new Rx.Subject};DashTimeline=stjs.extend(DashTimeline,null,[Timeline],function(e,t){e.DEFAULT_TAPE_FPS=24,t.duration=0,t.timeScale=0,t.dropFrame=!1,t.tapeTimecode=null,t.seekableDurationSec=0,t.packetCache=null,t.updateRx=null,t.startUTCTimestamp=null,t.getTimeScale=function(){return this.timeScale},t.getFrameCount=function(){return this.packetCache.getFrameCount(this.duration)},t.getTvBySec=function(e){return stjs.trunc(this.timeScale*e)},t.getLastFrame=function(){return this.getFrameCount()-1},t.getLastTv=function(){return this.getTvByFrame(this.getLastFrame())},t.getTvByTimecode=function(e){var t=this.getTapeTimecode().getFrameByTimecode(e);return this.getTvByFrame(t)},t.getTvByFrame=function(e){return this.packetCache.getTvByFrame(e)},t.getFrameByTv=function(e){return this.packetCache.getFrameByTv(e)},t.getFrameBySec=function(e){return this.getFrameByTv(this.floorTv(stjs.trunc(e*this.timeScale+42e-5)))},t.getFrameByTimecode=function(e){return this.getTapeTimecode().getFrameByTimecode(e)},t.getFrameByMillis=function(e){return this.getFrameBySec(e/1e3)},t.floorTv=function(e){return this.packetCache.floorTv(e)},t.boundsFn=function(e){return Math.min(Math.max(e,0),this.getFrameCount()-1)},t.getSecByFrame=function(e){var t=this.getTvByFrame(e);return t/this.timeScale},t.getSecByTv=function(e){return e/this.timeScale},t.getMillisByTv=function(e){return stjs.trunc(1e3*e/this.timeScale)},t.getTapeByTv=function(e){return this.getTapeTimecode().getTimecodeAtFrame(this.getFrameByTv(e))},t.getTapeByFrame=function(e){return this.getTapeTimecode().getTimecodeAtFrame(e)},t.getTapeBySec=function(e){return this.getTapeTimecode().getTimecodeAtFrame(this.getFrameBySec(e))},t.getTapeTimecode=function(){return this.tapeTimecode},t.getDurationSec=function(){return this.duration/this.timeScale},t.getSeekableDurationSec=function(){return this.seekableDurationSec},t.setDuration=function(e){this.duration=e,this.updateRx.onNext(this)},t.setSeekableDurationSec=function(e){this.seekableDurationSec=e,this.updateRx.onNext(this)},t.updateTimePackets=function(e,t){this.packetCache.updateTimePackets(e,t);var n=stjs.trunc(Math.round(this.timeScale/this.packetCache.getAverageFrameDuration()));this.tapeTimecode.setTapeFps(n),this.updateRx.onNext(this)},t.getUpdateRx=function(){return this.updateRx},t.getStartUTCTimestamp=function(){return this.startUTCTimestamp},t.setStartUTCTimestamp=function(e){this.startUTCTimestamp=e},t.getUTCTimestampBySec=function(e){var t=Date.parse(this.startUTCTimestamp)+1e3*e;return new Date(t).toISOString()}},{tapeTimecode:"TapeTimecode",packetCache:"PacketCache",updateRx:{name:"Rx.Subject",arguments:["Timeline"]},UNKNOWN:"Timeline"},{});var SegmentedVideoStream=function(e,t,n,i){SegmentedStream.call(this),this.http=e,this.urls=t,this.desc=n,this.sampleDuration=i,this.timecode=n.timecode,this.timescale=n.timescale,this.sampleDuration=i,this.timecode=n.timecode,this.mimeType=n.mimeType,this.codecs=n.codecs};SegmentedVideoStream=stjs.extend(SegmentedVideoStream,SegmentedStream,[],function(e,t){t.timecode=null,t.timescale=0,t.sampleDuration=0,t.http=null,t.urls=null,t.desc=null,t.getDashInit=function(e,t){this.http.getArrayBuffer(this.urls.getInitUrl()).subscribe(e,t)},t.getFrameCount=function(){return stjs.trunc(stjs.trunc(this.desc.duration/this.sampleDuration))},t.getDashDescriptor=function(){return this.desc},t.loadSegment=function(e,t,n){var i=this.http.getArrayBuffer(this.urls.getSegmentUrl(e)).retryWhen(RetryWithDelay.create(3,3e3)).subscribe(t,function(e){return n(e.status)});return stjs.bind(i,"dispose")},t.updateFrom=function(e){this.urls=e.urls,this.desc=e.desc,this.updateRx.onNext(this)}},{http:"Http",urls:"DashSegmentUrls",desc:"DashDescriptor",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var SRTParser=function(){};SRTParser=stjs.extend(SRTParser,null,[],function(e,t){e.parse=function(e,t){var n=new Subtitles;n.rows=[];var i=e.replaceAll("\r\n","\n").split("\n"),r=RxUtil.split(Rx.Observable.from(i),function(e,t){return"".equals(t)});r=r.map(function(e){return"".equals(e[0])?e.slice(1):e}),r=r.filter(function(e){var t=e.length>=3,n=!isNaN(parseInt(e[0]));return t&&n});var s=r.map(function(e){var n=(e.shift(),e.shift()),i=n.split(" "),r=i[0],s=i[2],o=SubsUtils.parseTimestamp(r),a=SubsUtils.parseTimestamp(s),l=new SubtitleEntry;l.startMsec=o,l.endMsec=a,l.startTv=t.getTvBySec(o/1e3),l.endTv=t.getTvBySec(a/1e3),l.timeCodeIn=t.getTapeBySec(o/1e3),l.timeCodeOut=t.getTapeBySec(a/1e3);var u=window.document.createElement("div");return u.innerHTML=e.join(),l.notes=u.innerText,l}),o=s.reduce(function(e,t){return e.rows.push(t),e},n);return o}},{},{});var ConformedM4sAudioStream=function(e,t,n,i){SegmentedAudioStream.call(this),this.realStream=e,this.offsetPTS=t,this.log=i;var r=n-(t+e.totalSamples);this.tailSilenceDuration=1024*stjs.trunc(Math.ceil(r/1024)),this.totalSamples=t+e.totalSamples+this.tailSilenceDuration,this.sampleRate=e.sampleRate,this.offsetSec=t/e.sampleRate;var s=t%1024!=0;this.frameAlignTv=s?1024-t%1024:0,this.firstRealSegment=stjs.trunc(Math.ceil(t/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION)),this.lastRealSegment=this.firstRealSegment+this.realStream.getSegmentCount()-1,this.codecs=e.codecs,this.mimeType=e.mimeType};ConformedM4sAudioStream=stjs.extend(ConformedM4sAudioStream,SegmentedAudioStream,[],function(e,t){t.realStream=null,t.offsetPTS=0,t.offsetSec=0,t.firstRealSegment=0,t.lastRealSegment=0,t.frameAlignTv=0,t.moovMp4Box=null,t.tailSilenceDuration=0,t.log=null,e.SILENCE_SEGMENT_DURATION=245760,e.ABORT_IMPOSSIBLE=function(){},t.getSegmentIdxByTime=function(e){var t=Utils.secondsToTv(e,this.sampleRate),n=this.offsetPTS+this.realStream.totalSamples;if(t<this.offsetPTS){var i=t+this.frameAlignTv;return stjs.trunc(stjs.trunc(i/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION))}return t<n?this.realStream.getSegmentIdxByTime(e-this.offsetSec)+this.firstRealSegment:stjs.trunc(stjs.trunc((t-n)/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION))+(this.lastRealSegment+1)},t.getSegmentStartTime=function(e){return this.getSegmentStartTv(e)/this.sampleRate},t.getSegmentStartTv=function(e){if(e<this.firstRealSegment){var t=e*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,n=t-this.frameAlignTv;return n<0&&(n=0),n}if(e<=this.lastRealSegment)return this.realStream.getSegmentStartTv(e-this.firstRealSegment)+this.offsetPTS;var i=this.offsetPTS+this.realStream.totalSamples;return i+(e-(this.lastRealSegment+1))*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION},t.getSegmentDuration=function(e){if(e>=this.firstRealSegment&&e<=this.lastRealSegment)return this.realStream.getSegmentDuration(e-this.firstRealSegment);var t=this.getSilenceSegmentDurationInDTS(e);return 0==e&&(t-=this.frameAlignTv),t/this.sampleRate},t.getSilenceSegmentDurationInDTS=function(e){if(e>=this.firstRealSegment&&e<=this.lastRealSegment)throw new RuntimeException("not a silence segment "+e);if(e==this.firstRealSegment-1){var t=e*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,n=this.offsetPTS+this.frameAlignTv;return n-t}if(e==this.getSegmentCount()-1){var i=this.tailSilenceDuration%ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION;return i>0?i:ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION}return ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION},t.getSegmentCount=function(){var e=stjs.trunc(Math.ceil(this.tailSilenceDuration/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION));return this.firstRealSegment+this.realStream.getSegmentCount()+e},t.getDurationSec=function(){return this.totalSamples/this.sampleRate},t.getDashInit=function(e,t){this.realStream.getDashInit(stjs.bind(this,function(t){this.moovMp4Box=Mp4Loader.parseMoov(t),e(t)}),t)},t.loadSegment=function(e,t,n){if(e<this.firstRealSegment){var i=e*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,r=this.getSilenceSegmentDurationInDTS(e),s=MovDasher.createSilenceMoof(this.moovMp4Box,e,i,r,this.log);return t(s),ConformedM4sAudioStream.ABORT_IMPOSSIBLE}if(e<=this.lastRealSegment)return this.realStream.loadSegment(e-this.firstRealSegment,stjs.bind(this,function(n){var i=this.realStream.getSegmentStartTv(e-this.firstRealSegment)+this.offsetPTS,r=i+this.frameAlignTv,s=MovDasher.conformMoof(n,e,r);t(s)}),n);var o=this.offsetPTS+this.realStream.totalSamples,a=o+this.frameAlignTv,i=a+(e-(this.lastRealSegment+1))*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,r=this.getSilenceSegmentDurationInDTS(e),s=MovDasher.createSilenceMoof(this.moovMp4Box,e,i,r,this.log);
return t(s),ConformedM4sAudioStream.ABORT_IMPOSSIBLE},t.silenceAppended=function(){return!0},t.getDashDescriptor=function(){throw new RuntimeException("not supported")},t.isDynamic=function(){return this.realStream.isDynamic()},t.getSegmentTimestampOffset=function(e){var t=-this.frameAlignTv/this.sampleRate;return this.realStream.getSegmentTimestampOffset(e)+t}},{realStream:"SegmentedAudioStream",moovMp4Box:"MP4Box",log:"Log",ABORT_IMPOSSIBLE:"Callback0",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var DashStreamFrameExtractor=function(e,t,n,i){AbstractFrameExtractor.call(this),this.segmentedStream=e,this.timeline=t,this.log=n,this.errorRx=i};DashStreamFrameExtractor=stjs.extend(DashStreamFrameExtractor,AbstractFrameExtractor,[],function(e,t){t.segmentedStream=null,t.timeline=null,t.log=null,t.errorRx=null,t.init=function(e){this.frameData=new Array,this.iframes=new Array,this.addIFrames(),this.segmentedStream.getUpdateRx().subscribe(stjs.bind(this,function(e){return this.addIFrames()})),this.segmentedStream.getDashInit(stjs.bind(this,function(t){this.mp4box=Mp4Loader.parseMoov(t),e(this.getInfo())}),stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("error loading dash init segment from thumb stream",PlayerError.NONFATAL))}))},t.addIFrames=function(){for(var e=0;e<this.segmentedStream.getSegmentCount();e++){var t=this.segmentedStream.getSegmentStartTime(e),n=this.timeline.getFrameBySec(t);this.addIFrame(n)}},t.addIFrame=function(e){var t=Utils.binarySearch1(this.iframes,e),n=this.iframes[t];e!=n&&this.iframes.splice(t+1,0,e)},t.getInfo=function(){var e=this.mp4box.getInfo().videoTracks[0].video;return new FilmstripInfo(e.width,e.height,this.timeline.getFrameCount())},t.getPrevIframe=function(e){return this.iframes[Utils.binarySearch1(this.iframes,e)]},t.loadFrameData=function(e){return Rx.Observable.create(stjs.bind(this,function(t){if(null==this.frameData[e]&&e>=0&&e<this.getInfo().framesTotal){var n=this.timeline.getSecByFrame(e),i=this.segmentedStream.getSegmentIdxByTime(n);return this.segmentedStream.loadSegment(i,stjs.bind(this,function(n){this.processSegment(i,n),t.onNext(e),t.onCompleted()}),stjs.bind(this,function(e){this.errorRx.onNext(new PlayerError("error loading thumbs segment",PlayerError.NONFATAL,i,e)),t.onError(e)}))}return t.onNext(e),t.onCompleted(),function(){}}))},t.processSegment=function(e,t){for(var n=this.timeline.getFrameBySec(this.segmentedStream.getSegmentStartTime(e)),i=Mp4Loader.parseMoof(t),r=MovDasher.getTrunSamplesInfo(i),s=0;s<r.length;s++){var o=n+s,a=r[s],l=this.getNALUnits(t,stjs.trunc(a.offset),a.size);this.frameData[o]=l,this.isIFrame(l)&&this.addIFrame(o)}},t.isIFrame=function(e){for(var t=0;t<e.length;t++){var n=31&e[t][0];if(5==n)return!0}return!1},t.getNALLength=function(e,t,n){var i=new DataView(e,t,4).getInt32(0);if(1!=i)return i;for(var r=t+4;1!=new DataView(e,r,4).getInt32(0);){if(r==n-4)return n-t-4;r++}return r-t-4},t.getNALUnits=function(e,t,n){for(var i=t,r=[];i-t<n;){var s=this.getNALLength(e,i,t+n);r.push(new Uint8Array(e,i+4,s)),i+=s+4}return r}},{segmentedStream:"SegmentedStream",timeline:"Timeline",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},mp4box:"MP4Box",iframes:{name:"Array",arguments:[null]},frameData:{name:"Array",arguments:[{name:"Array",arguments:["Uint8Array"]}]}},{});var PlayerView=function(e,t){CloseableView.call(this),this.parentEl=e,this.log=t,this.autoDisposables=new Rx.CompositeDisposable,this.initPlayerContainer()};PlayerView=stjs.extend(PlayerView,CloseableView,[],function(e,t){t.player=null,t.parentEl=null,t.log=null,t.container=null,t.video=null,t.trickVideo=null,t.hm=null,t.playerContainer=null,t.frozenCanvas=null,t.fullscreenRx=null,t.spinner=null,t.autoDisposables=null,t.stepInterval=0,e.DO_NOTHING=function(e){},e.PLAYER_TEMPLATE='<style type="text/css">\n   .vg_player { position: relative; }\n   .vg_player video { display: block; height: 100%; width: 100%; border: 0; }\n   .vg_player video + video { position: absolute; top: 0; left: 0; }\n   .vg_player_opacity_0 { opacity: 0; }\n</style>\n<div class="vg_embed-container">\n    <div class="vg_player vg_background">\n        <div class="vg_loading-spinner vg_invisible"></div>\n        <video class="vg_player_opacity_0" type="hires+audio"></video>\n        <video type="lowres"></video>\n    </div>\n    <div class="vg_allControls"></div>\n</div>\n<div class="vg_proPanel vg_background"></div>',t.initPlayerContainer=function(){this.container=window.document.createElement("div"),this.container.className="vg_playerContainer",this.container.classList.add("vg_noselect"),this.container.innerHTML=PlayerView.PLAYER_TEMPLATE,this.parentEl.appendChild(this.container),this.playerContainer=this.container.querySelector(".vg_player"),this.trickVideo=this.playerContainer.querySelector('video[type="lowres"]'),this.video=this.playerContainer.querySelector('video[type="hires+audio"]'),this.spinner=this.playerContainer.querySelector(".vg_loading-spinner"),this.fullscreenRx=this.createFullScreenRx(),this.showSpinner()},t.init=function(e){this.player=e,this.autoDisposable(e.getVideoElement().getBusyRx().subscribe(stjs.bind(this,function(e){e?this.showSpinner():this.hideSpinner()}))),this.autoDisposable(this.fullscreenRx.subscribe(stjs.bind(this,function(e){e?this.player.container.classList.add("vg_fullscreenMode"):this.player.container.classList.remove("vg_fullscreenMode")}))),this.initHotkeys(),e.options.hotkeys?e.enableHotKeys():e.disableHotKeys()},t.showSpinner=function(){this.spinner.classList.remove("vg_invisible")},t.hideSpinner=function(){this.spinner.classList.add("vg_invisible")},t.freezeVideo=function(){if(null==this.frozenCanvas){var e=window.document.createElement("div");e.classList.add("vg_frozen_container"),this.frozenCanvas=window.document.createElement("canvas"),e.appendChild(this.frozenCanvas),this.playerContainer.appendChild(e)}this.frozenCanvas.width=this.player.getVideoElement().getVideoWidth(),this.frozenCanvas.height=this.player.getVideoElement().getVideoHeight();var t=this.playerContainer.clientWidth/this.frozenCanvas.width,n=this.playerContainer.clientHeight/this.frozenCanvas.height,i=(Math.min(t,n),this.frozenCanvas.getContext("2d",null));return i.drawImage(this.video,0,0),this.frozenCanvas},t.unfreezeVideo=function(){if(null!=this.frozenCanvas){var e=this.frozenCanvas.parentNode;e.style.display="none"}},t.getFrozenCanvas=function(){return this.frozenCanvas},t.initHotkeys=function(){this.hm=new HotkeyManager(this.log),this.hm.enableHotKeysForWindow(window);var e=this.player;this.hm.addShortcut("space",stjs.bind(this,function(e){this.player.togglePlay(),e.preventDefault()}),KeyOptions.gd("Player","Play/Pause",!0)),this.hm.addShortcut("shift-right",function(t){e.playFaster()},KeyOptions.gd("Player","Play faster",!1)),this.hm.addShortcut("shift-left",function(t){e.playFasterBackwards()},KeyOptions.gd("Player","Play faster backwards",!1)),this.hm.addShortcut("left",stjs.bind(this,function(e){this.player.previousFrame(this.stepInterval)}),KeyOptions.gd("Player","Previous frame",!1)),this.hm.addShortcut("right",stjs.bind(this,function(e){this.player.nextFrame(this.stepInterval)}),KeyOptions.gd("Player","Next frame",!1)),this.hm.addShortcut("esc",stjs.bind(this,function(e){Utils.isFullScreen()&&this.exitFullscreen()}),KeyOptions.gd("Player","Exit fullscreen",!1)),this.hm.addShortcut("k",stjs.bind(this,function(e){this.player.pause()}),KeyOptions.gd("Player","Pause",!1)),this.hm.addShortcut("j",stjs.bind(this,function(e){this.player.playFasterBackwards()}),KeyOptions.gd("Player","Play backward, play backward faster",!1)),this.hm.addShortcut("l",stjs.bind(this,function(e){this.player.playFaster()}),KeyOptions.gd("Player","Play forward, play forward faster",!1)),this.hm.addShortcut("k-j",stjs.bind(this,function(e){this.player.previousFrame(1)}),KeyOptions.gd("Player","Previous frame",!1)),this.hm.addShortcut("k-l",stjs.bind(this,function(e){this.player.nextFrame(1)}),KeyOptions.gd("Player","Next frame",!1));var t=this.container.querySelector(".vg_player"),n=new MutableInt(0);t.addEventListener("click",stjs.bind(this,function(e){n.value++,2==n.value?(n.value=0,this.toggleFullscreen()):setTimeout(stjs.bind(this,function(){1==n.value&&(this.container.classList.contains("noSource")||this.player.togglePlay(),n.value=0)}),300)}))},t.onFullScreen=function(e){Utils.isFullScreen()?Utils.fullScreenElement(this.parentEl.ownerDocument)==this.parentEl&&this.fullscreenRx.onNext(!0):this.fullscreenRx.onNext(!1)},t.createFullScreenRx=function(){return this.autoDisposable(Rx.Observable.fromEvent(window.document,"webkitfullscreenchange").subscribe(stjs.bind(this,"onFullScreen"))),this.autoDisposable(Rx.Observable.fromEvent(window.document,"mozfullscreenchange").subscribe(stjs.bind(this,"onFullScreen"))),this.autoDisposable(Rx.Observable.fromEvent(window.document,"fullscreenchange").subscribe(stjs.bind(this,"onFullScreen"))),this.autoDisposable(Rx.Observable.fromEvent(window.document,"MSFullscreenChange").subscribe(stjs.bind(this,"onFullScreen"))),new Rx.Subject},t.closeFullScreenRx=function(){this.fullscreenRx.onCompleted()},t.toggleFullscreen=function(){Utils.isFullScreen()?this.exitFullscreen():this.enterFullscreen(this.parentEl)},t.enterFullscreen=function(e){this.log.debug("enterFullscreen");var t=e||this.container;null!=t.requestFullScreen?t.requestFullScreen():null!=t.mozRequestFullScreen?t.mozRequestFullScreen():null!=t.webkitRequestFullScreen?(t.webkitRequestFullScreen(1),window.document.isFullscreen||t.webkitRequestFullScreen(0)):null!=t.webkitEnterFullScreen?t.webkitEnterFullScreen():t!=this.video&&this.enterFullscreen(this.video)},t.exitFullscreen=function(){this.log.debug("exitFullscreen"),null!=window.document.cancelFullscreen?window.document.cancelFullscreen():null!=window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():null!=window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen()},t.seekFrameAndCheckRange=function(e){},t.getCaptionsContainer=function(){},t.hideTrickVideo=function(){this.trickVideo.classList.add(VideoElement.VG_PLAYER_OPACITY_0),this.video.classList.remove(VideoElement.VG_PLAYER_OPACITY_0)},t.renderFatalError=function(e){},t.renderRange=function(e,t){},t.renderWhole=function(){},t.showAsAudioPlayer=function(){},t.close=function(){CloseableView.prototype.close.call(this);var e=this.parentEl.querySelector(".vg_playerContainer");null!=e&&this.parentEl.removeChild(e),null!=this.hm&&this.hm.destruct(),this.closeFullScreenRx(),this.autoDisposables.dispose(),this.autoDisposables=new Rx.CompositeDisposable},t.autoDisposable=function(e){this.autoDisposables.add(e)}},{player:"PlayerImpl",parentEl:"Element",log:"Log",container:"Element",video:"Video",trickVideo:"Video",hm:"HotkeyManager",playerContainer:"Element",frozenCanvas:"Canvas",fullscreenRx:{name:"Rx.Subject",arguments:[null]},spinner:"Element",autoDisposables:"Rx.CompositeDisposable",DO_NOTHING:{name:"Callback1",arguments:["DOMEvent"]},children:{name:"Array",arguments:["CloseableView"]}},{});var MPDXml=function(e,t,n){this.xml=e,this.defaultBaseURL=t,this.log=n};MPDXml=stjs.extend(MPDXml,null,[],function(e,t){t.xml=null,t.defaultBaseURL=null,t.log=null,t.getDashDescriptor=function(e){var t=this.xml.querySelector("Representation[id='"+e+"']"),n=this.getSegmentTemplateOrList(e),i=this.getSegmentStartTv(e),r=(i[0],new DashDescriptor);r.timecode="00:00:00:00",r.timescale=Integer.parseInt(n.getAttribute("timescale")),r.avgFrameDuration=this.getFrameDuration(e),r.segmentStartTv=i,r.baseTv=0,r.segmentStartFrame=this.getSegmentStartFrame(e),r.duration=this.getDurationTv(e),r.mimeType=this.getMimeType(t),r.codecs=t.getAttribute("codecs"),r.dynamic=this.isDynamic(),r.width=Integer.parseInt(t.getAttribute("width")),r.height=Integer.parseInt(t.getAttribute("height"));var s=this.mpdElement().getAttribute("availabilityStartTime");return null!=s?r.availabilityStartTime=s:r.availabilityStartTime=(new Date).toISOString(),r},t.getSegmentTemplate=function(e){var t=this.xml.querySelector("Representation[id='"+e+"']");return t.querySelector("SegmentTemplate")||t.parentElement.querySelector("SegmentTemplate")},t.getSegmentTemplateOrList=function(e){var t=this.xml.querySelector("Representation[id='"+e+"']");return t.querySelector("SegmentTemplate")||t.parentElement.querySelector("SegmentTemplate")||t.querySelector("SegmentList")},t.getBaseURL=function(){var e=this.xml.querySelector("BaseURL");return null!=e&&Utils.isNotBlank(e.innerHTML)?e.innerHTML:this.defaultBaseURL},t.getSegmentUrls=function(e){var t=this.xml.querySelector("Representation[id='"+e+"'] SegmentList");if(null!=t){var n=this.xml.querySelector("Representation[id='"+e+"'] SegmentList Initialization").getAttribute("sourceURL");n=Utils.toAbsoluteUri(this.getBaseURL(),n);for(var i=this.xml.querySelectorAll("Representation[id='"+e+"'] SegmentList SegmentURL"),r=new Array,s=0;s<i.length;s++){var o=i[s].getAttribute("media");r.push(Utils.toAbsoluteUri(this.getBaseURL(),o))}return new DashSegmentUrls(n,r)}var a=this.getSegmentTemplate(e),n=a.getAttribute("initialization").replace("$RepresentationID$",e),l=a.getAttribute("media").replace("$RepresentationID$",e),u=Integer.parseInt(a.getAttribute("startNumber")),c=this.getSegmentTemplateOrList(e).querySelectorAll("S"),r=new Array,d=0;if(c.length>0)for(var s=0;s<c.length;s++){var p=c[s].getAttribute("r"),h=Utils.isNotEmpty(p)?Integer.parseInt(p):0;d+=1+h}else{var f=this.getDurationTv(e),m=Long.parseLong(a.getAttribute("duration"));d=stjs.trunc(Math.ceil(f/m))}for(var g=this.getSegmentStartTv(e),s=0;s<d;s++){var v=g[s],o=this.getBaseURL()+this.format(s+u,v,l);r.push(o)}return new DashSegmentUrls(this.getBaseURL()+n,r)},t.getSegmentStartTv=function(e){var t=this.getSegmentTemplateOrList(e).querySelectorAll("S"),n=new Array;if(t.length>0){for(var i=0,r=0;r<t.length;r++){var s=Long.parseLong(t[r].getAttribute("d")),o=t[r].getAttribute("r"),a=Utils.isNotEmpty(o)?Integer.parseInt(o)+1:1,l=t[r].getAttribute("t");Utils.isNotEmpty(l)&&(i=Long.parseLong(l));for(var u=0;u<a;u++)n.push(i),i+=s}n.push(i)}else{for(var c=this.getDurationTv(e),d=this.getSegmentTemplate(e),p=Long.parseLong(d.getAttribute("duration")),a=stjs.trunc(Math.ceil(c/p)),i=0,r=0;r<a;r++)n.push(i),i+=p;n.push(c)}return n},t.getSegmentStartFrame=function(e){var t=this.getSegmentTemplateOrList(e).querySelectorAll("S");if(0==t.length)return null;for(var n=new Array,i=0,r=0;r<t.length;r++){var s=t[r].getAttribute("f");if(Utils.isEmpty(s)||"0".equals(s))return null;for(var o=Integer.parseInt(s),a=t[r].getAttribute("r"),l=Utils.isNotEmpty(a)?Integer.parseInt(a)+1:1,u=0;u<l;u++)n.push(i),i+=o}return n.push(i),n},t.getTimeScale=function(e){var t=this.getSegmentTemplateOrList(e);return null!=t?Integer.parseInt(t.getAttribute("timescale")):-1},t.getDurationTv=function(e){var t=this.getSegmentTemplateOrList(e).querySelectorAll("S");if(t.length>0){for(var n=0,i=0;i<t.length;i++){var r=Long.parseLong(t[i].getAttribute("d")),s=t[i].getAttribute("r"),o=Utils.isNotEmpty(s)?Integer.parseInt(s)+1:1;n+=r*o}return n}var a=this.xml.querySelector("MPD").getAttribute("mediaPresentationDuration"),l=Utils.parseXsDuration(a);return Utils.convertTv(l,1e3,this.getTimeScale(e))},t.isDynamic=function(){return"dynamic".equals(this.mpdElement().getAttribute("type"))},t.mpdElement=function(){return this.xml.querySelector("MPD")},t.getChannelConfiguration=function(e){var t=this.xml.querySelector("Representation[id='"+e+"']"),n=t.querySelector("AudioChannelConfiguration")||t.parentElement.querySelector("AudioChannelConfiguration");return Integer.parseInt(n.getAttribute("value"))},t.getFrameDuration=function(e){var t=this.xml.querySelector("Representation[id='"+e+"']"),n=t.getAttribute("frameRate")||t.parentElement.getAttribute("frameRate");if(Utils.isNotBlank(n)){var i;if(n.contains("/")){var r=n.split("/");i=Double.parseDouble(r[0])/Double.parseDouble(r[1])}else i=Double.parseDouble(n);return stjs.trunc(Math.round(this.getTimeScale(e)/i))}var s=this.getSegmentStartFrame(e);if(null!=s&&s.length>1){var o=this.getSegmentStartTv(e),a=o[1]-o[0];return stjs.trunc(a/s[1])}return 0},t.getAudioRepresentationIds=function(){return this.getRepresentationIds("audio")},t.getVideoRepresentationIds=function(){return this.getRepresentationIds("video")},t.getRepresentationIds=function(e){for(var t=[],n=this.xml.querySelectorAll("AdaptationSet[contentType='"+e+"'] Representation"),i=0;i<n.length;i++)t.push(n[i].id);n=this.xml.querySelectorAll("AdaptationSet[mimeType^='"+e+"'] Representation");for(var i=0;i<n.length;i++){var r=n[i].id;t.indexOf(r)==-1&&t.push(r)}n=this.xml.querySelectorAll("Representation[mimeType^='"+e+"']");for(var i=0;i<n.length;i++){var r=n[i].id;t.indexOf(r)==-1&&t.push(r)}return t},e.fromString=function(e,t,n){var i=new DOMParser,r=i.parseFromString(e,"text/xml");if(n.debug(r),null!=r.querySelector("parsererror")){var s=r.querySelector("parsererror div").textContent;throw new MPDXml.MPDParseException(s)}return new MPDXml(r,t,n)},t.getVgTotalDuration=function(e){var t=this.getVgTotalDurationSec();return null==t?null:stjs.trunc(t*e)},t.getVgTotalDurationSec=function(){var e=this.mpdElement().getAttribute("vgTotalDurationSec");return null==e?null:Double.parseDouble(e)},t.format=function(e,t,n){return n.replace("$Number$",e+"").replace("$Number%04d$",Utils.zeroPad(e,4)).replace("$Number%05d$",Utils.zeroPad(e,5)).replace("$Time$",t+"")},t.getDrmInfo=function(){var e=[];return Utils.arrayFrom(this.xml.querySelectorAll("Representation")).filter(stjs.bind(this,function(e,t,n){var i=this.getMimeType(e);return i.startsWith("video")||i.startsWith("audio")})).filter(function(e,t,n){return null!=e.parentElement.querySelector("ContentProtection[value='cenc']")}).forEach(stjs.bind(this,function(t,n,i){var r=t.parentElement,s=this.getMimeType(t)+'; codecs="'+t.getAttribute("codecs")+'"';Utils.arrayFrom(r.querySelectorAll("ContentProtection")).forEach(stjs.bind(this,function(n){var i=n.querySelector("pssh"),r=null!=i?i.textContent:null,o=n.querySelector("pro"),a=null!=o?o.textContent:null;switch(n.getAttribute("schemeIdUri")){case"urn:mpeg:dash:mp4protection:2011":break;case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":e.push(new DRMInfo(t.id,DRM.WIDEVINE,r,s));break;case"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":var l=null;null!=i?l=r:null!=o&&(l=this.wrapProInPssh(a)),e.push(new DRMInfo(t.id,DRM.PLAYREADY,l,s));break;default:this.log.warn("unsupported content protection for Representation.id="+t.id)}}))})),e},t.getMimeType=function(e){return(e.getAttribute("mimeType")||e.parentElement.getAttribute("mimeType")).toLowerCase()},t.wrapProInPssh=function(e){var t=window.atob(e),n=new ArrayBuffer(32),i=new DataView(n);i.setUint32(0,i.byteLength+t.length,!1),i.setUint32(4,1886614376,!1),i.setUint32(8,0,!1),i.setUint32(12,-1710952327,!1),i.setUint16(16,38976,!1),i.setUint16(18,17030,!1),i.setUint16(20,43922,!1),i.setUint16(22,58971,!1),i.setUint32(24,-527933547,!1),i.setUint32(28,t.length,!1);for(var r="",s=0;s<i.byteLength;s++)r+=String.fromCharCode(i.getUint8(s));return r+=t,window.btoa(r)},t.getLocation=function(){var e=this.xml.querySelector("Location");return null!=e?e.innerHTML:null},e.MPDParseException=function(e){Exception.call(this,e)},e.MPDParseException=stjs.extend(e.MPDParseException,Exception,[],null,{},{})},{xml:"Document",log:"Log"},{});var AbstractVideoElement=function(e,t,n,i){this.video=e,this.timeline=t,this.log=n,this.errorRx=i,this.animationRequestId=0,this.rangeFromFrame=-1,this.rangeToFrame=-1,this.loop=!1,this.quickSeek=!1,this.metadataLoaded=!1,this.initialTime=0,this.playRateBeforeQuickSeek=0,this.playRateCurrent=0,this.resetPlayRateOnSeek=!0,this.busyRx=new Rx.Subject,this.playBackwardsRx=new Rx.Subject,this.autoDisposables=new Rx.CompositeDisposable;var r=Rx.Observable.fromEvent(this.video,VideoElement.PLAYING),s=Rx.Observable.fromEvent(this.video,VideoElement.PAUSE),o=Rx.Observable.merge(r,s).map(stjs.bind(this,function(e){return this.isPlaying()}));if(this.playRx=Rx.Observable.merge(this.playBackwardsRx,o),this.volumeChangeRx=Rx.Observable.fromEvent(this.video,VideoElement.VOLUMECHANGE,stjs.bind(this,function(e){return this.getVolume()})),this.timeUpdateSubject=new Rx.Subject,this.progressSubject=new Rx.Subject,this.autoDisposable(Rx.Observable.fromEvent(this.video,VideoElement.TIMEUPDATE).map(function(t){return e.currentTime}).subscribe(stjs.bind(this,function(e){this.checkUnbufferedPlayback(),this.timeUpdateSubject.onNext(e)}))),this.autoDisposable(Rx.Observable.fromEvent(this.video,VideoElement.PROGRESS).subscribe(stjs.bind(this,function(e){this.progressSubject.onNext(this.getBuffered())}))),this.autoDisposable(Rx.Observable.interval(1e3).subscribe(stjs.bind(this,function(e){return this.checkUnbufferedPlayback()}))),t==Timeline.UNKNOWN){var a=GenericTimeline.newGenericTime(24e3,1001);this.timeline=new BoundedTimeline(a),Rx.Observable.fromEvent(this.video,VideoElement.LOADEDMETADATA).take(1).subscribe(stjs.bind(this,function(t){n.debug(VideoElement.LOADEDMETADATA),e.currentTime=this.initialTime,a.setDurationSec(e.duration),this.timeUpdateSubject.onNext(e.currentTime)}))}this.timeline.getUpdateRx().subscribe(stjs.bind(this,function(t){this.timeUpdateSubject.onNext(e.currentTime),null!=this.seekTarget&&this.timeToSeekByFrame(this.seekTarget.frame)!=this.seekTarget.time&&this.seekFrame(this.seekTarget.frame)})),this.autoDisposable(Rx.Observable.fromEvent(this.video,VideoElement.SEEKED).subscribe(stjs.bind(this,function(e){return this.seekTarget=null})))};AbstractVideoElement=stjs.extend(AbstractVideoElement,null,[VideoElement],function(e,t){e.progressLog=!1,e.allEventsLog=!1,t.log=null,t.errorRx=null,t.timeline=null,t.video=null,t.quickSeek=!1,t.wasPlayingBeforeQuickSeek=!1,t.metadataLoaded=!1,t.initialTime=0,t.loop=!1,t.pauseOnLoop=!1,t.rangeFromFrame=0,t.rangeToFrame=0,t.rangeFromTime=0,t.rangeToTime=0,t.animationRequestId=0,t.playRateCurrent=0,t.playRateBeforeQuickSeek=0,t.resetPlayRateOnSeek=!1,t.unbufferedPause=!1,t.playRx=null,t.playBackwardsRx=null,t.volumeChangeRx=null,t.timeUpdateSubject=null,t.progressSubject=null,t.busyRx=null,t.autoDisposables=null,t.__seekBackwardsInterval=null,t.seekTarget=null,t.backwardsPlaybackHackSeek=!1,e.HAVE_FUTURE_DATA=3,e.HAVE_ENOUGH_DATA=4,e.MIN_PREBUFFER_TIME=1,e.VIDEO_END_THRESHOLD=.5,e.SeekTarget=function(e,t){this.frame=e,this.time=t},e.SeekTarget=stjs.extend(e.SeekTarget,null,[],function(e,t){t.frame=0,t.time=0},{},{}),t.seek=function(e){},t.afterSeek=function(e){this.seekTarget=null,this.resetPlayRateOnSeek&&this.isPlaying()&&this.playRateCurrent!=this.direction(this.playRateCurrent)&&!this.backwardsPlaybackHackSeek&&this.playAtRate(this.direction(this.playRateCurrent)),this.checkUnbufferedPlayback()},t.playAtRate=function(e){if(this.stopBackwards(),e>16?e=16:e<-16&&(e=-16),e>0&&!this.isPlaying())if(this.hasRange()){var t=this.getTimeline().getFrameBySec(this.getTimeSec());(t>=this.rangeToFrame||this.getTimeSec()>this.getSeekableDuration()-AbstractVideoElement.VIDEO_END_THRESHOLD)&&this.seekFrame(this.rangeFromFrame)}else this.getTimeSec()>this.getSeekableDuration()-AbstractVideoElement.VIDEO_END_THRESHOLD&&this.seek(0);return this.playRateCurrent>0&&e<0&&this.isPlaying()&&this.pause(),0==e?(this.pause(),void(this.playRateCurrent=0)):(this.playRateCurrent=e,void this.implementationSpecificPlay())},t.implementationSpecificPlay=function(){},t.stopBackwards=function(){null!=this.__seekBackwardsInterval&&(clearInterval(this.__seekBackwardsInterval),this.playBackwardsRx.onNext(!1),this.__seekBackwardsInterval=null)},t.close=function(){this.playBackwardsRx.onCompleted(),this.stopBackwards(),0!=this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.autoDisposables.dispose()},t.pause=function(){},t.isPlaying=function(){},t.getFrame=function(){},t.getVolume=function(){},t.setVolume=function(e){},t.getTimeSec=function(){},t.getVideoWidth=function(){},t.getVideoHeight=function(){},t.getTimeline=function(){return this.timeline},t.getVideoShownRx=function(){},t.getTimeUpdateRx=function(){return this.timeUpdateSubject},t.getProgressRx=function(){return this.progressSubject},t.forwardSec=function(e){e=Math.max(e,1);var t=this.getTimeSec()+e,n=Math.min(t,this.getSeekableDuration());this.seek(n)},t.forward1=function(e){var t=Math.max(e,1),n=this.getFrame(),i=this.getTimeline().boundsFn(n+t);this.seekFrame(i)},t.backward1=function(e){var t=Math.max(e,1),n=this.getFrame(),i=n-t;i<0&&(i=0),this.seekFrame(i)},t.timeToSeekByFrame=function(e){if(e<1)return 0;var t=this.getTimeline().getSecByFrame(e),n=this.getTimeline().getSecByFrame(e+1),i=(n-t)/10;return t+i},t.seekFrame=function(e){var t=this.timeToSeekByFrame(e);this.seek(t),this.seekTarget=new AbstractVideoElement.SeekTarget(e,t)},t.backwardSec=function(e){e=Math.max(e,1);var t=this.getTimeSec()-e,n=Math.max(0,Math.min(t,this.getSeekableDuration()));this.seek(n)},t.getPlayRate=function(){return this.playRateCurrent},t.getTimeValue=function(){return this.getTimeline().getTvByFrame(this.getFrame())},t.playFaster=function(){var e=this.playRateCurrent;e>=1?this.playAtRate(2*e):e<1&&this.playAtRate(1)},t.playFasterBackwards=function(){var e=this.playRateCurrent;e<=-1?this.playAtRate(2*e):e>-1&&this.playAtRate(-1)},t.getDuration=function(){return this.getTimeline().getDurationSec()},t.getSeekableDuration=function(){return this.getTimeline().getSeekableDurationSec()},t.endQuickSeek=function(){this.log.debug("quick seek ended"),this.quickSeek=!1,this.wasPlayingBeforeQuickSeek&&this.playAtRate(this.resetPlayRateOnSeek?this.direction(this.playRateBeforeQuickSeek):this.playRateBeforeQuickSeek)},t.startQuickSeek=function(){this.wasPlayingBeforeQuickSeek=this.isPlaying(),this.playRateBeforeQuickSeek=this.playRateCurrent,this.quickSeek=!0,this.pause(),this.log.debug("quick seek started")},t.setInitialTime=function(e){this.initialTime=e},t.setLoop=function(e){},t.setPauseOnLoop=function(e){this.pauseOnLoop=e},t.hasRange=function(){return this.rangeFromFrame!=-1},t.inRange=function(e){return e>=this.rangeFromFrame&&e<=this.rangeToFrame},t.setRange=function(e,t){0!=this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.seekFrame(e),this.rangeFromFrame=e,this.rangeToFrame=t,this.rangeFromTime=this.getTimeline().getSecByFrame(e),this.rangeToTime=this.getTimeline().getSecByFrame(t+1),this.animationRequestId=window.requestAnimationFrame(stjs.bind(this,"timeRangeControl"))},t.timeRangeControl=function(){if(this.hasRange()){if(this.metadataLoaded){var e=this.getTimeSec();e>=this.rangeToTime&&(this.loop?(this.seekFrame(this.rangeFromFrame),this.pauseOnLoop&&this.pause()):(this.seekFrame(this.rangeToFrame),this.pause())),e<this.rangeFromTime&&(this.loop?(this.seekFrame(this.rangeToFrame),this.pauseOnLoop&&this.pause()):(this.seekFrame(this.rangeFromFrame),this.pause()))}this.animationRequestId=window.requestAnimationFrame(stjs.bind(this,"timeRangeControl"))}},t.cancelRange=function(){this.rangeFromFrame=-1,this.rangeToFrame=-1,this.loop=!1,0!=this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId)},t.addPrintEvents=function(e){if(null!=e){var t=stjs.bind(this,function(t){if(AbstractVideoElement.allEventsLog){var n="";"error"==t.type&&(n="("+VideoElement.mediaErrors[e.error.code]+") ");for(var i="",r=0;r<e.seekable.length;r++)i+=" "+e.seekable.start(r)+".."+e.seekable.end(r);for(var s="",r=0;r<e.buffered.length;r++)s+=" "+e.buffered.start(r)+".."+e.buffered.end(r);var o=e.getAttribute("type"),a=o+" "+t.type+" "+n+VideoElement.networkStates[e.networkState]+" "+VideoElement.readyStates[e.readyState]+" "+i+" "+s+"\n";null!=e.id&&(a=e.id+" "+a),this.log.debug(a)}});e.addEventListener("abort",t),e.addEventListener(VideoElement.CANPLAY,t),e.addEventListener("canplaythrough",t),e.addEventListener("durationchange",t),e.addEventListener("emptied",t),e.addEventListener("ended",t),e.addEventListener("error",t),e.addEventListener("loadeddata",t),e.addEventListener(VideoElement.LOADEDMETADATA,t),e.addEventListener("loadstart",t),e.addEventListener(VideoElement.PAUSE,t),e.addEventListener("play",t),e.addEventListener(VideoElement.PLAYING,t),AbstractVideoElement.progressLog&&e.addEventListener(VideoElement.PROGRESS,t),e.addEventListener("ratechange",t),e.addEventListener("readystatechange",t),e.addEventListener("seeked",t),e.addEventListener(VideoElement.SEEKING,t),e.addEventListener("stalled",t),e.addEventListener("suspend",t),e.addEventListener(VideoElement.TIMEUPDATE,t),e.addEventListener(VideoElement.VOLUMECHANGE,t),e.addEventListener("waiting",t)}},t.getPlayRx=function(){return this.playRx},t.getVolumeChangeRx=function(){return this.volumeChangeRx},t.getBusyRx=function(){return this.busyRx.distinctUntilChanged()},t.updateBusyStatus=function(e){e.ended?this.busyRx.onNext(!1):e.readyState<AbstractVideoElement.HAVE_FUTURE_DATA||!this.enoughBufferForPlayback(e)?Utils.isChrome&&this.chromeCanPlayTime0(e)?(this.log.debug("special case: chrome can play even if the beginning of the video is said to be unbuffered"),this.busyRx.onNext(!1)):this.busyRx.onNext(!0):this.busyRx.onNext(!1)},t.enoughBufferForPlayback=function(e){for(var t=e.currentTime,n=0;n<e.buffered.length;n++)if(t>=e.buffered.start(n)&&t<=e.buffered.end(n))return!0;return!1},t.isNotBuffered=function(){var e=this.video.currentTime;if(Utils.isChrome&&this.chromeCanPlayTime0(this.video))return!1;for(var t=0;t<this.video.buffered.length;t++){if(e>=this.video.buffered.start(t)&&e<=this.video.buffered.end(t))return!1;if(e<this.video.buffered.start(t))return!0}return!0},t.notInitialLoading=function(){return this.video.buffered.length>0},t.chromeCanPlayTime0=function(e){var t=.04;return e.readyState==AbstractVideoElement.HAVE_ENOUGH_DATA&&e.currentTime<t&&e.buffered.length>0&&e.buffered.start(0)<=t},t.setCrossOrigin=function(e){this.video.setAttribute("crossorigin",e)},t.autoDisposable=function(e){this.autoDisposables.add(e)},t.setResetPlayRateOnSeek=function(e){this.resetPlayRateOnSeek=e},t.getBuffered=function(){for(var e=new Array,t=0;t<this.video.buffered.length;t++)e.push(new TimeRange(this.video.buffered.start(t),this.video.buffered.end(t)));return e},t.direction=function(e){return e>=0?1:-1},t.allowUnbufferedPlayback=function(){return 0!=this.video.src.indexOf("blob:")||Utils.isMobileSafari},t.checkUnbufferedPlayback=function(){this.allowUnbufferedPlayback()||(!this.video.paused&&this.isNotBuffered()&&this.notInitialLoading()?this.pauseUnbufferedPlayback():this.unbufferedPause&&!this.isNotBuffered()&&(this.unbufferedPause=!1,this.video.play()))},t.pauseUnbufferedPlayback=function(){this.log.debug("temp pause. video is unbuffered"),this.video.pause(),this.unbufferedPause=!0}},{log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},timeline:"Timeline",video:"Video",playRx:{name:"Rx.Observable",arguments:[null]},playBackwardsRx:{name:"Rx.Subject",arguments:[null]},volumeChangeRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubject:{name:"Rx.Subject",arguments:[null]},progressSubject:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},busyRx:{name:"Rx.Subject",arguments:[null]},autoDisposables:"Rx.CompositeDisposable",__seekBackwardsInterval:"TimeoutHandler",seekTarget:"AbstractVideoElement.SeekTarget",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var SimpleTimeline=function(e,t,n,i){GenericTimeline.call(this,e,n,i),this.frameCount=t,this.seekableDurationSec=this.getDurationSec()};SimpleTimeline=stjs.extend(SimpleTimeline,GenericTimeline,[],function(e,t){t.frameCount=0,e.newEndlessTime=function(e){var t=stjs.trunc(e.getTvByFrame(1)-e.getTvByFrame(0)),n=Integer.MAX_VALUE;return SimpleTimeline.newSimpleTime(e.getTimeScale(),n,t,e.getTapeByFrame(0))},e.newSimpleTime=function(e,t,n,i){var r=TapeTimecode.timecodeFromString(i,stjs.trunc(Math.round(e/n)));
return new BoundedTimeline(new SimpleTimeline(e,t,n,r))},t.getDurationSec=function(){return this.frameCount*this.frameDurationTv/this.timeScale},t.getFrameCount=function(){return stjs.trunc(this.frameCount)}},{updateRx:{name:"Rx.Subject",arguments:["Timeline"]},timecode:"TapeTimecode",UNKNOWN:"Timeline"},{});var HLSTimeline=function(e,t,n){GenericTimeline.call(this,e,t,n)};HLSTimeline=stjs.extend(HLSTimeline,GenericTimeline,[],function(e,t){t.schedule=null,t.updateInterval=null,t.playlist=null,t.live=!1,e.liveUpdateHLSTime=function(e,t,n,i,r){var s=new HLSTimeline(24e3,1001,new TapeTimecode((!1),0,24));s.setDurationSec(n.getDurationSec()),s.live=!0;var o=2e3;return s.schedule=Rx.Observable.create(function(e){return function(){return clearInterval(s.updateInterval)}}),s.updateInterval=setInterval(function(){i.debug("liveUpdateHLSTime"),e.get(t).subscribe(function(e){var t,n=e.split("\n");try{t=HLSPlaylist.parseM3U8(n,i)}catch(o){return void r.onNext(new PlayerError(o.getMessage(),PlayerError.FATAL))}s.playlist=t,s.getDurationSec()!=t.getDurationSec()&&(i.debug("liveUpdateHLSTime new duration",t.getDurationSec()),s.setDurationSec(t.getDurationSec())),t.hasEndList()&&(clearInterval(s.updateInterval),s.updateInterval=null,s.live=!1)},function(e){r.onNext(new PlayerError("error loading hls playlist "+e.status,PlayerError.FATAL))})},o),s},t.isLive=function(){return this.live}},{schedule:{name:"Rx.Observable",arguments:[null]},updateInterval:"TimeoutHandler",playlist:"HLSPlaylist",updateRx:{name:"Rx.Subject",arguments:["Timeline"]},timecode:"TapeTimecode",UNKNOWN:"Timeline"},{});var MPDSegmentedAudioStream=function(e,t,n,i,r){SegmentedAudioStream.call(this),this.id=e,this.http=t,this.urls=n,this.desc=i,this.populateFromDesc(),this.timeline=new BoundedTimeline(new DashTimeline(this.sampleRate,i.avgFrameDuration,this.totalSamples,i.segmentStartFrame,i.segmentStartTv,r)),this.timeline.setStartUTCTimestamp(i.availabilityStartTime)};MPDSegmentedAudioStream=stjs.extend(MPDSegmentedAudioStream,SegmentedAudioStream,[],function(e,t){t.http=null,t.desc=null,t.urls=null,t.timeline=null,t.populateFromDesc=function(){this.sampleRate=this.desc.timescale,this.totalSamples=this.desc.duration,this.mimeType=this.desc.mimeType,this.codecs=this.desc.codecs},t.getDashDescriptor=function(){return this.desc},t.getDashInit=function(e,t){this.http.getArrayBuffer(this.urls.getInitUrl()).subscribe(e,t)},t.loadSegment=function(e,t,n){var i=this.http.getArrayBuffer(this.urls.getSegmentUrl(e)).retryWhen(RetryWithDelay.create(3,3e3)).subscribe(t,n),r=function(){return i.dispose()};return r},t.updateFrom=function(e){this.urls=e.urls,this.desc=e.desc,this.populateFromDesc(),this.updateRx.onNext(this)},t.silenceAppended=function(){return!1},t.getTimeline=function(){return this.timeline},t.getSegmentTimestampOffset=function(e){if(0!=this.desc.baseTv){var t=this.getSegmentStartTv(e+1)-this.getSegmentStartTv(e);return-(this.desc.baseTv+t)/this.desc.timescale}return 0}},{http:"Http",desc:"DashDescriptor",urls:"DashSegmentUrls",timeline:"Timeline",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var MPDSegmentedVideoStream=function(e,t,n,i,r,s){SegmentedVideoStream.call(this,t,n,i,-1),this.id=e,this.timeline=new BoundedTimeline(new DashTimeline(this.timescale,i.avgFrameDuration,r,i.segmentStartFrame,i.segmentStartTv,s)),this.timeline.setStartUTCTimestamp(i.availabilityStartTime)};MPDSegmentedVideoStream=stjs.extend(MPDSegmentedVideoStream,SegmentedVideoStream,[],function(e,t){t.timeline=null,t.movieMp4Box=null,t.getFrameCount=function(){return this.timeline.getFrameCount()},t.getDashInit=function(e,t){SegmentedVideoStream.prototype.getDashInit.call(this,stjs.bind(this,function(t){this.movieMp4Box=Mp4Loader.parseMoov(t),e(t)}),t)},t.loadSegment=function(e,t,n){return SegmentedVideoStream.prototype.loadSegment.call(this,e,stjs.bind(this,function(n){var i=Mp4Loader.parseMoof(n),r=MovDasher.parseTimePacketsInM4s(this.movieMp4Box,i);this.timeline.originalTimeline().updateTimePackets(e,r),t(n)}),n)},t.getTimeline=function(){return this.timeline},t.updateFrom=function(e){SegmentedVideoStream.prototype.updateFrom.call(this,e),this.timeline.originalTimeline().setDuration(this.desc.duration),this.timeline.setSeekableDurationSec(stjs.trunc(this.desc.duration/this.desc.timescale))},t.getSegmentTimestampOffset=function(e){if(0!=this.desc.baseTv){var t=this.getSegmentStartTv(e+1)-this.getSegmentStartTv(e);return-(this.desc.baseTv+t)/this.desc.timescale}return 0}},{timeline:{name:"BoundedTimeline",arguments:["DashTimeline"]},movieMp4Box:"MP4Box",http:"Http",urls:"DashSegmentUrls",desc:"DashDescriptor",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var FilmStripDrawer=function(e,t,n){this.http=e,this.log=t,this.errorRx=n};FilmStripDrawer=stjs.extend(FilmStripDrawer,null,[],function(e,t){t.frameExtractor=null,t.closed=!1,t.fd=null,t.queueRx=null,t.queueSubscription=null,t.http=null,t.log=null,t.errorRx=null,t.initWithUrl=function(e,t){this.frameExtractor=new FrameExtractor(e,this.http,this.log),this.frameExtractor.init(stjs.bind(this,function(e){this.initPipeline(),null!=t&&t(e)}))},t.initWithDashStream=function(e,t,n){this.frameExtractor=new DashStreamFrameExtractor(e,t,this.log,this.errorRx),this.frameExtractor.init(stjs.bind(this,function(e){this.initPipeline(),null!=n&&n(e)}))},t.initPipeline=function(){this.fd=new FrameDrawer(this.frameExtractor),this.queueRx=new Rx.Subject,this.queueSubscription=this.queueRx.concatMap(stjs.bind(this,"processRequest")).subscribe()},t.processRequest=function(e){return Rx.Observable.create(stjs.bind(this,function(t){if(e.cancelled)return t.onCompleted(),function(){};var n=Rx.Observable.from(e.frameNumbers).flatMap(stjs.bind(this,function(e){return this.frameExtractor.loadFrameData(e).flatMapObserver(function(t,n){return Rx.Observable.just(e)},stjs.bind(this,function(t){return this.log.error("can not load thumb frame "+e+". rendering black."),Rx.Observable.just(e)}),function(){return Rx.Observable.empty()})})),i=RxUtil.sequential(n,function(e){return e},e.frameNumbers),r=this.drawThumbs(e.canvas,i);return e.disposable=r["finally"](function(){return t.onCompleted()}).subscribe(function(t){return e.onDone()},function(t){return e.onError(t)}),function(){return e.disposable.dispose()}}))},t.getInfo=function(){return this.frameExtractor.getInfo()},t.drawThumbs=function(e,t){var n=this.getInfo(),i=n.width/n.height,r=e.height,s=stjs.trunc(r*i),o=e.getContext("2d",null);return t.concatMap(stjs.bind(this,function(e){return this.fd.decodeFrame(e)})).reduce(function(e,t,n,i){return null!=t?o.drawImage(t,n*s,0,s,r):o.fillRect(n*s,0,s,r),!0},!0)},t.drawFilmstrip=function(e,t,n,i,r,s,o){if(this.closed)return null;var a=this.frameNumbers(t,n,i);if(!r&&null!=this.frameExtractor.iframes){var l=this.alignToIframes(a);this.hasDuplicates(l)||(a=l)}var u=new FilmStripDrawer.DrawRequest(e,a,s,o);return this.queueRx.onNext(u),stjs.bind(u,"abort")},t.frameNumbers=function(e,t,n){for(var i=(t-e+1)/n,r=new Array(n),s=0;s<n;s++)r[s]=parseInt(Math.round(e+s*i));return r[n-1]=t,r[0]=e,r},t.alignToIframes=function(e){var t=new Array;t.push(e[0]);for(var n=this.frameExtractor.getInfo().framesTotal,i=1;i<e.length-1;i++){var r=e[i];if(r<n){var s=this.frameExtractor.getPrevIframe(r);t.push(Math.max(s,t[i-1]))}else t.push(r)}return t.push(e[e.length-1]),t},t.hasDuplicates=function(e){for(var t=1;t<e.length;t++)if(e[t-1]==e[t])return!0;return!1},t.close=function(){this.closed=!0,this.queueSubscription.dispose()},e.DrawRequest=function(e,t,n,i){this.canvas=e,this.frameNumbers=t,this.onDone=n,this.onError=i},e.DrawRequest=stjs.extend(e.DrawRequest,null,[],function(e,t){t.canvas=null,t.frameNumbers=null,t.onDone=null,t.onError=null,t.disposable=null,t.cancelled=!1,t.abort=function(){this.cancelled=!0,null!=this.disposable&&this.disposable.dispose()}},{canvas:"Canvas",frameNumbers:{name:"Array",arguments:[null]},onDone:"Callback0",onError:{name:"Callback1",arguments:["Object"]},disposable:"Rx.Disposable"},{})},{frameExtractor:"AbstractFrameExtractor",fd:"FrameDrawer",queueRx:{name:"Rx.Subject",arguments:["FilmStripDrawer.DrawRequest"]},queueSubscription:"Rx.Disposable",http:"Http",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]}},{});var SkinlessPlayerView=function(e,t){PlayerView.call(this,e,t),this.parentEl=e};SkinlessPlayerView=stjs.extend(SkinlessPlayerView,PlayerView,[],function(e,t){t.parentEl=null,t.enterFullscreen=function(e){},t.exitFullscreen=function(){},t.seekFrameAndCheckRange=function(e){},t.getCaptionsContainer=function(){return null},t.renderFatalError=function(e){},t.renderRange=function(e,t){},t.renderWhole=function(){},t.showAsAudioPlayer=function(){}},{parentEl:"Element",player:"PlayerImpl",parentEl:"Element",log:"Log",container:"Element",video:"Video",trickVideo:"Video",hm:"HotkeyManager",playerContainer:"Element",frozenCanvas:"Canvas",fullscreenRx:{name:"Rx.Subject",arguments:[null]},spinner:"Element",autoDisposables:"Rx.CompositeDisposable",DO_NOTHING:{name:"Callback1",arguments:["DOMEvent"]},children:{name:"Array",arguments:["CloseableView"]}},{});var DualVideoElement=function(e,t,n,i,r){AbstractVideoElement.call(this,e,t,i,r);var s=this;this.trickVideo=n,this.videoShownRx=new Rx.Subject,this.video.preload="auto",this.trickVideo.preload="auto";var o=Rx.Observable.fromEvent(this.trickVideo,VideoElement.PLAYING),a=Rx.Observable.fromEvent(this.trickVideo,VideoElement.PAUSE),l=Rx.Observable.merge(o,a).map(function(e){return s.isPlaying()});this.playRx=Rx.Observable.merge(AbstractVideoElement.prototype.getPlayRx.call(this),l),this.playRx=this.playRx.debounce(10),this.shownVideo=this.video,this.addPrintEvents(this.video),this.addPrintEvents(n),this.video.autobuffer=!0,this.video.webkitPreservesPitch=!1;var u=new MutableInt(2);this.video.addEventListener(VideoElement.LOADEDMETADATA,function(e){i.debug("videoAudio loadedmetadata autoseek="+s.initialTime),0!=s.initialTime&&(s.video.currentTime=s.initialTime),0==u.decrementAndGet()&&(s.metadataLoaded=!0)}),this.videoCanplayRx=Rx.Observable.fromEvent(e,VideoElement.CANPLAY,function(e){return!0}),this.autoDisposable(this.videoCanplayRx.subscribe(stjs.bind(this,function(e){i.debug("videoAudio canplay"),this.quickSeek||this.isTrickRate(this.playRateCurrent)||this.autoDisposable(Rx.Observable.timer(100).subscribe(stjs.bind(this,function(e){i.debug("videoAudio canplay showVideoAudio"),s.showVideoAudio(),s.video.currentTime>=s.timeline.getSeekableDurationSec()&&i.debug("lastframe"),this.videoShownRx.onNext(this.video)})))}))),this.timeUpdateSubjectQTP=new Rx.Subject;var c=Rx.Observable.fromEvent(s.trickVideo,VideoElement.TIMEUPDATE).map(function(e){return s.trickVideo.currentTime});this.autoDisposable(AbstractVideoElement.prototype.getTimeUpdateRx.call(this).merge(c).subscribe(stjs.bind(this,function(e){return this.timeUpdateSubjectQTP.onNext(e)}))),this.trickVideoCanplayRx=Rx.Observable.fromEvent(n,VideoElement.CANPLAY,function(e){return!0}),this.autoDisposable(this.trickVideoCanplayRx.subscribe(function(e){i.debug("trickVideo canplay"),s.isBuffered(s.video,s.trickVideo.currentTime)?i.debug("current time "+s.trickVideo.currentTime+" is already buffered in videoAudio. do not show trickVideo"):(i.debug("current time "+s.trickVideo.currentTime+" is NOT buffered in videoAudio"),s.showTrickVideo())})),this.trickVideo.addEventListener(VideoElement.LOADEDMETADATA,function(e){i.debug("trickVideo loadedmetadata autoseek="+s.initialTime),0!=s.initialTime&&(s.trickVideo.currentTime=s.initialTime),0==u.decrementAndGet()&&(s.metadataLoaded=!0)}),this.timeUpdateSubjectQTP.subscribe(function(e){return s.onTimeUpdate(e)}),this.busyCheckerInterval=setInterval(stjs.bind(this,function(){var t=this.isTrickMode()&&this.isTrickRate(this.playRateCurrent)?n:e;this.updateBusyStatus(t)}),500),this.autoDisposable(Rx.Observable.fromEvent(this.trickVideo,VideoElement.SEEKED).subscribe(stjs.bind(this,function(e){return this.seekTarget=null})))};DualVideoElement=stjs.extend(DualVideoElement,AbstractVideoElement,[],function(e,t){t.videoShownRx=null,t.shownVideo=null,t.trickVideo=null,t.trickVideoCanplayRx=null,t.videoCanplayRx=null,t.timeUpdateSubjectQTP=null,t.playRx=null,t.busyCheckerInterval=null,t.visualDebugEnabled=!1,t.visualDebugTrick=null,t.onTimeUpdate=function(e){e<0&&this.pause(),e>this.timeline.getSeekableDurationSec()&&(this.log.debug("time "+e+" > SeekableDuration "+this.timeline.getSeekableDurationSec()+". autoseeking."),this.pause(),this.seek(this.lastSeekableTime()))},t.lastSeekableTime=function(){var e=Math.max(this.timeline.getSeekableDurationSec(),0),t=this.timeline.getFrameBySec(e);return this.timeline.getSecByFrame(t)},t.startQuickSeek=function(){AbstractVideoElement.prototype.startQuickSeek.call(this),this.switchToTrickVideo(null)},t.endQuickSeek=function(){this.isTrickRate(this.playRateBeforeQuickSeek)||(this.video.currentTime=this.trickVideo.currentTime),AbstractVideoElement.prototype.endQuickSeek.call(this)},t.seek=function(e){if(e=Math.min(e+42e-5,this.timeline.getSeekableDurationSec()),!this.metadataLoaded)return void(this.initialTime=e);var t=this.video;this.log.debug("seek. quickSeek="+this.quickSeek+" playRateCurrent="+this.playRateCurrent),this.quickSeek||this.isTrickRate(this.playRateCurrent)?(this.log.debug("seeking trickVideo only"),t=this.trickVideo):this.log.debug("seeking both video and trickVideo");try{t.currentTime=Math.min(e,this.lastSeekableTime());var n=this.getTimeline().getFrameBySec(e),i=this.timeToSeekByFrame(n);this.trickVideo.currentTime=Math.min(i,this.lastSeekableTime())}catch(r){var s=t.buffered.length>0?t.buffered.end(0):-1,o=t.seekable.length>0?t.seekable.end(0):-1;this.log.debug(t.src,s,o),this.errorRx.onNext(new PlayerError("error setting currentTime",PlayerError.NONFATAL,r))}this.afterSeek(e)},t.implementationSpecificPlay=function(){var e=this.isTrickRate(this.playRateCurrent);this.shownVideo.pause();var t=Math.abs(this.playRateCurrent);e&&!this.isTrickMode()?(this.trickVideo.currentTime=this.video.currentTime,this.switchToTrickVideo(stjs.bind(this,function(){this.trickVideo.playbackRate=t,this.doPlay()}))):!e&&this.isTrickMode()?(this.video.currentTime=this.trickVideo.currentTime,this.switchToVideo(stjs.bind(this,function(){this.video.playbackRate=t,this.doPlay()}))):(this.shownVideo.playbackRate=t,this.doPlay())},t.switchToVideo=function(e){var t=this;this.canPlay().subscribe(function(n){t.showVideoAudio(),null!=e&&e()})},t.canPlay=function(){return this.video.readyState>=AbstractVideoElement.HAVE_ENOUGH_DATA?Rx.Observable.just(!0):this.videoCanplayRx.take(1)},t.canPlayTrickVideo=function(){return this.trickVideo.readyState>=AbstractVideoElement.HAVE_FUTURE_DATA?Rx.Observable.just(!0):this.trickVideoCanplayRx.take(1)},t.switchToTrickVideo=function(e){var t=this;this.canPlayTrickVideo().subscribe(function(n){t.showTrickVideo(),null!=e&&e()})},t.doPlay=function(){var e=this.playRateCurrent,t=500;e<0?(null!=this.__seekBackwardsInterval&&clearInterval(this.__seekBackwardsInterval),this.__seekBackwardsInterval=setInterval(stjs.bind(this,function(){this.isTrickRate(e)&&this.showTrickVideo();try{this.backwardsPlaybackHackSeek=!0,this.seek(this.getTimeSec()+e*t/1e3)}finally{this.backwardsPlaybackHackSeek=!1}this.playBackwardsRx.onNext(!0),this.getFrame()<=0&&(this.shownVideo.currentTime=0,this.pause())}),t)):!this.isTrickRate(e)&&this.isNotBuffered()&&this.notInitialLoading()&&!this.allowUnbufferedPlayback()?this.pauseUnbufferedPlayback():(setTimeout(stjs.bind(this.shownVideo,"play"),0),this.shownVideo.play())},t.close=function(){AbstractVideoElement.prototype.close.call(this),this.video.pause(),this.trickVideo.pause(),clearInterval(this.busyCheckerInterval),this.video=null,this.trickVideo=null},t.pause=function(){if(this.log.debug("pause"),this.metadataLoaded&&this.isPlaying()&&(this.stopBackwards(),this.video.pause(),this.video.playbackRate=1,this.trickVideo.pause(),this.trickVideo.playbackRate=1,this.unbufferedPause=!1,this.playRateCurrent=0,!this.quickSeek)){var e=this.getTimeSec(),t=this.getTimeline().getFrameBySec(e),n=this.getTimeline().getSecByFrame(t),i=e-n;i>.2?(this.log.debug("seeking to the next frame on pause"),this.seekFrame(t+1)):this.seekFrame(t),this.switchToVideo(null)}},t.isPlaying=function(){return!this.shownVideo.paused||null!=this.__seekBackwardsInterval||this.unbufferedPause},t.getFrame=function(){var e=this.isTrickMode()?this.trickVideo:this.video;return this.getTimeline().getFrameBySec(e.currentTime)},t.isBuffered=function(e,t){for(var n=0;n<e.buffered.length;n++)if(t>=e.buffered.start(n)&&t<=e.buffered.end(n))return!0;return!1},t.showTrickVideo=function(){this.trickVideo.classList.remove(VideoElement.VG_PLAYER_OPACITY_0),this.video.classList.add(VideoElement.VG_PLAYER_OPACITY_0),this.shownVideo=this.trickVideo,this.isTrickRate(this.playRateCurrent)||this.quickSeek||this.busyRx.onNext(!0),this.visualDebugEnabled&&(this.visualDebugTrick.style.display="")},t.showVideoAudio=function(){this.video.classList.remove(VideoElement.VG_PLAYER_OPACITY_0),this.trickVideo.classList.add(VideoElement.VG_PLAYER_OPACITY_0),this.shownVideo=this.video,this.busyRx.onNext(!1),this.visualDebugEnabled&&(this.visualDebugTrick.style.display="none")},t.getVolume=function(){return this.video.volume},t.setVolume=function(e){this.video.volume=Math.min(1,Math.max(0,e))},t.getTimeSec=function(){var e=this.isTrickMode()?this.trickVideo:this.video;return e.currentTime},t.isTrickRate=function(e){return Math.abs(e)>2},t.isTrickMode=function(){return this.shownVideo==this.trickVideo||this.quickSeek},t.setLoop=function(e){this.video.loop=e,this.trickVideo.loop=e,this.loop=e},t.getVideoWidth=function(){var e=this.isTrickMode()?this.trickVideo:this.video;return e.videoWidth},t.getVideoHeight=function(){var e=this.isTrickMode()?this.trickVideo:this.video;return e.videoHeight},t.getVideoShownRx=function(){return this.videoShownRx},t.getTimeUpdateRx=function(){return this.timeUpdateSubjectQTP},t.getPlayRx=function(){return this.playRx},t.visualDebug=function(){this.video.classList.add("vg_player_debug_opacity_05"),this.trickVideo.classList.add("vg_player_debug_opacity_05"),this.visualDebugTrick=window.document.createElement("div"),this.visualDebugTrick.classList.add("vg_player_debug_trick"),this.visualDebugTrick.innerHTML="trick",this.visualDebugTrick.style.display=this.isTrickMode()?"":"none",this.video.parentElement.insertBefore(this.visualDebugTrick,this.video),this.visualDebugEnabled=!0},t.checkUnbufferedPlayback=function(){this.playRateCurrent>0&&!this.isTrickRate(this.playRateCurrent)?AbstractVideoElement.prototype.checkUnbufferedPlayback.call(this):this.unbufferedPause=!1}},{videoShownRx:{name:"Rx.Subject",arguments:["Video"]},shownVideo:"Video",trickVideo:"Video",trickVideoCanplayRx:{name:"Rx.Observable",arguments:[null]},videoCanplayRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubjectQTP:{name:"Rx.Subject",arguments:[null]},playRx:{name:"Rx.Observable",arguments:[null]},busyCheckerInterval:"TimeoutHandler",visualDebugTrick:"Element",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},timeline:"Timeline",video:"Video",playRx:{name:"Rx.Observable",arguments:[null]},playBackwardsRx:{name:"Rx.Subject",arguments:[null]},volumeChangeRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubject:{name:"Rx.Subject",arguments:[null]},progressSubject:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},busyRx:{name:"Rx.Subject",arguments:[null]},autoDisposables:"Rx.CompositeDisposable",__seekBackwardsInterval:"TimeoutHandler",seekTarget:"AbstractVideoElement.SeekTarget",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var SimpleVideoElement=function(e,t,n,i){AbstractVideoElement.call(this,e,t,n,i),this.video.addEventListener(VideoElement.LOADEDMETADATA,stjs.bind(this,function(t){n.debug("videoAudio loadedmetadata autoseek="+this.initialTime),0!=this.initialTime&&(e.currentTime=Math.min(this.initialTime,e.duration)),this.metadataLoaded=!0})),this.videoCanplayRx=Rx.Observable.fromEvent(e,VideoElement.CANPLAY,function(e){return!0}),this.videoShownRx=new Rx.Subject,this.videoCanplayRx.subscribe(stjs.bind(this,function(t){n.debug("videoAudio canplay"),this.busyRx.onNext(!1),this.autoDisposable(Rx.Observable.timer(100).subscribe(stjs.bind(this,function(t){n.debug("videoAudio canplay showVideoAudio"),e.currentTime==e.duration&&n.debug("lastframe"),this.videoShownRx.onNext(this.video)})))})),this.busyCheckerInterval=setInterval(stjs.bind(this,function(){this.updateBusyStatus(e)}),500)};SimpleVideoElement=stjs.extend(SimpleVideoElement,AbstractVideoElement,[],function(e,t){t.videoCanplayRx=null,t.videoShownRx=null,t.__seekBackwardsInterval=null,t.busyCheckerInterval=null,t.seek=function(e){if(e+=42e-5,!this.metadataLoaded)return void(this.initialTime=e);e=Math.min(e,this.timeline.getSeekableDurationSec());try{this.video.currentTime=Math.min(e,this.video.duration)}catch(t){var n=this.video.buffered.length>0?this.video.buffered.end(0):-1,i=this.video.seekable.length>0?this.video.seekable.end(0):-1;this.log.debug(this.video.src,n,i),this.errorRx.onNext(new PlayerError("error setting currentTime",PlayerError.NONFATAL,t))}this.afterSeek(e)},t.implementationSpecificPlay=function(){var e=this.playRateCurrent;this.video.playbackRate=Math.abs(e);var t=500;e<0?(null!=this.__seekBackwardsInterval&&clearInterval(this.__seekBackwardsInterval),this.__seekBackwardsInterval=setInterval(stjs.bind(this,function(){try{this.backwardsPlaybackHackSeek=!0,this.seek(this.getTimeSec()+e*t/1e3)}finally{this.backwardsPlaybackHackSeek=!1}this.playBackwardsRx.onNext(!0),this.getFrame()<=0&&(this.video.currentTime=0,this.pause())}),t)):this.isNotBuffered()&&this.notInitialLoading()&&!this.allowUnbufferedPlayback()?this.pauseUnbufferedPlayback():(setTimeout(stjs.bind(this.video,"play"),0),this.video.play())},t.close=function(){AbstractVideoElement.prototype.close.call(this),this.video.pause(),clearInterval(this.busyCheckerInterval),this.video=null},t.pause=function(){if(this.metadataLoaded&&this.isPlaying()&&(this.stopBackwards(),this.video.pause(),this.video.playbackRate=1,this.playRateCurrent=0,this.unbufferedPause=!1,!this.quickSeek)){var e=this.getTimeSec(),t=this.getTimeline().getFrameBySec(e),n=this.getTimeline().getSecByFrame(t),i=e-n;i>.2?(this.log.debug("seeking to the next frame on pause"),this.seekFrame(t+1)):this.seekFrame(t)}},t.isPlaying=function(){return!this.video.paused||null!=this.__seekBackwardsInterval||this.unbufferedPause},t.getFrame=function(){var e=this.video;return this.getTimeline().getFrameBySec(e.currentTime)},t.getVolume=function(){return this.video.volume},t.setVolume=function(e){this.video.volume=Math.min(1,Math.max(0,e))},t.getTimeSec=function(){return this.video.currentTime},t.getVideoWidth=function(){var e=this.video;return e.videoWidth},t.getVideoHeight=function(){var e=this.video;return e.videoHeight},t.getTimeline=function(){return this.timeline},t.getVideoShownRx=function(){return this.videoShownRx},t.setLoop=function(e){this.video.loop=e,this.loop=e}},{videoCanplayRx:{name:"Rx.Observable",arguments:[null]},videoShownRx:{name:"Rx.Subject",arguments:["Video"]},__seekBackwardsInterval:"TimeoutHandler",busyCheckerInterval:"TimeoutHandler",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},timeline:"Timeline",video:"Video",playRx:{name:"Rx.Observable",arguments:[null]},playBackwardsRx:{name:"Rx.Subject",arguments:[null]},volumeChangeRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubject:{name:"Rx.Subject",arguments:[null]},progressSubject:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},busyRx:{name:"Rx.Subject",arguments:[null]},autoDisposables:"Rx.CompositeDisposable",__seekBackwardsInterval:"TimeoutHandler",seekTarget:"AbstractVideoElement.SeekTarget",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var RangeVideoElement=function(e){this.e=e};RangeVideoElement=stjs.extend(RangeVideoElement,null,[VideoElement],function(e,t){t.e=null,t.fromSec=0,t.toSec=0,t.fromFrame=0,t.toFrame=0,t.rangeDurationSec=0,t.rangeTimeline=null,t.seek=function(e){this.e.seek(this.fromSec+e)},t.getBusyRx=function(){return this.e.getBusyRx()},t.playAtRate=function(e){this.e.playAtRate(e)},t.close=function(){this.e.close()},t.pause=function(){this.e.pause()},t.isPlaying=function(){return this.e.isPlaying()},t.getFrame=function(){return this.e.getFrame()-this.fromFrame},t.getVolume=function(){return this.e.getVolume()},t.setVolume=function(e){this.e.setVolume(e)},t.getTimeSec=function(){return this.e.getTimeSec()-this.fromSec},t.getVideoWidth=function(){return this.e.getVideoWidth()},t.getVideoHeight=function(){return this.e.getVideoHeight()},t.getTimeline=function(){return this.rangeTimeline},t.getVideoShownRx=function(){return this.e.getVideoShownRx()},t.getTimeUpdateRx=function(){return this.e.getTimeUpdateRx().map(stjs.bind(this,function(e){return e-this.fromSec}))},t.getProgressRx=function(){return this.e.getProgressRx()},t.forwardSec=function(e){this.e.forwardSec(e)},t.forward1=function(e){this.e.forward1(e)},t.backward1=function(e){this.e.backward1(e)},t.seekFrame=function(e){this.e.seekFrame(this.fromFrame+e)},t.backwardSec=function(e){this.e.backwardSec(e)},t.getPlayRate=function(){return this.e.getPlayRate()},t.getTimeValue=function(){return this.getTimeline().getTvByFrame(this.getFrame())},t.playFaster=function(){this.e.playFaster()},t.playFasterBackwards=function(){this.e.playFasterBackwards()},t.getDuration=function(){return this.rangeDurationSec},t.getSeekableDuration=function(){return this.rangeDurationSec},t.endQuickSeek=function(){this.e.endQuickSeek()},t.startQuickSeek=function(){this.e.startQuickSeek()},t.setInitialTime=function(e){this.e.setInitialTime(this.fromSec+e)},t.setLoop=function(e){this.e.setLoop(e)},t.setPauseOnLoop=function(e){this.e.setPauseOnLoop(e)},t.hasRange=function(){return this.e.hasRange()},t.inRange=function(e){var t=this.toFrame-this.fromFrame;return e>=0&&e<t},t.setRange=function(e,t){this.fromFrame=e,this.toFrame=t,this.fromSec=this.e.getTimeline().getSecByFrame(e),this.toSec=this.e.getTimeline().getSecByFrame(t),this.rangeDurationSec=this.e.getTimeline().getSecByFrame(t-e+1);var n=this.e.getTimeline(),i=this.hackFrameDurationTv(n),r=n.getTapeByFrame(e),s=SimpleTimeline.newSimpleTime(n.getTimeScale(),t-e+1,i,r);this.rangeTimeline=s,this.e.setRange(e,t)},t.hackFrameDurationTv=function(e){var t=e.getTvByFrame(0),n=e.getTvByFrame(1),i=stjs.trunc(n-t);return i},t.cancelRange=function(){this.e.cancelRange()},t.getPlayRx=function(){return this.e.getPlayRx()},t.getVolumeChangeRx=function(){return this.e.getVolumeChangeRx()},t.setCrossOrigin=function(e){this.e.setCrossOrigin(e)},t.setResetPlayRateOnSeek=function(e){this.e.setResetPlayRateOnSeek(e)},t.getBuffered=function(){return this.e.getBuffered()}},{e:"VideoElement",rangeTimeline:"Timeline",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var TimelineUtil=function(){};TimelineUtil=stjs.extend(TimelineUtil,null,[],function(e,t){e.defaultTimeline=function(){return SimpleTimeline.newSimpleTime(24e3,Integer.MAX_VALUE,1001,"00:00:00:00")}},{},{});var ProxyLoader=function(e,t){this.http=e,this.log=t};ProxyLoader=stjs.extend(ProxyLoader,null,[],function(e,t){t.http=null,t.log=null,e.AUDIOTYPE_WAVS="wavs",e.AUDIOTYPE_MP3="mp3",e.AUDIOTYPE_MUXED="muxed",t.loadAudioRx=function(e,t){return this.http.getJson(e+"/"+t+"/audio.js",AudioInfo).flatMapObserver(stjs.bind(this,function(n,i){var r;if(ProxyLoader.AUDIOTYPE_WAVS.equals(n.audioType))r=new Mp3MixSegmentedAudioStream(this.http,e,t,n);else{if(!ProxyLoader.AUDIOTYPE_MP3.equals(n.audioType))return Rx.Observable["throw"]("unknown audioType "+n.audioType);var s=new HttpDataSrc(this.http,e+"/"+t+"/audio.mp3");r=new Mp3SegmentedAudioStream(t,n.sampleRate,n.totalSamples,s)}return(Utils.isFirefox||Utils.isSafari)&&(r=new M4SMp3SegmentedStream(r)),r.setAudioInfo(n),Rx.Observable.just(r)}),function(e){return 404==e.status?Rx.Observable.empty():Rx.Observable["throw"](e)},function(){return Rx.Observable.empty()})},t.loadAudio=function(e,t,n){this.loadAudioRx(e,t).subscribe(function(e){return n(null,e)},function(e){return n(e,null)})},t.loadProxyRx=function(e,t){var n=Rx.Observable.create(stjs.bind(this,function(n){this.loadProxy(e,t,function(e,t){null==e?(n.onNext(t),n.onCompleted()):n.onError(e)})}));return n},t.loadProxies=function(e,t){var n={};return Rx.Observable.from(t).flatMap(stjs.bind(this,function(t){return this.loadProxyRx(e,t)})).reduce(function(e,t){return e[t.proxyId]=t,e},n)},e.DASH_FULLRES="stream-0",e.DASH_LOWRES="stream-1",e.USE_JS_DASHIFY=!0,t.loadProxy=function(e,t,n){this.log.debug("loadProxy "+e,t);var i={},r=this.dashifyFirstTrack(e+"/"+t+"/video.mov").doOnNext(function(e){return i.video=e}),s=this.dashifyFirstTrack(e+"/"+t+"/thumbshq.mov").doOnNext(function(e){return i.thumbshq=e}),o=this.loadAudioRx(e,t).doOnNext(function(e){return i.audio=e}),a=Rx.Observable.merge(r,s),l=function(){var e=new Proxy;e.proxyId=t,e.video=i.video,e.thumbshq=i.thumbshq;var r=i.audio;null!=r&&(e.audio=r,e.audioInfo=r.audioInfo),n(null,e)};a.subscribe(stjs.bind(this,function(e){this.log.debug("loaded",e)}),stjs.bind(this,function(e){o.subscribe(stjs.bind(this,function(e){this.log.debug("Got audio")}),function(e){n(e,null)},function(){l()})}),stjs.bind(this,function(){o.subscribe(stjs.bind(this,function(e){this.log.debug("Got audio")}),function(e){l()},function(){l()})}))},t.dashify=function(e,t){this.dashifyFirstTrack(e).subscribe(function(e){return t(null,e)},function(e){return t(e,null)})},t.createDashStreamFromMp4=function(e,t,n){return Rx.Observable.create(stjs.bind(this,function(i){var r=MovDasher.dashify(t,n,this.log),s=new DashDescriptor;if(s.dynamic=!1,s.timescale=r.timescale,s.codecs=r.codecs,s.mimeType=r.mimeType,s.duration=r.duration,s.segmentStartTv=r.segmentStartTv,s.channelConfig=r.channelConfig,r.startTimecodeOffset==-1){s.timecode="00:00:00:00";var o=new DashifiedMp4SegmentedVideoStream(r.moovbuf,r.segments,e,s,r.sampleDuration);i.onNext(o),i.onCompleted()}else e.fetch(r.startTimecodeOffset,r.startTimecodeOffset+4,function(t){var n=new DataView(t),o=stjs.trunc(n.getUint32(0,!1)),a=stjs.trunc(Math.round(s.timescale/r.sampleDuration));s.timecode=new TapeTimecode(r.dropFrame,o,a).getTimecodeAtFrame(0);var l=new DashifiedMp4SegmentedVideoStream(r.moovbuf,r.segments,e,s,r.sampleDuration);i.onNext(l),i.onCompleted()},function(t){i.onError(new PlayerError("error loading start time code",PlayerError.FATAL,t,e))})}))},t.dashifyMp4=function(e){return Rx.Observable.create(stjs.bind(this,function(t){var n=new Mp4Streams;n.audio=[];var i=new HttpDataSrc(this.http,e);Mp4Loader.loadMp4(i,stjs.bind(this,function(r){var s=Rx.Observable.empty(),o=r.getInfo().videoTracks;if(0!=o.length){if(MovDasher.hasBFrames(r,o[0].id))return void t.onError(new ProxyLoader.BFramesException);s=Rx.Observable.merge(s,Rx.Observable.create(stjs.bind(this,function(e){this.createDashStreamFromMp4(i,r,o[0].id).subscribe(function(t){n.video=t,MovDasher.parseTimePackets(r,i,function(i){n.timeline=new BoundedTimeline(new MP4Timeline(i)),e.onNext(t),e.onCompleted()},stjs.bind(e,"onError"))})})))}for(var a=r.getInfo().audioTracks,l=0;l<a.length;l++){var u=this.createDashStreamFromMp4(i,r,a[l].id).map(function(t){return ProxyLoader.createAudioDashStream(t,e)}).doOnNext(stjs.bind(n.audio,"push"));s=Rx.Observable.merge(s,u)}s.doOnCompleted(function(){t.onNext(n),t.onCompleted()}).doOnError(stjs.bind(t,"onError")).subscribe()}),function(n){t.onError(new PlayerError("error converting mov",PlayerError.FATAL,n,e))})}))},t.dashifyFirstTrack=function(e){return Rx.Observable.create(stjs.bind(this,function(t){
var n=new HttpDataSrc(this.http,e);Mp4Loader.loadMp4(n,stjs.bind(this,function(e){this.createDashStreamFromMp4(n,e,1).subscribe(function(e){t.onNext(e),t.onCompleted()},stjs.bind(t,"onError"))}),function(n){t.onError(new PlayerError("error converting mov",PlayerError.FATAL,n,e))})}))},e.createAudioDashStream=function(e,t){var n=new M4ASegmentedStream(e),i=new AudioInfo;return i.audioType=ProxyLoader.AUDIOTYPE_MUXED,i.channelLabels=AudioInfo.AAC_CHANNEL_CONFIGS[n.getChannelConfig()],i.channelCount=i.channelLabels.length,i.sampleRate=n.sampleRate,i.totalSamples=n.totalSamples,i.waveformPreviews=[],n.audioInfo=i,n.proxyId=t,n},t.loadAudioFromM4a=function(e){return this.dashifyFirstTrack(e).map(function(t){return ProxyLoader.createAudioDashStream(t,e)})},t.mpdFromUrl=function(e){var t=this.xmlWithDynamicUpdates(e);return this.mpdFromXml(t)},t.mpdFromXml=function(e){var t=this.streamsFromXml(e);return this.mpdFromStreams(t)},t.mpdFromStreams=function(e){var t=new MPDStreams,n=RxUtil.doOnFirst(e,function(e){t.video=e.video,t.thumbshq=e.thumbshq,t.thumbs=e.thumbs,t.audio=e.audio}).doOnNext(function(e){null!=t.video&&t.video.updateFrom(e.video),null!=t.thumbshq&&t.thumbshq.updateFrom(e.thumbshq),null!=t.thumbs&&t.thumbs.updateFrom(e.thumbs),null!=t.audio&&t.audio.updateFrom(e.audio)});return RxUtil.firstOutIgnoreNext(n)},t.xmlWithDynamicUpdates=function(e){var t=e.substring(0,e.lastIndexOf("/")+1),n=[e],i=Rx.Observable.timer(0,1e3).concatMap(stjs.bind(this,function(e){return this.http.getWithUrlFunc(function(){return n[0]+"?time="+Utils.currentTimeMillis()})})).flatMap(stjs.bind(this,function(e){try{return Rx.Observable.just(MPDXml.fromString(e,t,this.log))}catch(n){return Rx.Observable["throw"](new PlayerError("can not parse MPD",PlayerError.FATAL,n))}})).doOnNext(function(e){var t=e.getLocation();null!=t&&(n[0]=t)}).retryWhen(RetryWithDelay.create(5,1e3)).flatMapObserver(function(e,t){return Rx.Observable.just(e)},function(e){return Rx.Observable["throw"](new PlayerError("can not load mpd",PlayerError.FATAL,e))},Rx.Observable.empty);return RxUtil.takeWhileWithFinalValue(i,function(e){return e.isDynamic()})},t.loadAudioFromMpd=function(e){var t=this.mpdFromUrl(e).flatMap(function(t){return null==t.audio?Rx.Observable["throw"]("no audio representations found in "+e):Rx.Observable.just(t.audio)});return t},t.streamsFromXml=function(e){return e.map(stjs.bind(this,function(e){var t=e.getVideoRepresentationIds(),n=e.getAudioRepresentationIds(),i=t.filter(function(t,n,i){return 80==e.getDashDescriptor(t).height}),r=t.filter(function(t,n,i){return 512==e.getDashDescriptor(t).width}),s=t.sort(function(t,n){return e.getDashDescriptor(n).height-e.getDashDescriptor(t).height})[0],o=r.length>0?r[0]:null,a=i.length>0?i[0]:null,l=n.length>0?n[0]:null,u=this.audioStreamFromXml(e,l),c=this.videoStreamFromXml(e,s),d=this.videoStreamFromXml(e,o),p=this.videoStreamFromXml(e,a),h=new MPDStreams;h.video=c,h.thumbshq=d,h.thumbs=p,h.audio=u;var f=[s,o,a,l];return h.drmInfo=e.getDrmInfo().filter(function(e,t,n){return f.indexOf(e.streamId)!=-1}),h}))},t.videoStreamFromXml=function(e,t){if(null==t)return null;var n=e.getSegmentUrls(t),i=e.getDashDescriptor(t),r=e.getVgTotalDuration(i.timescale);return null==r&&(r=i.duration),new MPDSegmentedVideoStream(t,this.http,n,i,r,this.log)},t.audioStreamFromXml=function(e,t){if(null==t)return null;var n,i,r,s;return n=e.getSegmentUrls(t),i=e.getDashDescriptor(t),r=new MPDSegmentedAudioStream(t,this.http,n,i,this.log),s=new AudioInfo,s.audioType=ProxyLoader.AUDIOTYPE_MUXED,s.channelLabels=AudioInfo.AAC_CHANNEL_CONFIGS[e.getChannelConfiguration(t)],s.channelCount=s.channelLabels.length,s.sampleRate=r.sampleRate,s.totalSamples=r.totalSamples,s.waveformPreviews=[],r.audioInfo=s,r},e.BFramesException=function(){RuntimeException.call(this)},e.BFramesException=stjs.extend(e.BFramesException,RuntimeException,[],null,{},{})},{http:"Http",log:"Log"},{});var Captions=function(){};Captions=stjs.extend(Captions,null,[],function(e,t){e.offsetCaptions=function(e,t,n){var i=n.getMillisByTv(t);e.rows.forEach(function(e){return Captions.offsetRow(t,n,i,e)})},e.offsetRow=function(e,t,n,i){i.startTv=Math.max(0,i.startTv+e),i.endTv=Math.max(0,i.endTv+e),i.startMsec=Math.max(0,i.startMsec+n),i.endMsec=Math.max(0,i.endMsec+n),i.timeCodeIn=t.getTapeByTv(i.startTv),i.timeCodeOut=t.getTapeByTv(i.endTv)},e.CODEC_C890="c890",e.CODEC_DCSUBS="dcsubs",e.CODEC_EBU="ebu",e.CODEC_STL="stl",e.CODEC_SRT="srt",e.CODEC_WEBVTT="webvtt",e.guessSubtitleCodec=function(e){return e.endsWith("stl")?Captions.CODEC_STL:e.endsWith("srt")?Captions.CODEC_SRT:e.endsWith("vtt")?Captions.CODEC_WEBVTT:e.endsWith("890")?Captions.CODEC_C890:e.endsWith("xml")?Captions.CODEC_DCSUBS:"unknown"},e.parseSubs=function(e,t,n,i,r){null==r&&(r=LogLevel.INFO);var s,o=new Log(r),a=new Http(o),l=null!=e?e:TimelineUtil.defaultTimeline();switch(n){case Captions.CODEC_EBU:case Captions.CODEC_STL:s=a.getArrayBuffer(t).map(function(e){return EbuSubs.parse(e,l,o)});break;case Captions.CODEC_DCSUBS:s=a.get(t).flatMap(function(e){return DCSubs.parse(e,l)});break;case Captions.CODEC_SRT:case Captions.CODEC_WEBVTT:s=a.get(t).flatMap(function(e){return SRTParser.parse(e,l)});break;case Captions.CODEC_C890:s=a.getArrayBuffer(t).map(function(e){return Cavena890.parse(e,l,o)});break;default:return void i("unknown codec "+n,null)}s.subscribe(function(e){e.title=t.split("/").pop(),i(null,e)},function(e){return i(e,null)})},e.probe=function(e,t,n){null==n&&(n=LogLevel.INFO);var i=new Log(n);switch(e){case Captions.CODEC_EBU:return EbuSubs.probe(t,i);case Captions.CODEC_DCSUBS:return DCSubs.probe(t);case Captions.CODEC_C890:return Cavena890.probe(t);default:return-1}}},{},{});var PlayerImpl=function(e,t){this.options=this.defaultOptions(t),this.log=new Log(this.options.logLevel),this.errorRx=new Rx.Subject,this.errorRx.subscribe(stjs.bind(this.log,"error")),this.container=e,null==this.container.getAttribute("tabindex")&&this.container.setAttribute("tabindex","0"),this.view=this.createView(),this.eventListeners={},this.autoDisposables=new Rx.CompositeDisposable,this.initialized=!1,this.initRx=new Rx.Subject,this.http=new Http(this.log),this.http.setWithCredentials(this.options.allowCrossSiteCredentials),this.http.setQueryParams(this.options.queryParams)};PlayerImpl=stjs.extend(PlayerImpl,null,[VGPlayerPluginApi],function(e,t){e.FULL_RES="fullres",e.LOW_RES="lowres",e.RANGE_AUTO_CANCEL=!1,t.log=null,t.container=null,t.options=null,t.http=null,t.view=null,t.videoSrcHiRes=null,t.videoSrcLowRes=null,t.videoSrcTrick=null,t.cutList=null,t.cutListLowRes=null,t.captionsList=null,t.videoElement=null,t.originalVideoElement=null,t.initialized=!1,t.audioTracksRx=null,t.audioTracks=null,t.captionListChangeRx=null,t.pluginRx=null,t.cutsRx=null,t.currentVideoStream=null,t.timeUpdateRx=null,t.progressRx=null,t.timelineRx=null,t.timelineSubscription=null,t.audioHandlerRx=null,t.captionHandlerRx=null,t.changingVideoSrc=!1,t.currentVideoSrc=null,t.initRx=null,t.seekableDurationUpdaterSubscription=null,t.currentAudioTrack=null,t.eventListeners=null,t.filmStripDrawerRx=null,t.autoDisposables=null,t.playRateBeforePause=1,t.proxyType=null,t.errorRx=null,t.drm=null,t.fairplay=null,t.createView=function(){return new SkinlessPlayerView(this.container,this.log)},t.getView=function(){return this.view},t.defaultOptions=function(e){return null==e&&(e=new PlayerOptions),null==e.plugins&&(e.plugins=new Array),null==e.logLevel&&(e.logLevel=LogLevel.INFO),e},t.getOptions=function(){return this.options},t.getHttp=function(){return this.http},t.getLog=function(){return this.log},t.setLogLevel=function(e){this.log.setLevel(e)},t.isLive=function(){switch(this.proxyType){case ProxyType.DASH:return null!=this.currentVideoStream&&this.currentVideoStream.isDynamic()||null!=this.currentAudioTrack&&this.currentAudioTrack.dashStream.isDynamic();case ProxyType.HLS:var e=this.getTimeline().originalTimeline();return e.isLive();default:return!1}},t.init=function(){this.videoSrcHiRes=null,this.videoSrcLowRes=null,this.videoSrcTrick=null,this.cutList=[],this.cutListLowRes=[],this.audioTracks=[],this.captionsList=[],this.videoElement=null,this.timelineRx=new Rx.Subject,this.timeUpdateRx=new Rx.Subject,this.progressRx=new Rx.Subject,this.audioTracksRx=new Rx.ReplaySubject,this.audioHandlerRx=new Rx.Subject,this.captionHandlerRx=new Rx.Subject,this.cutsRx=new Rx.ReplaySubject,this.pluginRx=new Rx.ReplaySubject,this.captionListChangeRx=new Rx.ReplaySubject,this.filmStripDrawerRx=new Rx.ReplaySubject(1),this.drm=null,this.fairplay=null,this.initialized=!0},t.close=function(){this.autoDisposables.dispose(),this.autoDisposables=new Rx.CompositeDisposable,this.initialized&&(null!=this.videoElement&&this.videoElement.close(),null!=this.videoSrcHiRes&&this.videoSrcHiRes.detach(),null!=this.videoSrcLowRes&&this.videoSrcLowRes.detach(),null!=this.videoSrcTrick&&this.videoSrcTrick.detach(),null!=this.drm&&this.drm.close(),null!=this.fairplay&&this.fairplay.close(),this.timelineRx.onCompleted(),null!=this.timelineSubscription&&this.timelineSubscription.dispose(),this.timeUpdateRx.onCompleted(),this.progressRx.onCompleted(),this.audioTracksRx.onCompleted(),this.audioHandlerRx.onCompleted(),this.captionHandlerRx.onCompleted(),this.cutsRx.onCompleted(),this.pluginRx.onCompleted(),this.getCaptionListChangeRx().onCompleted(),this.removeAllEventListeners(),this.view.close(),this.view.initPlayerContainer(),this.initialized=!1)},t.addCaptionsHandler=function(e){this.captionHandlerRx.onNext(e)},t.audioAddHandler=function(e){this.audioHandlerRx.onNext(e)},t.addCaptionsObject=function(e){if(null!=e&&null==e.id)do e.id=PlayerUtils.randomString();while(this.captionsList.some(function(t,n,i){return t.id==e.id}));this.captionsList.push(e),this.getCaptionListChangeRx().onNext(e)},t.addCaptions=function(e){null!=e&&this.addCaptionsObject(e)},t.load=function(e,t){if(null==this.options.serverUrl||this.options.staticVideoSrc||this.isUrl(e))this.loadUrl(e,function(e){return PlayerImpl.invoke1(t,e)});else{for(var n=new Array,i=e.split(","),r=0;r<i.length;r++)n.push(PlayerCut.fromProxyId(i[r]));this.loadCutList(n,t)}},t.isUrl=function(e){return new RegExp("^(http|https|ftp|file)://","i").test(e)},t.loadUrl=function(e,t){this.close(),this.init();var n=this.determineMimeType(e).flatMapObserver(stjs.bind(this,function(t,n){this.log.debug(t);var i;switch(t.toLowerCase()){case"application/xml":case"application/dash+xml":i=this.loadMPD(e);break;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":i=this.loadHLS(e);break;case"video/mp4":case"video/quicktime":case"audio/mp4":case"audio/x-m4a":i=this.loadMp4WithAudio(e).flatMapObserver(function(e,t){return Rx.Observable.just(e)},stjs.bind(this,function(t){return stjs.isInstanceOf(t.constructor,ProxyLoader.BFramesException)?(this.log.warn("video contains B-frames. Trying loadMp4"),this.loadMp4(e)):(this.log.warn("Failed loading mp4 (",t,"). Trying loadGeneric"),this.loadGeneric(e))}),Rx.Observable.empty);break;default:this.log.warn("unsupported mime type",t),i=Rx.Observable["throw"](new PlayerError("unsupported mime type "+t,PlayerError.FATAL))}return i}),stjs.bind(this,function(t){return 0==t?this.loadGeneric(e):Rx.Observable["throw"](new PlayerError("can not determine mime type. response code = "+t,PlayerError.FATAL))}),Rx.Observable.empty),i=RxUtil.doOnFirst(n,function(e){null!=t&&t(null)}).subscribe(function(e){},stjs.bind(this,function(e){this.errorRx.onNext(e),null!=t&&t(e)}));this.autoDisposable(i)},t.focus=function(){this.container.focus()},t.determineMimeType=function(e){var t=this.mimeTypeByExtension(e);return null!=t?Rx.Observable.just(t):Rx.Observable.create(function(t){var n=new XMLHttpRequest;return n.open("GET",e,!0),n.setRequestHeader("Range","bytes=0-0"),n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<400)try{var e=n.getResponseHeader("Content-Type");t.onNext(e.replaceAll("[\\s;]+.*","")),t.onCompleted()}catch(i){t.onError(n.status)}else n.status>=400?t.onError(n.status):t.onError(0)},n.send(),stjs.bind(n,"abort")})},t.mimeTypeByExtension=function(e){if(e.indexOf("?")!=-1&&(e=e.substring(0,e.indexOf("?"))),e.indexOf("/")!=-1&&(e=e.substring(e.lastIndexOf("/")+1)),e.indexOf(".")!=-1){var t=e.substring(e.lastIndexOf("."));switch(t.toLowerCase()){case".mp4":case".mov":return"video/mp4";case".mpd":return"application/dash+xml";case".m3u8":return"application/x-mpegURL"}}return null},t.loadHLS=function(e){if(this.proxyType=ProxyType.HLS,!Utils.isSafari)return Rx.Observable["throw"](new PlayerError("HLS is not supported in this browser.",PlayerError.FATAL));var t=this.loadHLSPlaylist(e).flatMap(stjs.bind(this,function(t){var n=t.getVariantList();if(0==t.getMediaList().length&&0==n.length)return Rx.Observable["throw"](new PlayerError("Empty HLS. Neither media nor stream variants are present.",PlayerError.FATAL));if(n.length>0){var i=n[0].uri;return i=Utils.toAbsoluteUri(e,i),this.loadHLSPlaylist(i)}return Rx.Observable.just(t)}));return t.flatMap(stjs.bind(this,function(t){if(null!=this.options.drm&&null!=this.options.drm.fairplay&&(this.fairplay=new Fairplay(this.view.video,this.options.drm.fairplay,this.log,this.errorRx)),t.hasEndList())return this.loadGeneric(e);this.log.info("load live hls timeupdates",t.uri);var n=HLSTimeline.liveUpdateHLSTime(this.http,t.uri,t,this.log,this.errorRx);this.videoSrcHiRes=new StaticVideoSrc(e,this.errorRx);var i=new PlayerCut(null,0,0);return i.audioInfo=new AudioInfo,i.audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,i.audioInfo.channelCount=2,i.audioInfo.channelLabels=["left","right"],i.audioInfo.sampleRate=44100,i.audioInfo.totalSamples=0,i.audioInfo.waveformPreviews=[],this.cutsRx.onNext(i),this.cutList.push(i),this.onLoadDefaultAudioTrack(PlayerAudioTrack.fromAudioInfo(t.uri,t.uri,i.audioInfo,this.log)),n.schedule.merge(this.initVideoElement(new BoundedTimeline(n))).doOnNext(stjs.bind(this,function(e){return this.videoElement.setInitialTime(.1)}))}))},t.loadHLSPlaylist=function(e){return this.http.get(e).flatMap(stjs.bind(this,function(t){try{var n=HLSPlaylist.parseString(t,this.log);return n.uri=e,Rx.Observable.just(n)}catch(i){return Rx.Observable["throw"](new PlayerError(i.getMessage(),PlayerError.FATAL))}}))},t.onLoadDefaultAudioTrack=function(e){e.setChannelsMuted(!1),this.currentAudioTrack=e,this._addToAudioTracks(e)},t.loadGeneric=function(e){if(this.log.info("loadGeneric",e),this.proxyType=ProxyType.GENERIC,e.toLowerCase().endsWith(".m3u8")&&!Utils.isSafari)return Rx.Observable["throw"](new PlayerError("HLS is not supported in this browser.",PlayerError.FATAL));this.init();var t=Timeline.UNKNOWN,n=new StaticVideoSrc(e,this.errorRx);this.videoSrcHiRes=n;var i=new PlayerCut(null,0,0);i.audioInfo=new AudioInfo,i.audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,i.audioInfo.channelCount=2,i.audioInfo.channelLabels=["left","right"],i.audioInfo.sampleRate=44100,i.audioInfo.totalSamples=0,i.audioInfo.waveformPreviews=[],this.cutsRx.onNext(i),this.cutList.push(i);var r=PlayerAudioTrack.fromAudioInfo(e,e,i.audioInfo,this.log);this.onLoadDefaultAudioTrack(r);var s=this.initVideoElement(t),o=n.getLoadingErrors().flatMap(function(e){return Rx.Observable["throw"](e)}).map(function(e){return!0});return s.merge(o).take(1)},t.loadBlobUrl=function(e,t,n,i){this.close(),this.init(),this.videoSrcHiRes=new StaticVideoSrc(n(this.view.video),this.errorRx);var r=GenericTimeline.newGenericTime(e,t),s=SimpleTimeline.newEndlessTime(r),o=this.initVideoElement(s),a=o.subscribe(stjs.bind(this,function(e){return i(this)}));this.autoDisposable(a)},t.loadMPD=function(e){this.proxyType=ProxyType.DASH,this.log.info("loadMPD",e);var t=new ProxyLoader(this.http,this.log).mpdFromUrl(e);return this.initVideoFromMPDStream(e,t)},t.initVideoFromMPDStream=function(e,t){return RxUtil.firstOutIgnoreNext(t).flatMap(stjs.bind(this,function(t){this.videoSrcHiRes=new DynamicDash(t.video,t.audio,this.log,this.errorRx),null!=t.thumbshq&&(this.videoSrcLowRes=new DynamicDash(t.thumbshq,t.audio,this.log,this.errorRx),this.videoSrcTrick=new DynamicDash(t.thumbshq,null,this.log,this.errorRx));var n=new Proxy;n.video=t.video,n.audio=t.audio,n.thumbshq=t.thumbshq,n.audioInfo=null!=t.audio?t.audio.audioInfo:null,n.proxyId=e;var i=new PlayerCut(n,0,0);this.cutsRx.onNext(i),this.cutList.push(i),this.currentVideoStream=t.video;var r=PlayerAudioTrack.fromDashStream(e,t.audio,this.log);this.onLoadDefaultAudioTrack(r);var s;if(null!=t.video)s=t.video.getTimeline();else{if(null==t.audio)return Rx.Observable["throw"](new PlayerError("no audio or video found",PlayerError.FATAL));s=t.audio.getTimeline()}if(this.subscribeSeekableDurationUpdater(t.video,t.audio,s),null!=t.thumbs){var o=new FilmStripDrawer(this.http,this.log,this.errorRx);o.initWithDashStream(t.thumbs,s,stjs.bind(this,function(e){return this.filmStripDrawerRx.onNext(o)}))}return t.drmInfo.length>0&&(this.drm=new DRM(this.options.drm,t.drmInfo,this.log,this.errorRx),null!=t.thumbshq?(this.drm.initVideo(this.view.video,[t.video.id,t.thumbshq.id,t.audio.id]),this.drm.initVideo(this.view.trickVideo,[t.thumbshq.id])):this.drm.initVideo(this.view.video,[t.video.id,t.audio.id])),this.initVideoElement(s)}))},t.loadMp4WithAudio=function(e){return this.log.info("loadMp4WithAudio",e),this.options.staticVideoSrc?this.loadGeneric(e):(this.proxyType=ProxyType.MP4,new ProxyLoader(this.http,this.log).dashifyMp4(e).flatMap(stjs.bind(this,function(t){var n=t.audio[0],i=t.video;this.videoSrcHiRes=new DynamicDash(i,n,this.log,this.errorRx);var r=new PlayerCut(null,0,t.timeline.getFrameCount());r.audioInfo=null==n?new AudioInfo:n.audioInfo,this.cutsRx.onNext(r),this.cutList.push(r),this.currentVideoStream=i;var s=PlayerAudioTrack.fromDashStream(e,n,this.log);this.onLoadDefaultAudioTrack(s);var o=t.timeline;return this.subscribeSeekableDurationUpdater(i,n,o),this.initVideoElement(o).doOnNext(stjs.bind(this,function(e){null==i&&this.view.showAsAudioPlayer()}))})))},t.loadMp4=function(e){return this.proxyType=ProxyType.MP4,Rx.Observable.create(stjs.bind(this,function(t){var n=new HttpDataSrc(this.http,e);Mp4Loader.loadMp4(n,stjs.bind(this,function(i){MovDasher.parseTimePackets(i,n,stjs.bind(this,function(n){if(this.initialized){var r=new BoundedTimeline(new MP4Timeline(n));this.videoSrcHiRes=new StaticVideoSrc(e,this.errorRx);var s=new PlayerCut(null,0,r.getFrameCount());s.audioInfo=new AudioInfo;var o=i.getInfo().audioTracks,a=o.length;if(a>0){var l=o[0];s.audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,s.audioInfo.channelCount=l.audio.channel_count,s.audioInfo.channelLabels=AudioInfo.AAC_CHANNEL_CONFIGS[l.audio.channel_count],s.audioInfo.sampleRate=l.audio.sample_rate,s.audioInfo.totalSamples=l.duration,s.audioInfo.waveformPreviews=[]}this.cutsRx.onNext(s),this.cutList.push(s);var u=PlayerAudioTrack.fromAudioInfo(e,e,s.audioInfo,this.log);this.onLoadDefaultAudioTrack(u),this.initVideoElement(r).doOnNext(stjs.bind(this,function(e){0==i.getInfo().videoTracks.length&&this.view.showAsAudioPlayer()})).subscribe(function(e){t.onNext(!0),t.onCompleted()},stjs.bind(t,"onError"))}}),stjs.bind(t,"onError"))}),stjs.bind(t,"onError"))}))},t.loadAudioTrack=function(e,t,n){var i;i=Utils.isNotBlank(this.options.serverUrl)&&!this.isUrl(e)?new ProxyLoader(this.http,this.log).loadAudioRx(this.options.serverUrl,e):this.determineMimeType(e).flatMap(stjs.bind(this,function(t){switch(this.log.debug(t),t.toLowerCase()){case"application/xml":case"application/dash+xml":return new ProxyLoader(this.http,this.log).loadAudioFromMpd(e);case"video/mp4":case"audio/mp4":case"audio/x-m4a":return new ProxyLoader(this.http,this.log).loadAudioFromM4a(e);default:return Rx.Observable["throw"](new PlayerError("unsupported mime type "+t,PlayerError.FATAL))}}));var r=i.subscribe(stjs.bind(this,function(i){var r=PlayerAudioTrack.fromDashStream(e,i,this.log);r.filename=t,this._addToAudioTracks(r),r.setChannelsMuted(!0),n(null)}),n);this.autoDisposable(r)},t.setAudioTrackUrl=function(e,t,n){var i=this.getAudioTrack(e);if(null==i)return void PlayerImpl.invoke1(n,new Error("no track with id "+e));var r;r=t.endsWith(".mpd")?new ProxyLoader(this.http,this.log).loadAudioFromMpd(t).subscribe(stjs.bind(this,function(e){i.update(e),this.audioTracksRx.onNext(i),i.setChannelsMuted(!0),PlayerImpl.invoke1(n,null)})):new ProxyLoader(this.http,this.log).loadAudioRx(this.options.serverUrl,t).subscribe(stjs.bind(this,function(e){i.update(e),this.audioTracksRx.onNext(i),i.setChannelsMuted(!0),PlayerImpl.invoke1(n,null)}),function(e){return PlayerImpl.invoke1(n,e)}),this.autoDisposable(r)},t.conformAudioTrack=function(e,t){var n=this.getAudioTrack(e);if(null==n)return void this.errorRx.onNext(new PlayerError("no track with id "+e,PlayerError.NONFATAL));if(null==n.dashStream)return void this.errorRx.onNext(new PlayerError("track "+e+" is not loaded",PlayerError.NONFATAL));if(n.id()==this.getCurrentAudioTrack().id())return void this.errorRx.onNext(new PlayerError("changing offset of current track is not supported. id="+e,PlayerError.NONFATAL));var i=Utils.secondsToTv(t,n.dashStream.sampleRate),r=stjs.trunc(this.getDurationSec()*n.dashStream.sampleRate),s=Math.max(i+n.dashStream.totalSamples,r),o=new ConformedM4sAudioStream(n.dashStream,i,s,this.log);n.update(o),n.offset=t,this.audioTracksRx.onNext(n)},e.invoke1=function(e,t){null!=e&&e(t)},t.getAudioTrack=function(e){var t=this.audioTracks.filter(function(t,n,i){return t.proxyId==e});return t.length>0?t[0]:null},t.setCurrentAudioTrack=function(e){var t=this.getAudioTrack(e);null!=t&&(PlayerOptions.STREAMING_FILE.equals(this.options.streaming)||(this.currentAudioTrack=t,this.videoSrcHiRes.canSetAudioWithoutReattach(t.dashStream)?this.doChangeCurrentAudioTrack(t):this.reattachCurrentVideoSrc(stjs.bind(this,function(){return this.doChangeCurrentAudioTrack(t)}))))},t.doChangeCurrentAudioTrack=function(e){var t=this.cutList[0];t.setAudio(e.dashStream),this.videoSrcHiRes.setAudio(e.dashStream),null!=this.videoSrcLowRes&&this.videoSrcLowRes.setAudio(e.dashStream);var n=this.cutListLowRes[0];null!=n&&(n.setAudio(e.dashStream),this.videoSrcLowRes.setAudio(e.dashStream)),this.audioTracks.forEach(function(t){return t.setChannelsMuted(t!=e)}),null!=t.audioDashFile&&(t.audioDashFile.channelMuted=e.channelMuted),this.subscribeSeekableDurationUpdater(this.currentVideoStream,e.dashStream,this.getTimeline()),this.audioTracksRx.onNext(e)},e.parseStartEnd=function(e){return Utils.isNumber(e)?Utils.toInt(e):Utils.isString(e)?0:-1},t.loadCutList=function(e,t){this.close(),this.init(),this.proxyType=ProxyType.VG;for(var n={},i=new Array,r=0;r<e.length;r++){var s=e[r].proxyId;i.indexOf(s)==-1&&null==n[s]&&i.push(s)}var o=new ProxyLoader(this.http,this.log).loadProxies(this.options.serverUrl,i).doOnError(stjs.bind(this,function(e){this.errorRx.onNext(new PlayerError(e,PlayerError.FATAL)),PlayerImpl.invoke1(t,e)})).flatMap(stjs.bind(this,function(t){for(var r=0;r<i.length;r++){var s=i[r],o=t[s];n[s]=o}return this.onAllProxiesLoaded(n,e)})).subscribe(function(e){setTimeout(function(){return PlayerImpl.invoke1(t,null)},0)});this.autoDisposable(o)},t.onAllProxiesLoaded=function(e,t){for(var n=this,i=0;i<t.length;i++){var r,s=e[t[i].proxyId],o=PlayerImpl.parseStartEnd(t[i].start);if(null!=s.video)r=PlayerImpl.parseStartEnd(t[i].end)||s.video.getFrameCount();else{var a=48e3*stjs.trunc(s.audio.getDurationSec());r=PlayerImpl.parseStartEnd(t[i].end)||a}var l=new PlayerCut(s,o,r);n.cutsRx.onNext(l),n.cutList.push(l),n.cutListLowRes.push(PlayerCut.LowRes(s,o,r)),this.currentVideoStream=l.videoDashFile;var u=s.audio;if(null!=u){var c=PlayerAudioTrack.fromDashStream(t[i].proxyId,u,this.log);this.onLoadDefaultAudioTrack(c)}}n.options.streaming==PlayerOptions.STREAMING_VFILE?(n.videoSrcHiRes=new FileStreaming(n.cutList[0],(!0),(!0),n.options.serverUrl),n.videoSrcLowRes=new FileStreaming(n.cutListLowRes[0],(!1),(!0),n.options.serverUrl),n.videoSrcTrick=new FileStreaming(n.cutListLowRes[0],(!1),(!1),n.options.serverUrl)):n.options.streaming==PlayerOptions.STREAMING_CUTLIST?(n.videoSrcHiRes=new CutListStreaming(n.cutList,VideoSrc.VIDEO_AUDIO,n.options.serverUrl),n.videoSrcLowRes=new CutListStreaming(n.cutList,VideoSrc.VIDEO_AUDIO,n.options.serverUrl),n.videoSrcTrick=new CutListStreaming(n.cutList,VideoSrc.VIDEO_ONLY,n.options.serverUrl)):1==n.cutList.length?(n.videoSrcHiRes=new DynamicDash(this.cutList[0].videoDashFile,this.cutList[0].audioDashFile,this.log,this.errorRx),null!=n.cutListLowRes[0].videoDashFile&&(n.videoSrcLowRes=new DynamicDash(this.cutListLowRes[0].videoDashFile,this.cutList[0].audioDashFile,this.log,this.errorRx),n.videoSrcTrick=new DynamicDash(n.cutListLowRes[0].videoDashFile,null,this.log,this.errorRx))):(n.videoSrcHiRes=new DashCutListStreaming(n.cutList,(!0),VideoSrc.VIDEO_AUDIO,n.options.serverUrl),n.videoSrcLowRes=new DashCutListStreaming(n.cutListLowRes,(!1),VideoSrc.VIDEO_AUDIO,n.options.serverUrl),n.videoSrcTrick=new DashCutListStreaming(n.cutListLowRes,(!1),VideoSrc.VIDEO_ONLY,n.options.serverUrl));var d,p=n.cutList[0].videoDashFile;if(null!=p){for(var h=0,f=0,m=0,i=0;i<n.cutList.length;i++){var l=n.cutList[i],g=l.endFrame-l.startFrame;f+=g,h+=l.videoDashFile.timescale*g,m+=l.videoDashFile.sampleDuration*g}var v=p.timecode;d=SimpleTimeline.newSimpleTime(Math.round(stjs.trunc(h/f)),f,Math.round(stjs.trunc(m/f)),v)}else{var b=n.cutList[0].audioDashFile;d=SimpleTimeline.newSimpleTime(b.sampleRate,b.totalSamples,1,"00:00:00:00")}var y=new FilmStripDrawer(this.http,this.log,this.errorRx);return y.initWithUrl(this.options.serverUrl+"/"+t[0].proxyId+"/thumbs.mov",stjs.bind(this,function(e){return this.filmStripDrawerRx.onNext(y)})),this.initVideoElement(d).doOnNext(stjs.bind(this,function(e){null==p&&this.view.showAsAudioPlayer()}))},t.initVideoElement=function(e){this.videoSrcHiRes.attach(this.view.video),this.currentVideoSrc=this.videoSrcHiRes,null!=this.videoSrcTrick?(this.videoSrcTrick.attach(this.view.trickVideo),this.videoElement=new DualVideoElement(this.view.video,e,this.view.trickVideo,this.log,this.errorRx)):(this.view.hideTrickVideo(),this.videoElement=new SimpleVideoElement(this.view.video,e,this.log,this.errorRx)),this.videoElement.getVideoShownRx().subscribe(stjs.bind(this,function(e){this.changingVideoSrc=!1,this.view.unfreezeVideo()})),this.autoDisposable(this.videoElement.getTimeUpdateRx().map(stjs.bind(this,function(e){return this.getTimeSample()})).subscribe(stjs.bind(this.timeUpdateRx,"onNext"))),this.autoDisposable(this.videoElement.getProgressRx().subscribe(stjs.bind(this.progressRx,"onNext"))),this.options.enableCORS&&this.videoElement.setCrossOrigin("anonymous"),this.videoElement.setResetPlayRateOnSeek(!this.options.preservePlaybackRate),this.resubscribeTimeRx(),this.view.init(this),Utils.isSomething(this.options.plugins)&&this.initPlugins(this.options.plugins);var t;return t=e==Timeline.UNKNOWN?this.timelineRx.take(1).map(function(e){return!0}):Rx.Observable.just(!0),t.doOnNext(stjs.bind(this,function(e){this.log.info("video element initialized"),this.initRx.onNext(this)}))},t._addToAudioTracks=function(e){return this.audioTracks.push(e),this.audioTracksRx.onNext(e),e},t.addAudioTrack=function(e,t){return this.addAudioTrackWithId(PlayerUtils.randomString(),e,t)},t.addAudioTrackWithId=function(e,t,n){var i=PlayerAudioTrack.fromChannelLabels(e,t,n,this.log);return i.setChannelsMuted(!0),this._addToAudioTracks(i).proxyId},t.muteAudioTrack=function(e){var t=this.getAudioTrack(e);null!=t&&t.setChannelsMuted(!0)},t.togglePlay=function(){this.isPlaying()?this.pause():this.videoElement.playAtRate(this.options.preservePlaybackRate?this.playRateBeforePause:1)},t.play=function(){this.videoElement.playAtRate(this.options.preservePlaybackRate?this.playRateBeforePause:1)},t.pause=function(){if(this.isPlaying()){var e=this.videoElement.getPlayRate();0!=e&&(this.playRateBeforePause=e),this.videoElement.pause()}},t.getTimeline=function(){return this.videoElement.getTimeline()},t.getTimelineRx=function(){return this.timelineRx.debounce(1)},t.getCurrentTapeTimecode=function(){var e=this.videoElement.getFrame();return this.videoElement.getTimeline().getTapeByFrame(e)},t.getCurrentStandardTimecode=function(){var e=stjs.trunc(1e3*this.videoElement.getTimeSec());return Utils.hhmmssms(e)},t.getCurrentFrame=function(){return this.videoElement.getFrame()},t.getCurrentTime=function(){return this.videoElement.getTimeSec()},t.getCurrentTimeValue=function(){return this.videoElement.getTimeValue()},t.getCurrentUTCTimestamp=function(){return this.getTimeline().getUTCTimestampBySec(this.videoElement.getTimeSec())},t.seekSec=function(e){this.videoElement.seek(e)},t.seekUTCTimestamp=function(e){var t=Date.parse(e)-Date.parse(this.getStartUTCTimestamp());this.videoElement.seek(t/1e3)},t.seek=function(e){var t=-1,n=-1;if(Utils.isNumber(e))t=stjs.trunc(e);else if(Utils.isString("string")){var i=e;TapeTimecode.isTimecode(i)?t=this.videoElement.getTimeline().getFrameByTimecode(i):Utils.HHmmSSmsecToTimestamp(i)!=-1?n=stjs.trunc(Utils.HHmmSSmsecToTimestamp(i)/1e3):new RegExp("^\\d+$").test(i)&&(t=Integer.parseInt(i))}t==-1&&n==-1?this.errorRx.onNext(new PlayerError("provided value is neither timecode nor frame number: "+e,PlayerError.NONFATAL)):t!=-1?this.videoElement.seekFrame(t):this.videoElement.seek(n)},t.seekFrame=function(e){this.videoElement.seekFrame(e)},t.nextFrame=function(e){this.videoElement.pause(),this.videoElement.forward1(e)},t.previousFrame=function(e){this.videoElement.pause(),this.videoElement.backward1(e)},t.nextSec=function(e){this.videoElement.pause(),this.videoElement.forwardSec(e)},t.previousSec=function(e){this.videoElement.pause(),this.videoElement.backwardSec(e)},t.enterFullscreen=function(){this.view.enterFullscreen(null)},t.exitFullscreen=function(){this.view.exitFullscreen()},t.setRange=function(e,t){var n=PlayerImpl.guessFrame(this.videoElement.getTimeline(),e),i=PlayerImpl.guessFrame(this.videoElement.getTimeline(),t);n!=-1&&i!=-1?(this.originalVideoElement=this.videoElement,this.videoElement=new RangeVideoElement(this.videoElement),this.videoElement.setRange(n,i),this.resubscribeTimeRx()):this.errorRx.onNext(new PlayerError("provided values are neither timecodes nor frame numbers: "+e+" "+t,PlayerError.NONFATAL)),this.view.renderRange(n,i)},t.resubscribeTimeRx=function(){null!=this.timelineSubscription&&this.timelineSubscription.dispose(),this.timelineSubscription=this.videoElement.getTimeline().getUpdateRx().subscribe(stjs.bind(this.timelineRx,"onNext")),this.timelineRx.onNext(this.videoElement.getTimeline())},t.cancelRange=function(){this.videoElement.cancelRange(),null!=this.originalVideoElement&&(this.videoElement=this.originalVideoElement,this.originalVideoElement=null,this.resubscribeTimeRx(),this.timeUpdateRx.onNext(this.getTimeSample())),this.view.renderWhole()},t.hasRange=function(){return this.videoElement.hasRange()},t.playAtRate=function(e){this.videoElement.playAtRate(e)},t.playFasterBackwards=function(){this.videoElement.playFasterBackwards()},t.playFaster=function(){this.videoElement.playFaster()},t.setLoop=function(e){this.videoElement.setLoop(e)},t.setPauseOnLoop=function(e){this.videoElement.setPauseOnLoop(e)},t.isPlaying=function(){return this.videoElement.isPlaying()},t.getPlaybackRate=function(){return this.videoElement.getPlayRate()},t.getCutsInfo=function(){for(var e=this.cutList,t=new Array,n=0,i=0;i<e.length;i++){var r=e[i],s=r.endFrame-r.startFrame,o=new CutInfo(r.startFrame,r.endFrame,r.proxyId,n,n+s,r.audioDashFile,r.audioInfo);o.frameCount=o.end-o.start,o.cutListFrameCount=s,t.push(o),n+=s}return t},t.getCurrentCut=function(){for(var e=this.videoElement.getFrame(),t=this.getCutsInfo(),n=t[0],i=0;i<t.length;i++){var r=t[i];e>=r.cutListFrameStart&&e<r.cutListFrameEnd&&(n=r,n.cutId=i)}return n},t.getCurrentAudioTrack=function(){return this.currentAudioTrack},t.initPlugins=function(e){},t.isAudioMutable=function(){for(var e=this,t=0;t<e.cutList.length;t++){var n=e.cutList[t].audioInfo;if(null!=n&&ProxyLoader.AUDIOTYPE_MP3.equals(n.audioType))return!1;
}return!0},t.isAllMuted=function(){return this.audioTracks.every(function(e,t,n){return e.isMuted()})},t.setVolume=function(e){this.videoElement.setVolume(e)},t.getVolume=function(){return this.videoElement.getVolume()},t.isChangingVideoSrc=function(){return this.changingVideoSrc},t.applyAudioChanges=function(){this.currentVideoSrc.clearAudioBuffer()},t.changeVideoSrc=function(e){this.reattachCurrentVideoSrc(stjs.bind(this,function(){return this.currentVideoSrc=e}))},t.reattachCurrentVideoSrc=function(e){this.log.debug("reattaching"),this.changingVideoSrc=!0;var t=this.videoElement.getPlayRate();this.videoElement.pause(),this.videoElement.setInitialTime(this.videoElement.getTimeSec()),this.view.freezeVideo(),setTimeout(stjs.bind(this,function(){this.currentVideoSrc.detach(),null!=e&&e(),this.currentVideoSrc.attach(this.view.video),0!=t&&this.videoElement.playAtRate(t)}),100)},t.checkRangeAndSeek=function(e){PlayerImpl.RANGE_AUTO_CANCEL&&this.videoElement.hasRange()&&!this.videoElement.inRange(e)&&this.videoElement.cancelRange(),this.videoElement.seekFrame(e)},t.checkRangeAndSeekSec=function(e){var t=this.getTimeline().getFrameBySec(e);PlayerImpl.RANGE_AUTO_CANCEL&&this.videoElement.hasRange()&&!this.videoElement.inRange(t)&&this.videoElement.cancelRange(),this.videoElement.seek(e)},t.getSeekableDurationSec=function(){return this.videoElement.getSeekableDuration()},t.getDurationSec=function(){return this.videoElement.getDuration()},t.getTimeSample=function(){var e=this.getCurrentTimeValue(),t=this.getCurrentFrame(),n=this.getCurrentTime();return new TimeSample(e,t,n)},t.setVideoQuality=function(e){null!=this.videoSrcLowRes&&(PlayerImpl.FULL_RES.equals(e)?this.changeVideoSrc(this.videoSrcHiRes):this.changeVideoSrc(this.videoSrcLowRes))},e.guessFrame=function(e,t){var n=0;if(Utils.isNumber(t))n=Utils.toInt(t);else if(Utils.isString(t)){var i=t;TapeTimecode.isTimecode(i)?n=e.getFrameByTimecode(i):Utils.HHmmSSmsecToTimestamp(i)!=-1?n=e.getFrameByMillis(Utils.HHmmSSmsecToTimestamp(i)):Utils.isDigit(i)&&(n=Integer.parseInt(i))}return n},t.getPlayRx=function(){return this.videoElement.getPlayRx()},t.getVolumeChangeRx=function(){return this.videoElement.getVolumeChangeRx()},t.getTimeUpdateRx=function(){return this.timeUpdateRx},t.setStartTapeTimecode=function(e){var t=this.getTimeline().getTapeTimecode(),n=TapeTimecode.parseTimecode(e,t.getTapeFps(),t.isDropFrame());t.setStartTimecode(n),this.timelineRx.onNext(this.getTimeline()),this.timeUpdateRx.onNext(this.getTimeSample())},t.getStartTapeTimecode=function(){return this.getTimeline().getTapeTimecode().getTimecodeAtFrame(0)},t.getCaptionsList=function(){return this.captionsList},t.getAudioTracks=function(){return this.audioTracks},t.getAudioHandlerRx=function(){return this.audioHandlerRx},t.getCaptionHandlerRx=function(){return this.captionHandlerRx},t.disableHotKeys=function(){null!=this.view.hm&&this.view.hm.setDisable(!0),this.options.hotkeys=!1},t.enableHotKeys=function(){null!=this.view.hm&&this.view.hm.setDisable(!1),this.options.hotkeys=!0},t.getVideoElement=function(){return this.videoElement},t.enableHotKeysForDocument=function(e){this.view.hm.enableHotKeysForDocument(e)},t.addEventListener=function(e,t){var n=null,i=e.toLowerCase();switch(i){case PlayerEvents.FULLSCREEN_EVENT:n=this.view.fullscreenRx;break;case PlayerEvents.TIMEUPDATE_EVENT:n=this.timeUpdateRx;break;case PlayerEvents.LOAD_EVENT:n=this.initRx;break;case PlayerEvents.PLAY_EVENT:n=this.getPlayRx();break;case PlayerEvents.INIT_EVENT:n=this.initRx;break;case PlayerEvents.TIMELINE_EVENT:n=this.getTimelineRx();break;case PlayerEvents.ERROR_EVENT:n=this.errorRx;break;case PlayerEvents.VOLUME_CHANGED:n=this.getVolumeChangeRx();break;case PlayerEvents.PROGRESS:n=this.progressRx}if(null!=n){var r=stjs.bind(this,function(e){try{t(e)}catch(n){this.log.error("error in user's event listener \""+i+'"',n),i!=PlayerEvents.ERROR_EVENT&&this.errorRx.onNext(new PlayerError("error in user's event listener \""+i+'"',PlayerError.NONFATAL,n))}}),s=n.subscribe(r);null==this.eventListeners[i]&&(this.eventListeners[i]=[]),this.eventListeners[i].push(new PlayerImpl.PlayerEventListener(t,s))}},t.removeEventListener=function(e,t){var n=this.eventListeners[e];if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];r.handler==t&&(r.disposable.dispose(),n.splice(i,1))}},t.removeAllEventListeners=function(){Utils.mapValues(this.eventListeners).forEach(function(e){return e.forEach(function(e){return e.disposable.dispose()})}),this.eventListeners={}},t.loadFromMpd=function(e,t,n){this.close(),this.init(),this.autoDisposable(this.initVideoFromMPDStream(e,t).doOnError(stjs.bind(this,function(e){return this.errorRx.onNext(new PlayerError("can not load MPD",PlayerError.FATAL,e))})).subscribe(function(e){return n()}))},e.PlayerEventListener=function(e,t){this.handler=e,this.disposable=t},e.PlayerEventListener=stjs.extend(e.PlayerEventListener,null,[],function(e,t){t.handler=null,t.disposable=null},{handler:"Callback1",disposable:"Rx.Disposable"},{}),t.subscribeSeekableDurationUpdater=function(e,t,n){null!=this.seekableDurationUpdaterSubscription&&(this.seekableDurationUpdaterSubscription.dispose(),this.seekableDurationUpdaterSubscription=null),null!=e&&null!=t?(n.setSeekableDurationSec(Math.min(t.getDurationSec(),e.getDurationSec())),this.seekableDurationUpdaterSubscription=Rx.Observable.merge(t.getUpdateRx(),e.getUpdateRx()).subscribe(function(i){n.setSeekableDurationSec(Math.min(e.getDurationSec(),t.getDurationSec()))})):null!=e&&null==t?(n.setSeekableDurationSec(e.getDurationSec()),this.seekableDurationUpdaterSubscription=e.getUpdateRx().subscribe(function(t){n.setSeekableDurationSec(e.getDurationSec())})):null==e&&null!=t?(n.setSeekableDurationSec(t.getDurationSec()),this.seekableDurationUpdaterSubscription=t.getUpdateRx().subscribe(function(e){n.setSeekableDurationSec(t.getDurationSec())})):this.errorRx.onNext(new PlayerError("invalid call. no video and audio",PlayerError.FATAL))},t.getStaticFilmStripDrawer=function(e,t){var n=new FilmStripDrawer(this.http,this.log,this.errorRx);n.initWithUrl(e,function(e){return PlayerImpl.invoke1(t,n)})},t.getFilmStripDrawer=function(e){this.filmStripDrawerRx.subscribe(function(t){return PlayerImpl.invoke1(e,t)})},t.autoDisposable=function(e){this.autoDisposables.add(e)},t.registerPlugin=function(e){e.setAPI(this)},t.getCaptionListChangeRx=function(){return this.captionListChangeRx},t.getBuffered=function(){return this.videoElement.getBuffered()},t.getErrorRx=function(){return this.errorRx},t.setStartUTCTimestamp=function(e){this.getTimeline().setStartUTCTimestamp(e)},t.getStartUTCTimestamp=function(){return this.getTimeline().getStartUTCTimestamp()}},{log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var CoreDev=function(){};CoreDev=stjs.extend(CoreDev,null,[],function(e,t){e.chugai=function(){window.onload=function(e){var t=window.document.getElementById("playerContainer"),n=new PlayerImpl(t,{logLevel:LogLevel.INFO,drm:{widevine:{laUrl:"https://drm-widevine-licensing.axtest.net/AcquireLicense"},playready:{laUrl:"https://drm-playready-licensing.axtest.net/AcquireLicense"},fairplay:{laUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?type=FPS&WVCustomUserToken=34241&WVCustomProductId=1234",certUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?FairPlayCert=true"}}});n.load("http://kote.videogorillas.com/vmir/maleficent/file.mpd",function(e){null!=e?console.error("load error",e):(console.log("load ok"),console.log("live="+n.isLive()))}),n.addEventListener(PlayerEvents.ERROR_EVENT,function(e){console.log("OMG! error event",e)}),window.player=n}},e.andrew=function(){window.onload=function(e){var t=window.document.getElementById("playerContainer"),n=new PlayerImpl(t,{serverUrl:"http://localhost/player/core/tests"});n.load("http://localhost/player/core/tests/pete30/file.mpd",function(e){null!=e?console.error(e):console.log("Player loaded")}),window.player=n}}},{},{}),module.exports={Player:PlayerImpl,Captions:Captions,TapeTimecode:TapeTimecode,LogLevel:LogLevel,PlayerError:PlayerError,_private:{CloseableView:CloseableView,VGView:VGView,VGPlayerPluginApi:VGPlayerPluginApi,ObjectEvents:ObjectEvents,DataSrc:DataSrc,VGPlugin:VGPlugin,VGPlugins:VGPlugins,PlayerView:PlayerView,VGPlayerPublicApi:VGPlayerPublicApi,Http:Http,TimelineUtil:TimelineUtil,tests:{PlayerOptions:PlayerOptions,Utils:Utils,Subtitles:Subtitles,SubtitleEntry:SubtitleEntry,MutableBoolean:MutableBoolean,PlayerEvents:PlayerEvents,KeyOptions:KeyOptions,HotkeyManager:HotkeyManager,Timeline:Timeline,TimeSample:TimeSample}}}},function(module,exports,__webpack_require__){var require,require,__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,require;(function(process,__dirname){var _require=require;require=void 0,function(e,t){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=t,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(){"use strict";function initglobal(){global=this,global||("undefined"!=typeof window?global=window:"undefined"!=self&&(global=self))}function error(e){console.error(e),console.trace()}function assert(e,t){e||error(t)}function asmFactory(e,t,n){"use asm";var i=e.Math.imul;var r=e.Math.min;var s=e.Math.max;var o=e.Math.pow;var a=new e.Uint8Array(n);var l=new e.Uint32Array(n);var u=new e.Uint8Array(n);var c=new e.Uint8Array(n);var d=new e.Uint32Array(n);var p=0;var h=0;var f=0;var m=0;var g=0;var v=0;var b=0;var y=0;var w=0;var _=0;function C(e,t){e=e|0;t=t|0;var n=0;var r=0;p=e;w=i(e,4)|0;h=t;f=i(p|0,h|0)|0;m=(f|0)>>2;v=i(i(p,h)|0,4)|0;g=f+m|0+m|0;y=0;b=y+v|0;_=b+g|0;r=~~+o(+2,+24);r=i(r,4)|0;for(n=0|0;(n|0)<(r|0)|0;n=n+4|0){d[(_+n|0)>>2]=0}}function S(){var e=0;var t=0;var n=0;var i=0;var r=0;var s=0;var o=0;var a=0;var l=0;var c=0;var g=0;var v=0;var C=0;var S=0;C=y|0;e=b|0;t=e+f|0|0;n=t+m|0;for(l=0;(l|0)<(h|0);l=l+2|0){g=t;v=n;for(c=0;(c|0)<(p|0);c=c+2|0){i=u[e>>0]|0;r=u[(e+p|0)>>0]|0;s=u[t>>0]|0;o=u[n>>0]|0;S=((i<<16|0)+(s<<8|0)|0)+o|0;a=d[(_+S|0)>>2]|0;if(a){}else{a=E(i,s,o)|0;d[(_+S|0)>>2]=a|0}d[C>>2]=a;S=((r<<16|0)+(s<<8|0)|0)+o|0;a=d[(_+S|0)>>2]|0;if(a){}else{a=E(r,s,o)|0;d[(_+S|0)>>2]=a|0}d[(C+w|0)>>2]=a;C=C+4|0;e=e+1|0;i=u[e>>0]|0;r=u[(e+p|0)>>0]|0;S=((i<<16|0)+(s<<8|0)|0)+o|0;a=d[(_+S|0)>>2]|0;if(a){}else{a=E(i,s,o)|0;d[(_+S|0)>>2]=a|0}d[C>>2]=a;S=((r<<16|0)+(s<<8|0)|0)+o|0;a=d[(_+S|0)>>2]|0;if(a){}else{a=E(r,s,o)|0;d[(_+S|0)>>2]=a|0}d[(C+w|0)>>2]=a;C=C+4|0;e=e+1|0;t=t+1|0;n=n+1|0}C=C+w|0;e=e+p|0}}function E(e,t,n){e=e|0;t=t|0;n=n|0;var o=0;var a=0;var l=0;var u=0;var c=0;var d=0;var p=0;var h=0;var f=0;c=i(1192,e-16|0)|0;d=i(1634,n-128|0)|0;p=i(832,n-128|0)|0;h=i(400,t-128|0)|0;f=i(2066,t-128|0)|0;o=(c+d|0)>>10|0;a=((c-p|0)-h|0)>>10|0;l=(c+f|0)>>10|0;if((o&255|0)!=(o|0)|0){o=r(255,s(0,o|0)|0)|0}if((a&255|0)!=(a|0)|0){a=r(255,s(0,a|0)|0)|0}if((l&255|0)!=(l|0)|0){l=r(255,s(0,l|0)|0)|0}u=255;u=u<<8|0;u=u+l|0;u=u<<8|0;u=u+a|0;u=u<<8|0;u=u+o|0;return u|0}return{init:C,doit:S}}var global;initglobal();var getModule=function(_broadwayOnHeadersDecoded,_broadwayOnPictureDecoded){function d(e){throw e}function n(){return function(){}}function ha(e){eval.call(k,e)}function w(e,t){e||A("Assertion failed: "+t)}function na(a){var b=p["_"+a];if(!b)try{b=eval("_"+a)}catch(c){}return w(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)"),b}function sa(e,t,n){switch(n=n||"i8","*"===n.charAt(n.length-1)&&(n="i32"),n){case"i1":I[e>>0]=t;break;case"i8":I[e>>0]=t;break;case"i16":J[e>>1]=t;break;case"i32":K[e>>2]=t;break;case"i64":ma=[t>>>0,(la=t,1<=+ta(la)?0<la?(0|va(+wa(la/4294967296),4294967295))>>>0:~~+xa((la-+(~~la>>>0))/4294967296)>>>0:0)],K[e>>2]=ma[0],K[e+4>>2]=ma[1];break;case"float":ya[e>>2]=t;break;case"double":za[e>>3]=t;break;default:A("invalid type for setValue: "+n)}}function Aa(e,t){switch(t=t||"i8","*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":return I[e>>0];case"i8":return I[e>>0];case"i16":return J[e>>1];case"i32":return K[e>>2];case"i64":return K[e>>2];case"float":return ya[e>>2];case"double":return za[e>>3];default:A("invalid type for setValue: "+t)}return k}function M(e,t,n,r){var s,o;"number"==typeof e?(s=i,o=e):(s=m,o=e.length);var a="string"==typeof t?t:k,n=n==Ba?r:[Ca,z.pb,z.Ec,z.bb][n===g?L:n](Math.max(o,a?1:t.length));if(s){for(r=n,w(0==(3&n)),e=n+(o&-4);r<e;r+=4)K[r>>2]=0;for(e=n+o;r<e;)I[r++>>0]=0;return n}if("i8"===a)return e.subarray||e.slice?N.set(e,n):N.set(new Uint8Array(e),n),n;for(var l,u,r=0;r<o;){var c=e[r];"function"==typeof c&&(c=z.sg(c)),s=a||t[r],0===s?r++:("i64"==s&&(s="i32"),sa(n+r,c,s),u!==s&&(l=z.oc(s),u=s),r+=l)}return n}function ka(e,t){if(0===t||!e)return"";for(var n,r=m,s=0;;){if(n=N[e+s>>0],128<=n)r=i;else if(0==n&&!t)break;if(s++,t&&s==t)break}t||(t=s);var o="";if(!r){for(;0<t;)n=String.fromCharCode.apply(String,N.subarray(e,e+Math.min(t,1024))),o=o?o+n:n,e+=1024,t-=1024;return o}for(r=new z.Da,s=0;s<t;s++)n=N[e+s>>0],o+=r.nb(n);return o}function Da(e){function t(n,r,s){var o,r=r||1/0,a="",p=[];if("N"===e[l]){for(l++,"K"===e[l]&&l++,o=[];"E"!==e[l];)if("S"===e[l]){l++;var f=e.indexOf("_",l);o.push(c[e.substring(l,f)||0]||"?"),l=f+1}else if("C"===e[l])o.push(o[o.length-1]),l+=2;else{var f=parseInt(e.substr(l)),g=f.toString().length;if(!f||!g){l--;break}var v=e.substr(l+g,f);o.push(v),c.push(v),l+=g+f}if(l++,o=o.join("::"),r--,0===r)return n?[o]:o}else("K"===e[l]||h&&"L"===e[l])&&l++,(f=parseInt(e.substr(l)))&&(g=f.toString().length,o=e.substr(l+g,f),l+=g+f);h=m,"I"===e[l]?(l++,f=t(i),g=t(i,1,i),a+=g[0]+" "+o+"<"+f.join(", ")+">"):a=o;e:for(;l<e.length&&0<r--;)if(o=e[l++],o in u)p.push(u[o]);else switch(o){case"P":p.push(t(i,1,i)[0]+"*");break;case"R":p.push(t(i,1,i)[0]+"&");break;case"L":l++,f=e.indexOf("E",l)-l,p.push(e.substr(l,f)),l+=f+2;break;case"A":f=parseInt(e.substr(l)),l+=f.toString().length,"_"!==e[l]&&d("?"),l++,p.push(t(i,1,i)[0]+" ["+f+"]");break;case"E":break e;default:a+="?"+o;break e}return!s&&1===p.length&&"void"===p[0]&&(p=[]),n?(a&&p.push(a+"?"),p):a+("("+p.join(", ")+")")}var n=!!p.___cxa_demangle;if(n)try{var r=Ca(e.length);ra(e.substr(1),r);var s=Ca(4),o=p.___cxa_demangle(r,0,0,s);if(0===Aa(s,"i32")&&o)return ka(o)}catch(a){}finally{r&&Ea(r),s&&Ea(s),o&&Ea(o)}var l=3,u={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},c=[],h=i,r=e;try{if("Object._main"==e||"_main"==e)return"main()";if("number"==typeof e&&(e=ka(e)),"_"!==e[0]||"_"!==e[1]||"Z"!==e[2])return e;switch(e[3]){case"n":return"operator new()";case"d":return"operator delete()"}r=t()}catch(f){r+="?"}return 0<=r.indexOf("?")&&!n&&z.Aa("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),r}function Fa(){var e;e:{if(e=Error(),!e.stack){try{d(Error(0))}catch(t){e=t}if(!e.stack){e="(no stack trace available)";break e}}e=e.stack.toString()}return e.replace(/__Z[\w\d_]+/g,function(e){var t=Da(e);return e===t?e:e+" ["+t+"]"})}function Na(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var n=t.ja;"number"==typeof n?t.Xa===g?z.Fa("v",n):z.Fa("vi",n,[t.Xa]):n(t.Xa===g?k:t.Xa)}}}function Ta(e){Oa.unshift(e)}function Ua(e){Ra.unshift(e)}function Va(e,t,n){return e=(new z.Da).Ac(e),n&&(e.length=n),t||e.push(0),e}function ra(e,t,n){for(e=Va(e,n),n=0;n<e.length;)I[t+n>>0]=e[n],n+=1}function qa(e,t){for(var n=0;n<e.length;n++)I[t+n>>0]=e[n]}function Ya(){S++,p.monitorRunDependencies&&p.monitorRunDependencies(S)}function Za(){if(S--,p.monitorRunDependencies&&p.monitorRunDependencies(S),0==S&&(Wa!==k&&(clearInterval(Wa),Wa=k),Xa)){var e=Xa;Xa=k,e()}}function V(e){return K[bb>>2]=e}function cb(e,t){for(var n=0,i=e.length-1;0<=i;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function db(e){var t="/"===e.charAt(0),n="/"===e.substr(-1),e=cb(e.split("/").filter(function(e){return!!e}),!t).join("/");return!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function eb(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),e=t[0],t=t[1];return e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function W(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function fb(){var e=Array.prototype.slice.call(arguments,0);return db(e.join("/"))}function X(e,t){return db(e+"/"+t)}function gb(){for(var e="",t=m,n=arguments.length-1;-1<=n&&!t;n--){if(t=0<=n?arguments[n]:B.yb(),"string"!=typeof t&&d(new TypeError("Arguments to path.resolve must be strings")),!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return e=cb(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."}function hb(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}for(var e=gb(e).substr(1),t=gb(t).substr(1),i=n(e.split("/")),r=n(t.split("/")),s=Math.min(i.length,r.length),o=s,a=0;a<s;a++)if(i[a]!==r[a]){o=a;break}for(s=[],a=o;a<i.length;a++)s.push("..");return s=s.concat(r.slice(o)),s.join("/")}function jb(e,t){ib[e]={input:[],K:[],sa:t},B.Ob(e,kb)}function zb(){d("TODO")}function Ab(e,t,n){if(e=B.qa(e),!e)return V(U.V),-1;try{return B.write(e,I,t,n)}catch(i){return B.sc(i),-1}}function Cb(e){return e=B.pc(e),e?e.C:-1}function Db(e,t){return Ab(Cb(t),e,Bb(e))}function Eb(e,t){var n;return n=255&e,n=0<=n?n:Math.pow(2,g)+n,I[Eb.Cc>>0]=n,-1==Ab(Cb(t),Eb.Cc,1)?((n=B.pc(t))&&(n.error=i),-1):n}function Fb(e){Fb.$c||(E=E+4095&-4096,Fb.$c=i,w(z.bb),Fb.Wc=z.bb,z.bb=function(){A("cannot dynamically allocate, sbrk now has control")});var t=E;return 0!=e&&Fb.Wc(e),t}function Hb(e,t,n){window._broadwayOnPictureDecoded(e,t,n)}function Ib(){window._broadwayOnHeadersDecoded()}function Jb(e,t){return Kb=e,Lb=t,Mb?(0==e?(Nb=function(){setTimeout(Ob,t)},Pb="timeout"):1==e&&(Nb=function(){Qb(Ob)},Pb="rAF"),0):1}function Rb(e,t,n,r){p.noExitRuntime=i,w(!Mb,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Mb=e,Sb=r;var s=Tb;Ob=function(){if(!H)if(0<Ub.length){var t=Date.now(),n=Ub.shift();if(n.ja(n.Xa),Vb){var i=Vb,o=0==i%1?i-1:Math.floor(i);Vb=n.dg?o:(8*i+(o+.5))/9}console.log('main loop blocker "'+n.name+'" took '+(Date.now()-t)+" ms"),p.setStatus&&(t=p.statusMessage||"Please wait...",n=Vb,i=Wb.ig,n?n<i?p.setStatus(t+" ("+(i-n)+"/"+i+")"):p.setStatus(t):p.setStatus("")),setTimeout(Ob,0)}else if(!(s<Tb))if(Xb=Xb+1|0,1==Kb&&1<Lb&&0!=Xb%Lb)Nb();else{"timeout"===Pb&&p.fg&&(p.fa("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),Pb="");e:if(!(H||p.preMainLoop&&p.preMainLoop()===m)){try{"undefined"!=typeof r?z.Fa("vi",e,[r]):z.Fa("v",e)}catch(a){if(a instanceof ia)break e;a&&"object"==typeof a&&a.stack&&p.fa("exception thrown: "+[a,a.stack]),d(a)}p.postMainLoop&&p.postMainLoop()}s<Tb||("object"==typeof SDL&&SDL.ac&&SDL.ac.Pd&&SDL.ac.Pd(),Nb())}},t&&0<t?Jb(0,1e3/t):Jb(1,1),Nb(),n&&d("SimulateInfiniteLoop")}function cc(e){var t=Date.now();if(0===bc)bc=t+1e3/60;else for(;t+2>=bc;)bc+=1e3/60;t=Math.max(bc-t,0),setTimeout(e,t)}function Qb(e){"undefined"==typeof window?cc(e):(window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||cc),window.requestAnimationFrame(e))}function xb(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]}function yb(e,t,n){function r(){n?n():d('Loading data file "'+e+'" failed.')}var s=new XMLHttpRequest;s.open("GET",e,i),s.responseType="arraybuffer",s.onload=function(){if(200==s.status||0==s.status&&s.response){var n=s.response;w(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),Za()}else r()},s.onerror=r,s.send(k),Ya()}function ec(){var e=p.canvas;dc.forEach(function(t){t(e.width,e.height)})}function fc(e,t,n){t&&n?(e.ae=t,e.Ad=n):(t=e.ae,n=e.Ad);var i=t,r=n;if(p.forcedAspectRatio&&0<p.forcedAspectRatio&&(i/r<p.forcedAspectRatio?i=Math.round(r*p.forcedAspectRatio):r=Math.round(i/p.forcedAspectRatio)),(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen)var s=Math.min(screen.width/i,screen.height/r),i=Math.round(i*s),r=Math.round(r*s);ac?(e.width!=i&&(e.width=i),e.height!=r&&(e.height=r),"undefined"!=typeof e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),"undefined"!=typeof e.style&&(i!=t||r!=n?(e.style.setProperty("width",i+"px","important"),e.style.setProperty("height",r+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}function ia(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function mc(e){function t(){if(!p.calledRun&&(p.calledRun=i,!H)){if(Sa||(Sa=i,Na(R)),Na(Pa),ba&&jc!==k&&p.fa("pre-main prep time: "+(Date.now()-jc)+" ms"),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p._main&&lc&&p.callMain(e),p.postRun)for("function"==typeof p.postRun&&(p.postRun=[p.postRun]);p.postRun.length;)Ua(p.postRun.shift());Na(Ra)}}if(e=e||p.arguments,jc===k&&(jc=Date.now()),!(0<S)){if(p.preRun)for("function"==typeof p.preRun&&(p.preRun=[p.preRun]);p.preRun.length;)Ta(p.preRun.shift());Na(Oa),!(0<S)&&!p.calledRun&&(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),t()},1)):t())}}function nc(e){p.noExitRuntime||(H=i,y=ic,Na(Qa),t?(process.stdout.once("drain",function(){process.exit(e)}),console.log(" "),setTimeout(function(){process.exit(e)},500)):da&&"function"==typeof quit&&quit(e),d(new ia(e)))}function A(e){e&&(p.print(e),p.fa(e)),H=i,d("abort() at "+Fa()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.")}var windowBak;"undefined"!=typeof window&&(windowBak=window);var window={_broadwayOnHeadersDecoded:_broadwayOnHeadersDecoded,_broadwayOnPictureDecoded:_broadwayOnPictureDecoded},g=void 0,i=!0,k=null,m=!1,p;p||(p=eval("(function() { try { return Module || {} } catch(e) { return {} } })()"));var aa={},r;for(r in p)p.hasOwnProperty(r)&&(aa[r]=p[r]);var t="object"==typeof process&&"function"==typeof require,ba="object"==typeof window,ca="function"==typeof importScripts,da=!ba&&!t&&!ca;if(t){p.print||(p.print=function(e){process.stdout.write(e+"\n")}),p.printErr||(p.printErr=function(e){process.stderr.write(e+"\n")});var fa=require("fs"),ga=require("path");p.read=function(e,t){var e=ga.normalize(e),n=fa.readFileSync(e);return!n&&e!=ga.resolve(e)&&(e=path.join(__dirname,"..","src",e),n=fa.readFileSync(e)),n&&!t&&(n=n.toString()),n},p.readBinary=function(e){return p.read(e,i)},p.load=function(e){ha(read(e))},p.thisProgram=1<process.argv.length?process.argv[1].replace(/\\/g,"/"):"unknown-program",p.arguments=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=p),process.on("uncaughtException",function(e){e instanceof ia||d(e)})}else da?(p.print||(p.print=print),"undefined"!=typeof printErr&&(p.printErr=printErr),p.read="undefined"!=typeof read?read:function(){d("no read() available (jsc?)")},p.readBinary=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(e=read(e,"binary"),w("object"==typeof e),e)},"undefined"!=typeof scriptArgs?p.arguments=scriptArgs:"undefined"!=typeof arguments&&(p.arguments=arguments),this.Module=p,eval("if (typeof gc === 'function' && gc.toString().indexOf('[native code]') > 0) var gc = undefined")):ba||ca?(p.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,m),t.send(k),t.responseText},"undefined"!=typeof arguments&&(p.arguments=arguments),"undefined"!=typeof console?(p.print||(p.print=function(e){console.log(e)}),p.printErr||(p.printErr=function(e){console.log(e)})):p.print||(p.print=n()),ba?window.Module=p:p.load=importScripts):d("Unknown runtime environment. Where are we?");!p.load&&p.read&&(p.load=function(e){ha(p.read(e))}),p.print||(p.print=n()),p.printErr||(p.printErr=p.print),p.arguments||(p.arguments=[]),p.thisProgram||(p.thisProgram="./this.program"),p.print=p.print,p.fa=p.printErr,p.preRun=[],p.postRun=[];for(r in aa)aa.hasOwnProperty(r)&&(p[r]=aa[r]);var z={Yd:function(e){ja=e},xd:function(){return ja},Tb:function(){return y},Sb:function(e){y=e},oc:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===e[e.length-1]?z.ia:"i"===e[0]?(e=parseInt(e.substr(1)),w(0===e%8),e/8):0}},vd:function(e){return Math.max(z.oc(e),z.ia)},Qf:16,ng:function(e,t,n){return n||"i64"!=e&&"double"!=e?e?Math.min(t||(e?z.vd(e):0),z.ia):Math.min(t,8):8},Fa:function(e,t,n){return n&&n.length?(n.splice||(n=Array.prototype.slice.call(n)),n.splice(0,0,t),p["dynCall_"+e].apply(k,n)):p["dynCall_"+e].call(k,t)},eb:[],Vc:function(e){for(var t=0;t<z.eb.length;t++)if(!z.eb[t])return z.eb[t]=e,2*(1+t);d("Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.")},Sd:function(e){z.eb[(e-2)/2]=k},og:function(a,b){z.wb||(z.wb={});var c=z.wb[a];if(c)return c;for(var c=[],e=0;e<b;e++)c.push(String.fromCharCode(36)+e);e=ka(a),'"'===e[0]&&(e.indexOf('"',1)===e.length-1?e=e.substr(1,e.length-2):A("invalid EM_ASM input |"+e+"|. Please use EM_ASM(..code..) (no quotes) or EM_ASM({ ..code($0).. }, input) (to input values)"));try{var f=eval("(function(Module, FS) { return function("+c.join(",")+"){ "+e+" } })")(p,"undefined"!=typeof B?B:k)}catch(h){p.fa("error in executing inline EM_ASM code: "+h+" on: \n\n"+e+"\n\nwith args |"+c+"| (make sure to use the right one out of EM_ASM, EM_ASM_ARGS, etc.)"),d(h)}return z.wb[a]=f},Aa:function(e){z.Aa.Rb||(z.Aa.Rb={}),z.Aa.Rb[e]||(z.Aa.Rb[e]=1,p.fa(e))},Cb:{},rg:function(e,t){w(t),z.Cb[t]||(z.Cb[t]={});var n=z.Cb[t];return n[e]||(n[e]=function(){return z.Fa(t,e,arguments)}),n[e]},Da:function(){var e=[],t=0;this.nb=function(n){if(n&=255,0==e.length)return 0==(128&n)?String.fromCharCode(n):(e.push(n),t=192==(224&n)?1:224==(240&n)?2:3,"");if(t&&(e.push(n),t--,0<t))return"";var n=e[0],i=e[1],r=e[2],s=e[3];return 2==e.length?n=String.fromCharCode((31&n)<<6|63&i):3==e.length?n=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r):(n=(7&n)<<18|(63&i)<<12|(63&r)<<6|63&s,n=String.fromCharCode(((n-65536)/1024|0)+55296,(n-65536)%1024+56320)),e.length=0,n},this.Ac=function(e){for(var e=unescape(encodeURIComponent(e)),t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}},pg:function(){d("You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work")},pb:function(e){var t=y;return y=y+e|0,y=y+15&-16,t},Ec:function(e){var t=D;return D=D+e|0,D=D+15&-16,t},bb:function(e){var t=E;return E=E+e|0,E=E+15&-16,E>=F&&A("Cannot enlarge memory arrays. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value "+F+", (2) compile with ALLOW_MEMORY_GROWTH which adjusts the size at runtime but prevents some optimizations, or (3) set Module.TOTAL_MEMORY before the program runs."),t},ub:function(e,t){return Math.ceil(e/(t?t:16))*(t?t:16)},Fg:function(e,t,n){return n?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)},Pc:8,ia:4,Rf:0};p.Runtime=z,z.addFunction=z.Vc,z.removeFunction=z.Sd;var H=m,la,ma,ja,oa,pa;!function(){function a(t){return t=t.toString().match(e).slice(1),{arguments:t[0],body:t[1],returnValue:t[2]}}var b={stackSave:function(){z.Tb()},stackRestore:function(){z.Sb()},arrayToC:function(e){var t=z.pb(e.length);return qa(e,t),t},stringToC:function(e){var t=0;return e!==k&&e!==g&&0!==e&&(t=z.pb((e.length<<2)+1),ra(e,t)),t}},c={string:b.stringToC,array:b.arrayToC};pa=function(e,t,n,i){var r=na(e),s=[],e=0;if(i)for(var o=0;o<i.length;o++){var a=c[n[o]];a?(0===e&&(e=z.Tb()),s[o]=a(i[o])):s[o]=i[o]}return n=r.apply(k,s),"string"===t&&(n=ka(n)),0!==e&&z.Sb(e),n};var e=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,f={},h;for(h in b)b.hasOwnProperty(h)&&(f[h]=a(b[h]));oa=function(b,c,e){var e=e||[],h=na(b),b=e.every(function(e){return"number"===e}),x="string"!==c;if(x&&b)return h;var s=e.map(function(e,t){return"$"+t}),c="(function("+s.join(",")+") {",v=e.length;if(!b)for(var c=c+("var stack = "+f.stackSave.body+";"),G=0;G<v;G++){var ua=s[G],ea=e[G];"number"!==ea&&(ea=f[ea+"ToC"],c+="var "+ea.arguments+" = "+ua+";",c+=ea.body+";",c+=ua+"="+ea.returnValue+";")}return e=a(function(){return h}).returnValue,c+="var ret = "+e+"("+s.join(",")+");",x||(e=a(function(){return ka}).returnValue,c+="ret = "+e+"(ret);"),b||(c+=f.stackRestore.body.replace("()","(stack)")+";"),eval(c+"return ret})")}}(),p.cwrap=oa,p.ccall=pa,p.setValue=sa,p.getValue=Aa;var L=2,Ba=4;p.ALLOC_NORMAL=0,p.ALLOC_STACK=1,p.ALLOC_STATIC=L,p.ALLOC_DYNAMIC=3,p.ALLOC_NONE=Ba,p.allocate=M,p.Pointer_stringify=ka,p.UTF16ToString=function(e){for(var t=0,n="";;){var i=J[e+2*t>>1];if(0==i)return n;++t,n+=String.fromCharCode(i)}},p.stringToUTF16=function(e,t){for(var n=0;n<e.length;++n)J[t+2*n>>1]=e.charCodeAt(n);J[t+2*e.length>>1]=0},p.UTF32ToString=function(e){for(var t=0,n="";;){var i=K[e+4*t>>2];if(0==i)return n;++t,65536<=i?(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i)):n+=String.fromCharCode(i)}},p.stringToUTF32=function(e,t){for(var n=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);if(55296<=r&&57343>=r)var s=e.charCodeAt(++i),r=65536+((1023&r)<<10)|1023&s;K[t+4*n>>2]=r,++n}K[t+4*n>>2]=0},p.stackTrace=function(){return Fa()};for(var I,N,J,Ga,K,Ha,ya,za,Ia=0,D=0,Ja=0,y=0,Ka=0,La=0,E=0,Ma=p.TOTAL_STACK||5242880,F=p.TOTAL_MEMORY||52428800,O=65536;O<F||O<2*Ma;)O=16777216>O?2*O:O+16777216;
O!==F&&(p.fa("increasing TOTAL_MEMORY to "+O+" to be compliant with the asm.js spec"),F=O),w("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var Q=new ArrayBuffer(F);I=new Int8Array(Q),J=new Int16Array(Q),K=new Int32Array(Q),N=new Uint8Array(Q),Ga=new Uint16Array(Q),Ha=new Uint32Array(Q),ya=new Float32Array(Q),za=new Float64Array(Q),K[0]=255,w(255===N[0]&&0===N[3],"Typed arrays 2 must be run on a little-endian system"),p.HEAP=g,p.buffer=Q,p.HEAP8=I,p.HEAP16=J,p.HEAP32=K,p.HEAPU8=N,p.HEAPU16=Ga,p.HEAPU32=Ha,p.HEAPF32=ya,p.HEAPF64=za;var Oa=[],R=[],Pa=[],Qa=[],Ra=[],Sa=m;p.addOnPreRun=p.Xf=Ta,p.addOnInit=p.Uf=function(e){R.unshift(e)},p.addOnPreMain=p.Wf=function(e){Pa.unshift(e)},p.addOnExit=p.Tf=function(e){Qa.unshift(e)},p.addOnPostRun=p.Vf=Ua,p.intArrayFromString=Va,p.intArrayToString=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];255<i&&(i&=255),t.push(String.fromCharCode(i))}return t.join("")},p.writeStringToMemory=ra,p.writeArrayToMemory=qa,p.writeAsciiToMemory=function(e,t,n){for(var i=0;i<e.length;i++)I[t+i>>0]=e.charCodeAt(i);n||(I[t+e.length>>0]=0)},Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var n=65535&e,i=65535&t;return n*i+((e>>>16)*i+n*(t>>>16)<<16)|0}),Math.vg=Math.imul;var ta=Math.abs,xa=Math.ceil,wa=Math.floor,va=Math.min,S=0,Wa=k,Xa=k;p.addRunDependency=Ya,p.removeRunDependency=Za,p.preloadedImages={},p.preloadedAudios={};var T=k,Ia=8,D=Ia+7808;R.push(),M([0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,0,0,0,0,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,0,0,0,0,10,0,0,0,13,0,0,0,16,0,0,0,11,0,0,0,14,0,0,0,18,0,0,0,13,0,0,0,16,0,0,0,20,0,0,0,14,0,0,0,18,0,0,0,23,0,0,0,16,0,0,0,20,0,0,0,25,0,0,0,18,0,0,0,23,0,0,0,29,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,7,0,0,0,8,0,0,0,9,0,0,0,10,0,0,0,11,0,0,0,12,0,0,0,13,0,0,0,14,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,18,0,0,0,19,0,0,0,20,0,0,0,21,0,0,0,22,0,0,0,23,0,0,0,24,0,0,0,25,0,0,0,26,0,0,0,27,0,0,0,28,0,0,0,29,0,0,0,29,0,0,0,30,0,0,0,31,0,0,0,32,0,0,0,32,0,0,0,33,0,0,0,34,0,0,0,34,0,0,0,35,0,0,0,35,0,0,0,36,0,0,0,36,0,0,0,37,0,0,0,37,0,0,0,37,0,0,0,38,0,0,0,38,0,0,0,38,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,128,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,1,0,0,0,4,0,0,0,5,0,0,0,2,0,0,0,3,0,0,0,6,0,0,0,7,0,0,0,8,0,0,0,9,0,0,0,12,0,0,0,13,0,0,0,10,0,0,0,11,0,0,0,14,0,0,0,15,0,0,0,47,31,15,0,23,27,29,30,7,11,13,14,39,43,45,46,16,3,5,10,12,19,21,26,28,35,37,42,44,1,2,4,8,17,18,20,24,6,9,22,25,32,33,34,36,40,38,41,0,16,1,2,4,8,32,3,5,10,12,15,47,7,11,13,14,6,9,31,35,37,42,44,33,34,36,40,39,43,45,46,17,18,20,24,19,21,26,28,23,27,29,30,22,25,38,41,17,1,0,0,0,0,0,0,34,18,1,1,0,0,0,0,50,34,18,2,0,0,0,0,67,51,34,34,18,18,2,2,83,67,51,35,18,18,2,2,19,35,67,51,99,83,2,2,0,0,101,85,68,68,52,52,35,35,35,35,19,19,19,19,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,249,233,217,200,200,184,184,167,167,167,167,151,151,151,151,134,134,134,134,134,134,134,134,118,118,118,118,118,118,118,118,230,214,198,182,165,165,149,149,132,132,132,132,116,116,116,116,100,100,100,100,84,84,84,84,67,67,67,67,67,67,67,67,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,19,19,19,19,19,19,19,19,3,3,3,3,3,3,3,3,214,182,197,197,165,165,149,149,132,132,132,132,84,84,84,84,68,68,68,68,4,4,4,4,115,115,115,115,115,115,115,115,99,99,99,99,99,99,99,99,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,19,19,19,19,19,19,19,19,197,181,165,5,148,148,116,116,52,52,36,36,131,131,131,131,99,99,99,99,83,83,83,83,67,67,67,67,19,19,19,19,181,149,164,164,132,132,36,36,20,20,4,4,115,115,115,115,99,99,99,99,83,83,83,83,67,67,67,67,51,51,51,51,166,6,21,21,132,132,132,132,147,147,147,147,147,147,147,147,115,115,115,115,115,115,115,115,99,99,99,99,99,99,99,99,83,83,83,83,83,83,83,83,67,67,67,67,67,67,67,67,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,150,6,21,21,116,116,116,116,131,131,131,131,131,131,131,131,99,99,99,99,99,99,99,99,67,67,67,67,67,67,67,67,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,134,6,37,37,20,20,20,20,115,115,115,115,115,115,115,115,99,99,99,99,99,99,99,99,51,51,51,51,51,51,51,51,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,22,6,117,117,36,36,36,36,83,83,83,83,83,83,83,83,98,98,98,98,98,98,98,98,98,98,98,98,98,98,98,98,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,21,5,100,100,35,35,35,35,82,82,82,82,82,82,82,82,66,66,66,66,66,66,66,66,50,50,50,50,50,50,50,50,4,20,35,35,51,51,83,83,65,65,65,65,65,65,65,65,4,20,67,67,34,34,34,34,49,49,49,49,49,49,49,49,3,19,50,50,33,33,33,33,2,18,33,33,0,0,0,0,0,0,0,0,0,0,102,32,38,16,6,8,101,24,101,24,67,16,67,16,67,16,67,16,67,16,67,16,67,16,67,16,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,0,0,0,0,0,0,0,0,106,64,74,48,42,40,10,32,105,56,105,56,73,40,73,40,41,32,41,32,9,24,9,24,104,48,104,48,104,48,104,48,72,32,72,32,72,32,72,32,40,24,40,24,40,24,40,24,8,16,8,16,8,16,8,16,103,40,103,40,103,40,103,40,103,40,103,40,103,40,103,40,71,24,71,24,71,24,71,24,71,24,71,24,71,24,71,24,110,96,78,88,46,80,14,80,110,88,78,80,46,72,14,72,13,64,13,64,77,72,77,72,45,64,45,64,13,56,13,56,109,80,109,80,77,64,77,64,45,56,45,56,13,48,13,48,107,72,107,72,107,72,107,72,107,72,107,72,107,72,107,72,75,56,75,56,75,56,75,56,75,56,75,56,75,56,75,56,43,48,43,48,43,48,43,48,43,48,43,48,43,48,43,48,11,40,11,40,11,40,11,40,11,40,11,40,11,40,11,40,0,0,0,0,47,104,47,104,16,128,80,128,48,128,16,120,112,128,80,120,48,120,16,112,112,120,80,112,48,112,16,104,111,112,111,112,79,104,79,104,47,96,47,96,15,96,15,96,111,104,111,104,79,96,79,96,47,88,47,88,15,88,15,88,0,0,0,0,0,0,0,0,102,56,70,32,38,32,6,16,102,48,70,24,38,24,6,8,101,40,101,40,37,16,37,16,100,32,100,32,100,32,100,32,100,24,100,24,100,24,100,24,67,16,67,16,67,16,67,16,67,16,67,16,67,16,67,16,0,0,0,0,0,0,0,0,105,72,73,56,41,56,9,48,8,40,8,40,72,48,72,48,40,48,40,48,8,32,8,32,103,64,103,64,103,64,103,64,71,40,71,40,71,40,71,40,39,40,39,40,39,40,39,40,7,24,7,24,7,24,7,24,0,0,0,0,109,120,109,120,110,128,78,128,46,128,14,128,46,120,14,120,78,120,46,112,77,112,77,112,13,112,13,112,109,112,109,112,77,104,77,104,45,104,45,104,13,104,13,104,109,104,109,104,77,96,77,96,45,96,45,96,13,96,13,96,12,88,12,88,12,88,12,88,76,88,76,88,76,88,76,88,44,88,44,88,44,88,44,88,12,80,12,80,12,80,12,80,108,96,108,96,108,96,108,96,76,80,76,80,76,80,76,80,44,80,44,80,44,80,44,80,12,72,12,72,12,72,12,72,107,88,107,88,107,88,107,88,107,88,107,88,107,88,107,88,75,72,75,72,75,72,75,72,75,72,75,72,75,72,75,72,43,72,43,72,43,72,43,72,43,72,43,72,43,72,43,72,11,64,11,64,11,64,11,64,11,64,11,64,11,64,11,64,107,80,107,80,107,80,107,80,107,80,107,80,107,80,107,80,75,64,75,64,75,64,75,64,75,64,75,64,75,64,75,64,43,64,43,64,43,64,43,64,43,64,43,64,43,64,43,64,11,56,11,56,11,56,11,56,11,56,11,56,11,56,11,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,24,70,56,38,56,6,16,102,72,70,48,38,48,6,8,37,40,37,40,69,40,69,40,37,32,37,32,69,32,69,32,37,24,37,24,101,64,101,64,69,24,69,24,37,16,37,16,100,56,100,56,100,56,100,56,100,48,100,48,100,48,100,48,100,40,100,40,100,40,100,40,100,32,100,32,100,32,100,32,100,24,100,24,100,24,100,24,68,16,68,16,68,16,68,16,36,8,36,8,36,8,36,8,4,0,4,0,4,0,4,0,0,0,10,128,106,128,74,128,42,128,10,120,106,120,74,120,42,120,10,112,106,112,74,112,42,112,10,104,41,104,41,104,9,96,9,96,73,104,73,104,41,96,41,96,9,88,9,88,105,104,105,104,73,96,73,96,41,88,41,88,9,80,9,80,104,96,104,96,104,96,104,96,72,88,72,88,72,88,72,88,40,80,40,80,40,80,40,80,8,72,8,72,8,72,8,72,104,88,104,88,104,88,104,88,72,80,72,80,72,80,72,80,40,72,40,72,40,72,40,72,8,64,8,64,8,64,8,64,7,56,7,56,7,56,7,56,7,56,7,56,7,56,7,56,7,48,7,48,7,48,7,48,7,48,7,48,7,48,7,48,71,72,71,72,71,72,71,72,71,72,71,72,71,72,71,72,7,40,7,40,7,40,7,40,7,40,7,40,7,40,7,40,103,80,103,80,103,80,103,80,103,80,103,80,103,80,103,80,71,64,71,64,71,64,71,64,71,64,71,64,71,64,71,64,39,64,39,64,39,64,39,64,39,64,39,64,39,64,39,64,7,32,7,32,7,32,7,32,7,32,7,32,7,32,7,32,6,8,38,8,0,0,6,0,6,16,38,16,70,16,0,0,6,24,38,24,70,24,102,24,6,32,38,32,70,32,102,32,6,40,38,40,70,40,102,40,6,48,38,48,70,48,102,48,6,56,38,56,70,56,102,56,6,64,38,64,70,64,102,64,6,72,38,72,70,72,102,72,6,80,38,80,70,80,102,80,6,88,38,88,70,88,102,88,6,96,38,96,70,96,102,96,6,104,38,104,70,104,102,104,6,112,38,112,70,112,102,112,6,120,38,120,70,120,102,120,6,128,38,128,70,128,102,128,0,0,67,16,2,0,2,0,33,8,33,8,33,8,33,8,103,32,103,32,72,32,40,32,71,24,71,24,39,24,39,24,6,32,6,32,6,32,6,32,6,24,6,24,6,24,6,24,6,16,6,16,6,16,6,16,102,24,102,24,102,24,102,24,38,16,38,16,38,16,38,16,6,8,6,8,6,8,6,8,3,0,0,0,15,0,0,0,1,0,0,0,10,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,3,0,0,0,19,0,0,0,1,0,0,0,18,0,0,0,0,0,0,0,17,0,0,0,4,0,0,0,16,0,0,0,3,0,0,0,23,0,0,0,1,0,0,0,22,0,0,0,0,0,0,0,21,0,0,0,4,0,0,0,20,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,4,0,0,0,1,0,0,0,15,0,0,0,2,0,0,0,10,0,0,0,4,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,12,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,2,0,0,0,4,0,0,0,13,0,0,0,255,0,0,0,8,0,0,0,1,0,0,0,19,0,0,0,2,0,0,0,18,0,0,0,4,0,0,0,17,0,0,0,255,0,0,0,16,0,0,0,1,0,0,0,23,0,0,0,2,0,0,0,22,0,0,0,4,0,0,0,21,0,0,0,255,0,0,0,20,0,0,0,1,0,0,0,10,0,0,0,1,0,0,0,11,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,1,0,0,0,14,0,0,0,1,0,0,0,15,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,5,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,7,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,13,0,0,0,1,0,0,0,18,0,0,0,1,0,0,0,19,0,0,0,4,0,0,0,16,0,0,0,4,0,0,0,17,0,0,0,1,0,0,0,22,0,0,0,1,0,0,0,23,0,0,0,4,0,0,0,20,0,0,0,4,0,0,0,21,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,0,0,0,0,15,0,0,0,4,0,0,0,10,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,11,0,0,0,4,0,0,0,14,0,0,0,0,0,0,0,17,0,0,0,4,0,0,0,16,0,0,0,0,0,0,0,19,0,0,0,4,0,0,0,18,0,0,0,0,0,0,0,21,0,0,0,4,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,4,0,0,0,22,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,8,0,0,0,12,0,0,0,8,0,0,0,12,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,8,0,0,0,12,0,0,0,8,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,8,0,0,0,8,0,0,0,12,0,0,0,12,0,0,0,8,0,0,0,8,0,0,0,12,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,3,0,0,0,15,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,3,0,0,0,15,0,0,0,0,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,3,0,0,0,15,0,0,0,1,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,3,0,0,0,15,0,0,0,1,0,0,0,10,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,7,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,13,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,3,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,4,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,4,0,0,0,2,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,2,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,15,0,0,0,2,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,15,0,0,0,2,0,0,0,10,0,0,0,4,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,12,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,12,0,0,0,255,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,2,0,0,0,255,0,0,0,8,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,2,0,0,0,4,0,0,0,13,0,0,0,255,0,0,0,8,0,0,0,1,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,10,0,0,0,4,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,10,0,0,0,1,0,0,0,11,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,10,0,0,0,1,0,0,0,11,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,4,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,1,0,0,0,15,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,1,0,0,0,15,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,5,0,0,0,4,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,3,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,12,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,7,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,13,0,0,0,0,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,7,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,3,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,0,0,0,0,13,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,15,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,0,0,0,0,15,0,0,0,4,0,0,0,10,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,11,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,11,0,0,0,4,0,0,0,14,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,7,0,0,0,8,0,0,0,9,0,0,0,10,0,0,0,11,0,0,0,12,0,0,0,13,0,0,0,14,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,5,6,7,8,9,10,12,13,15,17,20,22,25,28,32,36,40,45,50,56,63,71,80,90,101,113,127,144,162,182,203,226,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,3,3,3,3,4,4,4,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,2,1,2,3,1,2,3,2,2,3,2,2,4,2,3,4,2,3,4,3,3,5,3,4,6,3,4,6,4,5,7,4,5,8,4,6,9,5,7,10,6,8,11,6,8,13,7,10,14,8,11,16,9,12,18,10,13,20,11,15,23,13,17,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,69,67,79,68,69,82,32,73,78,73,84,73,65,76,73,90,65,84,73,79,78,32,70,65,73,76,69,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",Ba,z.Pc);var $a=z.ub(M(12,"i8",L),8);w(0==$a%8);var U={O:1,Q:2,Ef:3,De:4,ha:5,Zb:6,be:7,$e:8,V:9,oe:10,Ca:11,Of:11,Mc:12,qb:13,ye:14,mf:15,ga:16,Xb:17,Oc:18,Qa:19,Sa:20,pa:21,B:22,Ve:23,Lc:24,Nc:25,Lf:26,ze:27,hf:28,Ua:29,Bf:30,Oe:31,uf:32,ve:33,yf:34,df:42,Be:43,pe:44,Fe:45,Ge:46,He:47,Ne:48,Mf:49,Ye:50,Ee:51,te:35,af:37,ge:52,je:53,Pf:54,We:55,ke:56,le:57,ue:35,me:59,kf:60,Ze:61,If:62,jf:63,ef:64,ff:65,Af:66,bf:67,ee:68,Ff:69,qe:70,vf:71,Qe:72,we:73,ie:74,qf:76,he:77,zf:78,Ie:79,Je:80,Me:81,Le:82,Ke:83,lf:38,sb:39,Re:36,rb:40,Ta:95,tf:96,se:104,Xe:105,fe:97,xf:91,of:88,gf:92,Cf:108,Wb:111,ce:98,re:103,Ue:101,Se:100,Jf:110,Ae:112,Yb:113,Jc:115,Hc:114,Ic:89,Pe:90,wf:93,Df:94,de:99,Te:102,Kc:106,Ra:107,Kf:109,Nf:87,xe:122,Gf:116,pf:95,cf:123,Ce:84,rf:75,ne:125,nf:131,sf:130,Hf:86},ab={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},bb=0,ib=[],kb={open:function(e){var t=ib[e.g.ob];t||d(new B.e(U.Qa)),e.N=t,e.seekable=m},close:function(e){e.N.sa.flush(e.N)},flush:function(e){e.N.sa.flush(e.N)},M:function(e,t,n,i){(!e.N||!e.N.sa.rc)&&d(new B.e(U.Zb));for(var r=0,s=0;s<i;s++){var o;try{o=e.N.sa.rc(e.N)}catch(a){d(new B.e(U.ha))}if(o===g&&0===r&&d(new B.e(U.Ca)),o===k||o===g)break;r++,t[n+s]=o}return r&&(e.g.timestamp=Date.now()),r},write:function(e,t,n,i){(!e.N||!e.N.sa.Lb)&&d(new B.e(U.Zb));for(var r=0;r<i;r++)try{e.N.sa.Lb(e.N,t[n+r])}catch(s){d(new B.e(U.ha))}return i&&(e.g.timestamp=Date.now()),r}},mb={rc:function(e){if(!e.input.length){var n=k;if(t){if(n=process.stdin.read(),!n){if(process.stdin._readableState&&process.stdin._readableState.ended)return k;return}}else"undefined"!=typeof window&&"function"==typeof window.prompt?(n=window.prompt("Input: "),n!==k&&(n+="\n")):"function"==typeof readline&&(n=readline(),n!==k&&(n+="\n"));if(!n)return k;e.input=Va(n,i)}return e.input.shift()},flush:function(e){e.K&&0<e.K.length&&(p.print(e.K.join("")),e.K=[])},Lb:function(e,t){t===k||10===t?(p.print(e.K.join("")),e.K=[]):e.K.push(lb.nb(t))}},nb={Lb:function(e,t){t===k||10===t?(p.printErr(e.K.join("")),e.K=[]):e.K.push(lb.nb(t))},flush:function(e){e.K&&0<e.K.length&&(p.printErr(e.K.join("")),e.K=[])}},Y={U:k,F:function(){return Y.createNode(k,"/",16895,0)},createNode:function(e,t,n,i){return(B.Bd(n)||B.Cd(n))&&d(new B.e(U.O)),Y.U||(Y.U={dir:{g:{S:Y.n.S,I:Y.n.I,ra:Y.n.ra,ba:Y.n.ba,rename:Y.n.rename,za:Y.n.za,Oa:Y.n.Oa,Na:Y.n.Na,ca:Y.n.ca},A:{$:Y.p.$}},file:{g:{S:Y.n.S,I:Y.n.I},A:{$:Y.p.$,M:Y.p.M,write:Y.p.write,Ea:Y.p.Ea,Ja:Y.p.Ja}},link:{g:{S:Y.n.S,I:Y.n.I,ta:Y.n.ta},A:{}},ec:{g:{S:Y.n.S,I:Y.n.I},A:B.bd}}),n=B.createNode(e,t,n,i),B.J(n.mode)?(n.n=Y.U.dir.g,n.p=Y.U.dir.A,n.k={}):B.isFile(n.mode)?(n.n=Y.U.file.g,n.p=Y.U.file.A,n.q=0,n.k=k):B.Ia(n.mode)?(n.n=Y.U.link.g,n.p=Y.U.link.A):B.ib(n.mode)&&(n.n=Y.U.ec.g,n.p=Y.U.ec.A),n.timestamp=Date.now(),e&&(e.k[t]=n),n},ud:function(e){if(e.k&&e.k.subarray){for(var t=[],n=0;n<e.q;++n)t.push(e.k[n]);return t}return e.k},qg:function(e){return e.k?e.k.subarray?e.k.subarray(0,e.q):new Uint8Array(e.k):new Uint8Array},lc:function(e,t){if(e.k&&e.k.subarray&&t>e.k.length&&(e.k=Y.ud(e),e.q=e.k.length),!e.k||e.k.subarray){var n=e.k?e.k.buffer.byteLength:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)|0),0!=n&&(t=Math.max(t,256)),n=e.k,e.k=new Uint8Array(t),0<e.q&&e.k.set(n.subarray(0,e.q),0))}else for(!e.k&&0<t&&(e.k=[]);e.k.length<t;)e.k.push(0)},Ud:function(e,t){if(e.q!=t)if(0==t)e.k=k,e.q=0;else{if(!e.k||e.k.subarray){var n=e.k;e.k=new Uint8Array(new ArrayBuffer(t)),n&&e.k.set(n.subarray(0,Math.min(t,e.q)))}else if(e.k||(e.k=[]),e.k.length>t)e.k.length=t;else for(;e.k.length<t;)e.k.push(0);e.q=t}},n:{S:function(e){var t={};return t.gg=B.ib(e.mode)?e.id:1,t.wg=e.id,t.mode=e.mode,t.Ig=1,t.uid=0,t.ug=0,t.ob=e.ob,t.size=B.J(e.mode)?4096:B.isFile(e.mode)?e.q:B.Ia(e.mode)?e.link.length:0,t.Zf=new Date(e.timestamp),t.Hg=new Date(e.timestamp),t.eg=new Date(e.timestamp),t.Zc=4096,t.$f=Math.ceil(t.size/t.Zc),t},I:function(e,t){t.mode!==g&&(e.mode=t.mode),t.timestamp!==g&&(e.timestamp=t.timestamp),t.size!==g&&Y.Ud(e,t.size)},ra:function(){d(B.Db[U.Q])},ba:function(e,t,n,i){return Y.createNode(e,t,n,i)},rename:function(e,t,n){if(B.J(e.mode)){var i;try{i=B.aa(t,n)}catch(r){}if(i)for(var s in i.k)d(new B.e(U.sb))}delete e.parent.k[e.name],e.name=n,t.k[n]=e,e.parent=t},za:function(e,t){delete e.k[t]},Oa:function(e,t){var n,i=B.aa(e,t);for(n in i.k)d(new B.e(U.sb));delete e.k[t]},Na:function(e){var t,n=[".",".."];for(t in e.k)e.k.hasOwnProperty(t)&&n.push(t);return n},ca:function(e,t,n){return e=Y.createNode(e,t,41471,0),e.link=n,e},ta:function(e){return B.Ia(e.mode)||d(new B.e(U.B)),e.link}},p:{M:function(e,t,n,i,r){var s=e.g.k;if(r>=e.g.q)return 0;if(e=Math.min(e.g.q-r,i),w(0<=e),8<e&&s.subarray)t.set(s.subarray(r,r+e),n);else for(i=0;i<e;i++)t[n+i]=s[r+i];return e},write:function(e,t,n,i,r,s){if(!i)return 0;if(e=e.g,e.timestamp=Date.now(),t.subarray&&(!e.k||e.k.subarray)){if(s)return e.k=t.subarray(n,n+i),e.q=i;if(0===e.q&&0===r)return e.k=new Uint8Array(t.subarray(n,n+i)),e.q=i;if(r+i<=e.q)return e.k.set(t.subarray(n,n+i),r),i}if(Y.lc(e,r+i),e.k.subarray&&t.subarray)e.k.set(t.subarray(n,n+i),r);else for(s=0;s<i;s++)e.k[r+s]=t[n+s];return e.q=Math.max(e.q,r+i),i},$:function(e,t,n){return 1===n?t+=e.position:2===n&&B.isFile(e.g.mode)&&(t+=e.g.q),0>t&&d(new B.e(U.B)),t},Ea:function(e,t,n){Y.lc(e.g,t+n),e.g.q=Math.max(e.g.q,t+n)},Ja:function(e,t,n,r,s,o,a){return B.isFile(e.g.mode)||d(new B.e(U.Qa)),n=e.g.k,2&a||n.buffer!==t&&n.buffer!==t.buffer?((0<s||s+r<e.g.q)&&(n=n.subarray?n.subarray(s,s+r):Array.prototype.slice.call(n,s,s+r)),e=i,(r=Ca(r))||d(new B.e(U.Mc)),t.set(n,r)):(e=m,r=n.byteOffset),{Lg:r,Yf:e}}}},ob=M(1,"i32*",L),pb=M(1,"i32*",L),qb=M(1,"i32*",L),B={root:k,La:[],ic:[k],oa:[],Jd:1,T:k,hc:"/",hb:m,vc:i,H:{},Gc:{yc:{Rc:1,Sc:2}},e:k,Db:{},sc:function(e){return e instanceof B.e||d(e+" : "+Fa()),V(e.cb)},u:function(e,t){if(e=gb(B.yb(),e),t=t||{},!e)return{path:"",g:k};var n,r={Bb:i,Nb:0};for(n in r)t[n]===g&&(t[n]=r[n]);8<t.Nb&&d(new B.e(U.rb));var r=cb(e.split("/").filter(function(e){return!!e}),m),s=B.root;n="/";for(var o=0;o<r.length;o++){var a=o===r.length-1;if(a&&t.parent)break;if(s=B.aa(s,r[o]),n=X(n,r[o]),B.ka(s)&&(!a||a&&t.Bb)&&(s=s.Ka.root),!a||t.R)for(a=0;B.Ia(s.mode);)s=B.ta(n),n=gb(eb(n),s),s=B.u(n,{Nb:t.Nb}).g,40<a++&&d(new B.e(U.rb))}return{path:n,g:s}},da:function(e){for(var t;;){if(B.jb(e))return e=e.F.Id,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Fb:function(e,t){for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i)|0;return(e+n>>>0)%B.T.length},tc:function(e){var t=B.Fb(e.parent.id,e.name);e.ma=B.T[t],B.T[t]=e},uc:function(e){var t=B.Fb(e.parent.id,e.name);if(B.T[t]===e)B.T[t]=e.ma;else for(t=B.T[t];t;){if(t.ma===e){t.ma=e.ma;break}t=t.ma}},aa:function(e,t){var n=B.Gd(e);for(n&&d(new B.e(n,e)),n=B.T[B.Fb(e.id,t)];n;n=n.ma){var i=n.name;if(n.parent.id===e.id&&i===t)return n}return B.ra(e,t)},createNode:function(e,t,n,i){return B.Va||(B.Va=function(e,t,n,i){e||(e=this),this.parent=e,this.F=e.F,this.Ka=k,this.id=B.Jd++,this.name=t,this.mode=n,this.n={},this.p={},this.ob=i},B.Va.prototype={},Object.defineProperties(B.Va.prototype,{M:{get:function(){return 365===(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},Dd:{get:function(){return B.J(this.mode)}},Gb:{get:function(){return B.ib(this.mode)}}})),e=new B.Va(e,t,n,i),B.tc(e),e},zb:function(e){B.uc(e)},jb:function(e){return e===e.parent},ka:function(e){return!!e.Ka},isFile:function(e){
return 32768===(61440&e)},J:function(e){return 16384===(61440&e)},Ia:function(e){return 40960===(61440&e)},ib:function(e){return 8192===(61440&e)},Bd:function(e){return 24576===(61440&e)},Cd:function(e){return 4096===(61440&e)},Ed:function(e){return 49152===(49152&e)},rd:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},wc:function(e){var t=B.rd[e];return"undefined"==typeof t&&d(Error("Unknown file open mode: "+e)),t},sd:function(e){var t=["r","w","rw"][2097155&e];return 512&e&&(t+="w"),t},na:function(e,t){return B.vc?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:U.qb},Gd:function(e){var t=B.na(e,"x");return t?t:e.n.ra?0:U.qb},Jb:function(e,t){try{return B.aa(e,t),U.Xb}catch(n){}return B.na(e,"wx")},kb:function(e,t,n){var i;try{i=B.aa(e,t)}catch(r){return r.cb}if(e=B.na(e,"wx"))return e;if(n){if(!B.J(i.mode))return U.Sa;if(B.jb(i)||B.da(i)===B.yb())return U.ga}else if(B.J(i.mode))return U.pa;return 0},Hd:function(e,t){return e?B.Ia(e.mode)?U.rb:B.J(e.mode)&&(0!==(2097155&t)||512&t)?U.pa:B.na(e,B.sd(t)):U.Q},Qc:4096,Kd:function(e,t){for(var t=t||B.Qc,n=e||0;n<=t;n++)if(!B.oa[n])return n;d(new B.e(U.Lc))},qa:function(e){return B.oa[e]},fc:function(e,t,i){B.Wa||(B.Wa=n(),B.Wa.prototype={},Object.defineProperties(B.Wa.prototype,{object:{get:function(){return this.g},set:function(e){this.g=e}},yg:{get:function(){return 1!==(2097155&this.D)}},zg:{get:function(){return 0!==(2097155&this.D)}},xg:{get:function(){return 1024&this.D}}}));var r,s=new B.Wa;for(r in e)s[r]=e[r];return e=s,t=B.Kd(t,i),e.C=t,B.oa[t]=e},dd:function(e){B.oa[e]=k},pc:function(e){return B.oa[e-1]},Eb:function(e){return e?e.C+1:0},bd:{open:function(e){e.p=B.td(e.g.ob).p,e.p.open&&e.p.open(e)},$:function(){d(new B.e(U.Ua))}},Ib:function(e){return e>>8},Gg:function(e){return 255&e},la:function(e,t){return e<<8|t},Ob:function(e,t){B.ic[e]={p:t}},td:function(e){return B.ic[e]},nc:function(e){for(var t=[],e=[e];e.length;){var n=e.pop();t.push(n),e.push.apply(e,n.La)}return t},Fc:function(e,t){function n(e){if(e){if(!n.pd)return n.pd=i,t(e)}else++s>=r.length&&t(k)}"function"==typeof e&&(t=e,e=m);var r=B.nc(B.root.F),s=0;r.forEach(function(t){return t.type.Fc?void t.type.Fc(t,e,n):n(k)})},F:function(e,t,n){var i,r="/"===n,s=!n;return r&&B.root&&d(new B.e(U.ga)),!r&&!s&&(i=B.u(n,{Bb:m}),n=i.path,i=i.g,B.ka(i)&&d(new B.e(U.ga)),B.J(i.mode)||d(new B.e(U.Sa))),t={type:e,Kg:t,Id:n,La:[]},e=e.F(t),e.F=t,t.root=e,r?B.root=e:i&&(i.Ka=t,i.F&&i.F.La.push(t)),e},Qg:function(e){e=B.u(e,{Bb:m}),B.ka(e.g)||d(new B.e(U.B));var e=e.g,t=e.Ka,n=B.nc(t);Object.keys(B.T).forEach(function(e){for(e=B.T[e];e;){var t=e.ma;-1!==n.indexOf(e.F)&&B.zb(e),e=t}}),e.Ka=k,t=e.F.La.indexOf(t),w(-1!==t),e.F.La.splice(t,1)},ra:function(e,t){return e.n.ra(e,t)},ba:function(e,t,n){var r=B.u(e,{parent:i}).g,e=W(e);(!e||"."===e||".."===e)&&d(new B.e(U.B));var s=B.Jb(r,e);return s&&d(new B.e(s)),r.n.ba||d(new B.e(U.O)),r.n.ba(r,e,t,n)},create:function(e,t){return t=4095&(t!==g?t:438),t|=32768,B.ba(e,t,0)},ea:function(e,t){return t=1023&(t!==g?t:511),t|=16384,B.ba(e,t,0)},lb:function(e,t,n){return"undefined"==typeof n&&(n=t,t=438),B.ba(e,8192|t,n)},ca:function(e,t){gb(e)||d(new B.e(U.Q));var n=B.u(t,{parent:i}).g;n||d(new B.e(U.Q));var r=W(t),s=B.Jb(n,r);return s&&d(new B.e(s)),n.n.ca||d(new B.e(U.O)),n.n.ca(n,r,e)},rename:function(e,t){var n,r,s,o=eb(e),a=eb(t),l=W(e),u=W(t);try{n=B.u(e,{parent:i}),r=n.g,n=B.u(t,{parent:i}),s=n.g}catch(c){d(new B.e(U.ga))}(!r||!s)&&d(new B.e(U.Q)),r.F!==s.F&&d(new B.e(U.Oc)),n=B.aa(r,l),a=hb(e,a),"."!==a.charAt(0)&&d(new B.e(U.B)),a=hb(t,o),"."!==a.charAt(0)&&d(new B.e(U.sb));var p;try{p=B.aa(s,u)}catch(h){}if(n!==p){o=B.J(n.mode),(l=B.kb(r,l,o))&&d(new B.e(l)),(l=p?B.kb(s,u,o):B.Jb(s,u))&&d(new B.e(l)),r.n.rename||d(new B.e(U.O)),(B.ka(n)||p&&B.ka(p))&&d(new B.e(U.ga)),s!==r&&(l=B.na(r,"w"))&&d(new B.e(l));try{B.H.willMovePath&&B.H.willMovePath(e,t)}catch(f){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+f.message)}B.uc(n);try{r.n.rename(n,s,u)}catch(m){d(m)}finally{B.tc(n)}try{B.H.onMovePath&&B.H.onMovePath(e,t)}catch(g){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+g.message)}}},Oa:function(e){var t=B.u(e,{parent:i}).g,n=W(e),r=B.aa(t,n),s=B.kb(t,n,i);s&&d(new B.e(s)),t.n.Oa||d(new B.e(U.O)),B.ka(r)&&d(new B.e(U.ga));try{B.H.willDeletePath&&B.H.willDeletePath(e)}catch(o){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+o.message)}t.n.Oa(t,n),B.zb(r);try{B.H.onDeletePath&&B.H.onDeletePath(e)}catch(a){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+a.message)}},Na:function(e){return e=B.u(e,{R:i}).g,e.n.Na||d(new B.e(U.Sa)),e.n.Na(e)},za:function(e){var t=B.u(e,{parent:i}).g,n=W(e),r=B.aa(t,n),s=B.kb(t,n,m);s&&(s===U.pa&&(s=U.O),d(new B.e(s))),t.n.za||d(new B.e(U.O)),B.ka(r)&&d(new B.e(U.ga));try{B.H.willDeletePath&&B.H.willDeletePath(e)}catch(o){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+o.message)}t.n.za(t,n),B.zb(r);try{B.H.onDeletePath&&B.H.onDeletePath(e)}catch(a){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+a.message)}},ta:function(e){return(e=B.u(e).g)||d(new B.e(U.Q)),e.n.ta||d(new B.e(U.B)),e.n.ta(e)},Dc:function(e,t){var n=B.u(e,{R:!t}).g;return n||d(new B.e(U.Q)),n.n.S||d(new B.e(U.O)),n.n.S(n)},Eg:function(e){return B.Dc(e,i)},Ya:function(e,t,n){e="string"==typeof e?B.u(e,{R:!n}).g:e,e.n.I||d(new B.e(U.O)),e.n.I(e,{mode:4095&t|e.mode&-4096,timestamp:Date.now()})},Bg:function(e,t){B.Ya(e,t,i)},jg:function(e,t){var n=B.qa(e);n||d(new B.e(U.V)),B.Ya(n.g,t)},dc:function(e,t,n,i){e="string"==typeof e?B.u(e,{R:!i}).g:e,e.n.I||d(new B.e(U.O)),e.n.I(e,{timestamp:Date.now()})},Cg:function(e,t,n){B.dc(e,t,n,i)},kg:function(e,t,n){(e=B.qa(e))||d(new B.e(U.V)),B.dc(e.g,t,n)},truncate:function(e,t){0>t&&d(new B.e(U.B));var n;n="string"==typeof e?B.u(e,{R:i}).g:e,n.n.I||d(new B.e(U.O)),B.J(n.mode)&&d(new B.e(U.pa)),B.isFile(n.mode)||d(new B.e(U.B));var r=B.na(n,"w");r&&d(new B.e(r)),n.n.I(n,{size:t,timestamp:Date.now()})},mg:function(e,t){var n=B.qa(e);n||d(new B.e(U.V)),0===(2097155&n.D)&&d(new B.e(U.B)),B.truncate(n.g,t)},Rg:function(e,t,n){e=B.u(e,{R:i}).g,e.n.I(e,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,s){""===e&&d(new B.e(U.Q));var o,t="string"==typeof t?B.wc(t):t,n=64&t?4095&("undefined"==typeof n?438:n)|32768:0;if("object"==typeof e)o=e;else{e=db(e);try{o=B.u(e,{R:!(131072&t)}).g}catch(a){}}var l=m;64&t&&(o?128&t&&d(new B.e(U.Xb)):(o=B.ba(e,n,0),l=i)),o||d(new B.e(U.Q)),B.ib(o.mode)&&(t&=-513),l||(n=B.Hd(o,t))&&d(new B.e(n)),512&t&&B.truncate(o,0),t&=-641,r=B.fc({g:o,path:B.da(o),D:t,seekable:i,position:0,p:o.p,$d:[],error:m},r,s),r.p.open&&r.p.open(r),p.logReadFiles&&!(1&t)&&(B.Mb||(B.Mb={}),e in B.Mb||(B.Mb[e]=1,p.printErr("read file: "+e)));try{B.H.onOpenFile&&(s=0,1!==(2097155&t)&&(s|=B.Gc.yc.Rc),0!==(2097155&t)&&(s|=B.Gc.yc.Sc),B.H.onOpenFile(e,s))}catch(u){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+u.message)}return r},close:function(e){try{e.p.close&&e.p.close(e)}catch(t){d(t)}finally{B.dd(e.C)}},$:function(e,t,n){return(!e.seekable||!e.p.$)&&d(new B.e(U.Ua)),e.position=e.p.$(e,t,n),e.$d=[],e.position},M:function(e,t,n,r,s){(0>r||0>s)&&d(new B.e(U.B)),1===(2097155&e.D)&&d(new B.e(U.V)),B.J(e.g.mode)&&d(new B.e(U.pa)),e.p.M||d(new B.e(U.B));var o=i;return"undefined"==typeof s?(s=e.position,o=m):e.seekable||d(new B.e(U.Ua)),t=e.p.M(e,t,n,r,s),o||(e.position+=t),t},write:function(e,t,n,r,s,o){(0>r||0>s)&&d(new B.e(U.B)),0===(2097155&e.D)&&d(new B.e(U.V)),B.J(e.g.mode)&&d(new B.e(U.pa)),e.p.write||d(new B.e(U.B)),1024&e.D&&B.$(e,0,2);var a=i;"undefined"==typeof s?(s=e.position,a=m):e.seekable||d(new B.e(U.Ua)),t=e.p.write(e,t,n,r,s,o),a||(e.position+=t);try{e.path&&B.H.onWriteToFile&&B.H.onWriteToFile(e.path)}catch(l){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+l.message)}return t},Ea:function(e,t,n){(0>t||0>=n)&&d(new B.e(U.B)),0===(2097155&e.D)&&d(new B.e(U.V)),!B.isFile(e.g.mode)&&!B.J(node.mode)&&d(new B.e(U.Qa)),e.p.Ea||d(new B.e(U.Ta)),e.p.Ea(e,t,n)},Ja:function(e,t,n,i,r,s,o){return 1===(2097155&e.D)&&d(new B.e(U.qb)),e.p.Ja||d(new B.e(U.Qa)),e.p.Ja(e,t,n,i,r,s,o)},Ha:function(e,t,n){return e.p.Ha||d(new B.e(U.Nc)),e.p.Ha(e,t,n)},Mg:function(e,t){t=t||{},t.D=t.D||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding&&d(Error('Invalid encoding type "'+t.encoding+'"'));var n,i=B.open(e,t.D),r=B.Dc(e).size,s=new Uint8Array(r);if(B.M(i,s,0,r,0),"utf8"===t.encoding){n="";for(var o=new z.Da,a=0;a<r;a++)n+=o.nb(s[a])}else"binary"===t.encoding&&(n=s);return B.close(i),n},Sg:function(e,t,n){n=n||{},n.D=n.D||"w",n.encoding=n.encoding||"utf8","utf8"!==n.encoding&&"binary"!==n.encoding&&d(Error('Invalid encoding type "'+n.encoding+'"')),e=B.open(e,n.D,n.mode),"utf8"===n.encoding?(t=new Uint8Array((new z.Da).Ac(t)),B.write(e,t,0,t.length,0,n.ad)):"binary"===n.encoding&&B.write(e,t,0,t.length,0,n.ad),B.close(e)},yb:function(){return B.hc},bg:function(e){e=B.u(e,{R:i}),B.J(e.g.mode)||d(new B.e(U.Sa));var t=B.na(e.g,"x");t&&d(new B.e(t)),B.hc=e.path},fd:function(){B.ea("/tmp"),B.ea("/home"),B.ea("/home/web_user")},ed:function(){B.ea("/dev"),B.Ob(B.la(1,3),{M:function(){return 0},write:function(){return 0}}),B.lb("/dev/null",B.la(1,3)),jb(B.la(5,0),mb),jb(B.la(6,0),nb),B.lb("/dev/tty",B.la(5,0)),B.lb("/dev/tty1",B.la(6,0));var e;if("undefined"!=typeof crypto){var n=new Uint8Array(1);e=function(){return crypto.getRandomValues(n),n[0]}}else e=t?function(){return require("crypto").randomBytes(1)[0]}:function(){return 256*Math.random()|0};B.X("/dev","random",e),B.X("/dev","urandom",e),B.ea("/dev/shm"),B.ea("/dev/shm/tmp")},od:function(){p.stdin?B.X("/dev","stdin",p.stdin):B.ca("/dev/tty","/dev/stdin"),p.stdout?B.X("/dev","stdout",k,p.stdout):B.ca("/dev/tty","/dev/stdout"),p.stderr?B.X("/dev","stderr",k,p.stderr):B.ca("/dev/tty1","/dev/stderr");var e=B.open("/dev/stdin","r");K[ob>>2]=B.Eb(e),w(0===e.C,"invalid handle for stdin ("+e.C+")"),e=B.open("/dev/stdout","w"),K[pb>>2]=B.Eb(e),w(1===e.C,"invalid handle for stdout ("+e.C+")"),e=B.open("/dev/stderr","w"),K[qb>>2]=B.Eb(e),w(2===e.C,"invalid handle for stderr ("+e.C+")")},jc:function(){B.e||(B.e=function(e,t){this.g=t,this.Xd=function(e){this.cb=e;for(var t in U)if(U[t]===e){this.code=t;break}},this.Xd(e),this.message=ab[e]},B.e.prototype=Error(),[U.Q].forEach(function(e){B.Db[e]=new B.e(e),B.Db[e].stack="<generic error, no stack>"}))},Zd:function(){B.jc(),B.T=Array(4096),B.F(Y,{},"/"),B.fd(),B.ed()},Ga:function(e,t,n){w(!B.Ga.hb,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),B.Ga.hb=i,B.jc(),p.stdin=e||p.stdin,p.stdout=t||p.stdout,p.stderr=n||p.stderr,B.od()},Qd:function(){B.Ga.hb=m;for(var e=0;e<B.oa.length;e++){var t=B.oa[e];t&&B.close(t)}},fb:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},Ag:function(e,t){var n=fb.apply(k,e);return t&&"/"==n[0]&&(n=n.substr(1)),n},Sf:function(e,t){return gb(t,e)},Pg:function(e){return db(e)},lg:function(e,t){var n=B.vb(e,t);return n.Ab?n.object:(V(n.error),k)},vb:function(e,t){try{var n=B.u(e,{R:!t}),e=n.path}catch(r){}var s={jb:m,Ab:m,error:0,name:k,path:k,object:k,Md:m,Od:k,Nd:k};try{n=B.u(e,{parent:i}),s.Md=i,s.Od=n.path,s.Nd=n.g,s.name=W(e),n=B.u(e,{R:!t}),s.Ab=i,s.path=n.path,s.object=n.g,s.name=n.g.name,s.jb="/"===n.path}catch(o){s.error=o.cb}return s},hd:function(e,t,n,i){return e=X("string"==typeof e?e:B.da(e),t),B.ea(e,B.fb(n,i))},ld:function(e,t){for(var e="string"==typeof e?e:B.da(e),n=t.split("/").reverse();n.length;){var i=n.pop();if(i){var r=X(e,i);try{B.ea(r)}catch(s){}e=r}}return r},gd:function(e,t,n,i,r){return e=X("string"==typeof e?e:B.da(e),t),B.create(e,B.fb(i,r))},xb:function(e,t,n,i,r,s){if(e=t?X("string"==typeof e?e:B.da(e),t):e,i=B.fb(i,r),r=B.create(e,i),n){if("string"==typeof n){for(var e=Array(n.length),t=0,o=n.length;t<o;++t)e[t]=n.charCodeAt(t);n=e}B.Ya(r,146|i),e=B.open(r,"w"),B.write(e,n,0,n.length,0,s),B.close(e),B.Ya(r,i)}return r},X:function(e,t,n,i){e=X("string"==typeof e?e:B.da(e),t),t=B.fb(!!n,!!i),B.X.Ib||(B.X.Ib=64);var r=B.la(B.X.Ib++,0);return B.Ob(r,{open:function(e){e.seekable=m},close:function(){i&&i.buffer&&i.buffer.length&&i(10)},M:function(e,t,i,r){for(var s=0,o=0;o<r;o++){var a;try{a=n()}catch(l){d(new B.e(U.ha))}if(a===g&&0===s&&d(new B.e(U.Ca)),a===k||a===g)break;s++,t[i+o]=a}return s&&(e.g.timestamp=Date.now()),s},write:function(e,t,n,r){for(var s=0;s<r;s++)try{i(t[n+s])}catch(o){d(new B.e(U.ha))}return r&&(e.g.timestamp=Date.now()),s}}),B.lb(e,t,r)},kd:function(e,t,n){return e=X("string"==typeof e?e:B.da(e),t),B.ca(n,e)},mc:function(e){if(e.Gb||e.Dd||e.link||e.k)return i;var t=i;if("undefined"!=typeof XMLHttpRequest&&d(Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.")),p.read)try{e.k=Va(p.read(e.url),i),e.q=e.k.length}catch(n){t=m}else d(Error("Cannot load without read() or XMLHttpRequest."));return t||V(U.ha),t},jd:function(e,t,n,r,s){function o(){this.Hb=m,this.Za=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||0>e)){var t=e%this.cd;return this.yd(e/this.cd|0)[t]}},o.prototype.Wd=function(e){this.yd=e},o.prototype.bc=function(){var e=new XMLHttpRequest;e.open("HEAD",n,m),e.send(k),200<=e.status&&300>e.status||304===e.status||d(Error("Couldn't load "+n+". Status: "+e.status));var t,r=Number(e.getResponseHeader("Content-length")),s=1048576;(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t||(s=r);var o=this;o.Wd(function(e){var t=e*s,a=(e+1)*s-1,a=Math.min(a,r-1);if("undefined"==typeof o.Za[e]){var l=o.Za;t>a&&d(Error("invalid range ("+t+", "+a+") or no bytes requested!")),a>r-1&&d(Error("only "+r+" bytes available! programmer error!"));var u=new XMLHttpRequest;u.open("GET",n,m),r!==s&&u.setRequestHeader("Range","bytes="+t+"-"+a),"undefined"!=typeof Uint8Array&&(u.responseType="arraybuffer"),u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),u.send(k),200<=u.status&&300>u.status||304===u.status||d(Error("Couldn't load "+n+". Status: "+u.status)),t=u.response!==g?new Uint8Array(u.response||[]):Va(u.responseText||"",i),l[e]=t}return"undefined"==typeof o.Za[e]&&d(Error("doXHR failed!")),o.Za[e]}),this.Uc=r,this.Tc=s,this.Hb=i},"undefined"!=typeof XMLHttpRequest){ca||d("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var a=new o;Object.defineProperty(a,"length",{get:function(){return this.Hb||this.bc(),this.Uc}}),Object.defineProperty(a,"chunkSize",{get:function(){return this.Hb||this.bc(),this.Tc}}),a={Gb:m,k:a}}else a={Gb:m,url:n};var l=B.gd(e,t,a,r,s);a.k?l.k=a.k:a.url&&(l.k=k,l.url=a.url),Object.defineProperty(l,"usedBytes",{get:function(){return this.k.length}});var u={};return Object.keys(l.p).forEach(function(e){var t=l.p[e];u[e]=function(){return B.mc(l)||d(new B.e(U.ha)),t.apply(k,arguments)}}),u.M=function(e,t,n,i,r){if(B.mc(l)||d(new B.e(U.ha)),e=e.g.k,r>=e.length)return 0;if(i=Math.min(e.length-r,i),w(0<=i),e.slice)for(var s=0;s<i;s++)t[n+s]=e[r+s];else for(s=0;s<i;s++)t[n+s]=e.get(r+s);return i},l.p=u,l},md:function(e,t,r,s,o,a,l,u,c){function d(){rb=document.pointerLockElement===v||document.mozPointerLockElement===v||document.webkitPointerLockElement===v||document.msPointerLockElement===v}function h(n){function r(n){u||B.xb(e,t,n,s,o,c),a&&a(),Za()}var d=m;p.preloadPlugins.forEach(function(e){!d&&e.canHandle(b)&&(e.handle(n,b,r,function(){l&&l(),Za()}),d=i)}),d||r(n)}if(p.preloadPlugins||(p.preloadPlugins=[]),!tb){tb=i;try{new Blob,ub=i}catch(f){ub=m,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}vb="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:ub?k:console.log("warning: no BlobBuilder"),wb="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:g,!p.xc&&"undefined"==typeof wb&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),p.xc=i),p.preloadPlugins.push({canHandle:function(e){return!p.xc&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(e,t,n,i){var r=k;if(ub)try{r=new Blob([e],{type:xb(t)}),r.size!==e.length&&(r=new Blob([new Uint8Array(e).buffer],{type:xb(t)}))}catch(s){z.Aa("Blob constructor present but fails: "+s+"; falling back to blob builder")}r||(r=new vb,r.append(new Uint8Array(e).buffer),r=r.getBlob());var o=wb.createObjectURL(r),a=new Image;a.onload=function(){w(a.complete,"Image "+t+" could not be decoded");var i=document.createElement("canvas");i.width=a.width,i.height=a.height,i.getContext("2d").drawImage(a,0,0),p.preloadedImages[t]=i,wb.revokeObjectURL(o),n&&n(e)},a.onerror=function(){console.log("Image "+o+" could not be decoded"),i&&i()},a.src=o}}),p.preloadPlugins.push({canHandle:function(e){return!p.Jg&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,n,r){function s(r){a||(a=i,p.preloadedAudios[t]=r,n&&n(e))}function o(){a||(a=i,p.preloadedAudios[t]=new Audio,r&&r())}var a=m;if(!ub)return o();try{var l=new Blob([e],{type:xb(t)})}catch(u){return o()}var l=wb.createObjectURL(l),c=new Audio;c.addEventListener("canplaythrough",function(){s(c)},m),c.onerror=function(){if(!a){console.log("warning: browser could not fully decode audio "+t+", trying slower base64 approach");for(var n="",i=0,r=0,o=0;o<e.length;o++)for(i=i<<8|e[o],r+=8;6<=r;)var l=i>>r-6&63,r=r-6,n=n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l];2==r?(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&i)<<4],n+="=="):4==r&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&i)<<2],n+="="),c.src="data:audio/x-"+t.substr(-3)+";base64,"+n,s(c)}},c.src=l,p.noExitRuntime=i,setTimeout(function(){H||s(c)},1e4)}});var v=p.canvas;v&&(v.Pb=v.requestPointerLock||v.mozRequestPointerLock||v.webkitRequestPointerLock||v.msRequestPointerLock||n(),v.kc=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||n(),v.kc=v.kc.bind(document),document.addEventListener("pointerlockchange",d,m),document.addEventListener("mozpointerlockchange",d,m),document.addEventListener("webkitpointerlockchange",d,m),document.addEventListener("mspointerlockchange",d,m),p.elementPointerLock&&v.addEventListener("click",function(e){!rb&&v.Pb&&(v.Pb(),e.preventDefault())},m))}var b=t?gb(X(e,t)):e;Ya(),"string"==typeof r?yb(r,function(e){h(e)},l):h(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},Ub:function(){return"EM_FS_"+window.location.pathname},Vb:20,Ba:"FILE_DATA",Og:function(e,t,i){var t=t||n(),i=i||n(),r=B.indexedDB();try{var s=r.open(B.Ub(),B.Vb)}catch(o){return i(o)}s.Ld=function(){console.log("creating db"),s.result.createObjectStore(B.Ba)},s.onsuccess=function(){var n=s.result.transaction([B.Ba],"readwrite"),r=n.objectStore(B.Ba),o=0,a=0,l=e.length;e.forEach(function(e){e=r.put(B.vb(e).object.k,e),e.onsuccess=function(){o++,o+a==l&&(0==a?t():i())},e.onerror=function(){a++,o+a==l&&(0==a?t():i())}}),n.onerror=i},s.onerror=i},Dg:function(e,t,r){var t=t||n(),r=r||n(),s=B.indexedDB();try{var o=s.open(B.Ub(),B.Vb)}catch(a){return r(a)}o.Ld=r,o.onsuccess=function(){var n=o.result;try{var s=n.transaction([B.Ba],"readonly")}catch(a){return void r(a)}var l=s.objectStore(B.Ba),u=0,c=0,d=e.length;e.forEach(function(e){var n=l.get(e);n.onsuccess=function(){B.vb(e).Ab&&B.za(e),B.xb(eb(e),W(e),n.result,i,i,i),u++,u+c==d&&(0==c?t():r())},n.onerror=function(){c++,u+c==d&&(0==c?t():r())}}),s.onerror=r},o.onerror=r}},Z={F:function(){return p.websocket=p.websocket&&"object"==typeof p.websocket?p.websocket:{},p.websocket.tb={},p.websocket.on=function(e,t){return"function"==typeof t&&(this.tb[e]=t),this},p.websocket.P=function(e,t){"function"==typeof this.tb[e]&&this.tb[e].call(this,t)},B.createNode(k,"/",16895,0)},nd:function(e,t,n){return n&&w(1==t==(6==n)),e={qd:e,type:t,protocol:n,G:k,error:k,Ma:{},Kb:[],ua:[],wa:Z.L},t=Z.mb(),n=B.createNode(Z.root,t,49152,0),n.va=e,t=B.fc({path:t,g:n,D:B.wc("r+"),seekable:m,p:Z.p}),e.A=t,e},wd:function(e){return e=B.qa(e),e&&B.Ed(e.g.mode)?e.g.va:k},p:{zc:function(e){return e=e.g.va,e.wa.zc(e)},Ha:function(e,t,n){return e=e.g.va,e.wa.Ha(e,t,n)},M:function(e,t,n,i){return e=e.g.va,(i=e.wa.Rd(e,i))?(t.set(i.buffer,n),i.buffer.length):0},write:function(e,t,n,i){return e=e.g.va,e.wa.Vd(e,t,n,i)},close:function(e){e=e.g.va,e.wa.close(e)}},mb:function(){return Z.mb.gc||(Z.mb.gc=0),"socket["+Z.mb.gc++ +"]"},L:{$a:function(e,n,i){var r;if("object"==typeof n&&(r=n,i=n=k),r)r._socket?(n=r._socket.remoteAddress,i=r._socket.remotePort):((i=/ws[s]?:\/\/([^:]+):(\d+)/.exec(r.url))||d(Error("WebSocket URL must be in the format ws(s)://address:port")),n=i[1],i=parseInt(i[2],10));else try{var s=p.websocket&&"object"==typeof p.websocket,o="ws:#".replace("#","//");if(s&&"string"==typeof p.websocket.url&&(o=p.websocket.url),"ws://"===o||"wss://"===o)var a=n.split("/"),o=o+a[0]+":"+i+"/"+a.slice(1).join("/");a="binary",s&&"string"==typeof p.websocket.subprotocol&&(a=p.websocket.subprotocol);var a=a.replace(/^ +| +$/g,"").split(/ *, */),l=t?{protocol:a.toString()}:a;r=new(t?require("ws"):window.WebSocket)(o,l),r.binaryType="arraybuffer"}catch(u){d(new B.e(U.Yb))}return n={W:n,port:i,o:r,ab:[]},Z.L.$b(e,n),Z.L.zd(e,n),2===e.type&&"undefined"!=typeof e.ya&&n.ab.push(new Uint8Array([255,255,255,255,112,111,114,116,(65280&e.ya)>>8,255&e.ya])),n},gb:function(e,t,n){return e.Ma[t+":"+n]},$b:function(e,t){e.Ma[t.W+":"+t.port]=t},Bc:function(e,t){delete e.Ma[t.W+":"+t.port]},zd:function(e,n){function r(){p.websocket.P("open",e.A.C);try{for(var t=n.ab.shift();t;)n.o.send(t),t=n.ab.shift()}catch(i){n.o.close()}}function s(t){w("string"!=typeof t&&t.byteLength!==g);var t=new Uint8Array(t),i=o;o=m,i&&10===t.length&&255===t[0]&&255===t[1]&&255===t[2]&&255===t[3]&&112===t[4]&&111===t[5]&&114===t[6]&&116===t[7]?(t=t[8]<<8|t[9],Z.L.Bc(e,n),n.port=t,Z.L.$b(e,n)):(e.ua.push({W:n.W,port:n.port,data:t}),p.websocket.P("message",e.A.C))}var o=i;t?(n.o.on("open",r),n.o.on("message",function(e,t){t.binary&&s(new Uint8Array(e).buffer)}),n.o.on("close",function(){p.websocket.P("close",e.A.C)}),n.o.on("error",function(){e.error=U.Wb,p.websocket.P("error",[e.A.C,e.error,"ECONNREFUSED: Connection refused"])})):(n.o.onopen=r,n.o.onclose=function(){p.websocket.P("close",e.A.C)},n.o.onmessage=function(e){s(e.data)},n.o.onerror=function(){e.error=U.Wb,p.websocket.P("error",[e.A.C,e.error,"ECONNREFUSED: Connection refused"])})},zc:function(e){if(1===e.type&&e.G)return e.Kb.length?65:0;var t=0,n=1===e.type?Z.L.gb(e,e.Y,e.Z):k;return(e.ua.length||!n||n&&n.o.readyState===n.o.Pa||n&&n.o.readyState===n.o.CLOSED)&&(t|=65),(!n||n&&n.o.readyState===n.o.OPEN)&&(t|=4),(n&&n.o.readyState===n.o.Pa||n&&n.o.readyState===n.o.CLOSED)&&(t|=16),t},Ha:function(e,t,n){switch(t){case 21531:return t=0,e.ua.length&&(t=e.ua[0].data.length),K[n>>2]=t,0;default:return U.B}},close:function(e){if(e.G){try{e.G.close()}catch(t){}e.G=k}for(var n=Object.keys(e.Ma),i=0;i<n.length;i++){var r=e.Ma[n[i]];try{r.o.close()}catch(s){}Z.L.Bc(e,r)}return 0},bind:function(e,t,n){if(("undefined"!=typeof e.Qb||"undefined"!=typeof e.ya)&&d(new B.e(U.B)),e.Qb=t,e.ya=n||zb(),2===e.type){e.G&&(e.G.close(),e.G=k);try{e.wa.Fd(e,0)}catch(i){i instanceof B.e||d(i),i.cb!==U.Ta&&d(i)}}},cg:function(e,t,n){if(e.G&&d(new B.e(U.Ta)),"undefined"!=typeof e.Y&&"undefined"!=typeof e.Z){var i=Z.L.gb(e,e.Y,e.Z);i&&(i.o.readyState===i.o.CONNECTING&&d(new B.e(U.Hc)),d(new B.e(U.Kc)))}t=Z.L.$a(e,t,n),e.Y=t.W,e.Z=t.port,d(new B.e(U.Jc))},Fd:function(e){t||d(new B.e(U.Ta)),e.G&&d(new B.e(U.B));var n=require("ws").Server;e.G=new n({host:e.Qb,port:e.ya}),p.websocket.P("listen",e.A.C),e.G.on("connection",function(t){if(1===e.type){var n=Z.nd(e.qd,e.type,e.protocol),t=Z.L.$a(n,t);n.Y=t.W,n.Z=t.port,e.Kb.push(n),p.websocket.P("connection",n.A.C)}else Z.L.$a(e,t),p.websocket.P("connection",e.A.C)}),e.G.on("closed",function(){p.websocket.P("close",e.A.C),e.G=k}),e.G.on("error",function(){e.error=U.Yb,p.websocket.P("error",[e.A.C,e.error,"EHOSTUNREACH: Host is unreachable"])})},accept:function(e){e.G||d(new B.e(U.B));var t=e.Kb.shift();return t.A.D=e.A.D,t},tg:function(e,t){var n,i;return t?((e.Y===g||e.Z===g)&&d(new B.e(U.Ra)),n=e.Y,i=e.Z):(n=e.Qb||0,i=e.ya||0),{W:n,port:i}},Vd:function(e,t,n,i,r,s){2===e.type?(r!==g&&s!==g||(r=e.Y,s=e.Z),(r===g||s===g)&&d(new B.e(U.Ic))):(r=e.Y,s=e.Z);var o=Z.L.gb(e,r,s);if(1===e.type&&((!o||o.o.readyState===o.o.Pa||o.o.readyState===o.o.CLOSED)&&d(new B.e(U.Ra)),o.o.readyState===o.o.CONNECTING&&d(new B.e(U.Ca))),t=t instanceof Array||t instanceof ArrayBuffer?t.slice(n,n+i):t.buffer.slice(t.byteOffset+n,t.byteOffset+n+i),2===e.type&&(!o||o.o.readyState!==o.o.OPEN))return o&&o.o.readyState!==o.o.Pa&&o.o.readyState!==o.o.CLOSED||(o=Z.L.$a(e,r,s)),o.ab.push(t),i;try{return o.o.send(t),i}catch(a){d(new B.e(U.B))}},Rd:function(e,t){1===e.type&&e.G&&d(new B.e(U.Ra));var n=e.ua.shift();if(!n){if(1===e.type){var i=Z.L.gb(e,e.Y,e.Z);if(i){if(i.o.readyState===i.o.Pa||i.o.readyState===i.o.CLOSED)return k;d(new B.e(U.Ca))}d(new B.e(U.Ra))}d(new B.e(U.Ca))}var i=n.data.byteLength||n.data.length,r=n.data.byteOffset||0,s=n.data.buffer||n.data,o=Math.min(t,i),a={buffer:new Uint8Array(s,r,o),W:n.W,port:n.port};return 1===e.type&&o<i&&(n.data=new Uint8Array(s,r+o,i-o),e.ua.unshift(n)),a}}};p._strlen=Bb,p._memset=Gb,p._broadwayOnPictureDecoded=Hb,p._broadwayOnHeadersDecoded=Ib;var Nb=k,Pb="",Tb=0,Mb=k,Sb=0,Kb=0,Lb=0,Xb=0,Ub=[],Wb={},Ob,Vb,Yb=m,rb=m,Zb=m,$b=g,ac=g,bc=0,dc=[],tb,ub,vb,wb;p._memcpy=gc,B.Zd(),R.unshift({ja:function(){!p.noFSInit&&!B.Ga.hb&&B.Ga()}}),Pa.push({ja:function(){B.vc=m}}),Qa.push({ja:function(){B.Qd()}}),p.FS_createFolder=B.hd,p.FS_createPath=B.ld,p.FS_createDataFile=B.xb,p.FS_createPreloadedFile=B.md,p.FS_createLazyFile=B.jd,p.FS_createLink=B.kd,p.FS_createDevice=B.X,bb=z.Ec(4),K[bb>>2]=0,R.unshift({ja:n()}),Qa.push({ja:n()});var lb=new z.Da;t&&(require("fs"),process.platform.match(/^win/)),R.push({ja:function(){Z.root=B.F(Z,{},k)}}),Eb.Cc=M([0],"i8",L),p.requestFullScreen=function(e,t){function r(){Yb=m;var e=s.parentNode;(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===e?(s.cc=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen||document.exitFullscreen||n(),s.cc=s.cc.bind(document),$b&&s.Pb(),Yb=i,ac&&("undefined"!=typeof SDL&&(e=Ha[SDL.screen+0*z.ia>>2],K[SDL.screen+0*z.ia>>2]=8388608|e),ec())):(e.parentNode.insertBefore(s,e),e.parentNode.removeChild(e),ac&&("undefined"!=typeof SDL&&(e=Ha[SDL.screen+0*z.ia>>2],K[SDL.screen+0*z.ia>>2]=e&-8388609),ec())),p.onFullScreen&&p.onFullScreen(Yb),fc(s)}$b=e,ac=t,"undefined"==typeof $b&&($b=i),"undefined"==typeof ac&&(ac=m);var s=p.canvas;Zb||(Zb=i,document.addEventListener("fullscreenchange",r,m),document.addEventListener("mozfullscreenchange",r,m),document.addEventListener("webkitfullscreenchange",r,m),document.addEventListener("MSFullscreenChange",r,m));var o=document.createElement("div");s.parentNode.insertBefore(o,s),o.appendChild(s),o.Td=o.requestFullScreen||o.mozRequestFullScreen||o.msRequestFullscreen||(o.webkitRequestFullScreen?function(){o.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:k),o.Td()},p.requestAnimationFrame=function(e){Qb(e)},p.setCanvasSize=function(e,t,n){fc(p.canvas,e,t),n||ec()},p.pauseMainLoop=function(){Nb=k,Tb++},p.resumeMainLoop=function(){Tb++;var e=Kb,t=Lb,n=Mb;Mb=k,Rb(n,0,m,Sb),Jb(e,t)},p.getUserMedia=function(){window.qc||(window.qc=navigator.getUserMedia||navigator.mozGetUserMedia),window.qc(g)},Ja=y=z.ub(D),Ka=Ja+Ma,La=E=z.ub(Ka),w(La<F,"TOTAL_MEMORY not big enough for stack"),p.Xc={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},p.Yc={abort:A,assert:w,min:va,invoke_viiiii:function(e,t,n,i,r,s){try{p.dynCall_viiiii(e,t,n,i,r,s)}catch(o){"number"!=typeof o&&"longjmp"!==o&&d(o),$.setThrew(1,0)}},_broadwayOnPictureDecoded:Hb,_puts:function(e){var t=K[pb>>2],e=Db(e,t);return 0>e?e:0>Eb(10,t)?-1:e+1},_fflush:n(),_fputc:Eb,_send:function(e,t,n){return Z.wd(e)?Ab(e,t,n):(V(U.V),-1)},_pwrite:function(e,t,n,i){if(e=B.qa(e),!e)return V(U.V),-1;try{return B.write(e,I,t,n,i)}catch(r){return B.sc(r),-1}},_fputs:Db,_emscripten_set_main_loop:Rb,_abort:function(){p.abort()},___setErrNo:V,_sbrk:Fb,_mkport:zb,_emscripten_set_main_loop_timing:Jb,_emscripten_memcpy_big:function(e,t,n){return N.set(N.subarray(t,t+n),e),e},_fileno:Cb,_broadwayOnHeadersDecoded:Ib,_write:Ab,_time:function(e){var t=Date.now()/1e3|0;return e&&(K[e>>2]=t),t},_sysconf:function(e){switch(e){case 30:return 4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator?navigator.hardwareConcurrency||1:1}return V(U.B),-1},___errno_location:function(){return bb},STACKTOP:y,STACK_MAX:Ka,tempDoublePtr:$a,ABORT:H,NaN:NaN,Infinity:1/0};var $=function(e,t,n){"use asm";var i=new e.Int8Array(n);var r=new e.Int16Array(n);var s=new e.Int32Array(n);var o=new e.Uint8Array(n);var a=new e.Uint16Array(n);var l=new e.Uint32Array(n);var u=new e.Float32Array(n);var c=new e.Float64Array(n);var d=t.STACKTOP|0;var p=t.STACK_MAX|0;var h=t.tempDoublePtr|0;var f=t.ABORT|0;var m=0;var g=0;var v=0;var b=0;var y=+t.NaN,w=+t.Infinity;var _=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0;var A=0;var P=0;var I=0;var M=0;var O=0;var N=0;var L=0;var F=0;var V=0;var B=0;var U=e.Math.floor;var j=e.Math.abs;var H=e.Math.sqrt;var G=e.Math.pow;var q=e.Math.cos;var W=e.Math.sin;var z=e.Math.tan;var K=e.Math.acos;var Y=e.Math.asin;var X=e.Math.atan;var Q=e.Math.atan2;var $=e.Math.exp;var J=e.Math.log;var Z=e.Math.ceil;var ee=e.Math.imul;var te=t.abort;var ne=t.assert;var ie=t.min;var re=t.invoke_viiiii;var se=t._broadwayOnPictureDecoded;var oe=t._puts;var ae=t._fflush;var le=t._fputc;var ue=t._send;var ce=t._pwrite;var de=t._fputs;var pe=t._emscripten_set_main_loop;var he=t._abort;var fe=t.___setErrNo;var me=t._sbrk;
var ge=t._mkport;var ve=t._emscripten_set_main_loop_timing;var be=t._emscripten_memcpy_big;var ye=t._fileno;var we=t._broadwayOnHeadersDecoded;var _e=t._write;var Ce=t._time;var Se=t._sysconf;var Ee=t.___errno_location;var Te=0;function xe(e,t,n,i,l,u){e=e|0;t=t|0;n=n|0;i=i|0;l=l|0;u=u|0;var c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0,V=0,B=0,U=0,j=0,H=0,G=0,q=0,W=0,z=0,K=0,Y=0,X=0;X=d;d=d+32|0;Y=X;m=s[l+4>>2]|0;K=(i>>>0)/(m>>>0)|0;z=K<<4;K=i-(ee(K,m)|0)<<4;s[Y+4>>2]=m;s[Y+8>>2]=s[l+8>>2];m=s[e>>2]|0;do if((m|0)==2){T=r[t+160>>1]|0;x=r[t+162>>1]|0;R=s[t+144>>2]|0;k=e+4|0;f=s[e+204>>2]|0;if((f|0)!=0?(s[f+4>>2]|0)==(s[k>>2]|0):0)if((s[f>>2]|0)>>>0<6){C=f+172|0;C=a[C>>1]|a[C+2>>1]<<16;p=1;f=s[f+108>>2]|0;v=C&65535;C=C>>>16&65535}else{p=1;f=-1;v=0;C=0}else{p=0;f=-1;v=0;C=0}e:do if((f|0)==(R|0)){h=v;f=C}else{h=s[e+200>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[k>>2]|0):0)if((s[h>>2]|0)>>>0<6){f=h+152|0;f=a[f>>1]|a[f+2>>1]<<16;g=1;b=f&65535;f=f>>>16&65535;m=s[h+104>>2]|0}else{g=1;b=0;f=0;m=-1}else{g=0;b=0;f=0;m=-1}h=s[e+208>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[k>>2]|0):0)if((s[h>>2]|0)>>>0<6){y=h+172|0;h=s[h+108>>2]|0;y=a[y>>1]|a[y+2>>1]<<16}else{h=-1;y=0}else W=54;do if((W|0)==54){h=s[e+212>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[k>>2]|0):0){if((s[h>>2]|0)>>>0>=6){h=-1;y=0;break}y=h+192|0;h=s[h+112>>2]|0;y=a[y>>1]|a[y+2>>1]<<16;break}if((g|0)==0|(p|0)!=0){h=-1;y=0}else{h=b;break e}}while(0);p=(m|0)==(R|0);if((((h|0)==(R|0)&1)+(p&1)|0)==1){if(p){h=p?b:v;f=p?f:C;break}h=y&65535;f=y>>>16&65535;break}h=b<<16>>16;c=v<<16>>16;m=y<<16>>16;if(v<<16>>16>b<<16>>16)p=c;else{p=h;h=(c|0)<(h|0)?c:h}if((p|0)<(m|0))g=p;else g=(h|0)>(m|0)?h:m;h=f<<16>>16;p=C<<16>>16;c=y>>16;if(C<<16>>16>f<<16>>16)f=p;else{f=h;h=(p|0)<(h|0)?p:h}if((f|0)>=(c|0))f=(h|0)>(c|0)?h:c;h=g&65535;f=f&65535}while(0);h=(h&65535)+(T&65535)|0;f=(f&65535)+(x&65535)|0;if(((h<<16>>16)+8192|0)>>>0>16383){I=1;d=X;return I|0}if(((f<<16>>16)+2048|0)>>>0>4095){I=1;d=X;return I|0}p=qe(n,R)|0;if(!p){I=1;d=X;return I|0}x=e+132|0;S=e+136|0;E=e+140|0;T=e+144|0;g=e+148|0;m=e+152|0;I=e+156|0;_=e+160|0;r[e+160>>1]=h;r[e+162>>1]=f;_=a[_>>1]|a[_+2>>1]<<16;r[I>>1]=_;r[I+2>>1]=_>>>16;r[m>>1]=_;r[m+2>>1]=_>>>16;r[g>>1]=_;r[g+2>>1]=_>>>16;r[T>>1]=_;r[T+2>>1]=_>>>16;r[E>>1]=_;r[E+2>>1]=_>>>16;r[S>>1]=_;r[S+2>>1]=_>>>16;r[x>>1]=_;r[x+2>>1]=_>>>16;s[e+100>>2]=R;s[e+104>>2]=R;x=e+116|0;s[x>>2]=p;s[e+120>>2]=p;S=r[t+164>>1]|0;E=r[t+166>>1]|0;T=s[t+148>>2]|0;g=s[e+200>>2]|0;m=(g|0)==0;if((!m?(s[g+4>>2]|0)==(s[k>>2]|0):0)?(s[g>>2]|0)>>>0<6:0){C=g+184|0;C=a[C>>1]|a[C+2>>1]<<16;v=C&65535;C=C>>>16&65535;f=s[g+112>>2]|0}else{v=0;C=0;f=-1}do if((f|0)!=(T|0)){b=_&65535;h=_>>>16;w=h&65535;if((!m?(s[g+4>>2]|0)==(s[k>>2]|0):0)?(s[g>>2]|0)>>>0<6:0){y=g+160|0;m=s[g+104>>2]|0;y=a[y>>1]|a[y+2>>1]<<16}else{m=-1;y=0}f=(R|0)==(T|0);if((((m|0)==(T|0)&1)+(f&1)|0)==1){p=f?_:y;f=f?h:y>>>16;break}f=v<<16>>16;m=_<<16>>16;g=y<<16>>16;if(b<<16>>16>v<<16>>16)p=m;else{p=f;f=(m|0)<(f|0)?m:f}if((p|0)>=(g|0))p=(f|0)>(g|0)?f:g;h=C<<16>>16;c=_>>16;m=y>>16;if(w<<16>>16>C<<16>>16)f=c;else{f=h;h=(c|0)<(h|0)?c:h}if((f|0)>=(m|0))f=(h|0)>(m|0)?h:m}else{f=C&65535;p=f<<16|v&65535}while(0);p=(p&65535)+(S&65535)|0;h=(f&65535)+(E&65535)|0;if(((p<<16>>16)+8192|0)>>>0>16383){I=1;d=X;return I|0}if(((h<<16>>16)+2048|0)>>>0>4095){I=1;d=X;return I|0}f=qe(n,T)|0;if(!f){I=1;d=X;return I|0}else{I=e+164|0;A=e+168|0;D=e+172|0;R=e+176|0;k=e+180|0;E=e+184|0;S=e+188|0;P=e+192|0;r[e+192>>1]=p;r[e+194>>1]=h;P=a[P>>1]|a[P+2>>1]<<16;r[S>>1]=P;r[S+2>>1]=P>>>16;r[E>>1]=P;r[E+2>>1]=P>>>16;r[k>>1]=P;r[k+2>>1]=P>>>16;r[R>>1]=P;r[R+2>>1]=P>>>16;r[D>>1]=P;r[D+2>>1]=P>>>16;r[A>>1]=P;r[A+2>>1]=P>>>16;r[I>>1]=P;r[I+2>>1]=P>>>16;s[e+108>>2]=T;s[e+112>>2]=T;P=e+124|0;s[P>>2]=f;s[e+128>>2]=f;s[Y>>2]=s[x>>2];Be(u,e+132|0,Y,K,z,0,0,16,8);s[Y>>2]=s[P>>2];Be(u,I,Y,K,z,0,8,16,8);break}}else if((m|0)==1|(m|0)==0){x=s[t+144>>2]|0;c=e+4|0;h=s[e+200>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[c>>2]|0):0)if((s[h>>2]|0)>>>0<6){f=h+152|0;f=a[f>>1]|a[f+2>>1]<<16;p=1;_=f&65535;f=f>>>16&65535;b=s[h+104>>2]|0}else{p=1;_=0;f=0;b=-1}else{p=0;_=0;f=0;b=-1}h=s[e+204>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[c>>2]|0):0)if((s[h>>2]|0)>>>0<6){C=h+172|0;C=a[C>>1]|a[C+2>>1]<<16;w=C&65535;g=1;v=s[h+108>>2]|0;C=C>>>16&65535}else{w=0;g=1;v=-1;C=0}else{w=0;g=0;v=-1;C=0}do if(!m)if(!((p|0)==0|(g|0)==0)){if((b|0)==0?((f&65535)<<16|_&65535|0)==0:0){h=0;f=0;break}if((v|0)==0?((C&65535)<<16|w&65535|0)==0:0){h=0;f=0}else W=16}else{h=0;f=0}else W=16;while(0);if((W|0)==16){E=r[t+160>>1]|0;T=r[t+162>>1]|0;h=s[e+208>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[c>>2]|0):0)if((s[h>>2]|0)>>>0<6){y=h+172|0;m=s[h+108>>2]|0;y=a[y>>1]|a[y+2>>1]<<16;W=25}else{m=-1;y=0;W=25}else W=20;do if((W|0)==20){m=s[e+212>>2]|0;if((m|0)!=0?(s[m+4>>2]|0)==(s[c>>2]|0):0){if((s[m>>2]|0)>>>0>=6){m=-1;y=0;W=25;break}y=m+192|0;m=s[m+112>>2]|0;y=a[y>>1]|a[y+2>>1]<<16;W=25;break}if((p|0)==0|(g|0)!=0){m=-1;y=0;W=25}else h=_}while(0);do if((W|0)==25){p=(b|0)==(x|0);h=(v|0)==(x|0);if(((h&1)+(p&1)+((m|0)==(x|0)&1)|0)==1){if(p|h){h=p?_:w;f=p?f:C;break}h=y&65535;f=y>>>16&65535;break}h=_<<16>>16;c=w<<16>>16;m=y<<16>>16;if(w<<16>>16>_<<16>>16)p=c;else{p=h;h=(c|0)<(h|0)?c:h}if((p|0)<(m|0))m=p;else m=(h|0)>(m|0)?h:m;h=f<<16>>16;p=C<<16>>16;c=y>>16;if(C<<16>>16>f<<16>>16)f=p;else{f=h;h=(p|0)<(h|0)?p:h}if((f|0)>=(c|0))f=(h|0)>(c|0)?h:c;h=m&65535;f=f&65535}while(0);h=(h&65535)+(E&65535)|0;f=(f&65535)+(T&65535)|0;if(((h<<16>>16)+8192|0)>>>0>16383){I=1;d=X;return I|0}if(((f<<16>>16)+2048|0)>>>0>4095){I=1;d=X;return I|0}else{h=h&65535;f=f&65535}}c=qe(n,x)|0;if(!c){I=1;d=X;return I|0}else{I=e+132|0;A=e+136|0;D=e+140|0;R=e+144|0;k=e+148|0;T=e+152|0;E=e+156|0;S=e+160|0;C=e+164|0;_=e+168|0;p=e+172|0;m=e+176|0;g=e+180|0;v=e+184|0;b=e+188|0;P=e+192|0;r[e+192>>1]=h;r[e+194>>1]=f;P=a[P>>1]|a[P+2>>1]<<16;r[b>>1]=P;r[b+2>>1]=P>>>16;r[v>>1]=P;r[v+2>>1]=P>>>16;r[g>>1]=P;r[g+2>>1]=P>>>16;r[m>>1]=P;r[m+2>>1]=P>>>16;r[p>>1]=P;r[p+2>>1]=P>>>16;r[_>>1]=P;r[_+2>>1]=P>>>16;r[C>>1]=P;r[C+2>>1]=P>>>16;r[S>>1]=P;r[S+2>>1]=P>>>16;r[E>>1]=P;r[E+2>>1]=P>>>16;r[T>>1]=P;r[T+2>>1]=P>>>16;r[k>>1]=P;r[k+2>>1]=P>>>16;r[R>>1]=P;r[R+2>>1]=P>>>16;r[D>>1]=P;r[D+2>>1]=P>>>16;r[A>>1]=P;r[A+2>>1]=P>>>16;r[I>>1]=P;r[I+2>>1]=P>>>16;s[e+100>>2]=x;s[e+104>>2]=x;s[e+108>>2]=x;s[e+112>>2]=x;s[e+116>>2]=c;s[e+120>>2]=c;s[e+124>>2]=c;s[e+128>>2]=c;s[Y>>2]=c;Be(u,e+132|0,Y,K,z,0,0,16,16);break}}else if((m|0)==3){S=r[t+160>>1]|0;E=r[t+162>>1]|0;R=s[t+144>>2]|0;w=e+4|0;f=s[e+200>>2]|0;if((f|0)!=0?(s[f+4>>2]|0)==(s[w>>2]|0):0)if((s[f>>2]|0)>>>0<6){C=f+152|0;C=a[C>>1]|a[C+2>>1]<<16;h=1;b=C&65535;C=C>>>16&65535;f=s[f+104>>2]|0}else{h=1;b=0;C=0;f=-1}else{h=0;b=0;C=0;f=-1}e:do if((f|0)==(R|0)){h=b;f=C}else{f=s[e+204>>2]|0;if((f|0)!=0?(s[f+4>>2]|0)==(s[w>>2]|0):0)if((s[f>>2]|0)>>>0<6){I=f+172|0;I=a[I>>1]|a[I+2>>1]<<16;y=f+188|0;m=s[f+108>>2]|0;c=s[f+112>>2]|0;h=I&65535;f=I>>>16&65535;y=a[y>>1]|a[y+2>>1]<<16}else{m=-1;c=-1;h=0;f=0;y=0}else W=107;do if((W|0)==107){f=s[e+212>>2]|0;if((f|0)!=0?(s[f+4>>2]|0)==(s[w>>2]|0):0){if((s[f>>2]|0)>>>0>=6){m=-1;c=-1;h=0;f=0;y=0;break}y=f+192|0;m=-1;c=s[f+112>>2]|0;h=0;f=0;y=a[y>>1]|a[y+2>>1]<<16;break}if(!h){m=-1;c=-1;h=0;f=0;y=0}else{h=b;f=C;break e}}while(0);p=(m|0)==(R|0);if(((p&1)+((c|0)==(R|0)&1)|0)==1){if(p)break;h=y&65535;f=y>>>16&65535;break}c=b<<16>>16;m=h<<16>>16;g=y<<16>>16;if(h<<16>>16>b<<16>>16){p=m;h=c}else{p=c;h=(m|0)<(c|0)?m:c}if((p|0)<(g|0))g=p;else g=(h|0)>(g|0)?h:g;h=C<<16>>16;p=f<<16>>16;c=y>>16;if(f<<16>>16>C<<16>>16)f=p;else{f=h;h=(p|0)<(h|0)?p:h}if((f|0)>=(c|0))f=(h|0)>(c|0)?h:c;h=g&65535;f=f&65535}while(0);h=(h&65535)+(S&65535)|0;f=(f&65535)+(E&65535)|0;if(((h<<16>>16)+8192|0)>>>0>16383){I=1;d=X;return I|0}if(((f<<16>>16)+2048|0)>>>0>4095){I=1;d=X;return I|0}p=qe(n,R)|0;if(!p){I=1;d=X;return I|0}S=e+132|0;T=e+136|0;x=e+140|0;E=e+144|0;I=e+164|0;P=e+168|0;A=e+172|0;C=e+176|0;r[e+176>>1]=h;r[e+178>>1]=f;C=a[C>>1]|a[C+2>>1]<<16;r[A>>1]=C;r[A+2>>1]=C>>>16;r[P>>1]=C;r[P+2>>1]=C>>>16;r[I>>1]=C;r[I+2>>1]=C>>>16;r[E>>1]=C;r[E+2>>1]=C>>>16;r[x>>1]=C;r[x+2>>1]=C>>>16;r[T>>1]=C;r[T+2>>1]=C>>>16;r[S>>1]=C;r[S+2>>1]=C>>>16;s[e+100>>2]=R;s[e+108>>2]=R;S=e+116|0;s[S>>2]=p;s[e+124>>2]=p;T=r[t+164>>1]|0;x=r[t+166>>1]|0;E=s[t+148>>2]|0;f=s[e+208>>2]|0;if((f|0)!=0?(s[f+4>>2]|0)==(s[w>>2]|0):0)if((s[f>>2]|0)>>>0<6){v=f+172|0;f=s[f+108>>2]|0;m=1;v=a[v>>1]|a[v+2>>1]<<16}else{f=-1;m=1;v=0}else{f=s[e+204>>2]|0;if((f|0)!=0?(s[f+4>>2]|0)==(s[w>>2]|0):0)if((s[f>>2]|0)>>>0<6){v=f+176|0;f=s[f+108>>2]|0;m=1;v=a[v>>1]|a[v+2>>1]<<16}else{f=-1;m=1;v=0}else{f=-1;m=0;v=0}}do if((f|0)!=(E|0)){b=C&65535;f=C>>>16;_=f&65535;h=s[e+204>>2]|0;if((h|0)!=0?(s[h+4>>2]|0)==(s[w>>2]|0):0)if((s[h>>2]|0)>>>0<6){w=h+188|0;w=a[w>>1]|a[w+2>>1]<<16;m=s[h+112>>2]|0;c=w&65535;w=w>>>16&65535}else{m=-1;c=0;w=0}else if(!m){p=C;break}else{m=-1;c=0;w=0}p=(R|0)==(E|0);h=(m|0)==(E|0);if(((h&1)+(p&1)|0)==1){if(p){p=C;break}if(h){f=w&65535;p=f<<16|c&65535;break}else{p=v;f=v>>>16;break}}f=C<<16>>16;m=c<<16>>16;g=v<<16>>16;if(c<<16>>16>b<<16>>16)p=m;else{p=f;f=(m|0)<(f|0)?m:f}if((p|0)>=(g|0))p=(f|0)>(g|0)?f:g;h=C>>16;c=w<<16>>16;m=v>>16;if(w<<16>>16>_<<16>>16)f=c;else{f=h;h=(c|0)<(h|0)?c:h}if((f|0)>=(m|0))f=(h|0)>(m|0)?h:m}else{p=v;f=v>>>16}while(0);p=(p&65535)+(T&65535)|0;h=(f&65535)+(x&65535)|0;if(((p<<16>>16)+8192|0)>>>0>16383){I=1;d=X;return I|0}if(((h<<16>>16)+2048|0)>>>0>4095){I=1;d=X;return I|0}f=qe(n,E)|0;if(!f){I=1;d=X;return I|0}else{I=e+148|0;A=e+152|0;D=e+156|0;R=e+160|0;k=e+180|0;x=e+184|0;T=e+188|0;P=e+192|0;r[e+192>>1]=p;r[e+194>>1]=h;P=a[P>>1]|a[P+2>>1]<<16;r[T>>1]=P;r[T+2>>1]=P>>>16;r[x>>1]=P;r[x+2>>1]=P>>>16;r[k>>1]=P;r[k+2>>1]=P>>>16;r[R>>1]=P;r[R+2>>1]=P>>>16;r[D>>1]=P;r[D+2>>1]=P>>>16;r[A>>1]=P;r[A+2>>1]=P>>>16;r[I>>1]=P;r[I+2>>1]=P>>>16;s[e+104>>2]=E;s[e+112>>2]=E;P=e+120|0;s[P>>2]=f;s[e+128>>2]=f;s[Y>>2]=s[S>>2];Be(u,e+132|0,Y,K,z,0,0,8,16);s[Y>>2]=s[P>>2];Be(u,I,Y,K,z,8,0,8,16);break}}else{q=e+4|0;M=0;e:while(1){D=t+(M<<2)+176|0;I=Ut(s[D>>2]|0)|0;A=t+(M<<2)+192|0;s[e+(M<<2)+100>>2]=s[A>>2];P=qe(n,s[A>>2]|0)|0;s[e+(M<<2)+116>>2]=P;if(!P){c=1;W=212;break}if(I){N=M<<2;L=e+(N<<2)+132|0;U=e+(N<<2)+134|0;j=N|1;F=e+(j<<2)+132|0;j=e+(j<<2)+134|0;H=N|2;V=e+(H<<2)+132|0;H=e+(H<<2)+134|0;G=N|3;B=e+(G<<2)+132|0;G=e+(G<<2)+134|0;O=0;do{R=r[t+(M<<4)+(O<<2)+208>>1]|0;k=r[t+(M<<4)+(O<<2)+210>>1]|0;P=Gt(s[D>>2]|0)|0;h=s[A>>2]|0;b=nn(e,s[6288+(M<<7)+(P<<5)+(O<<3)>>2]|0)|0;v=o[6288+(M<<7)+(P<<5)+(O<<3)+4>>0]|0;if((b|0)!=0?(s[b+4>>2]|0)==(s[q>>2]|0):0)if((s[b>>2]|0)>>>0<6){g=b+(v<<2)+132|0;g=a[g>>1]|a[g+2>>1]<<16;x=s[b+(v>>>2<<2)+100>>2]|0;f=g&65535;T=1;g=g>>>16&65535}else{x=-1;f=0;T=1;g=0}else{x=-1;f=0;T=0;g=0}_=nn(e,s[5776+(M<<7)+(P<<5)+(O<<3)>>2]|0)|0;c=o[5776+(M<<7)+(P<<5)+(O<<3)+4>>0]|0;if((_|0)!=0?(s[_+4>>2]|0)==(s[q>>2]|0):0)if((s[_>>2]|0)>>>0<6){m=_+(c<<2)+132|0;m=a[m>>1]|a[m+2>>1]<<16;E=1;S=s[_+(c>>>2<<2)+100>>2]|0;p=m&65535;m=m>>>16&65535}else{E=1;S=-1;p=0;m=0}else{E=0;S=-1;p=0;m=0}C=nn(e,s[5264+(M<<7)+(P<<5)+(O<<3)>>2]|0)|0;_=o[5264+(M<<7)+(P<<5)+(O<<3)+4>>0]|0;if((C|0)!=0?(s[C+4>>2]|0)==(s[q>>2]|0):0)if((s[C>>2]|0)>>>0<6){T=C+(_<<2)+132|0;T=a[T>>1]|a[T+2>>1]<<16;_=s[C+(_>>>2<<2)+100>>2]|0;W=180}else{T=0;_=-1;W=180}else W=175;do if((W|0)==175){W=0;C=nn(e,s[4752+(M<<7)+(P<<5)+(O<<3)>>2]|0)|0;_=o[4752+(M<<7)+(P<<5)+(O<<3)+4>>0]|0;if((C|0)!=0?(s[C+4>>2]|0)==(s[q>>2]|0):0){if((s[C>>2]|0)>>>0>=6){T=0;_=-1;W=180;break}T=C+(_<<2)+132|0;T=a[T>>1]|a[T+2>>1]<<16;_=s[C+(_>>>2<<2)+100>>2]|0;W=180;break}if((T|0)==0|(E|0)!=0){T=0;_=-1;W=180}else{_=f;y=g}}while(0);do if((W|0)==180){c=(x|0)==(h|0);C=(S|0)==(h|0);if(((C&1)+(c&1)+((_|0)==(h|0)&1)|0)==1){if(c|C){_=c?f:p;y=c?g:m;break}_=T&65535;y=T>>>16&65535;break}w=f<<16>>16;C=p<<16>>16;c=T<<16>>16;if(p<<16>>16>f<<16>>16)_=C;else{_=w;w=(C|0)<(w|0)?C:w}if((_|0)<(c|0))C=_;else C=(w|0)>(c|0)?w:c;y=g<<16>>16;_=m<<16>>16;c=T>>16;if(m<<16>>16>g<<16>>16)b=_;else{b=y;y=(_|0)<(y|0)?_:y}if((b|0)>=(c|0))b=(y|0)>(c|0)?y:c;_=C&65535;y=b&65535}while(0);R=(_&65535)+(R&65535)|0;g=R&65535;b=(y&65535)+(k&65535)|0;v=b&65535;if(((R<<16>>16)+8192|0)>>>0>16383){c=1;W=212;break e}if(((b<<16>>16)+2048|0)>>>0>4095){c=1;W=212;break e}if((P|0)==1){P=(O<<1)+N|0;r[e+(P<<2)+132>>1]=g;r[e+(P<<2)+134>>1]=v;P=P|1;r[e+(P<<2)+132>>1]=g;r[e+(P<<2)+134>>1]=v}else if((P|0)==2){P=O+N|0;r[e+(P<<2)+132>>1]=g;r[e+(P<<2)+134>>1]=v;P=P+2|0;r[e+(P<<2)+132>>1]=g;r[e+(P<<2)+134>>1]=v}else if((P|0)==3){P=O+N|0;r[e+(P<<2)+132>>1]=g;r[e+(P<<2)+134>>1]=v}else if(!P){r[L>>1]=g;r[U>>1]=v;r[F>>1]=g;r[j>>1]=v;r[V>>1]=g;r[H>>1]=v;r[B>>1]=g;r[G>>1]=v}O=O+1|0}while(O>>>0<I>>>0)}M=M+1|0;if(M>>>0>=4){W=201;break}}if((W|0)==201){f=0;do{s[Y>>2]=s[e+(f<<2)+116>>2];p=Gt(s[t+(f<<2)+176>>2]|0)|0;c=f<<3&8;h=f>>>0<2?0:8;if(!p)Be(u,e+(f<<2<<2)+132|0,Y,K,z,c,h,8,8);else if((p|0)==1){I=f<<2;Be(u,e+(I<<2)+132|0,Y,K,z,c,h,8,4);Be(u,e+((I|2)<<2)+132|0,Y,K,z,c,h|4,8,4)}else if((p|0)==2){I=f<<2;Be(u,e+(I<<2)+132|0,Y,K,z,c,h,4,8);Be(u,e+((I|1)<<2)+132|0,Y,K,z,c|4,h,4,8)}else{A=f<<2;Be(u,e+(A<<2)+132|0,Y,K,z,c,h,4,4);P=c|4;Be(u,e+((A|1)<<2)+132|0,Y,K,z,P,h,4,4);I=h|4;Be(u,e+((A|2)<<2)+132|0,Y,K,z,c,I,4,4);Be(u,e+((A|3)<<2)+132|0,Y,K,z,P,I,4,4)}f=f+1|0}while((f|0)!=4)}else if((W|0)==212){d=X;return c|0}}while(0);if((s[e+196>>2]|0)>>>0>1){I=0;d=X;return I|0}if(!(s[e>>2]|0)){et(l,u);I=0;d=X;return I|0}else{tt(l,i,u,t+328|0);I=0;d=X;return I|0}return 0}function ke(e,t,n,r,s,a,l,u,c){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0;k=d;d=d+144|0;p=k;if((n|0)>=0?!((n+1+u|0)>>>0>s>>>0|(r|0)<0|(c+r|0)>>>0>a>>>0):0)p=e;else{x=u+1|0;Re(e,p,n,r,s,a,x,c,x);Re(e+(ee(a,s)|0)|0,p+(ee(x,c)|0)|0,n,r,s,a,x,c,x);a=c;s=x;n=0;r=0}x=8-l|0;_=c>>>1;T=(_|0)==0;C=u>>>1;E=(C|0)==0;S=16-u|0;w=(s<<1)-u|0;b=s+1|0;y=s+2|0;m=C<<1;v=0;do{c=p+((ee((ee(v,a)|0)+r|0,s)|0)+n)|0;if(!(T|E)){g=t+(v<<6)|0;f=_;while(1){u=g;e=c;h=C;while(1){D=o[e>>0]|0;A=o[e+b>>0]|0;P=e;e=e+2|0;R=o[P+1>>0]|0;i[u+8>>0]=(((ee(A,l)|0)+(ee(o[P+s>>0]|0,x)|0)<<3)+32|0)>>>6;i[u>>0]=(((ee(R,l)|0)+(ee(D,x)|0)<<3)+32|0)>>>6;D=o[e>>0]|0;i[u+9>>0]=(((ee(o[P+y>>0]|0,l)|0)+(ee(A,x)|0)<<3)+32|0)>>>6;i[u+1>>0]=(((ee(D,l)|0)+(ee(R,x)|0)<<3)+32|0)>>>6;h=h+-1|0;if(!h)break;else u=u+2|0}f=f+-1|0;if(!f)break;else{g=g+(m+S)|0;c=c+(m+w)|0}}}v=v+1|0}while((v|0)!=2);d=k;return}function Re(e,t,n,i,r,s,o,a,l){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;s=s|0;o=o|0;a=a|0;l=l|0;var u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0;y=d;u=o+n|0;f=a+i|0;b=(n|0)<0|(u|0)>(r|0)?2:1;p=(f|0)<0?0-a|0:i;i=(u|0)<0?0-o|0:n;p=(p|0)>(s|0)?s:p;i=(i|0)>(r|0)?r:i;u=i+o|0;c=p+a|0;if((i|0)>0)e=e+i|0;if((p|0)>0)e=e+(ee(p,r)|0)|0;v=(i|0)<0?0-i|0:0;g=(u|0)>(r|0)?u-r|0:0;m=o-v-g|0;o=0-p|0;p=(p|0)<0?o:0;n=c-s|0;h=(c|0)>(s|0)?n:0;u=a-p|0;i=u-h|0;if(p){p=a+-1-((f|0)>0?f:0)|0;c=~s;c=(p|0)>(c|0)?p:c;p=~c;p=ee(c+((p|0)>0?p:0)+1|0,l)|0;c=t;while(1){wi[b&3](e,c,v,m,g);o=o+-1|0;if(!o)break;else c=c+l|0}t=t+p|0}if((u|0)!=(h|0)){c=a+-1|0;o=c-((f|0)>0?f:0)|0;u=~s;u=(o|0)>(u|0)?o:u;c=c-u|0;o=~u;o=a+s+-1-((c|0)<(s|0)?s:c)-u-((o|0)>0?o:0)|0;u=ee(o,l)|0;o=ee(o,r)|0;c=t;p=e;while(1){wi[b&3](p,c,v,m,g);i=i+-1|0;if(!i)break;else{c=c+l|0;p=p+r|0}}t=t+u|0;e=e+o|0}e=e+(0-r)|0;if(!h){d=y;return}while(1){wi[b&3](e,t,v,m,g);n=n+-1|0;if(!n)break;else t=t+l|0}d=y;return}function De(e,t,n,r,s,a,l,u,c){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0;R=d;d=d+144|0;p=R;if(((n|0)>=0?!((u+n|0)>>>0>s>>>0|(r|0)<0):0)?(r+1+c|0)>>>0<=a>>>0:0)p=e;else{x=c+1|0;Re(e,p,n,r,s,a,u,x,u);Re(e+(ee(a,s)|0)|0,p+(ee(x,u)|0)|0,n,r,s,a,u,x,u);a=x;s=u;n=0;r=0}k=8-l|0;C=c>>>1;x=(C|0)==0;S=u>>>1;T=(S|0)==0;E=16-u|0;_=s<<1;w=_-u|0;y=_|1;b=s+1|0;m=S<<1;v=0;do{c=p+((ee((ee(v,a)|0)+r|0,s)|0)+n)|0;if(!(x|T)){g=t+(v<<6)|0;f=C;while(1){u=g;e=c;h=S;while(1){D=o[e+s>>0]|0;A=o[e>>0]|0;i[u+8>>0]=(((ee(D,k)|0)+(ee(o[e+_>>0]|0,l)|0)<<3)+32|0)>>>6;i[u>>0]=(((ee(A,k)|0)+(ee(D,l)|0)<<3)+32|0)>>>6;D=o[e+b>>0]|0;A=o[e+1>>0]|0;i[u+9>>0]=(((ee(D,k)|0)+(ee(o[e+y>>0]|0,l)|0)<<3)+32|0)>>>6;i[u+1>>0]=(((ee(A,k)|0)+(ee(D,l)|0)<<3)+32|0)>>>6;h=h+-1|0;if(!h)break;else{u=u+2|0;e=e+2|0}}f=f+-1|0;if(!f)break;else{g=g+(m+E)|0;c=c+(m+w)|0}}}v=v+1|0}while((v|0)!=2);d=R;return}function Ae(e,t,n,r,s,a,l,u,c,p){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;c=c|0;p=p|0;var h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0,V=0;O=d;d=d+176|0;h=O;if(((n|0)>=0?!((n+1+c|0)>>>0>s>>>0|(r|0)<0):0)?(r+1+p|0)>>>0<=a>>>0:0)h=e;else{k=c+1|0;x=p+1|0;Re(e,h,n,r,s,a,k,x,k);Re(e+(ee(a,s)|0)|0,h+(ee(x,k)|0)|0,n,r,s,a,k,x,k);a=x;s=k;n=0;r=0}I=8-l|0;M=8-u|0;k=p>>>1;A=(k|0)==0;x=s<<1;R=c>>>1;P=(R|0)==0;D=16-c|0;T=x-c|0;_=s+1|0;C=x|1;S=s+2|0;E=x+2|0;b=R<<1;w=0;do{c=h+((ee((ee(w,a)|0)+r|0,s)|0)+n)|0;if(!(A|P)){y=t+(w<<6)|0;v=k;while(1){m=o[c+s>>0]|0;p=y;e=c;f=(ee(m,u)|0)+(ee(o[c>>0]|0,M)|0)|0;m=(ee(o[c+x>>0]|0,u)|0)+(ee(m,M)|0)|0;g=R;while(1){L=o[e+_>>0]|0;N=(ee(L,u)|0)+(ee(o[e+1>>0]|0,M)|0)|0;L=(ee(o[e+C>>0]|0,u)|0)+(ee(L,M)|0)|0;V=((ee(f,I)|0)+32+(ee(N,l)|0)|0)>>>6;i[p+8>>0]=((ee(m,I)|0)+32+(ee(L,l)|0)|0)>>>6;i[p>>0]=V;V=e;e=e+2|0;F=o[V+S>>0]|0;f=(ee(F,u)|0)+(ee(o[e>>0]|0,M)|0)|0;m=(ee(o[V+E>>0]|0,u)|0)+(ee(F,M)|0)|0;N=((ee(N,I)|0)+32+(ee(f,l)|0)|0)>>>6;i[p+9>>0]=((ee(L,I)|0)+32+(ee(m,l)|0)|0)>>>6;i[p+1>>0]=N;g=g+-1|0;if(!g)break;else p=p+2|0}v=v+-1|0;if(!v)break;else{y=y+(b+D)|0;c=c+(b+T)|0}}}w=w+1|0}while((w|0)!=2);d=O;return}function Pe(e,t,n,r,s,a,l,u){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;var c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0;v=d;d=d+448|0;c=v;if(((n|0)>=0?!((l+n|0)>>>0>s>>>0|(r|0)<0):0)?(r+5+u|0)>>>0<=a>>>0:0)c=e;else{Re(e,c,n,r,s,a,l,u+5|0,l);s=l;n=0;r=0}a=n+s+(ee(r,s)|0)|0;e=u>>>2;if(!e){d=v;return}h=s<<2;g=0-s|0;f=g<<1;m=s<<1;if(!l){d=v;return}else{p=c+a|0;n=c+(a+(s*5|0))|0}while(1){c=l;a=t;u=p;r=n;while(1){w=o[r+f>>0]|0;_=o[r+g>>0]|0;C=o[r+s>>0]|0;E=o[r>>0]|0;S=C+w|0;b=o[u+m>>0]|0;i[a+48>>0]=i[((o[r+m>>0]|0)+16-S-(S<<2)+b+((E+_|0)*20|0)>>5)+3984>>0]|0;S=b+E|0;y=o[u+s>>0]|0;i[a+32>>0]=i[(C+16-S-(S<<2)+y+((_+w|0)*20|0)>>5)+3984>>0]|0;S=y+_|0;C=o[u>>0]|0;i[a+16>>0]=i[(E+16-S-(S<<2)+C+((b+w|0)*20|0)>>5)+3984>>0]|0;w=C+w|0;i[a>>0]=i[(_+16-w-(w<<2)+(o[u+g>>0]|0)+((y+b|0)*20|0)>>5)+3984>>0]|0;c=c+-1|0;if(!c)break;else{a=a+1|0;u=u+1|0;r=r+1|0}}e=e+-1|0;if(!e)break;else{t=t+64|0;p=p+h|0;n=n+h|0}}d=v;return}function Ie(e,t,n,r,s,a,l,u,c){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0;_=d;d=d+448|0;p=_;if(((n|0)>=0?!((l+n|0)>>>0>s>>>0|(r|0)<0):0)?(r+5+u|0)>>>0<=a>>>0:0)p=e;else{Re(e,p,n,r,s,a,l,u+5|0,l);s=l;n=0;r=0}a=n+s+(ee(r,s)|0)|0;e=u>>>2;if(!e){d=_;return}w=(l|0)==0;b=(s<<2)-l|0;y=64-l|0;v=0-s|0;m=v<<1;g=s<<1;n=p+a|0;r=p+(a+(ee(s,c+2|0)|0))|0;p=p+(a+(s*5|0))|0;while(1){if(w){a=t;u=r}else{u=r+l|0;a=t+l|0;c=l;f=n;h=p;while(1){E=o[h+m>>0]|0;T=o[h+v>>0]|0;x=o[h+s>>0]|0;R=o[h>>0]|0;k=x+E|0;C=o[f+g>>0]|0;i[t+48>>0]=((o[((o[h+g>>0]|0)+16-k-(k<<2)+C+((R+T|0)*20|0)>>5)+3984>>0]|0)+1+(o[r+g>>0]|0)|0)>>>1;k=C+R|0;S=o[f+s>>0]|0;i[t+32>>0]=((o[(x+16-k-(k<<2)+S+((T+E|0)*20|0)>>5)+3984>>0]|0)+1+(o[r+s>>0]|0)|0)>>>1;k=S+T|0;x=o[f>>0]|0;i[t+16>>0]=((o[(R+16-k-(k<<2)+x+((C+E|0)*20|0)>>5)+3984>>0]|0)+1+(o[r>>0]|0)|0)>>>1;E=x+E|0;i[t>>0]=((o[(T+16-E-(E<<2)+(o[f+v>>0]|0)+((S+C|0)*20|0)>>5)+3984>>0]|0)+1+(o[r+v>>0]|0)|0)>>>1;c=c+-1|0;if(!c)break;else{t=t+1|0;f=f+1|0;r=r+1|0;h=h+1|0}}n=n+l|0;p=p+l|0}e=e+-1|0;if(!e)break;else{t=a+y|0;n=n+b|0;r=u+b|0;p=p+b|0}}d=_;return}function Me(e,t,n,r,s,a,l,u){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;var c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0;w=d;d=d+448|0;c=w;if((n|0)>=0?!((n+5+l|0)>>>0>s>>>0|(r|0)<0|(u+r|0)>>>0>a>>>0):0)c=e;else{h=l+5|0;Re(e,c,n,r,s,a,h,u,h);s=h;n=0;r=0}if(!u){d=w;return}v=l>>>2;y=(v|0)==0;b=s-l|0;g=16-l|0;m=v<<2;e=t;c=c+(n+5+(ee(r,s)|0))|0;f=u;while(1){if(y)a=e;else{a=e+m|0;n=c;s=o[c+-1>>0]|0;u=o[c+-2>>0]|0;p=o[c+-3>>0]|0;h=o[c+-4>>0]|0;l=o[c+-5>>0]|0;t=v;while(1){r=h+s|0;_=h;h=o[n>>0]|0;i[e>>0]=i[(l+16-r-(r<<2)+h+((p+u|0)*20|0)>>5)+3984>>0]|0;l=h+p|0;r=p;p=o[n+1>>0]|0;i[e+1>>0]=i[(_+16-l-(l<<2)+p+((u+s|0)*20|0)>>5)+3984>>0]|0;l=p+u|0;_=u;u=o[n+2>>0]|0;i[e+2>>0]=i[(r+16-l-(l<<2)+u+((h+s|0)*20|0)>>5)+3984>>0]|0;l=u+s|0;r=o[n+3>>0]|0;i[e+3>>0]=i[(_+16-l-(l<<2)+r+((p+h|0)*20|0)>>5)+3984>>0]|0;t=t+-1|0;if(!t)break;else{l=s;e=e+4|0;n=n+4|0;s=r}}c=c+m|0}f=f+-1|0;if(!f)break;else{e=a+g|0;c=c+b|0}}d=w;return}function Oe(e,t,n,r,s,a,l,u,c){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0;_=d;d=d+448|0;p=_;if((n|0)>=0?!((n+5+l|0)>>>0>s>>>0|(r|0)<0|(u+r|0)>>>0>a>>>0):0)p=e;else{f=l+5|0;Re(e,p,n,r,s,a,f,u,f);s=f;n=0;r=0}if(!u){d=_;return}b=l>>>2;w=(b|0)==0;y=s-l|0;v=16-l|0;g=(c|0)!=0;m=b<<2;e=t;p=p+(n+5+(ee(r,s)|0))|0;while(1){if(w)a=e;else{a=e+m|0;c=p;n=o[p+-1>>0]|0;s=o[p+-2>>0]|0;h=o[p+-3>>0]|0;f=o[p+-4>>0]|0;l=o[p+-5>>0]|0;t=b;while(1){r=f+n|0;C=f;f=o[c>>0]|0;i[e>>0]=((g?s:h)+1+(o[(l+16-r-(r<<2)+f+((h+s|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;l=f+h|0;r=h;h=o[c+1>>0]|0;i[e+1>>0]=((g?n:s)+1+(o[(C+16-l-(l<<2)+h+((s+n|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;l=h+s|0;C=s;s=o[c+2>>0]|0;i[e+2>>0]=((g?f:n)+1+(o[(r+16-l-(l<<2)+s+((f+n|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;l=s+n|0;r=o[c+3>>0]|0;i[e+3>>0]=((g?h:f)+1+(o[(C+16-l-(l<<2)+r+((h+f|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;t=t+-1|0;if(!t)break;else{l=n;e=e+4|0;c=c+4|0;n=r}}p=p+m|0}u=u+-1|0;if(!u)break;else{e=a+v|0;p=p+y|0}}d=_;return}function Ne(e,t,n,r,s,a,l,u,c){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0;T=d;d=d+448|0;p=T;if(((n|0)>=0?!((n+5+l|0)>>>0>s>>>0|(r|0)<0):0)?(r+5+u|0)>>>0<=a>>>0:0)p=e;else{E=l+5|0;Re(e,p,n,r,s,a,E,u+5|0,E);s=E;n=0;r=0}e=(ee(r,s)|0)+n|0;E=(c&1|2)+s+e|0;h=p+E|0;if(!u){d=T;return}w=l>>>2;C=(w|0)==0;_=s-l|0;S=16-l|0;y=w<<2;e=p+((ee(s,c>>>1&1|2)|0)+5+e)|0;b=u;while(1){if(!C){v=t+y|0;a=e;n=o[e+-1>>0]|0;r=o[e+-2>>0]|0;f=o[e+-3>>0]|0;m=o[e+-4>>0]|0;c=o[e+-5>>0]|0;g=w;while(1){x=m+n|0;k=m;m=o[a>>0]|0;i[t>>0]=i[(c+16-x-(x<<2)+m+((f+r|0)*20|0)>>5)+3984>>0]|0;x=m+f|0;c=f;f=o[a+1>>0]|0;i[t+1>>0]=i[(k+16-x-(x<<2)+f+((r+n|0)*20|0)>>5)+3984>>0]|0;x=f+r|0;k=r;r=o[a+2>>0]|0;i[t+2>>0]=i[(c+16-x-(x<<2)+r+((m+n|0)*20|0)>>5)+3984>>0]|0;x=r+n|0;c=o[a+3>>0]|0;i[t+3>>0]=i[(k+16-x-(x<<2)+c+((f+m|0)*20|0)>>5)+3984>>0]|0;g=g+-1|0;if(!g)break;else{x=n;t=t+4|0;a=a+4|0;n=c;c=x}}t=v;e=e+y|0}b=b+-1|0;if(!b)break;else{t=t+S|0;e=e+_|0}}e=u>>>2;if(!e){d=T;return}y=(l|0)==0;m=(s<<2)-l|0;f=64-l|0;g=0-s|0;b=g<<1;v=s<<1;t=t+(S-(u<<4))|0;a=p+(E+(s*5|0))|0;c=e;while(1){if(y){e=t;p=h}else{e=t+l|0;p=t;n=h;r=a;t=l;while(1){S=o[r+b>>0]|0;C=o[r+g>>0]|0;w=o[r+s>>0]|0;k=o[r>>0]|0;E=w+S|0;u=o[n+v>>0]|0;x=p+48|0;i[x>>0]=((o[((o[r+v>>0]|0)+16-E-(E<<2)+u+((k+C|0)*20|0)>>5)+3984>>0]|0)+1+(o[x>>0]|0)|0)>>>1;x=u+k|0;E=o[n+s>>0]|0;_=p+32|0;i[_>>0]=((o[(w+16-x-(x<<2)+E+((C+S|0)*20|0)>>5)+3984>>0]|0)+1+(o[_>>0]|0)|0)>>>1;_=o[n>>0]|0;x=E+C|0;w=p+16|0;i[w>>0]=((o[(k+16-x-(x<<2)+_+((u+S|0)*20|0)>>5)+3984>>0]|0)+1+(o[w>>0]|0)|0)>>>1;S=_+S|0;i[p>>0]=((o[(C+16-S-(S<<2)+(o[n+g>>0]|0)+((E+u|0)*20|0)>>5)+3984>>0]|0)+1+(o[p>>0]|0)|0)>>>1;t=t+-1|0;if(!t)break;else{p=p+1|0;n=n+1|0;r=r+1|0}}p=h+l|0;a=a+l|0}c=c+-1|0;if(!c)break;else{t=e+f|0;h=p+m|0;a=a+m|0}}d=T;return}function Le(e,t,n,r,a,l,u,c){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0;S=d;d=d+1792|0;p=S+1344|0;C=S;if(((n|0)>=0?!((n+5+u|0)>>>0>a>>>0|(r|0)<0):0)?(r+5+c|0)>>>0<=l>>>0:0){f=c+5|0;p=e;h=n+5|0}else{h=u+5|0;f=c+5|0;Re(e,p,n,r,a,l,h,f,h);a=h;h=5;r=0}if(f){y=u>>>2;_=(y|0)==0;b=a-u|0;w=y<<2;n=C;p=p+(h+(ee(r,a)|0))|0;while(1){if(_)e=n;else{e=n+(w<<2)|0;r=p;a=o[p+-1>>0]|0;l=o[p+-2>>0]|0;m=o[p+-3>>0]|0;g=o[p+-4>>0]|0;h=o[p+-5>>0]|0;v=y;while(1){E=g+a|0;T=g;g=o[r>>0]|0;s[n>>2]=h-E-(E<<2)+g+((m+l|0)*20|0);E=g+m|0;h=m;m=o[r+1>>0]|0;s[n+4>>2]=T-E+m-(E<<2)+((l+a|0)*20|0);E=m+l|0;T=l;l=o[r+2>>0]|0;s[n+8>>2]=h-E+l-(E<<2)+((g+a|0)*20|0);E=l+a|0;h=o[r+3>>0]|0;s[n+12>>2]=T-E+h-(E<<2)+((m+g|0)*20|0);v=v+-1|0;if(!v)break;else{E=a;n=n+16|0;r=r+4|0;a=h;h=E}}p=p+w|0}f=f+-1|0;if(!f)break;else{n=e;p=p+b|0}}}a=c>>>2;if(!a){d=S;return}w=(u|0)==0;b=64-u|0;m=u*3|0;y=0-u|0;g=y<<1;v=u<<1;r=t;e=C+(u<<2)|0;p=C+(u*6<<2)|0;f=a;while(1){if(w)a=r;else{a=r+u|0;n=e;l=p;h=u;while(1){t=s[l+(g<<2)>>2]|0;C=s[l+(y<<2)>>2]|0;T=s[l+(u<<2)>>2]|0;x=s[l>>2]|0;E=T+t|0;_=s[n+(v<<2)>>2]|0;i[r+48>>0]=i[((s[l+(v<<2)>>2]|0)+512-E-(E<<2)+_+((x+C|0)*20|0)>>10)+3984>>0]|0;E=_+x|0;c=s[n+(u<<2)>>2]|0;i[r+32>>0]=i[(T+512-E-(E<<2)+c+((C+t|0)*20|0)>>10)+3984>>0]|0;E=s[n>>2]|0;T=c+C|0;i[r+16>>0]=i[(x+512-T-(T<<2)+E+((_+t|0)*20|0)>>10)+3984>>0]|0;t=E+t|0;i[r>>0]=i[(C+512-t-(t<<2)+(s[n+(y<<2)>>2]|0)+((c+_|0)*20|0)>>10)+3984>>0]|0;h=h+-1|0;if(!h)break;else{r=r+1|0;n=n+4|0;l=l+4|0}}e=e+(u<<2)|0;p=p+(u<<2)|0}f=f+-1|0;if(!f)break;else{r=a+b|0;e=e+(m<<2)|0;p=p+(m<<2)|0}}d=S;return}function Fe(e,t,n,r,a,l,u,c,p){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;u=u|0;c=c|0;p=p|0;var h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0;E=d;d=d+1792|0;h=E+1344|0;S=E;if(((n|0)>=0?!((n+5+u|0)>>>0>a>>>0|(r|0)<0):0)?(r+5+c|0)>>>0<=l>>>0:0){f=c+5|0;h=e;n=n+5|0}else{g=u+5|0;f=c+5|0;Re(e,h,n,r,a,l,g,f,g);a=g;n=5;r=0}if(f){_=u>>>2;y=(_|0)==0;w=a-u|0;C=_<<2;m=S;h=h+(n+(ee(r,a)|0))|0;b=f;while(1){if(y)e=m;else{e=m+(C<<2)|0;r=h;n=o[h+-1>>0]|0;a=o[h+-2>>0]|0;l=o[h+-3>>0]|0;g=o[h+-4>>0]|0;f=o[h+-5>>0]|0;v=_;while(1){T=g+n|0;x=g;g=o[r>>0]|0;s[m>>2]=f-T-(T<<2)+g+((l+a|0)*20|0);T=g+l|0;f=l;l=o[r+1>>0]|0;s[m+4>>2]=x-T+l-(T<<2)+((a+n|0)*20|0);T=l+a|0;x=a;a=o[r+2>>0]|0;s[m+8>>2]=f-T+a-(T<<2)+((g+n|0)*20|0);T=a+n|0;f=o[r+3>>0]|0;s[m+12>>2]=x-T+f-(T<<2)+((l+g|0)*20|0);v=v+-1|0;if(!v)break;else{T=n;m=m+16|0;r=r+4|0;n=f;f=T}}h=h+C|0}b=b+-1|0;if(!b)break;else{m=e;h=h+w|0}}}n=c>>>2;if(!n){d=E;return}C=(u|0)==0;w=64-u|0;g=u*3|0;_=0-u|0;y=_<<1;b=u<<1;e=S+(u<<2)|0;h=S+((ee(p+2|0,u)|0)+u<<2)|0;a=S+(u*6<<2)|0;v=n;while(1){if(C){r=t;n=h}else{n=h+(u<<2)|0;r=t+u|0;m=e;l=a;f=u;while(1){p=s[l+(y<<2)>>2]|0;c=s[l+(_<<2)>>2]|0;k=s[l+(u<<2)>>2]|0;R=s[l>>2]|0;x=k+p|0;T=s[m+(b<<2)>>2]|0;i[t+48>>0]=((o[((s[l+(b<<2)>>2]|0)+512-x-(x<<2)+T+((R+c|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[h+(b<<2)>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;x=T+R|0;S=s[m+(u<<2)>>2]|0;i[t+32>>0]=((o[(k+512-x-(x<<2)+S+((c+p|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[h+(u<<2)>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;x=s[m>>2]|0;k=S+c|0;i[t+16>>0]=((o[(R+512-k-(k<<2)+x+((T+p|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[h>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;p=x+p|0;i[t>>0]=((o[(c+512-p-(p<<2)+(s[m+(_<<2)>>2]|0)+((S+T|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[h+(_<<2)>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;f=f+-1|0;if(!f)break;else{t=t+1|0;m=m+4|0;h=h+4|0;l=l+4|0}}e=e+(u<<2)|0;a=a+(u<<2)|0}v=v+-1|0;if(!v)break;else{t=r+w|0;e=e+(g<<2)|0;h=n+(g<<2)|0;a=a+(g<<2)|0}}d=E;return}function Ve(e,t,n,r,a,l,u,c,p){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;u=u|0;c=c|0;p=p|0;var h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0;k=d;d=d+1792|0;h=k+1344|0;x=k;T=u+5|0;if(((n|0)>=0?!((n+5+u|0)>>>0>a>>>0|(r|0)<0):0)?(r+5+c|0)>>>0<=l>>>0:0)h=e;else{Re(e,h,n,r,a,l,T,c+5|0,T);a=T;n=0;r=0}b=n+a+(ee(r,a)|0)|0;r=c>>>2;if(r){E=(T|0)==0;S=(a<<2)-u+-5|0;y=T*3|0;m=0-a|0;C=m<<1;_=a<<1;w=T<<1;g=-5-u|0;l=x+(T<<2)|0;v=h+b|0;n=h+(b+(a*5|0))|0;while(1){if(E)b=l;else{b=l+(T<<2)|0;h=v;e=n;f=T;while(1){A=o[e+C>>0]|0;P=o[e+m>>0]|0;M=o[e+a>>0]|0;O=o[e>>0]|0;I=M+A|0;R=o[h+_>>0]|0;s[l+(w<<2)>>2]=(o[e+_>>0]|0)-I-(I<<2)+R+((O+P|0)*20|0);I=R+O|0;D=o[h+a>>0]|0;s[l+(T<<2)>>2]=M-I+D-(I<<2)+((P+A|0)*20|0);I=o[h>>0]|0;M=D+P|0;s[l>>2]=O-M+I-(M<<2)+((R+A|0)*20|0);A=I+A|0;s[l+(g<<2)>>2]=P-A+(o[h+m>>0]|0)-(A<<2)+((D+R|0)*20|0);f=f+-1|0;if(!f)break;else{l=l+4|0;h=h+1|0;e=e+1|0}}v=v+T|0;n=n+T|0}r=r+-1|0;if(!r)break;else{l=b+(y<<2)|0;v=v+S|0;n=n+S|0}}}if(!c){d=k;return}_=u>>>2;C=(_|0)==0;w=16-u|0;y=_<<2;a=x+(p+2<<2)|0;r=x+20|0;while(1){if(C)n=a;else{n=a+(y<<2)|0;b=t;h=r;l=s[r+-4>>2]|0;f=s[r+-8>>2]|0;m=s[r+-12>>2]|0;g=s[r+-16>>2]|0;e=s[r+-20>>2]|0;v=_;while(1){p=g+l|0;u=g;g=s[h>>2]|0;i[b>>0]=((o[(e+512-p-(p<<2)+g+((m+f|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[a>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;p=g+m|0;e=m;m=s[h+4>>2]|0;i[b+1>>0]=((o[(u+512-p-(p<<2)+m+((f+l|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[a+4>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;p=m+f|0;u=f;f=s[h+8>>2]|0;i[b+2>>0]=((o[(e+512-p-(p<<2)+f+((g+l|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[a+8>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;p=f+l|0;e=s[h+12>>2]|0;i[b+3>>0]=((o[(u+512-p-(p<<2)+e+((m+g|0)*20|0)>>10)+3984>>0]|0)+1+(o[((s[a+12>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;v=v+-1|0;if(!v)break;else{p=l;b=b+4|0;a=a+16|0;h=h+16|0;l=e;e=p}}t=t+y|0;r=r+(y<<2)|0}c=c+-1|0;if(!c)break;else{t=t+w|0;a=n+20|0;r=r+20|0}}d=k;return}function Be(e,t,n,i,o,a,l,u,c){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0;S=d;g=e+((l<<4)+a)|0;w=r[t>>1]|0;C=t+2|0;y=r[C>>1]|0;b=n+4|0;m=s[b>>2]<<4;v=n+8|0;f=s[v>>2]<<4;i=a+i|0;p=i+(w>>2)|0;o=l+o|0;h=o+(y>>2)|0;do switch(s[6800+((w&3)<<4)+((y&3)<<2)>>2]|0){case 10:{Le(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c);break}case 12:{Oe(s[n>>2]|0,g,p+-2|0,h,m,f,u,c,1);break}case 5:{Ne(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,0);break}case 7:{Ne(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,2);break}case 9:{Fe(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,0);break}case 0:{Re(s[n>>2]|0,g,p,h,m,f,u,c,16);break}case 4:{Oe(s[n>>2]|0,g,p+-2|0,h,m,f,u,c,0);break}case 1:{Ie(s[n>>2]|0,g,p,h+-2|0,m,f,u,c,0);break}case 14:{Ve(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,1);break}case 3:{Ie(s[n>>2]|0,g,p,h+-2|0,m,f,u,c,1);break}case 8:{Me(s[n>>2]|0,g,p+-2|0,h,m,f,u,c);break}case 2:{Pe(s[n>>2]|0,g,p,h+-2|0,m,f,u,c);break}case 6:{Ve(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,0);break}case 11:{Fe(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,1);break}case 13:{Ne(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,1);break}default:Ne(s[n>>2]|0,g,p+-2|0,h+-2|0,m,f,u,c,3)}while(0);w=(a>>>1)+256+(l>>>1<<3)|0;_=e+w|0;y=s[n>>2]|0;p=s[b>>2]|0;l=s[v>>2]|0;v=p<<3;b=l<<3;m=r[t>>1]|0;n=(m>>3)+(i>>>1)|0;g=r[C>>1]|0;f=(g>>3)+(o>>>1)|0;m=m&7;g=g&7;o=u>>>1;a=c>>>1;l=ee(p<<8,l)|0;i=y+l|0;p=(m|0)!=0;h=(g|0)!=0;if(p&h){Ae(i,_,n,f,v,b,m,g,o,a);d=S;return}if(p){ke(i,_,n,f,v,b,m,o,a);d=S;return}if(h){De(i,_,n,f,v,b,g,o,a);d=S;return}else{Re(i,_,n,f,v,b,o,a,8);Re(y+((ee(b,v)|0)+l)|0,e+(w+64)|0,n,f,v,b,o,a,8);d=S;return}}function Ue(e,t,n,r,s){e=e|0;t=t|0;n=n|0;r=r|0;s=s|0;var o=0,a=0,l=0;l=d;if(n){gi(t|0,i[e>>0]|0,n|0)|0;t=t+n|0}if(r){a=t+r|0;o=r;n=e;while(1){i[t>>0]=i[n>>0]|0;o=o+-1|0;if(!o)break;else{t=t+1|0;n=n+1|0}}t=a;e=e+r|0}if(!s){d=l;return}gi(t|0,i[e+-1>>0]|0,s|0)|0;d=l;return}function je(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;n=d;ci(t,e,i);d=n;return}function He(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0;g=d;r=s[e+40>>2]|0;if(r){a=s[e>>2]|0;u=e+32|0;l=0;do{if(((s[a+(l*40|0)+20>>2]|0)+-1|0)>>>0<2){o=s[a+(l*40|0)+12>>2]|0;if(o>>>0>n>>>0)o=o-(s[u>>2]|0)|0;s[a+(l*40|0)+8>>2]=o}l=l+1|0}while((l|0)!=(r|0))}if(!(s[t>>2]|0)){m=0;d=g;return m|0}o=s[t+4>>2]|0;if(o>>>0>=3){m=0;d=g;return m|0}f=e+32|0;m=e+24|0;h=e+4|0;r=n;p=0;e:while(1){t:do if(o>>>0<2){u=s[t+(p*12|0)+8>>2]|0;if(!o){o=r-u|0;if((o|0)<0)o=(s[f>>2]|0)+o|0}else{c=u+r|0;o=s[f>>2]|0;o=c-((c|0)<(o|0)?0:o)|0}if(o>>>0>n>>>0)r=o-(s[f>>2]|0)|0;else r=o;l=s[m>>2]|0;if(!l){r=1;o=37;break e}u=s[e>>2]|0;c=0;while(1){a=s[u+(c*40|0)+20>>2]|0;if((a+-1|0)>>>0<2?(s[u+(c*40|0)+8>>2]|0)==(r|0):0){r=o;break t}c=c+1|0;if(c>>>0>=l>>>0){r=1;o=37;break e}}}else{l=s[t+(p*12|0)+12>>2]|0;a=s[m>>2]|0;if(!a){r=1;o=37;break e}u=s[e>>2]|0;o=0;while(1){if((s[u+(o*40|0)+20>>2]|0)==3?(s[u+(o*40|0)+8>>2]|0)==(l|0):0){a=3;c=o;break t}o=o+1|0;if(o>>>0>=a>>>0){r=1;o=37;break e}}}while(0);if(!((c|0)>-1&a>>>0>1)){r=1;o=37;break}if(p>>>0<i>>>0){u=i;do{l=u;u=u+-1|0;a=s[h>>2]|0;s[a+(l<<2)>>2]=s[a+(u<<2)>>2]}while(u>>>0>p>>>0);u=s[e>>2]|0}s[(s[h>>2]|0)+(p<<2)>>2]=u+(c*40|0);p=p+1|0;if(p>>>0<=i>>>0){o=p;u=p;do{l=s[h>>2]|0;a=s[l+(o<<2)>>2]|0;if((a|0)!=((s[e>>2]|0)+(c*40|0)|0)){s[l+(u<<2)>>2]=a;u=u+1|0}o=o+1|0}while(o>>>0<=i>>>0)}o=s[t+(p*12|0)+4>>2]|0;if(o>>>0>=3){r=0;o=37;break}}if((o|0)==37){d=g;return r|0}return 0}function Ge(e,t,n,i,r,o,a,l){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;a=a|0;l=l|0;var u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0;L=d;O=s[n>>2]|0;N=s[e+8>>2]|0;
if((O|0)!=(s[N>>2]|0)){D=1;d=L;return D|0}k=e+52|0;s[k>>2]=0;I=s[e+56>>2]|0;f=(I|0)==0;M=f&1;do if(!t){s[N+20>>2]=0;s[N+12>>2]=i;s[N+8>>2]=i;s[N+16>>2]=r;s[N+24>>2]=M;if(f){n=e+44|0;s[n>>2]=(s[n>>2]|0)+1;n=0;v=0}else{n=I;v=0}}else{if(o){u=e+20|0;s[u>>2]=0;c=e+16|0;s[c>>2]=0;v=s[e>>2]|0;b=e+44|0;g=0;do{m=v+(g*40|0)+20|0;if((s[m>>2]|0)!=0?(s[m>>2]=0,(s[v+(g*40|0)+24>>2]|0)==0):0)s[b>>2]=(s[b>>2]|0)+-1;g=g+1|0}while((g|0)!=16);e:do if(f){h=s[e+28>>2]|0;p=e+12|0;g=0;while(1){i=0;m=2147483647;f=0;do{if(s[v+(i*40|0)+24>>2]|0){R=s[v+(i*40|0)+16>>2]|0;D=(R|0)<(m|0);m=D?R:m;f=D?v+(i*40|0)|0:f}i=i+1|0}while(i>>>0<=h>>>0);if(!f){n=0;break e}D=s[p>>2]|0;s[D+(g<<4)>>2]=s[f>>2];s[D+(g<<4)+12>>2]=s[f+36>>2];s[D+(g<<4)+4>>2]=s[f+28>>2];s[D+(g<<4)+8>>2]=s[f+32>>2];g=g+1|0;s[c>>2]=g;s[f+24>>2]=0;if(s[f+20>>2]|0)continue;s[b>>2]=(s[b>>2]|0)+-1}}else n=I;while(0);m=e+40|0;s[m>>2]=0;f=e+36|0;s[f>>2]=65535;s[e+48>>2]=0;if(!(s[t>>2]|n))n=0;else{s[c>>2]=0;s[u>>2]=0}v=(s[t+4>>2]|0)==0;s[N+20>>2]=v?2:3;s[f>>2]=v?65535:0;s[N+12>>2]=0;s[N+8>>2]=0;s[N+16>>2]=0;s[N+24>>2]=M;s[b>>2]=1;s[m>>2]=1;v=0;break}if(!(s[t+8>>2]|0)){n=e+40|0;g=s[n>>2]|0;m=s[e+24>>2]|0;if(g>>>0>=m>>>0)if(g){c=s[e>>2]|0;p=0;f=-1;h=0;do{if(((s[c+(p*40|0)+20>>2]|0)+-1|0)>>>0<2){D=s[c+(p*40|0)+8>>2]|0;R=(D|0)<(h|0)|(f|0)==-1;f=R?p:f;h=R?D:h}p=p+1|0}while((p|0)!=(g|0));if((f|0)>-1){g=g+-1|0;s[c+(f*40|0)+20>>2]=0;s[n>>2]=g;if(!(s[c+(f*40|0)+24>>2]|0)){n=e+44|0;s[n>>2]=(s[n>>2]|0)+-1;n=I;h=0}else{n=I;h=0}}else{n=I;h=1}}else{g=0;n=I;h=1}else{n=I;h=0}}else{A=e+24|0;R=e+40|0;_=e+44|0;S=e+36|0;x=e+48|0;w=e+28|0;E=e+16|0;T=e+12|0;v=I;n=I;y=0;C=0;e:while(1){switch(s[t+(y*20|0)+12>>2]|0){case 2:{c=s[t+(y*20|0)+20>>2]|0;p=s[A>>2]|0;if(!p){h=1;break e}h=s[e>>2]|0;b=0;while(1){u=h+(b*40|0)+20|0;if((s[u>>2]|0)==3?(s[h+(b*40|0)+8>>2]|0)==(c|0):0)break;b=b+1|0;if(b>>>0>=p>>>0){h=1;break e}}if((b|0)<0){h=1;break e}s[u>>2]=0;s[R>>2]=(s[R>>2]|0)+-1;if(!(s[h+(b*40|0)+24>>2]|0)){s[_>>2]=(s[_>>2]|0)+-1;b=C}else b=C;break}case 4:{c=s[t+(y*20|0)+28>>2]|0;s[S>>2]=c;p=s[A>>2]|0;if(!p)b=C;else{h=s[e>>2]|0;b=c;f=0;do{u=h+(f*40|0)+20|0;do if((s[u>>2]|0)==3){if((s[h+(f*40|0)+8>>2]|0)>>>0<=c>>>0)if((b|0)==65535)b=65535;else break;s[u>>2]=0;s[R>>2]=(s[R>>2]|0)+-1;if(!(s[h+(f*40|0)+24>>2]|0))s[_>>2]=(s[_>>2]|0)+-1}while(0);f=f+1|0}while((f|0)!=(p|0));b=C}break}case 0:{h=0;P=101;break e}case 1:{h=i-(s[t+(y*20|0)+16>>2]|0)|0;c=s[A>>2]|0;if(!c){h=1;break e}p=s[e>>2]|0;b=0;while(1){u=p+(b*40|0)+20|0;if(((s[u>>2]|0)+-1|0)>>>0<2?(s[p+(b*40|0)+8>>2]|0)==(h|0):0)break;b=b+1|0;if(b>>>0>=c>>>0){h=1;break e}}if((b|0)<0){h=1;break e}s[u>>2]=0;s[R>>2]=(s[R>>2]|0)+-1;if(!(s[p+(b*40|0)+24>>2]|0)){s[_>>2]=(s[_>>2]|0)+-1;b=C}else b=C;break}case 6:{p=s[t+(y*20|0)+24>>2]|0;b=s[S>>2]|0;if((b|0)==65535|b>>>0<p>>>0){h=1;P=101;break e}v=s[A>>2]|0;t:do if(v){c=s[e>>2]|0;b=0;while(1){u=c+(b*40|0)+20|0;if((s[u>>2]|0)==3?(s[c+(b*40|0)+8>>2]|0)==(p|0):0)break;b=b+1|0;if(b>>>0>=v>>>0){P=88;break t}}s[u>>2]=0;u=(s[R>>2]|0)+-1|0;s[R>>2]=u;if(!(s[c+(b*40|0)+24>>2]|0)){s[_>>2]=(s[_>>2]|0)+-1;b=u}else b=u}else{v=0;P=88}while(0);if((P|0)==88){P=0;b=s[R>>2]|0}if(b>>>0>=v>>>0){h=1;P=101;break e}s[N+12>>2]=i;s[N+8>>2]=p;s[N+16>>2]=r;s[N+20>>2]=3;s[N+24>>2]=M;s[R>>2]=b+1;s[_>>2]=(s[_>>2]|0)+1;v=I;n=I;b=1;break}case 3:{b=s[t+(y*20|0)+16>>2]|0;h=s[t+(y*20|0)+24>>2]|0;u=s[S>>2]|0;if((u|0)==65535|u>>>0<h>>>0){h=1;break e}f=s[A>>2]|0;if(!f){h=1;break e}m=s[e>>2]|0;u=0;while(1){p=m+(u*40|0)+20|0;if((s[p>>2]|0)==3?(s[m+(u*40|0)+8>>2]|0)==(h|0):0){P=47;break}c=u+1|0;if(c>>>0<f>>>0)u=c;else break}if((P|0)==47?(P=0,s[p>>2]=0,s[R>>2]=(s[R>>2]|0)+-1,(s[m+(u*40|0)+24>>2]|0)==0):0)s[_>>2]=(s[_>>2]|0)+-1;p=i-b|0;b=0;while(1){c=m+(b*40|0)+20|0;u=s[c>>2]|0;if((u+-1|0)>>>0<2?(D=m+(b*40|0)+8|0,(s[D>>2]|0)==(p|0)):0)break;b=b+1|0;if(b>>>0>=f>>>0){h=1;break e}}if(!((b|0)>-1&u>>>0>1)){h=1;break e}s[c>>2]=3;s[D>>2]=h;b=C;break}case 5:{h=s[e>>2]|0;g=0;do{m=h+(g*40|0)+20|0;if((s[m>>2]|0)!=0?(s[m>>2]=0,(s[h+(g*40|0)+24>>2]|0)==0):0)s[_>>2]=(s[_>>2]|0)+-1;g=g+1|0}while((g|0)!=16);t:do if(!n){c=s[w>>2]|0;p=v;while(1){n=0;b=2147483647;u=0;do{if(s[h+(n*40|0)+24>>2]|0){f=s[h+(n*40|0)+16>>2]|0;i=(f|0)<(b|0);b=i?f:b;u=i?h+(n*40|0)|0:u}n=n+1|0}while(n>>>0<=c>>>0);if(!u){v=p;n=0;break t}b=s[E>>2]|0;n=s[T>>2]|0;s[n+(b<<4)>>2]=s[u>>2];s[n+(b<<4)+12>>2]=s[u+36>>2];s[n+(b<<4)+4>>2]=s[u+28>>2];s[n+(b<<4)+8>>2]=s[u+32>>2];s[E>>2]=b+1;s[u+24>>2]=0;if(!(s[u+20>>2]|0))s[_>>2]=(s[_>>2]|0)+-1;if(!p)p=0;else{v=p;n=p;break}}}while(0);s[R>>2]=0;s[S>>2]=65535;s[x>>2]=0;s[k>>2]=1;i=0;b=C;break}default:{h=1;break e}}y=y+1|0;C=b}if(C){v=h;break}g=s[R>>2]|0;m=s[A>>2]|0}if(g>>>0<m>>>0){s[N+12>>2]=i;s[N+8>>2]=i;s[N+16>>2]=r;s[N+20>>2]=2;s[N+24>>2]=M;v=e+44|0;s[v>>2]=(s[v>>2]|0)+1;s[e+40>>2]=g+1;v=h}else v=1}while(0);s[N+36>>2]=o;s[N+28>>2]=a;s[N+32>>2]=l;if(!n){f=e+44|0;n=s[f>>2]|0;u=s[e+28>>2]|0;if(n>>>0>u>>>0){m=e+16|0;g=e+12|0;do{h=s[e>>2]|0;i=0;c=2147483647;p=0;do{if(s[h+(i*40|0)+24>>2]|0){R=s[h+(i*40|0)+16>>2]|0;D=(R|0)<(c|0);c=D?R:c;p=D?h+(i*40|0)|0:p}i=i+1|0}while(i>>>0<=u>>>0);if((p|0)!=0?(D=s[m>>2]|0,R=s[g>>2]|0,s[R+(D<<4)>>2]=s[p>>2],s[R+(D<<4)+12>>2]=s[p+36>>2],s[R+(D<<4)+4>>2]=s[p+28>>2],s[R+(D<<4)+8>>2]=s[p+32>>2],s[m>>2]=D+1,s[p+24>>2]=0,(s[p+20>>2]|0)==0):0){n=n+-1|0;s[f>>2]=n}}while(n>>>0>u>>>0)}}else{u=e+16|0;D=s[u>>2]|0;R=s[e+12>>2]|0;s[R+(D<<4)>>2]=O;s[R+(D<<4)+12>>2]=o;s[R+(D<<4)+4>>2]=a;s[R+(D<<4)+8>>2]=l;s[u>>2]=D+1;u=s[e+28>>2]|0}Ze(s[e>>2]|0,u+1|0);D=v;d=L;return D|0}function qe(e,t){e=e|0;t=t|0;var n=0,i=0;i=d;if((t>>>0<=16?(n=s[(s[e+4>>2]|0)+(t<<2)>>2]|0,(n|0)!=0):0)?(s[n+20>>2]|0)>>>0>1:0)n=s[n>>2]|0;else n=0;d=i;return n|0}function We(e){e=e|0;var t=0;t=(s[e>>2]|0)+((s[e+28>>2]|0)*40|0)|0;s[e+8>>2]=t;return s[t>>2]|0}function ze(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var a=0,l=0;l=d;s[e+36>>2]=65535;i=i>>>0>1?i:1;s[e+24>>2]=i;a=e+28|0;s[a>>2]=(o|0)==0?n:i;s[e+32>>2]=r;s[e+56>>2]=o;s[e+44>>2]=0;s[e+40>>2]=0;s[e+48>>2]=0;o=li(680)|0;s[e>>2]=o;if(!o){o=65535;d=l;return o|0}di(o,0,680);e:do if((s[a>>2]|0)!=-1){r=t*384|47;i=0;while(1){n=li(r)|0;o=s[e>>2]|0;s[o+(i*40|0)+4>>2]=n;if(!n){o=65535;break}s[o+(i*40|0)>>2]=n+(0-n&15);i=i+1|0;if(i>>>0>=((s[a>>2]|0)+1|0)>>>0)break e}d=l;return o|0}while(0);o=e+4|0;s[o>>2]=li(68)|0;r=li((s[a>>2]<<4)+16|0)|0;s[e+12>>2]=r;o=s[o>>2]|0;if((o|0)==0|(r|0)==0){o=65535;d=l;return o|0}di(o,0,68);s[e+20>>2]=0;s[e+16>>2]=0;o=0;d=l;return o|0}function Ke(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var a=0,l=0,u=0,c=0;c=d;a=s[e>>2]|0;if(a){u=e+28|0;if((s[u>>2]|0)!=-1){l=0;do{ui(s[a+(l*40|0)+4>>2]|0);a=s[e>>2]|0;s[a+(l*40|0)+4>>2]=0;l=l+1|0}while(l>>>0<((s[u>>2]|0)+1|0)>>>0)}}else a=0;ui(a);s[e>>2]=0;a=e+4|0;ui(s[a>>2]|0);s[a>>2]=0;a=e+12|0;ui(s[a>>2]|0);s[a>>2]=0;a=ze(e,t,n,i,r,o)|0;d=c;return a|0}function Ye(e){e=e|0;var t=0,n=0,i=0,r=0;r=d;t=s[e>>2]|0;if(t){i=e+28|0;if((s[i>>2]|0)!=-1){n=0;do{ui(s[t+(n*40|0)+4>>2]|0);t=s[e>>2]|0;s[t+(n*40|0)+4>>2]=0;n=n+1|0}while(n>>>0<((s[i>>2]|0)+1|0)>>>0)}}else t=0;ui(t);s[e>>2]=0;t=e+4|0;ui(s[t>>2]|0);s[t>>2]=0;t=e+12|0;ui(s[t>>2]|0);s[t>>2]=0;d=r;return}function Xe(e){e=e|0;var t=0,n=0,i=0,r=0;r=d;t=s[e+40>>2]|0;if(!t){d=r;return}i=e+4|0;n=0;do{s[(s[i>>2]|0)+(n<<2)>>2]=(s[e>>2]|0)+(n*40|0);n=n+1|0}while(n>>>0<t>>>0);d=r;return}function Qe(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0;E=d;_=e+16|0;s[_>>2]=0;s[e+20>>2]=0;if(!i){t=0;d=E;return t|0}S=e+48|0;i=s[S>>2]|0;r=(i|0)==(t|0);e:do if(!r?(w=e+32|0,c=s[w>>2]|0,u=((i+1|0)>>>0)%(c>>>0)|0,(u|0)!=(t|0)):0){y=e+28|0;C=s[(s[e>>2]|0)+((s[y>>2]|0)*40|0)>>2]|0;v=e+40|0;m=e+24|0;f=e+44|0;g=e+56|0;b=e+12|0;h=u;while(1){u=s[v>>2]|0;if(!u)u=0;else{l=s[e>>2]|0;a=0;do{if(((s[l+(a*40|0)+20>>2]|0)+-1|0)>>>0<2){i=s[l+(a*40|0)+12>>2]|0;s[l+(a*40|0)+8>>2]=i-(i>>>0>h>>>0?c:0)}a=a+1|0}while((a|0)!=(u|0))}if(u>>>0>=(s[m>>2]|0)>>>0){if(!u){i=1;o=46;break}r=s[e>>2]|0;a=0;c=-1;l=0;while(1){if(((s[r+(a*40|0)+20>>2]|0)+-1|0)>>>0<2){i=s[r+(a*40|0)+8>>2]|0;p=(i|0)<(l|0)|(c|0)==-1;o=p?a:c;l=p?i:l}else o=c;a=a+1|0;if((a|0)==(u|0))break;else c=o}if((o|0)<=-1){i=1;o=46;break}c=u+-1|0;s[r+(o*40|0)+20>>2]=0;s[v>>2]=c;if(!(s[r+(o*40|0)+24>>2]|0)){s[f>>2]=(s[f>>2]|0)+-1;u=c}else u=c}c=s[f>>2]|0;p=s[y>>2]|0;if(c>>>0>=p>>>0){i=(s[g>>2]|0)==0;do if(i){o=s[e>>2]|0;r=0;l=2147483647;a=0;do{if(s[o+(r*40|0)+24>>2]|0){x=s[o+(r*40|0)+16>>2]|0;T=(x|0)<(l|0);l=T?x:l;a=T?o+(r*40|0)|0:a}r=r+1|0}while(r>>>0<=p>>>0);if((a|0)!=0?(r=s[_>>2]|0,o=s[b>>2]|0,s[o+(r<<4)>>2]=s[a>>2],s[o+(r<<4)+12>>2]=s[a+36>>2],s[o+(r<<4)+4>>2]=s[a+28>>2],s[o+(r<<4)+8>>2]=s[a+32>>2],s[_>>2]=r+1,s[a+24>>2]=0,(s[a+20>>2]|0)==0):0){c=c+-1|0;s[f>>2]=c}}while(c>>>0>=p>>>0)}i=s[e>>2]|0;s[i+(p*40|0)+20>>2]=1;s[i+(p*40|0)+12>>2]=h;s[i+(p*40|0)+8>>2]=h;s[i+(p*40|0)+16>>2]=0;s[i+(p*40|0)+24>>2]=0;s[f>>2]=c+1;s[v>>2]=u+1;Ze(i,p+1|0);c=s[w>>2]|0;h=((h+1|0)>>>0)%(c>>>0)|0;if((h|0)==(t|0)){o=31;break}}if((o|0)==31){o=s[_>>2]|0;if(!o){o=41;break}i=s[b>>2]|0;a=s[y>>2]|0;l=s[e>>2]|0;c=l+(a*40|0)|0;u=s[c>>2]|0;r=0;while(1){if((s[i+(r<<4)>>2]|0)==(u|0))break;r=r+1|0;if(r>>>0>=o>>>0){o=41;break e}}if(!a){o=41;break}else i=0;while(1){r=l+(i*40|0)|0;i=i+1|0;if((s[r>>2]|0)==(C|0))break;if(i>>>0>=a>>>0){o=41;break e}}s[r>>2]=u;s[c>>2]=C;o=41;break}else if((o|0)==46){d=E;return i|0}}else o=39;while(0);if((o|0)==39)if(n)if(r){t=1;d=E;return t|0}else o=41;do if((o|0)==41){if(!n){i=s[S>>2]|0;break}s[S>>2]=t;t=0;d=E;return t|0}while(0);if((i|0)==(t|0)){t=0;d=E;return t|0}e=s[e+32>>2]|0;s[S>>2]=((t+-1+e|0)>>>0)%(e>>>0)|0;t=0;d=E;return t|0}function $e(e){e=e|0;var t=0,n=0,i=0;i=d;n=e+20|0;t=s[n>>2]|0;if(t>>>0>=(s[e+16>>2]|0)>>>0){t=0;d=i;return t|0}e=s[e+12>>2]|0;s[n>>2]=t+1;t=e+(t<<4)|0;d=i;return t|0}function Je(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0;u=d;r=s[e>>2]|0;if(!r){d=u;return}s[e+60>>2]=1;if(s[e+56>>2]|0){d=u;return}o=s[e+28>>2]|0;a=e+16|0;l=e+12|0;i=e+44|0;e=0;t=2147483647;n=0;while(1){if(s[r+(e*40|0)+24>>2]|0){p=s[r+(e*40|0)+16>>2]|0;c=(p|0)<(t|0);t=c?p:t;n=c?r+(e*40|0)|0:n}e=e+1|0;if(e>>>0<=o>>>0)continue;if(!n)break;c=s[a>>2]|0;t=s[l>>2]|0;s[t+(c<<4)>>2]=s[n>>2];s[t+(c<<4)+12>>2]=s[n+36>>2];s[t+(c<<4)+4>>2]=s[n+28>>2];s[t+(c<<4)+8>>2]=s[n+32>>2];s[a>>2]=c+1;s[n+24>>2]=0;if(s[n+20>>2]|0){e=0;t=2147483647;n=0;continue}s[i>>2]=(s[i>>2]|0)+-1;e=0;t=2147483647;n=0}d=u;return}function Ze(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0;_=d;d=d+32|0;g=_+16|0;y=_;f=7;do{if(f>>>0<t>>>0){h=f;do{p=e+(h*40|0)|0;c=s[p>>2]|0;p=s[p+4>>2]|0;m=s[e+(h*40|0)+8>>2]|0;u=e+(h*40|0)+12|0;b=s[u+4>>2]|0;v=g;s[v>>2]=s[u>>2];s[v+4>>2]=b;v=s[e+(h*40|0)+20>>2]|0;b=s[e+(h*40|0)+24>>2]|0;u=e+(h*40|0)+28|0;s[y+0>>2]=s[u+0>>2];s[y+4>>2]=s[u+4>>2];s[y+8>>2]=s[u+8>>2];e:do if(h>>>0<f>>>0){n=h;w=8}else{r=(b|0)==0;l=v+-1|0;u=l>>>0<2;t:do if(!v){i=h;while(1){n=i-f|0;if(s[e+(n*40|0)+20>>2]|0){n=i;break t}if((s[e+(n*40|0)+24>>2]|0)!=0|r){n=i;break t}i=e+(i*40|0)+0|0;o=e+(n*40|0)+0|0;a=i+40|0;do{s[i>>2]=s[o>>2];i=i+4|0;o=o+4|0}while((i|0)<(a|0));if(n>>>0<f>>>0){w=8;break e}else i=n}}else{n=h;while(1){r=n-f|0;i=s[e+(r*40|0)+20>>2]|0;do if(i){i=i+-1|0;if((i|l)>>>0<2){i=s[e+(r*40|0)+8>>2]|0;if((i|0)>(m|0))break t;n=e+(n*40|0)|0;if((i|0)<(m|0))break;else break e}if(i>>>0<2)break t;if(!u?(s[e+(r*40|0)+8>>2]|0)<=(m|0):0)break t;else w=16}else w=16;while(0);if((w|0)==16){w=0;n=e+(n*40|0)|0}i=n+0|0;o=e+(r*40|0)+0|0;a=i+40|0;do{s[i>>2]=s[o>>2];i=i+4|0;o=o+4|0}while((i|0)<(a|0));if(r>>>0<f>>>0){n=r;w=8;break e}else n=r}}while(0);n=e+(n*40|0)|0}while(0);if((w|0)==8){w=0;n=e+(n*40|0)|0}u=n;s[u>>2]=c;s[u+4>>2]=p;s[n+8>>2]=m;u=g;c=s[u+4>>2]|0;p=n+12|0;s[p>>2]=s[u>>2];s[p+4>>2]=c;s[n+20>>2]=v;s[n+24>>2]=b;p=n+28|0;s[p+0>>2]=s[y+0>>2];s[p+4>>2]=s[y+4>>2];s[p+8>>2]=s[y+8>>2];h=h+1|0}while((h|0)!=(t|0))}f=f>>>1}while((f|0)!=0);d=_;return}function et(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0;c=d;i=s[e+4>>2]|0;r=s[e+16>>2]|0;o=s[e+20>>2]|0;l=i<<2;u=t+256|0;a=16;e=s[e+12>>2]|0;n=t;while(1){p=s[n+4>>2]|0;s[e>>2]=s[n>>2];s[e+4>>2]=p;p=s[n+12>>2]|0;s[e+8>>2]=s[n+8>>2];s[e+12>>2]=p;a=a+-1|0;if(!a)break;else{e=e+(l<<2)|0;n=n+16|0}}l=i<<1&2147483646;a=s[t+260>>2]|0;s[r>>2]=s[u>>2];s[r+4>>2]=a;u=s[t+268>>2]|0;s[r+(l<<2)>>2]=s[t+264>>2];s[r+((l|1)<<2)>>2]=u;u=i<<2;a=s[t+276>>2]|0;s[r+(u<<2)>>2]=s[t+272>>2];s[r+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+284>>2]|0;s[r+(u<<2)>>2]=s[t+280>>2];s[r+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+292>>2]|0;s[r+(u<<2)>>2]=s[t+288>>2];s[r+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+300>>2]|0;s[r+(u<<2)>>2]=s[t+296>>2];s[r+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+308>>2]|0;s[r+(u<<2)>>2]=s[t+304>>2];s[r+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+316>>2]|0;s[r+(u<<2)>>2]=s[t+312>>2];s[r+((u|1)<<2)>>2]=a;u=s[t+324>>2]|0;s[o>>2]=s[t+320>>2];s[o+4>>2]=u;u=s[t+332>>2]|0;s[o+(l<<2)>>2]=s[t+328>>2];s[o+((l|1)<<2)>>2]=u;u=i<<2;a=s[t+340>>2]|0;s[o+(u<<2)>>2]=s[t+336>>2];s[o+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+348>>2]|0;s[o+(u<<2)>>2]=s[t+344>>2];s[o+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+356>>2]|0;s[o+(u<<2)>>2]=s[t+352>>2];s[o+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+364>>2]|0;s[o+(u<<2)>>2]=s[t+360>>2];s[o+((u|1)<<2)>>2]=a;u=u+l|0;a=s[t+372>>2]|0;s[o+(u<<2)>>2]=s[t+368>>2];s[o+((u|1)<<2)>>2]=a;u=u+l|0;l=s[t+380>>2]|0;s[o+(u<<2)>>2]=s[t+376>>2];s[o+((u|1)<<2)>>2]=l;d=c;return}function tt(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0;E=d;v=s[e+4>>2]|0;b=ee(s[e+8>>2]|0,v)|0;C=(t>>>0)%(v>>>0)|0;S=s[e>>2]|0;w=t-C|0;e=(w<<8)+(C<<4)|0;_=b<<8;C=C<<3;m=v<<4;f=v<<2&1073741820;c=f<<1;p=c+f|0;h=0;do{u=s[3344+(h<<2)>>2]|0;l=s[3408+(h<<2)>>2]|0;t=(l<<4)+u|0;a=n+t|0;l=e+u+(ee(l,m)|0)|0;u=S+l|0;g=s[r+(h<<6)>>2]|0;if((g|0)==16777215){l=s[n+(t+16)>>2]|0;s[u>>2]=s[a>>2];s[u+(f<<2)>>2]=l;l=s[n+(t+48)>>2]|0;s[u+(c<<2)>>2]=s[n+(t+32)>>2];s[u+(p<<2)>>2]=l}else{x=o[n+(t+1)>>0]|0;T=s[r+(h<<6)+4>>2]|0;i[u>>0]=i[3472+(g+512+(o[a>>0]|0))>>0]|0;g=o[n+(t+2)>>0]|0;y=s[r+(h<<6)+8>>2]|0;i[S+(l+1)>>0]=i[3472+((x|512)+T)>>0]|0;u=o[n+(t+3)>>0]|0;a=s[r+(h<<6)+12>>2]|0;i[S+(l+2)>>0]=i[3472+(y+512+g)>>0]|0;i[S+(l+3)>>0]=i[3472+(a+512+u)>>0]|0;u=l+m|0;a=o[n+(t+17)>>0]|0;l=s[r+(h<<6)+20>>2]|0;i[S+u>>0]=i[3472+((s[r+(h<<6)+16>>2]|0)+512+(o[n+(t+16)>>0]|0))>>0]|0;g=o[n+(t+18)>>0]|0;y=s[r+(h<<6)+24>>2]|0;i[S+(u+1)>>0]=i[3472+((a|512)+l)>>0]|0;l=o[n+(t+19)>>0]|0;a=s[r+(h<<6)+28>>2]|0;i[S+(u+2)>>0]=i[3472+(y+512+g)>>0]|0;i[S+(u+3)>>0]=i[3472+(a+512+l)>>0]|0;u=u+m|0;l=o[n+(t+33)>>0]|0;a=s[r+(h<<6)+36>>2]|0;i[S+u>>0]=i[3472+((s[r+(h<<6)+32>>2]|0)+512+(o[n+(t+32)>>0]|0))>>0]|0;g=o[n+(t+34)>>0]|0;y=s[r+(h<<6)+40>>2]|0;i[S+(u+1)>>0]=i[3472+((l|512)+a)>>0]|0;a=o[n+(t+35)>>0]|0;l=s[r+(h<<6)+44>>2]|0;i[S+(u+2)>>0]=i[3472+(y+512+g)>>0]|0;i[S+(u+3)>>0]=i[3472+(l+512+a)>>0]|0;u=u+m|0;a=o[n+(t+49)>>0]|0;l=s[r+(h<<6)+52>>2]|0;i[S+u>>0]=i[3472+((s[r+(h<<6)+48>>2]|0)+512+(o[n+(t+48)>>0]|0))>>0]|0;g=o[n+(t+50)>>0]|0;y=s[r+(h<<6)+56>>2]|0;i[S+(u+1)>>0]=i[3472+((a|512)+l)>>0]|0;l=o[n+(t+51)>>0]|0;a=s[r+(h<<6)+60>>2]|0;i[S+(u+2)>>0]=i[3472+(y+512+g)>>0]|0;i[S+(u+3)>>0]=i[3472+(a+512+l)>>0]|0}h=h+1|0}while((h|0)!=16);y=b<<6;b=v<<3&2147483640;v=n+256|0;n=n+320|0;c=C+_+(w<<6)|0;m=b>>>2;l=b>>>1;u=l+m|0;f=16;do{g=f&3;a=s[3344+(g<<2)>>2]|0;g=s[3408+(g<<2)>>2]|0;t=f>>>0>19;p=t?n:v;h=(g<<3)+a|0;e=p+h|0;g=c+(t?y:0)+a+(ee(g,b)|0)|0;a=S+g|0;t=s[r+(f<<6)>>2]|0;if((t|0)==16777215){T=s[p+(h+8)>>2]|0;s[a>>2]=s[e>>2];s[a+(m<<2)>>2]=T;T=s[p+(h+24)>>2]|0;s[a+(l<<2)>>2]=s[p+(h+16)>>2];s[a+(u<<2)>>2]=T}else{_=o[p+(h+1)>>0]|0;T=s[r+(f<<6)+4>>2]|0;i[a>>0]=i[3472+(t+512+(o[e>>0]|0))>>0]|0;C=o[p+(h+2)>>0]|0;w=s[r+(f<<6)+8>>2]|0;i[S+(g+1)>>0]=i[3472+((_|512)+T)>>0]|0;T=o[p+(h+3)>>0]|0;_=s[r+(f<<6)+12>>2]|0;i[S+(g+2)>>0]=i[3472+(w+512+C)>>0]|0;i[S+(g+3)>>0]=i[3472+(_+512+T)>>0]|0;T=g+b|0;_=o[p+(h+9)>>0]|0;C=s[r+(f<<6)+20>>2]|0;i[S+T>>0]=i[3472+((s[r+(f<<6)+16>>2]|0)+512+(o[p+(h+8)>>0]|0))>>0]|0;w=o[p+(h+10)>>0]|0;g=s[r+(f<<6)+24>>2]|0;i[S+(T+1)>>0]=i[3472+((_|512)+C)>>0]|0;C=o[p+(h+11)>>0]|0;_=s[r+(f<<6)+28>>2]|0;i[S+(T+2)>>0]=i[3472+(g+512+w)>>0]|0;i[S+(T+3)>>0]=i[3472+(_+512+C)>>0]|0;T=T+b|0;C=o[p+(h+17)>>0]|0;_=s[r+(f<<6)+36>>2]|0;i[S+T>>0]=i[3472+((s[r+(f<<6)+32>>2]|0)+512+(o[p+(h+16)>>0]|0))>>0]|0;w=o[p+(h+18)>>0]|0;g=s[r+(f<<6)+40>>2]|0;i[S+(T+1)>>0]=i[3472+((C|512)+_)>>0]|0;_=o[p+(h+19)>>0]|0;C=s[r+(f<<6)+44>>2]|0;i[S+(T+2)>>0]=i[3472+(g+512+w)>>0]|0;i[S+(T+3)>>0]=i[3472+(C+512+_)>>0]|0;T=T+b|0;_=o[p+(h+25)>>0]|0;C=s[r+(f<<6)+52>>2]|0;i[S+T>>0]=i[3472+((s[r+(f<<6)+48>>2]|0)+512+(o[p+(h+24)>>0]|0))>>0]|0;w=o[p+(h+26)>>0]|0;g=s[r+(f<<6)+56>>2]|0;i[S+(T+1)>>0]=i[3472+((_|512)+C)>>0]|0;C=o[p+(h+27)>>0]|0;_=s[r+(f<<6)+60>>2]|0;i[S+(T+2)>>0]=i[3472+(g+512+w)>>0]|0;i[S+(T+3)>>0]=i[3472+(_+512+C)>>0]|0}f=f+1|0}while((f|0)!=24);d=E;return}function nt(e,t){e=e|0;t=t|0;var n=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0,V=0,B=0,U=0,j=0,H=0,G=0,q=0,W=0,z=0,K=0,Y=0,X=0,Q=0,$=0,J=0,Z=0,te=0,ne=0,ie=0,re=0,se=0,oe=0,ae=0,le=0,ue=0,ce=0,de=0,pe=0,he=0,fe=0,me=0,ge=0,ve=0,be=0,ye=0,we=0,_e=0,Ce=0,Se=0,Ee=0,Te=0,xe=0,ke=0,Re=0,De=0,Ae=0,Pe=0,Ie=0,Me=0,Oe=0,Ne=0,Le=0,Fe=0,Ve=0,Be=0,Ue=0,je=0,He=0,Ge=0,qe=0,We=0,ze=0,Ke=0,Ye=0,Xe=0,Qe=0,$e=0,Je=0,Ze=0,et=0;et=d;d=d+176|0;le=et+40|0;Fe=et;re=s[e+4>>2]|0;ce=e+8|0;Ke=s[ce>>2]|0;n=ee(Ke,re)|0;if(!Ke){d=et;return}Qe=le+24|0;$e=le+16|0;Je=le+8|0;de=le+100|0;pe=le+68|0;he=le+36|0;fe=le+4|0;Ve=le+120|0;Be=le+112|0;Ue=le+104|0;je=le+96|0;He=le+88|0;Ge=le+80|0;qe=le+72|0;We=le+64|0;ze=le+56|0;Ke=le+48|0;Ye=le+40|0;Xe=le+32|0;me=le+124|0;ge=le+116|0;ve=le+108|0;be=le+92|0;ye=le+84|0;we=le+76|0;_e=le+60|0;Ce=le+52|0;Se=le+44|0;Ee=le+28|0;Te=le+20|0;xe=le+12|0;ae=Fe+28|0;ue=Fe+32|0;Le=Fe+24|0;De=re<<4;Ne=0-De|0;Re=Ne<<1;Me=ee(re,-48)|0;Oe=re<<5;Ae=Ne<<2;Ie=re*48|0;ke=re<<6;oe=Fe+24|0;se=Fe+12|0;Pe=n<<8;te=n<<6;ne=re<<3;Y=De|4;Q=Fe+16|0;J=Fe+20|0;ie=Fe+12|0;X=Fe+4|0;$=Fe+8|0;z=0;Z=0;K=t;while(1){t=s[K+8>>2]|0;do if((t|0)!=1){W=K+200|0;h=s[W>>2]|0;do if(!h)n=1;else{if((t|0)==2?(s[K+4>>2]|0)!=(s[h+4>>2]|0):0){n=1;break}n=5}while(0);q=K+204|0;c=s[q>>2]|0;do if(c){if((t|0)==2?(s[K+4>>2]|0)!=(s[c+4>>2]|0):0)break;n=n|2}while(0);G=(n&2|0)==0;do if(G){s[Qe>>2]=0;s[$e>>2]=0;s[Je>>2]=0;s[le>>2]=0;p=0}else{if((s[K>>2]|0)>>>0<=5?(s[c>>2]|0)>>>0<=5:0){if((r[K+28>>1]|0)==0?(r[c+48>>1]|0)==0:0)if((s[K+116>>2]|0)==(s[c+124>>2]|0)?(k=(r[K+132>>1]|0)-(r[c+172>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){a=(r[K+134>>1]|0)-(r[c+174>>1]|0)|0;a=(((a|0)>-1?a:0-a|0)|0)>3&1}else a=1;else a=2;s[le>>2]=a;if((r[K+30>>1]|0)==0?(r[c+50>>1]|0)==0:0)if((s[K+116>>2]|0)==(s[c+124>>2]|0)?(k=(r[K+136>>1]|0)-(r[c+176>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){l=(r[K+138>>1]|0)-(r[c+178>>1]|0)|0;l=(((l|0)>-1?l:0-l|0)|0)>3&1}else l=1;else l=2;s[Je>>2]=l;if((r[K+36>>1]|0)==0?(r[c+56>>1]|0)==0:0)if((s[K+120>>2]|0)==(s[c+128>>2]|0)?(k=(r[K+148>>1]|0)-(r[c+188>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){u=(r[K+150>>1]|0)-(r[c+190>>1]|0)|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}else u=1;else u=2;s[$e>>2]=u;if((r[K+38>>1]|0)==0?(r[c+58>>1]|0)==0:0)if((s[K+120>>2]|0)==(s[c+128>>2]|0)?(k=(r[K+152>>1]|0)-(r[c+192>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){t=(r[K+154>>1]|0)-(r[c+194>>1]|0)|0;t=(((t|0)>-1?t:0-t|0)|0)>3&1}else t=1;else t=2;s[Qe>>2]=t;p=(l|a|u|t|0)!=0&1;break}s[Qe>>2]=4;s[$e>>2]=4;s[Je>>2]=4;s[le>>2]=4;p=1}while(0);H=(n&4|0)==0;do if(H){s[de>>2]=0;s[pe>>2]=0;s[he>>2]=0;s[fe>>2]=0;u=s[K>>2]|0}else{u=s[K>>2]|0;if(u>>>0<=5?(s[h>>2]|0)>>>0<=5:0){if((r[K+28>>1]|0)==0?(r[h+38>>1]|0)==0:0)if((s[K+116>>2]|0)==(s[h+120>>2]|0)?(k=(r[K+132>>1]|0)-(r[h+152>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){l=(r[K+134>>1]|0)-(r[h+154>>1]|0)|0;l=(((l|0)>-1?l:0-l|0)|0)>3&1}else l=1;else l=2;s[fe>>2]=l;if((r[K+32>>1]|0)==0?(r[h+42>>1]|0)==0:0)if((s[K+116>>2]|0)==(s[h+120>>2]|0)?(k=(r[K+140>>1]|0)-(r[h+160>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){a=(r[K+142>>1]|0)-(r[h+162>>1]|0)|0;a=(((a|0)>-1?a:0-a|0)|0)>3&1}else a=1;else a=2;s[he>>2]=a;if((r[K+44>>1]|0)==0?(r[h+54>>1]|0)==0:0)if((s[K+124>>2]|0)==(s[h+128>>2]|0)?(k=(r[K+164>>1]|0)-(r[h+184>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){t=(r[K+166>>1]|0)-(r[h+186>>1]|0)|0;t=(((t|0)>-1?t:0-t|0)|0)>3&1}else t=1;else t=2;s[pe>>2]=t;if((r[K+48>>1]|0)==0?(r[h+58>>1]|0)==0:0)if((s[K+124>>2]|0)==(s[h+128>>2]|0)?(k=(r[K+172>>1]|0)-(r[h+192>>1]|0)|0,(((k|0)>-1?k:0-k|0)|0)<=3):0){c=(r[K+174>>1]|0)-(r[h+194>>1]|0)|0;c=(((c|0)>-1?c:0-c|0)|0)>3&1}else c=1;else c=2;s[de>>2]=c;if(p)break;p=(a|l|t|c|0)!=0&1;break}s[de>>2]=4;s[pe>>2]=4;s[he>>2]=4;s[fe>>2]=4;p=1}while(0);if(u>>>0<=5){do if((Bt(u)|0)!=1){t=s[K>>2]|0;if((t|0)==2){C=K+28|0;S=r[K+32>>1]|0;if(!(S<<16>>16))t=(r[C>>1]|0)!=0?2:0;else t=2;s[Xe>>2]=t;g=r[K+34>>1]|0;x=g<<16>>16==0;if(x)t=(r[K+30>>1]|0)!=0?2:0;else t=2;s[Ye>>2]=t;n=r[K+40>>1]|0;T=n<<16>>16==0;if(T)c=(r[K+36>>1]|0)!=0?2:0;else c=2;s[Ke>>2]=c;_=r[K+42>>1]|0;E=_<<16>>16==0;if(E)c=(r[K+38>>1]|0)!=0?2:0;else c=2;s[ze>>2]=c;a=r[K+48>>1]|0;if(!(a<<16>>16))c=(r[K+44>>1]|0)!=0?2:0;else c=2;s[je>>2]=c;u=r[K+50>>1]|0;k=u<<16>>16==0;if(k)c=(r[K+46>>1]|0)!=0?2:0;else c=2;s[Ue>>2]=c;m=r[K+56>>1]|0;t=m<<16>>16==0;if(t)h=(r[K+52>>1]|0)!=0?2:0;else h=2;s[Be>>2]=h;l=(r[K+58>>1]|0)==0;if(l)h=(r[K+54>>1]|0)!=0?2:0;else h=2;s[Ve>>2]=h;v=r[K+44>>1]|0;f=r[K+166>>1]|0;h=r[K+142>>1]|0;do if(!((v|S)<<16>>16)){w=(r[K+164>>1]|0)-(r[K+140>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){h=1;break}w=f-h|0;if((((w|0)>-1?w:0-w|0)|0)>3){h=1;break}h=(s[K+124>>2]|0)!=(s[K+116>>2]|0)&1}else h=2;while(0);s[We>>2]=h;b=r[K+46>>1]|0;f=r[K+170>>1]|0;h=r[K+146>>1]|0;do if(!((b|g)<<16>>16)){w=(r[K+168>>1]|0)-(r[K+144>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){f=1;break}w=f-h|0;if((((w|0)>-1?w:0-w|0)|0)>3){f=1;break}f=(s[K+124>>2]|0)!=(s[K+116>>2]|0)&1}else f=2;while(0);s[qe>>2]=f;y=r[K+52>>1]|0;f=r[K+182>>1]|0;h=r[K+158>>1]|0;do if(!((y|n)<<16>>16)){w=(r[K+180>>1]|0)-(r[K+156>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){f=1;break}w=f-h|0;if((((w|0)>-1?w:0-w|0)|0)>3){f=1;break}f=(s[K+128>>2]|0)!=(s[K+120>>2]|0)&1}else f=2;while(0);s[Ge>>2]=f;w=r[K+54>>1]|0;f=r[K+186>>1]|0;h=r[K+162>>1]|0;do if(!((w|_)<<16>>16)){_=(r[K+184>>1]|0)-(r[K+160>>1]|0)|0;if((((_|0)>-1?_:0-_|0)|0)>3){f=1;break}_=f-h|0;if((((_|0)>-1?_:0-_|0)|0)>3){f=1;break}f=(s[K+128>>2]|0)!=(s[K+120>>2]|0)&1}else f=2;while(0);s[He>>2]=f;c=r[K+30>>1]|0;if(!(c<<16>>16))f=(r[C>>1]|0)!=0?2:0;else f=2;s[xe>>2]=f;h=r[K+36>>1]|0;if(!(h<<16>>16))f=c<<16>>16!=0?2:0;else f=2;s[Te>>2]=f;if(!(r[K+38>>1]|0))f=h<<16>>16!=0?2:0;else f=2;s[Ee>>2]=f;if(x)h=S<<16>>16!=0?2:0;else h=2;s[Se>>2]=h;if(T)c=g<<16>>16!=0?2:0;else c=2;s[Ce>>2]=c;if(E)c=n<<16>>16!=0?2:0;else c=2;s[_e>>2]=c;if(!(b<<16>>16))c=v<<16>>16!=0?2:0;else c=2;s[we>>2]=c;if(!(y<<16>>16))c=b<<16>>16!=0?2:0;else c=2;s[ye>>2]=c;if(!(w<<16>>16))c=y<<16>>16!=0?2:0;else c=2;s[be>>2]=c;if(k)a=a<<16>>16!=0?2:0;else a=2;s[ve>>2]=a;if(t)t=u<<16>>16!=0?2:0;else t=2;s[ge>>2]=t;if(l)t=m<<16>>16!=0?2:0;else t=2;s[me>>2]=t;break}else if((t|0)==3){l=K+28|0;_=r[K+32>>1]|0;if(!(_<<16>>16))t=(r[l>>1]|0)!=0?2:0;else t=2;s[Xe>>2]=t;k=r[K+34>>1]|0;m=k<<16>>16==0;if(m)a=(r[K+30>>1]|0)!=0?2:0;else a=2;s[Ye>>2]=a;T=r[K+40>>1]|0;if(!(T<<16>>16))u=(r[K+36>>1]|0)!=0?2:0;else u=2;s[Ke>>2]=u;f=r[K+42>>1]|0;a=f<<16>>16==0;if(a)c=(r[K+38>>1]|0)!=0?2:0;else c=2;s[ze>>2]=c;t=r[K+44>>1]|0;if(!(t<<16>>16))c=_<<16>>16!=0?2:0;else c=2;s[We>>2]=c;x=r[K+46>>1]|0;n=x<<16>>16==0;if(n)c=k<<16>>16!=0?2:0;else c=2;s[qe>>2]=c;E=r[K+52>>1]|0;if(!(E<<16>>16))c=T<<16>>16!=0?2:0;else c=2;s[Ge>>2]=c;u=r[K+54>>1]|0;g=u<<16>>16==0;if(g)c=f<<16>>16!=0?2:0;else c=2;s[He>>2]=c;v=r[K+48>>1]|0;if(!(v<<16>>16))h=t<<16>>16!=0?2:0;else h=2;s[je>>2]=h;S=r[K+50>>1]|0;b=S<<16>>16==0;if(b)h=x<<16>>16!=0?2:0;else h=2;s[Ue>>2]=h;C=r[K+56>>1]|0;if(!(C<<16>>16))f=E<<16>>16!=0?2:0;else f=2;s[Be>>2]=f;w=(r[K+58>>1]|0)==0;if(w)f=u<<16>>16!=0?2:0;else f=2;s[Ve>>2]=f;y=r[K+30>>1]|0;if(!(y<<16>>16))f=(r[l>>1]|0)!=0?2:0;else f=2;s[xe>>2]=f;if(!(r[K+38>>1]|0))f=(r[K+36>>1]|0)!=0?2:0;else f=2;s[Ee>>2]=f;if(m)h=_<<16>>16!=0?2:0;else h=2;s[Se>>2]=h;if(a)h=T<<16>>16!=0?2:0;else h=2;s[_e>>2]=h;if(n)c=t<<16>>16!=0?2:0;else c=2;s[we>>2]=c;if(g)c=E<<16>>16!=0?2:0;else c=2;s[be>>2]=c;if(b)c=v<<16>>16!=0?2:0;else c=2;s[ve>>2]=c;if(w)c=C<<16>>16!=0?2:0;else c=2;s[me>>2]=c;c=r[K+150>>1]|0;u=r[K+138>>1]|0;do if(!((r[K+36>>1]|y)<<16>>16)){_=(r[K+148>>1]|0)-(r[K+136>>1]|0)|0;if((((_|0)>-1?_:0-_|0)|0)>3){c=1;break}_=c-u|0;if((((_|0)>-1?_:0-_|0)|0)>3){c=1;break}c=(s[K+120>>2]|0)!=(s[K+116>>2]|0)&1}else c=2;while(0);s[Te>>2]=c;c=r[K+158>>1]|0;u=r[K+146>>1]|0;do if(!((T|k)<<16>>16)){k=(r[K+156>>1]|0)-(r[K+144>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){u=1;break}k=c-u|0;if((((k|0)>-1?k:0-k|0)|0)>3){u=1;break}u=(s[K+120>>2]|0)!=(s[K+116>>2]|0)&1}else u=2;while(0);s[Ce>>2]=u;c=r[K+182>>1]|0;u=r[K+170>>1]|0;do if(!((E|x)<<16>>16)){k=(r[K+180>>1]|0)-(r[K+168>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){t=1;break}k=c-u|0;if((((k|0)>-1?k:0-k|0)|0)>3){t=1;break}t=(s[K+128>>2]|0)!=(s[K+124>>2]|0)&1}else t=2;while(0);s[ye>>2]=t;t=r[K+190>>1]|0;n=r[K+178>>1]|0;do if(!((C|S)<<16>>16)){k=(r[K+188>>1]|0)-(r[K+176>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){t=1;break}k=t-n|0;if((((k|0)>-1?k:0-k|0)|0)>3){t=1;break}t=(s[K+128>>2]|0)!=(s[K+124>>2]|0)&1}else t=2;while(0);s[ge>>2]=t;break}else{L=r[K+32>>1]|0;T=r[K+28>>1]|0;j=r[K+142>>1]|0;g=r[K+134>>1]|0;if(!((T|L)<<16>>16)){k=(r[K+140>>1]|0)-(r[K+132>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3)u=1;else{u=j-g|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}}else u=2;s[Xe>>2]=u;F=r[K+34>>1]|0;E=r[K+30>>1]|0;U=r[K+146>>1]|0;v=r[K+138>>1]|0;if(!((E|F)<<16>>16)){k=(r[K+144>>1]|0)-(r[K+136>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3)c=1;else{c=U-v|0;c=(((c|0)>-1?c:0-c|0)|0)>3&1}}else c=2;s[Ye>>2]=c;V=r[K+40>>1]|0;S=r[K+36>>1]|0;B=r[K+158>>1]|0;b=r[K+150>>1]|0;if(!((S|V)<<16>>16)){k=(r[K+156>>1]|0)-(r[K+148>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3)h=1;else{h=B-b|0;h=(((h|0)>-1?h:0-h|0)|0)>3&1}}else h=2;s[Ke>>2]=h;h=r[K+42>>1]|0;k=r[K+38>>1]|0;N=r[K+162>>1]|0;x=r[K+154>>1]|0;if(!((k|h)<<16>>16)){C=(r[K+160>>1]|0)-(r[K+152>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3)f=1;else{f=N-x|0;f=(((f|0)>-1?f:0-f|0)|0)>3&1}}else f=2;s[ze>>2]=f;D=r[K+44>>1]|0;O=r[K+166>>1]|0;do if(!((D|L)<<16>>16)){C=(r[K+164>>1]|0)-(r[K+140>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3)f=1;else{C=O-j|0;if((((C|0)>-1?C:0-C|0)|0)>3){f=1;break}f=(s[K+124>>2]|0)!=(s[K+116>>2]|0)&1}}else f=2;while(0);s[We>>2]=f;A=r[K+46>>1]|0;M=r[K+170>>1]|0;do if(!((A|F)<<16>>16)){C=(r[K+168>>1]|0)-(r[K+144>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3){f=1;break}C=M-U|0;if((((C|0)>-1?C:0-C|0)|0)>3){f=1;break}f=(s[K+124>>2]|0)!=(s[K+116>>2]|0)&1}else f=2;while(0);s[qe>>2]=f;P=r[K+52>>1]|0;I=r[K+182>>1]|0;do if(!((P|V)<<16>>16)){C=(r[K+180>>1]|0)-(r[K+156>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3){f=1;break}C=I-B|0;if((((C|0)>-1?C:0-C|0)|0)>3){f=1;break}f=(s[K+128>>2]|0)!=(s[K+120>>2]|0)&1}else f=2;while(0);s[Ge>>2]=f;n=r[K+54>>1]|0;c=r[K+186>>1]|0;do if(!((n|h)<<16>>16)){C=(r[K+184>>1]|0)-(r[K+160>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3){w=1;break}C=c-N|0;if((((C|0)>-1?C:0-C|0)|0)>3){w=1;break}w=(s[K+128>>2]|0)!=(s[K+120>>2]|0)&1}else w=2;while(0);s[He>>2]=w;t=r[K+48>>1]|0;R=r[K+174>>1]|0;do if(!((t|D)<<16>>16)){C=(r[K+172>>1]|0)-(r[K+164>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3){w=1;break}w=R-O|0;w=(((w|0)>-1?w:0-w|0)|0)>3&1}else w=2;while(0);s[je>>2]=w;a=r[K+50>>1]|0;u=r[K+178>>1]|0;do if(!((a|A)<<16>>16)){C=(r[K+176>>1]|0)-(r[K+168>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3){w=1;break}w=u-M|0;w=(((w|0)>-1?w:0-w|0)|0)>3&1}else w=2;while(0);s[Ue>>2]=w;l=r[K+56>>1]|0;m=r[K+190>>1]|0;do if(!((l|P)<<16>>16)){C=(r[K+188>>1]|0)-(r[K+180>>1]|0)|0;if((((C|0)>-1?C:0-C|0)|0)>3){w=1;break}w=m-I|0;w=(((w|0)>-1?w:0-w|0)|0)>3&1}else w=2;while(0);s[Be>>2]=w;C=r[K+58>>1]|0;y=r[K+194>>1]|0;do if(!((C|n)<<16>>16)){_=(r[K+192>>1]|0)-(r[K+184>>1]|0)|0;if((((_|0)>-1?_:0-_|0)|0)>3){_=1;break}_=y-c|0;_=(((_|0)>-1?_:0-_|0)|0)>3&1}else _=2;while(0);s[Ve>>2]=_;do if(!((E|T)<<16>>16)){T=(r[K+136>>1]|0)-(r[K+132>>1]|0)|0;if((((T|0)>-1?T:0-T|0)|0)>3){w=1;break}w=v-g|0;w=(((w|0)>-1?w:0-w|0)|0)>3&1}else w=2;while(0);s[xe>>2]=w;do if(!((S|E)<<16>>16)){T=(r[K+148>>1]|0)-(r[K+136>>1]|0)|0;if((((T|0)>-1?T:0-T|0)|0)>3){w=1;break}T=b-v|0;if((((T|0)>-1?T:0-T|0)|0)>3){w=1;break}w=(s[K+120>>2]|0)!=(s[K+116>>2]|0)&1}else w=2;while(0);s[Te>>2]=w;do if(!((k|S)<<16>>16)){k=(r[K+152>>1]|0)-(r[K+148>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){w=1;break}w=x-b|0;w=(((w|0)>-1?w:0-w|0)|0)>3&1}else w=2;while(0);s[Ee>>2]=w;do if(!((F|L)<<16>>16)){k=(r[K+144>>1]|0)-(r[K+140>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){f=1;break}f=U-j|0;f=(((f|0)>-1?f:0-f|0)|0)>3&1}else f=2;while(0);s[Se>>2]=f;do if(!((V|F)<<16>>16)){k=(r[K+156>>1]|0)-(r[K+144>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){f=1;break}k=B-U|0;if((((k|0)>-1?k:0-k|0)|0)>3){f=1;break}f=(s[K+120>>2]|0)!=(s[K+116>>2]|0)&1}else f=2;while(0);s[Ce>>2]=f;do if(!((h|V)<<16>>16)){k=(r[K+160>>1]|0)-(r[K+156>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){f=1;break}f=N-B|0;f=(((f|0)>-1?f:0-f|0)|0)>3&1}else f=2;while(0);s[_e>>2]=f;do if(!((A|D)<<16>>16)){k=(r[K+168>>1]|0)-(r[K+164>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){h=1;break}h=M-O|0;h=(((h|0)>-1?h:0-h|0)|0)>3&1}else h=2;while(0);s[we>>2]=h;do if(!((P|A)<<16>>16)){k=(r[K+180>>1]|0)-(r[K+168>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){h=1;break}k=I-M|0;if((((k|0)>-1?k:0-k|0)|0)>3){h=1;break}h=(s[K+128>>2]|0)!=(s[K+124>>2]|0)&1}else h=2;while(0);s[ye>>2]=h;do if(!((n|P)<<16>>16)){k=(r[K+184>>1]|0)-(r[K+180>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){c=1;break}c=c-I|0;c=(((c|0)>-1?c:0-c|0)|0)>3&1}else c=2;while(0);s[be>>2]=c;do if(!((a|t)<<16>>16)){k=(r[K+176>>1]|0)-(r[K+172>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){c=1;break}c=u-R|0;c=(((c|0)>-1?c:0-c|0)|0)>3&1}else c=2;while(0);s[ve>>2]=c;do if(!((l|a)<<16>>16)){k=(r[K+188>>1]|0)-(r[K+176>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){u=1;break}k=m-u|0;if((((k|0)>-1?k:0-k|0)|0)>3){u=1;break}u=(s[K+128>>2]|0)!=(s[K+124>>2]|0)&1}else u=2;while(0);s[ge>>2]=u;do if(!((C|l)<<16>>16)){k=(r[K+192>>1]|0)-(r[K+188>>1]|0)|0;if((((k|0)>-1?k:0-k|0)|0)>3){t=1;break}t=y-m|0;t=(((t|0)>-1?t:0-t|0)|0)>3&1}else t=2;while(0);s[me>>2]=t;break}}else it(K,le);while(0);if(!(p|s[Xe>>2]|s[Ye>>2]|s[Ke>>2]|s[ze>>2]|s[We>>2]|s[qe>>2]|s[Ge>>2]|s[He>>2]|s[je>>2]|s[Ue>>2]|s[Be>>2]|s[Ve>>2]|s[xe>>2]|s[Te>>2]|s[Ee>>2]|s[Se>>2]|s[Ce>>2]|s[_e>>2]|s[we>>2]|s[ye>>2]|s[be>>2]|s[ve>>2]|s[ge>>2]|s[me>>2]))break}else{s[Ve>>2]=3;s[Be>>2]=3;s[Ue>>2]=3;s[je>>2]=3;s[He>>2]=3;s[Ge>>2]=3;s[qe>>2]=3;s[We>>2]=3;s[ze>>2]=3;s[Ke>>2]=3;s[Ye>>2]=3;s[Xe>>2]=3;s[me>>2]=3;s[ge>>2]=3;s[ve>>2]=3;s[be>>2]=3;s[ye>>2]=3;s[we>>2]=3;s[_e>>2]=3;s[Ce>>2]=3;s[Se>>2]=3;s[Ee>>2]=3;s[Te>>2]=3;s[xe>>2]=3}N=K+20|0;n=s[N>>2]|0;F=K+12|0;u=Ct(0,51,(s[F>>2]|0)+n|0)|0;L=K+16|0;a=Ct(0,51,(s[L>>2]|0)+n|0)|0;l=o[6864+u>>0]|0;s[ae>>2]=l;a=o[6920+a>>0]|0;s[ue>>2]=a;u=6976+(u*3|0)|0;s[Le>>2]=u;do if(!G){c=s[(s[q>>2]|0)+20>>2]|0;if((c|0)==(n|0)){s[X>>2]=l;s[$>>2]=a;s[Fe>>2]=u;break}else{x=(n+1+c|0)>>>1;k=Ct(0,51,(s[F>>2]|0)+x|0)|0;x=Ct(0,51,(s[L>>2]|0)+x|0)|0;s[X>>2]=o[6864+k>>0];s[$>>2]=o[6920+x>>0];s[Fe>>2]=6976+(k*3|0);break}}while(0);do if(!H){t=s[(s[W>>2]|0)+20>>2]|0;if((t|0)==(n|0)){s[Q>>2]=s[ae>>2];s[J>>2]=s[ue>>2];s[ie>>2]=s[Le>>2];break}else{x=(n+1+t|0)>>>1;k=Ct(0,51,(s[F>>2]|0)+x|0)|0;x=Ct(0,51,(s[L>>2]|0)+x|0)|0;s[Q>>2]=o[6864+k>>0];s[J>>2]=o[6920+x>>0];s[ie>>2]=6976+(k*3|0);break}}while(0);V=ee(Z,re)|0;j=3;f=0;U=(s[e>>2]|0)+((V<<8)+(z<<4))|0;B=le;while(1){c=s[B+4>>2]|0;if(c)rt(U,c,se,De);c=s[B+12>>2]|0;if(c)rt(U+4|0,c,oe,De);u=B+16|0;p=s[B+20>>2]|0;if(p)rt(U+8|0,p,oe,De);l=B+24|0;p=s[B+28>>2]|0;if(p)rt(U+12|0,p,oe,De);h=s[B>>2]|0;c=B+8|0;p=s[c>>2]|0;e:do if(((h|0)==(p|0)?(h|0)==(s[u>>2]|0):0)?(h|0)==(s[l>>2]|0):0){if(!h)break;E=s[Fe+(f*12|0)+4>>2]|0;S=s[Fe+(f*12|0)+8>>2]|0;if(h>>>0<4){y=o[(s[Fe+(f*12|0)>>2]|0)+(h+-1)>>0]|0;u=0-y|0;l=y+1|0;t=U;a=16;while(1){f=t+Re|0;b=o[f>>0]|0;w=t+Ne|0;v=o[w>>0]|0;g=o[t>>0]|0;p=t+De|0;n=o[p>>0]|0;k=v-g|0;do if(((k|0)>-1?k:0-k|0)>>>0<E>>>0){k=b-v|0;if(((k|0)>-1?k:0-k|0)>>>0>=S>>>0)break;k=n-g|0;if(((k|0)>-1?k:0-k|0)>>>0>=S>>>0)break;h=o[t+Me>>0]|0;k=h-v|0;if(((k|0)>-1?k:0-k|0)>>>0<S>>>0){i[f>>0]=(Ct(u,y,((v+1+g|0)>>>1)-(b<<1)+h>>1)|0)+b;f=l}else f=y;h=o[t+Oe>>0]|0;k=h-g|0;if(((k|0)>-1?k:0-k|0)>>>0<S>>>0){i[p>>0]=(Ct(u,y,((v+1+g|0)>>>1)-(n<<1)+h>>1)|0)+n;f=f+1|0}x=Ct(0-f|0,f,b+4-n+(g-v<<2)>>3)|0;k=i[3472+((g|512)-x)>>0]|0;i[w>>0]=i[3472+(x+(v|512))>>0]|0;i[t>>0]=k}while(0);a=a+-1|0;if(!a)break e;else t=t+1|0}}h=(E>>>2)+2|0;
y=U;w=16;while(1){p=y+Re|0;t=o[p>>0]|0;c=y+Ne|0;n=o[c>>0]|0;m=o[y>>0]|0;u=y+De|0;g=o[u>>0]|0;f=n-m|0;f=(f|0)>-1?f:0-f|0;t:do if(f>>>0<E>>>0){k=t-n|0;if(((k|0)>-1?k:0-k|0)>>>0>=S>>>0)break;k=g-m|0;if(((k|0)>-1?k:0-k|0)>>>0>=S>>>0)break;l=y+Me|0;v=o[l>>0]|0;a=y+Oe|0;b=o[a>>0]|0;do if(f>>>0<h>>>0){k=v-n|0;if(((k|0)>-1?k:0-k|0)>>>0<S>>>0){k=n+t+m|0;i[c>>0]=(g+4+(k<<1)+v|0)>>>3;i[p>>0]=(k+2+v|0)>>>2;i[l>>0]=(k+4+(v*3|0)+(o[y+Ae>>0]<<1)|0)>>>3}else i[c>>0]=(n+2+(t<<1)+g|0)>>>2;k=b-m|0;if(((k|0)>-1?k:0-k|0)>>>0>=S>>>0)break;k=m+n+g|0;i[y>>0]=(t+4+(k<<1)+b|0)>>>3;i[u>>0]=(k+2+b|0)>>>2;i[a>>0]=(k+4+(b*3|0)+(o[y+Ie>>0]<<1)|0)>>>3;break t}else i[c>>0]=(n+2+(t<<1)+g|0)>>>2;while(0);i[y>>0]=(t+2+m+(g<<1)|0)>>>2}while(0);w=w+-1|0;if(!w)break;else y=y+1|0}}else Ze=311;while(0);do if((Ze|0)==311){Ze=0;if(h){st(U,h,Fe+(f*12|0)|0,De);p=s[c>>2]|0}if(p)st(U+4|0,p,Fe+(f*12|0)|0,De);p=s[u>>2]|0;if(p)st(U+8|0,p,Fe+(f*12|0)|0,De);c=s[l>>2]|0;if(!c)break;st(U+12|0,c,Fe+(f*12|0)|0,De)}while(0);if(!j)break;else{j=j+-1|0;f=2;U=U+ke|0;B=B+32|0}}a=s[K+24>>2]|0;n=s[192+((Ct(0,51,(s[N>>2]|0)+a|0)|0)<<2)>>2]|0;p=Ct(0,51,(s[F>>2]|0)+n|0)|0;l=Ct(0,51,(s[L>>2]|0)+n|0)|0;u=o[6864+p>>0]|0;s[ae>>2]=u;l=o[6920+l>>0]|0;s[ue>>2]=l;p=6976+(p*3|0)|0;s[Le>>2]=p;do if(!G){c=s[(s[q>>2]|0)+20>>2]|0;if((c|0)==(s[N>>2]|0)){s[X>>2]=u;s[$>>2]=l;s[Fe>>2]=p;break}else{x=(n+1+(s[192+((Ct(0,51,c+a|0)|0)<<2)>>2]|0)|0)>>>1;k=Ct(0,51,x+(s[F>>2]|0)|0)|0;x=Ct(0,51,(s[L>>2]|0)+x|0)|0;s[X>>2]=o[6864+k>>0];s[$>>2]=o[6920+x>>0];s[Fe>>2]=6976+(k*3|0);break}}while(0);do if(!H){t=s[(s[W>>2]|0)+20>>2]|0;if((t|0)==(s[N>>2]|0)){s[Q>>2]=s[ae>>2];s[J>>2]=s[ue>>2];s[ie>>2]=s[Le>>2];break}else{x=(n+1+(s[192+((Ct(0,51,t+a|0)|0)<<2)>>2]|0)|0)>>>1;k=Ct(0,51,x+(s[F>>2]|0)|0)|0;x=Ct(0,51,(s[L>>2]|0)+x|0)|0;s[Q>>2]=o[6864+k>>0];s[J>>2]=o[6920+x>>0];s[ie>>2]=6976+(k*3|0);break}}while(0);l=s[e>>2]|0;c=(z<<3)+Pe+(V<<6)|0;h=l+c|0;c=l+(c+te)|0;l=0;a=le;f=0;while(1){n=a+4|0;t=s[n>>2]|0;if(t){kn(h,t,se,ne);kn(c,s[n>>2]|0,se,ne)}n=a+36|0;t=s[n>>2]|0;if(t){kn(h+De|0,t,se,ne);kn(c+De|0,s[n>>2]|0,se,ne)}p=a+16|0;n=a+20|0;t=s[n>>2]|0;if(t){kn(h+4|0,t,oe,ne);kn(c+4|0,s[n>>2]|0,oe,ne)}n=a+52|0;t=s[n>>2]|0;if(t){kn(h+Y|0,t,oe,ne);kn(c+Y|0,s[n>>2]|0,oe,ne)}n=s[a>>2]|0;u=a+8|0;t=s[u>>2]|0;do if((n|0)==(t|0)){if((n|0)!=(s[p>>2]|0)){Ze=342;break}if((n|0)!=(s[a+24>>2]|0)){Ze=342;break}if(!n)break;k=Fe+(l*12|0)|0;Rn(h,n,k,ne);Rn(c,s[a>>2]|0,k,ne)}else Ze=342;while(0);do if((Ze|0)==342){Ze=0;if(n){t=Fe+(l*12|0)|0;Dn(h,n,t,ne);Dn(c,s[a>>2]|0,t,ne);t=s[u>>2]|0}if(t){k=Fe+(l*12|0)|0;Dn(h+2|0,t,k,ne);Dn(c+2|0,s[u>>2]|0,k,ne)}t=s[p>>2]|0;if(t){k=Fe+(l*12|0)|0;Dn(h+4|0,t,k,ne);Dn(c+4|0,s[p>>2]|0,k,ne)}n=a+24|0;t=s[n>>2]|0;if(!t)break;k=Fe+(l*12|0)|0;Dn(h+6|0,t,k,ne);Dn(c+6|0,s[n>>2]|0,k,ne)}while(0);f=f+1|0;if((f|0)==2)break;else{h=h+Oe|0;c=c+Oe|0;l=2;a=a+64|0}}}while(0);t=z+1|0;n=(t|0)==(re|0);Z=(n&1)+Z|0;if(Z>>>0>=(s[ce>>2]|0)>>>0)break;else{z=n?0:t;K=K+216|0}}d=et;return}function it(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0;k=d;c=e+28|0;E=r[e+32>>1]|0;if(!(E<<16>>16))n=(r[c>>1]|0)!=0?2:0;else n=2;s[t+32>>2]=n;T=r[e+34>>1]|0;S=T<<16>>16==0;if(S)n=(r[e+30>>1]|0)!=0?2:0;else n=2;s[t+40>>2]=n;x=r[e+40>>1]|0;_=x<<16>>16==0;if(_)n=(r[e+36>>1]|0)!=0?2:0;else n=2;s[t+48>>2]=n;i=r[e+42>>1]|0;C=i<<16>>16==0;if(C)n=(r[e+38>>1]|0)!=0?2:0;else n=2;s[t+56>>2]=n;b=r[e+44>>1]|0;if(!(b<<16>>16))n=E<<16>>16!=0?2:0;else n=2;s[t+64>>2]=n;y=r[e+46>>1]|0;m=y<<16>>16==0;if(m)n=T<<16>>16!=0?2:0;else n=2;s[t+72>>2]=n;w=r[e+52>>1]|0;g=w<<16>>16==0;if(g)n=x<<16>>16!=0?2:0;else n=2;s[t+80>>2]=n;o=r[e+54>>1]|0;v=o<<16>>16==0;if(v)n=i<<16>>16!=0?2:0;else n=2;s[t+88>>2]=n;p=r[e+48>>1]|0;if(!(p<<16>>16))n=b<<16>>16!=0?2:0;else n=2;s[t+96>>2]=n;h=r[e+50>>1]|0;a=h<<16>>16==0;if(a)n=y<<16>>16!=0?2:0;else n=2;s[t+104>>2]=n;f=r[e+56>>1]|0;l=f<<16>>16==0;if(l)i=w<<16>>16!=0?2:0;else i=2;s[t+112>>2]=i;u=(r[e+58>>1]|0)==0;if(u)i=o<<16>>16!=0?2:0;else i=2;s[t+120>>2]=i;o=r[e+30>>1]|0;if(!(o<<16>>16))i=(r[c>>1]|0)!=0?2:0;else i=2;s[t+12>>2]=i;n=r[e+36>>1]|0;if(!(n<<16>>16))i=o<<16>>16!=0?2:0;else i=2;s[t+20>>2]=i;if(!(r[e+38>>1]|0))n=n<<16>>16!=0?2:0;else n=2;s[t+28>>2]=n;if(S)n=E<<16>>16!=0?2:0;else n=2;s[t+44>>2]=n;if(_)n=T<<16>>16!=0?2:0;else n=2;s[t+52>>2]=n;if(C)n=x<<16>>16!=0?2:0;else n=2;s[t+60>>2]=n;if(m)n=b<<16>>16!=0?2:0;else n=2;s[t+76>>2]=n;if(g)n=y<<16>>16!=0?2:0;else n=2;s[t+84>>2]=n;if(v)n=w<<16>>16!=0?2:0;else n=2;s[t+92>>2]=n;if(a)n=p<<16>>16!=0?2:0;else n=2;s[t+108>>2]=n;if(l)n=h<<16>>16!=0?2:0;else n=2;s[t+116>>2]=n;if(!u){E=2;T=t+124|0;s[T>>2]=E;d=k;return}E=f<<16>>16!=0?2:0;T=t+124|0;s[T>>2]=E;d=k;return}function rt(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0;C=d;w=s[n+4>>2]|0;_=s[n+8>>2]|0;if(t>>>0<4){c=o[(s[n>>2]|0)+(t+-1)>>0]|0;h=0-c|0;p=c+1|0;u=4;while(1){n=e+-2|0;b=o[n>>0]|0;y=e+-1|0;v=o[y>>0]|0;g=o[e>>0]|0;l=e+1|0;a=o[l>>0]|0;f=v-g|0;if((((f|0)>-1?f:0-f|0)>>>0<w>>>0?(f=b-v|0,((f|0)>-1?f:0-f|0)>>>0<_>>>0):0)?(f=a-g|0,((f|0)>-1?f:0-f|0)>>>0<_>>>0):0){t=o[e+-3>>0]|0;m=o[e+2>>0]|0;f=t-v|0;if(((f|0)>-1?f:0-f|0)>>>0<_>>>0){i[n>>0]=(Ct(h,c,((v+1+g|0)>>>1)-(b<<1)+t>>1)|0)+b;n=p}else n=c;f=m-g|0;if(((f|0)>-1?f:0-f|0)>>>0<_>>>0){i[l>>0]=(Ct(h,c,((v+1+g|0)>>>1)-(a<<1)+m>>1)|0)+a;n=n+1|0}l=Ct(0-n|0,n,b+4-a+(g-v<<2)>>3)|0;f=i[3472+((g|512)-l)>>0]|0;i[y>>0]=i[3472+((v|512)+l)>>0]|0;i[e>>0]=f}u=u+-1|0;if(!u)break;else e=e+r|0}d=C;return}y=(w>>>2)+2|0;b=4;while(1){u=e+-2|0;g=o[u>>0]|0;c=e+-1|0;v=o[c>>0]|0;p=o[e>>0]|0;t=e+1|0;h=o[t>>0]|0;n=v-p|0;n=(n|0)>-1?n:0-n|0;do if((n>>>0<w>>>0?(f=g-v|0,((f|0)>-1?f:0-f|0)>>>0<_>>>0):0)?(f=h-p|0,((f|0)>-1?f:0-f|0)>>>0<_>>>0):0){a=e+-3|0;f=o[a>>0]|0;l=e+2|0;m=o[l>>0]|0;if(n>>>0<y>>>0){n=f-v|0;if(((n|0)>-1?n:0-n|0)>>>0<_>>>0){n=v+g+p|0;i[c>>0]=(h+4+(n<<1)+f|0)>>>3;i[u>>0]=(n+2+f|0)>>>2;i[a>>0]=(n+4+(f*3|0)+((o[e+-4>>0]|0)<<1)|0)>>>3}else i[c>>0]=(v+2+(g<<1)+h|0)>>>2;f=m-p|0;if(((f|0)>-1?f:0-f|0)>>>0<_>>>0){f=p+v+h|0;i[e>>0]=(g+4+(f<<1)+m|0)>>>3;i[t>>0]=(f+2+m|0)>>>2;i[l>>0]=(f+4+(m*3|0)+((o[e+3>>0]|0)<<1)|0)>>>3;break}}else i[c>>0]=(v+2+(g<<1)+h|0)>>>2;i[e>>0]=(g+2+p+(h<<1)|0)>>>2}while(0);b=b+-1|0;if(!b)break;else e=e+r|0}d=C;return}function st(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0;x=d;w=o[(s[n>>2]|0)+(t+-1)>>0]|0;C=0-r|0;_=C<<1;y=n+4|0;f=n+8|0;g=ee(r,-3)|0;b=0-w|0;m=w+1|0;v=r<<1;h=4;while(1){t=e+_|0;u=e+C|0;l=e+r|0;n=i[l>>0]|0;c=o[u>>0]|0;p=o[e>>0]|0;a=c-p|0;if((((a|0)>-1?a:0-a|0)>>>0<(s[y>>2]|0)>>>0?(E=o[t>>0]|0,a=E-c|0,S=s[f>>2]|0,((a|0)>-1?a:0-a|0)>>>0<S>>>0):0)?(T=n&255,n=T-p|0,((n|0)>-1?n:0-n|0)>>>0<S>>>0):0){n=o[e+g>>0]|0;a=n-c|0;if(((a|0)>-1?a:0-a|0)>>>0<S>>>0){i[t>>0]=(Ct(b,w,((c+1+p|0)>>>1)-(E<<1)+n>>1)|0)+E;t=s[f>>2]|0;n=m}else{t=S;n=w}a=o[e+v>>0]|0;k=a-p|0;if(((k|0)>-1?k:0-k|0)>>>0<t>>>0){i[l>>0]=(Ct(b,w,((c+1+p|0)>>>1)-(T<<1)+a>>1)|0)+T;n=n+1|0}n=Ct(0-n|0,n,4-T+(p-c<<2)+E>>3)|0;t=i[3472+((p|512)-n)>>0]|0;i[u>>0]=i[3472+((c|512)+n)>>0]|0;i[e>>0]=t}h=h+-1|0;if(!h)break;else e=e+1|0}d=x;return}function ot(e){e=e|0;var t=0;t=d;d=d+e|0;d=d+15&-16;return t|0}function at(){return d|0}function lt(e){e=e|0;d=e}function ut(e,t){e=e|0;t=t|0;if(!m){m=e;g=t}}function ct(e){e=e|0;i[h>>0]=i[e>>0];i[h+1>>0]=i[e+1>>0];i[h+2>>0]=i[e+2>>0];i[h+3>>0]=i[e+3>>0]}function dt(e){e=e|0;i[h>>0]=i[e>>0];i[h+1>>0]=i[e+1>>0];i[h+2>>0]=i[e+2>>0];i[h+3>>0]=i[e+3>>0];i[h+4>>0]=i[e+4>>0];i[h+5>>0]=i[e+5>>0];i[h+6>>0]=i[e+6>>0];i[h+7>>0]=i[e+7>>0]}function pt(e){e=e|0;A=e}function ht(){return A|0}function ft(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0;u=d;r=o[8+t>>0]|0;l=o[64+t>>0]|0;t=s[120+(l*12|0)>>2]<<r;a=s[124+(l*12|0)>>2]<<r;r=s[128+(l*12|0)>>2]<<r;if(!n)s[e>>2]=ee(s[e>>2]|0,t)|0;e:do if(!(i&65436)){if(i&98){h=e+4|0;c=ee(s[h>>2]|0,a)|0;l=e+20|0;p=ee(s[l>>2]|0,t)|0;n=e+24|0;r=ee(s[n>>2]|0,a)|0;a=s[e>>2]|0;t=(c>>1)-r|0;r=c+(r>>1)|0;c=p+a+32|0;i=c+r>>6;s[e>>2]=i;p=a-p+32|0;a=p+t>>6;s[h>>2]=a;t=p-t>>6;s[e+8>>2]=t;r=c-r>>6;s[e+12>>2]=r;s[e+48>>2]=i;s[e+32>>2]=i;s[e+16>>2]=i;s[e+52>>2]=a;s[e+36>>2]=a;s[l>>2]=a;s[e+56>>2]=t;s[e+40>>2]=t;s[n>>2]=t;s[e+60>>2]=r;s[e+44>>2]=r;s[e+28>>2]=r;if((i+512|0)>>>0>1023|(a+512|0)>>>0>1023|(t+512|0)>>>0>1023|(r+512|0)>>>0>1023)r=1;else break;d=u;return r|0}r=(s[e>>2]|0)+32>>6;if((r+512|0)>>>0>1023){p=1;d=u;return p|0}else{s[e+60>>2]=r;s[e+56>>2]=r;s[e+52>>2]=r;s[e+48>>2]=r;s[e+44>>2]=r;s[e+40>>2]=r;s[e+36>>2]=r;s[e+32>>2]=r;s[e+28>>2]=r;s[e+24>>2]=r;s[e+20>>2]=r;s[e+16>>2]=r;s[e+12>>2]=r;s[e+8>>2]=r;s[e+4>>2]=r;s[e>>2]=r;break}}else{T=e+4|0;b=e+56|0;C=e+60|0;y=s[C>>2]|0;w=ee(s[T>>2]|0,a)|0;s[b>>2]=ee(s[b>>2]|0,a)|0;s[C>>2]=ee(y,r)|0;C=e+8|0;y=s[C>>2]|0;b=e+16|0;E=ee(s[e+20>>2]|0,t)|0;f=ee(s[b>>2]|0,r)|0;g=e+12|0;m=s[g>>2]|0;i=ee(s[e+32>>2]|0,a)|0;n=ee(s[e+24>>2]|0,a)|0;v=s[e+28>>2]|0;l=ee(s[e+48>>2]|0,r)|0;h=ee(s[e+36>>2]|0,a)|0;c=s[e+44>>2]|0;p=ee(s[e+40>>2]|0,r)|0;r=ee(s[e+52>>2]|0,a)|0;S=s[e>>2]|0;_=E+S|0;E=S-E|0;S=(w>>1)-n|0;w=(n>>1)+w|0;n=w+_|0;s[e>>2]=n;s[T>>2]=S+E;s[C>>2]=E-S;s[g>>2]=_-w;g=ee(a,v+y|0)|0;v=ee(y-v|0,a)|0;a=(f>>1)-l|0;f=(l>>1)+f|0;l=f+g|0;s[b>>2]=l;s[e+20>>2]=a+v;s[e+24>>2]=v-a;s[e+28>>2]=g-f;f=ee(t,c+m|0)|0;t=ee(m-c|0,t)|0;c=(i>>1)-r|0;i=(r>>1)+i|0;a=i+f|0;s[e+32>>2]=a;s[e+36>>2]=c+t;s[e+40>>2]=t-c;s[e+44>>2]=f-i;i=e+56|0;f=s[i>>2]|0;c=f+h|0;f=h-f|0;t=e+60|0;r=s[t>>2]|0;h=(p>>1)-r|0;p=(r>>1)+p|0;r=p+c|0;s[e+48>>2]=r;s[e+52>>2]=h+f;s[i>>2]=f-h;s[t>>2]=c-p;t=l;l=3;while(1){_=(t>>1)-r|0;r=(r>>1)+t|0;C=a+n+32|0;S=C+r>>6;s[e>>2]=S;t=n-a+32|0;E=t+_>>6;s[e+16>>2]=E;t=t-_>>6;s[e+32>>2]=t;r=C-r>>6;s[e+48>>2]=r;if((S+512|0)>>>0>1023|(E+512|0)>>>0>1023){r=1;t=14;break}if((t+512|0)>>>0>1023|(r+512|0)>>>0>1023){r=1;t=14;break}i=e+4|0;if(!l)break e;n=s[i>>2]|0;a=s[e+36>>2]|0;t=s[e+20>>2]|0;r=s[e+52>>2]|0;e=i;l=l+-1|0}if((t|0)==14){d=u;return r|0}}while(0);E=0;d=u;return E|0}function mt(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0;k=d;n=i[64+t>>0]|0;b=i[8+t>>0]|0;D=e+8|0;w=s[D>>2]|0;l=s[e+20>>2]|0;g=e+16|0;E=s[g>>2]|0;v=e+32|0;T=s[v>>2]|0;A=e+12|0;_=s[A>>2]|0;r=s[e+24>>2]|0;p=s[e+28>>2]|0;f=e+48|0;o=s[f>>2]|0;R=s[e+36>>2]|0;x=s[e+40>>2]|0;P=s[e+44>>2]|0;a=s[e+52>>2]|0;m=s[e>>2]|0;c=l+m|0;l=m-l|0;m=e+4|0;S=s[m>>2]|0;y=S-r|0;S=r+S|0;r=S+c|0;s[e>>2]=r;u=y+l|0;s[m>>2]=u;y=l-y|0;s[D>>2]=y;S=c-S|0;s[A>>2]=S;A=p+w|0;p=w-p|0;w=E-o|0;E=o+E|0;o=E+A|0;s[g>>2]=o;c=w+p|0;s[e+20>>2]=c;w=p-w|0;s[e+24>>2]=w;E=A-E|0;s[e+28>>2]=E;A=P+_|0;P=_-P|0;_=T-a|0;T=a+T|0;a=T+A|0;s[e+32>>2]=a;p=_+P|0;s[e+36>>2]=p;_=P-_|0;s[e+40>>2]=_;T=A-T|0;s[e+44>>2]=T;A=e+56|0;P=s[A>>2]|0;D=P+R|0;P=R-P|0;R=e+60|0;l=s[R>>2]|0;C=x-l|0;x=l+x|0;l=x+D|0;s[e+48>>2]=l;h=C+P|0;s[e+52>>2]=h;C=P-C|0;s[A>>2]=C;x=D-x|0;s[R>>2]=x;b=b&255;n=s[120+((n&255)*12|0)>>2]|0;if(t>>>0>11){t=n<<b+-2;b=a+r|0;a=r-a|0;r=o-l|0;n=l+o|0;s[e>>2]=ee(n+b|0,t)|0;s[g>>2]=ee(r+a|0,t)|0;s[v>>2]=ee(a-r|0,t)|0;s[f>>2]=ee(b-n|0,t)|0;v=p+u|0;n=u-p|0;g=c-h|0;b=h+c|0;s[m>>2]=ee(b+v|0,t)|0;s[e+20>>2]=ee(g+n|0,t)|0;s[e+36>>2]=ee(n-g|0,t)|0;s[e+52>>2]=ee(v-b|0,t)|0;b=_+y|0;y=y-_|0;_=w-C|0;C=C+w|0;s[e+8>>2]=ee(C+b|0,t)|0;s[e+24>>2]=ee(_+y|0,t)|0;s[e+40>>2]=ee(y-_|0,t)|0;s[e+56>>2]=ee(b-C|0,t)|0;C=T+S|0;_=S-T|0;S=E-x|0;E=x+E|0;s[e+12>>2]=ee(E+C|0,t)|0;s[e+28>>2]=ee(S+_|0,t)|0;s[e+44>>2]=ee(_-S|0,t)|0;s[e+60>>2]=ee(C-E|0,t)|0;d=k;return}else{R=(t+-6|0)>>>0<6?1:2;t=2-b|0;b=a+r|0;D=r-a|0;a=o-l|0;r=l+o|0;s[e>>2]=(ee(r+b|0,n)|0)+R>>t;s[g>>2]=(ee(a+D|0,n)|0)+R>>t;s[v>>2]=(ee(D-a|0,n)|0)+R>>t;s[f>>2]=(ee(b-r|0,n)|0)+R>>t;v=p+u|0;r=u-p|0;g=c-h|0;b=h+c|0;s[m>>2]=(ee(b+v|0,n)|0)+R>>t;s[e+20>>2]=(ee(g+r|0,n)|0)+R>>t;s[e+36>>2]=(ee(r-g|0,n)|0)+R>>t;s[e+52>>2]=(ee(v-b|0,n)|0)+R>>t;b=_+y|0;y=y-_|0;_=w-C|0;C=C+w|0;s[e+8>>2]=(ee(C+b|0,n)|0)+R>>t;s[e+24>>2]=(ee(_+y|0,n)|0)+R>>t;s[e+40>>2]=(ee(y-_|0,n)|0)+R>>t;s[e+56>>2]=(ee(b-C|0,n)|0)+R>>t;C=T+S|0;_=S-T|0;S=E-x|0;E=x+E|0;s[e+12>>2]=(ee(E+C|0,n)|0)+R>>t;s[e+28>>2]=(ee(S+_|0,n)|0)+R>>t;s[e+44>>2]=(ee(_-S|0,n)|0)+R>>t;s[e+60>>2]=(ee(C-E|0,n)|0)+R>>t;d=k;return}}function gt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,l=0,u=0,c=0,d=0,p=0;n=s[120+((o[64+t>>0]|0)*12|0)>>2]|0;if(t>>>0>5){n=n<<(o[8+t>>0]|0)+-1;t=0}else t=1;c=s[e>>2]|0;r=e+8|0;a=s[r>>2]|0;p=a+c|0;a=c-a|0;c=e+4|0;u=s[c>>2]|0;d=e+12|0;i=s[d>>2]|0;l=u-i|0;u=i+u|0;s[e>>2]=(ee(u+p|0,n)|0)>>t;s[c>>2]=(ee(p-u|0,n)|0)>>t;s[r>>2]=(ee(l+a|0,n)|0)>>t;s[d>>2]=(ee(a-l|0,n)|0)>>t;d=e+16|0;l=s[d>>2]|0;a=e+24|0;r=s[a>>2]|0;c=r+l|0;r=l-r|0;l=e+20|0;u=s[l>>2]|0;e=e+28|0;p=s[e>>2]|0;i=u-p|0;u=p+u|0;s[d>>2]=(ee(u+c|0,n)|0)>>t;s[l>>2]=(ee(c-u|0,n)|0)>>t;s[a>>2]=(ee(i+r|0,n)|0)>>t;s[e>>2]=(ee(r-i|0,n)|0)>>t;return}function vt(e,t){e=e|0;t=t|0;var n=0,i=0;i=d;t=1<<t+-1;if(!(t&e)){n=t;t=0}else{t=0;d=i;return t|0}do{t=t+1|0;n=n>>>1}while((n|0)!=0&(n&e|0)==0);d=i;return t|0}function bt(e){e=e|0;var t=0,n=0;n=d;t=8-(s[e+8>>2]|0)|0;e=Wt(e,t)|0;if((e|0)==-1){e=1;d=n;return e|0}e=(e|0)!=(s[400+(t+-1<<2)>>2]|0)&1;d=n;return e|0}function yt(e){e=e|0;var t=0,n=0,i=0,r=0;n=d;r=s[e+12>>2]<<3;i=s[e+16>>2]|0;t=r-i|0;if((r|0)==(i|0)){e=0;d=n;return e|0}if(t>>>0>8){e=1;d=n;return e|0}else{e=((zt(e)|0)>>>(32-t|0)|0)!=(1<<t+-1|0)&1;d=n;return e|0}return 0}function wt(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=d;i=s[e+(n<<2)>>2]|0;do{n=n+1|0;if(n>>>0>=t>>>0)break}while((s[e+(n<<2)>>2]|0)!=(i|0));d=r;return((n|0)==(t|0)?0:n)|0}function _t(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;i=s[e+4>>2]|0;r=(t>>>0)%(i>>>0)|0;n=t-r|0;t=ee(s[e+8>>2]|0,i)|0;i=s[e>>2]|0;s[e+12>>2]=i+((n<<8)+(r<<4));n=(r<<3)+(t<<8)+(n<<6)|0;s[e+16>>2]=i+n;s[e+20>>2]=i+(n+(t<<6));return}function Ct(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)>=(e|0))e=(n|0)>(t|0)?t:n;return e|0}function St(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0;b=d;e:do if(((t>>>0>3?(i[e>>0]|0)==0:0)?(i[e+1>>0]|0)==0:0)?(a=i[e+2>>0]|0,(a&255)<2):0){t:do if((t|0)!=3){m=-3;g=3;u=e+3|0;l=2;while(1){if(a<<24>>24)if(a<<24>>24==1&l>>>0>1){f=g;a=0;p=0;c=0;break}else l=0;else l=l+1|0;c=g+1|0;if((c|0)==(t|0))break t;a=i[u>>0]|0;m=~g;g=c;u=u+1|0}while(1){v=i[u>>0]|0;h=f+1|0;l=v<<24>>24!=0;c=(l&1^1)+c|0;a=v<<24>>24==3&(c|0)==2?1:a;if(v<<24>>24==1&c>>>0>1){v=14;break}if(l){p=c>>>0>2?1:p;c=0}if((h|0)==(t|0)){v=18;break}else{f=h;u=u+1|0}}if((v|0)==14){h=m+f-c|0;s[n+12>>2]=h;l=g;c=c-(c>>>0<3?c:3)|0;break e}else if((v|0)==18){h=m+t-c|0;s[n+12>>2]=h;l=g;break e}}while(0);s[r>>2]=t;g=1;d=b;return g|0}else v=19;while(0);if((v|0)==19){s[n+12>>2]=t;h=t;a=1;l=0;p=0;c=0}u=e+l|0;s[n>>2]=u;s[n+4>>2]=u;s[n+8>>2]=0;s[n+16>>2]=0;f=n+12|0;s[r>>2]=c+l+h;if(p){g=1;d=b;return g|0}if(!a){g=0;d=b;return g|0}c=s[f>>2]|0;a=u;p=u;l=0;e:while(1){while(1){g=c;c=c+-1|0;if(!g){v=31;break e}u=i[a>>0]|0;if((l|0)!=2)break;if(u<<24>>24!=3){v=29;break}if(!c){a=1;v=32;break e}a=a+1|0;if((o[a>>0]|0)>3){a=1;v=32;break e}else l=0}if((v|0)==29){v=0;if((u&255)<3){a=1;v=32;break}else l=2}i[p>>0]=u;a=a+1|0;p=p+1|0;l=u<<24>>24==0?l+1|0:0}if((v|0)==31){s[f>>2]=p-a+(s[f>>2]|0);g=0;d=b;return g|0}else if((v|0)==32){d=b;return a|0}return 0}function Et(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0;f=d;d=d+16|0;h=f;di(t,0,92);r=Wt(e,8)|0;e:do if((((r|0)!=-1?(s[t>>2]=r,Wt(e,1)|0,Wt(e,1)|0,(Wt(e,1)|0)!=-1):0)?(Wt(e,5)|0)!=-1:0)?(i=Wt(e,8)|0,(i|0)!=-1):0){p=t+4|0;s[p>>2]=i;r=t+8|0;n=Xt(e,r)|0;if(!n)if((s[r>>2]|0)>>>0<=31){n=Xt(e,h)|0;if(!n){r=s[h>>2]|0;if(r>>>0<=12){s[t+12>>2]=1<<r+4;n=Xt(e,h)|0;if(!n){r=s[h>>2]|0;if(r>>>0<=2){s[t+16>>2]=r;t:do if(!r){n=Xt(e,h)|0;if(n)break e;r=s[h>>2]|0;if(r>>>0>12){n=1;break e}s[t+20>>2]=1<<r+4}else if((r|0)==1){r=Wt(e,1)|0;if((r|0)==-1){n=1;break e}s[t+24>>2]=(r|0)==1&1;n=Qt(e,t+28|0)|0;if(n)break e;n=Qt(e,t+32|0)|0;if(n)break e;a=t+36|0;n=Xt(e,a)|0;if(n)break e;r=s[a>>2]|0;if(r>>>0>255){n=1;break e}if(!r){s[t+40>>2]=0;break}r=li(r<<2)|0;o=t+40|0;s[o>>2]=r;if(!r){n=65535;break e}if(s[a>>2]|0){i=0;while(1){n=Qt(e,r+(i<<2)|0)|0;i=i+1|0;if(n)break e;if(i>>>0>=(s[a>>2]|0)>>>0)break t;r=s[o>>2]|0}}}while(0);c=t+44|0;n=Xt(e,c)|0;if(!n)if((s[c>>2]|0)>>>0<=16?(u=Wt(e,1)|0,(u|0)!=-1):0){s[t+48>>2]=(u|0)==1&1;n=Xt(e,h)|0;if(!n){i=t+52|0;s[i>>2]=(s[h>>2]|0)+1;n=Xt(e,h)|0;if(!n){u=t+56|0;s[u>>2]=(s[h>>2]|0)+1;a=Wt(e,1)|0;if((!((a|0)==0|(a|0)==-1)?(Wt(e,1)|0)!=-1:0)?(l=Wt(e,1)|0,(l|0)!=-1):0){l=(l|0)==1;s[t+60>>2]=l&1;if(l){l=t+64|0;n=Xt(e,l)|0;if(n)break;r=t+68|0;n=Xt(e,r)|0;if(n)break;a=t+72|0;n=Xt(e,a)|0;if(n)break;o=t+76|0;n=Xt(e,o)|0;if(n)break;i=s[i>>2]|0;if((s[l>>2]|0)>((i<<3)+~s[r>>2]|0)){n=1;break}r=s[u>>2]|0;if((s[a>>2]|0)>((r<<3)+~s[o>>2]|0)){n=1;break}}else{i=s[i>>2]|0;r=s[u>>2]|0}n=ee(r,i)|0;do switch(s[p>>2]|0){case 11:{r=396;i=345600;o=58;break}case 12:{r=396;i=912384;o=58;break}case 13:{r=396;i=912384;o=58;break}case 20:{r=396;i=912384;o=58;break}case 21:{r=792;i=1824768;o=58;break}case 22:{r=1620;i=3110400;o=58;break}case 30:{r=1620;i=3110400;o=58;break}case 31:{r=3600;i=6912e3;o=58;break}case 32:{r=5120;i=7864320;o=58;break}case 40:{r=8192;i=12582912;o=58;break}case 41:{r=8192;i=12582912;o=58;break}case 42:{r=8704;i=13369344;o=58;break}case 50:{r=22080;i=42393600;o=58;break}case 51:{r=36864;i=70778880;o=58;break}case 10:{r=99;i=152064;o=58;break}default:o=60}while(0);do if((o|0)==58){if(r>>>0<n>>>0){o=60;break}i=(i>>>0)/((n*384|0)>>>0)|0;i=i>>>0<16?i:16;s[h>>2]=i;r=s[c>>2]|0;if(r>>>0>i>>>0){i=r;o=61}}while(0);if((o|0)==60){s[h>>2]=2147483647;i=s[c>>2]|0;o=61}if((o|0)==61)s[h>>2]=i;o=t+88|0;s[o>>2]=i;i=Wt(e,1)|0;if((i|0)==-1){n=1;break}h=(i|0)==1;s[t+80>>2]=h&1;do if(h){i=li(952)|0;r=t+84|0;s[r>>2]=i;if(!i){n=65535;break e}n=Mn(e,i)|0;if(n)break e;n=s[r>>2]|0;if(!(s[n+920>>2]|0))break;i=s[n+948>>2]|0;if((s[n+944>>2]|0)>>>0>i>>>0){n=1;break e}if(i>>>0<(s[c>>2]|0)>>>0){n=1;break e}if(i>>>0>(s[o>>2]|0)>>>0){n=1;break e}s[o>>2]=(i|0)==0?1:i}while(0);bt(e)|0;n=0}else n=1}}}else n=1}else n=1}}else n=1}}else n=1}else n=1;while(0);d=f;return n|0}function Tt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0;l=d;if((s[e>>2]|0)!=(s[t>>2]|0)){n=1;d=l;return n|0}if((s[e+4>>2]|0)!=(s[t+4>>2]|0)){n=1;d=l;return n|0}if((s[e+12>>2]|0)!=(s[t+12>>2]|0)){n=1;d=l;return n|0}n=s[e+16>>2]|0;if((n|0)!=(s[t+16>>2]|0)){n=1;d=l;return n|0}if((s[e+44>>2]|0)!=(s[t+44>>2]|0)){n=1;d=l;return n|0}if((s[e+48>>2]|0)!=(s[t+48>>2]|0)){n=1;d=l;return n|0}if((s[e+52>>2]|0)!=(s[t+52>>2]|0)){n=1;d=l;return n|0}if((s[e+56>>2]|0)!=(s[t+56>>2]|0)){n=1;d=l;return n|0}a=s[e+60>>2]|0;if((a|0)!=(s[t+60>>2]|0)){n=1;d=l;return n|0}if((s[e+80>>2]|0)!=(s[t+80>>2]|0)){n=1;d=l;return n|0}e:do if(!n){if((s[e+20>>2]|0)!=(s[t+20>>2]|0)){n=1;d=l;return n|0}}else if((n|0)==1){if((s[e+24>>2]|0)!=(s[t+24>>2]|0)){n=1;d=l;return n|0}if((s[e+28>>2]|0)!=(s[t+28>>2]|0)){n=1;d=l;return n|0}if((s[e+32>>2]|0)!=(s[t+32>>2]|0)){n=1;d=l;return n|0}n=s[e+36>>2]|0;if((n|0)!=(s[t+36>>2]|0)){n=1;d=l;return n|0}if(n){i=s[e+40>>2]|0;r=s[t+40>>2]|0;o=0;while(1){if((s[i+(o<<2)>>2]|0)!=(s[r+(o<<2)>>2]|0)){n=1;break}o=o+1|0;if(o>>>0>=n>>>0)break e}d=l;return n|0}}while(0);if(a){if((s[e+64>>2]|0)!=(s[t+64>>2]|0)){n=1;d=l;return n|0}if((s[e+68>>2]|0)!=(s[t+68>>2]|0)){n=1;d=l;return n|0}if((s[e+72>>2]|0)!=(s[t+72>>2]|0)){n=1;d=l;return n|0}if((s[e+76>>2]|0)!=(s[t+76>>2]|0)){n=1;d=l;return n|0}}n=0;d=l;return n|0}function xt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0;c=d;d=d+16|0;l=c+4|0;u=c;di(t,0,72);n=Xt(e,t)|0;if(n){d=c;return n|0}if((s[t>>2]|0)>>>0>255){n=1;d=c;return n|0}i=t+4|0;n=Xt(e,i)|0;if(n){d=c;return n|0}if((s[i>>2]|0)>>>0>31){n=1;d=c;return n|0}if(Wt(e,1)|0){n=1;d=c;return n|0}n=Wt(e,1)|0;if((n|0)==-1){n=1;d=c;return n|0}s[t+8>>2]=(n|0)==1&1;n=Xt(e,l)|0;if(n){d=c;return n|0}n=(s[l>>2]|0)+1|0;a=t+12|0;s[a>>2]=n;if(n>>>0>8){n=1;d=c;return n|0}e:do if(n>>>0>1){n=t+16|0;i=Xt(e,n)|0;if(i){n=i;d=c;return n|0}n=s[n>>2]|0;if(n>>>0>6){n=1;d=c;return n|0}switch(n|0){case 5:case 4:case 3:{n=Wt(e,1)|0;if((n|0)==-1){n=1;d=c;return n|0}s[t+32>>2]=(n|0)==1&1;n=Xt(e,l)|0;if(!n){s[t+36>>2]=(s[l>>2]|0)+1;break e}else{d=c;return n|0}}case 0:{n=li(s[a>>2]<<2)|0;r=t+20|0;s[r>>2]=n;if(!n){n=65535;d=c;return n|0}if(!(s[a>>2]|0))break e;else i=0;while(1){n=Xt(e,l)|0;if(n)break;s[(s[r>>2]|0)+(i<<2)>>2]=(s[l>>2]|0)+1;i=i+1|0;if(i>>>0>=(s[a>>2]|0)>>>0)break e}d=c;return n|0}case 2:{i=t+24|0;s[i>>2]=li((s[a>>2]<<2)+-4|0)|0;n=li((s[a>>2]<<2)+-4|0)|0;o=t+28|0;s[o>>2]=n;if((s[i>>2]|0)==0|(n|0)==0){n=65535;d=c;return n|0}if((s[a>>2]|0)==1)break e;else r=0;while(1){n=Xt(e,l)|0;if(n){i=46;break}s[(s[i>>2]|0)+(r<<2)>>2]=s[l>>2];n=Xt(e,l)|0;if(n){i=46;break}s[(s[o>>2]|0)+(r<<2)>>2]=s[l>>2];r=r+1|0;if(r>>>0>=((s[a>>2]|0)+-1|0)>>>0)break e}if((i|0)==46){d=c;return n|0}break}case 6:{n=Xt(e,l)|0;if(n){d=c;return n|0}i=(s[l>>2]|0)+1|0;n=t+40|0;s[n>>2]=i;i=li(i<<2)|0;o=t+44|0;s[o>>2]=i;if(!i){n=65535;d=c;return n|0}r=s[432+((s[a>>2]|0)+-1<<2)>>2]|0;if(!(s[n>>2]|0))break e;else i=0;while(1){p=Wt(e,r)|0;s[(s[o>>2]|0)+(i<<2)>>2]=p;i=i+1|0;if(p>>>0>=(s[a>>2]|0)>>>0){n=1;break}if(i>>>0>=(s[n>>2]|0)>>>0)break e}d=c;return n|0}default:break e}}while(0);n=Xt(e,l)|0;if(n){e=n;d=c;return e|0}n=s[l>>2]|0;if(n>>>0>31){e=1;d=c;return e|0}s[t+48>>2]=n+1;n=Xt(e,l)|0;if(n){e=n;d=c;return e|0}if((s[l>>2]|0)>>>0>31){e=1;d=c;return e|0}if(Wt(e,1)|0){e=1;d=c;return e|0}if((Wt(e,2)|0)>>>0>2){e=1;d=c;return e|0}n=Qt(e,u)|0;if(n){e=n;d=c;return e|0}n=(s[u>>2]|0)+26|0;if(n>>>0>51){e=1;d=c;return e|0}s[t+52>>2]=n;n=Qt(e,u)|0;if(n){e=n;d=c;return e|0}if(((s[u>>2]|0)+26|0)>>>0>51){e=1;d=c;return e|0}n=Qt(e,u)|0;if(n){e=n;d=c;return e|0}n=s[u>>2]|0;if((n+12|0)>>>0>24){e=1;d=c;return e|0}s[t+56>>2]=n;n=Wt(e,1)|0;if((n|0)==-1){e=1;d=c;return e|0}s[t+60>>2]=(n|0)==1&1;n=Wt(e,1)|0;if((n|0)==-1){e=1;d=c;return e|0}s[t+64>>2]=(n|0)==1&1;n=Wt(e,1)|0;if((n|0)==-1){e=1;d=c;return e|0}s[t+68>>2]=(n|0)==1&1;bt(e)|0;e=0;d=c;return e|0}function kt(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0;C=d;d=d+32|0;b=C+20|0;g=C+16|0;f=C+12|0;c=C+8|0;_=C+4|0;y=C;di(t,0,988);w=ee(s[n+56>>2]|0,s[n+52>>2]|0)|0;u=Xt(e,_)|0;if(u){r=u;d=C;return r|0}h=s[_>>2]|0;s[t>>2]=h;if(h>>>0>=w>>>0){r=1;d=C;return r|0}u=Xt(e,_)|0;if(u){r=u;d=C;return r|0}u=s[_>>2]|0;p=t+4|0;s[p>>2]=u;if((u|0)==5|(u|0)==0)l=5;else if(!((u|0)==7|(u|0)==2)){r=1;d=C;return r|0}if((l|0)==5){if((s[r>>2]|0)==5){r=1;d=C;return r|0}if(!(s[n+44>>2]|0)){r=1;d=C;return r|0}}u=Xt(e,_)|0;if(u){r=u;d=C;return r|0}h=s[_>>2]|0;s[t+8>>2]=h;if((h|0)!=(s[i>>2]|0)){r=1;d=C;return r|0}h=n+12|0;u=s[h>>2]|0;l=0;while(1)if(!(u>>>l))break;else l=l+1|0;u=Wt(e,l+-1|0)|0;if((u|0)==-1){r=1;d=C;return r|0}l=(s[r>>2]|0)==5;if(l&(u|0)!=0){r=1;d=C;return r|0}s[t+12>>2]=u;if(l){u=Xt(e,_)|0;if(u){r=u;d=C;return r|0}u=s[_>>2]|0;s[t+16>>2]=u;if(u>>>0>65535){r=1;d=C;return r|0}}o=n+16|0;u=s[o>>2]|0;if(!u){a=n+20|0;u=s[a>>2]|0;l=0;while(1)if(!(u>>>l))break;else l=l+1|0;u=Wt(e,l+-1|0)|0;if((u|0)==-1){r=1;d=C;return r|0}l=t+20|0;s[l>>2]=u;do if(s[i+8>>2]|0){u=Qt(e,y)|0;if(!u){s[t+24>>2]=s[y>>2];break}else{r=u;d=C;return r|0}}while(0);if((s[r>>2]|0)==5){u=s[l>>2]|0;if(u>>>0>(s[a>>2]|0)>>>1>>>0){r=1;d=C;return r|0}l=s[t+24>>2]|0;if((u|0)!=(((l|0)>0?0:0-l|0)|0)){r=1;d=C;return r|0}}u=s[o>>2]|0}if((u|0)==1?(s[n+24>>2]|0)==0:0){u=Qt(e,y)|0;if(u){r=u;d=C;return r|0}u=t+28|0;s[u>>2]=s[y>>2];do if(s[i+8>>2]|0){l=Qt(e,y)|0;if(!l){s[t+32>>2]=s[y>>2];break}else{r=l;d=C;return r|0}}while(0);if((s[r>>2]|0)==5?(l=s[u>>2]|0,u=(s[n+32>>2]|0)+l+(s[t+32>>2]|0)|0,(((l|0)<(u|0)?l:u)|0)!=0):0){r=1;d=C;return r|0}}if(s[i+68>>2]|0){u=Xt(e,_)|0;if(u){r=u;d=C;return r|0}u=s[_>>2]|0;s[t+36>>2]=u;if(u>>>0>127){r=1;d=C;return r|0}}u=s[p>>2]|0;if((u|0)==5|(u|0)==0){u=Wt(e,1)|0;if((u|0)==-1){r=1;d=C;return r|0}s[t+40>>2]=u;do if(!u){u=s[i+48>>2]|0;if(u>>>0>16){r=1;d=C;return r|0}else{s[t+44>>2]=u;break}}else{u=Xt(e,_)|0;if(u){r=u;d=C;return r|0}u=s[_>>2]|0;if(u>>>0>15){r=1;d=C;return r|0}else{s[t+44>>2]=u+1;break}}while(0);u=s[p>>2]|0}do if((u|0)==5|(u|0)==0){o=s[t+44>>2]|0;l=s[h>>2]|0;u=Wt(e,1)|0;if((u|0)==-1){r=1;d=C;return r|0}s[t+68>>2]=u;if(u){a=0;e:while(1){if(a>>>0>o>>>0){v=1;l=110;break}u=Xt(e,c)|0;if(u){v=u;l=110;break}u=s[c>>2]|0;if(u>>>0>3){v=1;l=110;break}s[t+(a*12|0)+72>>2]=u;do if(u>>>0<2){u=Xt(e,f)|0;if(u){v=u;l=110;break e}u=s[f>>2]|0;if(u>>>0>=l>>>0){v=1;l=110;break e}s[t+(a*12|0)+76>>2]=u+1}else{if((u|0)!=2)break;u=Xt(e,f)|0;if(u){v=u;l=110;break e}s[t+(a*12|0)+80>>2]=s[f>>2]}while(0);if((s[c>>2]|0)==3){l=61;break}else a=a+1|0}if((l|0)==61){if(!a)v=1;else break;d=C;return v|0}else if((l|0)==110){d=C;return v|0}}}while(0);do if(s[r+4>>2]|0){h=s[n+44>>2]|0;r=(s[r>>2]|0)==5;u=Wt(e,1)|0;l=(u|0)==-1;if(r){if(l){r=1;d=C;return r|0}s[t+276>>2]=u;o=Wt(e,1)|0;if((o|0)==-1){r=1;d=C;return r|0}s[t+280>>2]=o;if((h|0)!=0|(o|0)==0)break;else v=1;d=C;return v|0}if(l){r=1;d=C;return r|0}s[t+284>>2]=u;if(u){l=(h<<1)+2|0;a=0;n=0;o=0;c=0;p=0;while(1){if(a>>>0>l>>>0){v=1;l=110;break}u=Xt(e,g)|0;if(u){v=u;l=110;break}u=s[g>>2]|0;if(u>>>0>6){v=1;l=110;break}s[t+(a*20|0)+288>>2]=u;if((u&-3|0)==1){u=Xt(e,b)|0;if(u){v=u;l=110;break}s[t+(a*20|0)+292>>2]=(s[b>>2]|0)+1;u=s[g>>2]|0}if((u|0)==2){u=Xt(e,b)|0;if(u){v=u;l=110;break}s[t+(a*20|0)+296>>2]=s[b>>2];u=s[g>>2]|0}if((u|0)==3|(u|0)==6){u=Xt(e,b)|0;if(u){v=u;l=110;break}s[t+(a*20|0)+300>>2]=s[b>>2];u=s[g>>2]|0}if((u|0)==4){u=Xt(e,b)|0;if(u){v=u;l=110;break}u=s[b>>2]|0;if(u>>>0>h>>>0){v=1;l=110;break}if(!u)s[t+(a*20|0)+304>>2]=65535;else s[t+(a*20|0)+304>>2]=u+-1;u=s[g>>2]|0;m=o+1|0}else m=o;c=((u|0)==5&1)+c|0;n=((u|0)!=0&u>>>0<4&1)+n|0;p=((u|0)==6&1)+p|0;if(!u){l=90;break}else{a=a+1|0;o=m}}if((l|0)==90){if(m>>>0>1|c>>>0>1|p>>>0>1){r=1;d=C;return r|0}if((n|0)!=0&(c|0)!=0)v=1;else break;d=C;return v|0}else if((l|0)==110){d=C;return v|0}}}while(0);o=Qt(e,y)|0;if(o){r=o;d=C;return r|0}r=s[y>>2]|0;s[t+48>>2]=r;r=r+(s[i+52>>2]|0)|0;s[y>>2]=r;if(r>>>0>51){r=1;d=C;return r|0}do if(s[i+60>>2]|0){o=Xt(e,_)|0;if(o){r=o;d=C;return r|0}o=s[_>>2]|0;s[t+52>>2]=o;if(o>>>0>2){r=1;d=C;return r|0}if((o|0)==1)break;o=Qt(e,y)|0;if(o){r=o;d=C;return r|0}o=s[y>>2]|0;if((o+6|0)>>>0>12){r=1;d=C;return r|0}s[t+56>>2]=o<<1;o=Qt(e,y)|0;if(o){r=o;d=C;return r|0}o=s[y>>2]|0;if((o+6|0)>>>0>12){r=1;d=C;return r|0}else{s[t+60>>2]=o<<1;break}}while(0);do if((s[i+12>>2]|0)>>>0>1?((s[i+16>>2]|0)+-3|0)>>>0<3:0){u=i+36|0;l=s[u>>2]|0;l=(((w>>>0)%(l>>>0)|0|0)==0?1:2)+((w>>>0)/(l>>>0)|0)|0;a=0;while(1){o=a+1|0;if(!(-1<<o&l))break;else a=o}o=Wt(e,((1<<a)+-1&l|0)==0?a:o)|0;s[_>>2]=o;if((o|0)==-1){r=1;d=C;return r|0}s[t+64>>2]=o;r=s[u>>2]|0;if(o>>>0>(((w+-1+r|0)>>>0)/(r>>>0)|0)>>>0)v=1;else break;d=C;return v|0}while(0);r=0;d=C;return r|0}function Rt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=d;d=d+32|0;i=r+20|0;n=r;s[n+0>>2]=s[e+0>>2];s[n+4>>2]=s[e+4>>2];s[n+8>>2]=s[e+8>>2];s[n+12>>2]=s[e+12>>2];s[n+16>>2]=s[e+16>>2];e=Xt(n,i)|0;if(!e){e=Xt(n,i)|0;if(!e){e=Xt(n,i)|0;if(!e){e=s[i>>2]|0;if(e>>>0>255)e=1;else{s[t>>2]=e;e=0}}}}d=r;return e|0}function Dt(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0;o=d;d=d+32|0;i=o+20|0;r=o;s[r+0>>2]=s[e+0>>2];s[r+4>>2]=s[e+4>>2];s[r+8>>2]=s[e+8>>2];s[r+12>>2]=s[e+12>>2];s[r+16>>2]=s[e+16>>2];e=Xt(r,i)|0;if(e){d=o;return e|0}e=Xt(r,i)|0;if(e){d=o;return e|0}e=Xt(r,i)|0;if(!e)e=0;else{d=o;return e|0}while(1)if(!(t>>>e))break;else e=e+1|0;e=Wt(r,e+-1|0)|0;if((e|0)==-1){e=1;d=o;return e|0}s[n>>2]=e;e=0;d=o;return e|0}function At(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0;a=d;d=d+32|0;r=a+20|0;o=a;if((n|0)!=5){n=1;d=a;return n|0}s[o+0>>2]=s[e+0>>2];s[o+4>>2]=s[e+4>>2];s[o+8>>2]=s[e+8>>2];s[o+12>>2]=s[e+12>>2];s[o+16>>2]=s[e+16>>2];n=Xt(o,r)|0;if(n){d=a;return n|0}n=Xt(o,r)|0;if(n){d=a;return n|0}n=Xt(o,r)|0;if(!n)n=0;else{d=a;return n|0}while(1)if(!(t>>>n))break;else n=n+1|0;if((Wt(o,n+-1|0)|0)==-1){n=1;d=a;return n|0}n=Xt(o,i)|0;d=a;return n|0}function Pt(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0;u=d;d=d+32|0;a=u+20|0;l=u;s[l+0>>2]=s[e+0>>2];s[l+4>>2]=s[e+4>>2];s[l+8>>2]=s[e+8>>2];s[l+12>>2]=s[e+12>>2];s[l+16>>2]=s[e+16>>2];e=Xt(l,a)|0;if(e){r=e;d=u;return r|0}e=Xt(l,a)|0;if(e){r=e;d=u;return r|0}e=Xt(l,a)|0;if(e){r=e;d=u;return r|0}e=s[t+12>>2]|0;r=0;while(1)if(!(e>>>r))break;else r=r+1|0;if((Wt(l,r+-1|0)|0)==-1){r=1;d=u;return r|0}if((n|0)==5?(o=Xt(l,a)|0,(o|0)!=0):0){r=o;d=u;return r|0}r=s[t+20>>2]|0;e=0;while(1)if(!(r>>>e))break;else e=e+1|0;r=Wt(l,e+-1|0)|0;if((r|0)==-1){r=1;d=u;return r|0}s[i>>2]=r;r=0;d=u;return r|0}function It(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0;u=d;d=d+32|0;a=u+20|0;l=u;s[l+0>>2]=s[e+0>>2];s[l+4>>2]=s[e+4>>2];s[l+8>>2]=s[e+8>>2];s[l+12>>2]=s[e+12>>2];s[l+16>>2]=s[e+16>>2];e=Xt(l,a)|0;if(e){r=e;d=u;return r|0}e=Xt(l,a)|0;if(e){r=e;d=u;return r|0}e=Xt(l,a)|0;if(e){r=e;d=u;return r|0}e=s[t+12>>2]|0;r=0;while(1)if(!(e>>>r))break;else r=r+1|0;if((Wt(l,r+-1|0)|0)==-1){r=1;d=u;return r|0}if((n|0)==5?(o=Xt(l,a)|0,(o|0)!=0):0){r=o;d=u;return r|0}r=s[t+20>>2]|0;e=0;while(1)if(!(r>>>e))break;else e=e+1|0;if((Wt(l,e+-1|0)|0)==-1){r=1;d=u;return r|0}r=Qt(l,i)|0;d=u;return r|0}function Mt(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,a=0,l=0,u=0,c=0,p=0;p=d;d=d+32|0;l=p+20|0;c=p;s[c+0>>2]=s[e+0>>2];s[c+4>>2]=s[e+4>>2];s[c+8>>2]=s[e+8>>2];s[c+12>>2]=s[e+12>>2];s[c+16>>2]=s[e+16>>2];o=Xt(c,l)|0;if(o){c=o;d=p;return c|0}o=Xt(c,l)|0;if(o){c=o;d=p;return c|0}o=Xt(c,l)|0;if(o){c=o;d=p;return c|0}o=s[t+12>>2]|0;e=0;while(1)if(!(o>>>e))break;else e=e+1|0;if((Wt(c,e+-1|0)|0)==-1){c=1;d=p;return c|0}if((n|0)==5?(a=Xt(c,l)|0,(a|0)!=0):0){c=a;d=p;return c|0}o=Qt(c,r)|0;if(o){c=o;d=p;return c|0}if((i|0)!=0?(u=Qt(c,r+4|0)|0,(u|0)!=0):0){c=u;d=p;return c|0}c=0;d=p;return c|0}function Ot(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0;p=d;d=d+32|0;c=p+24|0;l=p+20|0;u=p;s[u+0>>2]=s[t+0>>2];s[u+4>>2]=s[t+4>>2];s[u+8>>2]=s[t+8>>2];s[u+12>>2]=s[t+12>>2];s[u+16>>2]=s[t+16>>2];r=Xt(u,c)|0;if(r){h=r;d=p;return h|0}r=Xt(u,c)|0;if(r){h=r;d=p;return h|0}r=Xt(u,c)|0;if(r){h=r;d=p;return h|0}r=s[n+12>>2]|0;t=0;while(1)if(!(r>>>t))break;else t=t+1|0;if((Wt(u,t+-1|0)|0)==-1){h=1;d=p;return h|0}r=Xt(u,c)|0;if(r){h=r;d=p;return h|0}o=n+16|0;r=s[o>>2]|0;if(!r){t=s[n+20>>2]|0;r=0;while(1)if(!(t>>>r))break;else r=r+1|0;if((Wt(u,r+-1|0)|0)==-1){h=1;d=p;return h|0}if((s[i+8>>2]|0)!=0?(a=Qt(u,l)|0,(a|0)!=0):0){h=a;d=p;return h|0}r=s[o>>2]|0}if((r|0)==1?(s[n+24>>2]|0)==0:0){r=Qt(u,l)|0;if(r){h=r;d=p;return h|0}if((s[i+8>>2]|0)!=0?(h=Qt(u,l)|0,(h|0)!=0):0){d=p;return h|0}}if((s[i+68>>2]|0)!=0?(f=Xt(u,c)|0,(f|0)!=0):0){h=f;d=p;return h|0}h=Wt(u,1)|0;s[e>>2]=h;h=(h|0)==-1&1;d=p;return h|0}function Nt(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0;R=d;d=d+448|0;m=R+8|0;S=R+4|0;_=R;m=m+(0-m&15)|0;h=s[t+3376>>2]|0;l=s[i>>2]|0;s[S>>2]=0;E=t+1192|0;s[E>>2]=(s[E>>2]|0)+1;g=t+1200|0;s[g>>2]=0;f=t+12|0;s[_>>2]=(s[i+48>>2]|0)+(s[(s[f>>2]|0)+52>>2]|0);C=i+36|0;v=t+1212|0;b=i+52|0;y=i+56|0;w=i+60|0;T=i+4|0;c=i+44|0;a=t+1220|0;p=t+1172|0;k=t+1176|0;u=h+12|0;x=0;r=0;while(1){i=s[v>>2]|0;if((s[C>>2]|0)==0?(s[i+(l*216|0)+196>>2]|0)!=0:0){r=1;i=22;break}o=s[(s[f>>2]|0)+56>>2]|0;P=s[b>>2]|0;A=s[y>>2]|0;D=s[w>>2]|0;s[i+(l*216|0)+4>>2]=s[E>>2];s[i+(l*216|0)+8>>2]=P;s[i+(l*216|0)+12>>2]=A;s[i+(l*216|0)+16>>2]=D;s[i+(l*216|0)+24>>2]=o;i=s[T>>2]|0;if((i|0)!=2?!((i|0)==7|(r|0)!=0):0){r=Xt(e,S)|0;if(r){i=22;break}i=s[S>>2]|0;if(i>>>0>((s[k>>2]|0)-l|0)>>>0){r=1;i=22;break}if(!i)r=0;else{di(u,0,164);s[h>>2]=0;r=1}}i=s[S>>2]|0;if(!i){r=Ft(e,h,(s[v>>2]|0)+(l*216|0)|0,s[T>>2]|0,s[c>>2]|0)|0;if(!r)o=0;else{i=22;break}}else{s[S>>2]=i+-1;o=r}r=Ht((s[v>>2]|0)+(l*216|0)|0,h,n,a,_,l,s[(s[f>>2]|0)+64>>2]|0,m)|0;if(r){i=22;break}x=((s[(s[v>>2]|0)+(l*216|0)+196>>2]|0)==1&1)+x|0;if(!(yt(e)|0))i=(s[S>>2]|0)!=0;else i=1;r=s[T>>2]|0;if((r|0)==7|(r|0)==2)s[g>>2]=l;l=wt(s[p>>2]|0,s[k>>2]|0,l)|0;if(!((l|0)!=0|i^1)){r=1;i=22;break}if(!i){i=20;break}else r=o}if((i|0)==20){i=t+1196|0;r=(s[i>>2]|0)+x|0;if(r>>>0>(s[k>>2]|0)>>>0){E=1;d=R;return E|0}s[i>>2]=r;E=0;d=R;return E|0}else if((i|0)==22){d=R;return r|0}return 0}function Lt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0,u=0;u=d;a=s[e+1192>>2]|0;n=s[e+1200>>2]|0;l=e+1212|0;e:do if(!n)n=t;else{i=e+16|0;r=0;do{do{n=n+-1|0;if(n>>>0<=t>>>0)break e}while((s[(s[l>>2]|0)+(n*216|0)+4>>2]|0)!=(a|0));r=r+1|0;o=s[(s[i>>2]|0)+52>>2]|0}while(r>>>0<(o>>>0>10?o:10)>>>0);
}while(0);o=e+1172|0;t=e+1176|0;while(1){i=s[l>>2]|0;if((s[i+(n*216|0)+4>>2]|0)!=(a|0)){n=11;break}r=i+(n*216|0)+196|0;i=s[r>>2]|0;if(!i){n=11;break}s[r>>2]=i+-1;n=wt(s[o>>2]|0,s[t>>2]|0,n)|0;if(!n){n=11;break}}if((n|0)==11){d=u;return}}function Ft(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0;k=d;d=d+32|0;w=k+20|0;_=k+16|0;g=k+12|0;m=k+8|0;T=k+4|0;E=k;di(t,0,2088);c=Xt(e,T)|0;p=s[T>>2]|0;do if((i|0)==2|(i|0)==7){p=p+6|0;if(p>>>0>31|(c|0)!=0){n=1;d=k;return n|0}else{s[t>>2]=p;f=p;break}}else{p=p+1|0;if(p>>>0>31|(c|0)!=0){n=1;d=k;return n|0}else{s[t>>2]=p;f=p;break}}while(0);e:do if((f|0)!=31){t:do if(f>>>0>=6){f=(f|0)!=6;m=f&1;if((m|0)==1)y=52;else if(!m){s[_>>2]=0;g=0;while(1){i=zt(e)|0;s[w>>2]=i;y=i>>>31;s[t+(g<<2)+12>>2]=y;if(!y){s[t+(g<<2)+76>>2]=i>>>28&7;p=i<<4;h=1}else{p=i<<1;h=0}i=g|1;y=p>>>31;s[t+(i<<2)+12>>2]=y;if(!y){s[t+(i<<2)+76>>2]=p>>>28&7;c=p<<4;h=h+1|0}else c=p<<1;p=i+1|0;y=c>>>31;s[t+(p<<2)+12>>2]=y;if(!y){s[t+(p<<2)+76>>2]=c>>>28&7;p=c<<4;h=h+1|0}else p=c<<1;c=g|3;y=p>>>31;s[t+(c<<2)+12>>2]=y;if(!y){s[t+(c<<2)+76>>2]=p>>>28&7;i=p<<4;h=h+1|0}else i=p<<1;p=c+1|0;y=i>>>31;s[t+(p<<2)+12>>2]=y;if(!y){s[t+(p<<2)+76>>2]=i>>>28&7;i=i<<4;h=h+1|0}else i=i<<1;p=c+2|0;y=i>>>31;s[t+(p<<2)+12>>2]=y;if(!y){s[t+(p<<2)+76>>2]=i>>>28&7;i=i<<4;h=h+1|0}else i=i<<1;p=c+3|0;y=i>>>31;s[t+(p<<2)+12>>2]=y;if(!y){s[t+(p<<2)+76>>2]=i>>>28&7;i=i<<4;h=h+1|0}else i=i<<1;p=g|7;y=i>>>31;s[t+(p<<2)+12>>2]=y;if(!y){s[t+(p<<2)+76>>2]=i>>>28&7;p=i<<4;h=h+1|0}else p=i<<1;s[w>>2]=p;if((Kt(e,(h*3|0)+8|0)|0)==-1){C=1;y=68;break t}y=(s[_>>2]|0)+1|0;s[_>>2]=y;if((y|0)<2)g=g+8|0;else{y=52;break}}}if((y|0)==52){_=(Xt(e,w)|0)!=0;c=s[w>>2]|0;if(_|c>>>0>3){C=1;y=68;break}s[t+140>>2]=c}if(f){_=s[t>>2]|0;b=_+-7|0;w=b>>>2;s[t+4>>2]=(b>>>0>11?w+268435453|0:w)<<4|(_>>>0>18?15:0)}else{S=m;y=70}}else{if((f|0)==0|(f|0)==1){v=_;b=w}else if(!((f|0)==3|(f|0)==2)){i=0;do{c=(Xt(e,g)|0)!=0;p=s[g>>2]|0;if(c|p>>>0>3){h=1;y=96;break}s[t+(i<<2)+176>>2]=p;i=i+1|0}while(i>>>0<4);if((y|0)==96){d=k;return h|0}n:do if(o>>>0>1&(f|0)!=5){p=o>>>0>2&1;i=0;while(1){if(Jt(e,g,p)|0){h=1;y=96;break}h=s[g>>2]|0;if(h>>>0>=o>>>0){h=1;y=96;break}s[t+(i<<2)+192>>2]=h;i=i+1|0;if(i>>>0>=4){a=0;break n}}if((y|0)==96){d=k;return h|0}}else a=0;while(0);n:while(1){h=s[t+(a<<2)+176>>2]|0;if((h|0)==2|(h|0)==1)h=1;else if(!h)h=0;else h=3;s[g>>2]=h;p=0;while(1){h=Qt(e,m)|0;if(h){y=96;break n}r[t+(a<<4)+(p<<2)+208>>1]=s[m>>2];h=Qt(e,m)|0;if(h){y=96;break n}r[t+(a<<4)+(p<<2)+210>>1]=s[m>>2];y=s[g>>2]|0;s[g>>2]=y+-1;if(!y)break;else p=p+1|0}a=a+1|0;if(a>>>0>=4){S=2;y=70;break t}}if((y|0)==96){d=k;return h|0}}else{v=_;b=w}if(o>>>0>1){if((f|0)==3|(f|0)==2)h=1;else if((f|0)==0|(f|0)==1)h=0;else h=3;c=o>>>0>2&1;i=0;while(1){if(Jt(e,w,c)|0){C=1;y=68;break t}p=s[w>>2]|0;if(p>>>0>=o>>>0){C=1;y=68;break t}s[t+(i<<2)+144>>2]=p;if(!h)break;else{h=h+-1|0;i=i+1|0}}}if((f|0)==0|(f|0)==1){c=0;p=0}else if((f|0)==3|(f|0)==2){c=1;p=0}else{c=3;p=0}while(1){i=Qt(e,_)|0;if(i){C=i;y=68;break t}r[t+(p<<2)+160>>1]=s[_>>2];i=Qt(e,_)|0;if(i){C=i;y=68;break t}r[t+(p<<2)+162>>1]=s[_>>2];if(!c){S=2;y=70;break}else{c=c+-1|0;p=p+1|0}}}while(0);if((y|0)==68){n=C;d=k;return n|0}do if((y|0)==70){a=$t(e,T,(S|0)==0&1)|0;if(!a){T=s[T>>2]|0;s[t+4>>2]=T;if(!T)break e;else break}else{n=a;d=k;return n|0}}while(0);T=(Qt(e,E)|0)!=0;a=s[E>>2]|0;if(T|(a|0)<-26|(a|0)>25){n=1;d=k;return n|0}s[t+8>>2]=a;c=s[t+4>>2]|0;f=t+272|0;t:do if((s[t>>2]|0)>>>0>=7){a=Zt(e,t+1864|0,qt(n,0,f)|0,16)|0;if(!(a&15)){r[t+320>>1]=a>>>4&255;a=0;p=3;while(1){h=c>>>1;if(!(c&1))a=a+4|0;else{i=3;while(1){c=Zt(e,t+(a<<6)+332|0,qt(n,a,f)|0,15)|0;s[t+(a<<2)+1992>>2]=c>>>15;if(c&15){l=c;break t}r[t+(a<<1)+272>>1]=c>>>4&255;a=a+1|0;if(!i)break;else i=i+-1|0}}if(!p){u=a;x=h;y=87;break}else{c=h;p=p+-1|0}}}else l=a}else{a=0;p=3;while(1){h=c>>>1;if(!(c&1))a=a+4|0;else{i=3;while(1){c=Zt(e,t+(a<<6)+328|0,qt(n,a,f)|0,16)|0;s[t+(a<<2)+1992>>2]=c>>>16;if(c&15){l=c;break t}r[t+(a<<1)+272>>1]=c>>>4&255;a=a+1|0;if(!i)break;else i=i+-1|0}}if(!p){u=a;x=h;y=87;break}else{c=h;p=p+-1|0}}}while(0);t:do if((y|0)==87){if(x&3){l=Zt(e,t+1928|0,-1,4)|0;if(l&15)break;r[t+322>>1]=l>>>4&255;l=Zt(e,t+1944|0,-1,4)|0;if(l&15)break;r[t+324>>1]=l>>>4&255}if(!(x&2))l=0;else{a=7;while(1){l=Zt(e,t+(u<<6)+332|0,qt(n,u,f)|0,15)|0;if(l&15)break t;r[t+(u<<1)+272>>1]=l>>>4&255;s[t+(u<<2)+1992>>2]=l>>>15;if(!a){l=0;break}else{u=u+1|0;a=a+-1|0}}}}while(0);s[e+16>>2]=((s[e+4>>2]|0)-(s[e>>2]|0)<<3)+(s[e+8>>2]|0);if(l){n=l;d=k;return n|0}}else{while(1){if(Yt(e)|0)break;if(Wt(e,1)|0){h=1;y=96;break}}if((y|0)==96){d=k;return h|0}u=0;l=t+328|0;while(1){a=Wt(e,8)|0;s[T>>2]=a;if((a|0)==-1){h=1;break}s[l>>2]=a;u=u+1|0;if(u>>>0>=384)break e;else l=l+4|0}d=k;return h|0}while(0);n=0;d=k;return n|0}function Vt(e){e=e|0;if(e>>>0<6)e=2;else e=(e|0)!=6&1;return e|0}function Bt(e){e=e|0;var t=0;t=d;if((e|0)==0|(e|0)==1)e=1;else if((e|0)==3|(e|0)==2)e=2;else e=4;d=t;return e|0}function Ut(e){e=e|0;var t=0;t=d;if((e|0)==2|(e|0)==1)e=2;else if(!e)e=1;else e=4;d=t;return e|0}function jt(e){e=e|0;return e+1&3|0}function Ht(e,t,n,o,a,l,u,c){e=e|0;t=t|0;n=n|0;o=o|0;a=a|0;l=l|0;u=u|0;c=c|0;var p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0;_=d;b=s[t>>2]|0;s[e>>2]=b;f=e+196|0;s[f>>2]=(s[f>>2]|0)+1;_t(n,l);if((b|0)==31){p=e+28|0;s[e+20>>2]=0;if((s[f>>2]|0)>>>0>1){r[p>>1]=16;r[e+30>>1]=16;r[e+32>>1]=16;r[e+34>>1]=16;r[e+36>>1]=16;r[e+38>>1]=16;r[e+40>>1]=16;r[e+42>>1]=16;r[e+44>>1]=16;r[e+46>>1]=16;r[e+48>>1]=16;r[e+50>>1]=16;r[e+52>>1]=16;r[e+54>>1]=16;r[e+56>>1]=16;r[e+58>>1]=16;r[e+60>>1]=16;r[e+62>>1]=16;r[e+64>>1]=16;r[e+66>>1]=16;r[e+68>>1]=16;r[e+70>>1]=16;r[e+72>>1]=16;r[e+74>>1]=16;y=0;d=_;return y|0}f=23;a=t+328|0;h=c;while(1){r[p>>1]=16;i[h>>0]=s[a>>2];i[h+1>>0]=s[a+4>>2];i[h+2>>0]=s[a+8>>2];i[h+3>>0]=s[a+12>>2];i[h+4>>0]=s[a+16>>2];i[h+5>>0]=s[a+20>>2];i[h+6>>0]=s[a+24>>2];i[h+7>>0]=s[a+28>>2];i[h+8>>0]=s[a+32>>2];i[h+9>>0]=s[a+36>>2];i[h+10>>0]=s[a+40>>2];i[h+11>>0]=s[a+44>>2];i[h+12>>0]=s[a+48>>2];i[h+13>>0]=s[a+52>>2];i[h+14>>0]=s[a+56>>2];i[h+15>>0]=s[a+60>>2];if(!f)break;else{f=f+-1|0;a=a+64|0;h=h+16|0;p=p+2|0}}et(n,c);y=0;d=_;return y|0}p=e+28|0;if(b){ci(p,t+272|0,54);h=s[t+8>>2]|0;f=s[a>>2]|0;do if(h){f=f+h|0;s[a>>2]=f;if((f|0)<0){f=f+52|0;s[a>>2]=f;break}if((f|0)>51){f=f+-52|0;s[a>>2]=f}}while(0);v=e+20|0;s[v>>2]=f;h=t+328|0;a=t+1992|0;e:do if((s[e>>2]|0)>>>0<7){g=15;f=p;while(1){if(r[f>>1]|0){if(ft(h,s[v>>2]|0,0,s[a>>2]|0)|0){p=1;break}}else s[h>>2]=16777215;h=h+64|0;f=f+2|0;a=a+4|0;if(!g)break e;else g=g+-1|0}d=_;return p|0}else{if(!(r[e+76>>1]|0)){g=464;m=15;f=p}else{mt(t+1864|0,f);g=464;m=15;f=p}while(1){p=s[t+(s[g>>2]<<2)+1864>>2]|0;g=g+4|0;s[h>>2]=p;if((p|0)==0?(r[f>>1]|0)==0:0)s[h>>2]=16777215;else w=18;if((w|0)==18?(w=0,(ft(h,s[v>>2]|0,1,s[a>>2]|0)|0)!=0):0){p=1;break}h=h+64|0;f=f+2|0;a=a+4|0;if(!m)break e;else m=m+-1|0}d=_;return p|0}while(0);g=s[192+((Ct(0,51,(s[e+24>>2]|0)+(s[v>>2]|0)|0)|0)<<2)>>2]|0;if((r[e+78>>1]|0)==0?(r[e+80>>1]|0)==0:0){m=t+1928|0;p=7}else{m=t+1928|0;gt(m,g);p=7}while(1){v=s[m>>2]|0;m=m+4|0;s[h>>2]=v;if((v|0)==0?(r[f>>1]|0)==0:0)s[h>>2]=16777215;else w=31;if((w|0)==31?(w=0,(ft(h,g,1,s[a>>2]|0)|0)!=0):0){p=1;w=39;break}if(!p)break;else{h=h+64|0;a=a+4|0;p=p+-1|0;f=f+2|0}}if((w|0)==39){d=_;return p|0}if(b>>>0>=6){f=_n(e,t,n,l,u,c)|0;if(f){y=f;d=_;return y|0}}else w=37}else{di(p,0,54);s[e+20>>2]=s[a>>2];w=37}if((w|0)==37?(y=xe(e,t,o,l,n,c)|0,(y|0)!=0):0){d=_;return y|0}y=0;d=_;return y|0}function Gt(e){e=e|0;return e|0}function qt(e,t,n){e=e|0;t=t|0;n=n|0;var o=0,a=0,l=0,u=0,c=0;u=d;c=rn(t)|0;o=sn(t)|0;a=i[c+4>>0]|0;l=i[o+4>>0]|0;o=(s[o>>2]|0)==4;if((s[c>>2]|0)==4){t=r[n+((a&255)<<1)>>1]|0;if(o){t=t+1+(r[n+((l&255)<<1)>>1]|0)>>1;d=u;return t|0}o=e+204|0;if(!(ln(e,s[o>>2]|0)|0)){d=u;return t|0}t=t+1+(r[(s[o>>2]|0)+((l&255)<<1)+28>>1]|0)>>1;d=u;return t|0}if(o){t=r[n+((l&255)<<1)>>1]|0;o=e+200|0;if(!(ln(e,s[o>>2]|0)|0)){d=u;return t|0}t=t+1+(r[(s[o>>2]|0)+((a&255)<<1)+28>>1]|0)>>1;d=u;return t|0}o=e+200|0;if(!(ln(e,s[o>>2]|0)|0)){a=0;n=0}else{a=r[(s[o>>2]|0)+((a&255)<<1)+28>>1]|0;n=1}o=e+204|0;if(!(ln(e,s[o>>2]|0)|0)){t=a;d=u;return t|0}t=r[(s[o>>2]|0)+((l&255)<<1)+28>>1]|0;if(!n){d=u;return t|0}t=a+1+t>>1;d=u;return t|0}function Wt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0;m=d;h=e+4|0;l=s[h>>2]|0;p=s[e+12>>2]<<3;f=e+16|0;c=s[f>>2]|0;r=p-c|0;if((r|0)>31){n=e+8|0;r=s[n>>2]|0;i=(o[l+1>>0]|0)<<16|(o[l>>0]|0)<<24|(o[l+2>>0]|0)<<8|(o[l+3>>0]|0);if(!r)a=n;else{a=n;i=(o[l+4>>0]|0)>>>(8-r|0)|i<<r}}else{a=e+8|0;if((r|0)>0){n=s[a>>2]|0;u=n+24|0;i=(o[l>>0]|0)<<u;r=r+-8+n|0;if((r|0)>0){n=r;r=u;do{l=l+1|0;r=r+-8|0;i=(o[l>>0]|0)<<r|i;n=n+-8|0}while((n|0)>0)}}else i=0}n=c+t|0;s[f>>2]=n;s[a>>2]=n&7;if(n>>>0>p>>>0){h=-1;d=m;return h|0}s[h>>2]=(s[e>>2]|0)+(n>>>3);h=i>>>(32-t|0);d=m;return h|0}function zt(e){e=e|0;var t=0,n=0,i=0,r=0,a=0;r=d;i=s[e+4>>2]|0;n=(s[e+12>>2]<<3)-(s[e+16>>2]|0)|0;if((n|0)>31){t=s[e+8>>2]|0;e=(o[i+1>>0]|0)<<16|(o[i>>0]|0)<<24|(o[i+2>>0]|0)<<8|(o[i+3>>0]|0);if(!t){t=e;d=r;return t|0}t=(o[i+4>>0]|0)>>>(8-t|0)|e<<t;d=r;return t|0}if((n|0)<=0){t=0;d=r;return t|0}a=s[e+8>>2]|0;e=a+24|0;t=(o[i>>0]|0)<<e;n=n+-8+a|0;if((n|0)<=0){d=r;return t|0}do{i=i+1|0;e=e+-8|0;t=(o[i>>0]|0)<<e|t;n=n+-8|0}while((n|0)>0);d=r;return t|0}function Kt(e,t){e=e|0;t=t|0;var n=0,i=0;n=d;i=e+16|0;t=(s[i>>2]|0)+t|0;s[i>>2]=t;s[e+8>>2]=t&7;if(t>>>0>s[e+12>>2]<<3>>>0){t=-1;d=n;return t|0}s[e+4>>2]=(s[e>>2]|0)+(t>>>3);t=0;d=n;return t|0}function Yt(e){e=e|0;return(s[e+8>>2]|0)==0|0}function Xt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0;o=d;n=zt(e)|0;do if((n|0)>=0){if(n>>>0>1073741823){if((Kt(e,3)|0)==-1){n=1;break}s[t>>2]=(n>>>29&1)+1;n=0;break}if(n>>>0>536870911){if((Kt(e,5)|0)==-1){n=1;break}s[t>>2]=(n>>>27&3)+3;n=0;break}if(n>>>0>268435455){if((Kt(e,7)|0)==-1){n=1;break}s[t>>2]=(n>>>25&7)+7;n=0;break}n=vt(n,28)|0;i=n+4|0;if((i|0)!=32){Kt(e,n+5|0)|0;n=Wt(e,i)|0;if((n|0)==-1){n=1;break}s[t>>2]=(1<<i)+-1+n;n=0;break}s[t>>2]=0;Kt(e,32)|0;if((Wt(e,1)|0)==1?(r=zt(e)|0,(Kt(e,32)|0)!=-1):0)if((r|0)==1){s[t>>2]=-1;n=1;break}else if(!r){s[t>>2]=-1;n=0;break}else{n=1;break}else n=1}else{Kt(e,1)|0;s[t>>2]=0;n=0}while(0);d=o;return n|0}function Qt(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;i=d;d=d+16|0;r=i;s[r>>2]=0;n=Xt(e,r)|0;e=s[r>>2]|0;n=(n|0)==0;if((e|0)==-1)if(n)e=1;else{s[t>>2]=-2147483648;e=0}else if(n){n=(e+1|0)>>>1;s[t>>2]=(e&1|0)!=0?n:0-n|0;e=0}else e=1;d=i;return e|0}function $t(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;r=d;d=d+16|0;i=r;if(Xt(e,i)|0){i=1;d=r;return i|0}i=s[i>>2]|0;if(i>>>0>47){i=1;d=r;return i|0}s[t>>2]=o[((n|0)==0?576:528)+i>>0];i=0;d=r;return i|0}function Jt(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=d;if(!n){n=Wt(e,1)|0;s[t>>2]=n;if((n|0)==-1)n=1;else{s[t>>2]=n^1;n=0}}else n=Xt(e,t)|0;d=i;return n|0}function Zt(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0,V=0,B=0,U=0;U=d;d=d+128|0;V=U+64|0;B=U;h=zt(e)|0;m=h>>>16;do if(n>>>0<2)if((h|0)>=0){if(h>>>0>201326591){f=a[1264+(h>>>26<<1)>>1]|0;u=25;break}if(h>>>0>16777215){f=a[1328+(h>>>22<<1)>>1]|0;u=25;break}if(h>>>0>2097151){f=a[1424+((h>>>18)+-8<<1)>>1]|0;u=25;break}else{f=a[1536+(m<<1)>>1]|0;u=25;break}}else g=1;else if(n>>>0<4){if((h|0)<0){g=(m&16384|0)!=0?2:2082;break}if(h>>>0>268435455){f=a[1600+(h>>>26<<1)>>1]|0;u=25;break}if(h>>>0>33554431){f=a[1664+(h>>>23<<1)>>1]|0;u=25;break}else{f=a[1728+(h>>>18<<1)>>1]|0;u=25;break}}else{if(n>>>0<8){n=h>>>26;if((n+-8|0)>>>0<56){f=a[1984+(n<<1)>>1]|0;u=25;break}f=a[2112+(h>>>22<<1)>>1]|0;u=25;break}if(n>>>0<17){f=a[2368+(h>>>26<<1)>>1]|0;u=25;break}n=h>>>29;if(n){f=a[2496+(n<<1)>>1]|0;u=25;break}f=a[2512+(h>>>24<<1)>>1]|0;u=25;break}while(0);if((u|0)==25)if(!f){R=1;d=U;return R|0}else g=f;f=g&31;n=h<<f;m=32-f|0;O=g>>>11&31;if(O>>>0>i>>>0){R=1;d=U;return R|0}_=g>>>5&63;do if(O){if(!_)f=0;else{do if(m>>>0<_>>>0)if((Kt(e,f)|0)==-1){R=1;d=U;return R|0}else{m=32;n=zt(e)|0;break}while(0);h=n>>>(32-_|0);n=n<<_;u=0;f=1<<_+-1;do{s[V+(u<<2)>>2]=(f&h|0)!=0?-1:1;f=f>>>1;u=u+1|0}while((f|0)!=0);m=m-_|0;f=u}w=_>>>0<3;e:do if(f>>>0<O>>>0){y=f;b=O>>>0>10&w&1;t:while(1){if(m>>>0<16){if((Kt(e,32-m|0)|0)==-1){N=1;u=127;break}v=32;n=zt(e)|0}else v=m;do if((n|0)>=0)if(n>>>0<=1073741823)if(n>>>0<=536870911)if(n>>>0<=268435455)if(n>>>0<=134217727)if(n>>>0<=67108863)if(n>>>0<=33554431)if(n>>>0<=16777215)if(n>>>0<=8388607)if(n>>>0>4194303){M=9;u=59}else{if(n>>>0>2097151){M=10;u=59;break}if(n>>>0>1048575){M=11;u=59;break}if(n>>>0>524287){M=12;u=59;break}if(n>>>0>262143){M=13;u=59;break}if(n>>>0>131071){m=14;f=n<<15;h=v+-15|0;g=b;u=(b|0)!=0?b:4}else{if(n>>>0<65536){N=1;u=127;break t}m=15;f=n<<16;h=v+-16|0;g=(b|0)!=0?b:1;u=12}I=m<<g;k=f;E=h;T=g;S=u;C=(g|0)==0;u=60}else{M=8;u=59}else{M=7;u=59}else{M=6;u=59}else{M=5;u=59}else{M=4;u=59}else{M=3;u=59}else{M=2;u=59}else{M=1;u=59}else{M=0;u=59}while(0);if((u|0)==59){u=0;m=M+1|0;f=n<<m;m=v-m|0;n=M<<b;if(!b){A=m;P=f;x=n;R=0;D=1}else{I=n;k=f;E=m;T=b;S=b;C=0;u=60}}if((u|0)==60){if(E>>>0<S>>>0){if((Kt(e,32-E|0)|0)==-1){N=1;u=127;break}f=32;n=zt(e)|0}else{f=E;n=k}A=f-S|0;P=n<<S;x=(n>>>(32-S|0))+I|0;R=T;D=C}b=(y|0)==(_|0)&w?x+2|0:x;f=(b+2|0)>>>1;h=D?1:R;s[V+(y<<2)>>2]=(b&1|0)==0?f:0-f|0;y=y+1|0;if(y>>>0>=O>>>0){c=A;p=P;break e}else{m=A;n=P;b=((f|0)>(3<<h+-1|0)&h>>>0<6&1)+h|0}}if((u|0)==127){d=U;return N|0}}else{c=m;p=n}while(0);if(O>>>0<i>>>0){do if(c>>>0<9)if((Kt(e,32-c|0)|0)==-1){R=1;d=U;return R|0}else{c=32;p=zt(e)|0;break}while(0);u=p>>>23;e:do if((i|0)==4)if((p|0)>=0)if((O|0)!=3)if(p>>>0<=1073741823)if((O|0)==2)u=34;else u=p>>>0>536870911?35:51;else u=18;else u=17;else u=1;else{do switch(O|0){case 12:{u=o[1232+(p>>>28)>>0]|0;break}case 13:{u=o[1248+(p>>>29)>>0]|0;break}case 6:{u=o[928+(p>>>26)>>0]|0;break}case 5:{u=o[896+(p>>>27)>>0]|0;break}case 2:{u=o[736+(p>>>26)>>0]|0;break}case 9:{u=o[1120+(p>>>26)>>0]|0;break}case 10:{u=o[1184+(p>>>27)>>0]|0;break}case 11:{u=o[1216+(p>>>28)>>0]|0;break}case 14:{u=o[1256+(p>>>30)>>0]|0;break}case 7:{u=o[992+(p>>>26)>>0]|0;break}case 8:{u=o[1056+(p>>>26)>>0]|0;break}case 1:{if(p>>>0>268435455)u=o[672+(p>>>27)>>0]|0;else u=o[704+u>>0]|0;break}case 3:{u=o[800+(p>>>26)>>0]|0;break}case 4:{u=o[864+(p>>>27)>>0]|0;break}default:{u=p>>31&16|1;break e}}while(0);if(!u){R=1;d=U;return R|0}}while(0);h=u&15;c=c-h|0;p=p<<h;h=u>>>4&15}else h=0;m=O+-1|0;n=(m|0)==0;if(n){s[t+(h<<2)>>2]=s[V+(m<<2)>>2];L=c;r=1<<h;break}else{u=p;f=0}e:while(1){if(!h){s[B+(f<<2)>>2]=1;F=c;l=0}else{if(c>>>0<11){if((Kt(e,32-c|0)|0)==-1){N=1;u=127;break}c=32;u=zt(e)|0}switch(h|0){case 5:{p=o[656+(u>>>29)>>0]|0;break}case 6:{p=o[664+(u>>>29)>>0]|0;break}case 1:{p=o[624+(u>>>31)>>0]|0;break}case 2:{p=o[632+(u>>>30)>>0]|0;break}case 3:{p=o[640+(u>>>30)>>0]|0;break}case 4:{p=o[648+(u>>>29)>>0]|0;break}default:{do if(u>>>0<=536870911)if(u>>>0<=268435455)if(u>>>0<=134217727)if(u>>>0<=67108863)if(u>>>0<=33554431)if(u>>>0>16777215)p=184;else{if(u>>>0>8388607){p=201;break}if(u>>>0>4194303){p=218;break}p=u>>>0<2097152?0:235}else p=167;else p=150;else p=133;else p=116;else p=u>>>29<<4^115;while(0);if((p>>>4&15)>>>0>h>>>0){N=1;u=127;break e}}}if(!p){N=1;u=127;break}R=p&15;l=p>>>4&15;s[B+(f<<2)>>2]=l+1;F=c-R|0;u=u<<R;l=h-l|0}f=f+1|0;if(f>>>0>=m>>>0){u=122;break}else{c=F;h=l}}if((u|0)==122){s[t+(l<<2)>>2]=s[V+(m<<2)>>2];r=1<<l;if(n){L=F;break}u=O+-2|0;while(1){l=(s[B+(u<<2)>>2]|0)+l|0;r=1<<l|r;s[t+(l<<2)>>2]=s[V+(u<<2)>>2];if(!u){L=F;break}else u=u+-1|0}}else if((u|0)==127){d=U;return N|0}}else{L=m;r=0}while(0);if(Kt(e,32-L|0)|0){R=1;d=U;return R|0}R=r<<16|O<<4;d=U;return R|0}function en(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=d;e:do if((Wt(e,1)|0)!=-1?(i=t+4|0,s[i>>2]=Wt(e,2)|0,n=Wt(e,5)|0,s[t>>2]=n,(n+-2|0)>>>0>=3):0){switch(n|0){case 5:case 7:case 8:{if(!(s[i>>2]|0)){n=1;break e}switch(n|0){case 6:case 9:case 10:case 11:case 12:{n=1;break e}default:{}}break}case 6:case 9:case 10:case 11:case 12:{if(s[i>>2]|0){n=1;break e}break}default:{}}n=0}else n=1;while(0);d=r;return n|0}function tn(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0;f=d;if(!n){d=f;return}p=t+-1|0;l=1-t|0;u=~t;o=0;a=0;c=0;while(1){r=(o|0)!=0;if(r)s[e+(a*216|0)+200>>2]=e+((a+-1|0)*216|0);else s[e+(a*216|0)+200>>2]=0;i=(c|0)!=0;if(i){s[e+(a*216|0)+204>>2]=e+((a-t|0)*216|0);if(o>>>0<p>>>0)s[e+(a*216|0)+208>>2]=e+((l+a|0)*216|0);else h=10}else{s[e+(a*216|0)+204>>2]=0;h=10}if((h|0)==10){h=0;s[e+(a*216|0)+208>>2]=0}if(i&r)s[e+(a*216|0)+212>>2]=e+((a+u|0)*216|0);else s[e+(a*216|0)+212>>2]=0;i=o+1|0;r=(i|0)==(t|0);a=a+1|0;if((a|0)==(n|0))break;else{o=r?0:i;c=(r&1)+c|0}}d=f;return}function nn(e,t){e=e|0;t=t|0;var n=0;n=d;switch(t|0){case 4:break;case 0:{e=s[e+200>>2]|0;break}case 2:{e=s[e+208>>2]|0;break}case 1:{e=s[e+204>>2]|0;break}case 3:{e=s[e+212>>2]|0;break}default:e=0}d=n;return e|0}function rn(e){e=e|0;return 3152+(e<<3)|0}function sn(e){e=e|0;return 2960+(e<<3)|0}function on(e){e=e|0;return 2768+(e<<3)|0}function an(e){e=e|0;return 2576+(e<<3)|0}function ln(e,t){e=e|0;t=t|0;var n=0;n=d;if(!t){d=n;return 0}else{d=n;return(s[e+4>>2]|0)==(s[t+4>>2]|0)|0}return 0}function un(e){e=e|0;var t=0;t=d;di(e,0,3388);s[e+8>>2]=32;s[e+4>>2]=256;s[e+1332>>2]=1;d=t;return}function cn(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0;a=d;r=s[t+8>>2]|0;o=e+(r<<2)+20|0;i=s[o>>2]|0;do if(!i){n=li(92)|0;s[o>>2]=n;if(!n){n=65535;d=a;return n|0}}else{n=e+8|0;if((r|0)!=(s[n>>2]|0)){ui(s[i+40>>2]|0);s[(s[o>>2]|0)+40>>2]=0;ui(s[(s[o>>2]|0)+84>>2]|0);s[(s[o>>2]|0)+84>>2]=0;break}r=e+16|0;if(Tt(t,s[r>>2]|0)|0){ui(s[(s[o>>2]|0)+40>>2]|0);s[(s[o>>2]|0)+40>>2]=0;ui(s[(s[o>>2]|0)+84>>2]|0);s[(s[o>>2]|0)+84>>2]=0;s[n>>2]=33;s[e+4>>2]=257;s[r>>2]=0;s[e+12>>2]=0;break}n=t+40|0;ui(s[n>>2]|0);s[n>>2]=0;n=t+84|0;ui(s[n>>2]|0);s[n>>2]=0;n=0;d=a;return n|0}while(0);r=(s[o>>2]|0)+0|0;n=t+0|0;i=r+92|0;do{s[r>>2]=s[n>>2];r=r+4|0;n=n+4|0}while((r|0)<(i|0));n=0;d=a;return n|0}function dn(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0;a=d;r=s[t>>2]|0;o=e+(r<<2)+148|0;n=s[o>>2]|0;do if(!n){n=li(72)|0;s[o>>2]=n;if(!n){n=65535;d=a;return n|0}}else{i=e+4|0;if((r|0)!=(s[i>>2]|0)){ui(s[n+20>>2]|0);s[(s[o>>2]|0)+20>>2]=0;ui(s[(s[o>>2]|0)+24>>2]|0);s[(s[o>>2]|0)+24>>2]=0;ui(s[(s[o>>2]|0)+28>>2]|0);s[(s[o>>2]|0)+28>>2]=0;ui(s[(s[o>>2]|0)+44>>2]|0);s[(s[o>>2]|0)+44>>2]=0;break}if((s[t+4>>2]|0)!=(s[e+8>>2]|0)){s[i>>2]=257;n=s[o>>2]|0}ui(s[n+20>>2]|0);s[(s[o>>2]|0)+20>>2]=0;ui(s[(s[o>>2]|0)+24>>2]|0);s[(s[o>>2]|0)+24>>2]=0;ui(s[(s[o>>2]|0)+28>>2]|0);s[(s[o>>2]|0)+28>>2]=0;ui(s[(s[o>>2]|0)+44>>2]|0);s[(s[o>>2]|0)+44>>2]=0}while(0);r=(s[o>>2]|0)+0|0;n=t+0|0;i=r+72|0;do{s[r>>2]=s[n>>2];r=r+4|0;n=n+4|0}while((r|0)<(i|0));n=0;d=a;return n|0}function pn(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0;g=d;f=e+(t<<2)+148|0;r=s[f>>2]|0;if(!r){f=1;d=g;return f|0}h=s[r+4>>2]|0;o=s[e+(h<<2)+20>>2]|0;if(!o){f=1;d=g;return f|0}c=s[o+52>>2]|0;p=ee(s[o+56>>2]|0,c)|0;a=s[r+12>>2]|0;e:do if(a>>>0>1){o=s[r+16>>2]|0;if(!o){o=s[r+20>>2]|0;r=0;while(1){if((s[o+(r<<2)>>2]|0)>>>0>p>>>0){i=1;break}r=r+1|0;if(r>>>0>=a>>>0)break e}d=g;return i|0}else if((o|0)==2){u=s[r+24>>2]|0;l=s[r+28>>2]|0;a=a+-1|0;i=0;while(1){r=s[u+(i<<2)>>2]|0;o=s[l+(i<<2)>>2]|0;if(!(r>>>0<=o>>>0&o>>>0<p>>>0)){i=1;o=33;break}i=i+1|0;if(((r>>>0)%(c>>>0)|0)>>>0>((o>>>0)%(c>>>0)|0)>>>0){i=1;o=33;break}if(i>>>0>=a>>>0)break e}if((o|0)==33){d=g;return i|0}}else{if((o+-3|0)>>>0<3){if((s[r+36>>2]|0)>>>0>p>>>0)i=1;else break;d=g;return i|0}if((o|0)!=6)break;if((s[r+40>>2]|0)>>>0<p>>>0)i=1;else break;d=g;return i|0}}while(0);r=e+4|0;o=s[r>>2]|0;do if((o|0)!=256){i=e+3380|0;if(!(s[i>>2]|0)){if((o|0)==(t|0))break;o=e+8|0;if((h|0)==(s[o>>2]|0)){s[r>>2]=t;s[e+12>>2]=s[f>>2];break}if(!n){f=1;d=g;return f|0}else{s[r>>2]=t;f=s[f>>2]|0;s[e+12>>2]=f;f=s[f+4>>2]|0;s[o>>2]=f;f=s[e+(f<<2)+20>>2]|0;s[e+16>>2]=f;h=s[f+52>>2]|0;f=s[f+56>>2]|0;s[e+1176>>2]=ee(f,h)|0;s[e+1340>>2]=h;s[e+1344>>2]=f;s[i>>2]=1;break}}s[i>>2]=0;i=e+1212|0;ui(s[i>>2]|0);s[i>>2]=0;r=e+1172|0;ui(s[r>>2]|0);s[r>>2]=0;o=e+1176|0;s[i>>2]=li((s[o>>2]|0)*216|0)|0;f=li(s[o>>2]<<2)|0;s[r>>2]=f;r=s[i>>2]|0;if((r|0)==0|(f|0)==0){f=65535;d=g;return f|0}di(r,0,(s[o>>2]|0)*216|0);r=e+16|0;tn(s[i>>2]|0,s[(s[r>>2]|0)+52>>2]|0,s[o>>2]|0);r=s[r>>2]|0;do if((s[e+1216>>2]|0)==0?(s[r+16>>2]|0)!=2:0){if(((s[r+80>>2]|0)!=0?(m=s[r+84>>2]|0,(s[m+920>>2]|0)!=0):0)?(s[m+944>>2]|0)==0:0){i=1;break}i=0}else i=1;while(0);f=ee(s[r+56>>2]|0,s[r+52>>2]|0)|0;i=Ke(e+1220|0,f,s[r+88>>2]|0,s[r+44>>2]|0,s[r+12>>2]|0,i)|0;if(i){f=i;d=g;return f|0}}else{s[r>>2]=t;f=s[f>>2]|0;s[e+12>>2]=f;f=s[f+4>>2]|0;s[e+8>>2]=f;f=s[e+(f<<2)+20>>2]|0;s[e+16>>2]=f;h=s[f+52>>2]|0;f=s[f+56>>2]|0;s[e+1176>>2]=ee(f,h)|0;s[e+1340>>2]=h;s[e+1344>>2]=f;s[e+3380>>2]=1}while(0);f=0;d=g;return f|0}function hn(e){e=e|0;var t=0,n=0,i=0;i=d;s[e+1196>>2]=0;s[e+1192>>2]=0;n=s[e+1176>>2]|0;if(!n){d=i;return}e=s[e+1212>>2]|0;t=0;do{s[e+(t*216|0)+4>>2]=0;s[e+(t*216|0)+196>>2]=0;t=t+1|0}while(t>>>0<n>>>0);d=i;return}function fn(e){e=e|0;return(s[e+1188>>2]|0)==0|0}function mn(e){e=e|0;var t=0,n=0,i=0,r=0;r=d;if(!(s[e+1404>>2]|0)){if((s[e+1196>>2]|0)==(s[e+1176>>2]|0)){e=1;d=r;return e|0}}else{i=s[e+1176>>2]|0;if(!i){e=1;d=r;return e|0}e=s[e+1212>>2]|0;t=0;n=0;do{n=((s[e+(t*216|0)+196>>2]|0)!=0&1)+n|0;t=t+1|0}while(t>>>0<i>>>0);if((n|0)==(i|0)){e=1;d=r;return e|0}}e=0;d=r;return e|0}function gn(e,t){e=e|0;t=t|0;var n=0,i=0;n=d;i=s[e+16>>2]|0;yn(s[e+1172>>2]|0,s[e+12>>2]|0,t,s[i+52>>2]|0,s[i+56>>2]|0);d=n;return}function vn(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0;y=d;d=d+32|0;o=y+24|0;l=y+20|0;u=y+16|0;h=y+12|0;v=y+8|0;g=y;s[i>>2]=0;switch(s[t>>2]|0){case 5:case 1:{b=n+1300|0;a=n+1332|0;if(s[a>>2]|0){s[i>>2]=1;s[a>>2]=0}a=Rt(e,o)|0;if(a){f=a;d=y;return f|0}c=s[n+(s[o>>2]<<2)+148>>2]|0;if(!c){f=65520;d=y;return f|0}a=s[c+4>>2]|0;p=s[n+(a<<2)+20>>2]|0;if(!p){f=65520;d=y;return f|0}o=s[n+8>>2]|0;if(!((o|0)==32|(a|0)==(o|0))?(s[t>>2]|0)!=5:0){f=65520;d=y;return f|0}o=s[n+1304>>2]|0;a=s[t+4>>2]|0;if((o|0)!=(a|0)?(o|0)==0|(a|0)==0:0)s[i>>2]=1;a=(s[t>>2]|0)==5;if((s[b>>2]|0)==5){if(!a)r=16}else if(a)r=16;if((r|0)==16)s[i>>2]=1;o=p+12|0;if(Dt(e,s[o>>2]|0,l)|0){f=1;d=y;return f|0}r=n+1308|0;a=s[l>>2]|0;if((s[r>>2]|0)!=(a|0)){s[r>>2]=a;s[i>>2]=1}if((s[t>>2]|0)==5){if(At(e,s[o>>2]|0,5,u)|0){f=1;d=y;return f|0}if((s[b>>2]|0)==5){a=n+1312|0;r=s[a>>2]|0;o=s[u>>2]|0;if((r|0)==(o|0))o=r;else s[i>>2]=1}else{o=s[u>>2]|0;a=n+1312|0}s[a>>2]=o}o=s[p+16>>2]|0;if(!o){if(Pt(e,p,s[t>>2]|0,h)|0){f=1;d=y;return f|0}r=n+1316|0;o=s[h>>2]|0;if((s[r>>2]|0)!=(o|0)){s[r>>2]=o;s[i>>2]=1}if(s[c+8>>2]|0){r=It(e,p,s[t>>2]|0,v)|0;if(r){f=r;d=y;return f|0}o=n+1320|0;r=s[v>>2]|0;if((s[o>>2]|0)!=(r|0)){s[o>>2]=r;s[i>>2]=1}}}else if((o|0)==1?(s[p+24>>2]|0)==0:0){a=c+8|0;o=Mt(e,p,s[t>>2]|0,s[a>>2]|0,g)|0;if(o){f=o;d=y;return f|0}r=n+1324|0;o=s[g>>2]|0;if((s[r>>2]|0)!=(o|0)){s[r>>2]=o;s[i>>2]=1}if((s[a>>2]|0)!=0?(m=n+1328|0,f=s[g+4>>2]|0,(s[m>>2]|0)!=(f|0)):0){s[m>>2]=f;s[i>>2]=1}}h=t;e=s[h+4>>2]|0;f=b;s[f>>2]=s[h>>2];s[f+4>>2]=e;f=0;d=y;return f|0}case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:{s[i>>2]=1;f=0;d=y;return f|0}default:{f=0;d=y;return f|0}}return 0}function bn(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0;h=d;c=0;e:while(1){t=s[e+(c<<2)+148>>2]|0;t:do if((t|0)!=0?(u=s[e+(s[t+4>>2]<<2)+20>>2]|0,(u|0)!=0):0){l=s[u+52>>2]|0;p=ee(s[u+56>>2]|0,l)|0;r=s[t+12>>2]|0;if(r>>>0<=1){t=0;n=18;break e}n=s[t+16>>2]|0;if((n|0)==2){a=s[t+24>>2]|0;o=s[t+28>>2]|0;r=r+-1|0;i=0;while(1){t=s[a+(i<<2)>>2]|0;n=s[o+(i<<2)>>2]|0;if(!(t>>>0<=n>>>0&n>>>0<p>>>0))break t;i=i+1|0;if(((t>>>0)%(l>>>0)|0)>>>0>((n>>>0)%(l>>>0)|0)>>>0)break t;if(i>>>0>=r>>>0){t=0;n=18;break e}}}else if(n){if((n+-3|0)>>>0<3)if((s[t+36>>2]|0)>>>0>p>>>0)break;else{t=0;n=18;break e}if((n|0)!=6){t=0;n=18;break e}if((s[t+40>>2]|0)>>>0<p>>>0)break;else{t=0;n=18;break e}}else{n=s[t+20>>2]|0;t=0;while(1){if((s[n+(t<<2)>>2]|0)>>>0>p>>>0)break t;t=t+1|0;if(t>>>0>=r>>>0){t=0;n=18;break e}}}}while(0);c=c+1|0;if(c>>>0>=256){t=1;n=18;break}}if((n|0)==18){d=h;return t|0}return 0}function yn(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0;_=d;y=ee(r,i)|0;f=s[t+12>>2]|0;if((f|0)==1){di(e,0,y<<2);d=_;return}u=s[t+16>>2]|0;if((u+-3|0)>>>0<3){n=ee(s[t+36>>2]|0,n)|0;n=n>>>0<y>>>0?n:y;if((u&-2|0)==4){h=(s[t+32>>2]|0)==0?n:y-n|0;w=n}else{h=0;w=n}}else{h=0;w=0}switch(u|0){case 1:{if(!y){d=_;return}else a=0;do{s[e+(a<<2)>>2]=((((ee((a>>>0)/(i>>>0)|0,f)|0)>>>1)+((a>>>0)%(i>>>0)|0)|0)>>>0)%(f>>>0)|0;a=a+1|0}while((a|0)!=(y|0));d=_;return}case 5:{n=s[t+32>>2]|0;if(!i){d=_;return}u=1-n|0;if(!r){d=_;return}else{o=0;l=0}while(1){a=0;t=l;while(1){p=e+((ee(a,i)|0)+o<<2)|0;s[p>>2]=t>>>0<h>>>0?n:u;a=a+1|0;if((a|0)==(r|0))break;else t=t+1|0}o=o+1|0;if((o|0)==(i|0))break;else l=l+r|0}d=_;return}case 3:{p=s[t+32>>2]|0;if(y){n=0;do{s[e+(n<<2)>>2]=1;n=n+1|0}while((n|0)!=(y|0))}c=(i-p|0)>>>1;h=(r-p|0)>>>1;if(!w){d=_;return}y=p<<1;v=y+-1|0;b=i+-1|0;y=1-y|0;g=r+-1|0;f=h;m=0;o=c;r=c;u=h;t=c;l=p+-1|0;n=h;while(1){h=e+((ee(n,i)|0)+t<<2)|0;c=(s[h>>2]|0)==1;a=c&1;if(c)s[h>>2]=0;do if(!((l|0)==-1&(t|0)==(o|0))){if((l|0)==1&(t|0)==(r|0)){t=r+1|0;t=(t|0)<(b|0)?t:b;h=f;c=o;r=t;l=0;p=y;break}if((p|0)==-1&(n|0)==(u|0)){n=u+-1|0;n=(n|0)>0?n:0;h=f;c=o;u=n;l=y;p=0;break}if((p|0)==1&(n|0)==(f|0)){n=f+1|0;n=(n|0)<(g|0)?n:g;h=n;c=o;l=v;p=0;break}else{h=f;c=o;t=t+l|0;n=n+p|0;break}}else{t=o+-1|0;t=(t|0)>0?t:0;h=f;c=t;l=0;p=v}while(0);m=a+m|0;if(m>>>0>=w>>>0)break;else{f=h;o=c}}d=_;return}case 4:{a=s[t+32>>2]|0;if(!y){d=_;return}n=1-a|0;o=0;do{s[e+(o<<2)>>2]=o>>>0<h>>>0?a:n;o=o+1|0}while((o|0)!=(y|0));d=_;return}case 2:{h=s[t+24>>2]|0;p=s[t+28>>2]|0;a=f+-1|0;if(y){n=0;do{s[e+(n<<2)>>2]=a;n=n+1|0}while((n|0)!=(y|0))}if(!a){d=_;return}o=f+-2|0;while(1){l=s[h+(o<<2)>>2]|0;n=(l>>>0)/(i>>>0)|0;l=(l>>>0)%(i>>>0)|0;a=s[p+(o<<2)>>2]|0;c=(a>>>0)/(i>>>0)|0;a=(a>>>0)%(i>>>0)|0;e:do if(n>>>0<=c>>>0){if(l>>>0>a>>>0)while(1){n=n+1|0;if(n>>>0>c>>>0)break e}do{u=ee(n,i)|0;t=l;do{s[e+(t+u<<2)>>2]=o;t=t+1|0}while(t>>>0<=a>>>0);n=n+1|0}while(n>>>0<=c>>>0)}while(0);if(!o)break;else o=o+-1|0}d=_;return}case 0:{c=s[t+20>>2]|0;if(!y){d=_;return}else{a=0;l=0}while(1){while(1)if(a>>>0<f>>>0)break;else a=0;t=c+(a<<2)|0;n=s[t>>2]|0;e:do if(!n)n=0;else{u=0;do{o=u+l|0;if(o>>>0>=y>>>0)break e;s[e+(o<<2)>>2]=a;u=u+1|0;n=s[t>>2]|0}while(u>>>0<n>>>0)}while(0);l=n+l|0;if(l>>>0>=y>>>0)break;else a=a+1|0}d=_;return}default:{if(!y){d=_;return}o=s[t+44>>2]|0;a=0;do{s[e+(a<<2)>>2]=s[o+(a<<2)>>2];a=a+1|0}while((a|0)!=(y|0));d=_;return}}}function wn(){return 3472}function _n(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var a=0,l=0,u=0;u=d;d=d+80|0;a=u+32|0;l=u;Cn(n,a,l,i);if((Vt(s[e>>2]|0)|0)==1){i=Sn(e,o,t+328|0,a,l,r)|0;if(i){d=u;return i|0}}else{i=En(e,o,t,a,l,r)|0;if(i){d=u;return i|0}}i=Tn(e,o+256|0,t+1352|0,a+21|0,l+16|0,s[t+140>>2]|0,r)|0;if(i){d=u;return i|0}if((s[e+196>>2]|0)>>>0>1){i=0;d=u;return i|0}et(n,o);i=0;d=u;return i|0}function Cn(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0;b=d;if(!r){d=b;return}m=s[e+4>>2]|0;g=ee(s[e+8>>2]|0,m)|0;h=(r>>>0)/(m>>>0)|0;o=ee(h,m)|0;f=r-o|0;u=m<<4;a=s[e>>2]|0;l=(f<<4)+(ee(m<<8,h)|0)|0;v=(h|0)!=0;if(v){p=l-(u|1)|0;i[t>>0]=i[a+p>>0]|0;i[t+1>>0]=i[a+(p+1)>>0]|0;i[t+2>>0]=i[a+(p+2)>>0]|0;i[t+3>>0]=i[a+(p+3)>>0]|0;i[t+4>>0]=i[a+(p+4)>>0]|0;i[t+5>>0]=i[a+(p+5)>>0]|0;i[t+6>>0]=i[a+(p+6)>>0]|0;i[t+7>>0]=i[a+(p+7)>>0]|0;i[t+8>>0]=i[a+(p+8)>>0]|0;i[t+9>>0]=i[a+(p+9)>>0]|0;i[t+10>>0]=i[a+(p+10)>>0]|0;i[t+11>>0]=i[a+(p+11)>>0]|0;i[t+12>>0]=i[a+(p+12)>>0]|0;i[t+13>>0]=i[a+(p+13)>>0]|0;i[t+14>>0]=i[a+(p+14)>>0]|0;i[t+15>>0]=i[a+(p+15)>>0]|0;i[t+16>>0]=i[a+(p+16)>>0]|0;i[t+17>>0]=i[a+(p+17)>>0]|0;i[t+18>>0]=i[a+(p+18)>>0]|0;i[t+19>>0]=i[a+(p+19)>>0]|0;i[t+20>>0]=i[a+(p+20)>>0]|0;p=t+21|0}else p=t;c=(o|0)!=(r|0);if(c){l=l+-1|0;i[n>>0]=i[a+l>>0]|0;l=l+u|0;i[n+1>>0]=i[a+l>>0]|0;l=l+u|0;i[n+2>>0]=i[a+l>>0]|0;l=l+u|0;i[n+3>>0]=i[a+l>>0]|0;l=l+u|0;i[n+4>>0]=i[a+l>>0]|0;l=l+u|0;i[n+5>>0]=i[a+l>>0]|0;l=l+u|0;i[n+6>>0]=i[a+l>>0]|0;l=l+u|0;i[n+7>>0]=i[a+l>>0]|0;l=l+u|0;i[n+8>>0]=i[a+l>>0]|0;l=l+u|0;i[n+9>>0]=i[a+l>>0]|0;l=l+u|0;i[n+10>>0]=i[a+l>>0]|0;l=l+u|0;i[n+11>>0]=i[a+l>>0]|0;l=l+u|0;i[n+12>>0]=i[a+l>>0]|0;l=l+u|0;i[n+13>>0]=i[a+l>>0]|0;l=l+u|0;i[n+14>>0]=i[a+l>>0]|0;i[n+15>>0]=i[a+(l+u)>>0]|0;n=n+16|0}t=m<<3&2147483640;r=s[e>>2]|0;o=(ee(h<<3,t)|0)+(g<<8)+(f<<3)|0;if(v){e=o-(t|1)|0;i[p>>0]=i[r+e>>0]|0;i[p+1>>0]=i[r+(e+1)>>0]|0;i[p+2>>0]=i[r+(e+2)>>0]|0;i[p+3>>0]=i[r+(e+3)>>0]|0;i[p+4>>0]=i[r+(e+4)>>0]|0;i[p+5>>0]=i[r+(e+5)>>0]|0;i[p+6>>0]=i[r+(e+6)>>0]|0;i[p+7>>0]=i[r+(e+7)>>0]|0;i[p+8>>0]=i[r+(e+8)>>0]|0;e=e+(g<<6)|0;i[p+9>>0]=i[r+e>>0]|0;i[p+10>>0]=i[r+(e+1)>>0]|0;i[p+11>>0]=i[r+(e+2)>>0]|0;i[p+12>>0]=i[r+(e+3)>>0]|0;i[p+13>>0]=i[r+(e+4)>>0]|0;i[p+14>>0]=i[r+(e+5)>>0]|0;i[p+15>>0]=i[r+(e+6)>>0]|0;i[p+16>>0]=i[r+(e+7)>>0]|0;i[p+17>>0]=i[r+(e+8)>>0]|0}if(!c){d=b;return}p=o+-1|0;i[n>>0]=i[r+p>>0]|0;p=p+t|0;i[n+1>>0]=i[r+p>>0]|0;p=p+t|0;i[n+2>>0]=i[r+p>>0]|0;p=p+t|0;i[n+3>>0]=i[r+p>>0]|0;p=p+t|0;i[n+4>>0]=i[r+p>>0]|0;p=p+t|0;i[n+5>>0]=i[r+p>>0]|0;p=p+t|0;i[n+6>>0]=i[r+p>>0]|0;p=p+t|0;i[n+7>>0]=i[r+p>>0]|0;p=p+(t+((g<<6)-(m<<6)))|0;i[n+8>>0]=i[r+p>>0]|0;p=p+t|0;i[n+9>>0]=i[r+p>>0]|0;p=p+t|0;i[n+10>>0]=i[r+p>>0]|0;p=p+t|0;i[n+11>>0]=i[r+p>>0]|0;p=p+t|0;i[n+12>>0]=i[r+p>>0]|0;p=p+t|0;i[n+13>>0]=i[r+p>>0]|0;p=p+t|0;i[n+14>>0]=i[r+p>>0]|0;i[n+15>>0]=i[r+(p+t)>>0]|0;d=b;return}function Sn(e,t,n,r,a,l){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;var u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0;T=d;u=e+200|0;c=ln(e,s[u>>2]|0)|0;f=(l|0)!=0;if((c|0)!=0&f){h=(Vt(s[s[u>>2]>>2]|0)|0)==2;h=h?0:c}else h=c;l=e+204|0;c=ln(e,s[l>>2]|0)|0;if((c|0)!=0&f){m=(Vt(s[s[l>>2]>>2]|0)|0)==2;m=m?0:c}else m=c;l=e+212|0;c=ln(e,s[l>>2]|0)|0;if((c|0)!=0&f){v=(Vt(s[s[l>>2]>>2]|0)|0)==2;c=v?0:c}l=jt(s[e>>2]|0)|0;if((l|0)==2){c=r+1|0;u=(h|0)!=0;l=(m|0)!=0;do if(!(u&l)){if(u){u=((o[a>>0]|0)+8+(o[a+1>>0]|0)+(o[a+2>>0]|0)+(o[a+3>>0]|0)+(o[a+4>>0]|0)+(o[a+5>>0]|0)+(o[a+6>>0]|0)+(o[a+7>>0]|0)+(o[a+8>>0]|0)+(o[a+9>>0]|0)+(o[a+10>>0]|0)+(o[a+11>>0]|0)+(o[a+12>>0]|0)+(o[a+13>>0]|0)+(o[a+14>>0]|0)+(o[a+15>>0]|0)|0)>>>4;break}if(l)u=((o[c>>0]|0)+8+(o[r+2>>0]|0)+(o[r+3>>0]|0)+(o[r+4>>0]|0)+(o[r+5>>0]|0)+(o[r+6>>0]|0)+(o[r+7>>0]|0)+(o[r+8>>0]|0)+(o[r+9>>0]|0)+(o[r+10>>0]|0)+(o[r+11>>0]|0)+(o[r+12>>0]|0)+(o[r+13>>0]|0)+(o[r+14>>0]|0)+(o[r+15>>0]|0)+(o[r+16>>0]|0)|0)>>>4;else u=128}else{l=0;u=0;do{v=l;l=l+1|0;u=(o[r+l>>0]|0)+u+(o[a+v>>0]|0)|0}while((l|0)!=16);u=(u+16|0)>>>5}while(0);gi(t|0,u&255|0,256)|0}else if((l|0)==1)if(!h){v=1;d=T;return v|0}else{u=t;l=0;while(1){v=a+l|0;i[u>>0]=i[v>>0]|0;i[u+1>>0]=i[v>>0]|0;i[u+2>>0]=i[v>>0]|0;i[u+3>>0]=i[v>>0]|0;i[u+4>>0]=i[v>>0]|0;i[u+5>>0]=i[v>>0]|0;i[u+6>>0]=i[v>>0]|0;i[u+7>>0]=i[v>>0]|0;i[u+8>>0]=i[v>>0]|0;i[u+9>>0]=i[v>>0]|0;i[u+10>>0]=i[v>>0]|0;i[u+11>>0]=i[v>>0]|0;i[u+12>>0]=i[v>>0]|0;i[u+13>>0]=i[v>>0]|0;i[u+14>>0]=i[v>>0]|0;i[u+15>>0]=i[v>>0]|0;l=l+1|0;if((l|0)==16)break;else u=u+16|0}}else if(!l){if(!m){v=1;d=T;return v|0}e=r+1|0;p=r+2|0;b=r+3|0;y=r+4|0;w=r+5|0;_=r+6|0;C=r+7|0;S=r+8|0;E=r+9|0;a=r+10|0;c=r+11|0;l=r+12|0;u=r+13|0;g=r+14|0;v=r+15|0;m=r+16|0;f=t;h=0;while(1){i[f>>0]=i[e>>0]|0;i[f+1>>0]=i[p>>0]|0;i[f+2>>0]=i[b>>0]|0;i[f+3>>0]=i[y>>0]|0;i[f+4>>0]=i[w>>0]|0;i[f+5>>0]=i[_>>0]|0;i[f+6>>0]=i[C>>0]|0;i[f+7>>0]=i[S>>0]|0;i[f+8>>0]=i[E>>0]|0;i[f+9>>0]=i[a>>0]|0;i[f+10>>0]=i[c>>0]|0;i[f+11>>0]=i[l>>0]|0;i[f+12>>0]=i[u>>0]|0;i[f+13>>0]=i[g>>0]|0;i[f+14>>0]=i[v>>0]|0;i[f+15>>0]=i[m>>0]|0;h=h+1|0;if((h|0)==16)break;else f=f+16|0}}else{if(!((h|0)!=0&(m|0)!=0&(c|0)!=0)){v=1;d=T;return v|0}l=o[r+16>>0]|0;p=o[a+15>>0]|0;f=o[r>>0]|0;m=(((o[r+9>>0]|0)-(o[r+7>>0]|0)+((o[r+10>>0]|0)-(o[r+6>>0]|0)<<1)+(((o[r+11>>0]|0)-(o[r+5>>0]|0)|0)*3|0)+((o[r+12>>0]|0)-(o[r+4>>0]|0)<<2)+(((o[r+13>>0]|0)-(o[r+3>>0]|0)|0)*5|0)+(((o[r+14>>0]|0)-(o[r+2>>0]|0)|0)*6|0)+(((o[r+15>>0]|0)-(o[r+1>>0]|0)|0)*7|0)+(l-f<<3)|0)*5|0)+32>>6;f=(((o[a+8>>0]|0)-(o[a+6>>0]|0)+(p-f<<3)+((o[a+9>>0]|0)-(o[a+5>>0]|0)<<1)+(((o[a+10>>0]|0)-(o[a+4>>0]|0)|0)*3|0)+((o[a+11>>0]|0)-(o[a+3>>0]|0)<<2)+(((o[a+12>>0]|0)-(o[a+2>>0]|0)|0)*5|0)+(((o[a+13>>0]|0)-(o[a+1>>0]|0)|0)*6|0)+(((o[a+14>>0]|0)-(o[a>>0]|0)|0)*7|0)|0)*5|0)+32>>6;l=(p+l<<4)+16|0;
p=0;do{u=l+(ee(p+-7|0,f)|0)|0;h=p<<4;e=0;do{c=u+(ee(e+-7|0,m)|0)>>5;if((c|0)<0)c=0;else c=(c|0)>255?-1:c&255;i[t+(e+h)>>0]=c;e=e+1|0}while((e|0)!=16);p=p+1|0}while((p|0)!=16)}xn(t,n,0);xn(t,n+64|0,1);xn(t,n+128|0,2);xn(t,n+192|0,3);xn(t,n+256|0,4);xn(t,n+320|0,5);xn(t,n+384|0,6);xn(t,n+448|0,7);xn(t,n+512|0,8);xn(t,n+576|0,9);xn(t,n+640|0,10);xn(t,n+704|0,11);xn(t,n+768|0,12);xn(t,n+832|0,13);xn(t,n+896|0,14);xn(t,n+960|0,15);v=0;d=T;return v|0}function En(e,t,n,r,a,l){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;var u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0,V=0,B=0;B=d;V=(l|0)!=0;F=0;e:while(1){c=rn(F)|0;h=s[c+4>>2]|0;c=nn(e,s[c>>2]|0)|0;l=ln(e,c)|0;if((l|0)!=0&V){A=(Vt(s[c>>2]|0)|0)==2;l=A?0:l}f=sn(F)|0;p=s[f+4>>2]|0;f=nn(e,s[f>>2]|0)|0;u=ln(e,f)|0;if((u|0)!=0&V){A=(Vt(s[f>>2]|0)|0)==2;u=A?0:u}I=(l|0)!=0;M=(u|0)!=0;O=I&M;if(O){if(!(Vt(s[c>>2]|0)|0))h=o[c+(h&255)+82>>0]|0;else h=2;if(!(Vt(s[f>>2]|0)|0))l=o[f+(p&255)+82>>0]|0;else l=2;l=h>>>0<l>>>0?h:l}else l=2;if(!(s[n+(F<<2)+12>>2]|0)){A=s[n+(F<<2)+76>>2]|0;l=(A>>>0>=l>>>0&1)+A|0}i[e+F+82>>0]=l;c=s[(on(F)|0)>>2]|0;c=nn(e,c)|0;p=ln(e,c)|0;if((p|0)!=0&V){A=(Vt(s[c>>2]|0)|0)==2;p=A?0:p}c=s[(an(F)|0)>>2]|0;c=nn(e,c)|0;h=ln(e,c)|0;if((h|0)!=0&V){A=(Vt(s[c>>2]|0)|0)==2;h=A?0:h}N=s[3344+(F<<2)>>2]|0;L=s[3408+(F<<2)>>2]|0;v=(1285>>>F&1|0)!=0;if(v){f=a+L|0;c=a+(L+1)|0;m=a+(L+2)|0;g=a+(L+3)|0}else{g=(L<<4)+N|0;f=t+(g+-1)|0;c=t+(g+15)|0;m=t+(g+31)|0;g=t+(g+47)|0}x=i[f>>0]|0;E=i[c>>0]|0;P=i[m>>0]|0;A=i[g>>0]|0;do if(!(51>>>F&1)){S=L+-1|0;C=(S<<4)+N|0;f=i[t+C>>0]|0;g=i[t+(C+1)>>0]|0;b=i[t+(C+2)>>0]|0;w=i[t+(C+3)>>0]|0;y=i[t+(C+4)>>0]|0;c=i[t+(C+5)>>0]|0;_=i[t+(C+6)>>0]|0;m=i[t+(C+7)>>0]|0;if(v){D=_;R=w;w=m;k=g;T=b;_=a+S|0;break}else{D=_;R=w;w=m;k=g;T=b;_=t+(C+-1)|0;break}}else{D=i[r+(N+7)>>0]|0;R=i[r+(N+4)>>0]|0;y=i[r+(N+5)>>0]|0;c=i[r+(N+6)>>0]|0;f=i[r+(N+1)>>0]|0;w=i[r+(N+8)>>0]|0;k=i[r+(N+2)>>0]|0;T=i[r+(N+3)>>0]|0;_=r+N|0}while(0);_=i[_>>0]|0;switch(l|0){case 1:{if(!I){u=1;l=51;break e}l=ee(x&255,16843009)|0;b=ee(E&255,16843009)|0;_=ee(P&255,16843009)|0;g=l&255;m=b&255;h=_&255;p=l>>>8&255;c=l>>>16&255;l=l>>>24&255;u=b>>>8&255;v=b>>>16&255;b=b>>>24&255;y=_>>>8&255;w=_>>>16&255;_=_>>>24&255;f=ee(A&255,16843009)|0;break}case 5:{if(!(O&(h|0)!=0)){u=1;l=51;break e}h=_&255;w=f&255;y=(w+1+h|0)>>>1&255;S=k&255;A=(S+2+(w<<1)+h|0)>>>2;k=x&255;x=w+2|0;f=(x+k+(h<<1)|0)>>>2;w=(S+1+w|0)>>>1&255;b=T&255;x=((S<<1)+b+x|0)>>>2;_=(b+1+S|0)>>>1&255;R=R&255;D=E&255;g=y;m=f&255;h=(D+2+(k<<1)+h|0)>>>2&255;p=w;c=_;l=(R+1+b|0)>>>1&255;u=A&255;v=x&255;b=(R+2+S+(b<<1)|0)>>>2&255;f=x<<24|(k+2+(P&255)+(D<<1)|0)>>>2&255|A<<16&16711680|f<<8&65280;break}case 6:{if(!(O&(h|0)!=0)){u=1;l=51;break e}c=_&255;b=x&255;w=b+1|0;v=(w+c|0)>>>1&255;R=E&255;_=((b<<1)+2+R+c|0)>>>2&255;w=(w+R|0)>>>1&255;D=P&255;b=b+2|0;E=(b+(R<<1)+D|0)>>>2;x=(R+1+D|0)>>>1;A=A&255;l=f&255;b=(b+l+(c<<1)|0)>>>2&255;u=k&255;g=v;m=w;h=x&255;p=b;c=(u+2+(l<<1)+c|0)>>>2&255;l=((T&255)+2+(u<<1)+l|0)>>>2&255;u=_;y=E&255;f=E<<24|x<<16&16711680|(D+1+A|0)>>>1&255|R+2+(D<<1)+A<<6&65280;break}case 2:{do if(!O){if(I){l=((x&255)+2+(E&255)+(P&255)+(A&255)|0)>>>2;break}if(M)l=((R&255)+2+(T&255)+(k&255)+(f&255)|0)>>>2;else l=128}else l=((x&255)+4+(E&255)+(P&255)+(A&255)+(R&255)+(T&255)+(k&255)+(f&255)|0)>>>3;while(0);f=ee(l&255,16843009)|0;h=f&255;y=f>>>8&255;w=f>>>16&255;_=f>>>24&255;g=h;m=h;p=y;c=w;l=_;u=y;v=w;b=_;break}case 3:{if(!u){u=1;l=51;break e}h=(p|0)==0;g=k&255;p=T&255;m=p+2|0;u=R&255;k=u+2|0;p=(k+g+(p<<1)|0)>>>2&255;_=(h?R:y)&255;u=(m+(u<<1)+_|0)>>>2&255;A=(h?R:c)&255;k=(k+A+(_<<1)|0)>>>2;y=k&255;x=(h?R:D)&255;D=(_+2+x+(A<<1)|0)>>>2;_=D&255;R=(h?R:w)&255;A=(A+2+R+(x<<1)|0)>>>2;g=(m+(f&255)+(g<<1)|0)>>>2&255;m=p;h=u;c=u;l=y;v=y;b=_;w=_;_=A&255;f=(x+2+(R*3|0)|0)>>>2<<24|k&255|D<<8&65280|A<<16&16711680;break}case 4:{if(!(O&(h|0)!=0)){u=1;l=51;break e}l=f&255;f=_&255;g=x&255;b=l+2|0;D=(b+g+(f<<1)|0)>>>2;w=D&255;u=k&255;f=f+2|0;_=((l<<1)+u+f|0)>>>2&255;l=T&255;b=((u<<1)+l+b|0)>>>2&255;T=E&255;f=(T+(g<<1)+f|0)>>>2;y=f&255;x=P&255;k=(g+2+(T<<1)+x|0)>>>2;g=w;m=y;h=k&255;p=_;c=b;l=((R&255)+2+u+(l<<1)|0)>>>2&255;u=w;v=_;f=(T+2+(x<<1)+(A&255)|0)>>>2&255|k<<8&65280|D<<24|f<<16&16711680;break}case 7:{if(!u){u=1;l=51;break e}x=(p|0)==0;h=f&255;m=k&255;T=T&255;p=(T+1+m|0)>>>1&255;f=R&255;w=f+1|0;_=(w+T|0)>>>1&255;k=(x?R:y)&255;w=(w+k|0)>>>1&255;l=T+2|0;E=f+2|0;T=(E+m+(T<<1)|0)>>>2;f=(l+(f<<1)+k|0)>>>2;A=(x?R:c)&255;E=(E+A+(k<<1)|0)>>>2;g=(m+1+h|0)>>>1&255;m=(l+h+(m<<1)|0)>>>2&255;h=p;c=_;l=w;u=T&255;v=f&255;b=E&255;y=_;_=(k+1+A|0)>>>1&255;f=E<<16&16711680|T&255|(k+2+((x?R:D)&255)+(A<<1)|0)>>>2<<24|f<<8&65280;break}case 0:{if(!u){u=1;l=51;break e}g=f;m=f;h=f;p=k;c=T;l=R;u=k;v=T;b=R;y=k;w=T;_=R;f=(T&255)<<16|(R&255)<<24|(k&255)<<8|f&255;break}default:{if(!I){u=1;l=51;break e}b=x&255;l=E&255;p=P&255;c=(l+1+p|0)>>>1&255;f=A&255;u=(l+2+(p<<1)+f|0)>>>2&255;v=(p+1+f|0)>>>1&255;y=(p+2+(f*3|0)|0)>>>2&255;g=(b+1+l|0)>>>1&255;m=c;h=v;p=(b+2+(l<<1)+p|0)>>>2&255;l=u;b=y;w=A;_=A;f=f<<8|f|f<<16|f<<24}}A=(L<<4)+N|0;s[t+A>>2]=(c&255)<<16|(l&255)<<24|(p&255)<<8|g&255;s[t+(A+16)>>2]=(v&255)<<16|(b&255)<<24|(u&255)<<8|m&255;s[t+(A+32)>>2]=(w&255)<<16|(_&255)<<24|(y&255)<<8|h&255;s[t+(A+48)>>2]=f;xn(t,n+(F<<6)+328|0,F);F=F+1|0;if(F>>>0>=16){u=0;l=51;break}}if((l|0)==51){d=B;return u|0}return 0}function Tn(e,t,n,r,a,l,u){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;u=u|0;var c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0;E=d;p=e+200|0;c=ln(e,s[p>>2]|0)|0;h=(u|0)!=0;if((c|0)!=0&h){f=(Vt(s[s[p>>2]>>2]|0)|0)==2;c=f?0:c}p=e+204|0;u=ln(e,s[p>>2]|0)|0;if((u|0)!=0&h){f=(Vt(s[s[p>>2]>>2]|0)|0)==2;f=f?0:u}else f=u;p=e+212|0;u=ln(e,s[p>>2]|0)|0;if((u|0)!=0&h){h=(Vt(s[s[p>>2]>>2]|0)|0)==2;u=h?0:u}C=(c|0)!=0;S=(f|0)!=0;_=C&S;w=_&(u|0)!=0;y=(c|0)==0;b=(f|0)==0;m=r;g=16;v=0;while(1){if((l|0)==2){if(b){c=1;u=29;break}else{h=m;e=t;p=8}while(1){h=h+1|0;p=p+-1|0;i[e>>0]=i[h>>0]|0;i[e+8>>0]=i[h>>0]|0;i[e+16>>0]=i[h>>0]|0;i[e+24>>0]=i[h>>0]|0;i[e+32>>0]=i[h>>0]|0;i[e+40>>0]=i[h>>0]|0;i[e+48>>0]=i[h>>0]|0;i[e+56>>0]=i[h>>0]|0;if(!p)break;else e=e+1|0}}else if(!l){p=m+1|0;do if(!_){if(S){h=((o[p>>0]|0)+2+(o[m+2>>0]|0)+(o[m+3>>0]|0)+(o[m+4>>0]|0)|0)>>>2;e=((o[m+5>>0]|0)+2+(o[m+6>>0]|0)+(o[m+7>>0]|0)+(o[m+8>>0]|0)|0)>>>2;break}if(C){e=((o[a>>0]|0)+2+(o[a+1>>0]|0)+(o[a+2>>0]|0)+(o[a+3>>0]|0)|0)>>>2;h=e}else{h=128;e=128}}else{h=((o[p>>0]|0)+4+(o[m+2>>0]|0)+(o[m+3>>0]|0)+(o[m+4>>0]|0)+(o[a>>0]|0)+(o[a+1>>0]|0)+(o[a+2>>0]|0)+(o[a+3>>0]|0)|0)>>>3;e=((o[m+5>>0]|0)+2+(o[m+6>>0]|0)+(o[m+7>>0]|0)+(o[m+8>>0]|0)|0)>>>2}while(0);h=h&255;f=e&255;gi(t|0,h|0,4)|0;gi(t+4|0,f|0,4)|0;gi(t+8|0,h|0,4)|0;gi(t+12|0,f|0,4)|0;gi(t+16|0,h|0,4)|0;gi(t+20|0,f|0,4)|0;r=t+32|0;gi(t+24|0,h|0,4)|0;gi(t+28|0,f|0,4)|0;if(C){f=o[a+4>>0]|0;h=o[a+5>>0]|0;e=o[a+6>>0]|0;p=o[a+7>>0]|0;u=(f+2+h+e+p|0)>>>2;if(S){c=u;h=(f+4+h+e+p+(o[m+5>>0]|0)+(o[m+6>>0]|0)+(o[m+7>>0]|0)+(o[m+8>>0]|0)|0)>>>3}else{c=u;h=u}}else if(S){c=((o[p>>0]|0)+2+(o[m+2>>0]|0)+(o[m+3>>0]|0)+(o[m+4>>0]|0)|0)>>>2;h=((o[m+5>>0]|0)+2+(o[m+6>>0]|0)+(o[m+7>>0]|0)+(o[m+8>>0]|0)|0)>>>2}else{c=128;h=128}e=c&255;f=h&255;gi(r|0,e|0,4)|0;gi(t+36|0,f|0,4)|0;gi(t+40|0,e|0,4)|0;gi(t+44|0,f|0,4)|0;gi(t+48|0,e|0,4)|0;gi(t+52|0,f|0,4)|0;gi(t+56|0,e|0,4)|0;gi(t+60|0,f|0,4)|0}else if((l|0)==1){if(y){c=1;u=29;break}else{h=t;e=8;p=a}while(1){e=e+-1|0;i[h>>0]=i[p>>0]|0;i[h+1>>0]=i[p>>0]|0;i[h+2>>0]=i[p>>0]|0;i[h+3>>0]=i[p>>0]|0;i[h+4>>0]=i[p>>0]|0;i[h+5>>0]=i[p>>0]|0;i[h+6>>0]=i[p>>0]|0;i[h+7>>0]=i[p>>0]|0;if(!e)break;else{h=h+8|0;p=p+1|0}}}else{if(!w){c=1;u=29;break}h=o[m+8>>0]|0;e=o[a+7>>0]|0;c=o[m>>0]|0;u=(((o[m+5>>0]|0)-(o[m+3>>0]|0)+((o[m+6>>0]|0)-(o[m+2>>0]|0)<<1)+(((o[m+7>>0]|0)-(o[m+1>>0]|0)|0)*3|0)+(h-c<<2)|0)*17|0)+16>>5;c=(((o[a+4>>0]|0)-(o[a+2>>0]|0)+(e-c<<2)+((o[a+5>>0]|0)-(o[a+1>>0]|0)<<1)+(((o[a+6>>0]|0)-(o[a>>0]|0)|0)*3|0)|0)*17|0)+16>>5;f=ee(u,-3)|0;h=(e+h<<4)+16+(ee(c,-3)|0)|0;e=t;p=8;while(1){p=p+-1|0;r=h+f|0;i[e>>0]=i[(r>>5)+3984>>0]|0;r=r+u|0;i[e+1>>0]=i[(r>>5)+3984>>0]|0;r=r+u|0;i[e+2>>0]=i[(r>>5)+3984>>0]|0;r=r+u|0;i[e+3>>0]=i[(r>>5)+3984>>0]|0;r=r+u|0;i[e+4>>0]=i[(r>>5)+3984>>0]|0;r=r+u|0;i[e+5>>0]=i[(r>>5)+3984>>0]|0;r=r+u|0;i[e+6>>0]=i[(r>>5)+3984>>0]|0;i[e+7>>0]=i[(r+u>>5)+3984>>0]|0;if(!p)break;else{h=h+c|0;e=e+8|0}}}xn(t,n,g);r=g|1;xn(t,n+64|0,r);xn(t,n+128|0,r+1|0);xn(t,n+192|0,g|3);v=v+1|0;if(v>>>0>=2){c=0;u=29;break}else{m=m+9|0;g=g+4|0;t=t+64|0;a=a+8|0;n=n+256|0}}if((u|0)==29){d=E;return c|0}return 0}function xn(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0;a=d;r=s[t>>2]|0;if((r|0)==16777215){d=a;return}p=n>>>0<16;c=p?16:8;p=p?n:n&3;p=(ee(s[3408+(p<<2)>>2]|0,c)|0)+(s[3344+(p<<2)>>2]|0)|0;h=e+p|0;m=s[t+4>>2]|0;l=e+(p+1)|0;n=o[l>>0]|0;i[h>>0]=i[3472+(r+512+(o[h>>0]|0))>>0]|0;h=s[t+8>>2]|0;u=e+(p+2)|0;f=o[u>>0]|0;i[l>>0]=i[3472+(m+512+n)>>0]|0;r=e+(p+3)|0;l=i[3472+((s[t+12>>2]|0)+512+(o[r>>0]|0))>>0]|0;i[u>>0]=i[3472+(h+512+f)>>0]|0;i[r>>0]=l;r=p+c|0;p=e+r|0;l=s[t+20>>2]|0;u=e+(r+1)|0;f=o[u>>0]|0;i[p>>0]=i[3472+((s[t+16>>2]|0)+512+(o[p>>0]|0))>>0]|0;p=s[t+24>>2]|0;h=e+(r+2)|0;n=o[h>>0]|0;i[u>>0]=i[3472+(l+512+f)>>0]|0;u=e+(r+3)|0;f=i[3472+((s[t+28>>2]|0)+512+(o[u>>0]|0))>>0]|0;i[h>>0]=i[3472+(p+512+n)>>0]|0;i[u>>0]=f;r=r+c|0;u=e+r|0;f=s[t+36>>2]|0;h=e+(r+1)|0;n=o[h>>0]|0;i[u>>0]=i[3472+((s[t+32>>2]|0)+512+(o[u>>0]|0))>>0]|0;u=s[t+40>>2]|0;p=e+(r+2)|0;l=o[p>>0]|0;i[h>>0]=i[3472+(f+512+n)>>0]|0;h=e+(r+3)|0;n=i[3472+((s[t+44>>2]|0)+512+(o[h>>0]|0))>>0]|0;i[p>>0]=i[3472+(u+512+l)>>0]|0;i[h>>0]=n;r=r+c|0;c=e+r|0;h=s[t+52>>2]|0;n=e+(r+1)|0;p=o[n>>0]|0;i[c>>0]=i[3472+((s[t+48>>2]|0)+512+(o[c>>0]|0))>>0]|0;c=s[t+56>>2]|0;l=e+(r+2)|0;u=o[l>>0]|0;i[n>>0]=i[3472+(h+512+p)>>0]|0;r=e+(r+3)|0;n=i[3472+((s[t+60>>2]|0)+512+(o[r>>0]|0))>>0]|0;i[l>>0]=i[3472+(c+512+u)>>0]|0;i[r>>0]=n;d=a;return}function kn(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0;g=d;c=e+-1|0;u=i[e+1>>0]|0;p=o[c>>0]|0;h=o[e>>0]|0;v=p-h|0;m=n+4|0;do if((((v|0)>-1?v:0-v|0)>>>0<(s[m>>2]|0)>>>0?(f=o[e+-2>>0]|0,v=f-p|0,l=s[n+8>>2]|0,((v|0)>-1?v:0-v|0)>>>0<l>>>0):0)?(a=u&255,u=a-h|0,((u|0)>-1?u:0-u|0)>>>0<l>>>0):0)if(t>>>0<4){u=o[(s[n>>2]|0)+(t+-1)>>0]|0;u=Ct(~u,u+1|0,4-a+(h-p<<2)+f>>3)|0;f=i[3472+((h|512)-u)>>0]|0;i[c>>0]=i[3472+((p|512)+u)>>0]|0;i[e>>0]=f;break}else{i[c>>0]=(p+2+a+(f<<1)|0)>>>2;i[e>>0]=(h+2+(a<<1)+f|0)>>>2;break}while(0);c=e+r|0;p=e+(r+-1)|0;f=o[p>>0]|0;h=o[c>>0]|0;u=f-h|0;if(((u|0)>-1?u:0-u|0)>>>0>=(s[m>>2]|0)>>>0){d=g;return}u=o[e+(r+-2)>>0]|0;m=u-f|0;l=s[n+8>>2]|0;if(((m|0)>-1?m:0-m|0)>>>0>=l>>>0){d=g;return}a=o[e+(r+1)>>0]|0;r=a-h|0;if(((r|0)>-1?r:0-r|0)>>>0>=l>>>0){d=g;return}if(t>>>0<4){e=o[(s[n>>2]|0)+(t+-1)>>0]|0;e=Ct(~e,e+1|0,4-a+(h-f<<2)+u>>3)|0;r=i[3472+((h|512)-e)>>0]|0;i[p>>0]=i[3472+((f|512)+e)>>0]|0;i[c>>0]=r;d=g;return}else{i[p>>0]=(f+2+a+(u<<1)|0)>>>2;i[c>>0]=(h+2+(a<<1)+u|0)>>>2;d=g;return}}function Rn(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0;_=d;if(t>>>0<4){h=o[(s[n>>2]|0)+(t+-1)>>0]|0;a=h+1|0;g=0-r|0;t=n+4|0;m=g<<1;f=n+8|0;h=~h;l=8;while(1){p=e+g|0;n=i[e+r>>0]|0;c=o[p>>0]|0;u=o[e>>0]|0;v=c-u|0;if((((v|0)>-1?v:0-v|0)>>>0<(s[t>>2]|0)>>>0?(y=o[e+m>>0]|0,v=y-c|0,b=s[f>>2]|0,((v|0)>-1?v:0-v|0)>>>0<b>>>0):0)?(w=n&255,n=w-u|0,((n|0)>-1?n:0-n|0)>>>0<b>>>0):0){v=Ct(h,a,4-w+(u-c<<2)+y>>3)|0;n=i[3472+((u|512)-v)>>0]|0;i[p>>0]=i[3472+((c|512)+v)>>0]|0;i[e>>0]=n}l=l+-1|0;if(!l)break;else e=e+1|0}d=_;return}else{f=0-r|0;p=n+4|0;h=f<<1;n=n+8|0;c=8;while(1){a=e+f|0;t=i[e+r>>0]|0;l=o[a>>0]|0;u=o[e>>0]|0;b=l-u|0;if((((b|0)>-1?b:0-b|0)>>>0<(s[p>>2]|0)>>>0?(m=o[e+h>>0]|0,b=m-l|0,g=s[n>>2]|0,((b|0)>-1?b:0-b|0)>>>0<g>>>0):0)?(v=t&255,t=v-u|0,((t|0)>-1?t:0-t|0)>>>0<g>>>0):0){i[a>>0]=(l+2+v+(m<<1)|0)>>>2;i[e>>0]=(u+2+(v<<1)+m|0)>>>2}c=c+-1|0;if(!c)break;else e=e+1|0}d=_;return}}function Dn(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0;y=d;v=o[(s[n>>2]|0)+(t+-1)>>0]|0;b=v+1|0;c=0-r|0;a=n+4|0;g=c<<1;t=n+8|0;v=~v;c=e+c|0;p=i[e+r>>0]|0;u=o[c>>0]|0;l=o[e>>0]|0;w=u-l|0;n=s[a>>2]|0;if((((w|0)>-1?w:0-w|0)>>>0<n>>>0?(f=o[e+g>>0]|0,w=f-u|0,h=s[t>>2]|0,((w|0)>-1?w:0-w|0)>>>0<h>>>0):0)?(m=p&255,p=m-l|0,((p|0)>-1?p:0-p|0)>>>0<h>>>0):0){m=Ct(v,b,4-m+(l-u<<2)+f>>3)|0;n=i[3472+((l|512)-m)>>0]|0;i[c>>0]=i[3472+((u|512)+m)>>0]|0;i[e>>0]=n;n=s[a>>2]|0}p=e+1|0;l=e+(1-r)|0;u=o[l>>0]|0;c=o[p>>0]|0;m=u-c|0;if(((m|0)>-1?m:0-m|0)>>>0>=n>>>0){d=y;return}a=o[e+(g|1)>>0]|0;m=a-u|0;n=s[t>>2]|0;if(((m|0)>-1?m:0-m|0)>>>0>=n>>>0){d=y;return}t=o[e+(r+1)>>0]|0;m=t-c|0;if(((m|0)>-1?m:0-m|0)>>>0>=n>>>0){d=y;return}f=Ct(v,b,4-t+(c-u<<2)+a>>3)|0;m=i[3472+((c|512)-f)>>0]|0;i[l>>0]=i[3472+((u|512)+f)>>0]|0;i[p>>0]=m;d=y;return}function An(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0;v=d;m=s[t+4>>2]|0;g=s[t+8>>2]|0;if(!((n|0)==0|(n|0)==5)?(s[e+3384>>2]|0)==0:0)r=0;else{o=e+1220|0;i=0;do{r=qe(o,i)|0;i=i+1|0}while(i>>>0<16&(r|0)==0)}c=e+1176|0;h=s[c>>2]|0;if(h){p=s[e+1212>>2]|0;i=0;l=0;o=0;do{if(s[p+(l*216|0)+196>>2]|0)break;l=l+1|0;i=i+1|0;f=(i|0)==(m|0);o=(f&1)+o|0;i=f?0:i}while(l>>>0<h>>>0);if((l|0)!=(h|0)){f=e+1212|0;h=s[f>>2]|0;l=ee(o,m)|0;if(i){c=e+1204|0;a=i;do{a=a+-1|0;p=a+l|0;Pn(h+(p*216|0)|0,t,o,a,n,r);s[h+(p*216|0)+196>>2]=1;s[c>>2]=(s[c>>2]|0)+1}while((a|0)!=0)}i=i+1|0;if(i>>>0<m>>>0){p=e+1204|0;do{c=i+l|0;u=h+(c*216|0)+196|0;if(!(s[u>>2]|0)){Pn(h+(c*216|0)|0,t,o,i,n,r);s[u>>2]=1;s[p>>2]=(s[p>>2]|0)+1}i=i+1|0}while((i|0)!=(m|0))}if(o){if(m){h=o+-1|0;a=ee(h,m)|0;i=e+1204|0;c=0-m|0;u=0;do{p=h;l=(s[f>>2]|0)+((u+a|0)*216|0)|0;while(1){Pn(l,t,p,u,n,r);s[l+196>>2]=1;s[i>>2]=(s[i>>2]|0)+1;if(!p)break;else{p=p+-1|0;l=l+(c*216|0)|0}}u=u+1|0}while((u|0)!=(m|0))}}else o=0;o=o+1|0;if(o>>>0>=g>>>0){d=v;return 0}p=e+1204|0;if(!m){d=v;return 0}do{i=s[f>>2]|0;c=ee(o,m)|0;u=0;do{a=u+c|0;l=i+(a*216|0)+196|0;if(!(s[l>>2]|0)){Pn(i+(a*216|0)|0,t,o,u,n,r);s[l>>2]=1;s[p>>2]=(s[p>>2]|0)+1}u=u+1|0}while((u|0)!=(m|0));o=o+1|0}while((o|0)!=(g|0));d=v;return 0}}if((n|0)==2|(n|0)==7)if((s[e+3384>>2]|0)==0|(r|0)==0)o=13;else o=14;else if(!r)o=13;else o=14;if((o|0)==13)di(s[t>>2]|0,128,ee(m*384|0,g)|0);else if((o|0)==14)ci(s[t>>2]|0,r,ee(m*384|0,g)|0);o=s[c>>2]|0;s[e+1204>>2]=o;if(!o){d=v;return 0}i=s[e+1212>>2]|0;r=0;do{s[i+(r*216|0)+8>>2]=1;r=r+1|0}while(r>>>0<o>>>0);d=v;return 0}function Pn(e,t,n,r,a,l){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;l=l|0;var u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0,V=0,B=0,U=0,j=0,H=0,G=0,q=0,W=0,z=0,K=0,Y=0,X=0,Q=0,$=0,J=0,Z=0,te=0,ne=0,ie=0,re=0,se=0,oe=0,ae=0,le=0,ue=0,ce=0,de=0,pe=0,he=0,fe=0,me=0,ge=0,ve=0,be=0,ye=0;be=d;d=d+480|0;ge=be+96|0;ve=be+32|0;p=be+24|0;h=be;he=s[t+4>>2]|0;w=s[t+8>>2]|0;_t(t,(ee(he,n)|0)+r|0);m=s[t>>2]|0;u=n<<4;c=r<<4;f=(ee(n<<8,he)|0)+c|0;s[e+20>>2]=40;s[e+8>>2]=0;s[e>>2]=6;s[e+12>>2]=0;s[e+16>>2]=0;s[e+24>>2]=0;do if((a|0)==2|(a|0)==7)di(ge,0,384);else{s[p>>2]=0;s[h+4>>2]=he;s[h+8>>2]=w;s[h>>2]=l;if(!l){di(ge,0,384);break}Be(ge,p,h,c,u,0,0,16,16);et(t,ge);d=be;return}while(0);di(ve,0,64);if((n|0)!=0?(s[e+((0-he|0)*216|0)+196>>2]|0)!=0:0){_=f-(he<<4)|0;A=_|1;D=_|3;A=(o[m+A>>0]|0)+(o[m+_>>0]|0)+(o[m+(A+1)>>0]|0)+(o[m+D>>0]|0)|0;J=_|7;D=(o[m+(D+2)>>0]|0)+(o[m+(D+1)>>0]|0)+(o[m+(D+3)>>0]|0)+(o[m+J>>0]|0)|0;P=(o[m+(J+2)>>0]|0)+(o[m+(J+1)>>0]|0)+(o[m+(J+3)>>0]|0)+(o[m+(J+4)>>0]|0)|0;_=(o[m+(J+6)>>0]|0)+(o[m+(J+5)>>0]|0)+(o[m+(J+7)>>0]|0)+(o[m+(_|15)>>0]|0)|0;J=D+A|0;s[ve>>2]=P+J+(s[ve>>2]|0)+_;b=ve+4|0;s[b>>2]=J-P-_+(s[b>>2]|0);b=1}else{A=0;D=0;P=0;_=0;b=0}if((w+-1|0)!=(n|0)?(s[e+(he*216|0)+196>>2]|0)!=0:0){T=f+(he<<8)|0;C=T|1;S=T|3;C=(o[m+C>>0]|0)+(o[m+T>>0]|0)+(o[m+(C+1)>>0]|0)+(o[m+S>>0]|0)|0;v=T|7;S=(o[m+(S+2)>>0]|0)+(o[m+(S+1)>>0]|0)+(o[m+(S+3)>>0]|0)+(o[m+v>>0]|0)|0;E=(o[m+(v+2)>>0]|0)+(o[m+(v+1)>>0]|0)+(o[m+(v+3)>>0]|0)+(o[m+(v+4)>>0]|0)|0;T=(o[m+(v+6)>>0]|0)+(o[m+(v+5)>>0]|0)+(o[m+(v+7)>>0]|0)+(o[m+(T|15)>>0]|0)|0;v=S+C|0;s[ve>>2]=E+v+(s[ve>>2]|0)+T;y=ve+4|0;s[y>>2]=v-E-T+(s[y>>2]|0);y=1;v=b+1|0}else{y=0;C=0;S=0;E=0;T=0;v=b}if((r|0)!=0?(s[e+-20>>2]|0)!=0:0){$=f+-1|0;J=he<<4;l=he<<5;pe=he*48|0;R=(o[m+($+J)>>0]|0)+(o[m+$>>0]|0)+(o[m+($+l)>>0]|0)+(o[m+($+pe)>>0]|0)|0;a=he<<6;$=$+a|0;k=(o[m+($+J)>>0]|0)+(o[m+$>>0]|0)+(o[m+($+l)>>0]|0)+(o[m+($+pe)>>0]|0)|0;$=$+a|0;x=(o[m+($+J)>>0]|0)+(o[m+$>>0]|0)+(o[m+($+l)>>0]|0)+(o[m+($+pe)>>0]|0)|0;a=$+a|0;pe=(o[m+(a+J)>>0]|0)+(o[m+a>>0]|0)+(o[m+(a+l)>>0]|0)+(o[m+(a+pe)>>0]|0)|0;a=k+R|0;s[ve>>2]=x+a+(s[ve>>2]|0)+pe;l=ve+16|0;s[l>>2]=a-x-pe+(s[l>>2]|0);l=v+1|0;a=1}else{l=v;R=0;k=0;x=0;pe=0;a=0}do if((he+-1|0)!=(r|0)?(s[e+412>>2]|0)!=0:0){J=f+16|0;h=he<<4;p=he<<5;f=he*48|0;e=(o[m+(J+h)>>0]|0)+(o[m+J>>0]|0)+(o[m+(J+p)>>0]|0)+(o[m+(J+f)>>0]|0)|0;g=he<<6;J=J+g|0;c=(o[m+(J+h)>>0]|0)+(o[m+J>>0]|0)+(o[m+(J+p)>>0]|0)+(o[m+(J+f)>>0]|0)|0;J=J+g|0;u=(o[m+(J+h)>>0]|0)+(o[m+J>>0]|0)+(o[m+(J+p)>>0]|0)+(o[m+(J+f)>>0]|0)|0;g=J+g|0;f=(o[m+(g+h)>>0]|0)+(o[m+g>>0]|0)+(o[m+(g+p)>>0]|0)+(o[m+(g+f)>>0]|0)|0;m=l+1|0;g=a+1|0;l=c+e|0;s[ve>>2]=u+l+(s[ve>>2]|0)+f;p=ve+16|0;l=l-u-f+(s[p>>2]|0)|0;s[p>>2]=l;p=(v|0)==0;h=(a|0)!=0;if(!(p&h)){if(!p){p=1;l=m;a=g;c=21;break}}else s[ve+4>>2]=x+pe+k+R-e-c-u-f>>5;p=1;f=(b|0)!=0;e=(y|0)!=0;a=g;c=27}else c=17;while(0);if((c|0)==17){h=(a|0)!=0;if(!v){p=0;m=l;c=23}else{p=0;c=21}}if((c|0)==21){m=ve+4|0;s[m>>2]=s[m>>2]>>v+3;m=l;c=23}do if((c|0)==23){l=(a|0)==0;f=(b|0)!=0;e=(y|0)!=0;if(l&f&e){s[ve+16>>2]=P+_+D+A-T-E-S-C>>5;me=p;a=m;fe=h;f=1;e=1;break}if(l){me=p;a=m;fe=h}else{l=s[ve+16>>2]|0;c=27}}while(0);if((c|0)==27){s[ve+16>>2]=l>>a+3;me=p;a=m;fe=h}if((a|0)==1)s[ve>>2]=s[ve>>2]>>4;else if((a|0)==2)s[ve>>2]=s[ve>>2]>>5;else if((a|0)==3)s[ve>>2]=(s[ve>>2]|0)*21>>10;else s[ve>>2]=s[ve>>2]>>6;In(ve);h=0;l=ge;p=ve;while(1){a=s[p+((h>>>2&3)<<2)>>2]|0;if((a|0)<0)a=0;else a=(a|0)>255?-1:a&255;i[l>>0]=a;a=h+1|0;if((a|0)==256)break;else{h=a;l=l+1|0;p=(a&63|0)==0?p+16|0:p}}ye=ee(w,he)|0;K=he<<3;Q=0-K|0;I=Q|1;$=I+1|0;J=Q|3;Z=J+1|0;te=J+2|0;ne=J+3|0;ie=Q|7;Y=ve+4|0;ce=he<<6;M=ce|1;re=M+1|0;se=ce|3;oe=se+1|0;ae=se+2|0;le=se+3|0;ue=ce|7;O=K+-1|0;z=he<<4;N=z+-1|0;L=N+K|0;F=N+z|0;V=F+K|0;B=F+z|0;U=B+K|0;X=ve+16|0;j=K+8|0;H=z|8;G=H+K|0;q=H+z|0;W=q+K|0;z=q+z|0;K=z+K|0;de=ye<<6;g=A;m=D;a=P;y=_;h=C;l=S;c=E;w=T;P=0;p=R;u=k;v=x;b=pe;A=(s[t>>2]|0)+((ee(n<<6,he)|0)+(r<<3)+(ye<<8))|0;while(1){di(ve,0,64);if(f){g=(o[A+I>>0]|0)+(o[A+Q>>0]|0)|0;m=(o[A+J>>0]|0)+(o[A+$>>0]|0)|0;T=(o[A+te>>0]|0)+(o[A+Z>>0]|0)|0;x=(o[A+ie>>0]|0)+(o[A+ne>>0]|0)|0;y=m+g|0;s[ve>>2]=T+y+(s[ve>>2]|0)+x;s[Y>>2]=y-T-x+(s[Y>>2]|0);y=1}else{T=a;x=y;y=0}if(e){k=(o[A+M>>0]|0)+(o[A+ce>>0]|0)|0;R=(o[A+se>>0]|0)+(o[A+re>>0]|0)|0;D=(o[A+ae>>0]|0)+(o[A+oe>>0]|0)|0;w=(o[A+ue>>0]|0)+(o[A+le>>0]|0)|0;a=R+k|0;s[ve>>2]=D+a+(s[ve>>2]|0)+w;s[Y>>2]=a-D-w+(s[Y>>2]|0);a=y+1|0}else{k=h;R=l;D=c;a=y}if(fe){_=(o[A+O>>0]|0)+(o[A+-1>>0]|0)|0;C=(o[A+L>>0]|0)+(o[A+N>>0]|0)|0;S=(o[A+V>>0]|0)+(o[A+F>>0]|0)|0;E=(o[A+U>>0]|0)+(o[A+B>>0]|0)|0;y=C+_|0;s[ve>>2]=S+y+(s[ve>>2]|0)+E;s[X>>2]=y-S-E+(s[X>>2]|0);y=a+1|0;b=1}else{y=a;_=p;C=u;S=v;E=b;b=0}do if(me){c=(o[A+j>>0]|0)+(o[A+8>>0]|0)|0;p=(o[A+G>>0]|0)+(o[A+H>>0]|0)|0;l=(o[A+W>>0]|0)+(o[A+q>>0]|0)|0;h=(o[A+K>>0]|0)+(o[A+z>>0]|0)|0;y=y+1|0;b=b+1|0;u=p+c|0;s[ve>>2]=l+u+(s[ve>>2]|0)+h;u=u-l-h+(s[X>>2]|0)|0;s[X>>2]=u;v=(a|0)==0;if(!(v&fe))if(v){c=54;break}else{c=49;break}else{s[Y>>2]=S+E+C+_-c-p-l-h>>4;c=54;break}}else if(!a){v=b;c=50}else c=49;while(0);if((c|0)==49){s[Y>>2]=s[Y>>2]>>a+2;v=b;c=50}do if((c|0)==50){c=0;b=(v|0)==0;if(b&f&e){s[X>>2]=T+x+m+g-w-D-R-k>>4;break}if(!b){u=s[X>>2]|0;b=v;c=54}}while(0);if((c|0)==54)s[X>>2]=u>>b+2;if((y|0)==1)s[ve>>2]=s[ve>>2]>>3;else if((y|0)==2)s[ve>>2]=s[ve>>2]>>4;else if((y|0)==3)s[ve>>2]=(s[ve>>2]|0)*21>>9;else s[ve>>2]=s[ve>>2]>>5;In(ve);b=0;v=ge+((P<<6)+256)|0;u=ve;while(1){y=s[u+((b>>>1&3)<<2)>>2]|0;if((y|0)<0)y=0;else y=(y|0)>255?-1:y&255;i[v>>0]=y;y=b+1|0;if((y|0)==64)break;else{b=y;v=v+1|0;u=(y&15|0)==0?u+16|0:u}}P=P+1|0;if((P|0)==2)break;else{a=T;y=x;h=k;l=R;c=D;p=_;u=C;v=S;b=E;A=A+de|0}}et(t,ge);d=be;return}function In(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,a=0,l=0,u=0;a=d;r=e+4|0;t=s[r>>2]|0;o=e+16|0;n=s[o>>2]|0;i=s[e>>2]|0;if(!(t|n)){s[e+60>>2]=i;s[e+56>>2]=i;s[e+52>>2]=i;s[e+48>>2]=i;s[e+44>>2]=i;s[e+40>>2]=i;s[e+36>>2]=i;s[e+32>>2]=i;s[e+28>>2]=i;s[e+24>>2]=i;s[e+20>>2]=i;s[o>>2]=i;s[e+12>>2]=i;s[e+8>>2]=i;s[r>>2]=i;d=a;return}else{u=t+i|0;o=t>>1;l=o+i|0;o=i-o|0;t=i-t|0;s[e>>2]=n+u;i=n>>1;s[e+16>>2]=i+u;s[e+32>>2]=u-i;s[e+48>>2]=u-n;s[r>>2]=n+l;s[e+20>>2]=i+l;s[e+36>>2]=l-i;s[e+52>>2]=l-n;s[e+8>>2]=n+o;s[e+24>>2]=i+o;s[e+40>>2]=o-i;s[e+56>>2]=o-n;s[e+12>>2]=n+t;s[e+28>>2]=i+t;s[e+44>>2]=t-i;s[e+60>>2]=t-n;d=a;return}}function Mn(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0;a=d;di(t,0,952);n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t>>2]=n&1;do if(n){n=Wt(e,8)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+4>>2]=n;if((n|0)==255){n=Wt(e,16)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+8>>2]=n;n=Wt(e,16)|0;if((n|0)==-1){n=1;d=a;return n|0}else{s[t+12>>2]=n;break}}}while(0);n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t+16>>2]=n&1;do if(n){n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}else{s[t+20>>2]=(n|0)==1&1;break}}while(0);n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t+24>>2]=n&1;do if(n){n=Wt(e,3)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+28>>2]=n;n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+32>>2]=(n|0)==1&1;n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t+36>>2]=n&1;if(!n){s[t+40>>2]=2;s[t+44>>2]=2;s[t+48>>2]=2;break}n=Wt(e,8)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+40>>2]=n;n=Wt(e,8)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+44>>2]=n;n=Wt(e,8)|0;if((n|0)==-1){n=1;d=a;return n|0}else{s[t+48>>2]=n;break}}else{s[t+28>>2]=5;s[t+40>>2]=2;s[t+44>>2]=2;s[t+48>>2]=2}while(0);n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t+52>>2]=n&1;if(n){n=t+56|0;i=Xt(e,n)|0;if(i){n=i;d=a;return n|0}if((s[n>>2]|0)>>>0>5){n=1;d=a;return n|0}n=t+60|0;i=Xt(e,n)|0;if(i){n=i;d=a;return n|0}if((s[n>>2]|0)>>>0>5){n=1;d=a;return n|0}}n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t+64>>2]=n&1;do if(n){n=zt(e)|0;if((Kt(e,32)|0)==-1|(n|0)==0){n=1;d=a;return n|0}s[t+68>>2]=n;n=zt(e)|0;if((Kt(e,32)|0)==-1|(n|0)==0){n=1;d=a;return n|0}s[t+72>>2]=n;n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}else{s[t+76>>2]=(n|0)==1&1;break}}while(0);n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;r=t+80|0;s[r>>2]=n&1;if(n){i=On(e,t+84|0)|0;if(i){n=i;d=a;return n|0}}else{s[t+84>>2]=1;s[t+96>>2]=288000001;s[t+224>>2]=288000001;s[t+480>>2]=24;s[t+484>>2]=24;s[t+488>>2]=24;s[t+492>>2]=24}i=Wt(e,1)|0;if((i|0)==-1){n=1;d=a;return n|0}i=(i|0)==1;n=t+496|0;s[n>>2]=i&1;if(i){i=On(e,t+500|0)|0;if(i){n=i;d=a;return n|0}}else{s[t+500>>2]=1;s[t+512>>2]=240000001;s[t+640>>2]=240000001;s[t+896>>2]=24;s[t+900>>2]=24;s[t+904>>2]=24;s[t+908>>2]=24}if(!((s[r>>2]|0)==0?(s[n>>2]|0)==0:0))o=46;do if((o|0)==46){n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}else{s[t+912>>2]=(n|0)==1&1;break}}while(0);n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+916>>2]=(n|0)==1&1;n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}n=(n|0)==1;s[t+920>>2]=n&1;do if(n){n=Wt(e,1)|0;if((n|0)==-1){n=1;d=a;return n|0}s[t+924>>2]=(n|0)==1&1;i=t+928|0;n=Xt(e,i)|0;if(n){d=a;return n|0}if((s[i>>2]|0)>>>0>16){n=1;d=a;return n|0}i=t+932|0;n=Xt(e,i)|0;if(n){d=a;return n|0}if((s[i>>2]|0)>>>0>16){n=1;d=a;return n|0}i=t+936|0;n=Xt(e,i)|0;if(n){d=a;return n|0}if((s[i>>2]|0)>>>0>16){n=1;d=a;return n|0}i=t+940|0;n=Xt(e,i)|0;if(n){d=a;return n|0}if((s[i>>2]|0)>>>0>16){n=1;d=a;return n|0}n=Xt(e,t+944|0)|0;if(n){d=a;return n|0}n=Xt(e,t+948|0)|0;if(!n)break;d=a;return n|0}else{s[t+924>>2]=1;s[t+928>>2]=2;s[t+932>>2]=1;s[t+936>>2]=16;s[t+940>>2]=16;s[t+944>>2]=16;s[t+948>>2]=16}while(0);n=0;d=a;return n|0}function On(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,a=0,l=0,u=0;u=d;n=Xt(e,t)|0;if(n){d=u;return n|0}n=(s[t>>2]|0)+1|0;s[t>>2]=n;if(n>>>0>32){n=1;d=u;return n|0}n=Wt(e,4)|0;if((n|0)==-1){n=1;d=u;return n|0}l=t+4|0;s[l>>2]=n;i=Wt(e,4)|0;if((i|0)==-1){n=1;d=u;return n|0}a=t+8|0;s[a>>2]=i;e:do if(s[t>>2]|0){o=0;while(1){r=t+(o<<2)+12|0;n=Xt(e,r)|0;if(n){i=17;break}i=s[r>>2]|0;if((i|0)==-1){n=1;i=17;break}n=i+1|0;s[r>>2]=n;s[r>>2]=n<<(s[l>>2]|0)+6;r=t+(o<<2)+140|0;n=Xt(e,r)|0;if(n){i=17;break}i=s[r>>2]|0;if((i|0)==-1){n=1;i=17;break}i=i+1|0;s[r>>2]=i;s[r>>2]=i<<(s[a>>2]|0)+4;i=Wt(e,1)|0;if((i|0)==-1){n=1;i=17;break}s[t+(o<<2)+268>>2]=(i|0)==1&1;o=o+1|0;if(o>>>0>=(s[t>>2]|0)>>>0)break e}if((i|0)==17){d=u;return n|0}}while(0);n=Wt(e,5)|0;if((n|0)==-1){n=1;d=u;return n|0}s[t+396>>2]=n+1;n=Wt(e,5)|0;if((n|0)==-1){n=1;d=u;return n|0}s[t+400>>2]=n+1;n=Wt(e,5)|0;if((n|0)==-1){n=1;d=u;return n|0}s[t+404>>2]=n+1;n=Wt(e,5)|0;if((n|0)==-1){n=1;d=u;return n|0}s[t+408>>2]=n;n=0;d=u;return n|0}function Nn(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0;m=d;e:do if(!(s[n+284>>2]|0))f=0;else{a=0;while(1){l=s[n+(a*20|0)+288>>2]|0;if((l|0)==5){f=1;break e}else if(!l)break;a=a+1|0}f=0}while(0);l=s[t+16>>2]|0;if((l|0)==1){if((s[i>>2]|0)!=5){r=s[e+12>>2]|0;if((s[e+8>>2]|0)>>>0>(s[n+12>>2]|0)>>>0)r=(s[t+12>>2]|0)+r|0}else r=0;p=s[t+36>>2]|0;a=(p|0)==0;if(a)l=0;else l=(s[n+12>>2]|0)+r|0;i=(s[i+4>>2]|0)==0;u=((i&(l|0)!=0)<<31>>31)+l|0;c=(u|0)!=0;if(c){o=u+-1|0;h=(o>>>0)%(p>>>0)|0;o=(o>>>0)/(p>>>0)|0}else{h=0;o=0}if(a)l=0;else{u=s[t+40>>2]|0;l=0;a=0;do{l=(s[u+(a<<2)>>2]|0)+l|0;a=a+1|0}while(a>>>0<p>>>0)}if(c){o=ee(l,o)|0;u=s[t+40>>2]|0;l=0;do{o=(s[u+(l<<2)>>2]|0)+o|0;l=l+1|0}while(l>>>0<=h>>>0)}else o=0;if(i)l=(s[t+28>>2]|0)+o|0;else l=o;o=(s[n+32>>2]|0)+(s[t+32>>2]|0)|0;a=e+12|0;if(!f){t=((o|0)<0?o:0)+l+(s[n+28>>2]|0)|0;s[a>>2]=r;s[e+8>>2]=s[n+12>>2];d=m;return t|0}else{s[a>>2]=0;s[e+8>>2]=0;t=0;d=m;return t|0}}else if(!l){if((s[i>>2]|0)!=5){a=s[e>>2]|0;l=s[n+20>>2]|0;if(a>>>0>l>>>0?(u=s[t+20>>2]|0,(a-l|0)>>>0>=u>>>1>>>0):0){a=(s[e+4>>2]|0)+u|0;u=e}else{u=e;p=11}}else{s[e+4>>2]=0;s[e>>2]=0;l=s[n+20>>2]|0;a=0;u=e;p=11}do if((p|0)==11){if(l>>>0>a>>>0?(o=s[t+20>>2]|0,(l-a|0)>>>0>o>>>1>>>0):0){a=(s[e+4>>2]|0)-o|0;break}a=s[e+4>>2]|0}while(0);if(!(s[i+4>>2]|0)){t=s[n+24>>2]|0;t=l+a+((t|0)<0?t:0)|0;d=m;return t|0}s[e+4>>2]=a;r=s[n+24>>2]|0;o=(r|0)<0;if(!f){s[u>>2]=l;t=l+a+(o?r:0)|0;d=m;return t|0}else{s[e+4>>2]=0;s[u>>2]=o?0-r|0:0;t=0;d=m;return t|0}}else{if((s[i>>2]|0)==5){u=0;o=0;r=e+12|0}else{l=s[n+12>>2]|0;r=e+12|0;a=s[r>>2]|0;if((s[e+8>>2]|0)>>>0>l>>>0)a=(s[t+12>>2]|0)+a|0;u=a;o=(l+a<<1)+(((s[i+4>>2]|0)==0)<<31>>31)|0}if(!f){s[r>>2]=u;s[e+8>>2]=s[n+12>>2];t=o;d=m;return t|0}else{s[r>>2]=0;s[e+8>>2]=0;t=0;d=m;return t|0}}return 0}function Ln(e,t){e=e|0;t=t|0;var n=0,i=0;n=d;un(e);i=li(2112)|0;s[e+3376>>2]=i;if(i)if(!t)t=0;else{s[e+1216>>2]=1;t=0}else t=1;d=n;return t|0}function Fn(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0;v=d;d=d+208|0;c=v+204|0;m=v;o=v+112|0;a=v+40|0;g=v+16|0;l=v+12|0;h=v+8|0;s[l>>2]=0;f=e+3344|0;if((s[f>>2]|0)!=0?(s[e+3348>>2]|0)==(t|0):0){t=e+3356|0;s[g+0>>2]=s[t+0>>2];s[g+4>>2]=s[t+4>>2];s[g+8>>2]=s[t+8>>2];s[g+12>>2]=s[t+12>>2];s[g+4>>2]=s[g>>2];s[g+8>>2]=0;s[g+16>>2]=0;s[r>>2]=s[e+3352>>2]}else u=4;do if((u|0)==4)if(!(St(t,n,g,r)|0)){n=e+3356|0;s[n+0>>2]=s[g+0>>2];s[n+4>>2]=s[g+4>>2];s[n+8>>2]=s[g+8>>2];s[n+12>>2]=s[g+12>>2];s[n+16>>2]=s[g+16>>2];s[e+3352>>2]=s[r>>2];s[e+3348>>2]=t;break}else{h=3;d=v;return h|0}while(0);s[f>>2]=0;if(en(g,m)|0){h=3;d=v;return h|0}if(((s[m>>2]|0)+-1|0)>>>0>11){h=0;d=v;return h|0}t=vn(g,m,e,l)|0;if(!t){do if(!(s[l>>2]|0))u=19;else{if((s[e+1184>>2]|0)!=0?(s[e+16>>2]|0)!=0:0){if(s[e+3380>>2]|0){h=3;d=v;return h|0}if(!(s[e+1188>>2]|0)){p=e+1220|0;h=e+1336|0;s[h>>2]=We(p)|0;Xe(p);An(e,h,0)|0}else An(e,e+1336|0,s[e+1372>>2]|0)|0;s[r>>2]=0;s[f>>2]=1;s[e+1180>>2]=0;o=e+1336|0;t=e+1360|0;break}s[e+1188>>2]=0;s[e+1180>>2]=0;u=19}while(0);do if((u|0)==19){t=s[m>>2]|0;if((t|0)==8)if(!(xt(g,a)|0)){dn(e,a)|0;h=0;d=v;return h|0}else{h=a+20|0;ui(s[h>>2]|0);s[h>>2]=0;h=a+24|0;ui(s[h>>2]|0);s[h>>2]=0;h=a+28|0;ui(s[h>>2]|0);s[h>>2]=0;h=a+44|0;ui(s[h>>2]|0);s[h>>2]=0;h=3;d=v;return h|0}else if((t|0)==7)if(!(Et(g,o)|0)){cn(e,o)|0;h=0;d=v;return h|0}else{h=o+40|0;ui(s[h>>2]|0);s[h>>2]=0;h=o+84|0;ui(s[h>>2]|0);s[h>>2]=0;h=3;d=v;return h|0}else if((t|0)==1|(t|0)==5){u=e+1180|0;if(s[e+1180>>2]|0){h=0;d=v;return h|0}s[e+1184>>2]=1;if(fn(e)|0){s[e+1204>>2]=0;s[e+1208>>2]=i;Rt(g,c)|0;l=e+8|0;n=s[l>>2]|0;t=pn(e,s[c>>2]|0,(s[m>>2]|0)==5&1)|0;if(t){s[e+4>>2]=256;s[e+12>>2]=0;s[l>>2]=32;s[e+16>>2]=0;s[e+3380>>2]=0;h=(t|0)==65535?5:4;d=v;return h|0}if((n|0)!=(s[l>>2]|0)){n=s[e+16>>2]|0;s[h>>2]=1;t=s[e>>2]|0;if(t>>>0<32)t=s[e+(t<<2)+20>>2]|0;else t=0;s[r>>2]=0;s[f>>2]=1;if((((((s[m>>2]|0)==5?(c=Ot(h,g,n,s[e+12>>2]|0,5)|0,(s[h>>2]|c|0)==0):0)?(p=e+1220|0,!((s[e+1276>>2]|0)!=0|(t|0)==0)):0)?(s[t+52>>2]|0)==(s[n+52>>2]|0):0)?(s[t+56>>2]|0)==(s[n+56>>2]|0):0)?(s[t+88>>2]|0)==(s[n+88>>2]|0):0)Je(p);else s[e+1280>>2]=0;s[e>>2]=s[l>>2];h=2;d=v;return h|0}}if(s[e+3380>>2]|0){h=3;d=v;return h|0}a=e+1368|0;l=e+2356|0;t=e+16|0;if(kt(g,l,s[t>>2]|0,s[e+12>>2]|0,m)|0){h=3;d=v;return h|0}if(!(fn(e)|0))n=e+1220|0;else{n=e+1220|0;if((s[m>>2]|0)!=5?(Qe(n,s[e+2368>>2]|0,(s[m+4>>2]|0)!=0&1,s[(s[t>>2]|0)+48>>2]|0)|0)!=0:0){h=3;d=v;return h|0}s[e+1336>>2]=We(n)|0}vi(a|0,l|0,988)|0;s[e+1188>>2]=1;t=e+1360|0;c=m;p=s[c+4>>2]|0;h=t;s[h>>2]=s[c>>2];s[h+4>>2]=p;gn(e,s[e+1432>>2]|0);Xe(n);if(He(n,e+1436|0,s[e+1380>>2]|0,s[e+1412>>2]|0)|0){h=3;d=v;return h|0}o=e+1336|0;if(Nt(g,e,o,a)|0){Lt(e,s[a>>2]|0);h=3;d=v;return h|0}if(mn(e)|0){s[u>>2]=1;break}else{h=0;d=v;return h|0}}else{h=0;d=v;return h|0}}while(0);nt(o,s[e+1212>>2]|0);hn(e);l=Nn(e+1284|0,s[e+16>>2]|0,e+1368|0,t)|0;n=e+1188|0;do if(s[n>>2]|0){a=e+1220|0;if(!(s[e+1364>>2]|0)){Ge(a,0,o,s[e+1380>>2]|0,l,(s[t>>2]|0)==5&1,s[e+1208>>2]|0,s[e+1204>>2]|0)|0;break}else{Ge(a,e+1644|0,o,s[e+1380>>2]|0,l,(s[t>>2]|0)==5&1,s[e+1208>>2]|0,s[e+1204>>2]|0)|0;break}}while(0);s[e+1184>>2]=0;s[n>>2]=0;h=1;d=v;return h|0}else if((t|0)==65520){h=4;d=v;return h|0}else{h=3;d=v;return h|0}return 0}function Vn(e){e=e|0;var t=0,n=0,i=0,r=0;r=d;i=0;do{n=e+(i<<2)+20|0;t=s[n>>2]|0;if(t){ui(s[t+40>>2]|0);s[(s[n>>2]|0)+40>>2]=0;ui(s[(s[n>>2]|0)+84>>2]|0);s[(s[n>>2]|0)+84>>2]=0;ui(s[n>>2]|0);s[n>>2]=0}i=i+1|0}while((i|0)!=32);i=0;do{n=e+(i<<2)+148|0;t=s[n>>2]|0;if(t){ui(s[t+20>>2]|0);s[(s[n>>2]|0)+20>>2]=0;ui(s[(s[n>>2]|0)+24>>2]|0);s[(s[n>>2]|0)+24>>2]=0;ui(s[(s[n>>2]|0)+28>>2]|0);s[(s[n>>2]|0)+28>>2]=0;ui(s[(s[n>>2]|0)+44>>2]|0);s[(s[n>>2]|0)+44>>2]=0;ui(s[n>>2]|0);s[n>>2]=0}i=i+1|0}while((i|0)!=256);t=e+3376|0;ui(s[t>>2]|0);s[t>>2]=0;t=e+1212|0;ui(s[t>>2]|0);s[t>>2]=0;t=e+1172|0;ui(s[t>>2]|0);s[t>>2]=0;Ye(e+1220|0);d=r;return}function Bn(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=d;e=$e(e+1220|0)|0;if(!e){e=0;d=r;return e|0}s[t>>2]=s[e+4>>2];s[n>>2]=s[e+12>>2];s[i>>2]=s[e+8>>2];e=s[e>>2]|0;d=r;return e|0}function Un(e){e=e|0;var t=0;t=d;e=s[e+16>>2]|0;if(!e){e=0;d=t;return e|0}e=s[e+52>>2]|0;d=t;return e|0}function jn(e){e=e|0;var t=0;t=d;e=s[e+16>>2]|0;if(!e){e=0;d=t;return e|0}e=s[e+56>>2]|0;d=t;return e|0}function Hn(e){e=e|0;var t=0;t=d;Je(e+1220|0);d=t;return}function Gn(e){e=e|0;var t=0;t=d;e=(bn(e)|0)==0&1;d=t;return e|0}function qn(e){e=e|0;var t=0,n=0;n=d;e=s[e+16>>2]|0;if(((((e|0)!=0?(s[e+80>>2]|0)!=0:0)?(t=s[e+84>>2]|0,(t|0)!=0):0)?(s[t+24>>2]|0)!=0:0)?(s[t+32>>2]|0)!=0:0){e=1;d=n;return e|0}e=0;d=n;return e|0}function Wn(e){e=e|0;var t=0,n=0;n=d;e=s[e+16>>2]|0;if(((((e|0)!=0?(s[e+80>>2]|0)!=0:0)?(t=s[e+84>>2]|0,(t|0)!=0):0)?(s[t+24>>2]|0)!=0:0)?(s[t+36>>2]|0)!=0:0)e=s[t+48>>2]|0;else e=2;d=n;return e|0}function zn(e,t,n,i,r,o){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;o=o|0;var a=0;a=d;e=s[e+16>>2]|0;if((e|0)!=0?(s[e+60>>2]|0)!=0:0){s[t>>2]=1;t=e+64|0;s[n>>2]=s[t>>2]<<1;s[i>>2]=(s[e+52>>2]<<4)-((s[e+68>>2]|0)+(s[t>>2]|0)<<1);t=e+72|0;s[r>>2]=s[t>>2]<<1;e=(s[e+56>>2]<<4)-((s[e+76>>2]|0)+(s[t>>2]|0)<<1)|0;s[o>>2]=e;d=a;return}s[t>>2]=0;s[n>>2]=0;s[i>>2]=0;s[r>>2]=0;e=0;s[o>>2]=e;d=a;return}function Kn(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0;r=d;e=s[e+16>>2]|0;e:do if((((e|0)!=0?(s[e+80>>2]|0)!=0:0)?(i=s[e+84>>2]|0,(i|0)!=0):0)?(s[i>>2]|0)!=0:0){e=s[i+4>>2]|0;do switch(e|0){case 11:{i=11;e=15;break e}case 255:{e=s[i+8>>2]|0;i=s[i+12>>2]|0;o=(e|0)==0|(i|0)==0;i=o?0:i;e=o?0:e;break e}case 2:{i=11;e=12;break e}case 12:{i=33;e=64;break e}case 13:{i=99;e=160;break e}case 3:{i=11;e=10;break e}case 5:{i=33;e=40;break e}case 6:
{i=11;e=24;break e}case 7:{i=11;e=20;break e}case 4:{i=11;e=16;break e}case 10:{i=11;e=18;break e}case 9:{i=33;e=80;break e}case 8:{i=11;e=32;break e}case 1:case 0:{i=e;break e}default:{i=0;e=0;break e}}while(0)}else{i=1;e=1}while(0);s[t>>2]=e;s[n>>2]=i;d=r;return}function Yn(e){e=e|0;e=s[e+16>>2]|0;if(!e)e=0;else e=s[e>>2]|0;return e|0}function Xn(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;r=d;do if(e){n=li(3396)|0;if(n){i=n+8|0;if(!(Ln(i,t)|0)){s[n>>2]=1;s[n+4>>2]=0;s[e>>2]=n;n=0;break}else{Vn(i);ui(n);n=-4;break}}else n=-4}else n=-1;while(0);d=r;return n|0}function Qn(e,t){e=e|0;t=t|0;var n=0,i=0;i=d;if((e|0)==0|(t|0)==0){e=-1;d=i;return e|0}n=e+8|0;if(!(s[e+24>>2]|0)){e=-6;d=i;return e|0}if(!(s[e+20>>2]|0)){e=-6;d=i;return e|0}s[t+4>>2]=(Un(n)|0)<<4;s[t+8>>2]=(jn(n)|0)<<4;s[t+12>>2]=qn(n)|0;s[t+16>>2]=Wn(n)|0;zn(n,t+28|0,t+32|0,t+36|0,t+40|0,t+44|0);Kn(n,t+20|0,t+24|0);s[t>>2]=Yn(n)|0;e=0;d=i;return e|0}function $n(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0;p=d;d=d+16|0;l=p;e:do if((!((t|0)==0|(n|0)==0)?(r=s[t>>2]|0,(r|0)!=0):0)?(o=s[t+4>>2]|0,(o|0)!=0):0)if((e|0)!=0?(i=s[e>>2]|0,(i|0)!=0):0){s[n>>2]=0;s[l>>2]=0;u=e+8|0;s[e+3392>>2]=s[t+12>>2];a=t+8|0;t=1;while(1){if((i|0)==2){c=8;break}i=Fn(u,r,o,s[a>>2]|0,l)|0;h=s[l>>2]|0;r=r+h|0;o=o-h|0;o=(o|0)<0?0:o;s[n>>2]=r;if((i|0)==4){i=(Gn(u)|0|o|0)==0;t=i?-2:t}else if((i|0)==5){t=-4;break e}else if((i|0)==2)break;else if((i|0)==1){c=13;break}if(!o)break e;i=s[e>>2]|0}if((c|0)==8){s[e>>2]=1;s[n>>2]=r+(s[l>>2]|0)}else if((c|0)==13){t=e+4|0;s[t>>2]=(s[t>>2]|0)+1;t=(o|0)==0?2:3;break}t=e+1288|0;if((s[t>>2]|0)!=0?(s[e+1244>>2]|0)!=(s[e+1248>>2]|0):0){s[t>>2]=0;s[e>>2]=2;t=3}else t=4}else t=-3;else t=-1;while(0);d=p;return t|0}function Jn(e){e=e|0;s[e>>2]=2;s[e+4>>2]=3;return}function Zn(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,a=0;a=d;d=d+16|0;r=a+8|0;i=a+4|0;o=a;if((e|0)==0|(t|0)==0){e=-1;d=a;return e|0}e=e+8|0;if(n)Hn(e);e=Bn(e,o,i,r)|0;if(!e){e=0;d=a;return e|0}s[t>>2]=e;s[t+4>>2]=s[o>>2];s[t+8>>2]=s[i>>2];s[t+12>>2]=s[r>>2];e=2;d=a;return e|0}function ei(e){e=e|0;var t=0,n=0;n=d;t=pi(e)|0;s[1792]=t;s[1791]=t;s[1790]=e;s[1793]=t+e;d=n;return t|0}function ti(e){e=e|0;s[1790]=e;return}function ni(){var e=0;e=d;s[1786]=s[1791];s[1787]=s[1790];do ri()|0;while((s[1787]|0)!=0);d=e;return}function ii(){var e=0,t=0;t=d;if(Xn(7176,0)|0){oe(7280)|0;e=s[1784]|0;if(e)hi(e)}else{s[1796]=1;s[1798]=1}d=t;return-1}function ri(){var e=0,t=0,n=0;t=d;s[1788]=s[1798];e=$n(s[1794]|0,7144,7200)|0;switch(e|0){case 4:{if(Qn(s[1794]|0,7208)|0){e=-1;d=t;return e|0}s[1814]=(ee((s[1803]|0)*3|0,s[1804]|0)|0)>>>1;we();e=s[1800]|0;s[1787]=(s[1786]|0)-e+(s[1787]|0);s[1786]=e;e=0;d=t;return e|0}case 2:{s[1787]=0;break}case 1:case-2:{s[1787]=0;d=t;return e|0}case 3:{n=s[1800]|0;s[1787]=(s[1786]|0)-n+(s[1787]|0);s[1786]=n;break}default:{d=t;return e|0}}s[1798]=(s[1798]|0)+1;if((Zn(s[1794]|0,7264,0)|0)!=2){d=t;return e|0}do{s[1796]=(s[1796]|0)+1;se(s[1816]|0,s[1803]|0,s[1804]|0)}while((Zn(s[1794]|0,7264,0)|0)==2);d=t;return e|0}function si(){var e=0,t=0;t=d;e=s[1784]|0;if(e)hi(e);d=t;return}function oi(){var e=0,t=0;t=d;d=d+16|0;e=t;Jn(e);d=t;return s[e>>2]|0}function ai(){var e=0,t=0;t=d;d=d+16|0;e=t;Jn(e);d=t;return s[e+4>>2]|0}function li(e){e=e|0;var t=0;t=d;e=pi(e)|0;d=t;return e|0}function ui(e){e=e|0;var t=0;t=d;hi(e);d=t;return}function ci(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=d;vi(e|0,t|0,n|0)|0;d=i;return}function di(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=d;gi(e|0,t&255|0,n|0)|0;d=i;return}function pi(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0,S=0,E=0,T=0,x=0,k=0,R=0,D=0,A=0,P=0,I=0,M=0,O=0,N=0,L=0,F=0;F=d;do if(e>>>0<245){if(e>>>0<11)m=16;else m=e+11&-8;e=m>>>3;c=s[1828]|0;u=c>>>e;if(u&3){o=(u&1^1)+e|0;t=o<<1;a=7352+(t<<2)|0;t=7352+(t+2<<2)|0;i=s[t>>2]|0;l=i+8|0;r=s[l>>2]|0;do if((a|0)!=(r|0)){if(r>>>0<(s[1832]|0)>>>0)he();n=r+12|0;if((s[n>>2]|0)==(i|0)){s[n>>2]=a;s[t>>2]=r;break}else he()}else s[1828]=c&~(1<<o);while(0);S=o<<3;s[i+4>>2]=S|3;S=i+(S|4)|0;s[S>>2]=s[S>>2]|1;S=l;d=F;return S|0}l=s[1830]|0;if(m>>>0>l>>>0){if(u){o=2<<e;o=u<<e&(o|0-o);o=(o&0-o)+-1|0;e=o>>>12&16;o=o>>>e;a=o>>>5&8;o=o>>>a;n=o>>>2&4;o=o>>>n;i=o>>>1&2;o=o>>>i;r=o>>>1&1;r=(a|e|n|i|r)+(o>>>r)|0;o=r<<1;i=7352+(o<<2)|0;o=7352+(o+2<<2)|0;n=s[o>>2]|0;e=n+8|0;a=s[e>>2]|0;do if((i|0)!=(a|0)){if(a>>>0<(s[1832]|0)>>>0)he();l=a+12|0;if((s[l>>2]|0)==(n|0)){s[l>>2]=i;s[o>>2]=a;p=s[1830]|0;break}else he()}else{s[1828]=c&~(1<<r);p=l}while(0);S=r<<3;u=S-m|0;s[n+4>>2]=m|3;t=n+m|0;s[n+(m|4)>>2]=u|1;s[n+S>>2]=u;if(p){i=s[1833]|0;o=p>>>3;a=o<<1;r=7352+(a<<2)|0;l=s[1828]|0;o=1<<o;if(l&o){l=7352+(a+2<<2)|0;a=s[l>>2]|0;if(a>>>0<(s[1832]|0)>>>0)he();else{h=l;f=a}}else{s[1828]=l|o;h=7352+(a+2<<2)|0;f=r}s[h>>2]=i;s[f+12>>2]=i;s[i+8>>2]=f;s[i+12>>2]=r}s[1830]=u;s[1833]=t;S=e;d=F;return S|0}u=s[1829]|0;if(u){c=(u&0-u)+-1|0;C=c>>>12&16;c=c>>>C;_=c>>>5&8;c=c>>>_;S=c>>>2&4;c=c>>>S;l=c>>>1&2;c=c>>>l;p=c>>>1&1;p=s[7616+((_|C|S|l|p)+(c>>>p)<<2)>>2]|0;c=(s[p+4>>2]&-8)-m|0;l=p;while(1){n=s[l+16>>2]|0;if(!n){n=s[l+20>>2]|0;if(!n)break}l=(s[n+4>>2]&-8)-m|0;S=l>>>0<c>>>0;c=S?l:c;l=n;p=S?n:p}u=s[1832]|0;if(p>>>0<u>>>0)he();t=p+m|0;if(p>>>0>=t>>>0)he();e=s[p+24>>2]|0;o=s[p+12>>2]|0;do if((o|0)==(p|0)){a=p+20|0;l=s[a>>2]|0;if(!l){a=p+16|0;l=s[a>>2]|0;if(!l){i=0;break}}while(1){r=l+20|0;o=s[r>>2]|0;if(o){l=o;a=r;continue}r=l+16|0;o=s[r>>2]|0;if(!o)break;else{l=o;a=r}}if(a>>>0<u>>>0)he();else{s[a>>2]=0;i=l;break}}else{r=s[p+8>>2]|0;if(r>>>0<u>>>0)he();l=r+12|0;if((s[l>>2]|0)!=(p|0))he();a=o+8|0;if((s[a>>2]|0)==(p|0)){s[l>>2]=o;s[a>>2]=r;i=o;break}else he()}while(0);do if(e){l=s[p+28>>2]|0;a=7616+(l<<2)|0;if((p|0)==(s[a>>2]|0)){s[a>>2]=i;if(!i){s[1829]=s[1829]&~(1<<l);break}}else{if(e>>>0<(s[1832]|0)>>>0)he();l=e+16|0;if((s[l>>2]|0)==(p|0))s[l>>2]=i;else s[e+20>>2]=i;if(!i)break}a=s[1832]|0;if(i>>>0<a>>>0)he();s[i+24>>2]=e;l=s[p+16>>2]|0;do if(l)if(l>>>0<a>>>0)he();else{s[i+16>>2]=l;s[l+24>>2]=i;break}while(0);r=s[p+20>>2]|0;if(r)if(r>>>0<(s[1832]|0)>>>0)he();else{s[i+20>>2]=r;s[r+24>>2]=i;break}}while(0);if(c>>>0<16){S=c+m|0;s[p+4>>2]=S|3;S=p+(S+4)|0;s[S>>2]=s[S>>2]|1}else{s[p+4>>2]=m|3;s[p+(m|4)>>2]=c|1;s[p+(c+m)>>2]=c;n=s[1830]|0;if(n){i=s[1833]|0;o=n>>>3;a=o<<1;r=7352+(a<<2)|0;l=s[1828]|0;o=1<<o;if(l&o){l=7352+(a+2<<2)|0;a=s[l>>2]|0;if(a>>>0<(s[1832]|0)>>>0)he();else{v=l;g=a}}else{s[1828]=l|o;v=7352+(a+2<<2)|0;g=r}s[v>>2]=i;s[g+12>>2]=i;s[i+8>>2]=g;s[i+12>>2]=r}s[1830]=c;s[1833]=t}S=p+8|0;d=F;return S|0}}}else if(e>>>0<=4294967231){e=e+11|0;m=e&-8;p=s[1829]|0;if(p){a=0-m|0;e=e>>>8;if(e)if(m>>>0>16777215)c=31;else{g=(e+1048320|0)>>>16&8;v=e<<g;f=(v+520192|0)>>>16&4;v=v<<f;c=(v+245760|0)>>>16&2;c=14-(f|g|c)+(v<<c>>>15)|0;c=m>>>(c+7|0)&1|c<<1}else c=0;l=s[7616+(c<<2)>>2]|0;e:do if(!l){e=0;u=0}else{if((c|0)==31)u=0;else u=25-(c>>>1)|0;r=a;e=0;i=m<<u;u=0;while(1){o=s[l+4>>2]&-8;a=o-m|0;if(a>>>0<r>>>0)if((o|0)==(m|0)){e=l;u=l;break e}else u=l;else a=r;v=s[l+20>>2]|0;l=s[l+(i>>>31<<2)+16>>2]|0;e=(v|0)==0|(v|0)==(l|0)?e:v;if(!l)break;else{r=a;i=i<<1}}}while(0);if((e|0)==0&(u|0)==0){e=2<<c;e=p&(e|0-e);if(!e)break;v=(e&0-e)+-1|0;h=v>>>12&16;v=v>>>h;p=v>>>5&8;v=v>>>p;f=v>>>2&4;v=v>>>f;g=v>>>1&2;v=v>>>g;e=v>>>1&1;e=s[7616+((p|h|f|g|e)+(v>>>e)<<2)>>2]|0}if(!e){h=a;p=u}else while(1){v=(s[e+4>>2]&-8)-m|0;l=v>>>0<a>>>0;a=l?v:a;u=l?e:u;l=s[e+16>>2]|0;if(l){e=l;continue}e=s[e+20>>2]|0;if(!e){h=a;p=u;break}}if((p|0)!=0?h>>>0<((s[1830]|0)-m|0)>>>0:0){u=s[1832]|0;if(p>>>0<u>>>0)he();f=p+m|0;if(p>>>0>=f>>>0)he();e=s[p+24>>2]|0;o=s[p+12>>2]|0;do if((o|0)==(p|0)){a=p+20|0;l=s[a>>2]|0;if(!l){a=p+16|0;l=s[a>>2]|0;if(!l){t=0;break}}while(1){r=l+20|0;o=s[r>>2]|0;if(o){l=o;a=r;continue}r=l+16|0;o=s[r>>2]|0;if(!o)break;else{l=o;a=r}}if(a>>>0<u>>>0)he();else{s[a>>2]=0;t=l;break}}else{r=s[p+8>>2]|0;if(r>>>0<u>>>0)he();l=r+12|0;if((s[l>>2]|0)!=(p|0))he();a=o+8|0;if((s[a>>2]|0)==(p|0)){s[l>>2]=o;s[a>>2]=r;t=o;break}else he()}while(0);do if(e){l=s[p+28>>2]|0;a=7616+(l<<2)|0;if((p|0)==(s[a>>2]|0)){s[a>>2]=t;if(!t){s[1829]=s[1829]&~(1<<l);break}}else{if(e>>>0<(s[1832]|0)>>>0)he();l=e+16|0;if((s[l>>2]|0)==(p|0))s[l>>2]=t;else s[e+20>>2]=t;if(!t)break}a=s[1832]|0;if(t>>>0<a>>>0)he();s[t+24>>2]=e;l=s[p+16>>2]|0;do if(l)if(l>>>0<a>>>0)he();else{s[t+16>>2]=l;s[l+24>>2]=t;break}while(0);l=s[p+20>>2]|0;if(l)if(l>>>0<(s[1832]|0)>>>0)he();else{s[t+20>>2]=l;s[l+24>>2]=t;break}}while(0);e:do if(h>>>0>=16){s[p+4>>2]=m|3;s[p+(m|4)>>2]=h|1;s[p+(h+m)>>2]=h;l=h>>>3;if(h>>>0<256){o=l<<1;n=7352+(o<<2)|0;a=s[1828]|0;l=1<<l;do if(!(a&l)){s[1828]=a|l;y=7352+(o+2<<2)|0;w=n}else{r=7352+(o+2<<2)|0;i=s[r>>2]|0;if(i>>>0>=(s[1832]|0)>>>0){y=r;w=i;break}he()}while(0);s[y>>2]=f;s[w+12>>2]=f;s[p+(m+8)>>2]=w;s[p+(m+12)>>2]=n;break}n=h>>>8;if(n)if(h>>>0>16777215)r=31;else{C=(n+1048320|0)>>>16&8;S=n<<C;w=(S+520192|0)>>>16&4;S=S<<w;r=(S+245760|0)>>>16&2;r=14-(w|C|r)+(S<<r>>>15)|0;r=h>>>(r+7|0)&1|r<<1}else r=0;a=7616+(r<<2)|0;s[p+(m+28)>>2]=r;s[p+(m+20)>>2]=0;s[p+(m+16)>>2]=0;l=s[1829]|0;o=1<<r;if(!(l&o)){s[1829]=l|o;s[a>>2]=f;s[p+(m+24)>>2]=a;s[p+(m+12)>>2]=f;s[p+(m+8)>>2]=f;break}l=s[a>>2]|0;if((r|0)==31)n=0;else n=25-(r>>>1)|0;t:do if((s[l+4>>2]&-8|0)!=(h|0)){r=h<<n;while(1){o=l+(r>>>31<<2)+16|0;a=s[o>>2]|0;if(!a)break;if((s[a+4>>2]&-8|0)==(h|0)){_=a;break t}else{r=r<<1;l=a}}if(o>>>0<(s[1832]|0)>>>0)he();else{s[o>>2]=f;s[p+(m+24)>>2]=l;s[p+(m+12)>>2]=f;s[p+(m+8)>>2]=f;break e}}else _=l;while(0);t=_+8|0;n=s[t>>2]|0;S=s[1832]|0;if(_>>>0>=S>>>0&n>>>0>=S>>>0){s[n+12>>2]=f;s[t>>2]=f;s[p+(m+8)>>2]=n;s[p+(m+12)>>2]=_;s[p+(m+24)>>2]=0;break}else he()}else{S=h+m|0;s[p+4>>2]=S|3;S=p+(S+4)|0;s[S>>2]=s[S>>2]|1}while(0);S=p+8|0;d=F;return S|0}}}else m=-1;while(0);u=s[1830]|0;if(u>>>0>=m>>>0){n=u-m|0;t=s[1833]|0;if(n>>>0>15){s[1833]=t+m;s[1830]=n;s[t+(m+4)>>2]=n|1;s[t+u>>2]=n;s[t+4>>2]=m|3}else{s[1830]=0;s[1833]=0;s[t+4>>2]=u|3;S=t+(u+4)|0;s[S>>2]=s[S>>2]|1}S=t+8|0;d=F;return S|0}u=s[1831]|0;if(u>>>0>m>>>0){C=u-m|0;s[1831]=C;S=s[1834]|0;s[1834]=S+m;s[S+(m+4)>>2]=C|1;s[S+4>>2]=m|3;S=S+8|0;d=F;return S|0}do if(!(s[1946]|0)){u=Se(30)|0;if(!(u+-1&u)){s[1948]=u;s[1947]=u;s[1949]=-1;s[1950]=-1;s[1951]=0;s[1939]=0;s[1946]=(Ce(0)|0)&-16^1431655768;break}else he()}while(0);c=m+48|0;o=s[1948]|0;r=m+47|0;a=o+r|0;o=0-o|0;p=a&o;if(p>>>0<=m>>>0){S=0;d=F;return S|0}e=s[1938]|0;if((e|0)!=0?(w=s[1936]|0,_=w+p|0,_>>>0<=w>>>0|_>>>0>e>>>0):0){S=0;d=F;return S|0}e:do if(!(s[1939]&4)){l=s[1834]|0;t:do if(l){e=7760|0;while(1){u=s[e>>2]|0;if(u>>>0<=l>>>0?(b=e+4|0,(u+(s[b>>2]|0)|0)>>>0>l>>>0):0)break;e=s[e+8>>2]|0;if(!e){x=181;break t}}if(e){u=a-(s[1831]|0)&o;if(u>>>0<2147483647){l=me(u|0)|0;if((l|0)==((s[e>>2]|0)+(s[b>>2]|0)|0))x=190;else x=191}else u=0}else x=181}else x=181;while(0);do if((x|0)==181){l=me(0)|0;if((l|0)!=(-1|0)){e=l;u=s[1947]|0;a=u+-1|0;if(!(a&e))u=p;else u=p-e+(a+e&0-u)|0;e=s[1936]|0;a=e+u|0;if(u>>>0>m>>>0&u>>>0<2147483647){_=s[1938]|0;if((_|0)!=0?a>>>0<=e>>>0|a>>>0>_>>>0:0){u=0;break}a=me(u|0)|0;if((a|0)==(l|0))x=190;else{l=a;x=191}}else u=0}else u=0}while(0);t:do if((x|0)==190){if((l|0)!=(-1|0)){C=l;b=u;x=201;break e}}else if((x|0)==191){e=0-u|0;do if((l|0)!=(-1|0)&u>>>0<2147483647&c>>>0>u>>>0?(n=s[1948]|0,n=r-u+n&0-n,n>>>0<2147483647):0)if((me(n|0)|0)==(-1|0)){me(e|0)|0;u=0;break t}else{u=n+u|0;break}while(0);if((l|0)==(-1|0))u=0;else{C=l;b=u;x=201;break e}}while(0);s[1939]=s[1939]|4;x=198}else{u=0;x=198}while(0);if((((x|0)==198?p>>>0<2147483647:0)?(C=me(p|0)|0,S=me(0)|0,(C|0)!=(-1|0)&(S|0)!=(-1|0)&C>>>0<S>>>0):0)?(T=S-C|0,E=T>>>0>(m+40|0)>>>0,E):0){b=E?T:u;x=201}if((x|0)==201){l=(s[1936]|0)+b|0;s[1936]=l;if(l>>>0>(s[1937]|0)>>>0)s[1937]=l;f=s[1834]|0;e:do if(f){r=7760|0;while(1){u=s[r>>2]|0;o=r+4|0;l=s[o>>2]|0;if((C|0)==(u+l|0)){x=213;break}a=s[r+8>>2]|0;if(!a)break;else r=a}if(((x|0)==213?(s[r+12>>2]&8|0)==0:0)?f>>>0>=u>>>0&f>>>0<C>>>0:0){s[o>>2]=l+b;n=(s[1831]|0)+b|0;t=f+8|0;if(!(t&7))t=0;else t=0-t&7;S=n-t|0;s[1834]=f+t;s[1831]=S;s[f+(t+4)>>2]=S|1;s[f+(n+4)>>2]=40;s[1835]=s[1950];break}u=s[1832]|0;if(C>>>0<u>>>0){s[1832]=C;u=C}a=C+b|0;o=7760|0;while(1){if((s[o>>2]|0)==(a|0)){x=223;break}l=s[o+8>>2]|0;if(!l)break;else o=l}if((x|0)==223?(s[o+12>>2]&8|0)==0:0){s[o>>2]=C;l=o+4|0;s[l>>2]=(s[l>>2]|0)+b;l=C+8|0;if(!(l&7))v=0;else v=0-l&7;l=C+(b+8)|0;if(!(l&7))t=0;else t=0-l&7;l=C+(t+b)|0;g=v+m|0;h=C+g|0;n=l-(C+v)-m|0;s[C+(v+4)>>2]=m|3;t:do if((l|0)!=(f|0)){if((l|0)==(s[1833]|0)){S=(s[1830]|0)+n|0;s[1830]=S;s[1833]=h;s[C+(g+4)>>2]=S|1;s[C+(S+g)>>2]=S;break}c=b+4|0;a=s[C+(c+t)>>2]|0;if((a&3|0)==1){p=a&-8;i=a>>>3;n:do if(a>>>0>=256){e=s[C+((t|24)+b)>>2]|0;o=s[C+(b+12+t)>>2]|0;do if((o|0)==(l|0)){o=t|16;r=C+(c+o)|0;a=s[r>>2]|0;if(!a){o=C+(o+b)|0;a=s[o>>2]|0;if(!a){M=0;break}}else o=r;while(1){i=a+20|0;r=s[i>>2]|0;if(r){a=r;o=i;continue}i=a+16|0;r=s[i>>2]|0;if(!r)break;else{a=r;o=i}}if(o>>>0<u>>>0)he();else{s[o>>2]=0;M=a;break}}else{r=s[C+((t|8)+b)>>2]|0;if(r>>>0<u>>>0)he();u=r+12|0;if((s[u>>2]|0)!=(l|0))he();a=o+8|0;if((s[a>>2]|0)==(l|0)){s[u>>2]=o;s[a>>2]=r;M=o;break}else he()}while(0);if(!e)break;u=s[C+(b+28+t)>>2]|0;a=7616+(u<<2)|0;do if((l|0)!=(s[a>>2]|0)){if(e>>>0<(s[1832]|0)>>>0)he();u=e+16|0;if((s[u>>2]|0)==(l|0))s[u>>2]=M;else s[e+20>>2]=M;if(!M)break n}else{s[a>>2]=M;if(M)break;s[1829]=s[1829]&~(1<<u);break n}while(0);a=s[1832]|0;if(M>>>0<a>>>0)he();s[M+24>>2]=e;l=t|16;u=s[C+(l+b)>>2]|0;do if(u)if(u>>>0<a>>>0)he();else{s[M+16>>2]=u;s[u+24>>2]=M;break}while(0);l=s[C+(c+l)>>2]|0;if(!l)break;if(l>>>0<(s[1832]|0)>>>0)he();else{s[M+20>>2]=l;s[l+24>>2]=M;break}}else{o=s[C+((t|8)+b)>>2]|0;r=s[C+(b+12+t)>>2]|0;a=7352+(i<<1<<2)|0;do if((o|0)!=(a|0)){if(o>>>0<u>>>0)he();if((s[o+12>>2]|0)==(l|0))break;he()}while(0);if((r|0)==(o|0)){s[1828]=s[1828]&~(1<<i);break}do if((r|0)==(a|0))D=r+8|0;else{if(r>>>0<u>>>0)he();u=r+8|0;if((s[u>>2]|0)==(l|0)){D=u;break}he()}while(0);s[o+12>>2]=r;s[D>>2]=o}while(0);l=C+((p|t)+b)|0;u=p+n|0}else u=n;l=l+4|0;s[l>>2]=s[l>>2]&-2;s[C+(g+4)>>2]=u|1;s[C+(u+g)>>2]=u;l=u>>>3;if(u>>>0<256){o=l<<1;r=7352+(o<<2)|0;a=s[1828]|0;l=1<<l;do if(!(a&l)){s[1828]=a|l;O=7352+(o+2<<2)|0;N=r}else{l=7352+(o+2<<2)|0;a=s[l>>2]|0;if(a>>>0>=(s[1832]|0)>>>0){O=l;N=a;break}he()}while(0);s[O>>2]=h;s[N+12>>2]=h;s[C+(g+8)>>2]=N;s[C+(g+12)>>2]=r;break}n=u>>>8;do if(!n)r=0;else{if(u>>>0>16777215){r=31;break}_=(n+1048320|0)>>>16&8;S=n<<_;w=(S+520192|0)>>>16&4;S=S<<w;r=(S+245760|0)>>>16&2;r=14-(w|_|r)+(S<<r>>>15)|0;r=u>>>(r+7|0)&1|r<<1}while(0);a=7616+(r<<2)|0;s[C+(g+28)>>2]=r;s[C+(g+20)>>2]=0;s[C+(g+16)>>2]=0;l=s[1829]|0;o=1<<r;if(!(l&o)){s[1829]=l|o;s[a>>2]=h;s[C+(g+24)>>2]=a;s[C+(g+12)>>2]=h;s[C+(g+8)>>2]=h;break}l=s[a>>2]|0;if((r|0)==31)a=0;else a=25-(r>>>1)|0;n:do if((s[l+4>>2]&-8|0)!=(u|0)){r=u<<a;while(1){o=l+(r>>>31<<2)+16|0;a=s[o>>2]|0;if(!a)break;if((s[a+4>>2]&-8|0)==(u|0)){L=a;break n}else{r=r<<1;l=a}}if(o>>>0<(s[1832]|0)>>>0)he();else{s[o>>2]=h;s[C+(g+24)>>2]=l;s[C+(g+12)>>2]=h;s[C+(g+8)>>2]=h;break t}}else L=l;while(0);t=L+8|0;n=s[t>>2]|0;S=s[1832]|0;if(L>>>0>=S>>>0&n>>>0>=S>>>0){s[n+12>>2]=h;s[t>>2]=h;s[C+(g+8)>>2]=n;s[C+(g+12)>>2]=L;s[C+(g+24)>>2]=0;break}else he()}else{S=(s[1831]|0)+n|0;s[1831]=S;s[1834]=h;s[C+(g+4)>>2]=S|1}while(0);S=C+(v|8)|0;d=F;return S|0}l=7760|0;while(1){a=s[l>>2]|0;if(a>>>0<=f>>>0?(k=s[l+4>>2]|0,R=a+k|0,R>>>0>f>>>0):0)break;l=s[l+8>>2]|0}l=a+(k+-39)|0;if(!(l&7))l=0;else l=0-l&7;o=a+(k+-47+l)|0;o=o>>>0<(f+16|0)>>>0?f:o;a=o+8|0;l=C+8|0;if(!(l&7))l=0;else l=0-l&7;r=b+-40-l|0;s[1834]=C+l;s[1831]=r;s[C+(l+4)>>2]=r|1;s[C+(b+-36)>>2]=40;s[1835]=s[1950];s[o+4>>2]=27;s[a+0>>2]=s[1940];s[a+4>>2]=s[1941];s[a+8>>2]=s[1942];s[a+12>>2]=s[1943];s[1940]=C;s[1941]=b;s[1943]=0;s[1942]=a;r=o+28|0;s[r>>2]=7;if((o+32|0)>>>0<R>>>0)do{S=r;r=r+4|0;s[r>>2]=7}while((S+8|0)>>>0<R>>>0);if((o|0)!=(f|0)){u=o-f|0;l=f+(u+4)|0;s[l>>2]=s[l>>2]&-2;s[f+4>>2]=u|1;s[f+u>>2]=u;l=u>>>3;if(u>>>0<256){o=l<<1;r=7352+(o<<2)|0;a=s[1828]|0;l=1<<l;do if(!(a&l)){s[1828]=a|l;A=7352+(o+2<<2)|0;P=r}else{n=7352+(o+2<<2)|0;t=s[n>>2]|0;if(t>>>0>=(s[1832]|0)>>>0){A=n;P=t;break}he()}while(0);s[A>>2]=f;s[P+12>>2]=f;s[f+8>>2]=P;s[f+12>>2]=r;break}n=u>>>8;if(n)if(u>>>0>16777215)o=31;else{C=(n+1048320|0)>>>16&8;S=n<<C;_=(S+520192|0)>>>16&4;S=S<<_;o=(S+245760|0)>>>16&2;o=14-(_|C|o)+(S<<o>>>15)|0;o=u>>>(o+7|0)&1|o<<1}else o=0;a=7616+(o<<2)|0;s[f+28>>2]=o;s[f+20>>2]=0;s[f+16>>2]=0;i=s[1829]|0;l=1<<o;if(!(i&l)){s[1829]=i|l;s[a>>2]=f;s[f+24>>2]=a;s[f+12>>2]=f;s[f+8>>2]=f;break}i=s[a>>2]|0;if((o|0)==31)n=0;else n=25-(o>>>1)|0;t:do if((s[i+4>>2]&-8|0)!=(u|0)){l=u<<n;while(1){a=i+(l>>>31<<2)+16|0;n=s[a>>2]|0;if(!n)break;if((s[n+4>>2]&-8|0)==(u|0)){I=n;break t}else{l=l<<1;i=n}}if(a>>>0<(s[1832]|0)>>>0)he();else{s[a>>2]=f;s[f+24>>2]=i;s[f+12>>2]=f;s[f+8>>2]=f;break e}}else I=i;while(0);t=I+8|0;n=s[t>>2]|0;S=s[1832]|0;if(I>>>0>=S>>>0&n>>>0>=S>>>0){s[n+12>>2]=f;s[t>>2]=f;s[f+8>>2]=n;s[f+12>>2]=I;s[f+24>>2]=0;break}else he()}}else{S=s[1832]|0;if((S|0)==0|C>>>0<S>>>0)s[1832]=C;s[1940]=C;s[1941]=b;s[1943]=0;s[1837]=s[1946];s[1836]=-1;t=0;do{S=t<<1;_=7352+(S<<2)|0;s[7352+(S+3<<2)>>2]=_;s[7352+(S+2<<2)>>2]=_;t=t+1|0}while((t|0)!=32);t=C+8|0;if(!(t&7))t=0;else t=0-t&7;S=b+-40-t|0;s[1834]=C+t;s[1831]=S;s[C+(t+4)>>2]=S|1;s[C+(b+-36)>>2]=40;s[1835]=s[1950]}while(0);t=s[1831]|0;if(t>>>0>m>>>0){C=t-m|0;s[1831]=C;S=s[1834]|0;s[1834]=S+m;s[S+(m+4)>>2]=C|1;s[S+4>>2]=m|3;S=S+8|0;d=F;return S|0}}s[(Ee()|0)>>2]=12;S=0;d=F;return S|0}function hi(e){e=e|0;var t=0,n=0,i=0,r=0,o=0,a=0,l=0,u=0,c=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,y=0,w=0,_=0,C=0;C=d;if(!e){d=C;return}r=e+-8|0;a=s[1832]|0;if(r>>>0<a>>>0)he();o=s[e+-4>>2]|0;i=o&3;if((i|0)==1)he();g=o&-8;v=e+(g+-8)|0;do if(!(o&1)){o=s[r>>2]|0;if(!i){d=C;return}l=-8-o|0;p=e+l|0;h=o+g|0;if(p>>>0<a>>>0)he();if((p|0)==(s[1833]|0)){r=e+(g+-4)|0;o=s[r>>2]|0;if((o&3|0)!=3){_=p;c=h;break}s[1830]=h;s[r>>2]=o&-2;s[e+(l+4)>>2]=h|1;s[v>>2]=h;d=C;return}n=o>>>3;if(o>>>0<256){i=s[e+(l+8)>>2]|0;r=s[e+(l+12)>>2]|0;o=7352+(n<<1<<2)|0;if((i|0)!=(o|0)){if(i>>>0<a>>>0)he();if((s[i+12>>2]|0)!=(p|0))he()}if((r|0)==(i|0)){s[1828]=s[1828]&~(1<<n);_=p;c=h;break}if((r|0)!=(o|0)){if(r>>>0<a>>>0)he();o=r+8|0;if((s[o>>2]|0)==(p|0))t=o;else he()}else t=r+8|0;s[i+12>>2]=r;s[t>>2]=i;_=p;c=h;break}t=s[e+(l+24)>>2]|0;i=s[e+(l+12)>>2]|0;do if((i|0)==(p|0)){r=e+(l+20)|0;o=s[r>>2]|0;if(!o){r=e+(l+16)|0;o=s[r>>2]|0;if(!o){u=0;break}}while(1){n=o+20|0;i=s[n>>2]|0;if(i){o=i;r=n;continue}n=o+16|0;i=s[n>>2]|0;if(!i)break;else{o=i;r=n}}if(r>>>0<a>>>0)he();else{s[r>>2]=0;u=o;break}}else{n=s[e+(l+8)>>2]|0;if(n>>>0<a>>>0)he();o=n+12|0;if((s[o>>2]|0)!=(p|0))he();r=i+8|0;if((s[r>>2]|0)==(p|0)){s[o>>2]=i;s[r>>2]=n;u=i;break}else he()}while(0);if(t){o=s[e+(l+28)>>2]|0;r=7616+(o<<2)|0;if((p|0)==(s[r>>2]|0)){s[r>>2]=u;if(!u){s[1829]=s[1829]&~(1<<o);_=p;c=h;break}}else{if(t>>>0<(s[1832]|0)>>>0)he();o=t+16|0;if((s[o>>2]|0)==(p|0))s[o>>2]=u;else s[t+20>>2]=u;if(!u){_=p;c=h;break}}r=s[1832]|0;if(u>>>0<r>>>0)he();s[u+24>>2]=t;o=s[e+(l+16)>>2]|0;do if(o)if(o>>>0<r>>>0)he();else{s[u+16>>2]=o;s[o+24>>2]=u;break}while(0);o=s[e+(l+20)>>2]|0;if(o)if(o>>>0<(s[1832]|0)>>>0)he();else{s[u+20>>2]=o;s[o+24>>2]=u;_=p;c=h;break}else{_=p;c=h}}else{_=p;c=h}}else{_=r;c=g}while(0);if(_>>>0>=v>>>0)he();o=e+(g+-4)|0;r=s[o>>2]|0;if(!(r&1))he();if(!(r&2)){if((v|0)==(s[1834]|0)){p=(s[1831]|0)+c|0;s[1831]=p;s[1834]=_;s[_+4>>2]=p|1;if((_|0)!=(s[1833]|0)){d=C;return}s[1833]=0;s[1830]=0;d=C;return}if((v|0)==(s[1833]|0)){p=(s[1830]|0)+c|0;s[1830]=p;s[1833]=_;s[_+4>>2]=p|1;s[_+p>>2]=p;d=C;return}a=(r&-8)+c|0;n=r>>>3;do if(r>>>0>=256){t=s[e+(g+16)>>2]|0;o=s[e+(g|4)>>2]|0;do if((o|0)==(v|0)){r=e+(g+12)|0;o=s[r>>2]|0;if(!o){r=e+(g+8)|0;o=s[r>>2]|0;if(!o){m=0;break}}while(1){n=o+20|0;i=s[n>>2]|0;if(i){o=i;r=n;continue}n=o+16|0;i=s[n>>2]|0;if(!i)break;else{o=i;r=n}}if(r>>>0<(s[1832]|0)>>>0)he();else{s[r>>2]=0;m=o;break}}else{r=s[e+g>>2]|0;if(r>>>0<(s[1832]|0)>>>0)he();i=r+12|0;if((s[i>>2]|0)!=(v|0))he();n=o+8|0;if((s[n>>2]|0)==(v|0)){s[i>>2]=o;s[n>>2]=r;m=o;break}else he()}while(0);if(t){o=s[e+(g+20)>>2]|0;r=7616+(o<<2)|0;if((v|0)==(s[r>>2]|0)){s[r>>2]=m;if(!m){s[1829]=s[1829]&~(1<<o);break}}else{if(t>>>0<(s[1832]|0)>>>0)he();o=t+16|0;if((s[o>>2]|0)==(v|0))s[o>>2]=m;else s[t+20>>2]=m;if(!m)break}o=s[1832]|0;if(m>>>0<o>>>0)he();s[m+24>>2]=t;r=s[e+(g+8)>>2]|0;do if(r)if(r>>>0<o>>>0)he();else{s[m+16>>2]=r;s[r+24>>2]=m;break}while(0);n=s[e+(g+12)>>2]|0;if(n)if(n>>>0<(s[1832]|0)>>>0)he();else{s[m+20>>2]=n;s[n+24>>2]=m;break}}}else{i=s[e+g>>2]|0;r=s[e+(g|4)>>2]|0;o=7352+(n<<1<<2)|0;if((i|0)!=(o|0)){if(i>>>0<(s[1832]|0)>>>0)he();if((s[i+12>>2]|0)!=(v|0))he()}if((r|0)==(i|0)){s[1828]=s[1828]&~(1<<n);break}if((r|0)!=(o|0)){if(r>>>0<(s[1832]|0)>>>0)he();o=r+8|0;if((s[o>>2]|0)==(v|0))f=o;else he()}else f=r+8|0;s[i+12>>2]=r;s[f>>2]=i}while(0);s[_+4>>2]=a|1;s[_+a>>2]=a;if((_|0)==(s[1833]|0)){s[1830]=a;d=C;return}else o=a}else{s[o>>2]=r&-2;s[_+4>>2]=c|1;s[_+c>>2]=c;o=c}i=o>>>3;if(o>>>0<256){r=i<<1;o=7352+(r<<2)|0;n=s[1828]|0;i=1<<i;if(n&i){n=7352+(r+2<<2)|0;t=s[n>>2]|0;if(t>>>0<(s[1832]|0)>>>0)he();else{b=n;y=t}}else{s[1828]=n|i;b=7352+(r+2<<2)|0;y=o}s[b>>2]=_;s[y+12>>2]=_;s[_+8>>2]=y;s[_+12>>2]=o;d=C;return}n=o>>>8;if(n)if(o>>>0>16777215)r=31;else{c=(n+1048320|0)>>>16&8;p=n<<c;u=(p+520192|0)>>>16&4;p=p<<u;r=(p+245760|0)>>>16&2;r=14-(u|c|r)+(p<<r>>>15)|0;r=o>>>(r+7|0)&1|r<<1}else r=0;t=7616+(r<<2)|0;s[_+28>>2]=r;s[_+20>>2]=0;s[_+16>>2]=0;n=s[1829]|0;i=1<<r;e:do if(n&i){t=s[t>>2]|0;if((r|0)==31)n=0;else n=25-(r>>>1)|0;t:do if((s[t+4>>2]&-8|0)!=(o|0)){r=o<<n;while(1){i=t+(r>>>31<<2)+16|0;n=s[i>>2]|0;if(!n)break;if((s[n+4>>2]&-8|0)==(o|0)){w=n;break t}else{r=r<<1;t=n}}if(i>>>0<(s[1832]|0)>>>0)he();else{s[i>>2]=_;s[_+24>>2]=t;s[_+12>>2]=_;s[_+8>>2]=_;break e}}else w=t;while(0);n=w+8|0;t=s[n>>2]|0;p=s[1832]|0;if(w>>>0>=p>>>0&t>>>0>=p>>>0){s[t+12>>2]=_;s[n>>2]=_;s[_+8>>2]=t;s[_+12>>2]=w;s[_+24>>2]=0;break}else he()}else{s[1829]=n|i;s[t>>2]=_;s[_+24>>2]=t;s[_+12>>2]=_;s[_+8>>2]=_}while(0);p=(s[1836]|0)+-1|0;s[1836]=p;if(!p)t=7768|0;else{d=C;return}while(1){t=s[t>>2]|0;if(!t)break;else t=t+8|0}s[1836]=-1;d=C;return}function fi(){}function mi(e){e=e|0;var t=0;t=e;while(i[t>>0]|0)t=t+1|0;return t-e|0}function gi(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,a=0,l=0;r=e+n|0;if((n|0)>=20){t=t&255;a=e&3;l=t|t<<8|t<<16|t<<24;o=r&~3;if(a){a=e+4-a|0;while((e|0)<(a|0)){i[e>>0]=t;e=e+1|0}}while((e|0)<(o|0)){s[e>>2]=l;e=e+4|0}}while((e|0)<(r|0)){i[e>>0]=t;e=e+1|0}return e-n|0}function vi(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if((n|0)>=4096)return be(e|0,t|0,n|0)|0;r=e|0;if((e&3)==(t&3)){while(e&3){if(!n)return r|0;i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}while((n|0)>=4){s[e>>2]=s[t>>2];e=e+4|0;t=t+4|0;n=n-4|0}}while((n|0)>0){i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}return r|0}function bi(e,t,n,i,r,s){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;s=s|0;wi[e&3](t|0,n|0,i|0,r|0,s|0)}function yi(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;te(0)}var wi=[yi,je,Ue,yi];return{_strlen:mi,_free:hi,_broadwayGetMajorVersion:oi,_get_h264bsdClip:wn,_broadwayExit:si,_memset:gi,_broadwayCreateStream:ei,_malloc:pi,_memcpy:vi,_broadwayGetMinorVersion:ai,_broadwayPlayStream:ni,_broadwaySetStreamLength:ti,_broadwayInit:ii,runPostSets:fi,stackAlloc:ot,stackSave:at,stackRestore:lt,setThrew:ut,setTempRet0:pt,getTempRet0:ht,dynCall_viiiii:bi}}(p.Xc,p.Yc,Q),Bb=p._strlen=$._strlen,Ea=p._free=$._free;p._broadwayGetMajorVersion=$._broadwayGetMajorVersion,p._get_h264bsdClip=$._get_h264bsdClip,p._broadwayExit=$._broadwayExit;var Gb=p._memset=$._memset;p._broadwayCreateStream=$._broadwayCreateStream;var Ca=p._malloc=$._malloc,gc=p._memcpy=$._memcpy;if(p._broadwayGetMinorVersion=$._broadwayGetMinorVersion,p._broadwayPlayStream=$._broadwayPlayStream,p._broadwaySetStreamLength=$._broadwaySetStreamLength,p._broadwayInit=$._broadwayInit,p.runPostSets=$.runPostSets,p.dynCall_viiiii=$.dynCall_viiiii,z.pb=$.stackAlloc,z.Tb=$.stackSave,z.Sb=$.stackRestore,z.Yd=$.setTempRet0,z.xd=$.getTempRet0,T)if("function"==typeof p.locateFile?T=p.locateFile(T):p.memoryInitializerPrefixURL&&(T=p.memoryInitializerPrefixURL+T),t||da){var hc=p.readBinary(T);N.set(hc,Ia)}else Ya(),yb(T,function(e){N.set(e,Ia),Za()},function(){d("could not load memory initializer "+T)});ia.prototype=Error();var ic,jc=k,Xa=function e(){!p.calledRun&&lc&&mc(),p.calledRun||(Xa=e)};if(p.callMain=p.ag=function(e){function t(){for(var e=0;3>e;e++)r.push(0)}w(0==S,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),w(0==Oa.length,"cannot call main when preRun functions remain to be called"),e=e||[],Sa||(Sa=i,Na(R));var n=e.length+1,r=[M(Va(p.thisProgram),"i8",0)];t();for(var s=0;s<n-1;s+=1)r.push(M(Va(e[s]),"i8",0)),t();r.push(0),r=M(r,"i32",0),ic=y;try{var o=p._main(n,r,0);nc(o)}catch(a){a instanceof ia||("SimulateInfiniteLoop"==a?p.noExitRuntime=i:(a&&"object"==typeof a&&a.stack&&p.fa("exception thrown: "+[a,a.stack]),d(a)))}finally{}},p.run=p.Ng=mc,p.exit=p.hg=nc,p.abort=p.abort=A,p.preInit)for("function"==typeof p.preInit&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();var lc=m;p.noInitialRun&&(lc=m),mc();var resultModule=window.Module||this.Module;return resultModule},nowValue=function(){return(new Date).getTime()};"undefined"!=typeof performance&&performance.now&&(nowValue=function(){return performance.now()});var Broadway=function(e){function t(e,t){return r.subarray(e,e+t)}this.options=e||{},this.now=nowValue;var n,i=getModule(function(){},function(e,i,r){var s=this.pictureBuffers[e];if(s||(s=this.pictureBuffers[e]=t(e,i*r*3/2)),this.options.rgb){n||(n=getAsm(i,r)),n.inp.set(s),n.doit();var o=new Uint8Array(n.outSize);return o.set(n.out),void this.onPictureDecoded(o,i,r,this._getEndTime(),this._startedTime)}this.onPictureDecoded(s,i,r,this._getEndTime(),this._startedTime)}.bind(this)),r=(i.HEAP8,i.HEAPU8),s=(i.HEAP16,i.HEAP32,i._get_h264bsdClip(),1048576);i._broadwayInit(),this.streamBuffer=t(i._broadwayCreateStream(s),s),this.pictureBuffers={},this.onPictureDecoded=function(e,t,n,i,r){},this._takeStartTime=function(e){this._started||(this._started=!0,this._startedTime=e||nowValue())},this._getTime=function(){return nowValue()-this._startedTime},this._getEndTime=function(){return this._started=!1,this._getTime()},this.decode=function(e,t){this._takeStartTime(t),this.streamBuffer.set(e),i._broadwaySetStreamLength(e.length),i._broadwayPlayStream()}};Broadway.prototype={configure:function(e){console.info("Broadway Configured: "+JSON.stringify(e))}};var asmInstances={},getAsm=function(e,t){var n=""+e+"x"+t;if(asmInstances[n])return asmInstances[n];for(var i=e*t,r=(0|i)>>2,s=i+r+r,o=e*t*4,a=4*Math.pow(2,24),l=s+o+a,u=Math.pow(2,24),c=u;c<l;)c+=u;var d=new ArrayBuffer(c),p=asmFactory(global,{},d);return p.init(e,t),asmInstances[n]=p,p.heap=d,p.out=new Uint8Array(d,0,o),p.inp=new Uint8Array(d,o,s),p.outSize=o,p};if("undefined"!=typeof self){var isWorker=!1,decoder;self.addEventListener("message",function(e){isWorker?decoder.decode(new Uint8Array(e.data.buf),e.data.time):e.data&&"Broadway.js - Worker init"===e.data.type&&(isWorker=!0,decoder=new Broadway(e.data.options),decoder.onPictureDecoded=function(e,t,n,i,r){e&&(e=new Uint8Array(e));var s=new Uint8Array(e.length);s.set(e,0,e.length),postMessage({buf:s.buffer,width:t,height:n,time:i,timeStarted:r},[s.buffer])},postMessage({consoleLog:"initialized"}))},!1)}return Broadway.nowValue=nowValue,Broadway}),require=_require}).call(exports,__webpack_require__(4),"/")},function(e,t,n){function i(){}var r=n(8),s=r.DataStream,o=r.BoxParser,a=(r.ISOFile,r.MP4Box);i.MIN_FRAMES_PER_SEGMENT=200,i.dashify=function(e,t,n){var r,a=i._getTrack(e.inputIsoFile.moov,t),l=a.mdia.minf.stbl.stsd.entries[0],u=e.getTrackSamplesInfo(t);if(l.isVideo())r=!0;else{if(!l.isAudio())return void n.warn("unknown track type",l);r=!1}var c=a.mdia.minf.stbl.stts,d=a.mdia.minf.stbl.stsz,p=a.mdia.minf.stbl.stss,h=a.mdia.minf.stbl.stsd,f=a.mdia.mdhd.timescale,m=a.mdia.mdhd.duration,g=c.sample_deltas[0],v=1==c.sample_counts.length;v||n.info("Variable frame rate detected");var b=d.sample_sizes.length,y=d.sample_sizes,w=!p;if(!w)var _=i.getSampleFlags(b,p.sample_numbers),C=p.sample_numbers;var S=new o.ftypBox;S.major_brand="dash",S.minor_version=0,S.compatible_brands=["iso6","mp41"];var E=new o.moovBox,T=[65536,0,0,0,65536,0,0,0,1073741824],x=new o.mvhdBox;x.timescale=f,x.duration=0,x.rate=65536,x.volume=1,x.matrix=T,x.next_track_id=2,E.boxes.push(x);var k=new o.mvexBox,R=new o.mehdBox;R.fragment_duration=m,k.boxes.push(R);var D=new o.trexBox;D.track_id=1,D.default_sample_description_index=1,D.default_sample_duration=g,D.default_sample_flags=w?33554432:65536,k.boxes.push(D),E.boxes.push(k);var A=new o.trakBox,P=new o.tkhdBox;P.track_id=1,P.flags=o.TKHD_FLAG_ENABLED|o.TKHD_FLAG_IN_MOVIE|o.TKHD_FLAG_IN_PREVIEW|o.TKHD_FLAG_IN_POSTER,P.matrix=T,P.width=a.tkhd.width,P.height=a.tkhd.height,A.boxes.push(P);var I=new o.mdiaBox,M=new o.mdhdBox;M.timescale=f,I.boxes.push(M);var O=new o.hdlrBox;O.componentType="mhlr",O.componentSubType=r?"vide":"soun",O.name="",I.boxes.push(O);var N=new o.minfBox,L=new o.dinfBox,F=new o.drefBox,V=new o["url Box"];if(F.entries=[V],L.boxes.push(F),N.boxes.push(L),r){var B=new o.vmhdBox;B.graphicsmode=0,B.opcolor=[0,0,0],N.boxes.push(B)}else{var U=new o.smhdBox;U.data=[0,0,0,0],N.boxes.push(U)}var j=new o.hdlrBox;j.componentType="dhlr",j.componentSubType="url ",j.name="",N.boxes.push(j);var H=new o.stblBox,G=h;if(!r){G=new o.stsdBox,G.entries=[];for(var q=0;q<h.entries.length;q++){var W=h.entries[q];if("mp4a"==W.type){var z=new o.AudioSampleEntry("mp4a");z.data_reference_index=W.data_reference_index,z.version=0,z.revision=0,z.vendor=0,z.channel_count=W.channel_count,z.samplesize=W.samplesize,z.samplerate=W.samplerate,z.esds=W.esds||(W.wave||{}).esds,z.boxes=[z.esds],G.entries.push(z)}else G.entries.push(W)}}H.boxes.push(G);var K=new o.stszBox;K.sample_sizes=[],H.boxes.push(K);var Y=new o.sttsBox;Y.sample_counts=[],H.boxes.push(Y);var X=new o.stcoBox;X.chunk_offsets=[],H.boxes.push(X);var Q=new o.stscBox;Q.first_chunk=[],H.boxes.push(Q),N.boxes.push(H),I.boxes.push(N),A.boxes.push(I),E.boxes.push(A);for(var $=[],J=[],Z=0,ee=0,te=1;ee<b;te++){var ne=Math.min(i.MIN_FRAMES_PER_SEGMENT,b-ee);if(!w){for(var ie=ee+ne;Z<C.length&&C[Z]-1<ie;)Z++;ie=Z<C.length?C[Z]-1:b,ne=ie-ee}var re=new o.moofBox,se=new o.mfhdBox;se.sequence_number=te,re.boxes.push(se);var oe=new o.trafBox,ae=new o.tfhdBox;ae.track_id=1,ae.flags|=o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF,ae.flags|=o.TFHD_FLAG_SAMPLE_DUR,ae.default_sample_duration=g,r||(ae.flags|=o.TFHD_FLAG_SAMPLE_FLAGS,ae.default_sample_flags=33554432),oe.boxes.push(ae);var le=new o.tfdtBox;le.baseMediaDecodeTime=u[ee].dts,oe.tfdt=le,oe.boxes.push(le);var ue=new o.trunBox;ue.sample_count=ne,ue.flags|=o.TRUN_FLAGS_DATA_OFFSET,ue.flags|=o.TRUN_FLAGS_SIZE,ue.data_offset=-42;var ce=y.subarray(ee,ee+ne);if(ue.sample_size=ce,_&&(ue.flags|=o.TRUN_FLAGS_FLAGS,ue.sample_flags=_.subarray(ee,ee+ne)),!v){for(var de=[],pe=ee;pe<ee+ne;pe++)de.push(u[pe].duration);ue.flags|=o.TRUN_FLAGS_DURATION,ue.sample_duration=de}oe.trun=ue,oe.boxes.push(ue),re.traf=oe,re.boxes.push(oe),$.push(re);for(var he=function(e,t){if(0==e.length)e.push({chunk:t.chunk_index,dataFrom:t.offset,dataTo:t.offset+t.size});else{var n=e[e.length-1];n.chunk!=t.chunk_index?e.push({chunk:t.chunk_index,dataFrom:t.offset,dataTo:t.offset+t.size}):n.dataTo+=t.size}},fe=[],pe=ee;pe<ee+ne;pe++){var me=u[pe];he(fe,me)}J.push(fe),ee+=ne}var ge=[];for(q=0;q<$.length;q++)ge[q]=$[q].traf.tfdt.baseMediaDecodeTime;var ve=[];for(q=0;q<$.length;q++){re=$[q],ue=re.traf.trun;for(var be=0,ye=0;ye<ue.sample_size.length;ye++)be+=ue.sample_size[ye];var we=new o.mdatBox;we.data=new Uint8Array(0);var _e=new s((void 0),0,s.BIG_ENDIAN);re.write(_e),we.write(_e);var Ce=_e.getPosition();_e.adjustUint32(ue.data_offset_position,Ce),_e.adjustUint32(we.sizePosition,be+8),ve[q]={dataIntervals:J[q],header:_e.buffer}}_e=new s((void 0),0,s.BIG_ENDIAN),S.write(_e),E.write(_e);var Se={};Se.moovbuf=_e.buffer,Se.segments=ve,Se.timescale=f,Se.segmentStartTv=ge,Se.duration=m,Se.sampleDuration=g,Se.mimeType=r?"video/mp4":"audio/mp4",Se.codecs=l.getCodec(),Se.startTimecodeOffset=-1,Se.dropFrame=!1,r||(Se.channelConfig=i.parseEsdsChannelConfig(l.esds,n)||l.channel_count);var Ee=e.inputIsoFile.moov.traks[1];return Ee&&"tmcd"==Ee.samples[0].description.type&&(Se.startTimecodeOffset=Ee.samples[0].offset),Se},i._getTrack=function(e,t){
for(var n=0;n<e.traks.length;n++){var i=e.traks[n];if(t==i.tkhd.track_id)return i}return null},i.parseEsdsChannelConfig=function(e,t){if(null==e||null==e.esd)return null;var n=e.esd.findDescriptor(4);if(!n)return null;var i=n.findDescriptor(5);return i&&i.data?2==i.data.length?i.data[1]>>3&15:(t.warn("unsupported Decoder Specific Info",i.data),null):null},i.loadMov=function(e,t,n){function i(t,o){e.fetch(t,o,function(e){e.fileStart=t,e.fileStart!==t&&(e=e.slice(0),e.fileStart=t);var n=s.appendBuffer(e);r||i(n,n+1048576)},n)}var r=!1,s=new a((!1));s.onReady=function(){r=!0,s.flush(),t(s)},i(0,1e4)},i.getSampleFlags=function(e,t){for(var n=new Uint32Array(e),i=0;i<e;i++)n[i]=65536;for(i=0;i<t.length;i++){var r=t[i]-1;n[r]=33554432}return n},i.rescale=function(e,t,n){return e/t*n},i.mediaToEdited=function(e,t,n){if(!(e&&e.edts&&e.edts.elst&&e.edts.elst.entries&&e.edts.elst.entries.length))return t;for(var r=0,s=0;s<e.edts.elst.entries.length;s++){var o=e.edts.elst.entries[s];if(t<o.media_time)return r;var a=i.rescale(o.segment_duration,n,e.mdia.mdhd.timescale);if(o.media_time!=-1&&(0==a||t>=o.media_time&&t<o.media_time+a)){r+=t-o.media_time;break}r+=a}return r},i.parseTimePackets=function(e,t,n,r){var s=e.inputIsoFile.moov;window.MOOV=s,s||r("moov not found");var o=s.traks.filter(function(e){return"vide"==e.mdia.hdlr.componentSubType}),a=s.traks.filter(function(e){return"soun"==e.mdia.hdlr.componentSubType});if(!(o&&o.length||a&&a.length))return void r("neither video nor audio track found");for(var l=o[0]||a[0],u=s.mvhd.timescale,c=l.mdia.minf.stbl.stsz,d=l.mdia.minf.stbl.stts,p=l.mdia.minf.stbl.stss,h=l.mdia.minf.stbl.ctts,f=l.mdia.mdhd.timescale,m=0,g=0,v=0,b=0,y=0,w=0,_=[],C=0;C<c.sample_sizes.length;C++){var S=C,E=d.sample_deltas[m],T=!p;p&&g<p.sample_numbers.length&&S+1==p.sample_numbers[g]&&(T=!0,g++);var x=v;h&&(x=v+h.sample_offsets[y],b++,y<h.sample_offsets.length-1&&b==h.sample_counts[y]&&(y++,b=0));var k=i.mediaToEdited(l,x,u),R={pts:k,mediaPts:x,timescale:f,duration:E,frame:S,sync:T,timecode:0};for(_.push(R),v-=w*d.sample_deltas[m],w+=1;m<d.sample_deltas.length-1&&w>=d.sample_counts[m];)v+=d.sample_counts[m]*d.sample_deltas[m],w-=d.sample_counts[m],m++;v+=w*d.sample_deltas[m]}var D=s.traks.filter(function(e){return"tmcd"==e.mdia.hdlr.componentSubType});if(D&&D.length){var A=D[0],P=A.samples[0].offset;t.fetch(P,P+4,function(e){for(var t=new DataView(e),i=t.getUint32(0,!1),r=0;r<_.length;r++)_[r].timecode=r+i;n(_)})}else n(_)},i.parseTimePacketsInM4s=function(e,t){for(var n=e.inputIsoFile.moov,r=n.traks.filter(function(e){return"vide"==e.mdia.hdlr.componentSubType}),s=r[0],a=t.inputIsoFile.moofs[0],l=a.trafs[0].truns[0],u=n.mvhd.timescale,c=l.sample_count,d=s.mdia.mdhd.timescale,p=a.trafs[0].tfdt.baseMediaDecodeTime,h=[],f=0;f<c;f++){var m=l.sample_duration[f]||a.trafs[0].tfhd.default_sample_duration,g=p;l.flags&o.TRUN_FLAGS_CTS_OFFSET&&(g=p+l.sample_composition_time_offset[f]);var v=i.mediaToEdited(s,g,u),b={pts:v,mediaPts:g,timescale:d,duration:m,frame:-1,sync:!1,timecode:0};h.push(b),p+=m}return h},i.wrapMp3Segment=function(e,t,n,i,r){var a=new o.moofBox,l=new o.mfhdBox;l.sequence_number=e+1,a.boxes.push(l);var u=new o.trafBox,c=new o.tfhdBox;c.track_id=1,c.flags|=o.TFHD_FLAG_SAMPLE_DUR,c.flags|=o.TFHD_FLAG_SAMPLE_FLAGS,c.flags|=o.TFHD_FLAG_SAMPLE_SIZE,c.default_sample_duration=1152,c.default_sample_flags=0,c.default_sample_size=i,u.boxes.push(c);var d=new o.tfdtBox,p=e*t;d.baseMediaDecodeTime=1152*p,u.boxes.push(d);var h=new o.trunBox;h.sample_count=r.length/i,h.flags|=o.TRUN_FLAGS_DATA_OFFSET,h.data_offset=-42,u.boxes.push(h),a.boxes.push(u);var f=new o.mdatBox;f.data=r;var m=new s((void 0),0,s.BIG_ENDIAN);a.write(m);var g=m.byteLength+8;return m.adjustUint32(h.data_offset_position,g),f.write(m),m.buffer},i.mp3InitSegment=function(e,t,n,i){var r=new o.ftypBox;r.major_brand="dash",r.minor_version=0,r.compatible_brands=["iso6","mp41"];var a=new o.moovBox,l=[65536,0,0,0,65536,0,0,0,1073741824],u=new o.mvhdBox;u.timescale=e,u.duration=0,u.rate=65536,u.volume=1,u.matrix=l,u.next_track_id=2,a.boxes.push(u);var c=new o.mvexBox,d=new o.mehdBox;d.fragment_duration=t,c.boxes.push(d);var p=new o.trexBox;p.track_id=1,p.default_sample_description_index=1,p.default_sample_duration=1152,p.default_sample_size=n,p.default_sample_flags=0,c.boxes.push(p),a.boxes.push(c);var h=new o.trakBox,f=new o.tkhdBox;f.track_id=1,f.matrix=l,h.boxes.push(f);var m=new o.mdiaBox,g=new o.mdhdBox;g.timescale=e,m.boxes.push(g);var v=new o.hdlrBox;v.componentType="mhlr",v.componentSubType="soun",v.name="",m.boxes.push(v);var b=new o.minfBox,y=new o.dinfBox,w=new o.drefBox,_=new o["url Box"];w.entries=[_],y.boxes.push(w),b.boxes.push(y);var C=new o.smhdBox;C.data=[0,0,0,0],b.boxes.push(C);var S=new o.hdlrBox;S.componentType="dhlr",S.componentSubType="url ",S.name="",b.boxes.push(S);var E=new o.stblBox,T=new o.stsdBox,x=new o.AudioSampleEntry(".mp3");x.data_reference_index=1,x.version=1,x.revision=0,x.vendor=0,x.channel_count=2,x.samplerate=e,x.samplesize=16,x.compressionId=-2,x.packetSize=0,x.samplesPerPacket=1152,x.bytesPerPacket=n,x.bytesPerFrame=n,x.bytesPerSample=2,T.entries.push(x),E.boxes.push(T);var k=new o.stszBox;k.sample_sizes=[],E.boxes.push(k);var R=new o.sttsBox;R.sample_counts=[],E.boxes.push(R);var D=new o.stcoBox;D.chunk_offsets=[],E.boxes.push(D);var A=new o.stscBox;A.first_chunk=[],E.boxes.push(A),b.boxes.push(E),m.boxes.push(b),h.boxes.push(m),a.boxes.push(h);var P=new s((void 0),0,s.BIG_ENDIAN);r.write(P),a.write(P),i(P.buffer)},i.getTrunSamplesInfo=function(e){for(var t=e.inputIsoFile.moofs[0],n=t.trafs[0].truns[0],i=[],r=0,s=t.start+n.data_offset;r<n.sample_count;r++){var o={offset:s,size:n.sample_size[r]};i.push(o),s+=o.size}return i},i.getAvcC=function(e){var t=e.inputIsoFile.moov.traks[0];return t.mdia.minf.stbl.stsd.entries[0].avcC},i.createSilenceMoof=function(e,t,n,r,a){var u=1024;if(r%u!=0)throw new RuntimeException("silence segment duration "+r+" is not a multiple of sample duration "+u);var c=new o.moofBox,d=new o.mfhdBox;d.sequence_number=t+1,c.boxes.push(d);var p=new o.trafBox,h=new o.tfhdBox;h.track_id=1,h.flags|=o.TFHD_FLAG_SAMPLE_DUR,h.flags|=o.TFHD_FLAG_SAMPLE_FLAGS,h.flags|=o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF,h.default_sample_duration=u,h.default_sample_flags=33554432,p.boxes.push(h);var f=new o.tfdtBox;f.baseMediaDecodeTime=n,p.boxes.push(f);var m=[],g=new s((void 0),0,s.BIG_ENDIAN),v=r/u,b=e.inputIsoFile.moov.traks[0].mdia.minf.stbl.stsd.entries[0],y=i.parseEsdsChannelConfig(b.esds,a)||b.channel_count,w=l[y];w||(w=l[2]);for(var _=0;_<v;_++)m.push(w.length),g.writeUint8Array(w);var C=new o.trunBox;C.flags|=o.TRUN_FLAGS_DATA_OFFSET,C.flags|=o.TRUN_FLAGS_SIZE,C.data_offset=-42,C.sample_count=v,C.sample_size=m,p.boxes.push(C),c.boxes.push(p);var S=new o.mdatBox;S.data=new Uint8Array(g.buffer);var E=new s((void 0),0,s.BIG_ENDIAN);c.write(E);var T=E.byteLength+8;return E.adjustUint32(C.data_offset_position,T),S.write(E),E.buffer},i.conformMoof=function(e,t,n){var i=new a((!1));e.fileStart=0,i.appendBuffer(e),delete i.inputIsoFile.styp,delete i.inputIsoFile.sidx,i.inputIsoFile.boxes=i.inputIsoFile.boxes.filter(function(e){return"styp"!=e.type&&"sidx"!=e.type});var r=i.inputIsoFile.moofs[0],l=r.trafs[0];r.mfhd.sequence_number=t+1,l.tfdt.baseMediaDecodeTime=n,l.tfhd.flags|=o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF;var u=i.inputIsoFile.mdats[0];u.data=new Uint8Array(e.slice(u.start+8,u.start+u.size));var c=new s((void 0),0,s.BIG_ENDIAN);r.write(c);var d=c.byteLength+8;return c.adjustUint32(l.truns[0].data_offset_position,d),u.write(c),c.buffer};var l={1:[0,200,0,128,35,128],2:[33,0,73,144,2,25,0,35,128],6:[0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,24,50,0,32,8,224]};i.hasBFrames=function(e,t){var n=i._getTrack(e.inputIsoFile.moov,t);return null!=n.mdia.minf.stbl.ctts},e.exports=i},function(e,t,n){var i=function(){var e=new Date,t=4,n=3,r=2,s=1,o=t,a={setLogLevel:function(e){o=e==this.debug?s:e==this.info?r:e==this.warn?n:e==this.error?t:t},debug:function(t,n){s>=o&&console.debug("["+i.getDurationString(new Date-e,1e3)+"]","["+t+"]",n)},info:function(t,n){r>=o&&console.info("["+i.getDurationString(new Date-e,1e3)+"]","["+t+"]",n)},warn:function(t,r){n>=o&&console.warn("["+i.getDurationString(new Date-e,1e3)+"]","["+t+"]",r)},error:function(n,r){t>=o&&console.error("["+i.getDurationString(new Date-e,1e3)+"]","["+n+"]",r)}};return a}();i.getDurationString=function(e,t){function n(e,t){for(var n=""+e,i=n.split(".");i[0].length<t;)i[0]="0"+i[0];return i.join(".")}var i;e<0?(i=!0,e=-e):i=!1;var r=t||1,s=e/r,o=Math.floor(s/3600);s-=3600*o;var a=Math.floor(s/60);s-=60*a;var l=1e3*s;return s=Math.floor(s),l-=1e3*s,l=Math.floor(l),(i?"-":"")+o+":"+n(a,2)+":"+n(s,2)+"."+n(l,3)},i.printRanges=function(e){var t=e.length;if(t>0){for(var n="",r=0;r<t;r++)r>0&&(n+=","),n+="["+i.getDurationString(e.start(r))+","+i.getDurationString(e.end(r))+"]";return n}return"(empty)"};var r=function(e){if(!(e instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=e,this.uint8=new Uint8Array(e),this.position=0};r.prototype.getPosition=function(){return this.position},r.prototype.getEndPosition=function(){return this.buffer.byteLength},r.prototype.getLength=function(){return this.buffer.byteLength},r.prototype.seek=function(e){var t=Math.max(0,Math.min(this.uint8.length,e));return this.position=isNaN(t)||!isFinite(t)?0:t,!0},r.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},r.prototype.readUint8=function(){var e;if(this.position+1<=this.uint8.length)return e=this.uint8[this.position],this.position++,e;throw"Not enough bytes in buffer"},r.prototype.readUint16=function(){var e,t,n;if(this.position+2<=this.uint8.length)return e=this.uint8[this.position],this.position++,t=this.uint8[this.position],this.position++,n=e<<8|t;throw"Not enough bytes in buffer"},r.prototype.readUint24=function(){var e;if(this.position+3<=this.uint8.length)return e=this.uint8[this.position]<<16,this.position++,e|=this.uint8[this.position]<<8,this.position++,e|=this.uint8[this.position],this.position++,e;throw"Not enough bytes in buffer"},r.prototype.readUint32=function(){var e;if(this.position+4<=this.uint8.length)return e=this.uint8[this.position]<<24,this.position++,e|=this.uint8[this.position]<<16,this.position++,e|=this.uint8[this.position]<<8,this.position++,e|=this.uint8[this.position],this.position++,e;throw"Not enough bytes in buffer"},r.prototype.readUint64=function(){var e;if(this.position+8<=this.uint8.length)return e=this.readUint32()<<32,e|=this.readUint32();throw"Not enough bytes in buffer"},r.prototype.readString=function(e){if(this.position+e<=this.uint8.length){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readUint8());return t}throw"Not enough bytes in buffer"},r.prototype.readCString=function(){for(var e=[];;){var t=this.readUint8();if(0===t)break;e.push(t)}return String.fromCharCode.apply(null,e)},r.prototype.readInt8=function(){return this.readUint8()},r.prototype.readInt16=function(){return this.readUint16()},r.prototype.readInt32=function(){return this.readUint32()},r.prototype.readUint8Array=function(e){for(var t=[],n=0;n<e;n++)t[n]=this.readUint8();return t},r.prototype.readInt16Array=function(e){for(var t=[],n=0;n<e;n++)t[n]=this.readUint16();return t},r.prototype.readUint32Array=function(e){for(var t=[],n=0;n<e;n++)t[n]=this.readUint32();return t},r.prototype.readInt32Array=function(e){for(var t=[],n=0;n<e;n++)t[n]=this.readInt32();return t};var s=function(e,t,n){this._byteOffset=t||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,t&&(this._byteOffset+=t)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=null==n?s.LITTLE_ENDIAN:n};s.prototype={},s.prototype.getPosition=function(){return this.position},s.prototype._realloc=function(e){if(this._dynamicSize){var t=this._byteOffset+this.position+e,n=this._buffer.byteLength;if(t<=n)return void(t>this._byteLength&&(this._byteLength=t));for(n<1&&(n=1);t>n;)n*=2;var i=new ArrayBuffer(n),r=new Uint8Array(this._buffer),s=new Uint8Array(i,0,r.length);s.set(r),this.buffer=i,this._byteLength=t}},s.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),n=new Uint8Array(this._buffer,0,t.length);t.set(n),this.buffer=e}},s.BIG_ENDIAN=!1,s.LITTLE_ENDIAN=!0,s.prototype._byteLength=0,Object.defineProperty(s.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,0!==this._buffer.byteLength||this._byteOffset?this._dataView=new DataView(this._buffer,this._byteOffset):this._dataView=new DataView(this._buffer),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(s.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(s.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),s.prototype.seek=function(e){var t=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(t)||!isFinite(t)?0:t},s.prototype.isEof=function(){return this.position>=this._byteLength},s.prototype.mapUint8Array=function(e){this._realloc(1*e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},s.prototype.readInt32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Int32Array(e);return s.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),s.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},s.prototype.readInt16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var n=new Int16Array(e);return s.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),s.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},s.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Int8Array(e);return s.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},s.prototype.readUint32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Uint32Array(e);return s.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),s.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},s.prototype.readUint16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var n=new Uint16Array(e);return s.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),s.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},s.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Uint8Array(e);return s.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},s.prototype.readFloat64Array=function(e,t){e=null==e?this.byteLength-this.position/8:e;var n=new Float64Array(e);return s.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),s.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},s.prototype.readFloat32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Float32Array(e);return s.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),s.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},s.prototype.readInt32=function(e){var t=this._dataView.getInt32(this.position,null==e?this.endianness:e);return this.position+=4,t},s.prototype.readInt16=function(e){var t=this._dataView.getInt16(this.position,null==e?this.endianness:e);return this.position+=2,t},s.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},s.prototype.readUint32=function(e){var t=this._dataView.getUint32(this.position,null==e?this.endianness:e);return this.position+=4,t},s.prototype.readUint16=function(e){var t=this._dataView.getUint16(this.position,null==e?this.endianness:e);return this.position+=2,t},s.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},s.prototype.readFloat32=function(e){var t=this._dataView.getFloat32(this.position,null==e?this.endianness:e);return this.position+=4,t},s.prototype.readFloat64=function(e){var t=this._dataView.getFloat64(this.position,null==e?this.endianness:e);return this.position+=8,t},s.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,s.memcpy=function(e,t,n,i,r){var s=new Uint8Array(e,t,r),o=new Uint8Array(n,i,r);s.set(o)},s.arrayToNative=function(e,t){return t==this.endianness?e:this.flipArrayEndianness(e)},s.nativeToEndian=function(e,t){return this.endianness==t?e:this.flipArrayEndianness(e)},s.flipArrayEndianness=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=0;n<e.byteLength;n+=e.BYTES_PER_ELEMENT)for(var i=n+e.BYTES_PER_ELEMENT-1,r=n;i>r;i--,r++){var s=t[r];t[r]=t[i],t[i]=s}return e},s.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return String.fromCharCode.apply(null,t)},s.prototype.readString=function(e,t){return null==t||"ASCII"==t?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==e?this.byteLength-this.position:e)]):new TextDecoder(t).decode(this.mapUint8Array(e))},s.prototype.readCString=function(e){var t=this.byteLength-this.position,n=new Uint8Array(this._buffer,this._byteOffset+this.position),i=t;null!=e&&(i=Math.min(e,t));for(var r=0;r<i&&0!==n[r];r++);var s=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(r)]);return null!=e?this.position+=i-r:r!=t&&(this.position+=1),s};var o=Math.pow(2,32);s.prototype.readUint64=function(){return this.readUint32()*o+this.readUint32()},s.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=s,s.prototype.save=function(e){var t=new Blob([this.buffer]),n=window.webkitURL||window.URL;if(!n||!n.createObjectURL)throw"DataStream.save: Can't create object URL.";var i=n.createObjectURL(t),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download",e),r.click(),n.revokeObjectURL(i)},s.prototype._dynamicSize=!0,Object.defineProperty(s.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),s.prototype.shift=function(e){var t=new ArrayBuffer(this._byteLength-e),n=new Uint8Array(t),i=new Uint8Array(this._buffer,e,n.length);n.set(i),this.buffer=t,this.position-=e},s.prototype.writeInt32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeInt32(e[n],t)},s.prototype.writeInt16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeInt16(e[n],t)},s.prototype.writeInt8Array=function(e){if(this._realloc(1*e.length),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var t=0;t<e.length;t++)this.writeInt8(e[t])},s.prototype.writeUint32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeUint32(e[n],t)},s.prototype.writeUint16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeUint16(e[n],t)},s.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},s.prototype.writeFloat64Array=function(e,t){if(this._realloc(8*e.length),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeFloat64(e[n],t)},s.prototype.writeFloat32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)s.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeFloat32(e[n],t)},s.prototype.writeInt32=function(e,t){this._realloc(4),this._dataView.setInt32(this.position,e,null==t?this.endianness:t),this.position+=4},s.prototype.writeInt16=function(e,t){this._realloc(2),this._dataView.setInt16(this.position,e,null==t?this.endianness:t),this.position+=2},s.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},s.prototype.writeUint32=function(e,t){this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},s.prototype.writeUint16=function(e,t){this._realloc(2),this._dataView.setUint16(this.position,e,null==t?this.endianness:t),this.position+=2},s.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},s.prototype.writeFloat32=function(e,t){this._realloc(4),this._dataView.setFloat32(this.position,e,null==t?this.endianness:t),this.position+=4},s.prototype.writeFloat64=function(e,t){this._realloc(8),this._dataView.setFloat64(this.position,e,null==t?this.endianness:t),this.position+=8},s.prototype.writeUCS2String=function(e,t,n){null==n&&(n=e.length);for(var i=0;i<e.length&&i<n;i++)this.writeUint16(e.charCodeAt(i),t);for(;i<n;i++)this.writeUint16(0)},s.prototype.writeString=function(e,t,n){var i=0;if(null==t||"ASCII"==t)if(null!=n){var r=Math.min(e.length,n);for(i=0;i<r;i++)this.writeUint8(e.charCodeAt(i));for(;i<n;i++)this.writeUint8(0)}else for(i=0;i<e.length;i++)this.writeUint8(e.charCodeAt(i));else this.writeUint8Array(new TextEncoder(t).encode(e.substring(0,n)))},s.prototype.writeCString=function(e,t){var n=0;if(null!=t){var i=Math.min(e.length,t);for(n=0;n<i;n++)this.writeUint8(e.charCodeAt(n));for(;n<t;n++)this.writeUint8(0)}else{for(n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));this.writeUint8(0)}},s.prototype.writeStruct=function(e,t){for(var n=0;n<e.length;n+=2){var i=e[n+1];this.writeType(i,t[e[n]],t)}},s.prototype.writeType=function(e,t,n){var i;if("function"==typeof e)return e(this,t);if("object"==typeof e&&!(e instanceof Array))return e.set(this,t,n);var r=null,o="ASCII",a=this.position;switch("string"==typeof e&&/:/.test(e)&&(i=e.split(":"),e=i[0],r=parseInt(i[1])),"string"==typeof e&&/,/.test(e)&&(i=e.split(","),e=i[0],o=parseInt(i[1])),e){case"uint8":this.writeUint8(t);break;case"int8":this.writeInt8(t);break;case"uint16":this.writeUint16(t,this.endianness);break;case"int16":this.writeInt16(t,this.endianness);break;case"uint32":this.writeUint32(t,this.endianness);break;case"int32":this.writeInt32(t,this.endianness);break;case"float32":this.writeFloat32(t,this.endianness);break;case"float64":this.writeFloat64(t,this.endianness);break;case"uint16be":this.writeUint16(t,s.BIG_ENDIAN);break;case"int16be":this.writeInt16(t,s.BIG_ENDIAN);break;case"uint32be":this.writeUint32(t,s.BIG_ENDIAN);break;case"int32be":this.writeInt32(t,s.BIG_ENDIAN);break;case"float32be":this.writeFloat32(t,s.BIG_ENDIAN);break;case"float64be":this.writeFloat64(t,s.BIG_ENDIAN);break;case"uint16le":this.writeUint16(t,s.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(t,s.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(t,s.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(t,s.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(t,s.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(t,s.LITTLE_ENDIAN);break;case"cstring":this.writeCString(t,r);break;case"string":this.writeString(t,o,r);break;case"u16string":this.writeUCS2String(t,this.endianness,r);break;case"u16stringle":this.writeUCS2String(t,s.LITTLE_ENDIAN,r);break;case"u16stringbe":this.writeUCS2String(t,s.BIG_ENDIAN,r);break;default:if(3==e.length){for(var l=e[1],u=0;u<t.length;u++)this.writeType(l,t[u]);break}this.writeStruct(e,t)}null!=r&&(this.position=a,this._realloc(r),this.position=a+r)},s.prototype.writeUint64=function(e){var t=Math.floor(e/o);this.writeUint32(t),this.writeUint32(4294967295&e)},s.prototype.writeUint24=function(e){this.writeUint8((16711680&e)>>16),this.writeUint8((65280&e)>>8),this.writeUint8(255&e)},s.prototype.adjustUint32=function(e,t){var n=this.position;this.seek(e),this.writeUint32(t),this.seek(n)},s.prototype.mapInt32Array=function(e,t){this._realloc(4*e);var n=new Int32Array(this._buffer,this.byteOffset+this.position,e);return s.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},s.prototype.mapInt16Array=function(e,t){this._realloc(2*e);var n=new Int16Array(this._buffer,this.byteOffset+this.position,e);return s.arrayToNative(n,null==t?this.endianness:t),this.position+=2*e,n},s.prototype.mapInt8Array=function(e){this._realloc(1*e);var t=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},s.prototype.mapUint32Array=function(e,t){this._realloc(4*e);var n=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return s.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},s.prototype.mapUint16Array=function(e,t){this._realloc(2*e);var n=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return s.arrayToNative(n,null==t?this.endianness:t),this.position+=2*e,n},s.prototype.mapFloat64Array=function(e,t){this._realloc(8*e);var n=new Float64Array(this._buffer,this.byteOffset+this.position,e);return s.arrayToNative(n,null==t?this.endianness:t),this.position+=8*e,n},s.prototype.mapFloat32Array=function(e,t){this._realloc(4*e);var n=new Float32Array(this._buffer,this.byteOffset+this.position,e);return s.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n};var a=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};a.prototype=new s(new ArrayBuffer,0,s.BIG_ENDIAN),a.prototype.initialized=function(){var e;return this.bufferIndex>-1||(this.buffers.length>0?(e=this.buffers[0],0===e.fileStart?(this.buffer=e,this.bufferIndex=0,i.debug("MultiBufferStream","Stream ready for parsing"),!0):(i.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(i.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(e,t){i.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+t.byteLength));var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},a.prototype.reduceBuffer=function(e,t,n){var i;return i=new Uint8Array(n),i.set(new Uint8Array(e,t,n)),i.buffer.fileStart=e.fileStart+t,i.buffer.usedBytes=0,i.buffer},a.prototype.insertBuffer=function(e){for(var t=!0,n=0;n<this.buffers.length;n++){var r=this.buffers[n];if(e.fileStart<=r.fileStart){if(e.fileStart===r.fileStart){if(e.byteLength>r.byteLength){this.buffers.splice(n,1),n--;continue}i.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring")}else e.fileStart+e.byteLength<=r.fileStart||(e=this.reduceBuffer(e,0,r.fileStart-e.fileStart)),i.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(n,0,e),0===n&&(this.buffer=e);t=!1;break}if(e.fileStart<r.fileStart+r.byteLength){var s=r.fileStart+r.byteLength-e.fileStart,o=e.byteLength-s;if(!(o>0)){t=!1;break}e=this.reduceBuffer(e,s,o)}}t&&(i.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),0===n&&(this.buffer=e))},a.prototype.logBufferLevel=function(e){var t,n,r,s,o,a=[],l="";for(r=0,s=0,t=0;t<this.buffers.length;t++)n=this.buffers[t],0===t?(o={},a.push(o),o.start=n.fileStart,o.end=n.fileStart+n.byteLength,l+="["+o.start+"-"):o.end===n.fileStart?o.end=n.fileStart+n.byteLength:(o={},o.start=n.fileStart,l+=a[a.length-1].end-1+"], ["+o.start+"-",o.end=n.fileStart+n.byteLength,a.push(o)),r+=n.usedBytes,s+=n.byteLength;a.length>0&&(l+=o.end-1+"]");var u=e?i.info:i.debug;0===this.buffers.length?u("MultiBufferStream","No more buffer in memory"):u("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+r+"/"+s+" bytes): "+l)},a.prototype.cleanBuffers=function(){var e,t;for(e=0;e<this.buffers.length;e++)t=this.buffers[e],t.usedBytes===t.byteLength&&(i.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},a.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length){if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var t=this.buffer.byteLength,n=this.buffer.usedBytes,r=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=n,this.buffer.fileStart=r,i.debug("ISOFile","Concatenating buffer for box parsing (length: "+t+"->"+this.buffer.byteLength+")"),!0}return!1}return!1},a.prototype.findPosition=function(e,t,n){var r,s=null,o=-1;for(r=e===!0?0:this.bufferIndex;r<this.buffers.length&&(s=this.buffers[r],s.fileStart<=t);)o=r,n&&(s.fileStart+s.byteLength<=t?s.usedBytes=s.byteLength:s.usedBytes=t-s.fileStart,this.logBufferLevel()),r++;return o!==-1?(s=this.buffers[o],s.fileStart+s.byteLength>=t?(i.debug("MultiBufferStream","Found position in existing buffer #"+o),o):-1):-1},a.prototype.findEndContiguousBuf=function(e){var t,n,i,r=void 0!==e?e:this.bufferIndex;if(n=this.buffers[r],this.buffers.length>r+1)for(t=r+1;t<this.buffers.length&&(i=this.buffers[t],i.fileStart===n.fileStart+n.byteLength);t++)n=i;return n.fileStart+n.byteLength},a.prototype.getEndFilePositionAfter=function(e){var t=this.findPosition(!0,e,!1);return t!==-1?this.findEndContiguousBuf(t):e},a.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},a.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},a.prototype.seek=function(e,t,n){var r;return r=this.findPosition(t,e,n),r!==-1?(this.buffer=this.buffers[r],this.bufferIndex=r,this.position=e-this.buffer.fileStart,i.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(i.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},a.prototype.getPosition=function(){if(this.bufferIndex===-1||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},a.prototype.getLength=function(){return this.byteLength},a.prototype.getEndPosition=function(){if(this.bufferIndex===-1||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";
return this.buffers[this.bufferIndex].fileStart+this.byteLength};var l=function(){var e=3,t=4,n=5,r=6,s=[];s[e]="ES_Descriptor",s[t]="DecoderConfigDescriptor",s[n]="DecoderSpecificInfo",s[r]="SLConfigDescriptor";var o=this,a={};return this.parseOneDescriptor=function(e){var t,n,r,o=0,l=0;for(t=e.readUint8(),o++,r=e.readUint8(),o++;128&r;)l=(127&r)<<7,r=e.readUint8(),o++;return l+=127&r,i.debug("MPEG4DescriptorParser","Found "+(s[t]||"Descriptor "+t)+", size "+l+" at position "+e.getPosition()),n=s[t]?new a[s[t]](l):new a.Descriptor(l),n.parse(e),n},a.Descriptor=function(e,t){this.tag=e,this.size=t,this.descs=[]},a.Descriptor.prototype.parse=function(e){this.data=e.readUint8Array(this.size)},a.Descriptor.prototype.findDescriptor=function(e){for(var t=0;t<this.descs.length;t++)if(this.descs[t].tag==e)return this.descs[t];return null},a.Descriptor.prototype.parseRemainingDescriptors=function(e){for(var t=e.position;e.position<t+this.size;){var n=o.parseOneDescriptor(e);this.descs.push(n)}},a.ES_Descriptor=function(t){a.Descriptor.call(this,e,t)},a.ES_Descriptor.prototype=new a.Descriptor,a.ES_Descriptor.prototype.parse=function(e){if(this.ES_ID=e.readUint16(),this.flags=e.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=e.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags){var t=e.readUint8();this.URL=e.readString(t),this.size-=t+1}else this.URL=null;32&this.flags?(this.OCR_ES_ID=e.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(e)},a.ES_Descriptor.prototype.getOTI=function(e){var n=this.findDescriptor(t);return n?n.oti:0},a.ES_Descriptor.prototype.getAudioConfig=function(e){var i=this.findDescriptor(t);if(!i)return null;var r=i.findDescriptor(n);return r&&r.data?(248&r.data[0])>>3:null},a.DecoderConfigDescriptor=function(e){a.Descriptor.call(this,t,e)},a.DecoderConfigDescriptor.prototype=new a.Descriptor,a.DecoderConfigDescriptor.prototype.parse=function(e){this.oti=e.readUint8(),this.streamType=e.readUint8(),this.bufferSize=e.readUint24(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),this.size-=13,this.parseRemainingDescriptors(e)},a.DecoderSpecificInfo=function(e){a.Descriptor.call(this,n,e)},a.DecoderSpecificInfo.prototype=new a.Descriptor,a.SLConfigDescriptor=function(e){a.Descriptor.call(this,r,e)},a.SLConfigDescriptor.prototype=new a.Descriptor,this},u={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,boxCodes:["mdat","idat","free","skip","avcC","hvcC","ftyp","styp","payl","vttC","rtp ","sdp ","btrt","frma","trpy","tpyl","totl","tpay","dmed","dimm","drep","nump","npck","maxr","tmin","tmax","dmax","pmax","payt","vmhd","smhd","hmhd","idat","meco","udta","strk","free","skip"],fullBoxCodes:["mvhd","tkhd","mdhd","hdlr","vmhd","smhd","hmhd","nmhd","url ","urn ","ctts","cslg","stco","co64","stsc","stss","stsz","stz2","stts","stsh","mehd","trex","mfhd","tfhd","trun","tfdt","esds","subs","txtC","sidx","emsg","prft","pssh","elst","dref","url ","urn ","sbgp","sgpd","cprt","iods","ssix","tfra","mfro","pdin","tsel","trep","leva","stri","stsg","schm","stvi","padb","stdp","sdtp","saio","saiz","meta","xml ","bxml","iloc","pitm","ipro","iinf","infe","iref","mere","kind","elng"],containerBoxCodes:[["moov",["trak","sidx"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["udta"],["mfra"],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp"],["wave"]],sampleEntryCodes:[{prefix:"Visual",types:["mp4v","avc1","avc2","avc3","avc4","avcp","drac","encv","mjp2","mvc1","mvc2","resv","s263","svc1","vc-1","hvc1","hev1"]},{prefix:"Audio",types:["mp4a","ac-3","alac","dra1","dtsc","dtse",,"dtsh","dtsl","ec-3","enca","g719","g726","m4ae","mlpa","raw ","samr","sawb","sawp","sevc","sqcp","ssmv","twos",".mp3"]},{prefix:"Hint",types:["fdp ","m2ts","pm2t","prtp","rm2t","rrtp","rsrp","rtp ","sm2t","srtp"]},{prefix:"Metadata",types:["metx","mett","urim"]},{prefix:"Subtitle",types:["stpp","wvtt","sbtt","tx3g","stxt"]},{prefix:"System",types:["mp4s"]}],sampleGroupEntryCodes:["roll","prol","alst","rap ","tele","avss","avll","sync","tscl","tsas","stsa","scif","mvif","scnm","dtrt","vipr","tele","rash"],trackGroupTypes:["msrc"],initialize:function(){var e,t,n;for(u.FullBox.prototype=new u.Box,u.ContainerBox.prototype=new u.Box,u.SampleEntry.prototype=new u.FullBox,u.TrackGroupTypeBox.prototype=new u.FullBox,n=u.boxCodes.length,e=0;e<n;e++)u[u.boxCodes[e]+"Box"]=function(e){return function(t){u.Box.call(this,u.boxCodes[e],t)}}(e),u[u.boxCodes[e]+"Box"].prototype=new u.Box;for(n=u.fullBoxCodes.length,e=0;e<n;e++)u[u.fullBoxCodes[e]+"Box"]=function(e){return function(t){u.FullBox.call(this,u.fullBoxCodes[e],t)}}(e),u[u.fullBoxCodes[e]+"Box"].prototype=new u.FullBox;for(n=u.containerBoxCodes.length,e=0;e<n;e++)u[u.containerBoxCodes[e][0]+"Box"]=function(e,t){return function(n){if(u.ContainerBox.call(this,u.containerBoxCodes[e][0],n),t){this.subBoxNames=t;for(var i=t.length,r=0;r<i;r++)this[t[r]+"s"]=[]}}}(e,u.containerBoxCodes[e][1]),u[u.containerBoxCodes[e][0]+"Box"].prototype=new u.ContainerBox;for(n=u.sampleEntryCodes.length,t=0;t<n;t++){var i=u.sampleEntryCodes[t].prefix,r=u.sampleEntryCodes[t].types,s=r.length;for(u[i+"SampleEntry"]=function(e,t){u.SampleEntry.call(this,e,t)},u[i+"SampleEntry"].prototype=new u.SampleEntry,e=0;e<s;e++)u[r[e]+"SampleEntry"]=function(e,t){return function(n){u[u.sampleEntryCodes[e].prefix+"SampleEntry"].call(this,u.sampleEntryCodes[e].types[t],n)}}(t,e),u[r[e]+"SampleEntry"].prototype=new u[i+"SampleEntry"]}for(n=u.sampleGroupEntryCodes.length,e=0;e<n;e++)u[u.sampleGroupEntryCodes[e]+"SampleGroupEntry"]=function(e){return function(t){u.SampleGroupEntry.call(this,u.sampleGroupEntryCodes[e],t)}}(e),u[u.sampleGroupEntryCodes[e]+"SampleGroupEntry"].prototype=new u.SampleGroupEntry;for(n=u.trackGroupTypes.length,e=0;e<n;e++)u[u.trackGroupTypes[e]+"Box"]=function(e){return function(t){u.TrackGroupTypeBox.call(this,u.trackGroupTypes[e],t)}}(e),u[u.trackGroupTypes[e]+"Box"].prototype=new u.TrackGroupTypeBox},Box:function(e,t){this.type=e,this.size=t},FullBox:function(e,t){u.Box.call(this,e,t),this.flags=0,this.version=0},ContainerBox:function(e,t){u.Box.call(this,e,t),this.boxes=[]},SampleEntry:function(e,t,n,i){u.Box.call(this,e,t),this.hdr_size=n,this.start=i,this.boxes=[]},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,t){u.FullBox.call(this,e,t)}};u.initialize(),u.TKHD_FLAG_ENABLED=1,u.TKHD_FLAG_IN_MOVIE=2,u.TKHD_FLAG_IN_PREVIEW=4,u.TKHD_FLAG_IN_POSTER=8,u.TFHD_FLAG_BASE_DATA_OFFSET=1,u.TFHD_FLAG_SAMPLE_DESC=2,u.TFHD_FLAG_SAMPLE_DUR=8,u.TFHD_FLAG_SAMPLE_SIZE=16,u.TFHD_FLAG_SAMPLE_FLAGS=32,u.TFHD_FLAG_DUR_EMPTY=65536,u.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,u.TRUN_FLAGS_DATA_OFFSET=1,u.TRUN_FLAGS_FIRST_FLAG=4,u.TRUN_FLAGS_DURATION=256,u.TRUN_FLAGS_SIZE=512,u.TRUN_FLAGS_FLAGS=1024,u.TRUN_FLAGS_CTS_OFFSET=2048,u.Box.prototype.add=function(e){var t=new u[e+"Box"];return this.boxes.push(t),this[e+"s"]?this[e+"s"].push(t):this[e]=t,t},u.Box.prototype.set=function(e,t){return this[e]=t,this},u.Box.prototype.addEntry=function(e,t){var n=t||"entries";return this[n]||(this[n]=[]),this[n].push(e),this},t.BoxParser=u,u.SampleEntry.prototype.isVideo=function(){return!1},u.SampleEntry.prototype.isAudio=function(){return!1},u.SampleEntry.prototype.isSubtitle=function(){return!1},u.SampleEntry.prototype.isMetadata=function(){return!1},u.SampleEntry.prototype.isHint=function(){return!1},u.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},u.SampleEntry.prototype.getWidth=function(){return""},u.SampleEntry.prototype.getHeight=function(){return""},u.SampleEntry.prototype.getChannelCount=function(){return""},u.SampleEntry.prototype.getSampleRate=function(){return""},u.SampleEntry.prototype.getSampleSize=function(){return""},u.VisualSampleEntry.prototype.isVideo=function(){return!0},u.VisualSampleEntry.prototype.getWidth=function(){return this.width},u.VisualSampleEntry.prototype.getHeight=function(){return this.height},u.AudioSampleEntry.prototype.isAudio=function(){return!0},u.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},u.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},u.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},u.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},u.MetadataSampleEntry.prototype.isMetadata=function(){return!0},u.decimalToHex=function(e,t){var n=Number(e).toString(16);for(t="undefined"==typeof t||null===t?t=2:t;n.length<t;)n="0"+n;return n},u.avc1SampleEntry.prototype.getCodec=function(){var e=u.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+u.decimalToHex(this.avcC.AVCProfileIndication)+u.decimalToHex(this.avcC.profile_compatibility)+u.decimalToHex(this.avcC.AVCLevelIndication):e},u.hvc1SampleEntry.prototype.getCodec=function(){var e,t=u.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(t+=".",this.hvcC.general_profile_space){case 0:t+="";break;case 1:t+="A";break;case 2:t+="B";break;case 3:t+="C"}t+=this.hvcC.general_profile_idc,t+=".";var n=this.hvcC.general_profile_compatibility,i=0;for(e=0;e<32&&(i|=1&n,31!=e);e++)i<<=1,n>>=1;t+=u.decimalToHex(i,0),t+=".",t+=0===this.hvcC.general_tier_flag?"L":"H",t+=this.hvcC.general_level_idc;var r=!1,s="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||r)&&(s="."+u.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+s,r=!0);t+=s}return t},u.mp4aSampleEntry.prototype.getCodec=function(){var e=u.SampleEntry.prototype.getCodec.call(this),t=this.esds||(this.wave||{}).esds;if(t&&t.esd){var n=t.esd.getOTI(),i=t.esd.getAudioConfig();return e+"."+u.decimalToHex(n)+(i?"."+i:"")}return e},u.stxtSampleEntry.prototype.getCodec=function(){var e=u.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},u.parseOneBox=function(e,t,n){var r,s,o,a=e.getPosition(),l=0;if(e.getEndPosition()-a<8)return i.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:u.ERR_NOT_ENOUGH_DATA};var c=e.readUint32();if(0===c)return i.debug("BoxParser","Found terminator box at "+a),{code:u.OK};var d=e.readString(4);if(i.debug("BoxParser","Found box of type "+d+" and size "+c+" at position "+a),l=8,"uuid"==d&&(o=e.readUint8Array(16),l+=16),1==c){if(e.getEndPosition()-e.getPosition()<8)return e.seek(a),i.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+d+'" box'),{code:u.ERR_NOT_ENOUGH_DATA};c=e.readUint64(),l+=8}else if(0===c&&"mdat"!==d)throw"Unlimited box size not supported";return n&&c>n?(i.error("BoxParser","Box of type "+d+" has a size "+c+" greater than its container size "+n),{code:u.ERR_NOT_ENOUGH_DATA,type:d,size:c,hdr_size:l,start:a}):a+c>e.getEndPosition()?(e.seek(a),i.warn("BoxParser",'Not enough data in stream to parse the entire "'+d+'" box'),{code:u.ERR_NOT_ENOUGH_DATA,type:d,size:c,hdr_size:l,start:a}):t?{code:u.OK,type:d,size:c,hdr_size:l,start:a}:(u[d+"Box"]?r=new u[d+"Box"](c):("uuid"!==d&&i.warn("BoxParser","Unknown box type: "+d),r=new u.Box(d,c),o&&(r.uuid=o)),r.hdr_size=l,r.start=a,r.write===u.Box.prototype.write&&"mdat"!==r.type&&(i.warn("BoxParser",r.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),r.parseDataAndRewind(e)),r.parse(e),s=e.getPosition()-(r.start+r.size),s<0?(i.warn("BoxParser","Parsing of box "+r.type+" did not read the entire indicated box data size (missing "+-s+" bytes), seeking forward"),e.seek(r.start+r.size)):s>0&&(i.error("BoxParser","Parsing of box "+r.type+" read "+s+" more bytes than the indicated box data size, seeking backwards"),e.seek(r.start+r.size)),{code:u.OK,box:r,size:r.size})},u.Box.prototype.parse=function(e){"mdat"!=this.type?this.data=e.readUint8Array(this.size-this.hdr_size):0===this.size?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},u.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},u.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},u.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},u.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},u.ContainerBox.prototype.parse=function(e){for(var t,n;e.getPosition()<this.start+this.size;){if(t=u.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),t.code!==u.OK)return;n=t.box,this.boxes.push(n),this.subBoxNames&&this.subBoxNames.indexOf(n.type)!=-1?this[this.subBoxNames[this.subBoxNames.indexOf(n.type)]+"s"].push(n):this[n.type]=n}},u.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var t=[];t[0]=this.language>>10&31,t[1]=this.language>>5&31,t[2]=31&this.language,this.languageString=String.fromCharCode(t[0]+96,t[1]+96,t[2]+96)},u.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},u.TrackReferenceTypeBox=function(e,t,n,i){u.Box.call(this,e,t),this.hdr_size=n,this.start=i},u.TrackReferenceTypeBox.prototype=new u.Box,u.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},u.avcCBox.prototype.parse=function(e){var t,n,i,r;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=3&e.readUint8(),n=31&e.readUint8(),r=this.size-this.hdr_size-6,this.SPS=new Array(n),t=0;t<n;t++)i=e.readUint16(),this.SPS[t]=e.readUint8Array(i),r-=2+i;for(n=e.readUint8(),r--,this.PPS=new Array(n),t=0;t<n;t++)i=e.readUint16(),this.PPS[t]=e.readUint8Array(i),r-=2+i;r>0&&(this.ext=e.readUint8Array(r))},u.btrtBox.prototype.parse=function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()},u.co64Box.prototype.parse=function(e){var t,n;if(this.parseFullHeader(e),t=e.readUint32(),this.chunk_offsets=[],0===this.version)for(n=0;n<t;n++)this.chunk_offsets.push(e.readUint64())},u.cprtBox.prototype.parse=function(e){this.parseFullHeader(e),this.parseLanguage(e),this.notice=e.readCString()},u.cslgBox.prototype.parse=function(e){this.parseFullHeader(e),0===this.version&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())},u.cttsBox.prototype.parse=function(e){var t,n;if(this.parseFullHeader(e),t=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],0===this.version)for(n=0;n<t;n++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32());else if(1==this.version)for(n=0;n<t;n++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())},u.dimmBox.prototype.parse=function(e){this.bytessent=e.readUint64()},u.dmaxBox.prototype.parse=function(e){this.time=e.readUint32()},u.dmedBox.prototype.parse=function(e){this.bytessent=e.readUint64()},u.drefBox.prototype.parse=function(e){var t,n;this.parseFullHeader(e),this.entries=[];for(var i=e.readUint32(),r=0;r<i;r++){if(t=u.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),t.code!==u.OK)return;n=t.box,this.entries.push(n)}},u.drepBox.prototype.parse=function(e){this.bytessent=e.readUint64()},u.elngBox.prototype.parse=function(e){this.parseFullHeader(e),this.extended_language=e.readString(this.size-this.hdr_size)},u.elstBox.prototype.parse=function(e){this.parseFullHeader(e),this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.entries.push(i),1===this.version?(i.segment_duration=e.readUint64(),i.media_time=e.readInt64()):(i.segment_duration=e.readUint32(),i.media_time=e.readInt32()),i.media_rate_integer=e.readInt16(),i.media_rate_fraction=e.readInt16()}},u.emsgBox.prototype.parse=function(e){this.parseFullHeader(e),this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32();var t=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));this.message_data=e.readUint8Array(t)},u.esdsBox.prototype.parse=function(e){this.parseFullHeader(e);var t=e.readUint8Array(this.size-this.hdr_size);if("undefined"!=typeof l){var n=new l;this.esd=n.parseOneDescriptor(new s(t.buffer,0,s.BIG_ENDIAN))}},u.frmaBox.prototype.parse=function(e){this.data_format=e.readString(4)},u.ftypBox.prototype.parse=function(e){var t=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),t-=8,this.compatible_brands=[];for(var n=0;t>=4;)this.compatible_brands[n]=e.readString(4),t-=4,n++},u.hdlrBox.prototype.parse=function(e){this.parseFullHeader(e),0===this.version?(this.componentType=e.readString(4),this.componentSubType=e.readString(4),e.readUint32Array(3),this.name=e.readCString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1]&&(this.name=this.name.slice(0,-1))):this.data=e.readUint8Array(this.size-this.hdr_size)},u.hvcCBox.prototype.parse=function(e){var t,n,i,r;this.configurationVersion=e.readUint8(),r=e.readUint8(),this.general_profile_space=r>>6,this.general_tier_flag=(32&r)>>5,this.general_profile_idc=31&r,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=4095&e.readUint16(),this.parallelismType=3&e.readUint8(),this.chromaFormat=3&e.readUint8(),this.bitDepthLumaMinus8=7&e.readUint8(),this.bitDepthChromaMinus8=7&e.readUint8(),this.avgFrameRate=e.readUint16(),r=e.readUint8(),this.constantFrameRate=r>>6,this.numTemporalLayers=(13&r)>>3,this.temporalIdNested=(4&r)>>2,this.lengthSizeMinusOne=3&r,this.nalu_arrays=[];var s=e.readUint8();for(t=0;t<s;t++){var o=[];this.nalu_arrays.push(o),r=e.readUint8(),o.completeness=(128&r)>>7,o.nalu_type=63&r;var a=e.readUint16();for(n=0;n<a;n++){var l={};o.push(l),i=e.readUint16(),l.data=e.readUint8Array(i)}}},u.iinfBox.prototype.parse=function(e){var t;this.parseFullHeader(e),0===this.version?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var n=0;n<this.entry_count;n++){if(t=u.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),t.code!==u.OK)return;"infe"!==t.box.type&&i.error("BoxParser","Expected 'infe' box, got "+t.box.type),this.item_infos[n]=t.box}},u.ilocBox.prototype.parse=function(e){var t;this.parseFullHeader(e),t=e.readUint8(),this.offset_size=t>>4&15,this.length_size=15&t,t=e.readUint8(),this.base_offset_size=t>>4&15,1===this.version||2===this.version?this.index_size=15&t:this.index_size=0,this.items=[];var n=0;if(this.version<2)n=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";n=e.readUint32()}for(var i=0;i<n;i++){var r={};if(this.items.push(r),this.version<2)r.item_ID=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";r.item_ID=e.readUint16()}switch(1!==this.version&&2!==this.version||(r.construction_method=15&e.readUint16()),r.data_reference_index=e.readUint16(),this.base_offset_size){case 0:r.base_offset=0;break;case 4:r.base_offset=e.readUint32();break;case 8:r.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var s=e.readUint16();r.extents=[];for(var o=0;o<s;o++){var a={};if(r.extents.push(a),1===this.version||2===this.version)switch(this.index_size){case 0:a.extent_index=0;break;case 4:a.extent_index=e.readUint32();break;case 8:a.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:a.extent_offset=0;break;case 4:a.extent_offset=e.readUint32();break;case 8:a.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:a.extent_length=0;break;case 4:a.extent_length=e.readUint32();break;case 8:a.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}},u.infeBox.prototype.parse=function(e){return this.parseFullHeader(e),0!==this.version&&1!==this.version||(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),1===this.version?(this.extension_type=e.readString(4),i.warn("BoxParser","Cannot parse extension type"),void e.seek(this.start+this.size)):void(this.version>=2&&(2===this.version?this.item_ID=e.readUint16():3===this.version&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.name=e.readCString(),"mime"===this.item_type?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):"uri "===this.item_type&&(this.item_uri_type=e.readCString())))},u.irefBox=function(e){u.FullBox.call(this,"iref",e),this.references=[]},u.irefBox.prototype=new u.FullBox,u.irefBox.prototype.parse=function(e){var t,n;for(this.parseFullHeader(e);e.getPosition()<this.start+this.size;){if(t=u.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),t.code!==u.OK)return;n=0===this.version?new u.SingleItemTypeReferenceBox(t.type,t.size,t.hdr_size,t.start):new u.SingleItemTypeReferenceBoxLarge(t.type,t.size,t.hdr_size,t.start),n.write===u.Box.prototype.write&&"mdat"!==n.type&&(i.warn("BoxParser",n.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),n.parseDataAndRewind(e)),n.parse(e),this.references.push(n)}},u.kindBox=function(e){u.FullBox.call(this,"kind",e),this.schemeURI="",this.value=""},u.kindBox.prototype=new u.FullBox,u.kindBox.prototype.parse=function(e){this.parseFullHeader(e),this.schemeURI=e.readCString(),this.value=e.readCString()},u.levaBox.prototype.parse=function(e){this.parseFullHeader(e);var t=e.readUint8();this.levels=[];for(var n=0;n<t;n++){var r={};this.levels[n]=r,r.track_ID=e.readUint32();var s=e.readUint8();switch(r.padding_flag=s>>7,r.assignment_type=127&s,r.assignment_type){case 0:r.grouping_type=e.readUint32();break;case 1:r.grouping_type=e.readUint32(),r.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:r.sub_track_id=e.readUint32();break;default:i.warn("BoxParser","Unknown leva assignement type")}}},u.maxrBox.prototype.parse=function(e){this.period=e.readUint32(),this.bytes=e.readUint32()},u.mdhdBox.prototype.parse=function(e){this.parseFullHeader(e),1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()},u.mehdBox.prototype.parse=function(e){this.parseFullHeader(e),1|this.flags&&(i.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()},u.metaBox.prototype.parse=function(e){this.parseFullHeader(e),this.boxes=[],u.ContainerBox.prototype.parse.call(this,e)},u.mfhdBox.prototype.parse=function(e){this.parseFullHeader(e),this.sequence_number=e.readUint32()},u.mfroBox.prototype.parse=function(e){this.parseFullHeader(e),this._size=e.readUint32()},u.mvhdBox.prototype.parse=function(e){this.flags=0,this.parseFullHeader(e),1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()},u.npckBox.prototype.parse=function(e){this.packetssent=e.readUint32()},u.numpBox.prototype.parse=function(e){this.packetssent=e.readUint64()},u.padbBox.prototype.parse=function(e){this.parseFullHeader(e);var t=e.readUint32();this.padbits=[];for(var n=0;n<Math.floor((t+1)/2);n++)this.padbits=e.readUint8()},u.paylBox.prototype.parse=function(e){this.text=e.readString(this.size-this.hdr_size)},u.paytBox.prototype.parse=function(e){this.payloadID=e.readUint32();var t=e.readUint8();this.rtpmap_string=e.readString(t)},u.pdinBox.prototype.parse=function(e){this.parseFullHeader(e);var t=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var n=0;n<t;n++)this.rate[n]=e.readUint32(),this.initial_delay[n]=e.readUint32()},u.pitmBox.prototype.parse=function(e){this.parseFullHeader(e),0===this.version?this.item_id=e.readUint16():this.item_id=e.readUint32()},u.pmaxBox.prototype.parse=function(e){this.bytes=e.readUint32()},u.prftBox.prototype.parse=function(e){this.parseFullHeader(e),this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),0===this.version?this.media_time=e.readUint32():this.media_time=e.readUint64()},u.psshBox.prototype.parse=function(e){if(this.parseFullHeader(e),this.system_id=e.readUint8Array(16),this.version>0){var t=e.readUint32();this.kid=[];for(var n=0;n<t;n++)this.kid[n]=e.readUint8Array(16)}var i=e.readUint32();i>0&&(this.data=e.readUint8Array(i))},u["rtp Box"].prototype.parse=function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)},u.saioBox.prototype.parse=function(e){this.parseFullHeader(e),1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var t=e.readUint32();this.offset=[];for(var n=0;n<t;n++)0===this.version?this.offset[n]=e.readUint32():this.offset[n]=e.readUint64()},u.saizBox.prototype.parse=function(e){this.parseFullHeader(e),1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var t=e.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var n=0;n<t;n++)this.sample_info_size[n]=e.readUint8()},u.mettSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)},u.metxSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)},u.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},u.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},u.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},u.SampleEntry.prototype.parseFooter=function(e){for(var t,n;e.getPosition()<this.start+this.size;){if(t=u.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),t.code!==u.OK)return;n=t.box,n?(this.boxes.push(n),this[n.type]=n):e.position=this.start+this.size}},u.VisualSampleEntry.prototype.parse=function(e){this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),this.compressorname=e.readString(32),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)},u.AudioSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.version=e.readUint16(),this.revision=e.readUint16(),this.vendor=e.readUint32(),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),this.compressionId=e.readInt16(),this.packetSize=e.readUint16(),this.samplerate=e.readUint32()/65536,1==this.version&&(this.samplesPerPacket=e.readUint32(),this.bytesPerPacket=e.readUint32(),this.bytesPerFrame=e.readUint32(),this.bytesPerSample=e.readUint32()),this.parseFooter(e)},u.sbttSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)},u.stppSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)},u.stxtSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)},u.tx3gSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)},u.wvttSampleEntry.prototype.parse=function(e){this.parseHeader(e),this.parseFooter(e)},u.alstSampleGroupEntry.prototype.parse=function(e){var t,n=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],t=0;t<n;t++)this.sample_offset[t]=e.readUint32();var i=this.description_length-4-4*n;for(this.num_output_samples=[],this.num_total_samples=[],t=0;t<i/4;t++)this.num_output_samples[t]=e.readUint16(),this.num_total_samples[t]=e.readUint16()},u.avllSampleGroupEntry.prototype.parse=function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()},u.avssSampleGroupEntry.prototype.parse=function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var t=e.readUint8();this.durationFlag=t>>7,this.avgRateFlag=t>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var n=e.readUint8(),i=0;i<n;i++){var r={};this.dependency.push(r),r.subSeqDirectionFlag=e.readUint8(),r.layerNumber=e.readUint8(),r.subSequenceIdentifier=e.readUint16()}},u.dtrtSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.mvifSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.prolSampleGroupEntry.prototype.parse=function(e){this.roll_distance=e.readInt16()},u["rap SampleGroupEntry"].prototype.parse=function(e){var t=e.readUint8();this.num_leading_samples_known=t>>7,this.num_leading_samples=127&t},u.rashSampleGroupEntry.prototype.parse=function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)i.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var t=0;t<this.operation_point_count;t++)this.available_bitrate[t]=e.readUint32(),this.target_rate_share[t]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}},u.rollSampleGroupEntry.prototype.parse=function(e){this.roll_distance=e.readInt16()},u.SampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},u.scifSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.scnmSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.stsaSampleGroupEntry.prototype.parse=function(e){
i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.syncSampleGroupEntry.prototype.parse=function(e){var t=e.readUint8();this.NAL_unit_type=63&t},u.teleSampleGroupEntry.prototype.parse=function(e){var t=e.readUint8();this.level_independently_decodable=t>>7},u.tsasSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.tsclSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.viprSampleGroupEntry.prototype.parse=function(e){i.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},u.sbgpBox.prototype.parse=function(e){this.parseFullHeader(e),this.grouping_type=e.readString(4),1===this.version?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.entries.push(i),i.sample_count=e.readInt32(),i.group_description_index=e.readInt32()}},u.schmBox.prototype.parse=function(e){this.parseFullHeader(e),this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),1&this.flags&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))},u["sdp Box"].prototype.parse=function(e){this.sdptext=e.readString(this.size-this.hdr_size)},u.sdtpBox.prototype.parse=function(e){var t;this.parseFullHeader(e);var n=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var i=0;i<n;i++)t=e.readUint8(),this.is_leading[i]=t>>6,this.sample_depends_on[i]=t>>4&3,this.sample_is_depended_on[i]=t>>2&3,this.sample_has_redundancy[i]=3&t},u.sgpdBox.prototype.parse=function(e){this.parseFullHeader(e),this.grouping_type=e.readString(4),i.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var r;r=u[this.grouping_type+"SampleGroupEntry"]?new u[this.grouping_type+"SampleGroupEntry"](this.grouping_type):new u.SampleGroupEntry(this.grouping_type),this.entries.push(r),1===this.version&&0===this.default_length?r.description_length=e.readUint32():r.description_length=this.default_length,r.write===u.SampleGroupEntry.prototype.write&&(i.warn("BoxParser"," SampleEntry for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),r.data=e.readUint8Array(r.description_length),e.position-=r.description_length),r.parse(e)}},u.sidxBox.prototype.parse=function(e){this.parseFullHeader(e),this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),0===this.version?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var t=e.readUint16(),n=0;n<t;n++){var i={};this.references.push(i);var r=e.readUint32();i.reference_type=r>>31&1,i.referenced_size=2147483647&r,i.subsegment_duration=e.readUint32(),r=e.readUint32(),i.starts_with_SAP=r>>31&1,i.SAP_type=r>>28&7,i.SAP_delta_time=268435455&r}},u.SingleItemTypeReferenceBox=function(e,t,n,i){u.Box.call(this,e,t),this.hdr_size=n,this.start=i},u.SingleItemTypeReferenceBox.prototype=new u.Box,u.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var t=e.readUint16();this.references=[];for(var n=0;n<t;n++)this.references[n]=e.readUint16()},u.SingleItemTypeReferenceBoxLarge=function(e,t,n,i){u.Box.call(this,e,t),this.hdr_size=n,this.start=i},u.SingleItemTypeReferenceBoxLarge.prototype=new u.Box,u.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var t=e.readUint16();this.references=[];for(var n=0;n<t;n++)this.references[n]=e.readUint32()},u.ssixBox.prototype.parse=function(e){this.parseFullHeader(e),this.subsegments=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.subsegments.push(i),i.ranges=[];for(var r=e.readUint32(),s=0;s<r;s++){var o={};i.ranges.push(o),o.level=e.readUint8(),o.range_size=e.readUint24()}}},u.stcoBox.prototype.parse=function(e){var t;this.parseFullHeader(e),t=e.readUint32(),0===this.version&&(this.chunk_offsets=e.readUint32Array(t))},u.stdpBox.prototype.parse=function(e){this.parseFullHeader(e);var t=(this.size-this.hdr_size)/2;this.priority=[];for(var n=0;n<t;n++)this.priority[n]=e.readUint16()},u.striBox.prototype.parse=function(e){this.parseFullHeader(e),this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var t=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var n=0;n<t;n++)this.attribute_list[n]=e.readUint32()},u.stscBox.prototype.parse=function(e){var t,n;if(this.parseFullHeader(e),t=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(n=0;n<t;n++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())},u.stsdBox=function(e){u.FullBox.call(this,"stsd",e),this.entries=[]},u.stsdBox.prototype=new u.FullBox,u.stsdBox.prototype.parse=function(e){var t,n,r,s;for(this.parseFullHeader(e),r=e.readUint32(),t=1;t<=r;t++){if(n=u.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code!==u.OK)return;u[n.type+"SampleEntry"]?(s=new u[n.type+"SampleEntry"](n.size),s.hdr_size=n.hdr_size,s.start=n.start):(i.warn("BoxParser","Unknown sample entry type: "+n.type),s=new u.SampleEntry(n.type,n.size,n.hdr_size,n.start)),s.write===u.SampleEntry.prototype.write&&(i.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.entries.push(s)}},u.stsgBox.prototype.parse=function(e){this.parseFullHeader(e),this.grouping_type=e.readUint32();var t=e.readUint16();this.group_description_index=[];for(var n=0;n<t;n++)this.group_description_index[n]=e.readUint32()},u.stshBox.prototype.parse=function(e){var t,n;if(this.parseFullHeader(e),t=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(n=0;n<t;n++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())},u.stssBox.prototype.parse=function(e){var t,n;if(this.parseFullHeader(e),n=e.readUint32(),0===this.version)for(this.sample_numbers=[],t=0;t<n;t++)this.sample_numbers.push(e.readUint32())},u.stszBox.prototype.parse=function(e){var t;if(this.parseFullHeader(e),this.sample_sizes=[],0===this.version)if(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),0===this.sample_size)this.sample_sizes=e.readUint32Array(this.sample_count);else for(t=0;t<this.sample_count;t++)this.sample_sizes[t]=this.sample_size},u.sttsBox.prototype.parse=function(e){var t,n,r;if(this.parseFullHeader(e),t=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],0===this.version)for(n=0;n<t;n++)this.sample_counts.push(e.readUint32()),r=e.readInt32(),r<0&&(i.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),r=1),this.sample_deltas.push(r)},u.stviBox.prototype.parse=function(e){this.parseFullHeader(e);var t=e.readUint32();this.single_view_allowed=3&t,this.stereo_scheme=e.readUint32();var n=e.readUint32();this.stereo_indication_type=e.readString(n);var i,r;for(this.boxes=[];e.getPosition()<this.start+this.size;){if(i=u.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),i.code!==u.OK)return;r=i.box,this.boxes.push(r),this[r.type]=r}},u.stypBox.prototype.parse=function(e){u.ftypBox.prototype.parse.call(this,e)},u.stz2Box.prototype.parse=function(e){var t,n;if(this.parseFullHeader(e),this.sample_sizes=[],0===this.version)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),n=e.readUint32(),4===this.field_size)for(t=0;t<n;t+=2){var r=e.readUint8();this.sample_sizes[t]=r>>4&15,this.sample_sizes[t+1]=15&r}else if(8===this.field_size)for(t=0;t<n;t++)this.sample_sizes[t]=e.readUint8();else if(16===this.field_size)for(t=0;t<n;t++)this.sample_sizes[t]=e.readUint16();else i.error("BoxParser","Error in length field in stz2 box")},u.subsBox.prototype.parse=function(e){var t,n,i,r;for(this.parseFullHeader(e),i=e.readUint32(),this.entries=[],t=0;t<i;t++){var s={};if(this.entries[t]=s,s.sample_delta=e.readUint32(),s.subsamples=[],r=e.readUint16(),r>0)for(n=0;n<r;n++){var o={};s.subsamples.push(o),1==this.version?o.size=e.readUint32():o.size=e.readUint16(),o.priority=e.readUint8(),o.discardable=e.readUint8(),o.codec_specific_parameters=e.readUint32()}}},u.tfdtBox.prototype.parse=function(e){this.parseFullHeader(e),1==this.version?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()},u.tfhdBox.prototype.parse=function(e){var t=0;this.parseFullHeader(e),this.track_id=e.readUint32(),this.size-this.hdr_size>t&&this.flags&u.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),t+=8):this.base_data_offset=0,this.size-this.hdr_size>t&&this.flags&u.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),t+=4):this.default_sample_description_index=0,this.size-this.hdr_size>t&&this.flags&u.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),t+=4):this.default_sample_duration=0,this.size-this.hdr_size>t&&this.flags&u.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),t+=4):this.default_sample_size=0,this.size-this.hdr_size>t&&this.flags&u.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),t+=4):this.default_sample_flags=0},u.tfraBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_ID=e.readUint32(),e.readUint24();var t=e.readUint8();this.length_size_of_traf_num=t>>4&3,this.length_size_of_trun_num=t>>2&3,this.length_size_of_sample_num=3&t,this.entries=[];for(var n=e.readUint32(),i=0;i<n;i++)1===this.version?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()},u.tkhdBox.prototype.parse=function(e){this.parseFullHeader(e),1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()},u.tmaxBox.prototype.parse=function(e){this.time=e.readUint32()},u.tminBox.prototype.parse=function(e){this.time=e.readUint32()},u.totlBox.prototype.parse=function(e){this.bytessent=e.readUint32()},u.tpayBox.prototype.parse=function(e){this.bytessent=e.readUint32()},u.tpylBox.prototype.parse=function(e){this.bytessent=e.readUint64()},u.trefBox.prototype.parse=function(e){for(var t,n;e.getPosition()<this.start+this.size;){if(t=u.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),t.code!==u.OK)return;n=new u.TrackReferenceTypeBox(t.type,t.size,t.hdr_size,t.start),n.write===u.Box.prototype.write&&"mdat"!==n.type&&(i.warn("BoxParser",n.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),n.parseDataAndRewind(e)),n.parse(e),this.boxes.push(n)}},u.trepBox.prototype.parse=function(e){for(this.parseFullHeader(e),this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;){if(ret=u.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code!==u.OK)return;box=ret.box,this.boxes.push(box)}},u.trexBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()},u.trpyBox.prototype.parse=function(e){this.bytessent=e.readUint64()},u.trunBox.prototype.parse=function(e){var t=0;if(this.parseFullHeader(e),this.sample_count=e.readUint32(),t+=4,this.size-this.hdr_size>t&&this.flags&u.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),t+=4):this.data_offset=0,this.size-this.hdr_size>t&&this.flags&u.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),t+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>t)for(var n=0;n<this.sample_count;n++)this.flags&u.TRUN_FLAGS_DURATION&&(this.sample_duration[n]=e.readUint32()),this.flags&u.TRUN_FLAGS_SIZE&&(this.sample_size[n]=e.readUint32()),this.flags&u.TRUN_FLAGS_FLAGS&&(this.sample_flags[n]=e.readUint32()),this.flags&u.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[n]=e.readUint32():this.sample_composition_time_offset[n]=e.readInt32())},u.tselBox.prototype.parse=function(e){this.parseFullHeader(e),this.switch_group=e.readUint32();var t=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var n=0;n<t;n++)this.attribute_list[n]=e.readUint32()},u.txtCBox.prototype.parse=function(e){this.parseFullHeader(e),this.config=e.readCString()},u["url Box"].prototype.parse=function(e){this.parseFullHeader(e),1!==this.flags&&(this.location=e.readCString())},u["urn Box"].prototype.parse=function(e){this.parseFullHeader(e),this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())},u.vmhdBox.prototype.parse=function(e){this.parseFullHeader(e),this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)},u.vttCBox.prototype.parse=function(e){this.text=e.readString(this.size-this.hdr_size)},u.Box.prototype.writeHeader=function(e,t){this.size+=8,this.size>o&&(this.size+=8),"uuid"===this.type&&(this.size+=16),i.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(t||"")),this.size>o?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),"uuid"===this.type&&e.writeUint8Array(this.uuid),this.size>o&&e.writeUint64(this.size)},u.FullBox.prototype.writeHeader=function(e){this.size+=4,u.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},u.Box.prototype.write=function(e){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},u.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&(this.boxes[t].write(e),this.size+=this.boxes[t].size);i.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},u.TrackReferenceTypeBox.prototype.write=function(e){this.size=4*this.track_ids.length,this.writeHeader(e),e.writeUint32Array(this.track_ids)},u.avcCBox.prototype.write=function(e){var t;for(this.size=7,t=0;t<this.SPS.length;t++)this.size+=2+this.SPS[t].length;for(t=0;t<this.PPS.length;t++)this.size+=2+this.PPS[t].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),t=0;t<this.SPS.length;t++)e.writeUint16(this.SPS[t].length),e.writeUint8Array(this.SPS[t]);for(e.writeUint8(this.PPS.length),t=0;t<this.PPS.length;t++)e.writeUint16(this.PPS[t].length),e.writeUint8Array(this.PPS[t]);this.ext&&e.writeUint8Array(this.ext)},u.co64Box.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),t=0;t<this.chunk_offsets.length;t++)e.writeUint64(this.chunk_offsets[t])},u.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},u.cttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),1===this.version?e.writeInt32(this.sample_offsets[t]):e.writeUint32(this.sample_offsets[t])},u.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;i.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},u.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},u.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var n=this.entries[t];e.writeUint32(n.segment_duration),e.writeInt32(n.media_time),e.writeInt16(n.media_rate_integer),e.writeInt16(n.media_rate_fraction)}},u.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},u.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var t=0;t<this.compatible_brands.length;t++)e.writeString(this.compatible_brands[t],null,4)},u.hdlrBox.prototype.write=function(e){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeString(this.componentType,null,4),e.writeString(this.componentSubType,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},u.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},u.mdhdBox.prototype.write=function(e){this.size=20,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},u.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},u.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},u.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=96,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},u.SampleEntry.prototype.writeHeader=function(e){this.size=8,u.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},u.SampleEntry.prototype.writeFooter=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e),this.size+=this.boxes[t].size;i.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},u.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,i.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},u.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=70,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeString(this.compressorname,null,32),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},u.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=8,e.writeUint16(this.version),e.writeUint16(this.revision),e.writeUint32(this.vendor),this.version?1==this.version&&(this.size+=28,e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeInt16(this.compressionId),e.writeUint16(this.packetSize),e.writeUint32(this.samplerate<<16),e.writeUint32(this.samplesPerPacket),e.writeUint32(this.bytesPerPacket),e.writeUint32(this.bytesPerFrame),e.writeUint32(this.bytesPerSample)):(this.size+=12,e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16)),this.writeFooter(e)},u.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},u.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var n=this.entries[t];e.writeInt32(n.sample_count),e.writeInt32(n.group_description_index)}},u.sgpdBox.prototype.write=function(e){var t,n;for(this.flags=0,this.size=12,t=0;t<this.entries.length;t++)n=this.entries[t],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=n.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),1===this.version&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),t=0;t<this.entries.length;t++)n=this.entries[t],1===this.version&&0===this.default_length&&e.writeUint32(n.description_length),n.write(e)},u.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var t=0;t<this.references.length;t++){var n=this.references[t];e.writeUint32(n.reference_type<<31|n.referenced_size),e.writeUint32(n.subsegment_duration),e.writeUint32(n.starts_with_SAP<<31|n.SAP_type<<28|n.SAP_delta_time)}},u.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},u.stscBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),t=0;t<this.first_chunk.length;t++)e.writeUint32(this.first_chunk[t]),e.writeUint32(this.samples_per_chunk[t]),e.writeUint32(this.sample_description_index[t])},u.stsdBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;i.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},u.stshBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),t=0;t<this.shadowed_sample_numbers.length;t++)e.writeUint32(this.shadowed_sample_numbers[t]),e.writeUint32(this.sync_sample_numbers[t])},u.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},u.stszBox.prototype.write=function(e){var t,n=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(t=0;t+1<this.sample_sizes.length;){if(this.sample_sizes[t+1]!==this.sample_sizes[0]){n=!1;break}t++}else n=!1;this.size=8,n||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),n?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),n||e.writeUint32Array(this.sample_sizes)},u.sttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),e.writeUint32(this.sample_deltas[t])},u.tfdtBox.prototype.write=function(e){this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(e),1===this.version?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},u.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&u.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&u.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&u.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&u.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&u.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&u.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&u.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&u.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&u.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&u.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},u.tkhdBox.prototype.write=function(e){this.version=0,this.size=80,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},u.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},u.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&u.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&u.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&u.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&u.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&u.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&u.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&u.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&u.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var t=0;t<this.sample_count;t++)this.flags&u.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[t]),this.flags&u.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[t]),this.flags&u.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[t]),this.flags&u.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?e.writeUint32(this.sample_composition_time_offset[t]):e.writeInt32(this.sample_composition_time_offset[t]))},u["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},u["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},u.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},u.cttsBox.prototype.unpack=function(e){var t,n,i;for(i=0,t=0;t<this.sample_counts.length;t++)for(n=0;n<this.sample_counts[t];n++)e[i].pts=e[i].dts+this.sample_offsets[t],i++},u.sttsBox.prototype.unpack=function(e){var t,n,i;for(i=0,t=0;t<this.sample_counts.length;t++)for(n=0;n<this.sample_counts[t];n++)0===i?e[i].dts=0:e[i].dts=e[i-1].dts+this.sample_deltas[t],i++},u.stcoBox.prototype.unpack=function(e){var t;for(t=0;t<this.chunk_offsets.length;t++)e[t].offset=this.chunk_offsets[t]},u.stscBox.prototype.unpack=function(e){var t,n,i,r,s;for(r=0,s=0,t=0;t<this.first_chunk.length;t++)for(n=0;n<(t+1<this.first_chunk.length?this.first_chunk[t+1]:1/0);n++)for(s++,i=0;i<this.samples_per_chunk[t];i++){if(!e[r])return;e[r].description_index=this.sample_description_index[t],e[r].chunk_index=s,r++}},u.stszBox.prototype.unpack=function(e){var t;for(t=0;t<this.sample_sizes.length;t++)e[t].size=this.sample_sizes[t]};var c=function(){};c.prototype.parseSample=function(e){var t,n,i=new r(e.buffer);for(t=[];!i.isEos();)n=u.parseOneBox(i,!1),n.code===u.OK&&"vttc"===n.box.type&&t.push(n.box);return t},c.prototype.getText=function(e,t,n){function i(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}function r(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n),s=Math.floor(1e3*(e-3600*t-60*n-r));return""+i(t,2)+":"+i(n,2)+":"+i(r,2)+"."+i(s,3)}for(var s=this.parseSample(n),o="",a=0;a<s.length;a++){var l=s[a];o+=r(e)+" --> "+r(t)+"\r\n",o+=l.payl.text}return o};var d=function(){};d.prototype.parseSample=function(e){var t,n={};n.resources=[];var i=new r(e.data.buffer);if(e.subsamples&&0!==e.subsamples.length){if(n.documentString=i.readString(e.subsamples[0].size),e.subsamples.length>1)for(t=1;t<e.subsamples.length;t++)n.resources[t]=i.readUint8Array(e.subsamples[t].size)}else n.documentString=i.readString(e.data.length);return n.document=(new DOMParser).parseFromString(n.documentString,"application/xml"),n};var p=function(){};p.prototype.parseSample=function(e){var t,n=new r(e.data.buffer);return t=n.readString(e.data.length)},p.prototype.parseConfig=function(e){var t,n=new r(e.buffer);return n.readUint32(),t=n.readCString()};var h=function(e){this.stream=e,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1};h.prototype.parse=function(){var e,t,n=!1;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;){if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}if(this.saveParsePosition&&this.saveParsePosition(),e=u.parseOneBox(this.stream,n),e.code===u.ERR_NOT_ENOUGH_DATA){if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}return}switch(t=e.box,this.boxes.push(t),t.type){case"mdat":this.mdats.push(t);break;case"moof":this.moofs.push(t);break;case"moov":this.moovStartFound=!0,
0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[t.type]&&i.warn("ISOFile","Duplicate Box of type: "+t.type+", overriding previous occurrence"),this[t.type]=t}this.updateUsedBytes&&this.updateUsedBytes(t,e)}},h.prototype.getBox=function(e){var t=this.getBoxes(e,!0);return t.length?t[0]:null},h.prototype.getBoxes=function(e,t){var n=[];return h._sweep.call(this,e,n,t),n},h._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var i in this.boxes){if(t.length&&n)return;h._sweep.call(this.boxes[i],e,t,n)}},t.ISOFile=h,h.prototype.lastBoxStartPosition=0,h.prototype.parsingMdat=null,h.prototype.nextParsePosition=0,h.prototype.discardMdatData=!1,h.prototype.processIncompleteBox=function(e){var t,n,i;return"mdat"===e.type?(t=new u[e.type+"Box"](e.size),this.parsingMdat=t,this.boxes.push(t),this.mdats.push(t),t.start=e.start,t.hdr_size=e.hdr_size,this.stream.addUsedBytes(t.hdr_size),this.lastBoxStartPosition=t.start+t.size,i=this.stream.seek(t.start+t.size,!1,this.discardMdatData),i?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=t.start+t.size,!1)):("moov"===e.type&&(this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0)),n=!!this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer(),n?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},h.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},h.prototype.processIncompleteMdat=function(){var e,t;return e=this.parsingMdat,t=this.stream.seek(e.start+e.size,!1,this.discardMdatData),t?(i.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},h.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},h.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},h.prototype.updateUsedBytes=function(e,t){this.stream.addUsedBytes&&("mdat"===e.type?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},h.prototype.add=u.Box.prototype.add,h.prototype.init=function(){var e=this.add("moov");return e.add("mvhd").set("timescale",600).set("rate",1).set("creation_time",0).set("modification_time",0).set("duration",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("next_track_id",1),e.add("mvex"),this},h.prototype.addTrack=function(e){this.moov||this.init();var t=e||{};t.width=t.width||320,t.height=t.height||320,t.id=t.id||this.moov.mvhd.next_track_id,t.type=t.type||"avc1";var n=this.moov.add("trak");this.moov.mvhd.next_track_id=t.id+1,n.add("tkhd").set("creation_time",0).set("modification_time",0).set("track_id",t.id).set("duration",0).set("layer",0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",t.width).set("height",t.height);var i=n.add("mdia");i.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",t.timescale||1).set("duration",0).set("language",t.language||0),i.add("hdlr").set("handler",t.hdlr||"vide").set("name",t.name||"Track created with MP4Box.js"),i.add("elng").set("extended_language",t.language||"fr-FR");for(var r=i.add("minf"),s=new u[t.type+"SampleEntry"],o="",a=0;a<u.sampleEntryCodes.length;a++){var l=u.sampleEntryCodes[a];if(l.types.indexOf(t.type)>-1){o=l.prefix;break}}switch(o){case"Visual":r.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),s.set("width",t.width).set("height",t.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",t.type+" Compressor").set("depth",24),s.add("avcC").set("SPS",[]).set("PPS",[]).set("configurationVersion",0).set("AVCProfileIndication",0).set("profile_compatibility",0).set("AVCLevelIndication",0).set("lengthSizeMinusOne",0);break;case"Audio":r.add("smhd");break;case"Hint":r.add("hmhd");break;case"Subtitle":r.add("sthd");break;case"Metadata":r.add("nmhd");break;case"System":r.add("nmhd");break;default:r.add("nmhd")}r.add("dinf").add("dref").addEntry((new u["url Box"]).set("flags",1));var c=i.add("stbl");return c.add("stsd").addEntry(s),c.add("stts").set("sample_counts",[]).set("sample_deltas",[]),c.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),this.moov.mvex.add("trex").set("track_id",t.id).set("default_sample_description_index",t.default_sample_description_index||0).set("default_sample_duration",t.default_sample_duration||0).set("default_sample_size",t.default_sample_size||0).set("default_sample_flags",t.default_sample_flags||0),n},h.prototype.getBuffer=function(){var e=new s;return e.endianness=s.BIG_ENDIAN,this.write(e),e.buffer},h.prototype.addSample=function(e,t,n){},h.prototype.lastMoofIndex=0,h.prototype.samplesDataSize=0,h.prototype.resetTables=function(){var e,t,n,i,r,s,o,a;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){t=this.moov.traks[e],t.tkhd.duration=0,t.mdia.mdhd.duration=0,n=t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64,n.chunk_offsets=[],i=t.mdia.minf.stbl.stsc,i.first_chunk=[],i.samples_per_chunk=[],i.sample_description_index=[],r=t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2,r.sample_sizes=[],s=t.mdia.minf.stbl.stts,s.sample_counts=[],s.sample_deltas=[],o=t.mdia.minf.stbl.ctts,o&&(o.sample_counts=[],o.sample_offsets=[]),a=t.mdia.minf.stbl.stss;var l=t.mdia.minf.stbl.boxes.indexOf(a);l!=-1&&(t.mdia.minf.stbl.boxes[l]=null)}},h.initSampleGroups=function(e,t,n,i,r){function s(e,t,n){this.grouping_type=e,this.grouping_type_parameter=t,this.sbgp=n,this.last_sample_in_run=-1,this.entry_index=-1}var o,a,l,u;for(t&&(t.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),a=0;a<n.length;a++){for(u=n[a].grouping_type+"/"+n[a].grouping_type_parameter,l=new s(n[a].grouping_type,n[a].grouping_type_parameter,n[a]),t&&(t.sample_groups_info[u]=l),e.sample_groups_info[u]||(e.sample_groups_info[u]=l),o=0;o<i.length;o++)i[o].grouping_type===n[a].grouping_type&&(l.description=i[o],l.description.used=!0);if(r)for(o=0;o<r.length;o++)r[o].grouping_type===n[a].grouping_type&&(l.fragment_description=r[o],l.fragment_description.used=!0,l.is_fragment=!0)}if(t){if(r)for(a=0;a<r.length;a++)!r[a].used&&r[a].version>=2&&(u=r[a].grouping_type+"/0",l=new s(r[a].grouping_type,0),l.is_fragment=!0,t.sample_groups_info[u]||(t.sample_groups_info[u]=l))}else for(a=0;a<i.length;a++)!i[a].used&&i[a].version>=2&&(u=i[a].grouping_type+"/0",l=new s(i[a].grouping_type,0),e.sample_groups_info[u]||(e.sample_groups_info[u]=l))},h.setSampleGroupProperties=function(e,t,n,i){var r,s;t.sample_groups=[];for(r in i)if(t.sample_groups[r]={},t.sample_groups[r].grouping_type=i[r].grouping_type,t.sample_groups[r].grouping_type_parameter=i[r].grouping_type_parameter,n>=i[r].last_sample_in_run&&(i[r].last_sample_in_run<0&&(i[r].last_sample_in_run=0),i[r].entry_index++,i[r].entry_index<=i[r].sbgp.entries.length-1&&(i[r].last_sample_in_run+=i[r].sbgp.entries[i[r].entry_index].sample_count)),i[r].entry_index<=i[r].sbgp.entries.length-1?t.sample_groups[r].group_description_index=i[r].sbgp.entries[i[r].entry_index].group_description_index:t.sample_groups[r].group_description_index=-1,0!==t.sample_groups[r].group_description_index){var o;o=i[r].fragment_description?i[r].fragment_description:i[r].description,t.sample_groups[r].group_description_index>0?(s=t.sample_groups[r].group_description_index>65535?(t.sample_groups[r].group_description_index>>16)-1:t.sample_groups[r].group_description_index-1,o&&s>=0&&(t.sample_groups[r].description=o.entries[s])):o&&o.version>=2&&o.default_group_description_index>0&&(t.sample_groups[r].description=o.entries[o.default_group_description_index-1])}},h.process_sdtp=function(e,t,n){t&&(e?(t.is_leading=e.is_leading[n],t.depends_on=e.sample_depends_on[n],t.is_depended_on=e.sample_is_depended_on[n],t.has_redundancy=e.sample_has_redundancy[n]):(t.is_leading=0,t.depends_on=0,t.is_depended_on=0,t.has_redundancy=0))},h.prototype.buildSampleLists=function(){var e,t,n,i,r,s,o,a,l,u,c,d,p,f,m,g,v,b,y,w,_,C,S,E,T,x;for(e=0;e<this.moov.traks.length;e++)if(n=this.moov.traks[e],n.samples=[],n.samples_duration=0,n.samples_size=0,i=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,r=n.mdia.minf.stbl.stsc,s=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,o=n.mdia.minf.stbl.stts,a=n.mdia.minf.stbl.ctts,l=n.mdia.minf.stbl.stss,u=n.mdia.minf.stbl.stsd,c=n.mdia.minf.stbl.subs,f=n.mdia.minf.stbl.stdp,d=n.mdia.minf.stbl.sbgps,p=n.mdia.minf.stbl.sgpds,w=-1,_=-1,C=-1,S=-1,E=0,T=0,x=0,h.initSampleGroups(n,null,d,p),"undefined"!=typeof s){for(t=0;t<s.sample_sizes.length;t++){var k={};k.number=t,k.track_id=n.tkhd.track_id,k.timescale=n.mdia.mdhd.timescale,k.alreadyRead=0,n.samples[t]=k,k.size=s.sample_sizes[t],n.samples_size+=k.size,0===t?(g=1,m=0,k.chunk_index=g,k.chunk_run_index=m,y=r.samples_per_chunk[m],b=0,v=m+1<r.first_chunk.length?r.first_chunk[m+1]-1:1/0):t<y?(k.chunk_index=g,k.chunk_run_index=m):(g++,k.chunk_index=g,b=0,g<=v||(m++,v=m+1<r.first_chunk.length?r.first_chunk[m+1]-1:1/0),k.chunk_run_index=m,y+=r.samples_per_chunk[m]),k.description_index=r.sample_description_index[k.chunk_run_index]-1,k.description=u.entries[k.description_index],k.offset=i.chunk_offsets[k.chunk_index-1]+b,b+=k.size,t>w&&(_++,w<0&&(w=0),w+=o.sample_counts[_]),t>0?(n.samples[t-1].duration=o.sample_deltas[_],n.samples_duration+=n.samples[t-1].duration,k.dts=n.samples[t-1].dts+n.samples[t-1].duration):k.dts=0,a?(t>=C&&(S++,C<0&&(C=0),C+=a.sample_counts[S]),k.cts=n.samples[t].dts+a.sample_offsets[S]):k.cts=k.dts,l?t==l.sample_numbers[E]-1?(k.is_sync=!0,E++):k.is_sync=!1:k.is_sync=!0,h.process_sdtp(n.mdia.minf.stbl.sdtp,k,k.number),f?k.degradation_priority=f.priority[t]:k.degradation_priority=0,c&&c.entries[T].sample_delta+x==t&&(k.subsamples=c.entries[T].subsamples,x+=c.entries[T].sample_delta),(d.length>0||p.length>0)&&h.setSampleGroupProperties(n,k,t,n.sample_groups_info)}t>0&&(n.samples[t-1].duration=Math.max(n.mdia.mdhd.duration-n.samples[t-1].dts,0),n.samples_duration+=n.samples[t-1].duration)}},h.prototype.updateSampleLists=function(){var e,t,n,i,r,s,o,a,l,c,d,p,f,m,g;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(l=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==l.type)for(c=l,e=0;e<c.trafs.length;e++){for(d=c.trafs[e],p=this.getTrackById(d.tfhd.track_id),f=this.getTrexById(d.tfhd.track_id),i=d.tfhd.flags&u.TFHD_FLAG_SAMPLE_DESC?d.tfhd.default_sample_description_index:f?f.default_sample_description_index:1,r=d.tfhd.flags&u.TFHD_FLAG_SAMPLE_DUR?d.tfhd.default_sample_duration:f?f.default_sample_duration:0,s=d.tfhd.flags&u.TFHD_FLAG_SAMPLE_SIZE?d.tfhd.default_sample_size:f?f.default_sample_size:0,o=d.tfhd.flags&u.TFHD_FLAG_SAMPLE_FLAGS?d.tfhd.default_sample_flags:f?f.default_sample_flags:0,d.sample_number=0,d.sbgps.length>0&&h.initSampleGroups(p,d,d.sbgps,p.mdia.minf.stbl.sgpds,d.sgpds),t=0;t<d.truns.length;t++){var v=d.truns[t];for(n=0;n<v.sample_count;n++){m={},m.number_in_traf=d.sample_number,d.sample_number++,m.number=p.samples.length,d.first_sample_index=p.samples.length,p.samples.push(m),m.track_id=p.tkhd.track_id,m.timescale=p.mdia.mdhd.timescale,m.description_index=i-1,m.description=p.mdia.minf.stbl.stsd.entries[m.description_index],m.size=s,v.flags&u.TRUN_FLAGS_SIZE&&(m.size=v.sample_size[n]),p.samples_size+=m.size,m.duration=r,v.flags&u.TRUN_FLAGS_DURATION&&(m.duration=v.sample_duration[n]),p.samples_duration+=m.duration,p.first_traf_merged||n>0?m.dts=p.samples[p.samples.length-2].dts+p.samples[p.samples.length-2].duration:(d.tfdt?m.dts=d.tfdt.baseMediaDecodeTime:m.dts=0,p.first_traf_merged=!0),m.cts=m.dts,v.flags&u.TRUN_FLAGS_CTS_OFFSET&&(m.cts=m.dts+v.sample_composition_time_offset[n]),g=o,v.flags&u.TRUN_FLAGS_FLAGS?g=v.sample_flags[n]:0===n&&v.flags&u.TRUN_FLAGS_FIRST_FLAG&&(g=v.first_sample_flags),m.is_sync=!(g>>16&1),m.is_leading=g>>26&3,m.depends_on=g>>24&3,m.is_depended_on=g>>22&3,m.has_redundancy=g>>20&3,m.degradation_priority=65535&g,h.process_sdtp(d.sdtp,m,m.number_in_traf);var b=!!(d.tfhd.flags&u.TFHD_FLAG_BASE_DATA_OFFSET),y=!!(d.tfhd.flags&u.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),w=!!(v.flags&u.TRUN_FLAGS_DATA_OFFSET),_=0;_=b?d.tfhd.base_data_offset:y?c.start:0===t?c.start:a,0===t&&0===n?w?m.offset=_+v.data_offset:m.offset=_:m.offset=a,a=m.offset+m.size,(d.sbgps.length>0||d.sgpds.length>0||p.mdia.minf.stbl.sbgps.length>0||p.mdia.minf.stbl.sgpds.length>0)&&h.setSampleGroupProperties(p,m,m.number_in_traf,d.sample_groups_info)}}if(d.subs){p.has_fragment_subsamples=!0;var C=d.first_sample_index;for(t=0;t<d.subs.entries.length;t++)C+=d.subs.entries[t].sample_delta,m=p.samples[C-1],m.subsamples=d.subs.entries[t].subsamples}}},h.prototype.getSample=function(e,t){var n,r=e.samples[t];if(!this.moov)return null;if(r.data){if(r.alreadyRead==r.size)return r}else r.data=new Uint8Array(r.size),r.alreadyRead=0,this.samplesDataSize+=r.size,i.debug("ISOFile","Allocating sample #"+t+" on track #"+e.tkhd.track_id+" of size "+r.size+" (total: "+this.samplesDataSize+")");var o=this.stream.findPosition(!0,r.offset+r.alreadyRead,!1);if(o>-1){n=this.stream.buffers[o];var a=n.byteLength-(r.offset+r.alreadyRead-n.fileStart);return r.size-r.alreadyRead<=a?(i.debug("ISOFile","Getting sample #"+t+" data (alreadyRead: "+r.alreadyRead+" offset: "+(r.offset+r.alreadyRead-n.fileStart)+" read size: "+(r.size-r.alreadyRead)+" full size: "+r.size+")"),s.memcpy(r.data.buffer,r.alreadyRead,n,r.offset+r.alreadyRead-n.fileStart,r.size-r.alreadyRead),n.usedBytes+=r.size-r.alreadyRead,this.stream.logBufferLevel(),r.alreadyRead=r.size,r):(i.debug("ISOFile","Getting sample #"+t+" partial data (alreadyRead: "+r.alreadyRead+" offset: "+(r.offset+r.alreadyRead-n.fileStart)+" read size: "+a+" full size: "+r.size+")"),s.memcpy(r.data.buffer,r.alreadyRead,n,r.offset+r.alreadyRead-n.fileStart,a),r.alreadyRead+=a,n.usedBytes+=a,this.stream.logBufferLevel(),null)}return null},h.prototype.releaseSample=function(e,t){var n=e.samples[t];return n.data?(this.samplesDataSize-=n.size,n.data=null,n.alreadyRead=0,n.size):0},h.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},h.prototype.getCodecs=function(){var e,t="";for(e=0;e<this.moov.traks.length;e++){var n=this.moov.traks[e];e>0&&(t+=","),t+=n.mdia.minf.stbl.stsd.entries[0].getCodec()}return t},h.prototype.getTrexById=function(e){var t;if(!this.moov||!this.moov.mvex)return null;for(t=0;t<this.moov.mvex.trexs.length;t++){var n=this.moov.mvex.trexs[t];if(n.track_id==e)return n}return null},h.prototype.getTrackById=function(e){if(void 0===this.moov)return null;for(var t=0;t<this.moov.traks.length;t++){var n=this.moov.traks[t];if(n.tkhd.track_id==e)return n}return null},h.prototype.items=[],h.prototype.itemsDataSize=0,h.prototype.flattenItemInfo=function(){var e,t,n,r=this.items,s=this.meta;if(null!==s&&void 0!==s&&void 0!==s.hdlr&&void 0!==s.iinf){for(e=0;e<s.iinf.item_infos.length;e++)n={},n.id=s.iinf.item_infos[e].item_ID,r[n.id]=n,n.ref_to=[],n.name=s.iinf.item_infos[e].item_name,s.iinf.item_infos[e].protection_index>0&&(n.protection=s.ipro.protections[s.iinf.item_infos[e].protection_index-1]),s.iinf.item_infos[e].item_type?n.type=s.iinf.item_infos[e].item_type:n.type="mime",n.content_type=s.iinf.item_infos[e].content_type,n.content_encoding=s.iinf.item_infos[e].content_encoding;if(s.iloc)for(e=0;e<s.iloc.items.length;e++){var o=s.iloc.items[e];if(n=r[o.item_ID],0!==o.data_reference_index&&(i.warn("Item storage with reference to other files: not supported"),n.source=s.dinf.boxes[o.data_reference_index-1]),void 0!==o.construction_method)switch(i.warn("Item storage with construction_method : not supported"),o.construction_method){case 0:break;case 1:break;case 2:}else for(n.extents=[],n.size=0,t=0;t<o.extents.length;t++)n.extents[t]={},n.extents[t].offset=o.extents[t].extent_offset+o.base_offset,n.extents[t].length=o.extents[t].extent_length,n.extents[t].alreadyRead=0,n.size+=n.extents[t].length}if(s.pitm&&(r[s.pitm.item_id].primary=!0),s.iref)for(e=0;e<s.iref.references.length;e++){var a=s.iref.references[e];for(t=0;t<a.references.length;t++)r[a.from_item_ID].ref_to.push({type:a.type,id:a.references[t]})}}},h.prototype.getItem=function(e){var t,n;if(!this.meta)return null;if(n=this.items[e],!n.data&&n.size)n.data=new Uint8Array(n.size),n.alreadyRead=0,this.itemsDataSize+=n.size,i.debug("ISOFile","Allocating item #"+e+" of size "+n.size+" (total: "+this.itemsDataSize+")");else if(n.alreadyRead===n.size)return n;for(var r=0;r<n.extents.length;r++){var o=n.extents[r];if(o.alreadyRead!==o.length){var a=this.stream.findPosition(!0,o.offset+o.alreadyRead,!1);if(!(a>-1))return null;t=this.stream.buffers[a];var l=t.byteLength-(o.offset+o.alreadyRead-t.fileStart);if(!(o.length-o.alreadyRead<=l))return i.debug("ISOFile","Getting item #"+e+" extent #"+r+" partial data (alreadyRead: "+o.alreadyRead+" offset: "+(o.offset+o.alreadyRead-t.fileStart)+" read size: "+l+" full extent size: "+o.length+" full item size: "+n.size+")"),s.memcpy(n.data.buffer,n.alreadyRead,t,o.offset+o.alreadyRead-t.fileStart,l),o.alreadyRead+=l,n.alreadyRead+=l,t.usedBytes+=l,this.stream.logBufferLevel(),null;i.debug("ISOFile","Getting item #"+e+" extent #"+r+" data (alreadyRead: "+o.alreadyRead+" offset: "+(o.offset+o.alreadyRead-t.fileStart)+" read size: "+(o.length-o.alreadyRead)+" full extent size: "+o.length+" full item size: "+n.size+")"),s.memcpy(n.data.buffer,n.alreadyRead,t,o.offset+o.alreadyRead-t.fileStart,o.length-o.alreadyRead),t.usedBytes+=o.length-o.alreadyRead,this.stream.logBufferLevel(),o.alreadyRead=o.length,n.alreadyRead+=o.length}}return n.alreadyRead===n.size?n:null},h.prototype.releaseItem=function(e){var t=this.items[e];if(t.data){this.itemsDataSize-=t.size,t.data=null,t.alreadyRead=0;for(var n=0;n<t.extents.length;n++){var i=t.extents[n];i.alreadyRead=0}return t.size}return 0},h.prototype.processItems=function(e){for(var t in this.items){var n=this.items[t];this.getItem(n.id),e&&!n.sent&&(e(n),n.sent=!0,n.data=null)}},h.prototype.hasItem=function(e){for(var t in this.items){var n=this.items[t];if(n.name===e)return n.id}return-1},h.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.componentSubType:null},h.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},h.prototype.write=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e)},h.writeInitializationSegment=function(e,t,n,r){var o;i.debug("ISOFile","Generating initialization segment");var a=new s;a.endianness=s.BIG_ENDIAN,e.write(a);var l=t.add("mvex");for(n&&l.add("mehd").set("fragment_duration",n),o=0;o<t.traks.length;o++)l.add("trex").set("track_id",t.traks[o].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",r).set("default_sample_size",0).set("default_sample_flags",65536);return t.write(a),a.buffer};var f=function(e){this.inputStream=new a,this.keepMdatData=void 0===e||e,this.inputIsoFile=new h(this.inputStream),this.inputIsoFile.discardMdatData=!this.keepMdatData,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1};f.prototype.setSegmentOptions=function(e,t,n){var i=this.inputIsoFile.getTrackById(e);if(i){var r={};this.fragmentedTracks.push(r),r.id=e,r.user=t,r.trak=i,i.nextSample=0,r.segmentStream=null,r.nb_samples=1e3,r.rapAlignement=!0,n&&(n.nbSamples&&(r.nb_samples=n.nbSamples),n.rapAlignement&&(r.rapAlignement=n.rapAlignement))}},f.prototype.unsetSegmentOptions=function(e){for(var t=-1,n=0;n<this.fragmentedTracks.length;n++){var i=this.fragmentedTracks[n];i.id==e&&(t=n)}t>-1&&this.fragmentedTracks.splice(t,1)},f.prototype.setExtractionOptions=function(e,t,n){var i=this.inputIsoFile.getTrackById(e);if(i){var r={};this.extractedTracks.push(r),r.id=e,r.user=t,r.trak=i,i.nextSample=0,r.nb_samples=1e3,r.samples=[],n&&n.nbSamples&&(r.nb_samples=n.nbSamples)}},f.prototype.unsetExtractionOptions=function(e){for(var t=-1,n=0;n<this.extractedTracks.length;n++){var i=this.extractedTracks[n];i.id==e&&(t=n)}t>-1&&this.extractedTracks.splice(t,1)},f.prototype.createSingleSampleMoof=function(e){var t=new u.moofBox;t.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var n=t.add("traf");return n.add("tfhd").set("track_id",e.track_id).set("flags",u.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),n.add("tfdt").set("baseMediaDecodeTime",e.dts),n.add("trun").set("flags",u.TRUN_FLAGS_DATA_OFFSET|u.TRUN_FLAGS_DURATION|u.TRUN_FLAGS_SIZE|u.TRUN_FLAGS_FLAGS|u.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[0]).set("sample_composition_time_offset",[e.cts-e.dts]),t},f.prototype.createFragment=function(e,t,n,r){var o=this.inputIsoFile.getTrackById(t),a=this.inputIsoFile.getSample(o,n);if(null==a)return a=o.samples[n],this.nextSeekPosition?this.nextSeekPosition=Math.min(a.offset+a.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=o.samples[n].offset+a.alreadyRead,null;var l=r||new s;l.endianness=s.BIG_ENDIAN;var c=this.createSingleSampleMoof(a);c.write(l),c.trafs[0].truns[0].data_offset=c.size+8,i.debug("MP4Box","Adjusting data_offset with new value "+c.trafs[0].truns[0].data_offset),l.adjustUint32(c.trafs[0].truns[0].data_offset_position,c.trafs[0].truns[0].data_offset);var d=new u.mdatBox;return d.data=a.data,d.write(l),l},f.prototype.processSamples=function(){var e,t;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(e=0;e<this.fragmentedTracks.length;e++){var n=this.fragmentedTracks[e];for(t=n.trak;t.nextSample<t.samples.length&&this.sampleProcessingStarted;){i.debug("MP4Box","Creating media fragment on track #"+n.id+" for sample "+t.nextSample);var r=this.createFragment(this.inputIsoFile,n.id,t.nextSample,n.segmentStream);if(!r)break;if(n.segmentStream=r,t.nextSample++,(t.nextSample%n.nb_samples===0||t.nextSample>=t.samples.length)&&(i.info("MP4Box","Sending fragmented data on track #"+n.id+" for samples ["+Math.max(0,t.nextSample-n.nb_samples)+","+(t.nextSample-1)+"]"),i.info("MP4Box","Sample data size in memory: "+this.inputIsoFile.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(n.id,n.user,n.segmentStream.buffer,t.nextSample),n.segmentStream=null,n!==this.fragmentedTracks[e]))break}}if(null!==this.onSamples)for(e=0;e<this.extractedTracks.length;e++){var s=this.extractedTracks[e];for(t=s.trak;t.nextSample<t.samples.length&&this.sampleProcessingStarted;){i.debug("MP4Box","Exporting on track #"+s.id+" sample #"+t.nextSample);var o=this.inputIsoFile.getSample(t,t.nextSample);if(!o)break;if(t.nextSample++,s.samples.push(o),(t.nextSample%s.nb_samples===0||t.nextSample>=t.samples.length)&&(i.debug("MP4Box","Sending samples on track #"+s.id+" for sample "+t.nextSample),this.onSamples&&this.onSamples(s.id,s.user,s.samples),s.samples=[],s!==this.extractedTracks[e]))break}}}},f.prototype.checkBuffer=function(e){if(null===e||void 0===e)throw"Buffer must be defined and non empty";if(void 0===e.fileStart)throw"Buffer must have a fileStart property";return 0===e.byteLength?(i.warn("MP4Box","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.inputStream.logBufferLevel(),!1):(i.info("MP4Box","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.inputStream.insertBuffer(e),this.inputStream.logBufferLevel(),!!this.inputStream.initialized()||(i.warn("MP4Box","Not ready to start parsing"),!1))},f.prototype.appendBuffer=function(e){var t;if(!this.checkBuffer||this.checkBuffer(e))return this.inputIsoFile.parse(),this.inputIsoFile.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.inputIsoFile.moov?(this.processSamples&&(this.sampleListBuilt||(this.inputIsoFile.buildSampleLists(),this.sampleListBuilt=!0),this.inputIsoFile.updateSampleLists()),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples&&this.processSamples(),this.nextSeekPosition?(t=this.nextSeekPosition,this.nextSeekPosition=void 0):t=this.inputIsoFile.nextParsePosition,this.inputStream.getEndFilePositionAfter&&(t=this.inputStream.getEndFilePositionAfter(t))):t=null!==this.inputIsoFile?this.inputIsoFile.nextParsePosition:0,this.inputIsoFile.meta&&(this.inputIsoFile.flattenItemInfo&&!this.itemListBuilt&&(this.inputIsoFile.flattenItemInfo(),this.itemListBuilt=!0),this.inputIsoFile.processItems&&this.inputIsoFile.processItems(this.onItem)),this.inputStream.cleanBuffers&&(i.info("MP4Box","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+t),this.inputStream.logBufferLevel(),this.inputStream.cleanBuffers(),this.inputStream.logBufferLevel(!0),i.info("MP4Box","Sample data size in memory: "+this.inputIsoFile.getAllocatedSampleDataSize())),t},f.prototype.getInfo=function(){var e,t,n,i,r,s={},o=new Date(4,0,1,0,0,0,0).getTime();if(this.inputIsoFile.moov)for(s.hasMoov=!0,s.duration=this.inputIsoFile.moov.mvhd.duration,s.timescale=this.inputIsoFile.moov.mvhd.timescale,s.isFragmented=null!=this.inputIsoFile.moov.mvex,s.isFragmented&&this.inputIsoFile.moov.mvex.mehd&&(s.fragment_duration=this.inputIsoFile.moov.mvex.mehd.fragment_duration),s.isProgressive=this.inputIsoFile.isProgressive,s.hasIOD=null!=this.inputIsoFile.moov.iods,s.brands=[],s.brands.push(this.inputIsoFile.ftyp.major_brand),s.brands=s.brands.concat(this.inputIsoFile.ftyp.compatible_brands),s.created=new Date(o+1e3*this.inputIsoFile.moov.mvhd.creation_time),s.modified=new Date(o+1e3*this.inputIsoFile.moov.mvhd.modification_time),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.inputIsoFile.moov.traks.length;e++){if(n=this.inputIsoFile.moov.traks[e],r=n.mdia.minf.stbl.stsd.entries[0],i={},s.tracks.push(i),i.id=n.tkhd.track_id,i.name=n.mdia.hdlr.name,i.references=[],n.tref)for(t=0;t<n.tref.boxes.length;t++)ref={},i.references.push(ref),ref.type=n.tref.boxes[t].type,ref.track_ids=n.tref.boxes[t].track_ids;n.edts&&(i.edits=n.edts.elst.entries),i.created=new Date(o+1e3*n.tkhd.creation_time),i.modified=new Date(o+1e3*n.tkhd.modification_time),i.movie_duration=n.tkhd.duration,i.movie_timescale=s.timescale,i.layer=n.tkhd.layer,i.alternate_group=n.tkhd.alternate_group,i.volume=n.tkhd.volume,i.matrix=n.tkhd.matrix,i.track_width=n.tkhd.width/65536,i.track_height=n.tkhd.height/65536,i.timescale=n.mdia.mdhd.timescale,i.cts_shift=n.mdia.minf.stbl.cslg,i.duration=n.mdia.mdhd.duration,i.samples_duration=n.samples_duration,i.codec=r.getCodec(),i.kind=n.udta&&n.udta.kinds.length?n.udta.kinds[0]:{schemeURI:"",value:""},i.language=n.mdia.elng?n.mdia.elng.extended_language:n.mdia.mdhd.languageString,i.nb_samples=n.samples.length,i.size=n.samples_size,i.bitrate=8*i.size*i.timescale/i.samples_duration,r.isAudio()?(i.type="audio",s.audioTracks.push(i),i.audio={},i.audio.sample_rate=r.getSampleRate(),i.audio.channel_count=r.getChannelCount(),i.audio.sample_size=r.getSampleSize()):r.isVideo()?(i.type="video",s.videoTracks.push(i),i.video={},i.video.width=r.getWidth(),i.video.height=r.getHeight()):r.isSubtitle()?(i.type="subtitles",s.subtitleTracks.push(i)):r.isHint()?(i.type="metadata",s.hintTracks.push(i)):r.isMetadata()?(i.type="metadata",s.metadataTracks.push(i)):(i.type="metadata",s.otherTracks.push(i))}else s.hasMoov=!1;for(s.mime="",s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)0!==e&&(s.mime+=","),s.mime+=s.tracks[e].codec;return s.mime+='"; profiles="',s.mime+=this.inputIsoFile.ftyp.compatible_brands.join(),s.mime+='"',s},f.prototype.writeFile=function(){var e=new s;return e.endianness=s.BIG_ENDIAN,this.inputIsoFile.write(e),e.buffer},f.prototype.initializeSegmentation=function(){var e,t,n,r;for(null===this.onSegment&&i.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.inputIsoFile.resetTables()),t=[],e=0;e<this.fragmentedTracks.length;e++){var s=new u.moovBox;s.mvhd=this.inputIsoFile.moov.mvhd,s.boxes.push(s.mvhd),n=this.inputIsoFile.getTrackById(this.fragmentedTracks[e].id),s.boxes.push(n),s.traks.push(n),r={},r.id=n.tkhd.track_id,r.user=this.fragmentedTracks[e].user,r.buffer=h.writeInitializationSegment(this.inputIsoFile.ftyp,s,this.inputIsoFile.moov.mvex&&this.inputIsoFile.moov.mvex.mehd?this.inputIsoFile.moov.mvex.mehd.fragment_duration:void 0,this.inputIsoFile.moov.traks[e].samples.length>0?this.inputIsoFile.moov.traks[e].samples[0].duration:0),t.push(r)}return t},f.prototype.releaseUsedSamples=function(e,t){var n=0,r=this.inputIsoFile.getTrackById(e);r.lastValidSample||(r.lastValidSample=0);for(var s=r.lastValidSample;s<t;s++)n+=this.inputIsoFile.releaseSample(r,s);i.info("MP4Box","Track #"+e+" released samples up to "+t+" (released size: "+n+", remaining: "+this.inputIsoFile.samplesDataSize+")"),r.lastValidSample=t},f.prototype.flush=function(){i.info("MP4Box","Flushing remaining samples"),this.inputIsoFile.updateSampleLists(),this.processSamples(),this.inputStream.cleanBuffers(),this.inputStream.logBufferLevel(!0)},f.prototype.seekTrack=function(e,t,n){var r,s,o,a=1/0,l=0,u=0;if(0===n.samples.length)return i.info("MP4Box","No sample in track, cannot seek! Using time "+i.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(r=0;r<n.samples.length;r++){if(s=n.samples[r],0===r)u=0,o=s.timescale;else if(s.cts>e*s.timescale){u=r-1;break}t&&s.is_sync&&(l=r)}for(t&&(u=l),e=n.samples[u].cts,n.nextSample=u;n.samples[u].alreadyRead===n.samples[u].size;)u++;return a=n.samples[u].offset+n.samples[u].alreadyRead,i.info("MP4Box","Seeking to "+(t?"RAP":"")+" sample #"+n.nextSample+" on track "+n.tkhd.track_id+", time "+i.getDurationString(e,o)+" and offset: "+a),{offset:a,time:e/o}},f.prototype.seek=function(e,t){var n,r,s,o=this.inputIsoFile.moov,a={offset:1/0,time:1/0};if(this.inputIsoFile.moov){for(s=0;s<o.traks.length;s++)n=o.traks[s],r=this.seekTrack(e,t,n),r.offset<a.offset&&(a.offset=r.offset),r.time<a.time&&(a.time=r.time);return i.info("MP4Box","Seeking at time "+i.getDurationString(a.time,1)+" needs a buffer with a fileStart position of "+a.offset),a.offset===1/0?a={offset:this.inputIsoFile.nextParsePosition,time:0}:a.offset=this.inputStream.getEndFilePositionAfter(a.offset),i.info("MP4Box","Adjusted seek position (after checking data already in buffer): "+a.offset),a}throw"Cannot seek: moov not received!"},f.prototype.getTrackSamplesInfo=function(e){var t=this.inputIsoFile.getTrackById(e);return t?t.samples:void 0},f.prototype.getTrackSample=function(e,t){var n=this.inputIsoFile.getTrackById(e),i=this.inputIsoFile.getSample(n,t);return i},f.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples()},f.prototype.stop=function(){this.sampleProcessingStarted=!1},t.MP4Box=f},function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";var i=n(11),r=n(12),s=n(24),o=n(27),a=n(28),l=n(33),u=n(16),c=n(34),d=n(36),p=n(37),h=(n(18),u.createElement),f=u.createFactory,m=u.cloneElement,g=i,v={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:p},Component:s,PureComponent:o,createElement:h,cloneElement:m,isValidElement:u.isValidElement,PropTypes:c,createClass:a.createClass,createFactory:f,createMixin:function(e){return e},DOM:l,version:d,
__spread:g};e.exports=v},function(e,t){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(s){return!1}}var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(e,t){for(var i,a,l=n(e),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var c in i)s.call(i,c)&&(l[c]=i[c]);if(r){a=r(i);for(var d=0;d<a.length;d++)o.call(i,a[d])&&(l[a[d]]=i[a[d]])}}return l}},function(e,t,n){"use strict";function i(e){return(""+e).replace(w,"$&/")}function r(e,t){this.func=e,this.context=t,this.count=0}function s(e,t,n){var i=e.func,r=e.context;i.call(r,t,e.count++)}function o(e,t,n){if(null==e)return e;var i=r.getPooled(t,n);v(e,s,i),r.release(i)}function a(e,t,n,i){this.result=e,this.keyPrefix=t,this.func=n,this.context=i,this.count=0}function l(e,t,n){var r=e.result,s=e.keyPrefix,o=e.func,a=e.context,l=o.call(a,t,e.count++);Array.isArray(l)?u(l,r,n,g.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,s+(!l.key||t&&t.key===l.key?"":i(l.key)+"/")+n)),r.push(l))}function u(e,t,n,r,s){var o="";null!=n&&(o=i(n)+"/");var u=a.getPooled(t,o,r,s);v(e,l,u),a.release(u)}function c(e,t,n){if(null==e)return e;var i=[];return u(e,i,null,t,n),i}function d(e,t,n){return null}function p(e,t){return v(e,d,null)}function h(e){var t=[];return u(e,t,null,g.thatReturnsArgument),t}var f=n(13),m=n(16),g=n(19),v=n(21),b=f.twoArgumentPooler,y=f.fourArgumentPooler,w=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(r,b),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(a,y);var _={forEach:o,map:c,mapIntoWithKeyPrefixInternal:u,count:p,toArray:h};e.exports=_},function(e,t,n){"use strict";var i=n(14),r=(n(15),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),s=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},o=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},a=function(e,t,n,i){var r=this;if(r.instancePool.length){var s=r.instancePool.pop();return r.call(s,e,t,n,i),s}return new r(e,t,n,i)},l=function(e,t,n,i,r){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,i,r),o}return new s(e,t,n,i,r)},u=function(e){var t=this;e instanceof t?void 0:i("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,d=r,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||d,n.poolSize||(n.poolSize=c),n.release=u,n},h={addPoolingTo:p,oneArgumentPooler:r,twoArgumentPooler:s,threeArgumentPooler:o,fourArgumentPooler:a,fiveArgumentPooler:l};e.exports=h},function(e,t){"use strict";function n(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}e.exports=n},function(e,t,n){"use strict";function i(e,t,n,i,s,o,a,l){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,s,o,a,l],d=0;u=new Error(t.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var r=function(e){};e.exports=i},function(e,t,n){"use strict";function i(e){return void 0!==e.ref}function r(e){return void 0!==e.key}var s=n(11),o=n(17),a=(n(18),n(20),Object.prototype.hasOwnProperty),l="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,u={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,i,r,s,o){var a={$$typeof:l,type:e,key:t,ref:n,props:o,_owner:s};return a};c.createElement=function(e,t,n){var s,l={},d=null,p=null,h=null,f=null;if(null!=t){i(t)&&(p=t.ref),r(t)&&(d=""+t.key),h=void 0===t.__self?null:t.__self,f=void 0===t.__source?null:t.__source;for(s in t)a.call(t,s)&&!u.hasOwnProperty(s)&&(l[s]=t[s])}var m=arguments.length-2;if(1===m)l.children=n;else if(m>1){for(var g=Array(m),v=0;v<m;v++)g[v]=arguments[v+2];l.children=g}if(e&&e.defaultProps){var b=e.defaultProps;for(s in b)void 0===l[s]&&(l[s]=b[s])}return c(e,d,p,h,f,o.current,l)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){var n=c(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},c.cloneElement=function(e,t,n){var l,d=s({},e.props),p=e.key,h=e.ref,f=e._self,m=e._source,g=e._owner;if(null!=t){i(t)&&(h=t.ref,g=o.current),r(t)&&(p=""+t.key);var v;e.type&&e.type.defaultProps&&(v=e.type.defaultProps);for(l in t)a.call(t,l)&&!u.hasOwnProperty(l)&&(void 0===t[l]&&void 0!==v?d[l]=v[l]:d[l]=t[l])}var b=arguments.length-2;if(1===b)d.children=n;else if(b>1){for(var y=Array(b),w=0;w<b;w++)y[w]=arguments[w+2];d.children=y}return c(e.type,p,h,f,m,g,d)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===l},c.REACT_ELEMENT_TYPE=l,e.exports=c},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";var i=n(19),r=i;e.exports=r},function(e,t){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var i=!1;e.exports=i},function(e,t,n){"use strict";function i(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function r(e,t,n,s){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||a.isValidElement(e))return n(s,e,""===t?c+i(e,0):t),1;var h,f,m=0,g=""===t?c:t+d;if(Array.isArray(e))for(var v=0;v<e.length;v++)h=e[v],f=g+i(h,v),m+=r(h,f,n,s);else{var b=l(e);if(b){var y,w=b.call(e);if(b!==e.entries)for(var _=0;!(y=w.next()).done;)h=y.value,f=g+i(h,_++),m+=r(h,f,n,s);else for(;!(y=w.next()).done;){var C=y.value;C&&(h=C[1],f=g+u.escape(C[0])+d+i(h,0),m+=r(h,f,n,s))}}else if("object"===p){var S="",E=String(e);o("31","[object Object]"===E?"object with keys {"+Object.keys(e).join(", ")+"}":E,S)}}return m}function s(e,t,n){return null==e?0:r(e,"",t,n)}var o=n(14),a=(n(17),n(16)),l=n(22),u=(n(15),n(23)),c=(n(18),"."),d=":";e.exports=s},function(e,t){"use strict";function n(e){var t=e&&(i&&e[i]||e[r]);if("function"==typeof t)return t}var i="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";e.exports=n},function(e,t){"use strict";function n(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},i=(""+e).replace(t,function(e){return n[e]});return"$"+i}function i(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},i="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+i).replace(t,function(e){return n[e]})}var r={escape:n,unescape:i};e.exports=r},function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||s}var r=n(14),s=n(25),o=(n(20),n(26));n(15),n(18);i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?r("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};e.exports=i},function(e,t,n){"use strict";function i(e,t){}var r=(n(18),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){i(e,"forceUpdate")},enqueueReplaceState:function(e,t){i(e,"replaceState")},enqueueSetState:function(e,t){i(e,"setState")}});e.exports=r},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||a}function r(){}var s=n(11),o=n(24),a=n(25),l=n(26);r.prototype=o.prototype,i.prototype=new r,i.prototype.constructor=i,s(i.prototype,o.prototype),i.prototype.isPureReactComponent=!0,e.exports=i},function(e,t,n){"use strict";function i(e,t){var n=C.hasOwnProperty(t)?C[t]:null;E.hasOwnProperty(t)&&(n!==w.OVERRIDE_BASE?d("73",t):void 0),e&&(n!==w.DEFINE_MANY&&n!==w.DEFINE_MANY_MERGED?d("74",t):void 0)}function r(e,t){if(t){"function"==typeof t?d("75"):void 0,f.isValidElement(t)?d("76"):void 0;var n=e.prototype,r=n.__reactAutoBindPairs;t.hasOwnProperty(y)&&S.mixins(e,t.mixins);for(var s in t)if(t.hasOwnProperty(s)&&s!==y){var o=t[s],u=n.hasOwnProperty(s);if(i(u,s),S.hasOwnProperty(s))S[s](e,o);else{var c=C.hasOwnProperty(s),p="function"==typeof o,h=p&&!c&&!u&&t.autobind!==!1;if(h)r.push(s,o),n[s]=o;else if(u){var m=C[s];!c||m!==w.DEFINE_MANY_MERGED&&m!==w.DEFINE_MANY?d("77",m,s):void 0,m===w.DEFINE_MANY_MERGED?n[s]=a(n[s],o):m===w.DEFINE_MANY&&(n[s]=l(n[s],o))}else n[s]=o}}}else;}function s(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in S;r?d("78",n):void 0;var s=n in e;s?d("79",n):void 0,e[n]=i}}}function o(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:d("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?d("81",n):void 0,e[n]=t[n]);return e}function a(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return o(r,n),o(r,i),r}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function u(e,t){var n=t.bind(e);return n}function c(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];e[i]=u(e,r)}}var d=n(14),p=n(11),h=n(24),f=n(16),m=(n(29),n(31),n(25)),g=n(26),v=(n(15),n(30)),b=n(32),y=(n(18),b({mixins:null})),w=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),_=[],C={mixins:w.DEFINE_MANY,statics:w.DEFINE_MANY,propTypes:w.DEFINE_MANY,contextTypes:w.DEFINE_MANY,childContextTypes:w.DEFINE_MANY,getDefaultProps:w.DEFINE_MANY_MERGED,getInitialState:w.DEFINE_MANY_MERGED,getChildContext:w.DEFINE_MANY_MERGED,render:w.DEFINE_ONCE,componentWillMount:w.DEFINE_MANY,componentDidMount:w.DEFINE_MANY,componentWillReceiveProps:w.DEFINE_MANY,shouldComponentUpdate:w.DEFINE_ONCE,componentWillUpdate:w.DEFINE_MANY,componentDidUpdate:w.DEFINE_MANY,componentWillUnmount:w.DEFINE_MANY,updateComponent:w.OVERRIDE_BASE},S={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=p({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=p({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=a(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=p({},e.propTypes,t)},statics:function(e,t){s(e,t)},autobind:function(){}},E={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},T=function(){};p(T.prototype,h.prototype,E);var x={createClass:function(e){var t=function(e,n,i){this.__reactAutoBindPairs.length&&c(this),this.props=e,this.context=n,this.refs=g,this.updater=i||m,this.state=null;var r=this.getInitialState?this.getInitialState():null;"object"!=typeof r||Array.isArray(r)?d("82",t.displayName||"ReactCompositeComponent"):void 0,this.state=r};t.prototype=new T,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],_.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:d("83");for(var n in C)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){_.push(e)}}};e.exports=x},function(e,t,n){"use strict";var i=n(30),r=i({prop:null,context:null,childContext:null});e.exports=r},function(e,t,n){"use strict";var i=n(15),r=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:i(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=r},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";var i=n(16),r=i.createFactory,s={a:r("a"),abbr:r("abbr"),address:r("address"),area:r("area"),article:r("article"),aside:r("aside"),audio:r("audio"),b:r("b"),base:r("base"),bdi:r("bdi"),bdo:r("bdo"),big:r("big"),blockquote:r("blockquote"),body:r("body"),br:r("br"),button:r("button"),canvas:r("canvas"),caption:r("caption"),cite:r("cite"),code:r("code"),col:r("col"),colgroup:r("colgroup"),data:r("data"),datalist:r("datalist"),dd:r("dd"),del:r("del"),details:r("details"),dfn:r("dfn"),dialog:r("dialog"),div:r("div"),dl:r("dl"),dt:r("dt"),em:r("em"),embed:r("embed"),fieldset:r("fieldset"),figcaption:r("figcaption"),figure:r("figure"),footer:r("footer"),form:r("form"),h1:r("h1"),h2:r("h2"),h3:r("h3"),h4:r("h4"),h5:r("h5"),h6:r("h6"),head:r("head"),header:r("header"),hgroup:r("hgroup"),hr:r("hr"),html:r("html"),i:r("i"),iframe:r("iframe"),img:r("img"),input:r("input"),ins:r("ins"),kbd:r("kbd"),keygen:r("keygen"),label:r("label"),legend:r("legend"),li:r("li"),link:r("link"),main:r("main"),map:r("map"),mark:r("mark"),menu:r("menu"),menuitem:r("menuitem"),meta:r("meta"),meter:r("meter"),nav:r("nav"),noscript:r("noscript"),object:r("object"),ol:r("ol"),optgroup:r("optgroup"),option:r("option"),output:r("output"),p:r("p"),param:r("param"),picture:r("picture"),pre:r("pre"),progress:r("progress"),q:r("q"),rp:r("rp"),rt:r("rt"),ruby:r("ruby"),s:r("s"),samp:r("samp"),script:r("script"),section:r("section"),select:r("select"),small:r("small"),source:r("source"),span:r("span"),strong:r("strong"),style:r("style"),sub:r("sub"),summary:r("summary"),sup:r("sup"),table:r("table"),tbody:r("tbody"),td:r("td"),textarea:r("textarea"),tfoot:r("tfoot"),th:r("th"),thead:r("thead"),time:r("time"),title:r("title"),tr:r("tr"),track:r("track"),u:r("u"),ul:r("ul"),"var":r("var"),video:r("video"),wbr:r("wbr"),circle:r("circle"),clipPath:r("clipPath"),defs:r("defs"),ellipse:r("ellipse"),g:r("g"),image:r("image"),line:r("line"),linearGradient:r("linearGradient"),mask:r("mask"),path:r("path"),pattern:r("pattern"),polygon:r("polygon"),polyline:r("polyline"),radialGradient:r("radialGradient"),rect:r("rect"),stop:r("stop"),svg:r("svg"),text:r("text"),tspan:r("tspan")};e.exports=s},function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e){this.message=e,this.stack=""}function s(e){function t(t,n,i,s,o,a,l){s=s||x,a=a||i;if(null==n[i]){var u=C[o];return t?new r("Required "+u+" `"+a+"` was not specified in "+("`"+s+"`.")):null}return e(n,i,s,o,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function o(e){function t(t,n,i,s,o,a){var l=t[n],u=b(l);if(u!==e){var c=C[s],d=y(l);return new r("Invalid "+c+" `"+o+"` of type "+("`"+d+"` supplied to `"+i+"`, expected ")+("`"+e+"`."))}return null}return s(t)}function a(){return s(E.thatReturns(null))}function l(e){function t(t,n,i,s,o){if("function"!=typeof e)return new r("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a)){var l=C[s],u=b(a);return new r("Invalid "+l+" `"+o+"` of type "+("`"+u+"` supplied to `"+i+"`, expected an array."))}for(var c=0;c<a.length;c++){var d=e(a,c,i,s,o+"["+c+"]",S);if(d instanceof Error)return d}return null}return s(t)}function u(){function e(e,t,n,i,s){var o=e[t];if(!_.isValidElement(o)){var a=C[i],l=b(o);return new r("Invalid "+a+" `"+s+"` of type "+("`"+l+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return s(e)}function c(e){function t(t,n,i,s,o){if(!(t[n]instanceof e)){var a=C[s],l=e.name||x,u=w(t[n]);return new r("Invalid "+a+" `"+o+"` of type "+("`"+u+"` supplied to `"+i+"`, expected ")+("instance of `"+l+"`."))}return null}return s(t)}function d(e){function t(t,n,s,o,a){for(var l=t[n],u=0;u<e.length;u++)if(i(l,e[u]))return null;var c=C[o],d=JSON.stringify(e);return new r("Invalid "+c+" `"+a+"` of value `"+l+"` "+("supplied to `"+s+"`, expected one of "+d+"."))}return Array.isArray(e)?s(t):E.thatReturnsNull}function p(e){function t(t,n,i,s,o){if("function"!=typeof e)return new r("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var a=t[n],l=b(a);if("object"!==l){var u=C[s];return new r("Invalid "+u+" `"+o+"` of type "+("`"+l+"` supplied to `"+i+"`, expected an object."))}for(var c in a)if(a.hasOwnProperty(c)){var d=e(a,c,i,s,o+"."+c,S);if(d instanceof Error)return d}return null}return s(t)}function h(e){function t(t,n,i,s,o){for(var a=0;a<e.length;a++){var l=e[a];if(null==l(t,n,i,s,o,S))return null}var u=C[s];return new r("Invalid "+u+" `"+o+"` supplied to "+("`"+i+"`."))}return Array.isArray(e)?s(t):E.thatReturnsNull}function f(){function e(e,t,n,i,s){if(!g(e[t])){var o=C[i];return new r("Invalid "+o+" `"+s+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return s(e)}function m(e){function t(t,n,i,s,o){var a=t[n],l=b(a);if("object"!==l){var u=C[s];return new r("Invalid "+u+" `"+o+"` of type `"+l+"` "+("supplied to `"+i+"`, expected `object`."))}for(var c in e){var d=e[c];if(d){var p=d(a,c,i,s,o+"."+c,S);if(p)return p}}return null}return s(t)}function g(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(g);if(null===e||_.isValidElement(e))return!0;var t=T(e);if(!t)return!1;var n,i=t.call(e);if(t!==e.entries){for(;!(n=i.next()).done;)if(!g(n.value))return!1}else for(;!(n=i.next()).done;){var r=n.value;if(r&&!g(r[1]))return!1}return!0;default:return!1}}function v(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function b(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":v(t,e)?"symbol":t}function y(e){var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e){return e.constructor&&e.constructor.name?e.constructor.name:x}var _=n(16),C=n(31),S=n(35),E=n(19),T=n(22),x=(n(18),"<<anonymous>>"),k={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),symbol:o("symbol"),any:a(),arrayOf:l,element:u(),instanceOf:c,node:f(),objectOf:p,oneOf:d,oneOfType:h,shape:m};r.prototype=Error.prototype,e.exports=k},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t){"use strict";e.exports="15.3.1"},function(e,t,n){"use strict";function i(e){return s.isValidElement(e)?void 0:r("143"),e}var r=n(14),s=n(16);n(15);e.exports=i},function(e,t,n){"use strict";e.exports=n(39)},function(e,t,n){"use strict";var i=n(40),r=n(43),s=n(162),o=n(63),a=n(60),l=n(36),u=n(167),c=n(168),d=n(169);n(18);r.inject();var p={findDOMNode:u,render:s.render,unmountComponentAtNode:s.unmountComponentAtNode,version:l,unstable_batchedUpdates:a.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?i.getNodeFromInstance(e):null}},Mount:s,Reconciler:o});e.exports=p},function(e,t,n){"use strict";function i(e){for(var t;t=e._renderedComponent;)e=t;return e}function r(e,t){var n=i(e);n._hostNode=t,t[m]=n}function s(e){var t=e._hostNode;t&&(delete t[m],e._hostNode=null)}function o(e,t){if(!(e._flags&f.hasCachedChildNodes)){var n=e._renderedChildren,s=t.firstChild;e:for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],l=i(a)._domID;if(0!==l){for(;null!==s;s=s.nextSibling)if(1===s.nodeType&&s.getAttribute(h)===String(l)||8===s.nodeType&&s.nodeValue===" react-text: "+l+" "||8===s.nodeType&&s.nodeValue===" react-empty: "+l+" "){r(a,s);continue e}c("32",l)}}e._flags|=f.hasCachedChildNodes}}function a(e){if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,i;e&&(i=e[m]);e=t.pop())n=i,t.length&&o(i,e);return n}function l(e){var t=a(e);return null!=t&&t._hostNode===e?t:null}function u(e){if(void 0===e._hostNode?c("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:c("34"),e=e._hostParent;for(;t.length;e=t.pop())o(e,e._hostNode);return e._hostNode}var c=n(14),d=n(41),p=n(42),h=(n(15),d.ID_ATTRIBUTE_NAME),f=p,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:a,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:o,precacheNode:r,uncacheNode:s};e.exports=g},function(e,t,n){"use strict";function i(e,t){return(e&t)===t}var r=n(14),s=(n(15),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=s,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in n){a.properties.hasOwnProperty(d)?r("48",d):void 0;var p=d.toLowerCase(),h=n[d],f={attributeName:p,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:i(h,t.MUST_USE_PROPERTY),hasBooleanValue:i(h,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(h,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(h,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(h,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:r("50",d),l.hasOwnProperty(d)){var m=l[d];f.attributeName=m}o.hasOwnProperty(d)&&(f.attributeNamespace=o[d]),u.hasOwnProperty(d)&&(f.propertyName=u[d]),c.hasOwnProperty(d)&&(f.mutationMethod=c[d]),a.properties[d]=f}}}),o=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",a={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:o,ATTRIBUTE_NAME_CHAR:o+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){var n=a._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:s};e.exports=a},function(e,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,t,n){"use strict";function i(){C||(C=!0,v.EventEmitter.injectReactEventListener(g),v.EventPluginHub.injectEventPluginOrder(o),v.EventPluginUtils.injectComponentTree(d),v.EventPluginUtils.injectTreeTraversal(h),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:_,EnterLeaveEventPlugin:a,ChangeEventPlugin:s,SelectEventPlugin:w,BeforeInputEventPlugin:r}),v.HostComponent.injectGenericComponentClass(c),v.HostComponent.injectTextComponentClass(f),v.DOMProperty.injectDOMPropertyConfig(l),v.DOMProperty.injectDOMPropertyConfig(y),v.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),v.Updates.injectReconcileTransaction(b),v.Updates.injectBatchingStrategy(m),v.Component.injectEnvironment(u))}var r=n(44),s=n(59),o=n(71),a=n(72),l=n(77),u=n(78),c=n(92),d=n(40),p=n(133),h=n(134),f=n(135),m=n(136),g=n(137),v=n(140),b=n(141),y=n(149),w=n(150),_=n(151),C=!1;e.exports={inject:i}},function(e,t,n){"use strict";function i(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function s(e){switch(e){case R.topCompositionStart:return D.compositionStart;case R.topCompositionEnd:return D.compositionEnd;case R.topCompositionUpdate:return D.compositionUpdate}}function o(e,t){return e===R.topKeyDown&&t.keyCode===_}function a(e,t){switch(e){case R.topKeyUp:return w.indexOf(t.keyCode)!==-1;case R.topKeyDown:return t.keyCode!==_;case R.topKeyPress:case R.topMouseDown:case R.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,i){var r,u;if(C?r=s(e):P?a(e,n)&&(r=D.compositionEnd):o(e,n)&&(r=D.compositionStart),!r)return null;T&&(P||r!==D.compositionStart?r===D.compositionEnd&&P&&(u=P.getData()):P=g.getPooled(i));var c=v.getPooled(r,t,n,i);if(u)c.data=u;else{var d=l(n);null!==d&&(c.data=d)}return f.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case R.topCompositionEnd:return l(t);case R.topKeyPress:var n=t.which;return n!==x?null:(A=!0,k);case R.topTextInput:var i=t.data;return i===k&&A?null:i;default:return null}}function d(e,t){if(P){if(e===R.topCompositionEnd||a(e,t)){var n=P.getData();return g.release(P),P=null,n}return null}switch(e){case R.topPaste:return null;case R.topKeyPress:return t.which&&!r(t)?String.fromCharCode(t.which):null;case R.topCompositionEnd:return T?null:t.data;default:return null}}function p(e,t,n,i){var r;if(r=E?c(e,n):d(e,n),!r)return null;var s=b.getPooled(D.beforeInput,t,n,i);return s.data=r,f.accumulateTwoPhaseDispatches(s),s}var h=n(45),f=n(46),m=n(53),g=n(54),v=n(56),b=n(58),y=n(32),w=[9,13,27,32],_=229,C=m.canUseDOM&&"CompositionEvent"in window,S=null;m.canUseDOM&&"documentMode"in document&&(S=document.documentMode);var E=m.canUseDOM&&"TextEvent"in window&&!S&&!i(),T=m.canUseDOM&&(!C||S&&S>8&&S<=11),x=32,k=String.fromCharCode(x),R=h.topLevelTypes,D={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[R.topCompositionEnd,R.topKeyPress,R.topTextInput,R.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[R.topBlur,R.topCompositionEnd,R.topKeyDown,R.topKeyPress,R.topKeyUp,R.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[R.topBlur,R.topCompositionStart,R.topKeyDown,R.topKeyPress,R.topKeyUp,R.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[R.topBlur,R.topCompositionUpdate,R.topKeyDown,R.topKeyPress,R.topKeyUp,R.topMouseDown]}},A=!1,P=null,I={eventTypes:D,extractEvents:function(e,t,n,i){return[u(e,t,n,i),p(e,t,n,i)]}};e.exports=I},function(e,t,n){"use strict";var i=n(30),r=i({bubbled:null,captured:null}),s=i({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:r};e.exports=o},function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return y(e,i)}function r(e,t,n){var r=t?b.bubbled:b.captured,s=i(e,n,r);s&&(n._dispatchListeners=g(n._dispatchListeners,s),n._dispatchInstances=g(n._dispatchInstances,e))}function s(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(e._targetInst,r,e)}function o(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?m.getParentInstance(t):null;m.traverseTwoPhase(n,r,e)}}function a(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=y(e,i);r&&(n._dispatchListeners=g(n._dispatchListeners,r),n._dispatchInstances=g(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&a(e._targetInst,null,e)}function u(e){v(e,s)}function c(e){v(e,o)}function d(e,t,n,i){m.traverseEnterLeave(n,i,a,e,t)}function p(e){v(e,l)}var h=n(45),f=n(47),m=n(49),g=n(51),v=n(52),b=(n(18),h.PropagationPhases),y=f.getListener,w={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:d};e.exports=w},function(e,t,n){"use strict";var i=n(14),r=n(48),s=n(49),o=n(50),a=n(51),l=n(52),u=(n(15),{}),c=null,d=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return d(e,!0)},h=function(e){return d(e,!1)},f=function(e){return"."+e._rootNodeID},m={injection:{injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?i("94",t,typeof n):void 0;var s=f(e),o=u[t]||(u[t]={});o[s]=n;var a=r.registrationNameModules[t];a&&a.didPutListener&&a.didPutListener(e,t,n)},getListener:function(e,t){var n=u[t],i=f(e);return n&&n[i]},deleteListener:function(e,t){var n=r.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var i=u[t];if(i){var s=f(e);delete i[s]}},deleteAllListeners:function(e){var t=f(e);for(var n in u)if(u.hasOwnProperty(n)&&u[n][t]){var i=r.registrationNameModules[n];i&&i.willDeleteListener&&i.willDeleteListener(e,n),delete u[n][t]}},extractEvents:function(e,t,n,i){for(var s,o=r.plugins,l=0;l<o.length;l++){var u=o[l];if(u){var c=u.extractEvents(e,t,n,i);c&&(s=a(s,c))}}return s},enqueueEvents:function(e){e&&(c=a(c,e))},processEventQueue:function(e){var t=c;c=null,e?l(t,p):l(t,h),c?i("95"):void 0,o.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};e.exports=m},function(e,t,n){"use strict";function i(){if(a)for(var e in l){var t=l[e],n=a.indexOf(e);if(n>-1?void 0:o("96",e),!u.plugins[n]){t.extractEvents?void 0:o("97",e),u.plugins[n]=t;var i=t.eventTypes;for(var s in i)r(i[s],t,s)?void 0:o("98",s,e)}}}function r(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?o("99",n):void 0,u.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];s(a,t,n)}return!0}return!!e.registrationName&&(s(e.registrationName,t,n),!0)}function s(e,t,n){u.registrationNameModules[e]?o("100",e):void 0,u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=n(14),a=(n(15),null),l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){a?o("101"):void 0,a=Array.prototype.slice.call(e),
i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];l.hasOwnProperty(n)&&l[n]===r||(l[n]?o("102",n):void 0,l[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){a=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=u.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r]}};e.exports=u},function(e,t,n){"use strict";function i(e){return e===b.topMouseUp||e===b.topTouchEnd||e===b.topTouchCancel}function r(e){return e===b.topMouseMove||e===b.topTouchMove}function s(e){return e===b.topMouseDown||e===b.topTouchStart}function o(e,t,n,i){var r=e.type||"unknown-event";e.currentTarget=y.getNodeFromInstance(i),t?g.invokeGuardedCallbackWithCatch(r,n,e):g.invokeGuardedCallback(r,n,e),e.currentTarget=null}function a(e,t){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)o(e,t,n[r],i[r]);else n&&o(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function u(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?f("103"):void 0,e.currentTarget=t?y.getNodeFromInstance(n):null;var i=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,i}function d(e){return!!e._dispatchListeners}var p,h,f=n(14),m=n(45),g=n(50),v=(n(15),n(18),{injectComponentTree:function(e){p=e},injectTreeTraversal:function(e){h=e}}),b=m.topLevelTypes,y={isEndish:i,isMoveish:r,isStartish:s,executeDirectDispatch:c,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:u,hasDispatches:d,getInstanceFromNode:function(e){return p.getInstanceFromNode(e)},getNodeFromInstance:function(e){return p.getNodeFromInstance(e)},isAncestor:function(e,t){return h.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return h.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return h.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return h.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,i,r){return h.traverseEnterLeave(e,t,n,i,r)},injection:v};e.exports=y},function(e,t,n){"use strict";function i(e,t,n,i){try{return t(n,i)}catch(s){return void(null===r&&(r=s))}}var r=null,s={invokeGuardedCallback:i,invokeGuardedCallbackWithCatch:i,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};e.exports=s},function(e,t,n){"use strict";function i(e,t){return null==t?r("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var r=n(14);n(15);e.exports=i},function(e,t){"use strict";function n(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=n},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=i},function(e,t,n){"use strict";function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=n(11),s=n(13),o=n(55);r(i.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,r=this.getText(),s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);var a=t>1?1-t:void 0;return this._fallbackText=r.slice(e,a),this._fallbackText}}),s.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(){return!s&&r.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var r=n(53),s=null;e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(57),s={data:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a?this[s]=a(n):"target"===s?this.target=i:this[s]=n[s]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}var r=n(11),s=n(13),o=n(19),a=(n(18),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<a.length;n++)this[a[n]]=null}}),i.Interface=l,i.augmentClass=function(e,t){var n=this,i=function(){};i.prototype=n.prototype;var o=new i;r(o,e.prototype),e.prototype=o,e.prototype.constructor=e,e.Interface=r({},n.Interface,t),e.augmentClass=n.augmentClass,s.addPoolingTo(e,s.fourArgumentPooler)},s.addPoolingTo(i,s.fourArgumentPooler),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(57),s={data:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function r(e){var t=E.getPooled(A.change,I,e,T(e));w.accumulateTwoPhaseDispatches(t),S.batchedUpdates(s,t)}function s(e){y.enqueueEvents(e),y.processEventQueue(!1)}function o(e,t){P=e,I=t,P.attachEvent("onchange",r)}function a(){P&&(P.detachEvent("onchange",r),P=null,I=null)}function l(e,t){if(e===D.topChange)return t}function u(e,t,n){e===D.topFocus?(a(),o(t,n)):e===D.topBlur&&a()}function c(e,t){P=e,I=t,M=e.value,O=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(P,"value",F),P.attachEvent?P.attachEvent("onpropertychange",p):P.addEventListener("propertychange",p,!1)}function d(){P&&(delete P.value,P.detachEvent?P.detachEvent("onpropertychange",p):P.removeEventListener("propertychange",p,!1),P=null,I=null,M=null,O=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==M&&(M=t,r(e))}}function h(e,t){if(e===D.topInput)return t}function f(e,t,n){e===D.topFocus?(d(),c(t,n)):e===D.topBlur&&d()}function m(e,t){if((e===D.topSelectionChange||e===D.topKeyUp||e===D.topKeyDown)&&P&&P.value!==M)return M=P.value,I}function g(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function v(e,t){if(e===D.topClick)return t}var b=n(45),y=n(47),w=n(46),_=n(53),C=n(40),S=n(60),E=n(57),T=n(68),x=n(69),k=n(70),R=n(32),D=b.topLevelTypes,A={change:{phasedRegistrationNames:{bubbled:R({onChange:null}),captured:R({onChangeCapture:null})},dependencies:[D.topBlur,D.topChange,D.topClick,D.topFocus,D.topInput,D.topKeyDown,D.topKeyUp,D.topSelectionChange]}},P=null,I=null,M=null,O=null,N=!1;_.canUseDOM&&(N=x("change")&&(!("documentMode"in document)||document.documentMode>8));var L=!1;_.canUseDOM&&(L=x("input")&&(!("documentMode"in document)||document.documentMode>11));var F={get:function(){return O.get.call(this)},set:function(e){M=""+e,O.set.call(this,e)}},V={eventTypes:A,extractEvents:function(e,t,n,r){var s,o,a=t?C.getNodeFromInstance(t):window;if(i(a)?N?s=l:o=u:k(a)?L?s=h:(s=m,o=f):g(a)&&(s=v),s){var c=s(e,t);if(c){var d=E.getPooled(A.change,c,n,r);return d.type="change",w.accumulateTwoPhaseDispatches(d),d}}o&&o(e,a,t)}};e.exports=V},function(e,t,n){"use strict";function i(){k.ReactReconcileTransaction&&_?void 0:c("123")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=p.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled(!0)}function s(e,t,n,r,s,o){i(),_.batchedUpdates(e,t,n,r,s,o)}function o(e,t){return e._mountOrder-t._mountOrder}function a(e){var t=e.dirtyComponentsLength;t!==v.length?c("124",t,v.length):void 0,v.sort(o),b++;for(var n=0;n<t;n++){var i=v[n],r=i._pendingCallbacks;i._pendingCallbacks=null;var s;if(f.logTopLevelRenders){var a=i;i._currentElement.props===i._renderedComponent._currentElement&&(a=i._renderedComponent),s="React update: "+a.getName(),console.time(s)}if(m.performUpdateIfNecessary(i,e.reconcileTransaction,b),s&&console.timeEnd(s),r)for(var l=0;l<r.length;l++)e.callbackQueue.enqueue(r[l],i.getPublicInstance())}}function l(e){return i(),_.isBatchingUpdates?(v.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=b+1))):void _.batchedUpdates(l,e)}function u(e,t){_.isBatchingUpdates?void 0:c("125"),y.enqueue(e,t),w=!0}var c=n(14),d=n(11),p=n(61),h=n(13),f=n(62),m=n(63),g=n(67),v=(n(15),[]),b=0,y=p.getPooled(),w=!1,_=null,C={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),T()):v.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},E=[C,S];d(r.prototype,g.Mixin,{getTransactionWrappers:function(){return E},destructor:function(){this.dirtyComponentsLength=null,p.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),h.addPoolingTo(r);var T=function(){for(;v.length||w;){if(v.length){var e=r.getPooled();e.perform(a,null,e),r.release(e)}if(w){w=!1;var t=y;y=p.getPooled(),t.notifyAll(),p.release(t)}}},x={injectReconcileTransaction:function(e){e?void 0:c("126"),k.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:c("127"),"function"!=typeof e.batchedUpdates?c("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?c("129"):void 0,_=e}},k={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:l,flushBatchedUpdates:T,injection:x,asap:u};e.exports=k},function(e,t,n){"use strict";function i(){this._callbacks=null,this._contexts=null}var r=n(14),s=n(11),o=n(13);n(15);s(i.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?r("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(i),e.exports=i},function(e,t){"use strict";var n={logTopLevelRenders:!1};e.exports=n},function(e,t,n){"use strict";function i(){r.attachRefs(this,this._currentElement)}var r=n(64),s=(n(66),n(18),{mountComponent:function(e,t,n,r,s,o){var a=e.mountComponent(t,n,r,s,o);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(i,e),a},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){r.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,s){var o=e._currentElement;if(t!==o||s!==e._context){var a=r.shouldUpdateRefs(o,t);a&&r.detachRefs(e,o),e.receiveComponent(t,n,s),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=s},function(e,t,n){"use strict";function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):s.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):s.removeComponentAsRefFrom(t,e,n)}var s=n(65),o={};o.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&i(n,e,t._owner)}},o.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,i=null===t||t===!1;return n||i||t.ref!==e.ref||"string"==typeof t.ref&&t._owner!==e._owner},o.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},e.exports=o},function(e,t,n){"use strict";var i=n(14),r=(n(15),{isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r.isValidOwner(n)?void 0:i("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r.isValidOwner(n)?void 0:i("120");var s=n.getPublicInstance();s&&s.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=r},function(e,t,n){"use strict";var i=null;e.exports={debugTool:i}},function(e,t,n){"use strict";var i=n(14),r=(n(15),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,s,o,a,l){this.isInTransaction()?i("27"):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,r,s,o,a,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(d){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(r){}}}},closeAll:function(e){this.isInTransaction()?void 0:i("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r,o=t[n],a=this.wrapperInitData[n];try{r=!0,a!==s.OBSERVED_ERROR&&o.close&&o.close.call(this,a),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}}),s={Mixin:r,OBSERVED_ERROR:{}};e.exports=s},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function i(e,t){if(!s.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var o=document.createElement("div");o.setAttribute(n,"return;"),i="function"==typeof o[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,s=n(53);s.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=i},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!i[e.type]:"textarea"===t}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t,n){"use strict";var i=n(32),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];e.exports=r},function(e,t,n){"use strict";var i=n(45),r=n(46),s=n(40),o=n(73),a=n(32),l=i.topLevelTypes,u={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(e,t,n,i){if(e===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var a;if(i.window===i)a=i;else{var c=i.ownerDocument;a=c?c.defaultView||c.parentWindow:window}var d,p;if(e===l.topMouseOut){d=t;var h=n.relatedTarget||n.toElement;p=h?s.getClosestInstanceFromNode(h):null}else d=null,p=t;if(d===p)return null;var f=null==d?a:s.getNodeFromInstance(d),m=null==p?a:s.getNodeFromInstance(p),g=o.getPooled(u.mouseLeave,d,n,i);g.type="mouseleave",g.target=f,g.relatedTarget=m;var v=o.getPooled(u.mouseEnter,p,n,i);return v.type="mouseenter",v.target=m,v.relatedTarget=f,r.accumulateEnterLeaveDispatches(g,v,d,p),[g,v]}};e.exports=c},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(74),s=n(75),o=n(76),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+s.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+s.currentScrollTop}};r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(57),s=n(68),o={view:function(e){if(e.view)return e.view;var t=s(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,o),e.exports=i},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=r[e];return!!i&&!!n[i]}function i(e){return n}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=i},function(e,t,n){"use strict";var i=n(41),r=i.injection.MUST_USE_PROPERTY,s=i.injection.HAS_BOOLEAN_VALUE,o=i.injection.HAS_NUMERIC_VALUE,a=i.injection.HAS_POSITIVE_NUMERIC_VALUE,l=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:s,allowTransparency:0,alt:0,async:s,autoComplete:0,autoPlay:s,capture:s,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|s,cite:0,classID:0,className:0,cols:a,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:s,coords:0,crossOrigin:0,data:0,dateTime:0,"default":s,defer:s,dir:0,disabled:s,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:s,formTarget:0,frameBorder:0,headers:0,height:0,hidden:s,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:s,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|s,muted:r|s,name:0,nonce:0,noValidate:s,open:s,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:s,referrerPolicy:0,rel:0,required:s,reversed:s,role:0,rows:a,rowSpan:o,sandbox:0,scope:0,scoped:s,scrolling:0,seamless:s,selected:r|s,shape:0,size:a,sizes:0,span:a,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:o,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:s,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};e.exports=u},function(e,t,n){"use strict";var i=n(79),r=n(91),s={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup};e.exports=s},function(e,t,n){"use strict";function i(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function r(e,t,n){c.insertTreeBefore(e,t,n)}function s(e,t,n){Array.isArray(t)?a(e,t[0],t[1],n):g(e,t,n)}function o(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function a(e,t,n,i){for(var r=t;;){var s=r.nextSibling;if(g(e,r,i),r===n)break;r=s}}function l(e,t,n){for(;;){var i=t.nextSibling;if(i===n)break;e.removeChild(i)}}function u(e,t,n){var i=e.parentNode,r=e.nextSibling;r===t?n&&g(i,document.createTextNode(n),r):n?(m(r,n),l(i,r,t)):l(i,e,t)}var c=n(80),d=n(86),p=n(90),h=(n(40),n(66),n(83)),f=n(82),m=n(84),g=h(function(e,t,n){e.insertBefore(t,n)}),v=d.dangerouslyReplaceNodeWithMarkup,b={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var a=t[n];switch(a.type){case p.INSERT_MARKUP:r(e,a.content,i(e,a.afterNode));break;case p.MOVE_EXISTING:s(e,a.fromNode,i(e,a.afterNode));break;case p.SET_MARKUP:f(e,a.content);break;case p.TEXT_CONTENT:m(e,a.content);break;case p.REMOVE_NODE:o(e,a.fromNode)}}}};e.exports=b},function(e,t,n){"use strict";function i(e){if(g){var t=e.node,n=e.children;if(n.length)for(var i=0;i<n.length;i++)v(t,n[i],null);else null!=e.html?d(t,e.html):null!=e.text&&h(t,e.text)}}function r(e,t){e.parentNode.replaceChild(t.node,e),i(t)}function s(e,t){g?e.children.push(t):e.node.appendChild(t.node)}function o(e,t){g?e.html=t:d(e.node,t)}function a(e,t){g?e.text=t:h(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=n(81),d=n(82),p=n(83),h=n(84),f=1,m=11,g="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=p(function(e,t,n){t.node.nodeType===m||t.node.nodeType===f&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(i(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),i(t))});u.insertTreeBefore=v,u.replaceChildWithTree=r,u.queueChild=s,u.queueHTML=o,u.queueText=a,e.exports=u},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";var i,r=n(53),s=n(81),o=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(83),u=l(function(e,t){if(e.namespaceURI!==s.svg||"innerHTML"in e)e.innerHTML=t;else{i=i||document.createElement("div"),i.innerHTML="<svg>"+t+"</svg>";for(var n=i.firstChild.childNodes,r=0;r<n.length;r++)e.appendChild(n[r])}});if(r.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),o.test(t)||"<"===t[0]&&a.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=u},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e};e.exports=n},function(e,t,n){"use strict";var i=n(53),r=n(85),s=n(82),o=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){s(e,r(t))})),e.exports=o},function(e,t){"use strict";function n(e){var t=""+e,n=r.exec(t);if(!n)return t;var i,s="",o=0,a=0;for(o=n.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#x27;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}a!==o&&(s+=t.substring(a,o)),a=o+1,s+=i}return a!==o?s+t.substring(a,o):s}function i(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var r=/["'&<>]/;e.exports=i},function(e,t,n){"use strict";var i=n(14),r=n(80),s=n(53),o=n(87),a=n(19),l=(n(15),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(s.canUseDOM?void 0:i("56"),t?void 0:i("57"),"HTML"===e.nodeName?i("58"):void 0,"string"==typeof t){var n=o(t,a)[0];e.parentNode.replaceChild(n,e)}else r.replaceChildWithTree(e,t)}});e.exports=l},function(e,t,n){"use strict";function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var n=u;u?void 0:l(!1);var r=i(e),s=r&&a(r);if(s){n.innerHTML=s[1]+e+s[2];for(var c=s[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t?void 0:l(!1),o(d).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var s=n(53),o=n(88),a=n(89),l=n(15),u=s.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=r},function(e,t,n){"use strict";function i(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?o(!1):void 0,"number"!=typeof t?o(!1):void 0,0===t||t-1 in e?void 0:o(!1),"function"==typeof e.callee?o(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),r=0;r<t;r++)i[r]=e[r];return i}function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function s(e){return r(e)?Array.isArray(e)?e.slice():i(e):[e]}var o=n(15);e.exports=s},function(e,t,n){"use strict";function i(e){return o?void 0:s(!1),p.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",a[e]=!o.firstChild),a[e]?p[e]:null}var r=n(53),s=n(15),o=r.canUseDOM?document.createElement("div"):null,a={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},h=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];h.forEach(function(e){p[e]=d,a[e]=!0}),e.exports=i},function(e,t,n){"use strict";var i=n(30),r=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=r},function(e,t,n){"use strict";var i=n(79),r=n(40),s={dangerouslyProcessChildrenUpdates:function(e,t){var n=r.getNodeFromInstance(e);i.processUpdates(n,t)}};e.exports=s},function(e,t,n){"use strict";function i(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function r(e,t){t&&($[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?m("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&W in t.dangerouslySetInnerHTML?void 0:m("61")),null!=t.style&&"object"!=typeof t.style?m("62",i(e)):void 0)}function s(e,t,n,i){if(!(i instanceof N)){var r=e._hostContainerInfo,s=r._node&&r._node.nodeType===K,a=s?r._node:r._ownerDocument;j(t,a),i.getReactMountReady().enqueue(o,{inst:e,registrationName:t,listener:n})}}function o(){var e=this;E.putListener(e.inst,e.registrationName,e.listener)}function a(){var e=this;A.postMountWrapper(e)}function l(){var e=this;M.postMountWrapper(e)}function u(){var e=this;P.postMountWrapper(e)}function c(){var e=this;e._rootNodeID?void 0:m("63");var t=U(e);switch(t?void 0:m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[x.trapBubbledEvent(S.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&e._wrapperState.listeners.push(x.trapBubbledEvent(S.topLevelTypes[n],Y[n],t));break;case"source":e._wrapperState.listeners=[x.trapBubbledEvent(S.topLevelTypes.topError,"error",t)];break;case"img":e._wrapperState.listeners=[x.trapBubbledEvent(S.topLevelTypes.topError,"error",t),x.trapBubbledEvent(S.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[x.trapBubbledEvent(S.topLevelTypes.topReset,"reset",t),x.trapBubbledEvent(S.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[x.trapBubbledEvent(S.topLevelTypes.topInvalid,"invalid",t)]}}function d(){I.postUpdateWrapper(this)}function p(e){ee.call(Z,e)||(J.test(e)?void 0:m("65",e),Z[e]=!0)}function h(e,t){return e.indexOf("-")>=0||null!=t.is}function f(e){var t=e.type;p(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(14),g=n(11),v=n(93),b=n(95),y=n(80),w=n(81),_=n(41),C=n(103),S=n(45),E=n(47),T=n(48),x=n(105),k=n(108),R=n(42),D=n(40),A=n(110),P=n(112),I=n(113),M=n(114),O=(n(66),n(115)),N=n(129),L=(n(19),n(85)),F=(n(15),n(69),n(32)),V=(n(124),n(132),n(18),R),B=E.deleteListener,U=D.getNodeFromInstance,j=x.listenTo,H=T.registrationNameModules,G={string:!0,number:!0},q=F({style:null}),W=F({__html:null}),z={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},K=11,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},X={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Q={listing:!0,pre:!0,textarea:!0},$=g({menuitem:!0},X),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},ee={}.hasOwnProperty,te=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(e,t,n,i){this._rootNodeID=te++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var s=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":s=k.getHostProps(this,s,t);break;case"input":A.mountWrapper(this,s,t),s=A.getHostProps(this,s),e.getReactMountReady().enqueue(c,this);break;case"option":P.mountWrapper(this,s,t),s=P.getHostProps(this,s);break;case"select":I.mountWrapper(this,s,t),s=I.getHostProps(this,s),e.getReactMountReady().enqueue(c,this);break;case"textarea":M.mountWrapper(this,s,t),s=M.getHostProps(this,s),e.getReactMountReady().enqueue(c,this)}r(this,s);var o,d;null!=t?(o=t._namespaceURI,d=t._tag):n._tag&&(o=n._namespaceURI,d=n._tag),(null==o||o===w.svg&&"foreignobject"===d)&&(o=w.html),o===w.html&&("svg"===this._tag?o=w.svg:"math"===this._tag&&(o=w.mathml)),this._namespaceURI=o;var p;if(e.useCreateElement){var h,f=n._ownerDocument;if(o===w.html)if("script"===this._tag){var m=f.createElement("div"),g=this._currentElement.type;m.innerHTML="<"+g+"></"+g+">",h=m.removeChild(m.firstChild)}else h=s.is?f.createElement(this._currentElement.type,s.is):f.createElement(this._currentElement.type);else h=f.createElementNS(o,this._currentElement.type);D.precacheNode(this,h),this._flags|=V.hasCachedChildNodes,this._hostParent||C.setAttributeForRoot(h),this._updateDOMProperties(null,s,e);var b=y(h);this._createInitialChildren(e,s,i,b),p=b}else{var _=this._createOpenTagMarkupAndPutListeners(e,s),S=this._createContentMarkup(e,s,i);p=!S&&X[this._tag]?_+"/>":_+">"+S+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(a,this),s.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(l,this),s.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"select":s.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"button":s.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return p},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(null!=r)if(H.hasOwnProperty(i))r&&s(this,i,r,e);else{i===q&&(r&&(r=this._previousStyleCopy=g({},t.style)),r=b.createMarkupForStyles(r,this));var o=null;null!=this._tag&&h(this._tag,t)?z.hasOwnProperty(i)||(o=C.createMarkupForCustomAttribute(i,r)):o=C.createMarkupForProperty(i,r),o&&(n+=" "+o)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+C.createMarkupForRoot()),n+=" "+C.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var i="",r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var s=G[typeof t.children]?t.children:null,o=null!=s?null:t.children;if(null!=s)i=L(s);else if(null!=o){var a=this.mountChildren(o,e,n);i=a.join("")}}return Q[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(e,t,n,i){var r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&y.queueHTML(i,r.__html);else{var s=G[typeof t.children]?t.children:null,o=null!=s?null:t.children;if(null!=s)y.queueText(i,s);else if(null!=o)for(var a=this.mountChildren(o,e,n),l=0;l<a.length;l++)y.queueChild(i,a[l])}},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,i){var s=t.props,o=this._currentElement.props;switch(this._tag){case"button":s=k.getHostProps(this,s),o=k.getHostProps(this,o);break;case"input":s=A.getHostProps(this,s),o=A.getHostProps(this,o);break;case"option":s=P.getHostProps(this,s),o=P.getHostProps(this,o);break;case"select":s=I.getHostProps(this,s),o=I.getHostProps(this,o);break;case"textarea":s=M.getHostProps(this,s),o=M.getHostProps(this,o)}switch(r(this,o),this._updateDOMProperties(s,o,e),this._updateDOMChildren(s,o,e,i),this._tag){case"input":A.updateWrapper(this);break;case"textarea":M.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(d,this)}},_updateDOMProperties:function(e,t,n){var i,r,o;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&null!=e[i])if(i===q){var a=this._previousStyleCopy;for(r in a)a.hasOwnProperty(r)&&(o=o||{},o[r]="");this._previousStyleCopy=null}else H.hasOwnProperty(i)?e[i]&&B(this,i):h(this._tag,e)?z.hasOwnProperty(i)||C.deleteValueForAttribute(U(this),i):(_.properties[i]||_.isCustomAttribute(i))&&C.deleteValueForProperty(U(this),i);for(i in t){var l=t[i],u=i===q?this._previousStyleCopy:null!=e?e[i]:void 0;if(t.hasOwnProperty(i)&&l!==u&&(null!=l||null!=u))if(i===q)if(l?l=this._previousStyleCopy=g({},l):this._previousStyleCopy=null,u){for(r in u)!u.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(o=o||{},o[r]="");for(r in l)l.hasOwnProperty(r)&&u[r]!==l[r]&&(o=o||{},o[r]=l[r])}else o=l;else if(H.hasOwnProperty(i))l?s(this,i,l,n):u&&B(this,i);else if(h(this._tag,t))z.hasOwnProperty(i)||C.setValueForAttribute(U(this),i,l);else if(_.properties[i]||_.isCustomAttribute(i)){var c=U(this);null!=l?C.setValueForProperty(c,i,l):C.deleteValueForProperty(c,i)}}o&&b.setValueForStyles(U(this),o,this)},_updateDOMChildren:function(e,t,n,i){var r=G[typeof e.children]?e.children:null,s=G[typeof t.children]?t.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=r?null:e.children,u=null!=s?null:t.children,c=null!=r||null!=o,d=null!=s||null!=a;null!=l&&null==u?this.updateChildren(null,n,i):c&&!d&&this.updateTextContent(""),null!=s?r!==s&&this.updateTextContent(""+s):null!=a?o!==a&&this.updateMarkup(""+a):null!=u&&this.updateChildren(u,n,i)},getHostNode:function(){return U(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),D.uncacheNode(this),E.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return U(this)}},g(f.prototype,f.Mixin,O.Mixin),e.exports=f},function(e,t,n){"use strict";var i=n(40),r=n(94),s={focusDOMComponent:function(){r(i.getNodeFromInstance(this))}};e.exports=s},function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}e.exports=n},function(e,t,n){"use strict";var i=n(96),r=n(53),s=(n(66),n(97),n(99)),o=n(100),a=n(102),l=(n(18),a(function(e){return o(e)})),u=!1,c="cssFloat";if(r.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(p){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var h={createMarkupForStyles:function(e,t){var n="";for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];null!=r&&(n+=l(i)+":",n+=s(i,r,t)+";")}return n||null},setValueForStyles:function(e,t,n){var r=e.style;for(var o in t)if(t.hasOwnProperty(o)){var a=s(o,t[o],n);if("float"!==o&&"cssFloat"!==o||(o=c),a)r[o]=a;else{var l=u&&i.shorthandPropertyExpansions[o];if(l)for(var d in l)r[d]="";else r[o]=""}}}};e.exports=h},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){r.forEach(function(t){i[n(t,e)]=i[e]})});var s={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},o={isUnitlessNumber:i,shorthandPropertyExpansions:s};e.exports=o},function(e,t,n){"use strict";function i(e){return r(e.replace(s,"ms-"))}var r=n(98),s=/^-ms-/;e.exports=i},function(e,t){"use strict";function n(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function i(e,t,n){var i=null==t||"boolean"==typeof t||""===t;if(i)return"";var r=isNaN(t);if(r||0===t||s.hasOwnProperty(e)&&s[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var r=n(96),s=(n(18),r.isUnitlessNumber);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e).replace(s,"-ms-")}var r=n(101),s=/^ms-/;e.exports=i},function(e,t){"use strict";function n(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function i(e){return!!u.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(a.test(e)?(u[e]=!0,!0):(l[e]=!0,!1))}function r(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var s=n(41),o=(n(40),n(66),n(104)),a=(n(18),new RegExp("^["+s.ATTRIBUTE_NAME_START_CHAR+"]["+s.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(e){return s.ID_ATTRIBUTE_NAME+"="+o(e)},setAttributeForID:function(e,t){e.setAttribute(s.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return s.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(s.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=s.properties.hasOwnProperty(e)?s.properties[e]:null;if(n){if(r(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?i+'=""':i+"="+o(t)}return s.isCustomAttribute(e)?null==t?"":e+"="+o(t):null},createMarkupForCustomAttribute:function(e,t){return i(e)&&null!=t?e+"="+o(t):""},setValueForProperty:function(e,t,n){var i=s.properties.hasOwnProperty(t)?s.properties[t]:null;if(i){var o=i.mutationMethod;if(o)o(e,n);else{if(r(i,n))return void this.deleteValueForProperty(e,t);if(i.mustUseProperty)e[i.propertyName]=n;else{var a=i.attributeName,l=i.attributeNamespace;l?e.setAttributeNS(l,a,""+n):i.hasBooleanValue||i.hasOverloadedBooleanValue&&n===!0?e.setAttribute(a,""):e.setAttribute(a,""+n)}}}else if(s.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(i(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=s.properties.hasOwnProperty(t)?s.properties[t]:null;if(n){var i=n.mutationMethod;if(i)i(e,void 0);else if(n.mustUseProperty){var r=n.propertyName;n.hasBooleanValue?e[r]=!1:e[r]=""}else e.removeAttribute(n.attributeName)}else s.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=c},function(e,t,n){"use strict";function i(e){return'"'+r(e)+'"'}var r=n(85);e.exports=i},function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,g)||(e[g]=f++,p[e[g]]={}),p[e[g]]}var r,s=n(11),o=n(45),a=n(48),l=n(106),u=n(75),c=n(107),d=n(69),p={},h=!1,f=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},g="_reactListenersID"+String(Math.random()).slice(2),v=s({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=i(n),s=a.registrationNameDependencies[e],l=o.topLevelTypes,u=0;u<s.length;u++){var c=s[u];r.hasOwnProperty(c)&&r[c]||(c===l.topWheel?d("wheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):d("mousewheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?d("scroll",!0)?v.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(d("focus",!0)?(v.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):d("focusin")&&(v.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),r[l.topBlur]=!0,r[l.topFocus]=!0):m.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,m[c],n),r[c]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!r&&!h){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),h=!0}}});e.exports=v},function(e,t,n){"use strict";function i(e){r.enqueueEvents(e),r.processEventQueue(!1)}var r=n(47),s={handleTopLevel:function(e,t,n,s){var o=r.extractEvents(e,t,n,s);i(o)}};e.exports=s},function(e,t,n){"use strict";function i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function r(e){if(a[e])return a[e];if(!o[e])return e;var t=o[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return a[e]=t[n];return""}var s=n(53),o={animationend:i("Animation","AnimationEnd"),animationiteration:i("Animation","AnimationIteration"),
animationstart:i("Animation","AnimationStart"),transitionend:i("Transition","TransitionEnd")},a={},l={};s.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete o.animationend.animation,delete o.animationiteration.animation,delete o.animationstart.animation),"TransitionEvent"in window||delete o.transitionend.transition),e.exports=r},function(e,t,n){"use strict";var i=n(109),r={getHostProps:i.getHostProps};e.exports=r},function(e,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},i={getHostProps:function(e,t){if(!t.disabled)return t;var i={};for(var r in t)!n[r]&&t.hasOwnProperty(r)&&(i[r]=t[r]);return i}};e.exports=i},function(e,t,n){"use strict";function i(){this._rootNodeID&&p.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);d.asap(i,this);var r=t.name;if("radio"===t.type&&null!=r){for(var o=c.getNodeFromInstance(this),a=o;a.parentNode;)a=a.parentNode;for(var l=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),p=0;p<l.length;p++){var h=l[p];if(h!==o&&h.form===o.form){var f=c.getInstanceFromNode(h);f?void 0:s("90"),d.asap(i,f)}}}return n}var s=n(14),o=n(11),a=n(109),l=n(103),u=n(111),c=n(40),d=n(60),p=(n(15),n(18),{getHostProps:function(e,t){var n=u.getValue(t),i=u.getChecked(t),r=o({type:void 0,step:void 0,min:void 0,max:void 0},a.getHostProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=i?i:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return r},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var i=c.getNodeFromInstance(e),r=u.getValue(t);if(null!=r){var s=""+r;s!==i.value&&(i.value=s)}else null==t.value&&null!=t.defaultValue&&(i.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(i.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var i=n.name;""!==i&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==i&&(n.name=i)}});e.exports=p},function(e,t,n){"use strict";function i(e){null!=e.checkedLink&&null!=e.valueLink?a("87"):void 0}function r(e){i(e),null!=e.value||null!=e.onChange?a("88"):void 0}function s(e){i(e),null!=e.checked||null!=e.onChange?a("89"):void 0}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var a=n(14),l=n(34),u=n(29),c=n(35),d=(n(15),n(18),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func},h={},f={checkPropTypes:function(e,t,n){for(var i in p){if(p.hasOwnProperty(i))var r=p[i](t,i,e,u.prop,null,c);if(r instanceof Error&&!(r.message in h)){h[r.message]=!0;o(n)}}},getValue:function(e){return e.valueLink?(r(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(s(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(r(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(s(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=f},function(e,t,n){"use strict";function i(e){var t="";return s.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:l||(l=!0))}),t}var r=n(11),s=n(12),o=n(40),a=n(113),l=(n(18),!1),u={mountWrapper:function(e,t,n){var r=null;if(null!=n){var s=n;"optgroup"===s._tag&&(s=s._hostParent),null!=s&&"select"===s._tag&&(r=a.getSelectValueContext(s))}var o=null;if(null!=r){var l;if(l=null!=t.value?t.value+"":i(t.children),o=!1,Array.isArray(r)){for(var u=0;u<r.length;u++)if(""+r[u]===l){o=!0;break}}else o=""+r===l}e._wrapperState={selected:o}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=o.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=r({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var s=i(t.children);return s&&(n.children=s),n}};e.exports=u},function(e,t,n){"use strict";function i(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=l.getValue(e);null!=t&&r(this,Boolean(e.multiple),t)}}function r(e,t,n){var i,r,s=u.getNodeFromInstance(e).options;if(t){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<s.length;r++){var o=i.hasOwnProperty(s[r].value);s[r].selected!==o&&(s[r].selected=o)}}else{for(i=""+n,r=0;r<s.length;r++)if(s[r].value===i)return void(s[r].selected=!0);s.length&&(s[0].selected=!0)}}function s(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(i,this),n}var o=n(11),a=n(109),l=n(111),u=n(40),c=n(60),d=(n(18),!1),p={getHostProps:function(e,t){return o({},a.getHostProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=l.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:s.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||d||(d=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=l.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,r(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?r(e,Boolean(t.multiple),t.defaultValue):r(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=p},function(e,t,n){"use strict";function i(){this._rootNodeID&&d.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return c.asap(i,this),n}var s=n(14),o=n(11),a=n(109),l=n(111),u=n(40),c=n(60),d=(n(15),n(18),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?s("91"):void 0;var n=o({},a.getHostProps(e,t),{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=l.getValue(t),i=n;if(null==n){var o=t.defaultValue,a=t.children;null!=a&&(null!=o?s("92"):void 0,Array.isArray(a)&&(a.length<=1?void 0:s("93"),a=a[0]),o=""+a),null==o&&(o=""),i=o}e._wrapperState={initialValue:""+i,listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),i=l.getValue(t);if(null!=i){var r=""+i;r!==n.value&&(n.value=r),null==t.defaultValue&&(n.defaultValue=r)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e);t.value=t.textContent}});e.exports=d},function(e,t,n){"use strict";function i(e,t,n){return{type:p.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function r(e,t,n){return{type:p.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:h.getHostNode(e),toIndex:n,afterNode:t}}function s(e,t){return{type:p.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function o(e){return{type:p.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function a(e){return{type:p.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){d.processChildrenUpdates(e,t)}var c=n(14),d=n(116),p=(n(117),n(66),n(90)),h=(n(17),n(63)),f=n(118),m=(n(19),n(128)),g=(n(15),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,i,r,s){var o,a=0;return o=m(t,a),f.updateChildren(e,o,n,i,r,this,this._hostContainerInfo,s,a),o},mountChildren:function(e,t,n){var i=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=i;var r=[],s=0;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o],l=0,u=h.mountComponent(a,t,this,this._hostContainerInfo,n,l);a._mountIndex=s++,r.push(u)}return r},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var i=[a(e)];u(this,i)},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var i=[o(e)];u(this,i)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var i=this._renderedChildren,r={},s=[],o=this._reconcilerUpdateChildren(i,e,s,r,t,n);if(o||i){var a,c=null,d=0,p=0,f=0,m=null;for(a in o)if(o.hasOwnProperty(a)){var g=i&&i[a],v=o[a];g===v?(c=l(c,this.moveChild(g,m,d,p)),p=Math.max(g._mountIndex,p),g._mountIndex=d):(g&&(p=Math.max(g._mountIndex,p)),c=l(c,this._mountChildAtIndex(v,s[f],m,d,t,n)),f++),d++,m=h.getHostNode(v)}for(a in r)r.hasOwnProperty(a)&&(c=l(c,this._unmountChild(i[a],r[a])));c&&u(this,c),this._renderedChildren=o}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,i){if(e._mountIndex<i)return r(e,t,n)},createChild:function(e,t,n){return i(n,t,e._mountIndex)},removeChild:function(e,t){return s(e,t)},_mountChildAtIndex:function(e,t,n,i,r,s){return e._mountIndex=i,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=g},function(e,t,n){"use strict";var i=n(14),r=(n(15),!1),s={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r?i("104"):void 0,s.replaceNodeWithMarkup=e.replaceNodeWithMarkup,s.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};e.exports=s},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){(function(t){"use strict";function i(e,t,n,i){var r=void 0===e[n];null!=t&&r&&(e[n]=s(t,!0))}var r=n(63),s=n(119),o=(n(23),n(125)),a=n(21),l=(n(18),{instantiateChildren:function(e,t,n,r){if(null==e)return null;var s={};return a(e,i,s),s},updateChildren:function(e,t,n,i,a,l,u,c,d){if(t||e){var p,h;for(p in t)if(t.hasOwnProperty(p)){h=e&&e[p];var f=h&&h._currentElement,m=t[p];if(null!=h&&o(f,m))r.receiveComponent(h,m,a,c),t[p]=h;else{h&&(i[p]=r.getHostNode(h),r.unmountComponent(h,!1));var g=s(m,!0);t[p]=g;var v=r.mountComponent(g,a,l,u,c,d);n.push(v)}}for(p in e)!e.hasOwnProperty(p)||t&&t.hasOwnProperty(p)||(h=e[p],i[p]=r.getHostNode(h),r.unmountComponent(h,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r.unmountComponent(i,t)}}});e.exports=l}).call(t,n(4))},function(e,t,n){"use strict";function i(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function s(e,t){var n;if(null===e||e===!1)n=u.create(s);else if("object"==typeof e){var a=e;!a||"function"!=typeof a.type&&"string"!=typeof a.type?o("130",null==a.type?a.type:typeof a.type,i(a._owner)):void 0,"string"==typeof a.type?n=c.createInternalComponent(a):r(a.type)?(n=new a.type(a),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new d(a)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):o("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var o=n(14),a=n(11),l=n(120),u=n(126),c=n(127),d=(n(15),n(18),function(e){this.construct(e)});a(d.prototype,l.Mixin,{_instantiateReactComponent:s});e.exports=s},function(e,t,n){"use strict";function i(e){}function r(e,t){}function s(e){return!(!e.prototype||!e.prototype.isReactComponent)}function o(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var a=n(14),l=n(11),u=n(116),c=n(17),d=n(16),p=n(50),h=n(117),f=(n(66),n(121)),m=(n(29),n(63)),g=n(122),v=n(26),b=(n(15),n(124)),y=n(125),w=(n(18),{ImpureClass:0,PureClass:1,StatelessFunctional:2});i.prototype.render=function(){var e=h.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return r(e,t),t};var _=1,C={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,l){this._context=l,this._mountOrder=_++,this._hostParent=t,this._hostContainerInfo=n;var u,c=this._currentElement.props,p=this._processContext(l),f=this._currentElement.type,m=e.getUpdateQueue(),g=s(f),b=this._constructComponent(g,c,p,m);g||null!=b&&null!=b.render?o(f)?this._compositeType=w.PureClass:this._compositeType=w.ImpureClass:(u=b,r(f,u),null===b||b===!1||d.isValidElement(b)?void 0:a("105",f.displayName||f.name||"Component"),b=new i(f),this._compositeType=w.StatelessFunctional);b.props=c,b.context=p,b.refs=v,b.updater=m,this._instance=b,h.set(b,this);var y=b.state;void 0===y&&(b.state=y=null),"object"!=typeof y||Array.isArray(y)?a("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var C;return C=b.unstable_handleError?this.performInitialMountWithErrorHandling(u,t,n,e,l):this.performInitialMount(u,t,n,e,l),b.componentDidMount&&e.getReactMountReady().enqueue(b.componentDidMount,b),C},_constructComponent:function(e,t,n,i){return this._constructComponentWithoutOwner(e,t,n,i)},_constructComponentWithoutOwner:function(e,t,n,i){var r,s=this._currentElement.type;return r=e?new s(t,n,i):s(t,n,i)},performInitialMountWithErrorHandling:function(e,t,n,i,r){var s,o=i.checkpoint();try{s=this.performInitialMount(e,t,n,i,r)}catch(a){i.rollback(o),this._instance.unstable_handleError(a),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),o=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(o),s=this.performInitialMount(e,t,n,i,r)}return s},performInitialMount:function(e,t,n,i,r){var s=this._instance;s.componentWillMount&&(s.componentWillMount(),this._pendingStateQueue&&(s.state=this._processPendingState(s.props,s.context))),void 0===e&&(e=this._renderValidatedComponent());var o=f.getType(e);this._renderedNodeType=o;var a=this._instantiateReactComponent(e,o!==f.EMPTY);this._renderedComponent=a;var l=0,u=m.mountComponent(a,i,t,n,this._processChildContext(r),l);return u},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,h.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return v;var i={};for(var r in n)i[r]=e[r];return i},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,i=n.getChildContext&&n.getChildContext();if(i){"object"!=typeof t.childContextTypes?a("107",this.getName()||"ReactCompositeComponent"):void 0;for(var r in i)r in t.childContextTypes?void 0:a("108",this.getName()||"ReactCompositeComponent",r);return l({},e,i)}return e},_checkContextTypes:function(e,t,n){g(e,t,n,this.getName(),null,this._debugID)},receiveComponent:function(e,t,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(t,i,e,r,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,i,r){var s=this._instance;null==s?a("136",this.getName()||"ReactCompositeComponent"):void 0;var o,l=!1;this._context===r?o=s.context:(o=this._processContext(r),l=!0);var u=t.props,c=n.props;t!==n&&(l=!0),l&&s.componentWillReceiveProps&&s.componentWillReceiveProps(c,o);var d=this._processPendingState(c,o),p=!0;this._pendingForceUpdate||(s.shouldComponentUpdate?p=s.shouldComponentUpdate(c,d,o):this._compositeType===w.PureClass&&(p=!b(u,c)||!b(s.state,d))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,d,o,e,r)):(this._currentElement=n,this._context=r,s.props=c,s.state=d,s.context=o)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(r&&1===i.length)return i[0];for(var s=l({},r?i[0]:n.state),o=r?1:0;o<i.length;o++){var a=i[o];l(s,"function"==typeof a?a.call(n,s,e,t):a)}return s},_performComponentUpdate:function(e,t,n,i,r,s){var o,a,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(o=u.props,a=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,n,i),this._currentElement=e,this._context=s,u.props=t,u.state=n,u.context=i,this._updateRenderedComponent(r,s),c&&r.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,o,a,l),u)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent();if(y(i,r))m.receiveComponent(n,r,e,this._processChildContext(t));else{var s=m.getHostNode(n);m.unmountComponent(n,!1);var o=f.getType(r);this._renderedNodeType=o;var a=this._instantiateReactComponent(r,o!==f.EMPTY);this._renderedComponent=a;var l=0,u=m.mountComponent(a,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),l);this._replaceNodeWithMarkup(s,u,n)}},_replaceNodeWithMarkup:function(e,t,n){u.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;if(this._compositeType!==w.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||d.isValidElement(e)?void 0:a("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?a("110"):void 0;var i=t.getPublicInstance(),r=n.refs===v?n.refs={}:n.refs;r[e]=i},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===w.StatelessFunctional?null:e},_instantiateReactComponent:null},S={Mixin:C};e.exports=S},function(e,t,n){"use strict";var i=n(14),r=n(16),s=(n(15),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?s.EMPTY:r.isValidElement(e)?"function"==typeof e.type?s.COMPOSITE:s.HOST:void i("26",e)}});e.exports=s},function(e,t,n){(function(t){"use strict";function i(e,t,n,i,l,u){for(var c in e)if(e.hasOwnProperty(c)){var d;try{"function"!=typeof e[c]?r("84",i||"React class",s[n],c):void 0,d=e[c](t,c,i,n,null,o)}catch(p){d=p}if(d instanceof Error&&!(d.message in a)){a[d.message]=!0}}}var r=n(14),s=n(31),o=n(35),a=(n(15),n(18),{});e.exports=i}).call(t,n(4))},function(e,t,n){"use strict";function i(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,i=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var r=t.call(e);return i.test(r)}catch(s){return!1}}function r(e){return"."+e}function s(e){return parseInt(e.substr(1),10)}function o(e){if(S)return v.get(e);var t=r(e);return y[t]}function a(e){if(S)v["delete"](e);else{var t=r(e);delete y[t]}}function l(e,t,n){var i={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(S)v.set(e,i);else{var s=r(e);y[s]=i}}function u(e){if(S)b.add(e);else{var t=r(e);w[t]=!0}}function c(e){if(S)b["delete"](e);else{var t=r(e);delete w[t]}}function d(){return S?Array.from(v.keys()):Object.keys(y).map(s)}function p(){return S?Array.from(b.keys()):Object.keys(w).map(s)}function h(e){var t=o(e);if(t){var n=t.childIDs;a(e),n.forEach(h)}}function f(e,t,n){return"\n    in "+e+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function m(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function g(e){var t,n=T.getDisplayName(e),i=T.getElement(e),r=T.getOwnerID(e);return r&&(t=T.getDisplayName(r)),f(n,i&&i._source,t)}var v,b,y,w,_=n(14),C=n(17),S=(n(15),n(18),"function"==typeof Array.from&&"function"==typeof Map&&i(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&i(Map.prototype.keys)&&"function"==typeof Set&&i(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&i(Set.prototype.keys));S?(v=new Map,b=new Set):(y={},w={});var E=[],T={onSetChildren:function(e,t){var n=o(e);n.childIDs=t;for(var i=0;i<t.length;i++){var r=t[i],s=o(r);s?void 0:_("140"),null==s.childIDs&&"object"==typeof s.element&&null!=s.element?_("141"):void 0,s.isMounted?void 0:_("71"),null==s.parentID&&(s.parentID=e),s.parentID!==e?_("142",r,s.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){l(e,t,n)},onBeforeUpdateComponent:function(e,t){var n=o(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=o(e);t.isMounted=!0;var n=0===t.parentID;n&&u(e)},onUpdateComponent:function(e){var t=o(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=o(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&c(e)}E.push(e)},purgeUnmountedComponents:function(){if(!T._preventPurging){for(var e=0;e<E.length;e++){var t=E[e];h(t)}E.length=0}},isMounted:function(e){var t=o(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=e.type,i="function"==typeof n?n.displayName||n.name:n,r=e._owner;t+=f(i||"Unknown",e._source,r&&r.getName())}var s=C.current,o=s&&s._debugID;return t+=T.getStackAddendumByID(o)},getStackAddendumByID:function(e){for(var t="";e;)t+=g(e),e=T.getParentID(e);return t},getChildIDs:function(e){var t=o(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=T.getElement(e);return t?m(t):null},getElement:function(e){var t=o(e);return t?t.element:null},getOwnerID:function(e){var t=T.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=o(e);return t?t.parentID:null},getSource:function(e){var t=o(e),n=t?t.element:null,i=null!=n?n._source:null;return i},getText:function(e){var t=T.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=o(e);return t?t.updateCount:0},getRegisteredIDs:d,getRootIDs:p};e.exports=T},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var o=0;o<i.length;o++)if(!r.call(t,i[o])||!n(e[i[o]],t[i[o]]))return!1;return!0}var r=Object.prototype.hasOwnProperty;e.exports=i},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,i=null===t||t===!1;if(n||i)return n===i;var r=typeof e,s=typeof t;return"string"===r||"number"===r?"string"===s||"number"===s:"object"===s&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t){"use strict";var n,i={injectEmptyComponentFactory:function(e){n=e}},r={create:function(e){return n(e)}};r.injection=i,e.exports=r},function(e,t,n){"use strict";function i(e){return l?void 0:o("111",e.type),new l(e)}function r(e){return new c(e)}function s(e){return e instanceof c}var o=n(14),a=n(11),l=(n(15),null),u={},c=null,d={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){c=e},injectComponentClasses:function(e){a(u,e)}},p={createInternalComponent:i,createInstanceForText:r,isTextComponent:s,injection:d};e.exports=p},function(e,t,n){(function(t){"use strict";function i(e,t,n,i){if(e&&"object"==typeof e){var r=e,s=void 0===r[n];s&&null!=t&&(r[n]=t)}}function r(e,t){if(null==e)return e;var n={};return s(e,i,n),n}var s=(n(23),n(21));n(18);e.exports=r}).call(t,n(4))},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new a(this)}var r=n(11),s=n(13),o=n(67),a=(n(66),n(130)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(i.prototype,o.Mixin,c),s.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){}var s=n(131),o=(n(67),n(18),function(){function e(t){i(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&s.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?s.enqueueForceUpdate(e):r(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?s.enqueueReplaceState(e,t):r(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?s.enqueueSetState(e,t):r(e,"setState")},e}());e.exports=o},function(e,t,n){"use strict";function i(e){l.enqueueUpdate(e)}function r(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,i=Object.keys(e);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}function s(e,t){var n=a.get(e);if(!n){return null}return n}var o=n(14),a=(n(17),n(117)),l=(n(66),n(60)),u=(n(15),n(18),{isMounted:function(e){var t=a.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){u.validateCallback(t,n);var r=s(e);return r?(r._pendingCallbacks?r._pendingCallbacks.push(t):r._pendingCallbacks=[t],void i(r)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=s(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t){var n=s(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,i(n))},enqueueSetState:function(e,t){var n=s(e,"setState");if(n){var r=n._pendingStateQueue||(n._pendingStateQueue=[]);r.push(t),i(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,i(e)},validateCallback:function(e,t){e&&"function"!=typeof e?o("122",t,r(e)):void 0}});e.exports=u},function(e,t,n){"use strict";var i=(n(11),n(19)),r=(n(18),i);e.exports=r},function(e,t,n){"use strict";var i=n(11),r=n(80),s=n(40),o=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};i(o.prototype,{mountComponent:function(e,t,n,i){var o=n._idCounter++;this._domID=o,this._hostParent=t,this._hostContainerInfo=n;var a=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(a);return s.precacheNode(this,u),r(u)}return e.renderToStaticMarkup?"":"<!--"+a+"-->"},receiveComponent:function(){},getHostNode:function(){return s.getNodeFromInstance(this)},unmountComponent:function(){s.uncacheNode(this)}}),e.exports=o},function(e,t,n){"use strict";function i(e,t){"_hostNode"in e?void 0:l("33"),"_hostNode"in t?void 0:l("33");for(var n=0,i=e;i;i=i._hostParent)n++;for(var r=0,s=t;s;s=s._hostParent)r++;for(;n-r>0;)e=e._hostParent,n--;for(;r-n>0;)t=t._hostParent,r--;for(var o=n;o--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function r(e,t){"_hostNode"in e?void 0:l("35"),"_hostNode"in t?void 0:l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function s(e){return"_hostNode"in e?void 0:l("36"),e._hostParent}function o(e,t,n){for(var i=[];e;)i.push(e),e=e._hostParent;var r;for(r=i.length;r-- >0;)t(i[r],!1,n);for(r=0;r<i.length;r++)t(i[r],!0,n)}function a(e,t,n,r,s){for(var o=e&&t?i(e,t):null,a=[];e&&e!==o;)a.push(e),e=e._hostParent;for(var l=[];t&&t!==o;)l.push(t),t=t._hostParent;var u;for(u=0;u<a.length;u++)n(a[u],!0,r);for(u=l.length;u-- >0;)n(l[u],!1,s)}var l=n(14);n(15);e.exports={isAncestor:r,getLowestCommonAncestor:i,getParentInstance:s,traverseTwoPhase:o,traverseEnterLeave:a}},function(e,t,n){"use strict";var i=n(14),r=n(11),s=n(79),o=n(80),a=n(40),l=n(85),u=(n(15),n(132),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});r(u.prototype,{mountComponent:function(e,t,n,i){var r=n._idCounter++,s=" react-text: "+r+" ",u=" /react-text ";if(this._domID=r,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,d=c.createComment(s),p=c.createComment(u),h=o(c.createDocumentFragment());return o.queueChild(h,o(d)),this._stringText&&o.queueChild(h,o(c.createTextNode(this._stringText))),o.queueChild(h,o(p)),a.precacheNode(this,d),this._closingComment=p,h}var f=l(this._stringText);return e.renderToStaticMarkup?f:"<!--"+s+"-->"+f+"<!--"+u+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=this.getHostNode();s.replaceDelimitedText(i[0],i[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=a.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?i("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,
this._commentNodes=null,a.uncacheNode(this)}}),e.exports=u},function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var r=n(11),s=n(60),o=n(67),a=n(19),l={initialize:a,close:function(){p.isBatchingUpdates=!1}},u={initialize:a,close:s.flushBatchedUpdates.bind(s)},c=[u,l];r(i.prototype,o.Mixin,{getTransactionWrappers:function(){return c}});var d=new i,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,r,s){var o=p.isBatchingUpdates;p.isBatchingUpdates=!0,o?e(t,n,i,r,s):d.perform(e,null,t,n,i,r,s)}};e.exports=p},function(e,t,n){"use strict";function i(e){for(;e._hostParent;)e=e._hostParent;var t=d.getNodeFromInstance(e),n=t.parentNode;return d.getClosestInstanceFromNode(n)}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function s(e){var t=h(e.nativeEvent),n=d.getClosestInstanceFromNode(t),r=n;do e.ancestors.push(r),r=r&&i(r);while(r);for(var s=0;s<e.ancestors.length;s++)n=e.ancestors[s],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,h(e.nativeEvent))}function o(e){var t=f(window);e(t)}var a=n(11),l=n(138),u=n(53),c=n(13),d=n(40),p=n(60),h=n(68),f=n(139);a(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var i=n;return i?l.listen(i,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var i=n;return i?l.capture(i,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=r.getPooled(e,t);try{p.batchedUpdates(s,n)}finally{r.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var i=n(19),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:i}},registerDefault:function(){}};e.exports=r},function(e,t){"use strict";function n(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t,n){"use strict";var i=n(41),r=n(47),s=n(49),o=n(116),a=n(28),l=n(126),u=n(105),c=n(127),d=n(60),p={Component:o.injection,Class:a.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,EventPluginUtils:s.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:d.injection};e.exports=p},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=s.getPooled(null),this.useCreateElement=e}var r=n(11),s=n(61),o=n(13),a=n(105),l=n(142),u=(n(66),n(67)),c=n(131),d={initialize:l.getSelectionInformation,close:l.restoreSelection},p={initialize:function(){var e=a.isEnabled();return a.setEnabled(!1),e},close:function(e){a.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[d,p,h],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null}};r(i.prototype,u.Mixin,m),o.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e){return s(document.documentElement,e)}var r=n(143),s=n(145),o=n(94),a=n(148),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=a(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if(void 0===i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};e.exports=l},function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var s=r.text.length,o=s+i;return{start:s,end:o}}function s(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,s=t.focusNode,o=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(l){return null}var u=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:a.toString().length,d=a.cloneRange();d.selectNodeContents(e),d.setEnd(a.startContainer,a.startOffset);var p=i(d.startContainer,d.startOffset,d.endContainer,d.endOffset),h=p?0:d.toString().length,f=h+c,m=document.createRange();m.setStart(n,r),m.setEnd(s,o);var g=m.collapsed;return{start:g?f:h,end:g?h:f}}function o(e,t){var n,i,r=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,r=Math.min(t.start,i),s=void 0===t.end?r:Math.min(t.end,i);if(!n.extend&&r>s){var o=s;s=r,r=o}var a=u(e,r),l=u(e,s);if(a&&l){var d=document.createRange();d.setStart(a.node,a.offset),n.removeAllRanges(),r>s?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=n(53),u=n(144),c=n(55),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:d?r:s,setOffsets:d?o:a};e.exports=p},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function r(e,t){for(var r=n(e),s=0,o=0;r;){if(3===r.nodeType){if(o=s+r.textContent.length,s<=t&&o>=t)return{node:r,offset:t-s};s=o}r=n(i(r))}}e.exports=r},function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=n(146);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e)&&3==e.nodeType}var r=n(147);e.exports=i},function(e,t){"use strict";function n(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t){"use strict";function n(e){if(e=e||("undefined"!=typeof document?document:void 0),"undefined"==typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=n},function(e,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},r={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(i).forEach(function(e){r.Properties[e]=0,i[e]&&(r.DOMAttributeNames[e]=i[e])}),e.exports=r},function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e,t){if(_||null==b||b!==d())return null;var n=i(b);if(!w||!f(w,n)){w=n;var r=c.getPooled(v.select,y,e,t);return r.type="select",r.target=b,o.accumulateTwoPhaseDispatches(r),r}return null}var s=n(45),o=n(46),a=n(53),l=n(40),u=n(142),c=n(57),d=n(148),p=n(70),h=n(32),f=n(124),m=s.topLevelTypes,g=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,v={select:{phasedRegistrationNames:{bubbled:h({onSelect:null}),captured:h({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},b=null,y=null,w=null,_=!1,C=!1,S=h({onSelect:null}),E={eventTypes:v,extractEvents:function(e,t,n,i){if(!C)return null;var s=t?l.getNodeFromInstance(t):window;switch(e){case m.topFocus:(p(s)||"true"===s.contentEditable)&&(b=s,y=t,w=null);break;case m.topBlur:b=null,y=null,w=null;break;case m.topMouseDown:_=!0;break;case m.topContextMenu:case m.topMouseUp:return _=!1,r(n,i);case m.topSelectionChange:if(g)break;case m.topKeyDown:case m.topKeyUp:return r(n,i)}return null},didPutListener:function(e,t,n){t===S&&(C=!0)}};e.exports=E},function(e,t,n){"use strict";function i(e){return"."+e._rootNodeID}var r=n(14),s=n(45),o=n(138),a=n(46),l=n(40),u=n(152),c=n(153),d=n(57),p=n(154),h=n(155),f=n(73),m=n(158),g=n(159),v=n(160),b=n(74),y=n(161),w=n(19),_=n(156),C=(n(15),n(32)),S=s.topLevelTypes,E={abort:{phasedRegistrationNames:{bubbled:C({onAbort:!0}),captured:C({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:C({onAnimationEnd:!0}),captured:C({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:C({onAnimationIteration:!0}),captured:C({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:C({onAnimationStart:!0}),captured:C({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:C({onBlur:!0}),captured:C({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:C({onCanPlay:!0}),captured:C({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:C({onCanPlayThrough:!0}),captured:C({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:C({onClick:!0}),captured:C({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:C({onContextMenu:!0}),captured:C({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:C({onCopy:!0}),captured:C({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:C({onCut:!0}),captured:C({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:C({onDoubleClick:!0}),captured:C({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:C({onDrag:!0}),captured:C({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:C({onDragEnd:!0}),captured:C({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:C({onDragEnter:!0}),captured:C({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:C({onDragExit:!0}),captured:C({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:C({onDragLeave:!0}),captured:C({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:C({onDragOver:!0}),captured:C({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:C({onDragStart:!0}),captured:C({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:C({onDrop:!0}),captured:C({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:C({onDurationChange:!0}),captured:C({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:C({onEmptied:!0}),captured:C({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:C({onEncrypted:!0}),captured:C({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:C({onEnded:!0}),captured:C({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:C({onError:!0}),captured:C({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:C({onFocus:!0}),captured:C({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:C({onInput:!0}),captured:C({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:C({onInvalid:!0}),captured:C({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:C({onKeyDown:!0}),captured:C({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:C({onKeyPress:!0}),captured:C({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:C({onKeyUp:!0}),captured:C({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:C({onLoad:!0}),captured:C({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:C({onLoadedData:!0}),captured:C({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:C({onLoadedMetadata:!0}),captured:C({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:C({onLoadStart:!0}),captured:C({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:C({onMouseDown:!0}),captured:C({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:C({onMouseMove:!0}),captured:C({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:C({onMouseOut:!0}),captured:C({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:C({onMouseOver:!0}),captured:C({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:C({onMouseUp:!0}),captured:C({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:C({onPaste:!0}),captured:C({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:C({onPause:!0}),captured:C({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:C({onPlay:!0}),captured:C({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:C({onPlaying:!0}),captured:C({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:C({onProgress:!0}),captured:C({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:C({onRateChange:!0}),captured:C({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:C({onReset:!0}),captured:C({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:C({onScroll:!0}),captured:C({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:C({onSeeked:!0}),captured:C({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:C({onSeeking:!0}),captured:C({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:C({onStalled:!0}),captured:C({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:C({onSubmit:!0}),captured:C({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:C({onSuspend:!0}),captured:C({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:C({onTimeUpdate:!0}),captured:C({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:C({onTouchCancel:!0}),captured:C({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:C({onTouchEnd:!0}),captured:C({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:C({onTouchMove:!0}),captured:C({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:C({onTouchStart:!0}),captured:C({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:C({onTransitionEnd:!0}),captured:C({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:C({onVolumeChange:!0}),captured:C({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:C({onWaiting:!0}),captured:C({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:C({onWheel:!0}),captured:C({onWheelCapture:!0})}}},T={topAbort:E.abort,topAnimationEnd:E.animationEnd,topAnimationIteration:E.animationIteration,topAnimationStart:E.animationStart,topBlur:E.blur,topCanPlay:E.canPlay,topCanPlayThrough:E.canPlayThrough,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topDurationChange:E.durationChange,topEmptied:E.emptied,topEncrypted:E.encrypted,topEnded:E.ended,topError:E.error,topFocus:E.focus,topInput:E.input,topInvalid:E.invalid,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topLoadedData:E.loadedData,topLoadedMetadata:E.loadedMetadata,topLoadStart:E.loadStart,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topPause:E.pause,topPlay:E.play,topPlaying:E.playing,topProgress:E.progress,topRateChange:E.rateChange,topReset:E.reset,topScroll:E.scroll,topSeeked:E.seeked,topSeeking:E.seeking,topStalled:E.stalled,topSubmit:E.submit,topSuspend:E.suspend,topTimeUpdate:E.timeUpdate,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topTransitionEnd:E.transitionEnd,topVolumeChange:E.volumeChange,topWaiting:E.waiting,topWheel:E.wheel};for(var x in T)T[x].dependencies=[x];var k=C({onClick:null}),R={},D={eventTypes:E,extractEvents:function(e,t,n,i){var s=T[e];if(!s)return null;var o;switch(e){case S.topAbort:case S.topCanPlay:case S.topCanPlayThrough:case S.topDurationChange:case S.topEmptied:case S.topEncrypted:case S.topEnded:case S.topError:case S.topInput:case S.topInvalid:case S.topLoad:case S.topLoadedData:case S.topLoadedMetadata:case S.topLoadStart:case S.topPause:case S.topPlay:case S.topPlaying:case S.topProgress:case S.topRateChange:case S.topReset:case S.topSeeked:case S.topSeeking:case S.topStalled:case S.topSubmit:case S.topSuspend:case S.topTimeUpdate:case S.topVolumeChange:case S.topWaiting:o=d;break;case S.topKeyPress:if(0===_(n))return null;case S.topKeyDown:case S.topKeyUp:o=h;break;case S.topBlur:case S.topFocus:o=p;break;case S.topClick:if(2===n.button)return null;case S.topContextMenu:case S.topDoubleClick:case S.topMouseDown:case S.topMouseMove:case S.topMouseOut:case S.topMouseOver:case S.topMouseUp:o=f;break;case S.topDrag:case S.topDragEnd:case S.topDragEnter:case S.topDragExit:case S.topDragLeave:case S.topDragOver:case S.topDragStart:case S.topDrop:o=m;break;case S.topTouchCancel:case S.topTouchEnd:case S.topTouchMove:case S.topTouchStart:o=g;break;case S.topAnimationEnd:case S.topAnimationIteration:case S.topAnimationStart:o=u;break;case S.topTransitionEnd:o=v;break;case S.topScroll:o=b;break;case S.topWheel:o=y;break;case S.topCopy:case S.topCut:case S.topPaste:o=c}o?void 0:r("86",e);var l=o.getPooled(s,t,n,i);return a.accumulateTwoPhaseDispatches(l),l},didPutListener:function(e,t,n){if(t===k){var r=i(e),s=l.getNodeFromInstance(e);R[r]||(R[r]=o.listen(s,"click",w))}},willDeleteListener:function(e,t){if(t===k){var n=i(e);R[n].remove(),delete R[n]}}};e.exports=D},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(57),s={animationName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(57),s={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(74),s={relatedTarget:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(74),s=n(156),o=n(157),a=n(76),l={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?s(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?s(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(i,l),e.exports=i},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t,n){"use strict";function i(e){if(e.key){var t=s[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var r=n(156),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(73),s={dataTransfer:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(74),s=n(76),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(57),s={propertyName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=n(73),s={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function r(e){return e?e.nodeType===O?e.documentElement:e.firstChild:null}function s(e){return e.getAttribute&&e.getAttribute(P)||""}function o(e,t,n,i,r){var s;if(_.logTopLevelRenders){var o=e._currentElement.props,a=o.type;s="React mount: "+("string"==typeof a?a:a.displayName||a.name),console.time(s)}var l=E.mountComponent(e,n,null,b(e,t),r,0);s&&console.timeEnd(s),e._renderedComponent._topLevelWrapper=e,B._mountImageIntoNode(l,t,e,i,n)}function a(e,t,n,i){var r=x.ReactReconcileTransaction.getPooled(!n&&y.useCreateElement);r.perform(o,null,e,t,r,n,i),x.ReactReconcileTransaction.release(r)}function l(e,t,n){for(E.unmountComponent(e,n),t.nodeType===O&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=r(e);if(t){var n=v.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==M&&e.nodeType!==O&&e.nodeType!==N)}function d(e){var t=r(e),n=t&&v.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function p(e){var t=d(e);return t?t._hostContainerInfo._topLevelWrapper:null}var h=n(14),f=n(80),m=n(41),g=n(105),v=(n(17),n(40)),b=n(163),y=n(164),w=n(16),_=n(62),C=n(117),S=(n(66),n(165)),E=n(63),T=n(131),x=n(60),k=n(26),R=n(119),D=(n(15),n(82)),A=n(125),P=(n(18),m.ID_ATTRIBUTE_NAME),I=m.ROOT_ATTRIBUTE_NAME,M=1,O=9,N=11,L={},F=1,V=function(){this.rootID=F++};V.prototype.isReactComponent={},V.prototype.render=function(){return this.props};var B={TopLevelWrapper:V,_instancesByReactRootID:L,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i,r){return B.scrollMonitor(i,function(){T.enqueueElementInternal(e,t,n),r&&T.enqueueCallbackInternal(e,r)}),e},_renderNewRootComponent:function(e,t,n,i){c(t)?void 0:h("37"),g.ensureScrollValueMonitoring();var r=R(e,!1);x.batchedUpdates(a,r,t,n,i);var s=r._instance.rootID;return L[s]=r,r},renderSubtreeIntoContainer:function(e,t,n,i){return null!=e&&C.has(e)?void 0:h("38"),B._renderSubtreeIntoContainer(e,t,n,i)},_renderSubtreeIntoContainer:function(e,t,n,i){T.validateCallback(i,"ReactDOM.render"),w.isValidElement(t)?void 0:h("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var o,a=w(V,null,null,null,null,null,t);if(e){var l=C.get(e);o=l._processChildContext(l._context)}else o=k;var c=p(n);if(c){var d=c._currentElement,f=d.props;if(A(f,t)){var m=c._renderedComponent.getPublicInstance(),g=i&&function(){i.call(m)};return B._updateRootComponent(c,a,o,n,g),m}B.unmountComponentAtNode(n)}var v=r(n),b=v&&!!s(v),y=u(n),_=b&&!c&&!y,S=B._renderNewRootComponent(a,n,_,o)._renderedComponent.getPublicInstance();return i&&i.call(S),S},render:function(e,t,n){return B._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)?void 0:h("40");var t=p(e);if(!t){u(e),1===e.nodeType&&e.hasAttribute(I);return!1}return delete L[t._instance.rootID],x.batchedUpdates(l,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,s,o){if(c(t)?void 0:h("41"),s){var a=r(t);if(S.canReuseMarkup(e,a))return void v.precacheNode(n,a);var l=a.getAttribute(S.CHECKSUM_ATTR_NAME);a.removeAttribute(S.CHECKSUM_ATTR_NAME);var u=a.outerHTML;a.setAttribute(S.CHECKSUM_ATTR_NAME,l);var d=e,p=i(d,u),m=" (client) "+d.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);t.nodeType===O?h("42",m):void 0}if(t.nodeType===O?h("43"):void 0,o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);f.insertTreeBefore(t,e,null)}else D(t,e),v.precacheNode(n,t.firstChild)}};e.exports=B},function(e,t,n){"use strict";function i(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===r?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var r=(n(132),9);e.exports=i},function(e,t){"use strict";var n={useCreateElement:!0};e.exports=n},function(e,t,n){"use strict";var i=n(166),r=/\/?>/,s=/^<\!\-\-/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return s.test(e)?e:e.replace(r," "+o.CHECKSUM_ATTR_NAME+'="'+t+'"$&');
},canReuseMarkup:function(e,t){var n=t.getAttribute(o.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=i(e);return r===n}};e.exports=o},function(e,t){"use strict";function n(e){for(var t=1,n=0,r=0,s=e.length,o=s&-4;r<o;){for(var a=Math.min(r+4096,o);r<a;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=i,n%=i}for(;r<s;r++)n+=t+=e.charCodeAt(r);return t%=i,n%=i,t|n<<16}var i=65521;e.exports=n},function(e,t,n){"use strict";function i(e){if(null==e)return null;if(1===e.nodeType)return e;var t=o.get(e);return t?(t=a(t),t?s.getNodeFromInstance(t):null):void("function"==typeof e.render?r("44"):r("45",Object.keys(e)))}var r=n(14),s=(n(17),n(40)),o=n(117),a=n(168);n(15),n(18);e.exports=i},function(e,t,n){"use strict";function i(e){for(var t;(t=e._renderedNodeType)===r.COMPOSITE;)e=e._renderedComponent;return t===r.HOST?e._renderedComponent:t===r.EMPTY?null:void 0}var r=n(121);e.exports=i},function(e,t,n){"use strict";var i=n(162);e.exports=i.renderSubtreeIntoContainer},function(e,t,n){function i(){"use strict";function e(e){if(e.length<2)throw new Error("Rainbow must have two or more colours.");var o=(i-n)/(e.length-1),a=new r;a.setGradient(e[0],e[1]),a.setNumberRange(n,n+o),t=[a];for(var l=1;l<e.length-1;l++){var u=new r;u.setGradient(e[l],e[l+1]),u.setNumberRange(n+o*l,n+o*(l+1)),t[l]=u}s=e}var t=null,n=0,i=100,s=["ff0000","ffff00","00ff00","0000ff"];e(s),this.setSpectrum=function(){return e(arguments),this},this.setSpectrumByArray=function(t){return e(t),this},this.colourAt=function(e){if(isNaN(e))throw new TypeError(e+" is not a number");if(1===t.length)return t[0].colourAt(e);var r=(i-n)/t.length,s=Math.min(Math.floor((Math.max(e,n)-n)/r),t.length-1);return t[s].colourAt(e)},this.colorAt=this.colourAt,this.setNumberRange=function(t,r){if(!(r>t))throw new RangeError("maxNumber ("+r+") is not greater than minNumber ("+t+")");return n=t,i=r,e(s),this}}function r(){"use strict";function e(e,n,i){var r=e;r<o&&(r=o),r>a&&(r=a);var s=a-o,l=parseInt(n,16),u=parseInt(i,16),c=(u-l)/s,d=Math.round(c*(r-o)+l);return t(d.toString(16))}function t(e){return 1===e.length?"0"+e:e}function n(e){var t=/^#?[0-9a-fA-F]{6}$/i;return t.test(e)}function i(e){if(n(e))return e.substring(e.length-6,e.length);var t=e.toLowerCase();if(l.hasOwnProperty(t))return l[t];throw new Error(e+" is not a valid colour.")}var r="ff0000",s="0000ff",o=0,a=100;this.setGradient=function(e,t){r=i(e),s=i(t)},this.setNumberRange=function(e,t){if(!(t>e))throw new RangeError("maxNumber ("+t+") is not greater than minNumber ("+e+")");o=e,a=t},this.colourAt=function(t){return e(t,r.substring(0,2),s.substring(0,2))+e(t,r.substring(2,4),s.substring(2,4))+e(t,r.substring(4,6),s.substring(4,6))};var l={aliceblue:"F0F8FF",antiquewhite:"FAEBD7",aqua:"00FFFF",aquamarine:"7FFFD4",azure:"F0FFFF",beige:"F5F5DC",bisque:"FFE4C4",black:"000000",blanchedalmond:"FFEBCD",blue:"0000FF",blueviolet:"8A2BE2",brown:"A52A2A",burlywood:"DEB887",cadetblue:"5F9EA0",chartreuse:"7FFF00",chocolate:"D2691E",coral:"FF7F50",cornflowerblue:"6495ED",cornsilk:"FFF8DC",crimson:"DC143C",cyan:"00FFFF",darkblue:"00008B",darkcyan:"008B8B",darkgoldenrod:"B8860B",darkgray:"A9A9A9",darkgreen:"006400",darkgrey:"A9A9A9",darkkhaki:"BDB76B",darkmagenta:"8B008B",darkolivegreen:"556B2F",darkorange:"FF8C00",darkorchid:"9932CC",darkred:"8B0000",darksalmon:"E9967A",darkseagreen:"8FBC8F",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkslategrey:"2F4F4F",darkturquoise:"00CED1",darkviolet:"9400D3",deeppink:"FF1493",deepskyblue:"00BFFF",dimgray:"696969",dimgrey:"696969",dodgerblue:"1E90FF",firebrick:"B22222",floralwhite:"FFFAF0",forestgreen:"228B22",fuchsia:"FF00FF",gainsboro:"DCDCDC",ghostwhite:"F8F8FF",gold:"FFD700",goldenrod:"DAA520",gray:"808080",green:"008000",greenyellow:"ADFF2F",grey:"808080",honeydew:"F0FFF0",hotpink:"FF69B4",indianred:"CD5C5C",indigo:"4B0082",ivory:"FFFFF0",khaki:"F0E68C",lavender:"E6E6FA",lavenderblush:"FFF0F5",lawngreen:"7CFC00",lemonchiffon:"FFFACD",lightblue:"ADD8E6",lightcoral:"F08080",lightcyan:"E0FFFF",lightgoldenrodyellow:"FAFAD2",lightgray:"D3D3D3",lightgreen:"90EE90",lightgrey:"D3D3D3",lightpink:"FFB6C1",lightsalmon:"FFA07A",lightseagreen:"20B2AA",lightskyblue:"87CEFA",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"B0C4DE",lightyellow:"FFFFE0",lime:"00FF00",limegreen:"32CD32",linen:"FAF0E6",magenta:"FF00FF",maroon:"800000",mediumaquamarine:"66CDAA",mediumblue:"0000CD",mediumorchid:"BA55D3",mediumpurple:"9370DB",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumspringgreen:"00FA9A",mediumturquoise:"48D1CC",mediumvioletred:"C71585",midnightblue:"191970",mintcream:"F5FFFA",mistyrose:"FFE4E1",moccasin:"FFE4B5",navajowhite:"FFDEAD",navy:"000080",oldlace:"FDF5E6",olive:"808000",olivedrab:"6B8E23",orange:"FFA500",orangered:"FF4500",orchid:"DA70D6",palegoldenrod:"EEE8AA",palegreen:"98FB98",paleturquoise:"AFEEEE",palevioletred:"DB7093",papayawhip:"FFEFD5",peachpuff:"FFDAB9",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",powderblue:"B0E0E6",purple:"800080",red:"FF0000",rosybrown:"BC8F8F",royalblue:"4169E1",saddlebrown:"8B4513",salmon:"FA8072",sandybrown:"F4A460",seagreen:"2E8B57",seashell:"FFF5EE",sienna:"A0522D",silver:"C0C0C0",skyblue:"87CEEB",slateblue:"6A5ACD",slategray:"708090",slategrey:"708090",snow:"FFFAFA",springgreen:"00FF7F",steelblue:"4682B4",tan:"D2B48C",teal:"008080",thistle:"D8BFD8",tomato:"FF6347",turquoise:"40E0D0",violet:"EE82EE",wheat:"F5DEB3",white:"FFFFFF",whitesmoke:"F5F5F5",yellow:"FFFF00",yellowgreen:"9ACD32"}}e.exports=i},function(e,t,n){(function(t){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var r=t.React||n(172),s=t.ReactDOM||n(324);n(325);var o=n(328),a=n(329),l=n(334),u=n(335).preloadType,c=c=n(336),d=r.createClass({displayName:"Infinite",propTypes:{children:r.PropTypes.any,handleScroll:r.PropTypes.func,preloadBatchSize:u,preloadAdditionalHeight:u,elementHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.arrayOf(r.PropTypes.number)]).isRequired,containerHeight:r.PropTypes.number,useWindowAsScrollContainer:r.PropTypes.bool,displayBottomUpwards:r.PropTypes.bool.isRequired,infiniteLoadBeginEdgeOffset:r.PropTypes.number,onInfiniteLoad:r.PropTypes.func,loadingSpinnerDelegate:r.PropTypes.node,isInfiniteLoading:r.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:r.PropTypes.number,className:r.PropTypes.string},statics:{containerHeightScaleFactor:function(e){if(!l(e))throw new Error("The scale factor must be a number.");return{type:o.CONTAINER_HEIGHT_SCALE_FACTOR,amount:e}}},computedProps:{},utils:{},shouldAttachToBottom:!1,preservedScrollState:0,loadingSpinnerHeight:0,deprecationWarned:!1,getDefaultProps:function(){return{handleScroll:function(){},useWindowAsScrollContainer:!1,onInfiniteLoad:function(){},loadingSpinnerDelegate:r.createElement("div",null),displayBottomUpwards:!1,isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150,className:""}},getInitialState:function(){var e=this.recomputeInternalStateFromProps(this.props);this.computedProps=e.computedProps,this.utils=e.utils,this.shouldAttachToBottom=this.props.displayBottomUpwards;var t=e.newState;return t.scrollTimeout=void 0,t.isScrolling=!1,t},generateComputedProps:function(e){var t=e.containerHeight,n=e.preloadBatchSize,r=e.preloadAdditionalHeight,s=i(e,["containerHeight","preloadBatchSize","preloadAdditionalHeight"]),a={};t="number"==typeof t?t:0,a.containerHeight=e.useWindowAsScrollContainer?window.innerHeight:t,void 0!==s.infiniteLoadBeginBottomOffset&&(a.infiniteLoadBeginEdgeOffset=s.infiniteLoadBeginBottomOffset,this.deprecationWarned||(console.error("Warning: React Infinite's infiniteLoadBeginBottomOffset prop\n        has been deprecated as of 0.6.0. Please use infiniteLoadBeginEdgeOffset.\n        Because this is a rather descriptive name, a simple find and replace\n        should suffice."),this.deprecationWarned=!0));var l={type:o.CONTAINER_HEIGHT_SCALE_FACTOR,amount:.5},u=n&&n.type?n:l;"number"==typeof n?a.preloadBatchSize=n:u.type===o.CONTAINER_HEIGHT_SCALE_FACTOR?a.preloadBatchSize=a.containerHeight*u.amount:a.preloadBatchSize=0;var c={type:o.CONTAINER_HEIGHT_SCALE_FACTOR,amount:1},d=r&&r.type?r:c;return"number"==typeof r?a.preloadAdditionalHeight=r:d.type===o.CONTAINER_HEIGHT_SCALE_FACTOR?a.preloadAdditionalHeight=a.containerHeight*d.amount:a.preloadAdditionalHeight=0,Object.assign(s,a)},generateComputedUtilityFunctions:function(e){var t=this,n={};return n.getLoadingSpinnerHeight=function(){var e=0;if(t.refs&&t.refs.loadingSpinner){var n=s.findDOMNode(t.refs.loadingSpinner);e=n.offsetHeight||0}return e},e.useWindowAsScrollContainer?(n.subscribeToScrollListener=function(){window.addEventListener("scroll",t.infiniteHandleScroll)},n.unsubscribeFromScrollListener=function(){window.removeEventListener("scroll",t.infiniteHandleScroll)},n.nodeScrollListener=function(){},n.getScrollTop=function(){return window.scrollY},n.setScrollTop=function(e){window.scroll(window.scrollX,e)},n.scrollShouldBeIgnored=function(){return!1},n.buildScrollableStyle=function(){return{}}):(n.subscribeToScrollListener=function(){},n.unsubscribeFromScrollListener=function(){},n.nodeScrollListener=this.infiniteHandleScroll,n.getScrollTop=function(){var e;return t.refs&&t.refs.scrollable&&(e=s.findDOMNode(t.refs.scrollable)),e?e.scrollTop:0},n.setScrollTop=function(e){var n;t.refs&&t.refs.scrollable&&(n=s.findDOMNode(t.refs.scrollable)),n&&(n.scrollTop=e)},n.scrollShouldBeIgnored=function(e){return e.target!==s.findDOMNode(t.refs.scrollable)},n.buildScrollableStyle=function(){return{height:t.computedProps.containerHeight,overflowX:"hidden",overflowY:"scroll",WebkitOverflowScrolling:"touch"}}),n},recomputeInternalStateFromProps:function(e){c(e);var t=this.generateComputedProps(e),n=this.generateComputedUtilityFunctions(e),i={};return i.numberOfChildren=r.Children.count(t.children),i.infiniteComputer=a.createInfiniteComputer(t.elementHeight,t.children,t.displayBottomUpwards),void 0!==t.isInfiniteLoading&&(i.isInfiniteLoading=t.isInfiniteLoading),i.preloadBatchSize=t.preloadBatchSize,i.preloadAdditionalHeight=t.preloadAdditionalHeight,i=Object.assign(i,a.recomputeApertureStateFromOptionsAndScrollTop(i,n.getScrollTop())),{computedProps:t,utils:n,newState:i}},componentWillReceiveProps:function(e){var t=this.recomputeInternalStateFromProps(e);this.computedProps=t.computedProps,this.utils=t.utils,this.setState(t.newState)},componentWillUpdate:function(){this.props.displayBottomUpwards&&(this.preservedScrollState=this.utils.getScrollTop()-this.loadingSpinnerHeight)},componentDidUpdate:function(e,t){if(this.loadingSpinnerHeight=this.utils.getLoadingSpinnerHeight(),this.props.displayBottomUpwards){var n=this.getLowestPossibleScrollTop();this.shouldAttachToBottom&&this.utils.getScrollTop()<n?this.utils.setScrollTop(n):e.isInfiniteLoading&&!this.props.isInfiniteLoading&&this.utils.setScrollTop(this.state.infiniteComputer.getTotalScrollableHeight()-t.infiniteComputer.getTotalScrollableHeight()+this.preservedScrollState)}if(r.Children.count(this.props.children)!==r.Children.count(e.children)){var i=a.recomputeApertureStateFromOptionsAndScrollTop(this.state,this.utils.getScrollTop());this.setState(i)}},componentDidMount:function(){if(this.utils.subscribeToScrollListener(),l(this.computedProps.infiniteLoadBeginEdgeOffset)&&this.state.infiniteComputer.getTotalScrollableHeight()<this.computedProps.containerHeight&&(this.setState({isInfiniteLoading:!0}),this.computedProps.onInfiniteLoad()),this.props.displayBottomUpwards){var e=this.getLowestPossibleScrollTop();this.shouldAttachToBottom&&this.utils.getScrollTop()<e&&this.utils.setScrollTop(e)}},componentWillUnmount:function(){this.utils.unsubscribeFromScrollListener()},infiniteHandleScroll:function(e){this.utils.scrollShouldBeIgnored(e)||(this.computedProps.handleScroll(s.findDOMNode(this.refs.scrollable)),this.handleScroll(this.utils.getScrollTop()))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var e=this,t=setTimeout(function(){e.setState({isScrolling:!1,scrollTimeout:void 0})},this.computedProps.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:t})},getLowestPossibleScrollTop:function(){return this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight},passedEdgeForInfiniteScroll:function(e){return this.computedProps.displayBottomUpwards?!this.shouldAttachToBottom&&e<this.computedProps.infiniteLoadBeginEdgeOffset:e>this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight-this.computedProps.infiniteLoadBeginEdgeOffset},handleScroll:function(e){this.shouldAttachToBottom=this.computedProps.displayBottomUpwards&&e>=this.getLowestPossibleScrollTop(),this.manageScrollTimeouts();var t=a.recomputeApertureStateFromOptionsAndScrollTop(this.state,e);this.passedEdgeForInfiniteScroll(e)&&!this.state.isInfiniteLoading?(this.setState(Object.assign({},t,{isInfiniteLoading:!0})),this.computedProps.onInfiniteLoad()):this.setState(t)},buildHeightStyle:function(e){return{width:"100%",height:Math.ceil(e)}},render:function(){var e;e=r.Children.count(this.computedProps.children)>1?this.computedProps.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1):this.computedProps.children;var t={};this.state.isScrolling&&(t.pointerEvents="none");var n=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),i=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);if(this.computedProps.displayBottomUpwards){var s=this.computedProps.containerHeight-this.state.infiniteComputer.getTotalScrollableHeight();s>0&&(n=s-this.loadingSpinnerHeight)}var o=void 0===this.computedProps.infiniteLoadBeginEdgeOffset?null:r.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.computedProps.loadingSpinnerDelegate:null);return r.createElement("div",{className:this.computedProps.className,ref:"scrollable",style:this.utils.buildScrollableStyle(),onScroll:this.utils.nodeScrollListener},r.createElement("div",{ref:"smoothScrollingWrapper",style:t},r.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(n)}),this.computedProps.displayBottomUpwards&&o,e,!this.computedProps.displayBottomUpwards&&o,r.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(i)})))}});e.exports=d,t.Infinite=d}).call(t,function(){return this}())},function(e,t,n){"use strict";e.exports=n(173)},function(e,t,n){"use strict";var i=n(174),r=n(314),s=n(318),o=n(209),a=n(323),l={};o(l,s),o(l,{findDOMNode:a("findDOMNode","ReactDOM","react-dom",i,i.findDOMNode),render:a("render","ReactDOM","react-dom",i,i.render),unmountComponentAtNode:a("unmountComponentAtNode","ReactDOM","react-dom",i,i.unmountComponentAtNode),renderToString:a("renderToString","ReactDOMServer","react-dom/server",r,r.renderToString),renderToStaticMarkup:a("renderToStaticMarkup","ReactDOMServer","react-dom/server",r,r.renderToStaticMarkup)}),l.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i,l.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r,e.exports=l},function(e,t,n){"use strict";var i=n(175),r=n(176),s=n(241),o=n(215),a=n(198),l=n(188),u=n(220),c=n(224),d=n(312),p=n(261),h=n(313);n(195);s.inject();var f=l.measure("React","render",a.render),m={findDOMNode:p,render:f,unmountComponentAtNode:a.unmountComponentAtNode,version:d,unstable_batchedUpdates:c.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:i,InstanceHandles:o,Mount:a,Reconciler:u,TextComponent:r});e.exports=m},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";var i=n(177),r=n(192),s=n(196),o=n(198),a=n(209),l=n(191),u=n(190),c=(n(240),function(e){});a(c.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var i=n[o.ownerDocumentContextKey],s=i.createElement("span");return r.setAttributeForID(s,e),o.getID(s),u(s,this._stringText),s}var a=l(this._stringText);return t.renderToStaticMarkup?a:"<span "+r.createMarkupForID(e)+">"+a+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=o.getNode(this._rootNodeID);i.updateTextContent(r,n)}}},unmountComponent:function(){s.unmountIDFromEnvironment(this._rootNodeID)}}),e.exports=c},function(e,t,n){"use strict";function i(e,t,n){var i=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,i)}var r=n(178),s=n(186),o=n(188),a=n(189),l=n(190),u=n(183),c={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:l,processUpdates:function(e,t){for(var n,o=null,c=null,d=0;d<e.length;d++)if(n=e[d],n.type===s.MOVE_EXISTING||n.type===s.REMOVE_NODE){var p=n.fromIndex,h=n.parentNode.childNodes[p],f=n.parentID;h?void 0:u(!1),o=o||{},o[f]=o[f]||[],o[f][p]=h,c=c||[],c.push(h)}var m;if(m=t.length&&"string"==typeof t[0]?r.dangerouslyRenderMarkup(t):t,c)for(var g=0;g<c.length;g++)c[g].parentNode.removeChild(c[g]);for(var v=0;v<e.length;v++)switch(n=e[v],n.type){case s.INSERT_MARKUP:i(n.parentNode,m[n.markupIndex],n.toIndex);break;case s.MOVE_EXISTING:i(n.parentNode,o[n.parentID][n.fromIndex],n.toIndex);break;case s.SET_MARKUP:a(n.parentNode,n.content);break;case s.TEXT_CONTENT:l(n.parentNode,n.content);break;case s.REMOVE_NODE:}}};o.measureMethods(c,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),e.exports=c},function(e,t,n){"use strict";function i(e){return e.substring(1,e.indexOf(" "))}var r=n(179),s=n(180),o=n(185),a=n(184),l=n(183),u=/^(<[^ \/>]+)/,c="data-danger-index",d={dangerouslyRenderMarkup:function(e){r.canUseDOM?void 0:l(!1);for(var t,n={},d=0;d<e.length;d++)e[d]?void 0:l(!1),t=i(e[d]),t=a(t)?t:"*",n[t]=n[t]||[],n[t][d]=e[d];var p=[],h=0;for(t in n)if(n.hasOwnProperty(t)){var f,m=n[t];for(f in m)if(m.hasOwnProperty(f)){var g=m[f];m[f]=g.replace(u,"$1 "+c+'="'+f+'" ')}for(var v=s(m.join(""),o),b=0;b<v.length;++b){var y=v[b];y.hasAttribute&&y.hasAttribute(c)&&(f=+y.getAttribute(c),y.removeAttribute(c),p.hasOwnProperty(f)?l(!1):void 0,p[f]=y,h+=1)}}return h!==p.length?l(!1):void 0,p.length!==e.length?l(!1):void 0,p},dangerouslyReplaceNodeWithMarkup:function(e,t){r.canUseDOM?void 0:l(!1),t?void 0:l(!1),"html"===e.tagName.toLowerCase()?l(!1):void 0;var n;n="string"==typeof t?s(t,o)[0]:t,e.parentNode.replaceChild(n,e)}};e.exports=d},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=i},function(e,t,n){"use strict";function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var n=u;u?void 0:l(!1);var r=i(e),s=r&&a(r);if(s){n.innerHTML=s[1]+e+s[2];for(var c=s[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t?void 0:l(!1),o(d).forEach(t));for(var p=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var s=n(179),o=n(181),a=n(184),l=n(183),u=s.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=r},function(e,t,n){"use strict";function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return i(e)?Array.isArray(e)?e.slice():s(e):[e]}var s=n(182);e.exports=r},function(e,t,n){"use strict";function i(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?r(!1):void 0,"number"!=typeof t?r(!1):void 0,0===t||t-1 in e?void 0:r(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),s=0;s<t;s++)i[s]=e[s];return i}var r=n(183);e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i,r,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,s,o,a],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}e.exports=i},function(e,t,n){"use strict";function i(e){return o?void 0:s(!1),p.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",a[e]=!o.firstChild),a[e]?p[e]:null}var r=n(179),s=n(183),o=r.canUseDOM?document.createElement("div"):null,a={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},h=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];h.forEach(function(e){p[e]=d,a[e]=!0}),e.exports=i},function(e,t){"use strict";function n(e){return function(){return e}}function i(){}i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var i=n(187),r=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=r},function(e,t,n){"use strict";var i=n(183),r=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:i(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=r},function(e,t,n){"use strict";function i(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:i,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){r.storedMeasure=e}}};e.exports=r},function(e,t,n){"use strict";var i=n(179),r=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(o=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),i.canUseDOM){var a=document.createElement("div");a.innerHTML=" ",""===a.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),r.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}e.exports=o},function(e,t,n){"use strict";var i=n(179),r=n(191),s=n(189),o=function(e,t){e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){s(e,r(t))})),e.exports=o},function(e,t){"use strict";function n(e){return r[e]}function i(e){return(""+e).replace(s,n)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},s=/[&><"']/g;e.exports=i},function(e,t,n){"use strict";function i(e){return!!c.hasOwnProperty(e)||!u.hasOwnProperty(e)&&(l.test(e)?(c[e]=!0,!0):(u[e]=!0,!1))}function r(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var s=n(193),o=n(188),a=n(194),l=(n(195),/^[a-zA-Z_][\w\.\-]*$/),u={},c={},d={createMarkupForID:function(e){return s.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(s.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var n=s.properties.hasOwnProperty(e)?s.properties[e]:null;if(n){if(r(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?i+'=""':i+"="+a(t)}return s.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return i(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var i=s.properties.hasOwnProperty(t)?s.properties[t]:null;if(i){var o=i.mutationMethod;if(o)o(e,n);else if(r(i,n))this.deleteValueForProperty(e,t);else if(i.mustUseAttribute){var a=i.attributeName,l=i.attributeNamespace;l?e.setAttributeNS(l,a,""+n):i.hasBooleanValue||i.hasOverloadedBooleanValue&&n===!0?e.setAttribute(a,""):e.setAttribute(a,""+n)}else{var u=i.propertyName;i.hasSideEffects&&""+e[u]==""+n||(e[u]=n)}}else s.isCustomAttribute(t)&&d.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){i(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){var n=s.properties.hasOwnProperty(t)?s.properties[t]:null;if(n){var i=n.mutationMethod;if(i)i(e,void 0);else if(n.mustUseAttribute)e.removeAttribute(n.attributeName);else{var r=n.propertyName,o=s.getDefaultValueForProperty(e.nodeName,r);n.hasSideEffects&&""+e[r]===o||(e[r]=o)}}else s.isCustomAttribute(t)&&e.removeAttribute(t)}};o.measureMethods(d,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),e.exports=d},function(e,t,n){"use strict";function i(e,t){return(e&t)===t}var r=n(183),s={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=s,n=e.Properties||{},o=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in n){a.properties.hasOwnProperty(d)?r(!1):void 0;var p=d.toLowerCase(),h=n[d],f={attributeName:p,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseAttribute:i(h,t.MUST_USE_ATTRIBUTE),mustUseProperty:i(h,t.MUST_USE_PROPERTY),hasSideEffects:i(h,t.HAS_SIDE_EFFECTS),hasBooleanValue:i(h,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(h,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(h,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(h,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.mustUseAttribute&&f.mustUseProperty?r(!1):void 0,!f.mustUseProperty&&f.hasSideEffects?r(!1):void 0,f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:r(!1),l.hasOwnProperty(d)){var m=l[d];f.attributeName=m}o.hasOwnProperty(d)&&(f.attributeNamespace=o[d]),u.hasOwnProperty(d)&&(f.propertyName=u[d]),c.hasOwnProperty(d)&&(f.mutationMethod=c[d]),a.properties[d]=f}}},o={},a={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){var n=a._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,i=o[e];return i||(o[e]=i={}),t in i||(n=document.createElement(e),i[t]=n[t]),i[t]},injection:s};e.exports=a},function(e,t,n){"use strict";function i(e){return'"'+r(e)+'"'}var r=n(191);e.exports=i},function(e,t,n){"use strict";var i=n(185),r=i;e.exports=r},function(e,t,n){"use strict";var i=n(197),r=n(198),s={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:i.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){r.purgeID(e)}};e.exports=s},function(e,t,n){"use strict";var i=n(177),r=n(192),s=n(198),o=n(188),a=n(183),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},u={updatePropertyByID:function(e,t,n){var i=s.getNode(e);l.hasOwnProperty(t)?a(!1):void 0,null!=n?r.setValueForProperty(i,t,n):r.deleteValueForProperty(i,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=s.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=s.getNode(e[n].parentID);i.processUpdates(e,t)}};o.measureMethods(u,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),e.exports=u},function(e,t,n){"use strict";function i(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function r(e){return e?e.nodeType===H?e.documentElement:e.firstChild:null}function s(e){var t=r(e);return t&&Q.getID(t)}function o(e){var t=a(e);if(t)if(U.hasOwnProperty(t)){var n=U[t];n!==e&&(d(n,t)?L(!1):void 0,U[t]=e)}else U[t]=e;return t}function a(e){return e&&e.getAttribute&&e.getAttribute(B)||""}function l(e,t){var n=a(e);n!==t&&delete U[n],e.setAttribute(B,t),U[t]=e}function u(e){return U.hasOwnProperty(e)&&d(U[e],e)||(U[e]=Q.findReactNodeByID(e)),U[e]}function c(e){var t=x.get(e)._rootNodeID;return E.isNullComponentID(t)?null:(U.hasOwnProperty(t)&&d(U[t],t)||(U[t]=Q.findReactNodeByID(t)),U[t])}function d(e,t){if(e){a(e)!==t?L(!1):void 0;var n=Q.findReactContainerForID(t);if(n&&O(n,e))return!0}return!1}function p(e){delete U[e]}function h(e){var t=U[e];return!(!t||!d(t,e))&&void(Y=t)}function f(e){Y=null,T.traverseAncestors(e,h);var t=Y;return Y=null,t}function m(e,t,n,i,r,s){C.useCreateElement&&(s=I({},s),n.nodeType===H?s[q]=n:s[q]=n.ownerDocument);var o=D.mountComponent(e,t,i,s);e._renderedComponent._topLevelWrapper=e,Q._mountImageIntoNode(o,n,r,i)}function g(e,t,n,i,r){var s=P.ReactReconcileTransaction.getPooled(i);s.perform(m,null,e,t,n,s,i,r),P.ReactReconcileTransaction.release(s)}function v(e,t){for(D.unmountComponent(e),t.nodeType===H&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function b(e){var t=s(e);return!!t&&t!==T.getReactRootIDFromNodeID(t)}function y(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=a(e);if(t){var n,i=T.getReactRootIDFromNodeID(t),r=e;do if(n=a(r),r=r.parentNode,null==r)return null;while(n!==i);if(r===z[i])return e}}return null}var w=n(193),_=n(199),C=(n(175),n(211)),S=n(212),E=n(214),T=n(215),x=n(217),k=n(218),R=n(188),D=n(220),A=n(223),P=n(224),I=n(209),M=n(228),O=n(229),N=n(232),L=n(183),F=n(189),V=n(237),B=(n(240),n(195),w.ID_ATTRIBUTE_NAME),U={},j=1,H=9,G=11,q="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),W={},z={},K=[],Y=null,X=function(){};X.prototype.isReactComponent={},X.prototype.render=function(){return this.props};var Q={TopLevelWrapper:X,_instancesByReactRootID:W,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i){return Q.scrollMonitor(n,function(){A.enqueueElementInternal(e,t),i&&A.enqueueCallbackInternal(e,i)}),e},_registerComponent:function(e,t){!t||t.nodeType!==j&&t.nodeType!==H&&t.nodeType!==G?L(!1):void 0,_.ensureScrollValueMonitoring();var n=Q.registerContainer(t);return W[n]=e,n},_renderNewRootComponent:function(e,t,n,i){var r=N(e,null),s=Q._registerComponent(r,t);return P.batchedUpdates(g,r,s,t,n,i),r},renderSubtreeIntoContainer:function(e,t,n,i){return null==e||null==e._reactInternalInstance?L(!1):void 0,Q._renderSubtreeIntoContainer(e,t,n,i)},_renderSubtreeIntoContainer:function(e,t,n,i){S.isValidElement(t)?void 0:L(!1);var o=new S(X,null,null,null,null,null,t),l=W[s(n)];if(l){var u=l._currentElement,c=u.props;if(V(c,t)){var d=l._renderedComponent.getPublicInstance(),p=i&&function(){i.call(d)};return Q._updateRootComponent(l,o,n,p),d}Q.unmountComponentAtNode(n)}var h=r(n),f=h&&!!a(h),m=b(n),g=f&&!l&&!m,v=Q._renderNewRootComponent(o,n,g,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):M)._renderedComponent.getPublicInstance();return i&&i.call(v),v},render:function(e,t,n){return Q._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=s(e);return t&&(t=T.getReactRootIDFromNodeID(t)),
t||(t=T.createReactRootID()),z[t]=e,t},unmountComponentAtNode:function(e){!e||e.nodeType!==j&&e.nodeType!==H&&e.nodeType!==G?L(!1):void 0;var t=s(e),n=W[t];if(!n){var i=(b(e),a(e));i&&i===T.getReactRootIDFromNodeID(i);return!1}return P.batchedUpdates(v,n,e),delete W[t],delete z[t],!0},findReactContainerForID:function(e){var t=T.getReactRootIDFromNodeID(e),n=z[t];return n},findReactNodeByID:function(e){var t=Q.findReactContainerForID(e);return Q.findComponentRoot(t,e)},getFirstReactDOM:function(e){return y(e)},findComponentRoot:function(e,t){var n=K,i=0,r=f(t)||e;for(n[0]=r.firstChild,n.length=1;i<n.length;){for(var s,o=n[i++];o;){var a=Q.getID(o);a?t===a?s=o:T.isAncestorIDOf(a,t)&&(n.length=i=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(s)return n.length=0,s}n.length=0,L(!1)},_mountImageIntoNode:function(e,t,n,s){if(!t||t.nodeType!==j&&t.nodeType!==H&&t.nodeType!==G?L(!1):void 0,n){var o=r(t);if(k.canReuseMarkup(e,o))return;var a=o.getAttribute(k.CHECKSUM_ATTR_NAME);o.removeAttribute(k.CHECKSUM_ATTR_NAME);var l=o.outerHTML;o.setAttribute(k.CHECKSUM_ATTR_NAME,a);var u=e,c=i(u,l);" (client) "+u.substring(c-20,c+20)+"\n (server) "+l.substring(c-20,c+20);t.nodeType===H?L(!1):void 0}if(t.nodeType===H?L(!1):void 0,s.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else F(t,e)},ownerDocumentContextKey:q,getReactRootID:s,getID:o,setID:l,getNode:u,getNodeFromInstance:c,isValid:d,purgeID:p};R.measureMethods(Q,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),e.exports=Q},function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,g)||(e[g]=f++,p[e[g]]={}),p[e[g]]}var r=n(200),s=n(201),o=n(202),a=n(207),l=n(188),u=n(208),c=n(209),d=n(210),p={},h=!1,f=0,m={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},g="_reactListenersID"+String(Math.random()).slice(2),v=c({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,s=i(n),a=o.registrationNameDependencies[e],l=r.topLevelTypes,u=0;u<a.length;u++){var c=a[u];s.hasOwnProperty(c)&&s[c]||(c===l.topWheel?d("wheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):d("mousewheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?d("scroll",!0)?v.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(d("focus",!0)?(v.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):d("focusin")&&(v.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),s[l.topBlur]=!0,s[l.topFocus]=!0):m.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,m[c],n),s[c]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners});l.measureMethods(v,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),e.exports=v},function(e,t,n){"use strict";var i=n(187),r=i({bubbled:null,captured:null}),s=i({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:r};e.exports=o},function(e,t,n){"use strict";var i=n(202),r=n(203),s=n(204),o=n(205),a=n(206),l=n(183),u=(n(195),{}),c=null,d=function(e,t){e&&(r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return d(e,!0)},h=function(e){return d(e,!1)},f=null,m={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){f=e},getInstanceHandle:function(){return f},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(e,t,n){"function"!=typeof n?l(!1):void 0;var r=u[t]||(u[t]={});r[e]=n;var s=i.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=u[t];return n&&n[e]},deleteListener:function(e,t){var n=i.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=u[t];r&&delete r[e]},deleteAllListeners:function(e){for(var t in u)if(u[t][e]){var n=i.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t),delete u[t][e]}},extractEvents:function(e,t,n,r,s){for(var a,l=i.plugins,u=0;u<l.length;u++){var c=l[u];if(c){var d=c.extractEvents(e,t,n,r,s);d&&(a=o(a,d))}}return a},enqueueEvents:function(e){e&&(c=o(c,e))},processEventQueue:function(e){var t=c;c=null,e?a(t,p):a(t,h),c?l(!1):void 0,s.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};e.exports=m},function(e,t,n){"use strict";function i(){if(a)for(var e in l){var t=l[e],n=a.indexOf(e);if(n>-1?void 0:o(!1),!u.plugins[n]){t.extractEvents?void 0:o(!1),u.plugins[n]=t;var i=t.eventTypes;for(var s in i)r(i[s],t,s)?void 0:o(!1)}}}function r(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?o(!1):void 0,u.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];s(a,t,n)}return!0}return!!e.registrationName&&(s(e.registrationName,t,n),!0)}function s(e,t,n){u.registrationNameModules[e]?o(!1):void 0,u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=n(183),a=null,l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){a?o(!1):void 0,a=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];l.hasOwnProperty(n)&&l[n]===r||(l[n]?o(!1):void 0,l[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){a=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=u.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r]}};e.exports=u},function(e,t,n){"use strict";function i(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function r(e){return e===g.topMouseMove||e===g.topTouchMove}function s(e){return e===g.topMouseDown||e===g.topTouchStart}function o(e,t,n,i){var r=e.type||"unknown-event";e.currentTarget=m.Mount.getNode(i),t?h.invokeGuardedCallbackWithCatch(r,n,e,i):h.invokeGuardedCallback(r,n,e,i),e.currentTarget=null}function a(e,t){var n=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)o(e,t,n[r],i[r]);else n&&o(e,t,n,i);e._dispatchListeners=null,e._dispatchIDs=null}function l(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function u(e){var t=l(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;Array.isArray(t)?f(!1):void 0;var i=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,i}function d(e){return!!e._dispatchListeners}var p=n(200),h=n(204),f=n(183),m=(n(195),{Mount:null,injectMount:function(e){m.Mount=e}}),g=p.topLevelTypes,v={isEndish:i,isMoveish:r,isStartish:s,executeDirectDispatch:c,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:u,hasDispatches:d,getNode:function(e){return m.Mount.getNode(e)},getID:function(e){return m.Mount.getID(e)},injection:m};e.exports=v},function(e,t,n){"use strict";function i(e,t,n,i){try{return t(n,i)}catch(s){return void(null===r&&(r=s))}}var r=null,s={invokeGuardedCallback:i,invokeGuardedCallbackWithCatch:i,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};e.exports=s},function(e,t,n){"use strict";function i(e,t){if(null==t?r(!1):void 0,null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n&&i?(e.push.apply(e,t),e):n?(e.push(t),e):i?[e].concat(t):[e,t]}var r=n(183);e.exports=i},function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=n},function(e,t,n){"use strict";function i(e){r.enqueueEvents(e),r.processEventQueue(!1)}var r=n(201),s={handleTopLevel:function(e,t,n,s,o){var a=r.extractEvents(e,t,n,s,o);i(a)}};e.exports=s},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t){"use strict";function n(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),i=Object.prototype.hasOwnProperty,r=1;r<arguments.length;r++){var s=arguments[r];if(null!=s){var o=Object(s);for(var a in o)i.call(o,a)&&(n[a]=o[a])}}return n}e.exports=n},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function i(e,t){if(!s.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var o=document.createElement("div");o.setAttribute(n,"return;"),i="function"==typeof o[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,s=n(179);s.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=i},function(e,t){"use strict";var n={useCreateElement:!1};e.exports=n},function(e,t,n){"use strict";var i=n(175),r=n(209),s=(n(213),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),o={key:!0,ref:!0,__self:!0,__source:!0},a=function(e,t,n,i,r,o,a){var l={$$typeof:s,type:e,key:t,ref:n,props:a,_owner:o};return l};a.createElement=function(e,t,n){var r,s={},l=null,u=null,c=null,d=null;if(null!=t){u=void 0===t.ref?null:t.ref,l=void 0===t.key?null:""+t.key,c=void 0===t.__self?null:t.__self,d=void 0===t.__source?null:t.__source;for(r in t)t.hasOwnProperty(r)&&!o.hasOwnProperty(r)&&(s[r]=t[r])}var p=arguments.length-2;if(1===p)s.children=n;else if(p>1){for(var h=Array(p),f=0;f<p;f++)h[f]=arguments[f+2];s.children=h}if(e&&e.defaultProps){var m=e.defaultProps;for(r in m)"undefined"==typeof s[r]&&(s[r]=m[r])}return a(e,l,u,c,d,i.current,s)},a.createFactory=function(e){var t=a.createElement.bind(null,e);return t.type=e,t},a.cloneAndReplaceKey=function(e,t){var n=a(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},a.cloneAndReplaceProps=function(e,t){var n=a(e.type,e.key,e.ref,e._self,e._source,e._owner,t);return n},a.cloneElement=function(e,t,n){var s,l=r({},e.props),u=e.key,c=e.ref,d=e._self,p=e._source,h=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,h=i.current),void 0!==t.key&&(u=""+t.key);for(s in t)t.hasOwnProperty(s)&&!o.hasOwnProperty(s)&&(l[s]=t[s])}var f=arguments.length-2;if(1===f)l.children=n;else if(f>1){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];l.children=m}return a(e.type,u,c,d,p,h,l)},a.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},e.exports=a},function(e,t,n){"use strict";var i=!1;e.exports=i},function(e,t){"use strict";function n(e){return!!s[e]}function i(e){s[e]=!0}function r(e){delete s[e]}var s={},o={isNullComponentID:n,registerNullComponentID:i,deregisterNullComponentID:r};e.exports=o},function(e,t,n){"use strict";function i(e){return h+e.toString(36)}function r(e,t){return e.charAt(t)===h||t===e.length}function s(e){return""===e||e.charAt(0)===h&&e.charAt(e.length-1)!==h}function o(e,t){return 0===t.indexOf(e)&&r(t,e.length)}function a(e){return e?e.substr(0,e.lastIndexOf(h)):""}function l(e,t){if(s(e)&&s(t)?void 0:p(!1),o(e,t)?void 0:p(!1),e===t)return e;var n,i=e.length+f;for(n=i;n<t.length&&!r(t,n);n++);return t.substr(0,n)}function u(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var i=0,o=0;o<=n;o++)if(r(e,o)&&r(t,o))i=o;else if(e.charAt(o)!==t.charAt(o))break;var a=e.substr(0,i);return s(a)?void 0:p(!1),a}function c(e,t,n,i,r,s){e=e||"",t=t||"",e===t?p(!1):void 0;var u=o(t,e);u||o(e,t)?void 0:p(!1);for(var c=0,d=u?a:l,h=e;;h=d(h,t)){var f;if(r&&h===e||s&&h===t||(f=n(h,u,i)),f===!1||h===t)break;c++<m?void 0:p(!1)}}var d=n(216),p=n(183),h=".",f=h.length,m=1e4,g={createReactRootID:function(){return i(d.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===h&&e.length>1){var t=e.indexOf(h,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,i,r){var s=u(e,t);s!==e&&c(e,s,n,i,!1,!0),s!==t&&c(s,t,n,r,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(c("",e,t,n,!0,!1),c(e,"",t,n,!1,!0))},traverseTwoPhaseSkipTarget:function(e,t,n){e&&(c("",e,t,n,!0,!0),c(e,"",t,n,!0,!0))},traverseAncestors:function(e,t,n){c("",e,t,n,!0,!1)},getFirstCommonAncestorID:u,_getNextDescendantID:l,isAncestorIDOf:o,SEPARATOR:h};e.exports=g},function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:n};e.exports=i},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";var i=n(219),r=/\/?>/,s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return e.replace(r," "+s.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(s.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=i(e);return r===n}};e.exports=s},function(e,t){"use strict";function n(e){for(var t=1,n=0,r=0,s=e.length,o=s&-4;r<o;){for(;r<Math.min(r+4096,o);r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=i,n%=i}for(;r<s;r++)n+=t+=e.charCodeAt(r);return t%=i,n%=i,t|n<<16}var i=65521;e.exports=n},function(e,t,n){"use strict";function i(){r.attachRefs(this,this._currentElement)}var r=n(221),s={mountComponent:function(e,t,n,r){var s=e.mountComponent(t,n,r);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e),s},unmountComponent:function(e){r.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,s){var o=e._currentElement;if(t!==o||s!==e._context){var a=r.shouldUpdateRefs(o,t);a&&r.detachRefs(e,o),e.receiveComponent(t,n,s),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};e.exports=s},function(e,t,n){"use strict";function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):s.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):s.removeComponentAsRefFrom(t,e,n)}var s=n(222),o={};o.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&i(n,e,t._owner)}},o.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,i=null===t||t===!1;return n||i||t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},e.exports=o},function(e,t,n){"use strict";var i=n(183),r={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r.isValidOwner(n)?void 0:i(!1),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r.isValidOwner(n)?void 0:i(!1),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};e.exports=r},function(e,t,n){"use strict";function i(e){a.enqueueUpdate(e)}function r(e,t){var n=o.get(e);return n?n:null}var s=(n(175),n(212)),o=n(217),a=n(224),l=n(209),u=n(183),c=(n(195),{isMounted:function(e){var t=o.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t){"function"!=typeof t?u(!1):void 0;var n=r(e);return n?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void i(n)):null},enqueueCallbackInternal:function(e,t){"function"!=typeof t?u(!1):void 0,e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=r(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t){var n=r(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,i(n))},enqueueSetState:function(e,t){var n=r(e,"setState");if(n){var s=n._pendingStateQueue||(n._pendingStateQueue=[]);s.push(t),i(n)}},enqueueSetProps:function(e,t){var n=r(e,"setProps");n&&c.enqueueSetPropsInternal(n,t)},enqueueSetPropsInternal:function(e,t){var n=e._topLevelWrapper;n?void 0:u(!1);var r=n._pendingElement||n._currentElement,o=r.props,a=l({},o.props,t);n._pendingElement=s.cloneAndReplaceProps(r,s.cloneAndReplaceProps(o,a)),i(n)},enqueueReplaceProps:function(e,t){var n=r(e,"replaceProps");n&&c.enqueueReplacePropsInternal(n,t)},enqueueReplacePropsInternal:function(e,t){var n=e._topLevelWrapper;n?void 0:u(!1);var r=n._pendingElement||n._currentElement,o=r.props;n._pendingElement=s.cloneAndReplaceProps(r,s.cloneAndReplaceProps(o,t)),i(n)},enqueueElementInternal:function(e,t){e._pendingElement=t,i(e)}});e.exports=c},function(e,t,n){"use strict";function i(){x.ReactReconcileTransaction&&w?void 0:g(!1)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=x.ReactReconcileTransaction.getPooled(!1)}function s(e,t,n,r,s,o){i(),w.batchedUpdates(e,t,n,r,s,o)}function o(e,t){return e._mountOrder-t._mountOrder}function a(e){var t=e.dirtyComponentsLength;t!==v.length?g(!1):void 0,v.sort(o);for(var n=0;n<t;n++){var i=v[n],r=i._pendingCallbacks;if(i._pendingCallbacks=null,h.performUpdateIfNecessary(i,e.reconcileTransaction),r)for(var s=0;s<r.length;s++)e.callbackQueue.enqueue(r[s],i.getPublicInstance())}}function l(e){return i(),w.isBatchingUpdates?void v.push(e):void w.batchedUpdates(l,e)}function u(e,t){w.isBatchingUpdates?void 0:g(!1),b.enqueue(e,t),y=!0}var c=n(225),d=n(226),p=n(188),h=n(220),f=n(227),m=n(209),g=n(183),v=[],b=c.getPooled(),y=!1,w=null,_={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),E()):v.length=0}},C={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},S=[_,C];m(r.prototype,f.Mixin,{getTransactionWrappers:function(){return S},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,x.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),d.addPoolingTo(r);var E=function(){for(;v.length||y;){if(v.length){var e=r.getPooled();e.perform(a,null,e),r.release(e)}if(y){y=!1;var t=b;b=c.getPooled(),t.notifyAll(),c.release(t)}}};E=p.measure("ReactUpdates","flushBatchedUpdates",E);var T={injectReconcileTransaction:function(e){e?void 0:g(!1),x.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:g(!1),"function"!=typeof e.batchedUpdates?g(!1):void 0,"boolean"!=typeof e.isBatchingUpdates?g(!1):void 0,w=e}},x={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:l,flushBatchedUpdates:E,injection:T,asap:u};e.exports=x},function(e,t,n){"use strict";function i(){this._callbacks=null,this._contexts=null}var r=n(226),s=n(209),o=n(183);s(i.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?o(!1):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";var i=n(183),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},o=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},a=function(e,t,n,i){var r=this;if(r.instancePool.length){var s=r.instancePool.pop();return r.call(s,e,t,n,i),s}return new r(e,t,n,i)},l=function(e,t,n,i,r){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,i,r),o}return new s(e,t,n,i,r)},u=function(e){var t=this;e instanceof t?void 0:i(!1),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,d=r,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||d,n.poolSize||(n.poolSize=c),n.release=u,n},h={addPoolingTo:p,oneArgumentPooler:r,twoArgumentPooler:s,threeArgumentPooler:o,fourArgumentPooler:a,fiveArgumentPooler:l};e.exports=h},function(e,t,n){"use strict";var i=n(183),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,s,o,a,l){this.isInTransaction()?i(!1):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,r,s,o,a,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(d){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(r){}}}},closeAll:function(e){this.isInTransaction()?void 0:i(!1);for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r,o=t[n],a=this.wrapperInitData[n];try{r=!0,a!==s.OBSERVED_ERROR&&o.close&&o.close.call(this,a),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}},s={Mixin:r,OBSERVED_ERROR:{}};e.exports=s},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";function i(e,t){var n=!0;e:for(;n;){var i=e,s=t;if(n=!1,i&&s){if(i===s)return!0;if(r(i))return!1;if(r(s)){e=i,t=s.parentNode,n=!0;continue e}return i.contains?i.contains(s):!!i.compareDocumentPosition&&!!(16&i.compareDocumentPosition(s))}return!1}}var r=n(230);e.exports=i},function(e,t,n){"use strict";function i(e){return r(e)&&3==e.nodeType}var r=n(231);e.exports=i},function(e,t){"use strict";function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t,n){"use strict";function i(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function r(e){var t;if(null===e||e===!1)t=new o(r);else if("object"==typeof e){var n=e;!n||"function"!=typeof n.type&&"string"!=typeof n.type?u(!1):void 0,t="string"==typeof n.type?a.createInternalComponent(n):i(n.type)?new n.type(n):new c}else"string"==typeof e||"number"==typeof e?t=a.createInstanceForText(e):u(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var s=n(233),o=n(238),a=n(239),l=n(209),u=n(183),c=(n(195),function(){});l(c.prototype,s.Mixin,{_instantiateReactComponent:r}),e.exports=r},function(e,t,n){"use strict";function i(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function r(e){}var s=n(234),o=n(175),a=n(212),l=n(217),u=n(188),c=n(235),d=(n(236),n(220)),p=n(223),h=n(209),f=n(228),m=n(183),g=n(237);n(195);r.prototype.render=function(){var e=l.get(this)._currentElement.type;return e(this.props,this.context,this.updater)};var v=1,b={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=v++,this._rootNodeID=e;var i,s,o=this._processProps(this._currentElement.props),u=this._processContext(n),c=this._currentElement.type,h="prototype"in c;h&&(i=new c(o,u,p)),h&&null!==i&&i!==!1&&!a.isValidElement(i)||(s=i,i=new r(c)),i.props=o,i.context=u,i.refs=f,i.updater=p,this._instance=i,l.set(i,this);var g=i.state;void 0===g&&(i.state=g=null),"object"!=typeof g||Array.isArray(g)?m(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===s&&(s=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(s);var b=d.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return i.componentDidMount&&t.getReactMountReady().enqueue(i.componentDidMount,i),b},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),d.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,l.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,i=n.contextTypes;if(!i)return f;t={};for(var r in i)t[r]=e[r];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,i=n.getChildContext&&n.getChildContext();if(i){"object"!=typeof t.childContextTypes?m(!1):void 0;for(var r in i)r in t.childContextTypes?void 0:m(!1);return h({},e,i)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var r=this.getName();for(var s in e)if(e.hasOwnProperty(s)){var o;try{"function"!=typeof e[s]?m(!1):void 0,o=e[s](t,s,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(a){o=a}if(o instanceof Error){i(this);n===c.prop}}},receiveComponent:function(e,t,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(t,i,e,r,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&d.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,i,r){var s,o=this._instance,a=this._context===r?o.context:this._processContext(r);t===n?s=n.props:(s=this._processProps(n.props),o.componentWillReceiveProps&&o.componentWillReceiveProps(s,a));var l=this._processPendingState(s,a),u=this._pendingForceUpdate||!o.shouldComponentUpdate||o.shouldComponentUpdate(s,l,a);u?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,s,l,a,e,r)):(this._currentElement=n,this._context=r,o.props=s,o.state=l,o.context=a)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(r&&1===i.length)return i[0];for(var s=h({},r?i[0]:n.state),o=r?1:0;o<i.length;o++){var a=i[o];h(s,"function"==typeof a?a.call(n,s,e,t):a)}return s},_performComponentUpdate:function(e,t,n,i,r,s){var o,a,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(o=u.props,a=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,n,i),this._currentElement=e,this._context=s,u.props=t,u.state=n,u.context=i,this._updateRenderedComponent(r,s),c&&r.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,o,a,l),u)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent();if(g(i,r))d.receiveComponent(n,r,e,this._processChildContext(t));else{var s=this._rootNodeID,o=n._rootNodeID;d.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(r);var a=d.mountComponent(this._renderedComponent,s,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(o,a)}},_replaceNodeWithMarkupByID:function(e,t){s.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;o.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{o.current=null}return null===e||e===!1||a.isValidElement(e)?void 0:m(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?m(!1):void 0;var i=t.getPublicInstance(),r=n.refs===f?n.refs={}:n.refs;r[e]=i},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof r?null:e},_instantiateReactComponent:null};u.measureMethods(b,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var y={Mixin:b};e.exports=y},function(e,t,n){"use strict";var i=n(183),r=!1,s={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r?i(!1):void 0,s.unmountIDFromEnvironment=e.unmountIDFromEnvironment,s.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,s.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};e.exports=s},function(e,t,n){"use strict";var i=n(187),r=i({prop:null,context:null,childContext:null});e.exports=r},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,i=null===t||t===!1;if(n||i)return n===i;var r=typeof e,s=typeof t;return"string"===r||"number"===r?"string"===s||"number"===s:"object"===s&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t,n){"use strict";function i(){o.registerNullComponentID(this._rootNodeID)}var r,s=n(212),o=n(214),a=n(220),l=n(209),u={injectEmptyComponent:function(e){r=s.createElement(e)}},c=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(r)};l(c.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(i,this),this._rootNodeID=e,a.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){a.unmountComponent(this._renderedComponent),o.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),c.injection=u,e.exports=c},function(e,t,n){"use strict";function i(e){if("function"==typeof e.type)return e.type;var t=e.type,n=d[t];return null==n&&(d[t]=n=u(t)),n}function r(e){return c?void 0:l(!1),new c(e.type,e.props)}function s(e){return new p(e)}function o(e){return e instanceof p}var a=n(209),l=n(183),u=null,c=null,d={},p=null,h={injectGenericComponentClass:function(e){c=e},injectTextComponentClass:function(e){p=e},injectComponentClasses:function(e){a(d,e)}},f={getComponentClassForElement:i,createInternalComponent:r,createInstanceForText:s,isTextComponent:o,injection:h};e.exports=f},function(e,t,n){"use strict";var i=(n(209),n(185)),r=(n(195),i);e.exports=r},function(e,t,n){"use strict";function i(){if(!T){T=!0,v.EventEmitter.injectReactEventListener(g),v.EventPluginHub.injectEventPluginOrder(a),v.EventPluginHub.injectInstanceHandle(b),v.EventPluginHub.injectMount(y),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:S,EnterLeaveEventPlugin:l,ChangeEventPlugin:s,SelectEventPlugin:_,BeforeInputEventPlugin:r}),v.NativeComponent.injectGenericComponentClass(f),v.NativeComponent.injectTextComponentClass(m),v.Class.injectMixin(d),v.DOMProperty.injectDOMPropertyConfig(c),v.DOMProperty.injectDOMPropertyConfig(E),v.EmptyComponent.injectEmptyComponent("noscript"),v.Updates.injectReconcileTransaction(w),v.Updates.injectBatchingStrategy(h),v.RootIndex.injectCreateReactRootIndex(u.canUseDOM?o.createReactRootIndex:C.createReactRootIndex),v.Component.injectEnvironment(p)}}var r=n(242),s=n(250),o=n(253),a=n(254),l=n(255),u=n(179),c=n(259),d=n(260),p=n(196),h=n(262),f=n(263),m=n(176),g=n(288),v=n(291),b=n(215),y=n(198),w=n(295),_=n(300),C=n(301),S=n(302),E=n(311),T=!1;e.exports={inject:i}},function(e,t,n){"use strict";function i(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function s(e){switch(e){case R.topCompositionStart:return D.compositionStart;case R.topCompositionEnd:return D.compositionEnd;case R.topCompositionUpdate:return D.compositionUpdate}}function o(e,t){return e===R.topKeyDown&&t.keyCode===_}function a(e,t){switch(e){case R.topKeyUp:return w.indexOf(t.keyCode)!==-1;case R.topKeyDown:return t.keyCode!==_;case R.topKeyPress:case R.topMouseDown:case R.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,i,r){var u,c;if(C?u=s(e):P?a(e,i)&&(u=D.compositionEnd):o(e,i)&&(u=D.compositionStart),!u)return null;T&&(P||u!==D.compositionStart?u===D.compositionEnd&&P&&(c=P.getData()):P=g.getPooled(t));var d=v.getPooled(u,n,i,r);if(c)d.data=c;else{var p=l(i);null!==p&&(d.data=p)}return f.accumulateTwoPhaseDispatches(d),d}function c(e,t){switch(e){case R.topCompositionEnd:return l(t);case R.topKeyPress:var n=t.which;return n!==x?null:(A=!0,k);case R.topTextInput:var i=t.data;return i===k&&A?null:i;default:return null}}function d(e,t){if(P){if(e===R.topCompositionEnd||a(e,t)){var n=P.getData();return g.release(P),P=null,n}return null}switch(e){case R.topPaste:return null;case R.topKeyPress:return t.which&&!r(t)?String.fromCharCode(t.which):null;case R.topCompositionEnd:return T?null:t.data;default:return null}}function p(e,t,n,i,r){var s;if(s=E?c(e,i):d(e,i),!s)return null;var o=b.getPooled(D.beforeInput,n,i,r);return o.data=s,f.accumulateTwoPhaseDispatches(o),o}var h=n(200),f=n(243),m=n(179),g=n(244),v=n(246),b=n(248),y=n(249),w=[9,13,27,32],_=229,C=m.canUseDOM&&"CompositionEvent"in window,S=null;m.canUseDOM&&"documentMode"in document&&(S=document.documentMode);var E=m.canUseDOM&&"TextEvent"in window&&!S&&!i(),T=m.canUseDOM&&(!C||S&&S>8&&S<=11),x=32,k=String.fromCharCode(x),R=h.topLevelTypes,D={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[R.topCompositionEnd,R.topKeyPress,R.topTextInput,R.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[R.topBlur,R.topCompositionEnd,R.topKeyDown,R.topKeyPress,R.topKeyUp,R.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[R.topBlur,R.topCompositionStart,R.topKeyDown,R.topKeyPress,R.topKeyUp,R.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[R.topBlur,R.topCompositionUpdate,R.topKeyDown,R.topKeyPress,R.topKeyUp,R.topMouseDown]}},A=!1,P=null,I={eventTypes:D,extractEvents:function(e,t,n,i,r){return[u(e,t,n,i,r),p(e,t,n,i,r)]}};e.exports=I},function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return b(e,i)}function r(e,t,n){var r=t?v.bubbled:v.captured,s=i(e,n,r);s&&(n._dispatchListeners=m(n._dispatchListeners,s),n._dispatchIDs=m(n._dispatchIDs,e))}function s(e){e&&e.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,r,e)}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,r,e)}function a(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=b(e,i);r&&(n._dispatchListeners=m(n._dispatchListeners,r),n._dispatchIDs=m(n._dispatchIDs,e))}}function l(e){e&&e.dispatchConfig.registrationName&&a(e.dispatchMarker,null,e)}function u(e){g(e,s)}function c(e){g(e,o)}function d(e,t,n,i){f.injection.getInstanceHandle().traverseEnterLeave(n,i,a,e,t)}function p(e){g(e,l)}var h=n(200),f=n(201),m=(n(195),n(205)),g=n(206),v=h.PropagationPhases,b=f.getListener,y={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:d};e.exports=y},function(e,t,n){"use strict";function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=n(226),s=n(209),o=n(245);s(i.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,r=this.getText(),s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);var a=t>1?1-t:void 0;return this._fallbackText=r.slice(e,a),this._fallbackText}}),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(){return!s&&r.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var r=n(179),s=null;e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(247),s={data:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a?this[s]=a(n):"target"===s?this.target=i:this[s]=n[s]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;l?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var r=n(226),s=n(209),o=n(185),a=(n(195),{type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null});s(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),i.Interface=a,i.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);s(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=s({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.fourArgumentPooler)},r.addPoolingTo(i,r.fourArgumentPooler),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(247),s={data:null};r.augmentClass(i,s),e.exports=i},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";function i(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function r(e){var t=S.getPooled(D.change,P,e,E(e));w.accumulateTwoPhaseDispatches(t),C.batchedUpdates(s,t)}function s(e){y.enqueueEvents(e),y.processEventQueue(!1)}function o(e,t){A=e,P=t,A.attachEvent("onchange",r)}function a(){A&&(A.detachEvent("onchange",r),A=null,P=null)}function l(e,t,n){if(e===R.topChange)return n}function u(e,t,n){e===R.topFocus?(a(),o(t,n)):e===R.topBlur&&a()}function c(e,t){A=e,P=t,I=e.value,M=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(A,"value",L),A.attachEvent("onpropertychange",p)}function d(){A&&(delete A.value,A.detachEvent("onpropertychange",p),A=null,P=null,I=null,M=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==I&&(I=t,r(e))}}function h(e,t,n){if(e===R.topInput)return n}function f(e,t,n){e===R.topFocus?(d(),c(t,n)):e===R.topBlur&&d()}function m(e,t,n){if((e===R.topSelectionChange||e===R.topKeyUp||e===R.topKeyDown)&&A&&A.value!==I)return I=A.value,P}function g(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type);
}function v(e,t,n){if(e===R.topClick)return n}var b=n(200),y=n(201),w=n(243),_=n(179),C=n(224),S=n(247),E=n(251),T=n(210),x=n(252),k=n(249),R=b.topLevelTypes,D={change:{phasedRegistrationNames:{bubbled:k({onChange:null}),captured:k({onChangeCapture:null})},dependencies:[R.topBlur,R.topChange,R.topClick,R.topFocus,R.topInput,R.topKeyDown,R.topKeyUp,R.topSelectionChange]}},A=null,P=null,I=null,M=null,O=!1;_.canUseDOM&&(O=T("change")&&(!("documentMode"in document)||document.documentMode>8));var N=!1;_.canUseDOM&&(N=T("input")&&(!("documentMode"in document)||document.documentMode>9));var L={get:function(){return M.get.call(this)},set:function(e){I=""+e,M.set.call(this,e)}},F={eventTypes:D,extractEvents:function(e,t,n,r,s){var o,a;if(i(t)?O?o=l:a=u:x(t)?N?o=h:(o=m,a=f):g(t)&&(o=v),o){var c=o(e,t,n);if(c){var d=S.getPooled(D.change,c,r,s);return d.type="change",w.accumulateTwoPhaseDispatches(d),d}}a&&a(e,t,n)}};e.exports=F},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&i[e.type]||"textarea"===t)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t){"use strict";var n=0,i={createReactRootIndex:function(){return n++}};e.exports=i},function(e,t,n){"use strict";var i=n(249),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];e.exports=r},function(e,t,n){"use strict";var i=n(200),r=n(243),s=n(256),o=n(198),a=n(249),l=i.topLevelTypes,u=o.getFirstReactDOM,c={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},d=[null,null],p={eventTypes:c,extractEvents:function(e,t,n,i,a){if(e===l.topMouseOver&&(i.relatedTarget||i.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var p;if(t.window===t)p=t;else{var h=t.ownerDocument;p=h?h.defaultView||h.parentWindow:window}var f,m,g="",v="";if(e===l.topMouseOut?(f=t,g=n,m=u(i.relatedTarget||i.toElement),m?v=o.getID(m):m=p,m=m||p):(f=p,m=t,v=n),f===m)return null;var b=s.getPooled(c.mouseLeave,g,i,a);b.type="mouseleave",b.target=f,b.relatedTarget=m;var y=s.getPooled(c.mouseEnter,v,i,a);return y.type="mouseenter",y.target=m,y.relatedTarget=f,r.accumulateEnterLeaveDispatches(b,y,g,v),d[0]=b,d[1]=y,d}};e.exports=p},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(257),s=n(208),o=n(258),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+s.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+s.currentScrollTop}};r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(247),s=n(251),o={view:function(e){if(e.view)return e.view;var t=s(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,o),e.exports=i},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=r[e];return!!i&&!!n[i]}function i(e){return n}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=i},function(e,t,n){"use strict";var i,r=n(193),s=n(179),o=r.injection.MUST_USE_ATTRIBUTE,a=r.injection.MUST_USE_PROPERTY,l=r.injection.HAS_BOOLEAN_VALUE,u=r.injection.HAS_SIDE_EFFECTS,c=r.injection.HAS_NUMERIC_VALUE,d=r.injection.HAS_POSITIVE_NUMERIC_VALUE,p=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(s.canUseDOM){var h=document.implementation;i=h&&h.hasFeature&&h.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|l,allowTransparency:o,alt:null,async:l,autoComplete:null,autoPlay:l,capture:o|l,cellPadding:null,cellSpacing:null,charSet:o,challenge:o,checked:a|l,classID:o,className:i?o:a,cols:o|d,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:a|l,coords:null,crossOrigin:null,data:null,dateTime:o,"default":l,defer:l,dir:null,disabled:o|l,download:p,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:l,formTarget:o,frameBorder:o,headers:null,height:o,hidden:o|l,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,inputMode:o,integrity:null,is:o,keyParams:o,keyType:o,kind:null,label:null,lang:null,list:o,loop:a|l,low:null,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,minLength:o,multiple:a|l,muted:a|l,name:null,nonce:o,noValidate:l,open:l,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|l,rel:null,required:l,reversed:l,role:o,rows:o|d,rowSpan:null,sandbox:null,scope:null,scoped:l,scrolling:null,seamless:o|l,selected:a|l,shape:null,size:o|d,sizes:o,span:d,spellCheck:null,src:null,srcDoc:a,srcLang:null,srcSet:o,start:c,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|u,width:o,wmode:o,wrap:null,about:o,datatype:o,inlist:o,prefix:o,property:o,resource:o,"typeof":o,vocab:o,autoCapitalize:o,autoCorrect:o,autoSave:null,color:null,itemProp:o,itemScope:o|l,itemType:o,itemID:o,itemRef:o,results:null,security:o,unselectable:o},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=f},function(e,t,n){"use strict";var i=(n(217),n(261)),r=(n(195),"_getDOMNodeDidWarn"),s={getDOMNode:function(){return this.constructor[r]=!0,i(this)}};e.exports=s},function(e,t,n){"use strict";function i(e){return null==e?null:1===e.nodeType?e:r.has(e)?s.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render?o(!1):void 0,void o(!1))}var r=(n(175),n(217)),s=n(198),o=n(183);n(195);e.exports=i},function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var r=n(224),s=n(227),o=n(209),a=n(185),l={initialize:a,close:function(){p.isBatchingUpdates=!1}},u={initialize:a,close:r.flushBatchedUpdates.bind(r)},c=[u,l];o(i.prototype,s.Mixin,{getTransactionWrappers:function(){return c}});var d=new i,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,r,s){var o=p.isBatchingUpdates;p.isBatchingUpdates=!0,o?e(t,n,i,r,s):d.perform(e,null,t,n,i,r,s)}};e.exports=p},function(e,t,n){"use strict";function i(){return this}function r(){var e=this._reactInternalComponent;return!!e}function s(){}function o(e,t){var n=this._reactInternalComponent;n&&(I.enqueueSetPropsInternal(n,e),t&&I.enqueueCallbackInternal(n,t))}function a(e,t){var n=this._reactInternalComponent;n&&(I.enqueueReplacePropsInternal(n,e),t&&I.enqueueCallbackInternal(n,t))}function l(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children?L(!1):void 0,"object"==typeof t.dangerouslySetInnerHTML&&z in t.dangerouslySetInnerHTML?void 0:L(!1)),null!=t.style&&"object"!=typeof t.style?L(!1):void 0)}function u(e,t,n,i){var r=D.findReactContainerForID(e);if(r){var s=r.nodeType===K?r.ownerDocument:r;j(t,s)}i.getReactMountReady().enqueue(c,{id:e,registrationName:t,listener:n})}function c(){var e=this;C.putListener(e.id,e.registrationName,e.listener)}function d(){var e=this;e._rootNodeID?void 0:L(!1);var t=D.getNode(e._rootNodeID);switch(t?void 0:L(!1),e._tag){case"iframe":e._wrapperState.listeners=[C.trapBubbledEvent(_.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&e._wrapperState.listeners.push(C.trapBubbledEvent(_.topLevelTypes[n],Y[n],t));break;case"img":e._wrapperState.listeners=[C.trapBubbledEvent(_.topLevelTypes.topError,"error",t),C.trapBubbledEvent(_.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[C.trapBubbledEvent(_.topLevelTypes.topReset,"reset",t),C.trapBubbledEvent(_.topLevelTypes.topSubmit,"submit",t)]}}function p(){T.mountReadyWrapper(this)}function h(){k.postUpdateWrapper(this)}function f(e){Z.call(J,e)||($.test(e)?void 0:L(!1),J[e]=!0)}function m(e,t){return e.indexOf("-")>=0||null!=t.is}function g(e){f(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var v=n(264),b=n(266),y=n(193),w=n(192),_=n(200),C=n(199),S=n(196),E=n(274),T=n(275),x=n(279),k=n(282),R=n(283),D=n(198),A=n(284),P=n(188),I=n(223),M=n(209),O=n(213),N=n(191),L=n(183),F=(n(210),n(249)),V=n(189),B=n(190),U=(n(287),n(240),n(195),C.deleteListener),j=C.listenTo,H=C.registrationNameModules,G={string:!0,number:!0},q=F({children:null}),W=F({style:null}),z=F({__html:null}),K=1,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},X={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Q={listing:!0,pre:!0,textarea:!0},$=(M({menuitem:!0},X),/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/),J={},Z={}.hasOwnProperty;g.displayName="ReactDOMComponent",g.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e;var i=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(d,this);break;case"button":i=E.getNativeProps(this,i,n);break;case"input":T.mountWrapper(this,i,n),i=T.getNativeProps(this,i,n);break;case"option":x.mountWrapper(this,i,n),i=x.getNativeProps(this,i,n);break;case"select":k.mountWrapper(this,i,n),i=k.getNativeProps(this,i,n),n=k.processChildContext(this,i,n);break;case"textarea":R.mountWrapper(this,i,n),i=R.getNativeProps(this,i,n)}l(this,i);var r;if(t.useCreateElement){var s=n[D.ownerDocumentContextKey],o=s.createElement(this._currentElement.type);w.setAttributeForID(o,this._rootNodeID),D.getID(o),this._updateDOMProperties({},i,t,o),this._createInitialChildren(t,i,n,o),r=o}else{var a=this._createOpenTagMarkupAndPutListeners(t,i),u=this._createContentMarkup(t,i,n);r=!u&&X[this._tag]?a+"/>":a+">"+u+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(p,this);case"button":case"select":case"textarea":i.autoFocus&&t.getReactMountReady().enqueue(v.focusDOMComponent,this)}return r},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(null!=r)if(H.hasOwnProperty(i))r&&u(this._rootNodeID,i,r,e);else{i===W&&(r&&(r=this._previousStyleCopy=M({},t.style)),r=b.createMarkupForStyles(r));var s=null;null!=this._tag&&m(this._tag,t)?i!==q&&(s=w.createMarkupForCustomAttribute(i,r)):s=w.createMarkupForProperty(i,r),s&&(n+=" "+s)}}if(e.renderToStaticMarkup)return n;var o=w.createMarkupForID(this._rootNodeID);return n+" "+o},_createContentMarkup:function(e,t,n){var i="",r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var s=G[typeof t.children]?t.children:null,o=null!=s?null:t.children;if(null!=s)i=N(s);else if(null!=o){var a=this.mountChildren(o,e,n);i=a.join("")}}return Q[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(e,t,n,i){var r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&V(i,r.__html);else{var s=G[typeof t.children]?t.children:null,o=null!=s?null:t.children;if(null!=s)B(i,s);else if(null!=o)for(var a=this.mountChildren(o,e,n),l=0;l<a.length;l++)i.appendChild(a[l])}},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,i){var r=t.props,s=this._currentElement.props;switch(this._tag){case"button":r=E.getNativeProps(this,r),s=E.getNativeProps(this,s);break;case"input":T.updateWrapper(this),r=T.getNativeProps(this,r),s=T.getNativeProps(this,s);break;case"option":r=x.getNativeProps(this,r),s=x.getNativeProps(this,s);break;case"select":r=k.getNativeProps(this,r),s=k.getNativeProps(this,s);break;case"textarea":R.updateWrapper(this),r=R.getNativeProps(this,r),s=R.getNativeProps(this,s)}l(this,s),this._updateDOMProperties(r,s,e,null),this._updateDOMChildren(r,s,e,i),!O&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=s),"select"===this._tag&&e.getReactMountReady().enqueue(h,this)},_updateDOMProperties:function(e,t,n,i){var r,s,o;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r))if(r===W){var a=this._previousStyleCopy;for(s in a)a.hasOwnProperty(s)&&(o=o||{},o[s]="");this._previousStyleCopy=null}else H.hasOwnProperty(r)?e[r]&&U(this._rootNodeID,r):(y.properties[r]||y.isCustomAttribute(r))&&(i||(i=D.getNode(this._rootNodeID)),w.deleteValueForProperty(i,r));for(r in t){var l=t[r],c=r===W?this._previousStyleCopy:e[r];if(t.hasOwnProperty(r)&&l!==c)if(r===W)if(l?l=this._previousStyleCopy=M({},l):this._previousStyleCopy=null,c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(o=o||{},o[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(o=o||{},o[s]=l[s])}else o=l;else H.hasOwnProperty(r)?l?u(this._rootNodeID,r,l,n):c&&U(this._rootNodeID,r):m(this._tag,t)?(i||(i=D.getNode(this._rootNodeID)),r===q&&(l=null),w.setValueForAttribute(i,r,l)):(y.properties[r]||y.isCustomAttribute(r))&&(i||(i=D.getNode(this._rootNodeID)),null!=l?w.setValueForProperty(i,r,l):w.deleteValueForProperty(i,r))}o&&(i||(i=D.getNode(this._rootNodeID)),b.setValueForStyles(i,o))},_updateDOMChildren:function(e,t,n,i){var r=G[typeof e.children]?e.children:null,s=G[typeof t.children]?t.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=r?null:e.children,u=null!=s?null:t.children,c=null!=r||null!=o,d=null!=s||null!=a;null!=l&&null==u?this.updateChildren(null,n,i):c&&!d&&this.updateTextContent(""),null!=s?r!==s&&this.updateTextContent(""+s):null!=a?o!==a&&this.updateMarkup(""+a):null!=u&&this.updateChildren(u,n,i)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":T.unmountWrapper(this);break;case"html":case"head":case"body":L(!1)}if(this.unmountChildren(),C.deleteAllListeners(this._rootNodeID),S.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var n=this._nodeWithLegacyProperties;n._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=D.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=i,e.isMounted=r,e.setState=s,e.replaceState=s,e.forceUpdate=s,e.setProps=o,e.replaceProps=a,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},P.measureMethods(g,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),M(g.prototype,g.Mixin,A.Mixin),e.exports=g},function(e,t,n){"use strict";var i=n(198),r=n(261),s=n(265),o={componentDidMount:function(){this.props.autoFocus&&s(r(this))}},a={Mixin:o,focusDOMComponent:function(){s(i.getNode(this._rootNodeID))}};e.exports=a},function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}e.exports=n},function(e,t,n){"use strict";var i=n(267),r=n(179),s=n(188),o=(n(268),n(270)),a=n(271),l=n(273),u=(n(195),l(function(e){return a(e)})),c=!1,d="cssFloat";if(r.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(h){c=!0}void 0===document.documentElement.style.cssFloat&&(d="styleFloat")}var f={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(t+=u(n)+":",t+=o(n,i)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=o(r,t[r]);if("float"===r&&(r=d),s)n[r]=s;else{var a=c&&i.shorthandPropertyExpansions[r];if(a)for(var l in a)n[l]="";else n[r]=""}}}};s.measureMethods(f,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),e.exports=f},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){r.forEach(function(t){i[n(t,e)]=i[e]})});var s={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},o={isUnitlessNumber:i,shorthandPropertyExpansions:s};e.exports=o},function(e,t,n){"use strict";function i(e){return r(e.replace(s,"ms-"))}var r=n(269),s=/^-ms-/;e.exports=i},function(e,t){"use strict";function n(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function i(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var i=isNaN(t);return i||0===t||s.hasOwnProperty(e)&&s[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=n(267),s=r.isUnitlessNumber;e.exports=i},function(e,t,n){"use strict";function i(e){return r(e).replace(s,"-ms-")}var r=n(272),s=/^ms-/;e.exports=i},function(e,t){"use strict";function n(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},i={getNativeProps:function(e,t,i){if(!t.disabled)return t;var r={};for(var s in t)t.hasOwnProperty(s)&&!n[s]&&(r[s]=t[s]);return r}};e.exports=i},function(e,t,n){"use strict";function i(){this._rootNodeID&&p.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=o.executeOnChange(t,e);l.asap(i,this);var r=t.name;if("radio"===t.type&&null!=r){for(var s=a.getNode(this._rootNodeID),u=s;u.parentNode;)u=u.parentNode;for(var p=u.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),h=0;h<p.length;h++){var f=p[h];if(f!==s&&f.form===s.form){var m=a.getID(f);m?void 0:c(!1);var g=d[m];g?void 0:c(!1),l.asap(i,g)}}}return n}var s=n(197),o=n(276),a=n(198),l=n(224),u=n(209),c=n(183),d={},p={getNativeProps:function(e,t,n){var i=o.getValue(t),r=o.getChecked(t),s=u({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=i?i:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return s},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=n?n:null,onChange:r.bind(e)}},mountReadyWrapper:function(e){d[e._rootNodeID]=e},unmountWrapper:function(e){delete d[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&s.updatePropertyByID(e._rootNodeID,"checked",n||!1);var i=o.getValue(t);null!=i&&s.updatePropertyByID(e._rootNodeID,"value",""+i)}};e.exports=p},function(e,t,n){"use strict";function i(e){null!=e.checkedLink&&null!=e.valueLink?u(!1):void 0}function r(e){i(e),null!=e.value||null!=e.onChange?u(!1):void 0}function s(e){i(e),null!=e.checked||null!=e.onChange?u(!1):void 0}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var a=n(277),l=n(235),u=n(183),c=(n(195),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),d={value:function(e,t,n){return!e[t]||c[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:a.func},p={},h={checkPropTypes:function(e,t,n){for(var i in d){if(d.hasOwnProperty(i))var r=d[i](t,i,e,l.prop,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(r instanceof Error&&!(r.message in p)){p[r.message]=!0;o(n)}}},getValue:function(e){return e.valueLink?(r(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(s(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(r(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(s(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=h},function(e,t,n){"use strict";function i(e){function t(t,n,i,r,s,o){if(r=r||C,o=o||i,null==n[i]){var a=y[s];return t?new Error("Required "+a+" `"+o+"` was not specified in "+("`"+r+"`.")):null}return e(n,i,r,s,o)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,i,r,s){var o=t[n],a=m(o);if(a!==e){var l=y[r],u=g(o);return new Error("Invalid "+l+" `"+s+"` of type "+("`"+u+"` supplied to `"+i+"`, expected ")+("`"+e+"`."))}return null}return i(t)}function s(){return i(w.thatReturns(null))}function o(e){function t(t,n,i,r,s){var o=t[n];if(!Array.isArray(o)){var a=y[r],l=m(o);return new Error("Invalid "+a+" `"+s+"` of type "+("`"+l+"` supplied to `"+i+"`, expected an array."))}for(var u=0;u<o.length;u++){var c=e(o,u,i,r,s+"["+u+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(c instanceof Error)return c}return null}return i(t)}function a(){function e(e,t,n,i,r){if(!b.isValidElement(e[t])){var s=y[i];return new Error("Invalid "+s+" `"+r+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return i(e)}function l(e){function t(t,n,i,r,s){if(!(t[n]instanceof e)){var o=y[r],a=e.name||C,l=v(t[n]);return new Error("Invalid "+o+" `"+s+"` of type "+("`"+l+"` supplied to `"+i+"`, expected ")+("instance of `"+a+"`."))}return null}return i(t)}function u(e){function t(t,n,i,r,s){for(var o=t[n],a=0;a<e.length;a++)if(o===e[a])return null;var l=y[r],u=JSON.stringify(e);return new Error("Invalid "+l+" `"+s+"` of value `"+o+"` "+("supplied to `"+i+"`, expected one of "+u+"."))}return i(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function c(e){function t(t,n,i,r,s){var o=t[n],a=m(o);if("object"!==a){var l=y[r];return new Error("Invalid "+l+" `"+s+"` of type "+("`"+a+"` supplied to `"+i+"`, expected an object."))}for(var u in o)if(o.hasOwnProperty(u)){var c=e(o,u,i,r,s+"."+u,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(c instanceof Error)return c}return null}return i(t)}function d(e){function t(t,n,i,r,s){for(var o=0;o<e.length;o++){var a=e[o];if(null==a(t,n,i,r,s,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null}var l=y[r];return new Error("Invalid "+l+" `"+s+"` supplied to "+("`"+i+"`."))}return i(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function e(e,t,n,i,r){if(!f(e[t])){var s=y[i];return new Error("Invalid "+s+" `"+r+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return i(e)}function h(e){function t(t,n,i,r,s){var o=t[n],a=m(o);if("object"!==a){var l=y[r];return new Error("Invalid "+l+" `"+s+"` of type `"+a+"` "+("supplied to `"+i+"`, expected `object`."))}for(var u in e){var c=e[u];if(c){var d=c(o,u,i,r,s+"."+u,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(d)return d}}return null}return i(t)}function f(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(f);if(null===e||b.isValidElement(e))return!0;var t=_(e);if(!t)return!1;var n,i=t.call(e);if(t!==e.entries){for(;!(n=i.next()).done;)if(!f(n.value))return!1}else for(;!(n=i.next()).done;){var r=n.value;if(r&&!f(r[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var b=n(212),y=n(236),w=n(185),_=n(278),C="<<anonymous>>",S={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:s(),arrayOf:o,element:a(),instanceOf:l,node:p(),objectOf:c,oneOf:u,oneOfType:d,shape:h};e.exports=S},function(e,t){"use strict";function n(e){var t=e&&(i&&e[i]||e[r]);if("function"==typeof t)return t}var i="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";e.exports=n},function(e,t,n){"use strict";var i=n(280),r=n(282),s=n(209),o=(n(195),r.valueContextKey),a={mountWrapper:function(e,t,n){var i=n[o],r=null;if(null!=i)if(r=!1,Array.isArray(i)){for(var s=0;s<i.length;s++)if(""+i[s]==""+t.value){r=!0;break}}else r=""+i==""+t.value;e._wrapperState={selected:r}},getNativeProps:function(e,t,n){var r=s({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(r.selected=e._wrapperState.selected);var o="";return i.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(o+=e))}),o&&(r.children=o),r}};e.exports=a},function(e,t,n){"use strict";function i(e){return(""+e).replace(w,"//")}function r(e,t){this.func=e,this.context=t,this.count=0}function s(e,t,n){var i=e.func,r=e.context;i.call(r,t,e.count++)}function o(e,t,n){if(null==e)return e;var i=r.getPooled(t,n);v(e,s,i),r.release(i)}function a(e,t,n,i){this.result=e,this.keyPrefix=t,this.func=n,this.context=i,this.count=0}function l(e,t,n){var r=e.result,s=e.keyPrefix,o=e.func,a=e.context,l=o.call(a,t,e.count++);Array.isArray(l)?u(l,r,n,g.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,s+(l!==t?i(l.key||"")+"/":"")+n)),r.push(l))}function u(e,t,n,r,s){var o="";null!=n&&(o=i(n)+"/");var u=a.getPooled(t,o,r,s);v(e,l,u),a.release(u)}function c(e,t,n){if(null==e)return e;var i=[];return u(e,i,null,t,n),i}function d(e,t,n){return null}function p(e,t){return v(e,d,null)}function h(e){var t=[];return u(e,t,null,g.thatReturnsArgument),t}var f=n(226),m=n(212),g=n(185),v=n(281),b=f.twoArgumentPooler,y=f.fourArgumentPooler,w=/\/(?!\/)/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(r,b),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(a,y);var _={forEach:o,map:c,mapIntoWithKeyPrefixInternal:u,count:p,toArray:h};e.exports=_},function(e,t,n){"use strict";function i(e){return m[e]}function r(e,t){return e&&null!=e.key?o(e.key):t.toString(36)}function s(e){return(""+e).replace(g,i)}function o(e){return"$"+s(e)}function a(e,t,n,i){var s=typeof e;if("undefined"!==s&&"boolean"!==s||(e=null),null===e||"string"===s||"number"===s||u.isValidElement(e))return n(i,e,""===t?h+r(e,0):t),1;var l,c,m=0,g=""===t?h:t+f;if(Array.isArray(e))for(var v=0;v<e.length;v++)l=e[v],c=g+r(l,v),m+=a(l,c,n,i);else{var b=d(e);if(b){var y,w=b.call(e);if(b!==e.entries)for(var _=0;!(y=w.next()).done;)l=y.value,c=g+r(l,_++),m+=a(l,c,n,i);else for(;!(y=w.next()).done;){var C=y.value;C&&(l=C[1],c=g+o(C[0])+f+r(l,0),m+=a(l,c,n,i))}}else if("object"===s){String(e);p(!1)}}return m}function l(e,t,n){return null==e?0:a(e,"",t,n)}var u=(n(175),n(212)),c=n(215),d=n(278),p=n(183),h=(n(195),c.SEPARATOR),f=":",m={"=":"=0",".":"=1",":":"=2"},g=/[=.:]/g;e.exports=l},function(e,t,n){"use strict";function i(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=o.getValue(e);null!=t&&r(this,Boolean(e.multiple),t)}}function r(e,t,n){var i,r,s=a.getNode(e._rootNodeID).options;if(t){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<s.length;r++){var o=i.hasOwnProperty(s[r].value);s[r].selected!==o&&(s[r].selected=o)}}else{for(i=""+n,r=0;r<s.length;r++)if(s[r].value===i)return void(s[r].selected=!0);s.length&&(s[0].selected=!0)}}function s(e){var t=this._currentElement.props,n=o.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,l.asap(i,this),n}var o=n(276),a=n(198),l=n(224),u=n(209),c=(n(195),"__ReactDOMSelect_value$"+Math.random().toString(36).slice(2)),d={valueContextKey:c,getNativeProps:function(e,t,n){return u({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=o.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,onChange:s.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,n){var i=u({},n);return i[c]=e._wrapperState.initialValue,i},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=o.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,r(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?r(e,Boolean(t.multiple),t.defaultValue):r(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=d},function(e,t,n){"use strict";function i(){this._rootNodeID&&c.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return a.asap(i,this),n}var s=n(276),o=n(197),a=n(224),l=n(209),u=n(183),c=(n(195),{getNativeProps:function(e,t,n){null!=t.dangerouslySetInnerHTML?u(!1):void 0;var i=l({},t,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,t){var n=t.defaultValue,i=t.children;null!=i&&(null!=n?u(!1):void 0,Array.isArray(i)&&(i.length<=1?void 0:u(!1),
i=i[0]),n=""+i),null==n&&(n="");var o=s.getValue(t);e._wrapperState={initialValue:""+(null!=o?o:n),onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=s.getValue(t);null!=n&&o.updatePropertyByID(e._rootNodeID,"value",""+n)}});e.exports=c},function(e,t,n){"use strict";function i(e,t,n){g.push({parentID:e,parentNode:null,type:d.INSERT_MARKUP,markupIndex:v.push(t)-1,content:null,fromIndex:null,toIndex:n})}function r(e,t,n){g.push({parentID:e,parentNode:null,type:d.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:t,toIndex:n})}function s(e,t){g.push({parentID:e,parentNode:null,type:d.REMOVE_NODE,markupIndex:null,content:null,fromIndex:t,toIndex:null})}function o(e,t){g.push({parentID:e,parentNode:null,type:d.SET_MARKUP,markupIndex:null,content:t,fromIndex:null,toIndex:null})}function a(e,t){g.push({parentID:e,parentNode:null,type:d.TEXT_CONTENT,markupIndex:null,content:t,fromIndex:null,toIndex:null})}function l(){g.length&&(c.processChildrenUpdates(g,v),u())}function u(){g.length=0,v.length=0}var c=n(234),d=n(186),p=(n(175),n(220)),h=n(285),f=n(286),m=0,g=[],v=[],b={Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return h.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,i){var r;return r=f(t),h.updateChildren(e,r,n,i)},mountChildren:function(e,t,n){var i=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=i;var r=[],s=0;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o],l=this._rootNodeID+o,u=p.mountComponent(a,l,t,n);a._mountIndex=s++,r.push(u)}return r},updateTextContent:function(e){m++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var i in n)n.hasOwnProperty(i)&&this._unmountChild(n[i]);this.setTextContent(e),t=!1}finally{m--,m||(t?u():l())}},updateMarkup:function(e){m++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var i in n)n.hasOwnProperty(i)&&this._unmountChildByName(n[i],i);this.setMarkup(e),t=!1}finally{m--,m||(t?u():l())}},updateChildren:function(e,t,n){m++;var i=!0;try{this._updateChildren(e,t,n),i=!1}finally{m--,m||(i?u():l())}},_updateChildren:function(e,t,n){var i=this._renderedChildren,r=this._reconcilerUpdateChildren(i,e,t,n);if(this._renderedChildren=r,r||i){var s,o=0,a=0;for(s in r)if(r.hasOwnProperty(s)){var l=i&&i[s],u=r[s];l===u?(this.moveChild(l,a,o),o=Math.max(l._mountIndex,o),l._mountIndex=a):(l&&(o=Math.max(l._mountIndex,o),this._unmountChild(l)),this._mountChildByNameAtIndex(u,s,a,t,n)),a++}for(s in i)!i.hasOwnProperty(s)||r&&r.hasOwnProperty(s)||this._unmountChild(i[s])}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){i(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){s(this._rootNodeID,e._mountIndex)},setTextContent:function(e){a(this._rootNodeID,e)},setMarkup:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,i,r){var s=this._rootNodeID+t,o=p.mountComponent(e,s,i,r);e._mountIndex=n,this.createChild(e,o)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};e.exports=b},function(e,t,n){"use strict";function i(e,t,n){var i=void 0===e[n];null!=t&&i&&(e[n]=s(t,null))}var r=n(220),s=n(232),o=n(237),a=n(281),l=(n(195),{instantiateChildren:function(e,t,n){if(null==e)return null;var r={};return a(e,i,r),r},updateChildren:function(e,t,n,i){if(!t&&!e)return null;var a;for(a in t)if(t.hasOwnProperty(a)){var l=e&&e[a],u=l&&l._currentElement,c=t[a];if(null!=l&&o(u,c))r.receiveComponent(l,c,n,i),t[a]=l;else{l&&r.unmountComponent(l,a);var d=s(c,null);t[a]=d}}for(a in e)!e.hasOwnProperty(a)||t&&t.hasOwnProperty(a)||r.unmountComponent(e[a]);return t},unmountChildren:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];r.unmountComponent(n)}}});e.exports=l},function(e,t,n){"use strict";function i(e,t,n){var i=e,r=void 0===i[n];r&&null!=t&&(i[n]=t)}function r(e){if(null==e)return e;var t={};return s(e,i,t),t}var s=n(281);n(195);e.exports=r},function(e,t){"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var s=i.bind(t),o=0;o<n.length;o++)if(!s(n[o])||e[n[o]]!==t[n[o]])return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=n},function(e,t,n){"use strict";function i(e){var t=p.getID(e),n=d.getReactRootIDFromNodeID(t),i=p.findReactContainerForID(n),r=p.getFirstReactDOM(i);return r}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function s(e){o(e)}function o(e){for(var t=p.getFirstReactDOM(m(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=i(n);for(var r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var s=p.getID(t)||"";v._handleTopLevel(e.topLevelType,t,s,e.nativeEvent,m(e.nativeEvent))}}function a(e){var t=g(window);e(t)}var l=n(289),u=n(179),c=n(226),d=n(215),p=n(198),h=n(224),f=n(209),m=n(251),g=n(290);f(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){v._handleTopLevel=e},setEnabled:function(e){v._enabled=!!e},isEnabled:function(){return v._enabled},trapBubbledEvent:function(e,t,n){var i=n;return i?l.listen(i,t,v.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var i=n;return i?l.capture(i,t,v.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(v._enabled){var n=r.getPooled(e,t);try{h.batchedUpdates(s,n)}finally{r.release(n)}}}};e.exports=v},function(e,t,n){"use strict";var i=n(185),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:i}},registerDefault:function(){}};e.exports=r},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t,n){"use strict";var i=n(193),r=n(201),s=n(234),o=n(292),a=n(238),l=n(199),u=n(239),c=n(188),d=n(216),p=n(224),h={Component:s.injection,Class:o.injection,DOMProperty:i.injection,EmptyComponent:a.injection,EventPluginHub:r.injection,EventEmitter:l.injection,NativeComponent:u.injection,Perf:c.injection,RootIndex:d.injection,Updates:p.injection};e.exports=h},function(e,t,n){"use strict";function i(e,t){var n=C.hasOwnProperty(t)?C[t]:null;E.hasOwnProperty(t)&&(n!==w.OVERRIDE_BASE?g(!1):void 0),e.hasOwnProperty(t)&&(n!==w.DEFINE_MANY&&n!==w.DEFINE_MANY_MERGED?g(!1):void 0)}function r(e,t){if(t){"function"==typeof t?g(!1):void 0,p.isValidElement(t)?g(!1):void 0;var n=e.prototype;t.hasOwnProperty(y)&&S.mixins(e,t.mixins);for(var r in t)if(t.hasOwnProperty(r)&&r!==y){var s=t[r];if(i(n,r),S.hasOwnProperty(r))S[r](e,s);else{var o=C.hasOwnProperty(r),u=n.hasOwnProperty(r),c="function"==typeof s,d=c&&!o&&!u&&t.autobind!==!1;if(d)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=s,n[r]=s;else if(u){var h=C[r];!o||h!==w.DEFINE_MANY_MERGED&&h!==w.DEFINE_MANY?g(!1):void 0,h===w.DEFINE_MANY_MERGED?n[r]=a(n[r],s):h===w.DEFINE_MANY&&(n[r]=l(n[r],s))}else n[r]=s}}}}function s(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in S;r?g(!1):void 0;var s=n in e;s?g(!1):void 0,e[n]=i}}}function o(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:g(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?g(!1):void 0,e[n]=t[n]);return e}function a(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return o(r,n),o(r,i),r}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function u(e,t){var n=t.bind(e);return n}function c(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=u(e,n)}}var d=n(293),p=n(212),h=(n(235),n(236),n(294)),f=n(209),m=n(228),g=n(183),v=n(187),b=n(249),y=(n(195),b({mixins:null})),w=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),_=[],C={mixins:w.DEFINE_MANY,statics:w.DEFINE_MANY,propTypes:w.DEFINE_MANY,contextTypes:w.DEFINE_MANY,childContextTypes:w.DEFINE_MANY,getDefaultProps:w.DEFINE_MANY_MERGED,getInitialState:w.DEFINE_MANY_MERGED,getChildContext:w.DEFINE_MANY_MERGED,render:w.DEFINE_ONCE,componentWillMount:w.DEFINE_MANY,componentDidMount:w.DEFINE_MANY,componentWillReceiveProps:w.DEFINE_MANY,shouldComponentUpdate:w.DEFINE_ONCE,componentWillUpdate:w.DEFINE_MANY,componentDidUpdate:w.DEFINE_MANY,componentWillUnmount:w.DEFINE_MANY,updateComponent:w.OVERRIDE_BASE},S={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=f({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=f({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=a(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=f({},e.propTypes,t)},statics:function(e,t){s(e,t)},autobind:function(){}},E={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},T=function(){};f(T.prototype,d.prototype,E);var x={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&c(this),this.props=e,this.context=t,this.refs=m,this.updater=n||h,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?g(!1):void 0,this.state=i};t.prototype=new T,t.prototype.constructor=t,_.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:g(!1);for(var n in C)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){_.push(e)}}};e.exports=x},function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||r}var r=n(294),s=(n(213),n(228)),o=n(183);n(195);i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?o(!1):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};e.exports=i},function(e,t,n){"use strict";function i(e,t){}var r=(n(195),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){i(e,"forceUpdate")},enqueueReplaceState:function(e,t){i(e,"replaceState")},enqueueSetState:function(e,t){i(e,"setState")},enqueueSetProps:function(e,t){i(e,"setProps")},enqueueReplaceProps:function(e,t){i(e,"replaceProps")}});e.exports=r},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=!e&&a.useCreateElement}var r=n(225),s=n(226),o=n(199),a=n(211),l=n(296),u=n(227),c=n(209),d={initialize:l.getSelectionInformation,close:l.restoreSelection},p={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[d,p,h],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};c(i.prototype,u.Mixin,m),s.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e){return s(document.documentElement,e)}var r=n(297),s=n(229),o=n(265),a=n(299),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=a(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if("undefined"==typeof i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};e.exports=l},function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var s=r.text.length,o=s+i;return{start:s,end:o}}function s(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,s=t.focusNode,o=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(l){return null}var u=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:a.toString().length,d=a.cloneRange();d.selectNodeContents(e),d.setEnd(a.startContainer,a.startOffset);var p=i(d.startContainer,d.startOffset,d.endContainer,d.endOffset),h=p?0:d.toString().length,f=h+c,m=document.createRange();m.setStart(n,r),m.setEnd(s,o);var g=m.collapsed;return{start:g?f:h,end:g?h:f}}function o(e,t){var n,i,r=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,r=Math.min(t.start,i),s="undefined"==typeof t.end?r:Math.min(t.end,i);if(!n.extend&&r>s){var o=s;s=r,r=o}var a=u(e,r),l=u(e,s);if(a&&l){var d=document.createRange();d.setStart(a.node,a.offset),n.removeAllRanges(),r>s?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=n(179),u=n(298),c=n(245),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:d?r:s,setOffsets:d?o:a};e.exports=p},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function r(e,t){for(var r=n(e),s=0,o=0;r;){if(3===r.nodeType){if(o=s+r.textContent.length,s<=t&&o>=t)return{node:r,offset:t-s};s=o}r=n(i(r))}}e.exports=r},function(e,t){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&l.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e,t){if(w||null==v||v!==c())return null;var n=i(v);if(!y||!h(y,n)){y=n;var r=u.getPooled(g.select,b,e,t);return r.type="select",r.target=v,o.accumulateTwoPhaseDispatches(r),r}return null}var s=n(200),o=n(243),a=n(179),l=n(296),u=n(247),c=n(299),d=n(252),p=n(249),h=n(287),f=s.topLevelTypes,m=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[f.topBlur,f.topContextMenu,f.topFocus,f.topKeyDown,f.topMouseDown,f.topMouseUp,f.topSelectionChange]}},v=null,b=null,y=null,w=!1,_=!1,C=p({onSelect:null}),S={eventTypes:g,extractEvents:function(e,t,n,i,s){if(!_)return null;switch(e){case f.topFocus:(d(t)||"true"===t.contentEditable)&&(v=t,b=n,y=null);break;case f.topBlur:v=null,b=null,y=null;break;case f.topMouseDown:w=!0;break;case f.topContextMenu:case f.topMouseUp:return w=!1,r(i,s);case f.topSelectionChange:if(m)break;case f.topKeyDown:case f.topKeyUp:return r(i,s)}return null},didPutListener:function(e,t,n){t===C&&(_=!0)}};e.exports=S},function(e,t){"use strict";var n=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};e.exports=i},function(e,t,n){"use strict";var i=n(200),r=n(289),s=n(243),o=n(198),a=n(303),l=n(247),u=n(304),c=n(305),d=n(256),p=n(308),h=n(309),f=n(257),m=n(310),g=n(185),v=n(306),b=n(183),y=n(249),w=i.topLevelTypes,_={abort:{phasedRegistrationNames:{bubbled:y({onAbort:!0}),captured:y({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:y({onBlur:!0}),captured:y({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:y({onCanPlay:!0}),captured:y({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:y({onCanPlayThrough:!0}),captured:y({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:y({onClick:!0}),captured:y({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:y({onContextMenu:!0}),captured:y({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:y({onCopy:!0}),captured:y({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:y({onCut:!0}),captured:y({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:y({onDoubleClick:!0}),captured:y({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:y({onDrag:!0}),captured:y({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:y({onDragEnd:!0}),captured:y({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:y({onDragEnter:!0}),captured:y({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:y({onDragExit:!0}),captured:y({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:y({onDragLeave:!0}),captured:y({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:y({onDragOver:!0}),captured:y({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:y({onDragStart:!0}),captured:y({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:y({onDrop:!0}),captured:y({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:y({onDurationChange:!0}),captured:y({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:y({onEmptied:!0}),captured:y({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:y({onEncrypted:!0}),captured:y({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:y({onEnded:!0}),captured:y({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:y({onError:!0}),captured:y({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:y({onFocus:!0}),captured:y({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:y({onInput:!0}),captured:y({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:y({onKeyDown:!0}),captured:y({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:y({onKeyPress:!0}),captured:y({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:y({onKeyUp:!0}),captured:y({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:y({onLoad:!0}),captured:y({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:y({onLoadedData:!0}),captured:y({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:y({onLoadedMetadata:!0}),captured:y({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:y({onLoadStart:!0}),captured:y({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:y({onMouseDown:!0}),captured:y({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:y({onMouseMove:!0}),captured:y({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:y({onMouseOut:!0}),captured:y({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:y({onMouseOver:!0}),captured:y({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:y({onMouseUp:!0}),captured:y({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:y({onPaste:!0}),captured:y({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:y({onPause:!0}),captured:y({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:y({onPlay:!0}),captured:y({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:y({onPlaying:!0}),captured:y({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:y({onProgress:!0}),captured:y({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:y({onRateChange:!0}),captured:y({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:y({onReset:!0}),captured:y({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:y({onScroll:!0}),captured:y({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:y({onSeeked:!0}),captured:y({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:y({onSeeking:!0}),captured:y({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:y({onStalled:!0}),captured:y({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:y({onSubmit:!0}),captured:y({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:y({onSuspend:!0}),captured:y({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:y({onTimeUpdate:!0}),captured:y({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:y({onTouchCancel:!0}),captured:y({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:y({onTouchEnd:!0}),captured:y({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:y({onTouchMove:!0}),captured:y({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:y({onTouchStart:!0}),captured:y({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:y({onVolumeChange:!0}),captured:y({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:y({onWaiting:!0}),captured:y({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:y({onWheel:!0}),captured:y({onWheelCapture:!0})}}},C={topAbort:_.abort,topBlur:_.blur,topCanPlay:_.canPlay,topCanPlayThrough:_.canPlayThrough,topClick:_.click,topContextMenu:_.contextMenu,topCopy:_.copy,topCut:_.cut,topDoubleClick:_.doubleClick,topDrag:_.drag,topDragEnd:_.dragEnd,topDragEnter:_.dragEnter,topDragExit:_.dragExit,topDragLeave:_.dragLeave,topDragOver:_.dragOver,topDragStart:_.dragStart,topDrop:_.drop,topDurationChange:_.durationChange,topEmptied:_.emptied,topEncrypted:_.encrypted,topEnded:_.ended,topError:_.error,topFocus:_.focus,topInput:_.input,topKeyDown:_.keyDown,topKeyPress:_.keyPress,topKeyUp:_.keyUp,topLoad:_.load,topLoadedData:_.loadedData,topLoadedMetadata:_.loadedMetadata,topLoadStart:_.loadStart,topMouseDown:_.mouseDown,topMouseMove:_.mouseMove,topMouseOut:_.mouseOut,topMouseOver:_.mouseOver,topMouseUp:_.mouseUp,topPaste:_.paste,topPause:_.pause,topPlay:_.play,topPlaying:_.playing,topProgress:_.progress,topRateChange:_.rateChange,topReset:_.reset,topScroll:_.scroll,topSeeked:_.seeked,topSeeking:_.seeking,topStalled:_.stalled,topSubmit:_.submit,topSuspend:_.suspend,topTimeUpdate:_.timeUpdate,topTouchCancel:_.touchCancel,topTouchEnd:_.touchEnd,topTouchMove:_.touchMove,topTouchStart:_.touchStart,topVolumeChange:_.volumeChange,topWaiting:_.waiting,topWheel:_.wheel};for(var S in C)C[S].dependencies=[S];var E=y({onClick:null}),T={},x={eventTypes:_,extractEvents:function(e,t,n,i,r){var o=C[e];if(!o)return null;var g;switch(e){case w.topAbort:case w.topCanPlay:case w.topCanPlayThrough:case w.topDurationChange:case w.topEmptied:case w.topEncrypted:case w.topEnded:case w.topError:case w.topInput:case w.topLoad:case w.topLoadedData:case w.topLoadedMetadata:case w.topLoadStart:case w.topPause:case w.topPlay:case w.topPlaying:case w.topProgress:case w.topRateChange:case w.topReset:case w.topSeeked:case w.topSeeking:case w.topStalled:case w.topSubmit:case w.topSuspend:case w.topTimeUpdate:case w.topVolumeChange:case w.topWaiting:g=l;break;case w.topKeyPress:if(0===v(i))return null;case w.topKeyDown:case w.topKeyUp:g=c;break;case w.topBlur:case w.topFocus:g=u;break;case w.topClick:if(2===i.button)return null;case w.topContextMenu:case w.topDoubleClick:case w.topMouseDown:case w.topMouseMove:case w.topMouseOut:case w.topMouseOver:case w.topMouseUp:g=d;break;case w.topDrag:case w.topDragEnd:case w.topDragEnter:case w.topDragExit:case w.topDragLeave:case w.topDragOver:case w.topDragStart:case w.topDrop:g=p;break;case w.topTouchCancel:case w.topTouchEnd:case w.topTouchMove:case w.topTouchStart:g=h;break;case w.topScroll:g=f;break;case w.topWheel:g=m;break;case w.topCopy:case w.topCut:case w.topPaste:g=a}g?void 0:b(!1);var y=g.getPooled(o,n,i,r);return s.accumulateTwoPhaseDispatches(y),y},didPutListener:function(e,t,n){if(t===E){var i=o.getNode(e);T[e]||(T[e]=r.listen(i,"click",g))}},willDeleteListener:function(e,t){t===E&&(T[e].remove(),delete T[e])}};e.exports=x},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(247),s={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(257),s={relatedTarget:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(257),s=n(306),o=n(307),a=n(258),l={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?s(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?s(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(i,l),e.exports=i},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t,n){"use strict";function i(e){if(e.key){var t=s[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var r=n(306),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(256),s={dataTransfer:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(257),s=n(258),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){r.call(this,e,t,n,i)}var r=n(256),s={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";var i=n(193),r=i.injection.MUST_USE_ATTRIBUTE,s={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={Properties:{clipPath:r,cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,xlinkActuate:r,xlinkArcrole:r,xlinkHref:r,xlinkRole:r,xlinkShow:r,xlinkTitle:r,xlinkType:r,xmlBase:r,xmlLang:r,xmlSpace:r,y1:r,y2:r,y:r},DOMAttributeNamespaces:{xlinkActuate:s.xlink,xlinkArcrole:s.xlink,xlinkHref:s.xlink,xlinkRole:s.xlink,xlinkShow:s.xlink,xlinkTitle:s.xlink,xlinkType:s.xlink,xmlBase:s.xml,xmlLang:s.xml,xmlSpace:s.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};e.exports=o},function(e,t){"use strict";e.exports="0.14.9"},function(e,t,n){"use strict";var i=n(198);e.exports=i.renderSubtreeIntoContainer},function(e,t,n){"use strict";var i=n(241),r=n(315),s=n(312);i.inject();var o={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:s};e.exports=o},function(e,t,n){"use strict";function i(e){o.isValidElement(e)?void 0:f(!1);var t;try{d.injection.injectBatchingStrategy(u);var n=a.createReactRootID();return t=c.getPooled(!1),t.perform(function(){var i=h(e,null),r=i.mountComponent(n,t,p);return l.addChecksumToMarkup(r)},null)}finally{c.release(t),d.injection.injectBatchingStrategy(s)}}function r(e){o.isValidElement(e)?void 0:f(!1);var t;try{d.injection.injectBatchingStrategy(u);var n=a.createReactRootID();return t=c.getPooled(!0),t.perform(function(){var i=h(e,null);return i.mountComponent(n,t,p)},null)}finally{c.release(t),d.injection.injectBatchingStrategy(s)}}var s=n(262),o=n(212),a=n(215),l=n(218),u=n(316),c=n(317),d=n(224),p=n(228),h=n(232),f=n(183);e.exports={renderToString:i,renderToStaticMarkup:r}},function(e,t){"use strict";var n={isBatchingUpdates:!1,batchedUpdates:function(e){}};e.exports=n},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=s.getPooled(null),this.useCreateElement=!1}var r=n(226),s=n(225),o=n(227),a=n(209),l=n(185),u={initialize:function(){this.reactMountReady.reset()},close:l},c=[u],d={
getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null}};a(i.prototype,o.Mixin,d),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";var i=n(280),r=n(293),s=n(292),o=n(319),a=n(212),l=(n(320),n(277)),u=n(312),c=n(209),d=n(322),p=a.createElement,h=a.createFactory,f=a.cloneElement,m={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:d},Component:r,createElement:p,cloneElement:f,isValidElement:a.isValidElement,PropTypes:l,createClass:s.createClass,createFactory:h,createMixin:function(e){return e},DOM:o,version:u,__spread:c};e.exports=m},function(e,t,n){"use strict";function i(e){return r.createFactory(e)}var r=n(212),s=(n(320),n(321)),o=s({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},i);e.exports=o},function(e,t,n){"use strict";function i(){if(d.current){var e=d.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function r(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;s("uniqueKey",e,t)}}function s(e,t,n){var r=i();if(!r){var s="string"==typeof n?n:n.displayName||n.name;s&&(r=" Check the top-level render call using <"+s+">.")}var o=f[e]||(f[e]={});if(o[r])return null;o[r]=!0;var a={parentOrOwner:r,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return t&&t._owner&&t._owner!==d.current&&(a.childOwner=" It was passed a child from "+t._owner.getName()+"."),a}function o(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];u.isValidElement(i)&&r(i,t)}else if(u.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var s=p(e);if(s&&s!==e.entries)for(var o,a=s.call(e);!(o=a.next()).done;)u.isValidElement(o.value)&&r(o.value,t)}}function a(e,t,n,r){for(var s in t)if(t.hasOwnProperty(s)){var o;try{"function"!=typeof t[s]?h(!1):void 0,o=t[s](n,s,e,r,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(a){o=a}if(o instanceof Error&&!(o.message in m)){m[o.message]=!0;i()}}}function l(e){var t=e.type;if("function"==typeof t){var n=t.displayName||t.name;t.propTypes&&a(n,t.propTypes,e.props,c.prop),"function"==typeof t.getDefaultProps}}var u=n(212),c=n(235),d=(n(236),n(175)),p=(n(213),n(278)),h=n(183),f=(n(195),{}),m={},g={createElement:function(e,t,n){var i="string"==typeof e||"function"==typeof e,r=u.createElement.apply(this,arguments);if(null==r)return r;if(i)for(var s=2;s<arguments.length;s++)o(arguments[s],e);return l(r),r},createFactory:function(e){var t=g.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var i=u.cloneElement.apply(this,arguments),r=2;r<arguments.length;r++)o(arguments[r],i.type);return l(i),i}};e.exports=g},function(e,t){"use strict";function n(e,t,n){if(!e)return null;var r={};for(var s in e)i.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r}var i=Object.prototype.hasOwnProperty;e.exports=n},function(e,t,n){"use strict";function i(e){return r.isValidElement(e)?void 0:s(!1),e}var r=n(212),s=n(183);e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i,r){return r}n(209),n(195);e.exports=i},function(e,t,n){"use strict";e.exports=n(174)},function(e,t,n){"use strict";Object.assign||(Object.assign=n(326)),Array.isArray||(Array.isArray=n(327))},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(e,t){for(var s,o,a=n(e),l=1;l<arguments.length;l++){s=Object(arguments[l]);for(var u in s)i.call(s,u)&&(a[u]=s[u]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(s);for(var c=0;c<o.length;c++)r.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function s(e){return o(e)&&f.call(e)==u}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null!=e&&(s(e)?m.test(p.call(e)):n(e)&&c.test(e))}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,p=Function.prototype.toString,h=d.hasOwnProperty,f=d.toString,m=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=i(Array,"isArray"),v=9007199254740991,b=g||function(e){return n(e)&&r(e.length)&&f.call(e)==l};e.exports=b},function(e,t){"use strict";e.exports={CONTAINER_HEIGHT_SCALE_FACTOR:"containerHeightScaleFactor"}},function(e,t,n){(function(t){"use strict";function i(e,t){var n,i=a.Children.count(t);return n=Array.isArray(e)?new o(e,i):new s(e,i)}function r(e,t){var n=e.preloadBatchSize,i=e.preloadAdditionalHeight,r=e.infiniteComputer;return function(){var e=0===n?0:Math.floor(t/n),s=n*e,o=s+n,a=Math.max(0,s-i),l=Math.min(r.getTotalScrollableHeight(),o+i);return{displayIndexStart:r.getDisplayIndexStart(a),displayIndexEnd:r.getDisplayIndexEnd(l)}}()}var s=n(330),o=n(332),a=t.React||n(172);e.exports={createInfiniteComputer:i,recomputeApertureStateFromOptionsAndScrollTop:r}}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t,n){for(var i=!0;i;){var r=e,s=t,o=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=s,n=o,i=!0,a=u=void 0}},a=n(331),l=function(e){function t(){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),s(t,[{key:"getTotalScrollableHeight",value:function(){return this.heightData*this.numberOfChildren}},{key:"getDisplayIndexStart",value:function(e){return Math.floor(e/this.heightData)}},{key:"getDisplayIndexEnd",value:function(e){var t=Math.ceil(e/this.heightData);return t>0?t-1:t}},{key:"getTopSpacerHeight",value:function(e){return e*this.heightData}},{key:"getBottomSpacerHeight",value:function(e){var t=e+1;return Math.max(0,(this.numberOfChildren-t)*this.heightData)}}]),t}(a);e.exports=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){i(this,e),this.heightData=t,this.numberOfChildren=n}return r(e,[{key:"getTotalScrollableHeight",value:function(){}},{key:"getDisplayIndexStart",value:function(e){}},{key:"getDisplayIndexEnd",value:function(e){}},{key:"getTopSpacerHeight",value:function(e){}},{key:"getBottomSpacerHeight",value:function(e){}}]),e}();e.exports=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t,n){for(var i=!0;i;){var r=e,s=t,o=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=s,n=o,i=!0,a=u=void 0}},a=n(331),l=n(333),u=function(e){function t(e,n){i(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.prefixHeightData=this.heightData.reduce(function(e,t){return 0===e.length?[t]:(e.push(e[e.length-1]+t),e)},[])}return r(t,e),s(t,[{key:"maybeIndexToIndex",value:function(e){return"undefined"==typeof e||null===e?this.prefixHeightData.length-1:e}},{key:"getTotalScrollableHeight",value:function(){var e=this.prefixHeightData.length;return 0===e?0:this.prefixHeightData[e-1]}},{key:"getDisplayIndexStart",value:function(e){var t=l.binaryIndexSearch(this.prefixHeightData,e,l.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}},{key:"getDisplayIndexEnd",value:function(e){var t=l.binaryIndexSearch(this.prefixHeightData,e,l.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}},{key:"getTopSpacerHeight",value:function(e){var t=e-1;return t<0?0:this.prefixHeightData[t]}},{key:"getBottomSpacerHeight",value:function(e){return e===-1?0:this.getTotalScrollableHeight()-this.prefixHeightData[e]}}]),t}(a);e.exports=u},function(e,t){"use strict";var n={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},i=function(e,t,i){for(var r,s,o,a=e.length-1,l=0;l<=a;){if(s=l+Math.floor((a-l)/2),o=e[s],o===t)return s;o<t?l=s+1:o>t&&(a=s-1)}return i===n.CLOSEST_LOWER&&l>0?r=l-1:i===n.CLOSEST_HIGHER&&a<e.length-1&&(r=a+1),r};e.exports={binaryIndexSearch:i,opts:n}},function(e,t){(function(t){function n(e){return"number"==typeof e&&i(e)}var i=t.isFinite;e.exports=n}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";var i=t.React||n(172);e.exports={preloadType:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.shape({type:i.PropTypes.oneOf(["containerHeightScaleFactor"]).isRequired,amount:i.PropTypes.number.isRequired})])}}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";var i=t.React||n(172),r=n(334);e.exports=function(e){var t="Invariant Violation: ";if(!e.containerHeight&&!e.useWindowAsScrollContainer)throw new Error(t+"Either containerHeight or useWindowAsScrollContainer must be provided.");if(!r(e.elementHeight)&&!Array.isArray(e.elementHeight))throw new Error(t+"You must provide either a number or an array of numbers as the elementHeight.");if(Array.isArray(e.elementHeight)&&i.Children.count(e.children)!==e.elementHeight.length)throw new Error(t+"There must be as many values provided in the elementHeight prop as there are children.")}}).call(t,function(){return this}())}]);
//# sourceMappingURL=vgplayer.js.map