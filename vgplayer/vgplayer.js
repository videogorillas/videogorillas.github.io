!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){function exception(err){return err}function isEnum(obj){return null!=obj&&obj.constructor==stjs.enumEntry}function setAssertHandler(a){stjsAssertHandler=a}function assertArgEquals(position,code,expectedValue,testValue){expectedValue!=testValue&&stjsAssertHandler&&stjsAssertHandler(position,code,"Wrong argument. Expected: "+expectedValue+", got:"+testValue)}function assertArgNotNull(position,code,testValue){null==testValue&&stjsAssertHandler&&stjsAssertHandler(position,code,"Wrong argument. Null value")}function assertArgTrue(position,code,condition){!condition&&stjsAssertHandler&&stjsAssertHandler(position,code,"Wrong argument. Condition is false")}function assertStateEquals(position,code,expectedValue,testValue){expectedValue!=testValue&&stjsAssertHandler&&stjsAssertHandler(position,code,"Wrong state. Expected: "+expectedValue+", got:"+testValue)}function assertStateNotNull(position,code,testValue){null==testValue&&stjsAssertHandler&&stjsAssertHandler(position,code,"Wrong state. Null value")}function assertStateTrue(position,code,condition){!condition&&stjsAssertHandler&&stjsAssertHandler(position,code,"Wrong state. Condition is false")}var _=__webpack_require__(1);_=window._.noConflict();var Rx=__webpack_require__(3),core=__webpack_require__(5),React=__webpack_require__(9),ReactDOM=__webpack_require__(38),Rainbow=__webpack_require__(170),PlayerImpl=core.Player,Captions=core.Captions,TapeTimecode=core.TapeTimecode,LogLevel=core.LogLevel,PlayerError=core.PlayerError,CloseableView=core._private.CloseableView,VGView=core._private.VGView,VGPlayerPluginApi=core._private.VGPlayerPluginApi,ObjectEvents=core._private.ObjectEvents,DataSrc=core._private.DataSrc,VGPlugin=core._private.VGPlugin,VGPlugins=core._private.VGPlugins,PlayerView=core._private.PlayerView,VGPlayerPublicApi=core._private.VGPlayerPublicApi,EbuSubs=core._private.EbuSubs,Http=core._private.Http,TimelineUtil=core._private.TimelineUtil,Utils=core._private.tests.Utils,PlayerOptions=core._private.tests.PlayerOptions,SubtitleEntry=core._private.tests.SubtitleEntry,MutableBoolean=core._private.tests.MutableBoolean,PlayerEvents=core._private.tests.PlayerEvents,KeyOptions=core._private.tests.KeyOptions,HotkeyManager=core._private.tests.HotkeyManager,TimeSample=core._private.tests.TimeSample,Timeline=core._private.tests.Timeline,Subtitles=core._private.tests.Subtitles,NOT_IMPLEMENTED=function(){throw"This method is not implemented in Javascript."};if(JavalikeEquals=function(value){return null!=value&&(value.valueOf?this.valueOf()===value.valueOf():this===value)},JavalikeGetClass=function(){return this.constructor},String.prototype.equals||(String.prototype.equals=JavalikeEquals),String.prototype.getBytes||(String.prototype.getBytes=NOT_IMPLEMENTED),String.prototype.getChars||(String.prototype.getChars=NOT_IMPLEMENTED),String.prototype.contentEquals||(String.prototype.contentEquals=NOT_IMPLEMENTED),String.prototype.startsWith||(String.prototype.startsWith=function(start,from){var f=null!=from?from:0;return this.substring(f,f+start.length)==start}),String.prototype.endsWith||(String.prototype.endsWith=function(end){return null!=end&&(!(this.length<end.length)&&this.substring(this.length-end.length,this.length)==end)}),!String.prototype.trim){var trimLeft=/^\s+/,trimRight=/\s+$/;String.prototype.trim=function(){return this.replace(trimLeft,"").replace(trimRight,"")}}String.prototype.matches||(String.prototype.matches=function(regexp){return null!=this.match("^"+regexp+"$")}),String.prototype.compareTo||(String.prototype.compareTo=function(other){return null==other?1:this<other?-1:this==other?0:1}),String.prototype.compareToIgnoreCase||(String.prototype.compareToIgnoreCase=function(other){return null==other?1:this.toLowerCase().compareTo(other.toLowerCase())}),String.prototype.equalsIgnoreCase||(String.prototype.equalsIgnoreCase=function(other){return null!=other&&this.toLowerCase()===other.toLowerCase()}),String.prototype.codePointAt||(String.prototype.codePointAt=String.prototype.charCodeAt),String.prototype.codePointBefore||(String.prototype.codePointBefore=NOT_IMPLEMENTED),String.prototype.codePointCount||(String.prototype.codePointCount=NOT_IMPLEMENTED),String.prototype.replaceAll||(String.prototype.replaceAll=function(regexp,replace){return this.replace(new RegExp(regexp,"g"),replace)}),String.prototype.replaceFirst||(String.prototype.replaceFirst=function(regexp,replace){return this.replace(new RegExp(regexp),replace)}),String.prototype.regionMatches||(String.prototype.regionMatches=function(ignoreCase,toffset,other,ooffset,len){if(4==arguments.length&&(len=arguments[3],ooffset=arguments[2],other=arguments[1],toffset=arguments[0],ignoreCase=!1),toffset<0||ooffset<0||null==other||toffset+len>this.length||ooffset+len>other.length)return!1;var s1=this.substring(toffset,toffset+len),s2=other.substring(ooffset,ooffset+len);return ignoreCase?s1.equalsIgnoreCase(s2):s1===s2}),String.prototype.contains||(String.prototype.contains=function(it){return this.indexOf(it)>=0}),String.prototype.getClass||(String.prototype.getClass=JavalikeGetClass),String.valueOf=function(value){return new String(value)};var Byte=Number,Double=Number,Float=Number,Integer=Number,Long=Number,Short=Number;Number.prototype.intValue||(Number.prototype.intValue=function(){return parseInt(this)}),Number.prototype.shortValue||(Number.prototype.shortValue=function(){return parseInt(this)}),Number.prototype.longValue||(Number.prototype.longValue=function(){return parseInt(this)}),Number.prototype.byteValue||(Number.prototype.byteValue=function(){return parseInt(this)}),Number.prototype.floatValue||(Number.prototype.floatValue=function(){return parseFloat(this)}),Number.prototype.doubleValue||(Number.prototype.doubleValue=function(){return parseFloat(this)}),Number.parseInt||(Number.parseInt=parseInt),Number.parseShort||(Number.parseShort=parseInt),Number.parseLong||(Number.parseLong=parseInt),Number.parseByte||(Number.parseByte=parseInt),Number.parseDouble||(Number.parseDouble=parseFloat),Number.parseFloat||(Number.parseFloat=parseFloat),Number.isNaN||(Number.isNaN=isNaN),Number.prototype.isNaN||(Number.prototype.isNaN=isNaN),Number.prototype.equals||(Number.prototype.equals=JavalikeEquals),Number.prototype.getClass||(Number.prototype.getClass=JavalikeGetClass),Number.valueOf=function(value){return new Number(value).valueOf()},Boolean.prototype.equals||(Boolean.prototype.equals=JavalikeEquals),Boolean.prototype.getClass||(Boolean.prototype.getClass=JavalikeGetClass),Boolean.valueOf=function(value){return new Boolean(value).valueOf()};var stjs={};stjs.global=this,stjs.skipCopy={prototype:!0,constructor:!0,$typeDescription:!0,$inherit:!0},stjs.ns=function(path){for(var p=path.split("."),obj=stjs.global,i=0;i<p.length;++i){var part=p[i];obj=obj[part]=obj[part]||{}}return obj},stjs.copyProps=function(from,to){for(key in from)stjs.skipCopy[key]||(to[key]=from[key]);return to},stjs.copyInexistentProps=function(from,to){for(key in from)stjs.skipCopy[key]||to[key]||(to[key]=from[key]);return to},stjs.extend=function(_constructor,_super,_implements,_initializer,_typeDescription,_annotations){if("object"!=typeof _typeDescription)return stjs.extend12.apply(this,arguments);_constructor.$inherit=[];var a;if(null!=_super){var I=function(){};I.prototype=_super.prototype,_constructor.prototype=new I,stjs.copyProps(_super,_constructor),stjs.copyProps(_super.$typeDescription,_typeDescription),stjs.copyProps(_super.$annotations,_annotations),_constructor.$inherit.push(_super)}for(a=0;a<_implements.length;++a)_implements[a]&&(stjs.copyProps(_implements[a],_constructor),stjs.copyInexistentProps(_implements[a].prototype,_constructor.prototype),_constructor.$inherit.push(_implements[a]));return _constructor.prototype.constructor=_constructor,null!=_initializer&&_initializer(_constructor,_constructor.prototype),_constructor.$typeDescription=_typeDescription,_constructor.$annotations=_annotations,null==_super&&(_constructor.prototype.equals||(_constructor.prototype.equals=JavalikeEquals),_constructor.prototype.getClass||(_constructor.prototype.getClass=JavalikeGetClass)),_constructor},stjs.extend12=function(_constructor,_super,_implements){var a,I=function(){};for(I.prototype=_super.prototype,_constructor.prototype=new I,a=1;a<arguments.length;++a)stjs.copyProps(arguments[a],_constructor);return _constructor.prototype.constructor=_constructor,null==_super&&(_constructor.prototype.equals=JavalikeEquals,_constructor.prototype.getClass=JavalikeGetClass),_constructor},stjs.getAnnotations=function(clz){return clz.$annotations},stjs.getTypeAnnotation=function(clz,annType){var ann=clz.$annotations._;return ann?ann[annType]:null},stjs.getMemberAnnotation=function(clz,memberName,annType){var ann=clz.$annotations.memberName;return ann?ann[annType]:null},stjs.getParameterAnnotation=function(clz,methodName,idx,annType){var ann=clz.$annotations[methodName+"$"+idx];return ann?ann[annType]:null},stjs.isInstanceOf=function(child,parent){if(null==child)return!1;if(child===parent)return!0;if(!child.$inherit)return!1;for(var i=0;i<child.$inherit.length;++i)if(stjs.isInstanceOf(child.$inherit[i],parent))return!0;return!1},stjs.enumEntry=function(idx,name){this._name=name,this._ordinal=idx},stjs.enumEntry.prototype.name=function(){return this._name},stjs.enumEntry.prototype.ordinal=function(){return this._ordinal},stjs.enumEntry.prototype.toString=function(){return this._name},stjs.enumEntry.prototype.equals=JavalikeEquals,stjs.enumeration=function(){var i,e={};for(e._values=[],i=0;i<arguments.length;++i)e[arguments[i]]=new stjs.enumEntry(i,arguments[i]),e._values[i]=e[arguments[i]];return e.values=function(){return this._values},e.valueOf=function(label){return this[label]},e},stjs.mainCallDisabled=!1,stjs.exception=function(err){return err},stjs.isEnum=function(obj){return null!=obj&&obj.constructor==stjs.enumEntry},"function"==typeof Math.trunc?stjs.trunc=Math.trunc:stjs.trunc=function(n){return null==n?null:n>=0?Math.floor(n):Math.ceil(n)},stjs.converters={Date:function(s,type){var a=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)$/.exec(s);return a?new Date((+a[1]),+a[2]-1,(+a[3]),(+a[4]),(+a[5]),(+a[6])):null},Enum:function(s,type){return eval(type.arguments[0])[s]}},stjs.serializers={Date:function(d,type){function pad(n){return n<10?"0"+n:""+n}return d?""+d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())+" "+pad(d.getHours())+":"+pad(d.getMinutes())+":"+pad(d.getSeconds()):null},Enum:function(e,type){return null!=e?e.toString():null}},stjs.bind=function(obj,method,thisParamPos){var f=function(){var args=arguments;return null!=thisParamPos&&Array.prototype.splice.call(args,thisParamPos,0,this),"string"==typeof method?obj[method].apply(obj,args):method.apply(obj,args)};return f},stjs.parseJSON=function(){function unescapeOne(_,ch,hex){return ch?escapes[ch]:String.fromCharCode(parseInt(hex,16))}function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function convert(type,json){if(!type)return json;var cv=stjs.converters[type.name||type];return cv?cv(json,type):constr(type,json)}function builder(type){return type?"function"==typeof type?new type:type.name?"Map"==type.name?{}:"Array"==type.name?[]:constr(type.name):constr(type):{}}function nextMatch(str){var m=jsonToken.exec(str);return null!=m?m[0]:null}var number="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",oneChar='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',string='(?:"'+oneChar+'*")',jsonToken=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+number+"|"+string+")","g"),escapeSequence=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),escapes={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},constructors={},EMPTY_STRING=new String(""),SLASH="\\",firstTokenCtors={"{":Object,"[":Array},hop=Object.hasOwnProperty;return function(json,type){var result,tok=nextMatch(json),topLevelPrimitive=!1;"{"===tok?result=builder(type,null):"["===tok?result=[]:(result=[],topLevelPrimitive=!0);var key,stack=[result],stack2=[type];for(tok=nextMatch(json);null!=tok;tok=nextMatch(json)){var cont;switch(tok.charCodeAt(0)){default:cont=stack[0],cont[key||cont.length]=+tok,key=void 0;break;case 34:if(tok=tok.substring(1,tok.length-1),tok.indexOf(SLASH)!==-1&&(tok=tok.replace(escapeSequence,unescapeOne)),cont=stack[0],!key){if(!(cont instanceof Array)){key=tok||EMPTY_STRING,stack2[0]=cont.constructor.$typeDescription?cont.constructor.$typeDescription[key]:stack2[1].arguments[1];break}key=cont.length}cont[key]=convert(stack2[0],tok),key=void 0;break;case 91:cont=stack[0],stack.unshift(cont[key||cont.length]=[]),stack2.unshift(stack2[0].arguments[0]),key=void 0;break;case 93:stack.shift(),stack2.shift();break;case 102:cont=stack[0],cont[key||cont.length]=!1,key=void 0;break;case 110:cont=stack[0],cont[key||cont.length]=null,key=void 0;break;case 116:cont=stack[0],cont[key||cont.length]=!0,key=void 0;break;case 123:cont=stack[0],stack.unshift(cont[key||cont.length]=builder(stack2[0])),stack2.unshift(null),key=void 0;break;case 125:stack.shift(),stack2.shift()}}if(topLevelPrimitive){if(1!==stack.length)throw new Error;result=result[0]}else if(stack.length)throw new Error;return result}}(),stjs.isArray=function(obj){return"[object Array]"===stjs.toString.call(obj)},stjs.typefy=function(obj,cls){function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function elementType(type){return"function"==typeof type?type:type.arguments?eval(type.arguments[0]):"string"==typeof type?eval(type):Object}function convert(type,json){if(!type)return json;var cv=stjs.converters[type.name||type];return cv?cv(json,type):constr(type,json)}function builder(type){return type?"function"==typeof type?new type:type.name?"Map"==type.name?{}:"Array"==type.name?[]:constr(type.name):constr(type):{}}if(stjs.isArray(obj)){for(var result=[],idx=0;idx<obj.length;idx++)result.push(stjs.typefy(obj[idx],elementType(cls)));return result}var constructors={};if(null==obj)return null;var ret=new cls;for(var key in obj){var prop=obj[key];if(null!=prop){var td=cls.$typeDescription[key];td?"string"==typeof prop?ret[key]=convert(td,prop):"object"==typeof prop&&(ret[key]=stjs.typefy(prop,td)):ret[key]=prop}}return ret},stjs.hydrate=stjs.typefy,stjs.stringify=function(obj,cls){if(null==obj)return null;var ret={};for(var key in obj){var td=cls.$typeDescription[key],prop=obj[key],ser=null!=td?stjs.serializers[td.name||td]:null;"function"!=typeof prop&&(td&&ser?"string"!=typeof prop&&(ser?ret[key]=ser(prop,td):ret[key]=stjs.typefy(prop,td)):ret[key]=prop)}return ret};var stjsAssertHandler=function(position,code,msg){throw msg+" at "+position},Throwable=function(message,cause){if(Error.call(this),"function"==typeof Error.captureStackTrace)Error.captureStackTrace(this,arguments.callee);else try{throw new Error}catch(e){this.stack=e.stack}"string"==typeof message?(this.detailMessage=message,this.message=message,this.cause=cause):this.cause=message};stjs.extend(Throwable,Error,[],function(constructor,prototype){prototype.detailMessage=null,prototype.cause=null,prototype.getMessage=function(){return this.detailMessage},prototype.getLocalizedMessage=function(){return this.getMessage()},prototype.getCause=function(){return this.cause==this?null:this.cause},prototype.toString=function(){var s="Exception",message=this.getLocalizedMessage();return null!=message?s+": "+message:s},prototype.getStackTrace=function(){return this.stack},prototype.printStackTrace=function(){console.error(this.getStackTrace())}},{});var Exception=function(message,cause){Throwable.call(this,message,cause)};stjs.extend(Exception,Throwable,[],function(constructor,prototype){},{});var RuntimeException=function(message,cause){Exception.call(this,message,cause)};stjs.extend(RuntimeException,Exception,[],function(constructor,prototype){},{}),stjs.setField=function(obj,field,value,returnOldValue){if(stjs.setFieldHandler)return stjs.setFieldHandler(obj,field,value,returnOldValue);var toReturn=returnOldValue?obj[field]:value;return obj[field]=value,toReturn},stjs.getField=function(obj,field){return stjs.getFieldHandler?stjs.getFieldHandler(obj,field):obj[field]};var LogEventListView=function(el){this.el=el,this.levById={},this.viewWeightArray=[]};LogEventListView=stjs.extend(LogEventListView,null,[],function(constructor,prototype){constructor.ViewWeight=function(logEventId,viewWeight){this.id=logEventId,this.weight=viewWeight},constructor.ViewWeight=stjs.extend(constructor.ViewWeight,null,[],function(constructor,prototype){prototype.id=null,prototype.weight=0},{},{}),constructor.selector=".app-LogEventsView",prototype.levById=null,prototype.el=null,prototype.viewWeightArray=null,prototype.viewById=function(logEventId){return this.levById[logEventId]},prototype.addEvent=function(logEventView){this.levById[logEventView.logEventId]=logEventView;for(var beforeId=null,i=0;i<this.viewWeightArray.length;i++){var w=this.viewWeightArray[i];if(logEventView.getViewWeight()>w.weight){beforeId=w.id;break}}null!=beforeId?this.el.insertBefore(logEventView.getElement(),this.levById[beforeId].getElement()):this.el.appendChild(logEventView.getElement()),this.viewWeightArray.push(new LogEventListView.ViewWeight(logEventView.logEventId,stjs.trunc(logEventView.getViewWeight()))),this.viewWeightArray.sort(function(a,b){return b.weight-a.weight})},prototype.deleteEvent=function(logEventId){var logEventView=this.levById[logEventId];this.el.removeChild(logEventView.getElement()),this.viewWeightArray=this.viewWeightArray.filter(function(viewWeight,aLong,strings){return!viewWeight.id.equals(logEventId)}),delete this.levById[logEventId]}},{levById:{name:"Map",arguments:[null,"LogEventView"]},el:"Element",viewWeightArray:{name:"Array",arguments:["LogEventListView.ViewWeight"]}},{});var ObjectDetectView=function(){};ObjectDetectView=stjs.extend(ObjectDetectView,null,[],null,{},{});var RangeInputProps=function(){};RangeInputProps=stjs.extend(RangeInputProps,null,[],function(constructor,prototype){prototype.points=null,prototype.min=0,prototype.max=0,prototype.value=0,prototype.onChange=null},{onChange:{name:"Callback1",arguments:["DOMEvent"]}},{});var VideoLogComponent=function(props){React.Component.call(this,props)};VideoLogComponent=stjs.extend(VideoLogComponent,React.Component,[],function(constructor,prototype){prototype.render=function(){return null},constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],null,{},{}),constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],null,{},{})},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VGTemplates=function(){};VGTemplates=stjs.extend(VGTemplates,null,[],function(constructor,prototype){constructor.dropDownTemplate=function(className,title){return VG["templates/player/ddown.html"]({className:className,title:title})},constructor.videologLogevent=function(ctx){return VG["templates/videolog/logevent.html"](ctx)},constructor.videologHint=function(tags){var html='<ul class="rrtheme_videolog__hintlist">\n';return html+=tags.map(function(tag,i,a){return"<li data-tag-id='"+tag.id+"'>"+tag.displayName+"</li>"}).join("\n"),html+="</ul>"},constructor.rrVideologPlugin=function(ctx){return VG["templates/videolog/rrtheme_videolog_plugin.html"](ctx)},constructor.videologTrack=function(className,width){return VG["templates/videolog/videolog-track.html"]({pluginClass:className,width:width})},constructor.addonControlDepr=function(ctx){return VG["templates/player/addon-control.html"](ctx)},constructor.addonControl=function(id,iconClass){var ctx={id:id,iconClass:iconClass};return VG["templates/player/addon-control.html"](ctx)},constructor.dropDownItemTemplate=function(className,item){return VG["templates/player/ddown-item.html"]({className:className,item:item})},constructor.safeAreaItemTemplate=function(color,item){return VG["templates/player/safe-area-item.html"]({color:color,item:item})},constructor.imageCaptureTemplate=function(){return VG["templates/player/image-capture.html"]({})},constructor.videologEventTag=function(pluginClass,tagsNames){return tagsNames.map(function(displayName,aLong,strings){return"<span class='"+pluginClass+"__tag-name'><span class='view-tag-displayName'>"+displayName+"</span><span class='vg_icon-x'></span></span>"}).join(", ")},constructor.modalRow=function(trackDisplayName,owner,state,createdDate){var ctx={trackName:trackDisplayName,author:owner.displayName,state:state.displayName,createdDate:VGTemplates.toDateString(createdDate)};return VG["templates/videolog/modal_row.html"](ctx)},constructor.toDateString=function(t){return new Date(t).toLocaleDateString("en-us",{year:"numeric",month:"numeric",day:"2-digit",hour12:!0,hour:"numeric",minute:"numeric"}).replace(" AM","am").replace(", "," - ")},constructor.cropPluginTemplateElement=function(){return VG["templates/player/crop-plugin.html"](null)},constructor.queryByVGPartNumber=function(el,partNumber){return el.querySelector("[vgpartn='"+partNumber+"']")},constructor.elFromHTML=function(html,ownerDocument){null==ownerDocument&&(ownerDocument=window.document);var temp=ownerDocument.createElement("div");return temp.innerHTML=html,temp.firstElementChild}},{},{});var VGControl=function(){};VGControl=stjs.extend(VGControl,null,[],function(constructor,prototype){prototype.getControlEl=function(controlPanel){}},{},{});var ContexterConsts=function(){};ContexterConsts=stjs.extend(ContexterConsts,null,[],function(constructor,prototype){constructor.VG_CONTEXTER_CONTAINER="vg_contexter-container",constructor.VG_CONTEXTER_HEADER="vg_contexter-header",constructor.VG_CONTEXTER_HEADER_ACTIONS="vg_contexter-header__actions",constructor.VG_CONTEXTER_MODAL="vg_contexter-modal",constructor.VG_CONTEXTER_MODAL_CLOSE="vg_contexter-modal-close",constructor.VG_CONTEXTER_OPEN_LOG="vg_contexter-open_log",constructor.VG_CONTEXTER_OVERLAY_WORD="vg_contexter-overlay-word",constructor.VG_CONTEXTER_OVERLAY_WORDS="vg_contexter-overlay-words",constructor.VG_CONTEXTER_STATUSBAR="vg_contexter-statusbar",constructor.VG_CONTEXTER_TABLE_WRAPPER="vg_contexter-table-wrapper",constructor.VG_CONTEXTER_TOGGLE_OVERLAYS="vg_contexter-toggle_overlays",constructor.VG_CONTEXTER_TRACK="vg_contexter-track",constructor.VG_CONTEXTER_WORD="vg_contexter-word",constructor.VG_CONTEXTER_WORD_CONF_COUNT="vg_contexter-word-confCount",constructor.VG_CONTEXTER_WORD_DATA="vg_contexter-word__data",constructor.VG_CONTEXTER_WORD_INFO="vg_contexter-word__top",constructor.VG_CONTEXTER_WORD_LIST="vg_contexter-wordList",constructor.VG_CONTEXTER_WORD_NAME="vg_contexter-word-name"},{},{});var ViewConsts=function(){};ViewConsts=stjs.extend(ViewConsts,null,[],function(constructor,prototype){constructor.ABSOLUTE="absolute",constructor.ACTIVE="active",constructor.BACKGROUND_COLOR="background-color",constructor.BLOCK="block",constructor.BUTTON="button",constructor.CAPTIONS_LIST="captions-list",constructor.CLOSE="close",constructor.CLOSE_ICON="vg_icon-close",constructor.COLOR="color",constructor.COMPONENT_CONTAINER="component_container",constructor.DISPLAY="display",constructor.FADE="fade",constructor.FONT_SIZE="fontSize",constructor.HEIGHT="height",constructor.HIGHLIGHT_YELLOW="highlight--yellow",constructor.ID="id",constructor.KEY="key",constructor.LEFT="left",constructor.LIST="list",constructor.NONE="none",constructor.OFF="OFF",constructor.ON="ON",constructor.ON_SUBMIT="onSubmit",constructor.OPACITY="opacity",constructor.PANEL_COLOR="#232432",constructor.POSITION="position",constructor.PRIMARY_COLOR="#56c3fe",constructor.RANGE="range",constructor.RELATIVE="relative",constructor.STYLE="style",constructor.SUBMIT="submit",constructor.TEXT_YELLOW="text--yellow",constructor.TIME_ARROW="time-arrow",constructor.TYPE="type",constructor.VG_BLACK_BG="vg_black-bg",constructor.VG_BTN="vg_btn",constructor.VG_BTN_BLACK="vg_btn--black",constructor.VG_BTN_DEFAULT="vg_btn--default",constructor.VG_BTN_INFO="vg_btn--info",constructor.VG_BTN_PANEL="vg_btn--panel",constructor.VG_BTN_PRIMARY="vg_btn--primary",constructor.VG_CAPTION_HIGHLIGHT="vg_caption--highlight",constructor.VG_DEFAULT="vg_default",constructor.VG_DEFAULT_BG="vg_default-bg",constructor.VG_FORM_SEARCH="vg_form-search",constructor.VG_ICON_FLAG="vg_icon-flag",constructor.VG_ICON_LOCK="vg_icon-lock",constructor.VG_ICON_NOTAG="vg_icon-notag",constructor.VG_ICON_SEARCH="vg_icon-search",constructor.VG_ICON_TAG="vg_icon-tag",constructor.VG_ICON_UNLOCK="vg_icon-unlock",constructor.VG_INFO="vg_info",constructor.VG_INPUT_RANGE="vg_input--range",constructor.VG_INPUT_SEARCH="vg_input-search",constructor.VG_INPUT_SUBMIT="vg_input--submit",constructor.VG_LOADING_SPINNER="vg_loading-spinner",constructor.VG_PANEL="vg_panel",constructor.VG_PANEL_BG="vg_panel-bg",constructor.VG_PLUGIN_SEARCH="vg_plugin-search",constructor.VG_PRIMARY_BG="vg_primary-bg",constructor.VG_PRO_PANEL_CONTAINER="vg_proPanel__container",constructor.VG_RANGE="vg_range",constructor.VG_ZOOM="vg_zoom",constructor.VGTHEME_CONTROL_PLUS="vgtheme_control-plus",constructor.WIDTH="width",constructor.YELLOW_COLOR="yellow",constructor.Z_INDEX="zIndex"},{},{});var ContexterWord=function(name){this.name=name,this.confidence=0,this.confCount=0,this.values={},this.frames=[]};ContexterWord=stjs.extend(ContexterWord,null,[],function(constructor,prototype){prototype.name=null,prototype.confidence=0,prototype.confCount=0,prototype.values=null,prototype.frames=null},{values:{name:"Map",arguments:[null,null]},frames:{name:"Array",arguments:[null]}},{});var CropMask=function(width,height,top,left){this.width=width,this.height=height,this.top=top,this.left=left};CropMask=stjs.extend(CropMask,null,[],function(constructor,prototype){prototype.width=0,prototype.height=0,prototype.top=0,prototype.left=0},{},{});var User=function(){};User=stjs.extend(User,null,[],function(constructor,prototype){prototype.id=null,prototype.first_name=null,prototype.last_name=null,prototype.email=null,prototype.displayName=null,prototype.avatar=null,prototype.active=null},{},{});var TrackState=function(id,displayName){this.id=id,this.displayName=displayName};TrackState=stjs.extend(TrackState,null,[],function(constructor,prototype){constructor.CREATED=new TrackState("CREATED","Created"),constructor.NEW=new TrackState("NEW","New"),constructor.DELETED=new TrackState("DELETED","Deleted"),constructor.EDITED=new TrackState("EDITED","Edited"),constructor.COMPLETE=new TrackState("COMPLETE","Complete"),prototype.id=null,prototype.displayName=null},{CREATED:"TrackState",NEW:"TrackState",DELETED:"TrackState",EDITED:"TrackState",COMPLETE:"TrackState"},{});var TrackType=stjs.enumeration("id","displayName"),ColorBulletDropDownMenuItem=function(id,title,color,onClick){this.id=id,this.title=title,this.color=color,this.onClick=onClick};ColorBulletDropDownMenuItem=stjs.extend(ColorBulletDropDownMenuItem,null,[],function(constructor,prototype){prototype.id=null,prototype.title=null,prototype.color=null,prototype.onClick=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]}},{});var TimeCodeComponent=function(props,onChange){React.Component.call(this,props),this.onChange=onChange};TimeCodeComponent=stjs.extend(TimeCodeComponent,React.Component,[],function(constructor,prototype){constructor.TAPE="tape",constructor.STANDARD="standard",constructor.STEPS="steps",prototype.onChange=null,constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],null,{},{}),constructor.Props=function(key,onChange){this.key=key,this.onChange=onChange},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.key=null,prototype.value=null,prototype.onChange=null},{onChange:{name:"Callback1",arguments:["DOMEvent"]}},{}),constructor.timeCode=function(key,value,timescale,onChange){var props={};return React.createElement(TimeCodeComponent,props)},constructor.readOnlyTimeCode=function(key,value,timescale,onChange){var props={};return React.createElement(TimeCodeComponent,props)},prototype.render=function(){return React.DOM.input({value:"00:01:00:00",onChange:this.onChange})}},{onChange:{name:"Callback1",arguments:["DOMEvent"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var CutlistFilmstrip=function(player,cutlistFilmstripEl,$map){throw exception("CutlistFilmstrip TODO")};CutlistFilmstrip=stjs.extend(CutlistFilmstrip,null,[],function(constructor,prototype){prototype.isVisible=!1},{},{});var Point=function(){};Point=stjs.extend(Point,null,[],function(constructor,prototype){prototype.x=0,prototype.y=0},{},{});var WaveData=function(http,src){this.http=http,this.src=src,this.isLoading=!0,this.data=null,this.dataSamples=0,this.onLoadListeners=[]};WaveData=stjs.extend(WaveData,null,[],function(constructor,prototype){constructor.concurrentAjaxRequests=0,prototype.http=null,prototype.src=null,prototype.data8=null,prototype.data16=null,prototype.onerror=null,prototype.dataSampleRange=null,prototype.onLoadListeners=null,prototype.dataSamples=0,prototype.data=null,prototype.isLoading=!1,prototype.spp=0,prototype.containsSample=function(value){return this.dataSampleRange.contains(value)},prototype.containsRange=function(start,end){return this.containsSample(start)&&this.containsSample(end)},prototype.addOnLoadListener=function(listener){this.onLoadListeners.push(listener)},prototype._fireOnLoad=function(){for(var i=0;i<this.onLoadListeners.length;i++)this.onLoadListeners[i](this);this.onLoadListeners=[]},prototype.getDataSpp=function(){var d=this.dataSampleRange.duration(),spp=this.dataSamples/d;return spp},prototype.getSampleOffset=function(sample){var spp=this.getDataSpp();return stjs.trunc(Math.floor(spp*sample))},prototype._load=function(){var self=this;this.isLoading=!0,WaveData.concurrentAjaxRequests++,this.http.getArrayBuffer(this.src).subscribe(function(r){self.data8=new Uint8Array(r),self.data16=new Int16Array(r),self.data=self.data8,self.isLoading=!1,self._fireOnLoad()},function(req){null!=self.onerror&&self.onerror()})},prototype.getMinMax8=function(startidx,endidx){for(var min=0,max=0,from=Math.max(0,2*startidx),to=Math.min(this.data.length,2*endidx),j=from;j<to;j+=2){var downIdx=j,down=this.data[downIdx]-128,up=this.data[downIdx+1]-128;down<min&&(min=down),up>max&&(max=up)}var avg=Math.abs(min)+max;return avg},prototype.getMax8=function(startidx,endidx){var max=0;startidx=Math.max(0,startidx);for(var j=Math.max(0,startidx);j<Math.min(this.data.length,endidx);j++){var sample=this.data[j];sample>max&&(max=sample)}return max},prototype._getMinMax16=function(sampleOffset,minmax){var off=sampleOffset<<1,max=parseInt(this.data16[off]),min=parseInt(this.data16[off+1]);min=min<<8&255|min>>8&255,max=max<<8&255|max>>8&255,minmax[0]=min,minmax[1]=max},prototype.getMinMax16=function(sampleOffset,minmax){var off=sampleOffset<<2,min=0,max=0;if(off+3<this.data.length){var maxHi=this.data[off],maxLo=this.data[off+1],minHi=this.data[off+2],minLo=this.data[off+3];max=maxHi<<8|maxLo,min=minHi<<8|minLo}minmax[0]=min,minmax[1]=max}},{http:"Http",data8:"Uint8Array",data16:"Int16Array",onerror:"Callback0",dataSampleRange:"Range",
onLoadListeners:{name:"Array",arguments:["Callback1"]},data:"Uint8Array"},{});var Range=function(start,end){this.start=start,this.end=end};Range=stjs.extend(Range,null,[],function(constructor,prototype){prototype.start=0,prototype.end=0,constructor.fromRange=function(range){return new Range(range.start,range.end)},prototype.bePositiveRange=function(){this.start<0&&(this.end=this.end+Math.abs(this.start),this.start=0)},prototype.contains=function(value){return value>=this.start&&value<=this.end},prototype.containsRange=function(start,end){return this.contains(start)&&this.contains(end)},prototype.isInbound=function(boundRange){return this.start>=boundRange.start&&this.end<=boundRange.end},prototype.bound=function(boundRange){return new Range(this.start<boundRange.start?boundRange.start:this.start,this.end>boundRange.end?boundRange.end:this.end)},prototype.length=function(){return this.end-this.start+1},prototype.duration=function(){return this.end-this.start+1},prototype.equals=function(o){var range=o;return range.start==this.start&&range.end==this.end},prototype.toString=function(){return"["+this.start+" "+this.end+"]"},prototype.overlapsRange=function(range){return null!=range&&(range.contains(this.start)||range.contains(this.end)||this.contains(range.start))},prototype._containsRange=function(range){return this.containsRange(range.start,range.end)},prototype.intersection=function(range){if(!this.overlapsRange(range))return null;if(this._containsRange(range))return Range.fromRange(range);if(range._containsRange(this))return Range.fromRange(this);if(range.start>this.start){var min=range.start,max=this.end;return new Range(min,max)}var max=range.end,min=this.start;return new Range(min,max)},prototype.offset=function(offset){return new Range(this.start+offset,this.end+offset)},prototype.includeIn=function(biggerRange){if(this.start<biggerRange.start){var diff=biggerRange.start-this.start;this.start=biggerRange.start,this.end+=diff}if(this.end>biggerRange.end){var diff=this.end-biggerRange.end;this.end=biggerRange.end,this.start-=diff}return this},prototype.shift=function(samples){return new Range(this.start+samples,this.end+samples)}},{},{});var SubsItemState=function(){};SubsItemState=stjs.extend(SubsItemState,null,[],function(constructor,prototype){prototype.subtitles=null,prototype.isExpanded=!1,prototype.matchFound=!1,prototype.scrollLocked=!1,prototype.timeTrack=0},{subtitles:"Subtitles"},{});var VGControlComponent=function(props){React.Component.call(this,props)};VGControlComponent=stjs.extend(VGControlComponent,React.Component,[],function(constructor,prototype){constructor.REF_VGCOMPONENT="vgcomponent",constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.id=null,prototype.onClick=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]}},{}),prototype.render=function(){var styles={paddingTop:"6px",paddingLeft:"4px"};return React.DOM.div({className:"vg_iconControls__item vg_ddown vg_info",ref:VGControlComponent.REF_VGCOMPONENT,id:this.props.id,onClick:this.props.onClick},React.DOM.div({style:styles},"EDL"))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var DropDownMenu=function(title,className,items,itemToElement){this.title=title,this.className=className,this.items=null==items?[]:items,this.itemToElement=itemToElement};DropDownMenu=stjs.extend(DropDownMenu,null,[],function(constructor,prototype){prototype.title=null,prototype.className=null,prototype.items=null,prototype.itemToElement=null},{items:{name:"Array",arguments:["T"]},itemToElement:{name:"Function1",arguments:["T",{name:"ReactElement",arguments:["Object"]}]}},{});var TrackButtonsView=function(el){this.el=el,this.onEdlExportClickRx=Rx.Observable.fromEvent(el.querySelector(TrackButtonsView.selectorEDLExportButton),"click"),this.onEdlSaveClickRx=Rx.Observable.fromEvent(el.querySelector(TrackButtonsView.selectorEDLSaveButton),"click"),this.onMarkInRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.markInButtonSelector),"click"),this.onMarkOutRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.markOutButtonSelector),"click"),this.onNewTrackRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.newTrackButtonSelector),"click"),this.onHotKeysRx=Rx.Observable.fromEvent(this.el.querySelector(TrackButtonsView.hotkeysButtonSelector),"click")};TrackButtonsView=stjs.extend(TrackButtonsView,null,[],function(constructor,prototype){constructor.selector=".app-TrackButtonsView",constructor.markInButtonSelector=".view-markIn",constructor.markOutButtonSelector=".view-markOut",constructor.newTrackButtonSelector=".view-newTrack",constructor.selectorEDLExportButton=".edl .vg_icon-export",constructor.selectorEDLSaveButton=".edl .edl-save",constructor.hotkeysButtonSelector=".hotkeys",prototype.el=null,prototype.onMarkInRx=null,prototype.onMarkOutRx=null,prototype.onNewTrackRx=null,prototype.onEdlExportClickRx=null,prototype.onHotKeysRx=null,prototype.onEdlSaveClickRx=null},{el:"Element",onMarkInRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onMarkOutRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onNewTrackRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onEdlExportClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onHotKeysRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onEdlSaveClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]}},{});var Helpers=function(){};Helpers=stjs.extend(Helpers,null,[],function(constructor,prototype){constructor.playerWidthPercents=function(player){var width=player.container.clientWidth/window.document.body.clientWidth*100;return width+"%"}},{},{});var PluginProps=function(){};PluginProps=stjs.extend(PluginProps,null,[],function(constructor,prototype){prototype.name=null,prototype.key=null,prototype.player=null,prototype.containerWidth=0},{player:"VGPlayerPluginApi"},{});var HeaderComponent=function(props){React.Component.call(this,props)};HeaderComponent=stjs.extend(HeaderComponent,React.Component,[],function(constructor,prototype){constructor.headerContainerCss="vg-header",constructor.headerLeftCss="vg-header-left",constructor.headerItemCss="vg-header_menu-item",constructor.headerRightCss="vg-header-right",constructor.headerUserIcon="vg-icon vg-icon-user",constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],null,{},{}),constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],null,{},{}),prototype.render=function(){return React.DOM.div({className:HeaderComponent.headerContainerCss},React.DOM.div({className:HeaderComponent.headerLeftCss},React.DOM.span({className:HeaderComponent.headerItemCss},"Video Log"),React.DOM.span({className:HeaderComponent.headerItemCss},"Frame Match")),React.DOM.div({className:HeaderComponent.headerRightCss},React.DOM.span({className:HeaderComponent.headerItemCss},"Export"),React.DOM.span({className:HeaderComponent.headerItemCss},"Import"),React.DOM.span({className:HeaderComponent.headerUserIcon})))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var Position=function(left,top){this.left=left,this.top=top};Position=stjs.extend(Position,null,[],function(constructor,prototype){prototype.left=0,prototype.top=0},{},{});var SubClip=function(startTimecode,endTimecode,timecodeOverride){this.startTimecode=startTimecode,this.endTimecode=endTimecode,this.timecodeOverride=timecodeOverride};SubClip=stjs.extend(SubClip,null,[],function(constructor,prototype){prototype.id=null,prototype.title=null,prototype.startTimecode=null,prototype.endTimecode=null,prototype.timecodeOverride=null,prototype.thumbPath=null,prototype.createdById=null,prototype.thumbSec=0,constructor.fromEvent=function(logEvent,player){var t=player.getTimeline(),subClip=new SubClip(t.getTapeByTv(logEvent.startTv),t.getTapeByTv(logEvent.endTv),t.getTapeByFrame(0));return subClip.id=logEvent.subclipId,subClip.thumbSec=t.getSecByTv(logEvent.startTv),subClip}},{},{});var Curve=function(){};Curve=stjs.extend(Curve,null,[],function(constructor,prototype){prototype.range=null,prototype.bezierControlPoints=null},{range:"Range",bezierControlPoints:{name:"Array",arguments:["Point"]}},{});var DrawChannel=function(){};DrawChannel=stjs.extend(DrawChannel,null,[],function(constructor,prototype){prototype.startX=0,prototype.endX=0,prototype.sampleRange=null,prototype.uiSpp=0,prototype.channel=null,constructor.newDrawChannel=function(channel2,startX,endX,sampleRange,uiSpp){var dc=new DrawChannel;return dc.channel=channel2,dc.startX=startX,dc.endX=endX,dc.sampleRange=sampleRange,dc.uiSpp=uiSpp,dc}},{sampleRange:"Range",channel:"PlayerAudioTrack"},{});var SubItemProps=function(){};SubItemProps=stjs.extend(SubItemProps,null,[],function(constructor,prototype){prototype.key=null,prototype.subtitles=null,prototype.timeline=null,prototype.onClick=null,prototype.selectedFrameRx=null,prototype.isSubsActive=!1,prototype.switchBtnClick=null,prototype.selectedItemRx=null,prototype.visible=!1,prototype.searchValue=null,prototype.timeUpdateRx=null,prototype.activeRow=null,prototype.rowsViewType=null,prototype.timeTrack=0,prototype.isItemActive=!1,prototype.zoom=0},{subtitles:"Subtitles",timeline:"Timeline",onClick:{name:"Callback1",arguments:["DOMEvent"]},selectedFrameRx:{name:"Rx.Subject",arguments:[null]},switchBtnClick:{name:"Callback1",arguments:["DOMEvent"]},selectedItemRx:{name:"Rx.Subject",arguments:["Subtitles"]},timeUpdateRx:{name:"Rx.Observable",arguments:["TimeSample"]},activeRow:"SubtitleEntry"},{});var TrackComponent=function(props){React.Component.call(this,props)};TrackComponent=stjs.extend(TrackComponent,React.Component,[],function(constructor,prototype){constructor.TrackProps=function(track,current,onClick,onDelete){this.track=track,this.current=current,this.onClick=onClick,this.onDelete=onDelete},constructor.TrackProps=stjs.extend(constructor.TrackProps,null,[],function(constructor,prototype){prototype.track=null,prototype.current=!1,prototype.onClick=null,prototype.onDelete=null},{track:"Track",onClick:{name:"Callback1",arguments:["DOMEvent"]},onDelete:{name:"Callback1",arguments:["DOMEvent"]}},{}),prototype.render=function(){var className="track-name";return this.props.current&&(className+=" active"),React.DOM.li({className:"li-item"},React.DOM.div({className:"track-name-wrapper",onClick:this.props.onClick},React.DOM.span({className:className},this.props.track.displayName)),React.DOM.span({className:"delete",onClick:this.props.onDelete},"DELETE"))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ReactViewUtils=function(){};ReactViewUtils=stjs.extend(ReactViewUtils,null,[],function(constructor,prototype){constructor.CLASS_NAME="className",constructor.className=function(v1){return{className:v1}},constructor.classNames=function(_arguments){for(var result="",i=0;i<arguments.length;i++)result+=arguments[i]+" ";return ReactViewUtils.className(result)},constructor.VALUE="value",constructor.ON_SUBMIT="onSubmit",constructor.ON_CHANGE="onChange",constructor.ON_CLICK="onClick",constructor.REF="ref"},{},{});var SubtitleEntryState=function(){};SubtitleEntryState=stjs.extend(SubtitleEntryState,null,[],function(constructor,prototype){prototype.start=null,prototype.end=null,prototype.isActive=!1},{},{});var ConfirmDialogView=function(el){this.el=el};ConfirmDialogView=stjs.extend(ConfirmDialogView,null,[],function(constructor,prototype){prototype.el=null,constructor.selectorYesButton=".view-yesBtn",constructor.selectorNoButton=".view-noBtn",prototype.onYesSubscr=null,prototype.onNoSubscr=null,prototype.onYesNo=function(onYesCallback,onNoCallback){this.dispose(),this.onYesSubscr=this.onYesClick().subscribe(onYesCallback),this.onNoSubscr=this.onNoClick().subscribe(onNoCallback)},prototype.onYesClick=function(){return Rx.Observable.fromEvent(this.el.querySelector(ConfirmDialogView.selectorYesButton),"click")},prototype.onNoClick=function(){return Rx.Observable.fromEvent(this.el.querySelector(ConfirmDialogView.selectorNoButton),"click")},prototype.close=function(){this.dispose(),this.el.classList.remove("active"),this.el.classList.add("hidden")},prototype.open=function(){this.el.classList.add("active"),this.el.classList.remove("hidden")},prototype.dispose=function(){null!=this.onYesSubscr&&this.onYesSubscr.dispose(),null!=this.onNoSubscr&&this.onNoSubscr.dispose()}},{el:"Element",onYesSubscr:"Rx.Disposable",onNoSubscr:"Rx.Disposable"},{});var ZoomRangeProps=function(){};ZoomRangeProps=stjs.extend(ZoomRangeProps,null,[],function(constructor,prototype){prototype.points=null,prototype.min=0,prototype.max=0,prototype.value=0,prototype.onChange=null},{onChange:{name:"Callback1",arguments:["DOMEvent"]}},{});var ProPanelPlugins=function(){};ProPanelPlugins=stjs.extend(ProPanelPlugins,null,[],function(constructor,prototype){prototype.render=function(){var attributes={className:"vgtheme_pro-panel__right vg_default-bg vg_default"},div=React.DOM.div(attributes,"Plugins");return div}},{mixins:{name:"Array",arguments:[{name:"Class",arguments:["Object"]}]},statics:{name:"Map",arguments:[null,"Function0"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ShiftTimecodesProps=function(){};ShiftTimecodesProps=stjs.extend(ShiftTimecodesProps,null,[],function(constructor,prototype){prototype.startMsec=0,prototype.endMsec=0,prototype.shiftValue=null,prototype.shiftCaptionsRx=null,prototype.key=null},{shiftCaptionsRx:{name:"Rx.Subject",arguments:[null]}},{});var ArrayChangeEvent=function(){};ArrayChangeEvent=stjs.extend(ArrayChangeEvent,null,[],function(constructor,prototype){prototype.removed=null,prototype.object=null,prototype.index=0,prototype.type=null,prototype.addedCount=0},{removed:{name:"Array",arguments:["T"]},object:{name:"ObservableArray",arguments:["T"]}},{});var SafeAreaView=function(){};SafeAreaView=stjs.extend(SafeAreaView,null,[],function(constructor,prototype){prototype.markup=function(cssClass){},prototype.getElement=function(){},prototype.doApplyCrop=function(f){},prototype.safeAreaPosition=function(player,element){},prototype.toggleActionSafe=function(){},prototype.toggleCaptionSafe=function(){},prototype.isCaptionVisible=function(){},prototype.isActionVisible=function(){},prototype.toggleSafeArea=function(cssClass,el){},prototype.getAspectRatio=function(){},prototype.setAspectRatio=function(aspectRatio){},prototype.switchAspectRatio=function(newAspectRatio){}},{},{});var TrackData=function(track,events){this.track=track,this.events=events,this.state=TrackData.STATE_IMPORTED};TrackData=stjs.extend(TrackData,null,[],function(constructor,prototype){constructor.STATE_IMPORTING="importing",constructor.STATE_IMPORTED="imported",constructor.STATE_ERROR="error",constructor.STATE_SAVED="saved",prototype.track=null,prototype.events=null,prototype.state=null},{track:"Track",events:{name:"Array",arguments:["LogEvent"]}},{});var PlayerInfo=function(duration,hhmmss,timecodedDuration){this.durationSec=duration,this.durationSTC=hhmmss,this.durationTTC=timecodedDuration};PlayerInfo=stjs.extend(PlayerInfo,null,[],function(constructor,prototype){prototype.durationSec=0,prototype.durationSTC=null,prototype.durationTTC=null},{},{});var SubtitleEntryProps=function(){};SubtitleEntryProps=stjs.extend(SubtitleEntryProps,null,[],function(constructor,prototype){prototype.row=null,prototype.key=null,prototype.className=null,prototype.timeline=null,prototype.onClick=null,prototype.selectedFrameRx=null,prototype.searchValue=null,prototype.viewType=null,prototype.inActiveItem=!1,prototype.zoomRow=0,prototype.scrollLock=!1,prototype.activeRowRx=null},{row:"SubtitleEntry",timeline:"Timeline",onClick:{name:"Callback1",arguments:["DOMEvent"]},selectedFrameRx:{name:"Rx.Subject",arguments:[null]},activeRowRx:{name:"Rx.Subject",arguments:["SubtitleEntry"]}},{});var SubsSummaryProps=function(){};SubsSummaryProps=stjs.extend(SubsSummaryProps,null,[],function(constructor,prototype){prototype.key=null,prototype.onClick=null,prototype.className=null,prototype.subtitles=null,prototype.timeline=null,prototype.switchBtnClick=null,prototype.isSubsActive=!1,prototype.matchFound=!1,prototype.shiftCaptionsRx=null,prototype.scrollLocked=!1,prototype.onLock=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]},subtitles:"Subtitles",timeline:"Timeline",switchBtnClick:{name:"Callback1",arguments:["DOMEvent"]},shiftCaptionsRx:{name:"Rx.Subject",arguments:[null]},onLock:{name:"Callback1",arguments:["DOMEvent"]}},{});var ContainerProps=function(){};ContainerProps=stjs.extend(ContainerProps,null,[],function(constructor,prototype){prototype.key=null,prototype.isActive=!1,prototype.className=null},{children:{name:"Array",arguments:[{name:"ReactElement",arguments:["Object"]}]}},{});var ZoomComponent=function(props){React.Component.call(this,props)};ZoomComponent=stjs.extend(ZoomComponent,React.Component,[],function(constructor,prototype){prototype.render=function(){var onChange=stjs.bind(this,function(val){var input=val.target;this.props.zoomRx.onNext(parseInt(input.value))});return React.DOM.div({className:"zoom-pipka"},React.DOM.div({className:"zoom-pipka-out"}),React.DOM.div({className:"container"},React.DOM.div({className:"container-items"},React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"})),React.DOM.div({className:"vertical-pipka"},React.DOM.div({className:"one"}),React.DOM.div({className:"two"}),React.DOM.div({className:"three"}))),React.DOM.div({className:"zoomer"},React.DOM.input({type:"range",onChange:onChange}))),React.DOM.div({className:"zoom-pipka-in"}))},constructor.ZoomProps=function(zoomRx){this.zoomRx=zoomRx},constructor.ZoomProps=stjs.extend(constructor.ZoomProps,null,[],function(constructor,prototype){prototype.zoomRx=null},{zoomRx:{name:"Rx.Subject",arguments:[null]}},{})},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var LogEventV4=function(){};LogEventV4=stjs.extend(LogEventV4,null,[],function(constructor,prototype){prototype.version=0,prototype.trackId=null,prototype.ownerId=null,prototype.id=null,prototype.name=null,prototype.tags=null,prototype.timescale=0,prototype.startTv=0,prototype.endTv=0,prototype.notes=null,prototype.subclipId=null,prototype.lastModified=null,prototype.created=null,prototype.onChange=null},{tags:{name:"Array",arguments:["LogEventTag"]},lastModified:"Date",created:"Date",onChange:{name:"Callback1",arguments:["DOMEvent"]}},{});var VideoLogOptions=function(){};VideoLogOptions=stjs.extend(VideoLogOptions,null,[],function(constructor,prototype){constructor.RAM_STORAGE="RAM",constructor.REST_STORAGE="REST",prototype.storage=null,prototype.storageUrl=null,prototype.onStorageReady=null},{onStorageReady:{name:"Callback1",arguments:["VideologAsyncStorage"]}},{});var SidePanelComponent=function(props){React.Component.call(this,props)};SidePanelComponent=stjs.extend(SidePanelComponent,React.Component,[],function(constructor,prototype){constructor.sadePanelCss="vg-side-panel",constructor.trackAreaContainerCss="vg-track-area-container",constructor.trackInputContainerCss="vg-track-input-container",constructor.trackInputCss="vg-track-input",prototype.iconScrollRightCss="vg-icon-right vg-icon-scroll",prototype.trackDropDownCss="vg-track-dropdown",prototype.trackItemCss="vg-track-item",prototype.trackItemActionsCss="vg-track-item-actions",prototype.iconEditCss="vg-icon-edit",prototype.iconDeleteTrackCss="vg-icon-delete-track",prototype.trackActionsCss="vg-track-actions",prototype.iconEditTrackCss="vg-icon vg-icon-edit",prototype.iconAddTrackCss="vg-icon vg-icon-add-track",prototype.tagsSearchAreaCss="vg-tags-search-area",prototype.selectedEventsCss="vg-selected-events",prototype.selectedEventsInputCss="vg-selected-events-input",prototype.iconRightSelectedCss="vg-icon-right vg-icon-show-select-inactive",prototype.tagsSearchCss="vg-tags-search",prototype.tagsSearchInputCss="vg-tags-search-input",prototype.iconSearchRightCss="vg-icon-right vg-icon-search",prototype.sidePanelFooterCss="vg-side-panel-footer",prototype.sidePanelFooterContentCss="vg-side-panel-footer-content",prototype.sidePanelFooterInputCss="vg-side-panel-footer-content-input",prototype.footerInputDdownCss="vg-side-panel-footer-content-input-dropdown",prototype.iconCopyCss="vg-icon vg-icon-copy",prototype.iconSelectAllCss="vg-icon vg-icon-select-all-new",prototype.iconGarbageCss="vg-icon vg-icon-garbage",constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],null,{},{}),constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],null,{},{}),prototype.render=function(){return React.DOM.div({className:SidePanelComponent.sadePanelCss},React.DOM.div({className:SidePanelComponent.trackAreaContainerCss},React.DOM.div({className:SidePanelComponent.trackInputContainerCss},React.DOM.input({className:SidePanelComponent.trackInputCss,placeholder:"Master",disabled:"true"}),React.DOM.span({className:this.iconScrollRightCss}),React.DOM.ul({className:this.trackDropDownCss},React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"Subtitle"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))),React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"Caption"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))),React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"QC Report"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))),React.DOM.li({className:this.trackItemCss},React.DOM.div(null,"QC Problem"),React.DOM.div({className:this.trackItemActionsCss},React.DOM.span({className:this.iconEditCss}),React.DOM.span({className:this.iconDeleteTrackCss}))))),React.DOM.div({className:this.trackActionsCss},React.DOM.span({className:this.iconEditTrackCss}),React.DOM.span({className:this.iconAddTrackCss}))),React.DOM.div({className:this.tagsSearchAreaCss},React.DOM.div({className:this.selectedEventsCss},React.DOM.input({className:this.selectedEventsInputCss,placeholder:"Selected: 1",disabled:"true"}),React.DOM.span({className:this.iconRightSelectedCss})),React.DOM.div({className:this.tagsSearchCss},React.DOM.input({className:this.tagsSearchInputCss,type:"text",placeholder:"Search tag"}),React.DOM.span({className:this.iconSearchRightCss}))),React.DOM.div({className:this.sidePanelFooterCss},React.DOM.div({className:this.sidePanelFooterContentCss},React.DOM.input({className:this.sidePanelFooterInputCss,placeholder:"Tape Timecode",disabled:"true"}),React.DOM.span({className:this.iconScrollRightCss}),React.DOM.ul({className:this.footerInputDdownCss},React.DOM.li(null,"Tape Timecode"),React.DOM.li(null,"Frame Number"))),React.DOM.div(null,React.DOM.span({className:this.iconCopyCss}),React.DOM.span({className:this.iconSelectAllCss}),React.DOM.span({className:this.iconGarbageCss}))))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ControlsPanelComponent=function(props){React.Component.call(this,props)};ControlsPanelComponent=stjs.extend(ControlsPanelComponent,React.Component,[],function(constructor,prototype){prototype.playerControlsCss="vg-player-controls",prototype.filmstripTimelineCss="vg-player-filmstrip_timeline",prototype.timeCodeValueCss="timecode_value",prototype.filmstripTimecodeCss="vg-player-filmstrip_timecode",prototype.render=function(){return React.DOM.div({className:this.playerControlsCss},React.DOM.div({className:"vg-player-controls-timeline"},React.DOM.div({className:"vg-player-controls-timeline_ruler"},React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i(),React.DOM.i()),React.DOM.span({className:"vg-player-timeline-highlight",style:{width:"6%",left:"80%"}}),React.DOM.span({className:"vg-player-timeline-highlight",style:{width:"3.845%",left:"65%"}}),React.DOM.span({className:"vg-player-timeline-highlight",style:{width:"1%",left:"15%"}}),React.DOM.div({className:"vg-player-scrubber",style:{left:"35%"}},React.DOM.div({className:"vg-player-scrubber-tail"}),React.DOM.div({className:"vg-player-scrubber-nose"}))),React.DOM.div({className:"vg-player-controls-buttons"},React.DOM.div({className:"vg-player-controls-left"},React.DOM.span({className:"vg-icon vg-icon-information"}),React.DOM.span({className:"vg-icon vg-icon-volume"}),React.DOM.span({className:"vg-icon vg-icon-auto-black"})),React.DOM.div({className:"vg-player-controls-center"},React.DOM.div({className:"vg-controls-center group-1"},React.DOM.span({className:"vg-icon vg-icon-play-event"}),React.DOM.span({className:"vg-icon vg-icon-loop-event"}),React.DOM.span({className:"vg-icon vg-icon-bracket"}),React.DOM.span({className:"vg-icon vg-icon-bracket-close"}),React.DOM.span({className:"vg-icon vg-icon-new-event"})),React.DOM.div({className:"vg-controls-center group-2"},React.DOM.span({className:"vg-icon vg-icon-rewind"}),React.DOM.span({className:"vg-icon vg-icon-play"}),React.DOM.span({className:"vg-icon vg-icon-flash-forward"})),React.DOM.div({className:"vg-controls-center group-3"},React.DOM.span({className:"vg-icon vg-icon-full-screen"}),React.DOM.span({className:"vg-icon vg-icon-screen-shot"}),React.DOM.span({className:"vg-icon vg-icon-aspect-ratio"}),React.DOM.span({className:"vg-icon vg-icon-sub"}),React.DOM.span({className:"vg-icon vg-icon-save-zone"}))),React.DOM.div({className:"vg-player-controls-right"},React.DOM.input({className:"vg-controls-right-zoom-input",type:"range",min:"0",max:"100",step:"1"}))),React.DOM.div({className:"vg-player-filmstrip"},React.DOM.div({className:this.filmstripTimelineCss},this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!0,"00:01:21:00"),this.rulerDashes(!1,"")),React.DOM.div({className:"vg-player-filmstrip_canvas"},React.DOM.div({className:"filmstrip-crop-frame"}))))},prototype.rulerDashes=function(bigDash,timecode){var rulerDash=null;return bigDash&&(rulerDash=React.DOM.div({className:"bg-pyaka"},React.DOM.span({className:this.timeCodeValueCss},timecode))),React.DOM.div({className:this.filmstripTimecodeCss},React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),React.DOM.div({className:"sm-pyaka"}),rulerDash)},constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],null,{},{}),constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],null,{},{})},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var CSSStatus=function(rule,name,group){this.rule=rule,this.name=name,this.group=group,this.$id=CSSStatus.ids++};CSSStatus=stjs.extend(CSSStatus,null,[],function(constructor,prototype){constructor.ids=0,prototype.$id=0,prototype.rule=null,prototype.name=null,prototype.group=null},{rule:"MyCSSRule"},{});var SelectedLogEvent=function(logEventId,trackId,action){this.logEventId=logEventId,this.action=action,this.trackId=trackId};SelectedLogEvent=stjs.extend(SelectedLogEvent,null,[],function(constructor,prototype){constructor.EDIT_END="editend",constructor.EDIT_START="editstart",prototype.logEventId=null,prototype.action=null,prototype.trackId=null,prototype.isEditEnd=function(){return this.action.equals(SelectedLogEvent.EDIT_END)},prototype.isEditStart=function(){return this.action.equals(SelectedLogEvent.EDIT_START)}},{},{});var PluginComponent=function(props){React.Component.call(this,props)};PluginComponent=stjs.extend(PluginComponent,React.Component,[],function(constructor,prototype){prototype.render=function(){return null}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var Dimension=function(width,height){this.width=width,this.height=height};Dimension=stjs.extend(Dimension,null,[],function(constructor,prototype){prototype.width=0,prototype.height=0},{},{});var LogScale=function(m,k){this.m=m,this.k=k};LogScale=stjs.extend(LogScale,null,[],function(constructor,prototype){prototype.m=0,prototype.k=0,constructor._k=function(k_){return k_/(Math.E-1)},constructor.p=function(x){return Math.log((Math.E-1)*x+1)},constructor.sqrtScale=function(x,m,k_){var k=LogScale._k(LogScale._k(k_));return m*(Math.sqrt(4*k*(k-1)*LogScale.p(LogScale.p(x))/m+1)-1)/(2*(k-1))},constructor.invScale=function(x,m,k){var t=Math.sqrt(k*k-2*k+5),a=k-1,constPart=m+2*m/(a*(a+t)),varPart=2*m/(a*(a-t-2*a*x/m));return constPart+varPart},constructor._scale=function(x,m,k){return LogScale.sqrtScale(x,m,k)},constructor._lut=function(m,k,fun){var lut=[];lut[0]=0;for(var i=1;i<=m;i++){var d;d=null!=fun?fun(i,m,k):LogScale._scale(i,m,k),lut[i]=d}return lut},constructor.intLut=function(m,k,fun){var lut=[];lut[0]=0;for(var i=1;i<=m;i++){var d;d=null!=fun?fun(i,m,k):LogScale._waveScale(i,m,k),lut[i]=parseInt(d)}return lut},constructor.expCellFunction=function(minValue,maxValue,granularity){return function(x){return parseInt((granularity-1)*Math.log(x/minValue)/Math.log(maxValue/minValue))}},constructor.expLut=function(minValue,maxValue,granularity){var arr=new Array(granularity);arr[0]=parseInt(minValue);
for(var logfactor=Math.log(maxValue/minValue)/(granularity-1),i=1;i<granularity-1;i++){var r=arr[0]*Math.exp(i*logfactor);arr[i]=parseInt(Math.round(r))}return arr[granularity-1]=parseInt(maxValue),arr},prototype.scale=function(x){return LogScale._scale(x,this.m,this.k)},constructor._waveScale=function(x,m,k){return m*(Math.sqrt(4*k*(k-1)*x/m+1)-1)/(2*(k-1))},prototype.lut=function(fun){return LogScale._lut(this.m,this.k,fun)},prototype._intLut=function(fun){return LogScale.intLut(this.m,this.k,fun)}},{},{});var FancySettings=function(){};FancySettings=stjs.extend(FancySettings,null,[],function(constructor,prototype){prototype.padding=0,prototype.paddingBottom=0},{},{});var ShiftTimecodesState=function(){};ShiftTimecodesState=stjs.extend(ShiftTimecodesState,null,[],function(constructor,prototype){prototype.active=!1,prototype.timecode=null},{},{});var FCP=function(){};FCP=stjs.extend(FCP,null,[],function(constructor,prototype){prototype.version=0,prototype.sequence=null,constructor.Sequence=function(){},constructor.Sequence=stjs.extend(constructor.Sequence,null,[],function(constructor,prototype){prototype.id=null,prototype.name=null,prototype.duration=0,prototype.rate=null,prototype.timecode=null,prototype.media=null,prototype.markers=null,prototype.ismasterclip="FALSE",prototype.uuid=null},{rate:"FCP.Rate",timecode:"FCP.Timecode",media:"FCP.Media",markers:{name:"Array",arguments:["FCP.Marker"]}},{}),constructor.Timecode=function(){},constructor.Timecode=stjs.extend(constructor.Timecode,null,[],function(constructor,prototype){prototype.rate=null,prototype.frame=0,prototype.source=null,prototype.displayformat=null,prototype.string=null},{rate:"FCP.Rate"},{}),constructor.Rate=function(){},constructor.Rate=stjs.extend(constructor.Rate,null,[],function(constructor,prototype){prototype.ntsc=null,prototype.timebase=0},{},{}),constructor.Media=function(){},constructor.Media=stjs.extend(constructor.Media,null,[],function(constructor,prototype){prototype.video=null,prototype.audio=null},{video:"FCP.MediaElement",audio:"FCP.MediaElement"},{}),constructor.MediaElement=function(){},constructor.MediaElement=stjs.extend(constructor.MediaElement,null,[],function(constructor,prototype){prototype.track=null,prototype.format=null},{track:"FCP.Track",format:"FCP.MediaFormat"},{}),constructor.Track=function(){},constructor.Track=stjs.extend(constructor.Track,null,[],function(constructor,prototype){prototype.clipitem=null,prototype.enabled="TRUE"},{clipitem:{name:"Array",arguments:["FCP.ClipItem"]}},{}),constructor.ClipItem=function(){this.sourcetrack=new FCP.SourceTrack},constructor.ClipItem=stjs.extend(constructor.ClipItem,null,[],function(constructor,prototype){prototype.id=null,prototype.name=null,prototype.duration=0,prototype.rate=null,prototype.enabled="TRUE",prototype._in=0,prototype.out=0,prototype.start=0,prototype.end=0,prototype.masterclipid=null,prototype.comments=null,prototype.file=null,prototype.sourcetrack=null},{rate:"FCP.Rate",comments:"FCP.Comments",file:"FCP.ClipItemFile",sourcetrack:"FCP.SourceTrack"},{}),constructor.Comments=function(){},constructor.Comments=stjs.extend(constructor.Comments,null,[],function(constructor,prototype){prototype.mastercomment1=null,prototype.mastercomment2=null,prototype.mastercomment3=null,prototype.mastercomment4=null,prototype.clipcommenta=null,prototype.clipcommentb=null},{},{}),constructor.comment=function(masterComment1,masterComment2,masterComment3,masterComment4,clipCommenta,clipCommentb){var c=new FCP.Comments;return c.mastercomment1=masterComment1,c.mastercomment2=masterComment2,c.mastercomment3=masterComment3,c.mastercomment4=masterComment4,c.clipcommenta=clipCommenta,c.clipcommentb=clipCommentb,c},constructor.SourceTrack=function(){},constructor.SourceTrack=stjs.extend(constructor.SourceTrack,null,[],function(constructor,prototype){prototype.mediatype=null,prototype.trackindex=1},{},{}),constructor.ClipItemFile=function(){},constructor.ClipItemFile=stjs.extend(constructor.ClipItemFile,null,[],function(constructor,prototype){prototype.id=null,prototype.name=null,prototype.rate=null,prototype.duration=0,prototype.media=null,prototype.pathurl=null},{rate:"FCP.Rate",media:"FCP.FileMedia"},{}),constructor.FileMedia=function(){},constructor.FileMedia=stjs.extend(constructor.FileMedia,null,[],function(constructor,prototype){prototype.video=null,prototype.audio=null},{video:"FCP.FileMediaVideo",audio:"FCP.FileMediaAudio"},{}),constructor.FileMediaVideo=function(){},constructor.FileMediaVideo=stjs.extend(constructor.FileMediaVideo,null,[],function(constructor,prototype){prototype.samplecharacteristics=null,prototype.duration=0},{samplecharacteristics:"FCP.SampleCharacteristics"},{}),constructor.SampleCharacteristics=function(){},constructor.SampleCharacteristics=stjs.extend(constructor.SampleCharacteristics,null,[],function(constructor,prototype){prototype.width=null,prototype.height=null,prototype.anamorphic=null,prototype.pixelaspectratio=null,prototype.rate=null,prototype.samplerate=null},{rate:"FCP.Rate"},{}),constructor.FileMediaAudio=function(){},constructor.FileMediaAudio=stjs.extend(constructor.FileMediaAudio,null,[],function(constructor,prototype){prototype.channelcount=0,prototype.samplecharacteristics=null},{samplecharacteristics:"FCP.SampleCharacteristics"},{}),prototype.getClipItems=function(){return this.sequence.media.video.track.clipitem},prototype.getTimebase=function(){return this.sequence.rate.timebase},prototype.isDropFrame=function(){return"TRUE".equals(this.sequence.rate.ntsc)&&24!=Math.round(this.getTimebase())},constructor.readFromInputStream=function(_in){return null},constructor.rate=function(fps){var rate=new FCP.Rate;return rate.ntsc="FALSE",rate.timebase=fps,rate},constructor.MediaFormat=function(){},constructor.MediaFormat=stjs.extend(constructor.MediaFormat,null,[],function(constructor,prototype){prototype.samplecharacteristics=null},{samplecharacteristics:"FCP.SampleCharacteristics"},{}),constructor.sc=function(id,filename,_in,out,start,end,duration,timebase,width,height,type,comments){var sc=new FCP.SimpleClip;return sc.id=id,sc.filename=filename,sc._in=_in,sc.out=out,sc.start=start,sc.end=end,sc.duration=duration,sc.timebase=timebase,sc.width=width,sc.height=height,sc.type=type,sc.comments=comments,sc},constructor.SimpleClip=function(){},constructor.SimpleClip=stjs.extend(constructor.SimpleClip,null,[],function(constructor,prototype){prototype.id=null,prototype.filename=null,prototype._in=0,prototype.out=0,prototype.start=0,prototype.end=0,prototype.duration=0,prototype.timebase=0,prototype.width=0,prototype.height=0,prototype.type=null,prototype.masterClipId="TODO:UUID.randomUUID().toString().toUpperCase()",prototype.comments=null},{comments:"FCP.Comments"},{}),constructor.Marker=function(){},constructor.Marker=stjs.extend(constructor.Marker,null,[],function(constructor,prototype){prototype.name=null,prototype._in=0,prototype.out=0,prototype.comment=null},{},{}),constructor.marker=function(name,_in,out,comment){var m=new FCP.Marker;return m.name=name,m._in=_in,m.out=out,m.comment=comment,m},constructor.aclip=function(c){return c.id=c.id.replaceFirst("video","audio"),c.type="audio",FCP.clip(c)},constructor.clip=function(c){var ci=new FCP.ClipItem;return ci.id=c.id,ci.name="Clips",ci.duration=c.duration,ci.rate=FCP.rate(c.timebase),ci._in=c._in,ci.out=c.out,ci.start=c.start,ci.end=c.end,ci.comments=c.comments,ci.masterclipid=c.masterClipId,ci.file=new FCP.ClipItemFile,ci.file.id="file-"+c.filename,ci.file.name=c.filename,ci.file.rate=FCP.rate(c.timebase),ci.file.duration=c.duration,ci.file.pathurl="file://localhost/"+c.filename,ci.file.media=new FCP.FileMedia,ci.file.media.video=new FCP.FileMediaVideo,ci.file.media.video.samplecharacteristics=FCP.vsample(c.width,c.height,c.timebase),ci.file.media.video.duration=c.duration,ci.sourcetrack.mediatype=c.type,ci.file.media.audio=new FCP.FileMediaAudio,ci.file.media.audio.channelcount=2,ci.file.media.audio.samplecharacteristics=new FCP.SampleCharacteristics,ci.file.media.audio.samplecharacteristics.samplerate=48e3,ci},constructor.vsample=function(w,h,fps){var s=new FCP.SampleCharacteristics;return s.width=w,s.height=h,s.rate=FCP.rate(fps),s.anamorphic="FALSE",s}},{sequence:"FCP.Sequence"},{});var SubtitlesMenuComponent=function(props){React.Component.call(this,props)};SubtitlesMenuComponent=stjs.extend(SubtitlesMenuComponent,React.Component,[],function(constructor,prototype){constructor.SubtitlesMenuProps=function(){},constructor.SubtitlesMenuProps=stjs.extend(constructor.SubtitlesMenuProps,null,[],function(constructor,prototype){prototype.id=null,prototype.iconClass=null},{},{}),prototype.render=function(){return React.DOM.div({id:this.props.id,"class":"vg_iconControls__item vg_ddown vg_info"},React.DOM.span({"class":this.props.iconClass}))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContainerState=function(){};ContainerState=stjs.extend(ContainerState,null,[],function(constructor,prototype){prototype.isActive=!1},{},{});var ElementView=function(el){this.el=el};ElementView=stjs.extend(ElementView,null,[],function(constructor,prototype){prototype.el=null},{el:"Element"},{});var SubsHeaderProps=function(){};SubsHeaderProps=stjs.extend(SubsHeaderProps,null,[],function(constructor,prototype){prototype.size=0,prototype.handleSubmit=null,prototype.searchValue=null,prototype.onChange=null,prototype.onAddCaptions=null,prototype.onIconClick=null,prototype.rowsViewType=null,prototype.zoomRows=null,prototype.zoomPoints=null,prototype.zoomMin=0,prototype.zoomMax=0,prototype.zoomValue=0},{handleSubmit:{name:"Callback1",arguments:["DOMEvent"]},onChange:{name:"Callback1",arguments:["DOMEvent"]},onAddCaptions:"Callback0",onIconClick:{name:"Callback1",arguments:[null]},zoomRows:{name:"Callback1",arguments:["DOMEvent"]}},{});var SubsPluginState=function(){};SubsPluginState=stjs.extend(SubsPluginState,null,[],function(constructor,prototype){prototype.items=null,prototype.activeItem=null,prototype.isSubsActive=!1,prototype.visible=!1,prototype.rowsViewType=null,prototype.searchValue=null,prototype.timeTrack=0,prototype.zoom=0},{items:{name:"Array",arguments:["Subtitles"]},activeItem:"Subtitles"},{});var ObjectDetectPlugin=function(){};ObjectDetectPlugin=stjs.extend(ObjectDetectPlugin,null,[],null,{},{});var ContexterWordFilmStrip=function(props){React.Component.call(this,props)};ContexterWordFilmStrip=stjs.extend(ContexterWordFilmStrip,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.word=null,prototype.totalFrames=0,prototype.rainbow=null,prototype.videoFramesCount=0,prototype.containerWidth=0},{word:"ContexterWord",rainbow:"Rainbow"},{}),prototype.render=function(){var ref=stjs.bind(this,function(canvas){if(null!=canvas){canvas.width=this.props.containerWidth,canvas.height=30;var ctx=canvas.getContext("2d",null);ctx.fillStyle=this.getColorByValue(0),ctx.fillRect(0,0,canvas.width,canvas.height);for(var i=0;i<this.props.word.frames.length;i++){var fn=this.props.word.frames[i],value=this.props.word.values[fn];null==value&&(value=0),ctx.fillStyle=this.getColorByValue(value);var x=stjs.trunc(Math.round(fn*canvas.width/this.props.videoFramesCount));ctx.fillRect(x,0,1,30)}}});return React.DOM.canvas({className:"vg-contextrer-word-filmstrip",ref:ref})},prototype.getColorByValue=function(value){return"#"+this.props.rainbow.colourAt(Math.min(stjs.trunc(Math.round(300*value)),100))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var DropDownMenuItem=function(id,title,selected,onClick){this.id=id,this.title=title,this.selected=selected,this.onClick=onClick};DropDownMenuItem=stjs.extend(DropDownMenuItem,null,[],function(constructor,prototype){prototype.id=null,prototype.title=null,prototype.selected=!1,prototype.onClick=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]}},{});var IVideologAsyncStorage=function(){};IVideologAsyncStorage=stjs.extend(IVideologAsyncStorage,null,[],function(constructor,prototype){prototype.tracksOfProxy=function(proxyId,onLoad){},prototype.trackEvents=function(trackId,onLoad,onError){},prototype.tagNameById=function(tagId){},prototype.trackById=function(trackId,onLoad,onError){},prototype.eventById=function(eventId,onLoad,onError){},prototype.saveTrack=function(track,onLoad,onError){},prototype.saveEvent=function(logEvent,onLoad,onError){},prototype.deleteEvent=function(logEventId){},prototype.deleteTrack=function(track){},prototype.clearTrack=function(track){},prototype.getEventChangedRx=function(){},prototype.getEventDeletedRx=function(){},prototype.getTrackDeletedRx=function(){},prototype.getTrackChangedRx=function(){}},{},{});var VGIconComponent=function(props){React.Component.call(this,props)};VGIconComponent=stjs.extend(VGIconComponent,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.iconCode=null},{},{}),prototype.render=function(){return React.DOM.span({className:this.props.iconCode})},constructor.el=function(s){return React.createElement(VGIconComponent,{iconCode:s})}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var TagsInputComponent=function(props){React.Component.call(this,props)};TagsInputComponent=stjs.extend(TagsInputComponent,React.Component,[],function(constructor,prototype){constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],function(constructor,prototype){prototype.active=!1},{},{}),constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],null,{},{}),prototype.render=function(){return React.DOM.div({className:"vg-event-tag-ddown"},React.DOM.input({className:"vg-event-tag-ddown-input",placeholder:"+ Add tag"}),React.DOM.div({className:"vg-event-tag-ddown-tags"},React.DOM.ul({className:"vg-event-tag-ddown-tags-content"},React.DOM.li({className:"Bars and Tone"}),React.DOM.li({className:"Fade to Black"}),React.DOM.li({className:"Black"}),React.DOM.li({className:"Commercial Blank / Insert Ads"}),React.DOM.li({className:"Commercial Black"}),React.DOM.li({className:"Pull Commercial Black"}),React.DOM.li({className:"Bars and Tone"}),React.DOM.li({className:"Fade to Black"}))))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ProgressBar=function(props){React.Component.call(this,props)};ProgressBar=stjs.extend(ProgressBar,React.Component,[],function(constructor,prototype){constructor.Props=function(progress){this.progress=progress},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.progress=0},{},{}),prototype.render=function(){var progressSpan,progressWrapper,spanWidthStyle={width:this.props.progress+"%"},spanTextContent=this.props.progress>25?this.props.progress+"%":"";return progressSpan=React.DOM.span({className:"progress-bar__span",style:spanWidthStyle},spanTextContent),progressWrapper=React.DOM.div({className:"progress-bar__wrapper"},progressSpan)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var PluginData=function(plugin,icon){this.id=plugin.getId(),this.plugin=plugin,this.icon=icon};PluginData=stjs.extend(PluginData,null,[],function(constructor,prototype){prototype.id=null,prototype.plugin=null,prototype.container=null,prototype.icon=null},{plugin:"VGPlugin",container:"Element"},{});var SubsSummaryState=function(){};SubsSummaryState=stjs.extend(SubsSummaryState,null,[],function(constructor,prototype){prototype.isSubsActive=!1,prototype.className=null},{},{});var LeftTop=function(left,top){this.left=left,this.top=top};LeftTop=stjs.extend(LeftTop,null,[],function(constructor,prototype){prototype.left=null,prototype.top=null},{},{});var InfiniteProps=function(elementHeight,containerHeight,className){this.elementHeight=elementHeight,this.containerHeight=containerHeight,this.className=className};InfiniteProps=stjs.extend(InfiniteProps,null,[],function(constructor,prototype){prototype.useWindowAsScrollContainer=!1,prototype.displayBottomUpwards=!1,prototype.elementHeight=0,prototype.containerHeight=0,prototype.preloadBatchSize=null,prototype.preloadAdditionalHeight=null,prototype.className=null},{preloadBatchSize:"Object",preloadAdditionalHeight:"Object"},{});var ShotsView=function(){};ShotsView=stjs.extend(ShotsView,null,[],function(constructor,prototype){prototype.seekPrevShot=function(){throw new RuntimeException("seekPrevShot TODO")},prototype.seekNextShot=function(){throw new RuntimeException("seekNextShot TODO")}},{},{});var VGExposed=function(){};VGExposed=stjs.extend(VGExposed,null,[],function(constructor,prototype){constructor.CLIENT_SOLARR="solarr",prototype.client=function(){}},{},{});var VGContext=function(){};VGContext=stjs.extend(VGContext,null,[],function(constructor,prototype){prototype.className=null,prototype.tag=null,prototype.duration=0},{},{});var ProPanelIcons=function(){};ProPanelIcons=stjs.extend(ProPanelIcons,null,[],function(constructor,prototype){prototype.render=function(){var attributes={className:"vgtheme_pro-panel__left vg_panel-bg"},div=React.DOM.div(attributes,"Icons");return div}},{mixins:{name:"Array",arguments:[{name:"Class",arguments:["Object"]}]},statics:{name:"Map",arguments:[null,"Function0"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VGThemeProPanelView=function(container,parentView,className){VGView.call(this,container,parentView,className),this.render(VG["templates/theme_propanel.html"]({})),this.iconsEl=this.el.querySelector(".vgtheme_pro-panel__plugin-icons"),this.pluginsEl=this.el.querySelector(".vgtheme_pro-panel__plugin-views"),this.getMaxHeight(),this.setEventRx()};VGThemeProPanelView=stjs.extend(VGThemeProPanelView,VGView,[],function(constructor,prototype){prototype.iconsEl=null,prototype.pluginsEl=null,prototype.getMaxHeight=function(){},prototype.addPluginView=function(){throw new RuntimeException("addPluginView TODO")},prototype.activeIcon=null,prototype.setEventRx=function(){var iconsElRx=Rx.Observable.fromEvent(this.iconsEl,"click"),iconRx=iconsElRx.filter(function(e){return e.target.classList.contains("vg_icon--plugin")}).map(function(e){return e.target});iconRx.subscribe(stjs.bind(this,function(icon){icon!=this.activeIcon&&(this.deactivateIcon(),this.activeIcon=icon),this.activeIcon.classList.toggle("active")}))},prototype.deactivateIcon=function(){null!=this.activeIcon&&this.activeIcon.classList.remove("active")}},{iconsEl:"Element",pluginsEl:"Element",activeIcon:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGThemeView=function(container,parentView,className,context){VGView.call(this,container,parentView,className),this.render(VG["templates/vg_addon-control.html"](context)),this.el.className="vg_addonview",this.icon=this.el.querySelector("."+context.iconClass),this.list=this.el.querySelector("."+context[VGThemeView.tracksClass]),this.tracksInfo=this.el.querySelector(".vg_tracksInfo"),this.header=this.el.querySelector(".vg_headerText")};VGThemeView=stjs.extend(VGThemeView,VGView,[],function(constructor,prototype){constructor.tracksClass="tracksClass",prototype.icon=null,prototype.list=null,prototype.tracksInfo=null,prototype.header=null,constructor.magicContext=function(iconClass,header,tracksClass){var m={};return m.header=header,m.iconClass=iconClass,m[VGThemeView.tracksClass]=tracksClass,m}},{icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var DropDownItem=function(id,title){this.id=id,this.title=title};DropDownItem=stjs.extend(DropDownItem,null,[],function(constructor,prototype){constructor.selectorItem=".view-item",prototype.id=null,prototype.title=null,prototype.ownTarget=!1,prototype.getInnerHTML=function(className){return VGTemplates.dropDownItemTemplate(className+"__list-item",this)},prototype.createElement=function(className){var el=window.document.createElement("li");return el.className=className+"__list-item",el.innerHTML=this.getInnerHTML(className),el},prototype.updateElement=function(el){var itemEl=el.querySelector(DropDownItem.selectorItem);itemEl.innerHTML=this.title,itemEl.setAttribute("itemID",this.id)}},{},{});var FrameCropCaptureControl=function(player,onCaptureOpen){this.player=player,this.onCaptureOpen=onCaptureOpen};FrameCropCaptureControl=stjs.extend(FrameCropCaptureControl,null,[VGControl],function(constructor,prototype){prototype.cameraClickRx=null,prototype.player=null,prototype.onCaptureOpen=null,prototype.getControlEl=function(controlPanel){var cameraEl=VGTemplates.elFromHTML(VGTemplates.addonControl("vg_camera","vg_icon-camera"),this.player.container.ownerDocument);return this.cameraClickRx=Rx.Observable.fromEvent(cameraEl,"click",function(e){return cameraEl}),this.cameraClickRx.subscribe(stjs.bind(this,function(_el){var canvas=this.player.getView().freezeVideo();this.onCaptureOpen(canvas)})),cameraEl}},{cameraClickRx:{name:"Rx.Observable",arguments:["Element"]},player:"PlayerImpl",onCaptureOpen:{name:"Callback1",arguments:["Canvas"]}},{});var AddMediaControl=function(player,onIconClick){this.player=player,this.onIconClick=onIconClick};AddMediaControl=stjs.extend(AddMediaControl,null,[VGControl],function(constructor,prototype){prototype.iconClickRx=null,prototype.player=null,prototype.onIconClick=null,prototype.getControlEl=function(controlPanel){var iconEl=VGTemplates.elFromHTML(VGTemplates.addonControl("vg_camera","vg_icon-plus"),this.player.container.ownerDocument);return this.iconClickRx=Rx.Observable.fromEvent(iconEl,"click",function(e){return iconEl}),this.iconClickRx.subscribe(stjs.bind(this,function(_el){this.player.pause(),this.onIconClick(this.player)})),iconEl}},{iconClickRx:{name:"Rx.Observable",arguments:["Element"]},player:"PlayerImpl",onIconClick:{name:"Callback1",arguments:["PlayerImpl"]}},{});var FrameCaptureView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this._parent=player.getView()};FrameCaptureView=stjs.extend(FrameCaptureView,VGView,[VGControl],function(constructor,prototype){prototype.cameraClickRx=null,prototype._parent=null,prototype.player=null,prototype.getControlEl=function(controlPanel){var context={id:"vg_camera",iconClass:"vg_icon-camera"},cameraEl=VGTemplates.elFromHTML(VGTemplates.addonControlDepr(context),this.player.container.ownerDocument);this.cameraClickRx=Rx.Observable.fromEvent(cameraEl,"click",function(e){return cameraEl});var link=window.document.createElement("a");return this.cameraClickRx.subscribe(stjs.bind(this,function(_el){this._parent.freezeVideo(),link.href=this._parent.getFrozenCanvas().toDataURL("image/jpeg");var timecode=this.player.getCurrentStandardTimecode();link.download="Screenshot-"+timecode.replaceAll(":","-")+".jpg",link.click()})),cameraEl}},{cameraClickRx:{name:"Rx.Observable",arguments:["Element"]},_parent:"SkinnedPlayerView",player:"PlayerImpl",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FilmstripView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this.render(VG["templates/player/filmstrip.html"]({})),this.el.className="vg_filmstrip",this.canvas=this.el.querySelector(".vg_filmstrip__canvas"),player.getFilmStripDrawer(stjs.bind(this,function(drawer){this.drawer=drawer,this.draw()})),player.getTimelineRx().subscribe(stjs.bind(this,function(timeline){null!=this.drawer&&timeline.getSeekableDurationSec()!=this.lastSeekableDuration&&this.draw()}));var resizeRx=Rx.Observable.fromEvent(window,"resize");this.resizeSubscription=resizeRx.debounce(500).subscribe(stjs.bind(this,function(e){return this.draw()}))};FilmstripView=stjs.extend(FilmstripView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.drawer=null,prototype.resizeSubscription=null,prototype.canvas=null,prototype.fromFrame=0,prototype.toFrame=0,prototype.hasRange=!1,prototype.lastSeekableDuration=0,prototype.draw=function(){if(!(null==this.drawer||this.canvas.clientWidth<=0||this.canvas.clientHeight<=0)){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight;var videoWidth=this.drawer.getInfo().width,videoHeight=this.drawer.getInfo().height,aspect=videoWidth/videoHeight,frameWidth=this.canvas.height*aspect,framesToDraw=stjs.trunc(Math.ceil(this.canvas.width/frameWidth)),timeline=this.player.getTimeline(),fromFrame=this.hasRange?this.fromFrame:0,toFrame=this.hasRange?this.toFrame:timeline.getFrameBySec(timeline.getSeekableDurationSec())-1;this.lastSeekableDuration=timeline.getSeekableDurationSec(),this.drawer.drawFilmstrip(this.canvas,fromFrame,toFrame,framesToDraw,!1,stjs.bind(this,function(){this.player.getLog().debug("filmstrip rendered")}),stjs.bind(this,function(err){this.player.getLog().error(err)}))}},prototype.setRange=function(fromFrame,toFrame){this.fromFrame=fromFrame,this.toFrame=toFrame-1,this.hasRange=!0},prototype.clearRange=function(){this.hasRange=!1},prototype.close=function(){CloseableView.prototype.close.call(this),null!=this.drawer&&this.drawer.close(),this.resizeSubscription.dispose()}},{player:"PlayerImpl",drawer:"FilmStripDrawer",resizeSubscription:"Rx.Disposable",canvas:"Canvas",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGGenericView=function(){CloseableView.call(this)};VGGenericView=stjs.extend(VGGenericView,CloseableView,[],function(constructor,prototype){prototype.el=null,prototype.container=null,prototype.getElement=function(){return this.el},prototype.appendTo=function(container){this.container=container,this.container.appendChild(this.el)}},{el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var PluginsPanelView=function(player,container,isCollapsed,parentView,className,toggle){VGView.call(this,container,parentView,className),this.player=player,this.toggle=toggle,this.render(VG["templates/player/propanel.html"]({})),this.el.className=ViewConsts.VG_PRO_PANEL_CONTAINER,isCollapsed&&this.el.classList.add("hidden"),this.overlay=this.el.querySelector(".vg_proPanel__overlay"),this.scrubTrackEl=this.overlay.querySelector(".vg_proPanel__scrubtrack");var observable=Rx.Observable.fromEvent(this.overlay,"mousemove"),scrub=stjs.bind(this,function(e){if(player.getView().scrubbing){var width=this.overlay.clientWidth,x=VGView.offsetX(e.clientX,this.overlay),left=x/width*100;this.scrubTrackEl.style.left=left+"%"}}),observer=Rx.Observer.create(scrub);this.overlayMoveRx=Rx.Subject.create(observer,observable),this.overlayDownRx=Rx.Observable.fromEvent(this.overlay,"mousedown"),this.overlayMoveRx.subscribe(scrub),player.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){if(!player.getView().scrubbing){var sec=t.sec;this.scrubTrackEl.style.left=sec/player.getDurationSec()*100+"%"}})),null!=toggle&&toggle.addEventListener("click",stjs.bind(this,function(e){this.toggleActive(this.el)}))};PluginsPanelView=stjs.extend(PluginsPanelView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.toggle=null,prototype.overlay=null,prototype.overlayMoveRx=null,prototype.overlayDownRx=null,prototype.scrubTrackEl=null},{player:"SkinnedPlayer",toggle:"Element",overlay:"Element",overlayMoveRx:{name:"Rx.Subject",arguments:["DOMEvent"]},overlayDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},scrubTrackEl:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var EventComponent=function(props){React.Component.call(this,props)};EventComponent=stjs.extend(EventComponent,React.Component,[],function(constructor,prototype){constructor.doNothing=function(){},constructor.EVENT_CANVAS_HEIGHT=46,constructor.filmstripAbortFuncs={},constructor.nextCanvasId=0,constructor.EventProps=function(event,timeline,filmstripDrawer,width,current,selectEventRx,deleteEventRx,log){this.event=event,this.timeline=timeline,this.filmstripDrawer=filmstripDrawer,this.width=width,this.current=current,this.selectEventRx=selectEventRx,this.deleteEventRx=deleteEventRx,this.log=log},constructor.EventProps=stjs.extend(constructor.EventProps,null,[],function(constructor,prototype){prototype.event=null,prototype.timeline=null,prototype.filmstripDrawer=null,prototype.selectEventRx=null,prototype.deleteEventRx=null,prototype.width=0,prototype.current=!1,prototype.log=null},{event:"LogEvent",timeline:"Timeline",filmstripDrawer:"FilmStripDrawer",selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log"},{}),prototype.convertedTv=function(tv){return Utils.convertTv(tv,this.props.event.timescale,this.props.timeline.getTimeScale())},prototype.render=function(){var event=this.props.event,startFrame=this.props.timeline.getFrameByTv(this.convertedTv(event.startTv)),endFrame=this.props.timeline.getFrameByTv(this.convertedTv(event.endTv)),startTimecode=this.props.timeline.getTapeByTv(this.convertedTv(event.startTv)),endTimecode=this.props.timeline.getTapeByTv(this.convertedTv(event.endTv)),duration=this.props.timeline.getFrameByTv(this.convertedTv(event.endTv-event.startTv)),selectEvent=stjs.bind(this,function(e){return this.props.selectEventRx.onNext(event)}),canvasRef=(stjs.bind(this,function(e){return this.props.deleteEventRx.onNext(event)}),stjs.bind(this,function(div){if(null!=div){var canvas;div.hasChildNodes()?canvas=div.firstChild:(canvas=window.document.createElement("canvas"),canvas.id=EventComponent.nextCanvasId++ +"");var abortFunc=EventComponent.filmstripAbortFuncs[canvas.id];null!=abortFunc&&(delete EventComponent.filmstripAbortFuncs[canvas.id],abortFunc());var h=EventComponent.EVENT_CANVAS_HEIGHT,w=div.clientWidth;canvas.style.setProperty("width","100%",null),canvas.style.setProperty("height","100%",null);var frames=stjs.trunc(Math.max(1,Math.round(80*w/(144*h))));canvas.height=h,canvas.width=stjs.trunc(144*h/80)*frames,abortFunc=this.props.filmstripDrawer.drawFilmstrip(canvas,startFrame,endFrame,frames,!0,EventComponent.doNothing,stjs.bind(this.props.log,"error")),EventComponent.filmstripAbortFuncs[canvas.id]=abortFunc,div.hasChildNodes()||div.appendChild(canvas)}})),eventData=React.DOM.li({className:"vg-li-data"},React.DOM.div({className:"vg-log-data"},React.DOM.div({className:"vg_event__data"},React.DOM.div({className:"data"},React.DOM.div({className:"start-end-timecode"},React.DOM.span({className:"start_end_timecode"},React.DOM.span({},startTimecode),React.DOM.span({},"- "+endTimecode))),React.DOM.span({className:"duration"},React.DOM.span({}," "+duration)),React.DOM.div({className:"data-keyword-container"},React.DOM.span({className:"data-keyword"},React.DOM.span({},event.name))))))),eventFilmstrip=React.DOM.li({className:"vg-li-filmstrip"
},React.DOM.div({className:"vg-log-filmstrip",style:{width:this.props.width+"%"},ref:canvasRef}));return React.DOM.li({onClick:selectEvent},React.DOM.div({className:"vg-log-event"},React.DOM.ul({},eventData,eventFilmstrip)))}},{doNothing:"Callback0",filmstripAbortFuncs:{name:"Map",arguments:[null,"Callback0"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var LogEventTag=function(id,displayName){this.id=id,this.displayName=displayName,this.created=Utils.currentTimeMillis()};LogEventTag=stjs.extend(LogEventTag,null,[],function(constructor,prototype){prototype.id=null,prototype.displayName=null,prototype.created=0},{},{});var TimeScrubberView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this.duration=player.getSeekableDurationSec();var durationStr=this.durationString(this.duration);this.render(VG["templates/player/timescrubber.html"]({duration:durationStr})),this.el.className="vg_timescrubber",this.currentTimeEl=this.el.querySelector(".vg_current-time"),this.durationEl=this.el.querySelector(".vg_duration-time"),this.scrubberEl=this.el.querySelector(".vg_scrubber"),this.scrubberPlayedEl=this.scrubberEl.querySelector(".vg_scrubber__played"),this.scrubberBufferedEl=this.scrubberEl.querySelector(".vg_scrubber__buffered"),this.timescrubberWrap=this.el.querySelector(".vg_timescrubber__wrap");var observable=Rx.Observable.fromEvent(this.timescrubberWrap,"mousemove"),scrub=stjs.bind(this,function(e){if(this.player.getView().scrubbing){var x=VGView.offsetX(e.clientX,this.timescrubberWrap);this.scrubberPlayedEl.style.width=x+"px"}}),observer=Rx.Observer.create(scrub);this.scrubberMoveRx=Rx.Subject.create(observer,observable),this.scrubberDownRx=Rx.Observable.fromEvent(this.scrubberEl,"mousedown"),this.scrubberMoveRx.subscribe(scrub),player.getPlayRx().subscribe(stjs.bind(this,function(e){this.currentTimeEl.classList.contains("active")||this.currentTimeEl.classList.add("active")})),player.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){this.updateCurrentTime(t),this.player.getView().scrubbing||(this.updateScrubberPlayed(t),this.updateBuffered(player.getBuffered()))})),player.getTimelineRx().subscribe(stjs.bind(this,function(t){t.getSeekableDurationSec()!=this.duration&&(this.updateDuration(t),this.updateScrubberPlayed(player.getTimeSample()),this.updateBuffered(player.getBuffered()))})),player.addEventListener("progress",stjs.bind(this,function(buffered){this.updateBuffered(buffered)}))};TimeScrubberView=stjs.extend(TimeScrubberView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.scrubberEl=null,prototype.scrubberMoveRx=null,prototype.scrubberDownRx=null,prototype.currentTimeEl=null,prototype.scrubberPlayedEl=null,prototype.scrubberBufferedEl=null,prototype.durationEl=null,prototype.timescrubberWrap=null,prototype.duration=0,prototype.durationString=function(duration){var durationStr=!isFinite(duration)||isNaN(duration)?"Unknown":Utils.hhmmss(stjs.trunc(1e3*duration));return durationStr},prototype.updateDuration=function(t){this.duration=t.getSeekableDurationSec(),this.player.getLog().debug("updateDuration",this.duration);var durationStr=this.durationString(this.duration);this.durationEl.innerHTML=durationStr},prototype.updateScrubberPlayed=function(t){var sec=t.sec;this.scrubberPlayedEl.style.width=sec/this.duration*100+"%"},prototype.updateCurrentTime=function(t){this.currentTimeEl.innerHTML=Utils.hhmmss(stjs.trunc(1e3*t.sec))},prototype.updateBuffered=function(buffered){this.scrubberBufferedEl.innerHTML="";for(var i=0;i<buffered.length;i++)if(!(this.player.getCurrentTime()<buffered[i].start||this.player.getCurrentTime()>buffered[i].end)){var startSec=buffered[i].start,left=startSec/this.duration*100,width=(buffered[i].end-startSec)/this.player.getDurationSec()*100,bufferedEl=window.document.createElement("div");bufferedEl.style.left=Math.min(100,left)+"%",bufferedEl.style.width=Math.min(100-left,width)+"%",this.scrubberBufferedEl.appendChild(bufferedEl)}}},{player:"SkinnedPlayer",scrubberEl:"Element",scrubberMoveRx:{name:"Rx.Subject",arguments:["DOMEvent"]},scrubberDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},currentTimeEl:"Element",scrubberPlayedEl:"Element",scrubberBufferedEl:"Element",durationEl:"Element",timescrubberWrap:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FrameSelectionsView=function(frameSelections,container,parentView,className){VGView.call(this,container,parentView,className),this.frameSelections=frameSelections;var self=this;self.render(""),self.el.className="vg_selections",frameSelections.selectionsChangeRx.subscribe(stjs.bind(this,function(change){var selection;0!=change.removed.length?(selection=change.removed[0],this.removeSelection(selection)):(selection=change.object.get(change.index),this.appendSelection(selection))}))};FrameSelectionsView=stjs.extend(FrameSelectionsView,VGView,[],function(constructor,prototype){prototype.frameSelections=null,prototype.appendSelection=function(sel){var context={left:sel.start/sel.duration*100+"%",width:(sel.end-sel.start)/sel.duration*100+"%",startHhmmss:Utils.hhmmss(stjs.trunc(1e3*sel.start)),endHhmmss:Utils.hhmmss(stjs.trunc(1e3*sel.end))},selectionEl=window.document.createElement("div");this.el.appendChild(selectionEl),selectionEl.innerHTML=VG["templates/player/selections.html"](context),sel.el=selectionEl},prototype.removeSelection=function(selection){this.el.removeChild(selection.el)}},{frameSelections:"FrameSelections",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var MaskedTimecodeInput=function(inputEl,mask){this.input=inputEl,this.mask=mask||"",this.input.value=this.mask;var self=this;this.input.addEventListener("input",stjs.bind(this,function(e){var input=e.target,beforeNew=input.value.substring(0,Math.min(self.newTextStart,input.selectionEnd)),newText=this.cleanInput(input.value.substring(Math.min(self.newTextStart,input.selectionEnd),input.selectionEnd),!1),afterNew=input.value.substring(input.selectionEnd),cursorAt=beforeNew.length+newText.length;if(Utils.isNotEmpty(self.mask)){beforeNew=this.maskText(this.cleanInput(beforeNew,!0),0,beforeNew.length),cursorAt=beforeNew.length+this.maskText(newText,beforeNew.length,0).length;var minNewTextLength=Math.max(0,self.mask.length-beforeNew.length-afterNew.length);newText=this.maskText(newText,beforeNew.length,minNewTextLength);var requiredAfterNewLength=Math.max(0,self.mask.length-beforeNew.length-newText.length);afterNew=input.value.substring(input.value.length-requiredAfterNewLength),afterNew=this.maskText(this.cleanInput(afterNew,!0),self.mask.length-afterNew.length,afterNew.length)}input.value=beforeNew+newText+afterNew,input.selectionStart=cursorAt,input.selectionEnd=cursorAt})),this.input.addEventListener("keydown",function(e){var input=e.target;self.newTextStart=input.selectionStart})};MaskedTimecodeInput=stjs.extend(MaskedTimecodeInput,null,[],function(constructor,prototype){prototype.input=null,prototype.mask=null,prototype.newTextStart=0,prototype.maskText=function(text,offset,minLength){if(null==this.mask)return text;var self=this,result="",mask=self.mask.substring(offset);text=text.substring(0);for(var i=0;i<mask.length&&!Utils.isBlank(text);i++){var substring=mask.substring(i,i+1);"_".equals(substring)?(result+=text.substring(0,1),text=text.substring(1)):result+=substring}return minLength>0&&result.length<minLength&&(result+=mask.substring(result.length,minLength)),result},prototype.cleanInput=function(text,leaveUnderscore){for(var result="",re=leaveUnderscore?new RegExp("^[0-9_]$"):new RegExp("^[0-9]$"),i=0;i<text.length;i++){var x=text.substring(i,i+1);re.test(x)&&(result+=x)}return result}},{input:"Input"},{});var TagComponent=function(props){React.Component.call(this,props)};TagComponent=stjs.extend(TagComponent,React.Component,[],function(constructor,prototype){constructor.iconDelete="vg-icon vg-icon-delete",constructor.eventTagCss="vg-event-tag",prototype.deleteIconClick=null,constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],function(constructor,prototype){prototype.disabled=!1},{},{}),constructor.Props=function(id,tagName){this.id=id,this.displayName=tagName,this.created=Utils.currentTimeMillis()},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.id=null,prototype.displayName=null,prototype.created=0,prototype.onClick=null,prototype.onRemove=null},{onClick:{name:"Callback1",arguments:["DOMEvent"]},onRemove:{name:"Callback1",arguments:["DOMEvent"]}},{}),constructor.eventTag=function(id,tagName){var props={};return props.displayName=tagName,React.createElement(TagComponent,props)},prototype.render=function(){var deleteIcon=null,s=new TagComponent.State;return s.disabled||(deleteIcon=React.DOM.span({className:TagComponent.iconDelete,onClick:this.props.onRemove})),React.DOM.span({className:TagComponent.eventTagCss},this.props.displayName,deleteIcon)}},{deleteIconClick:{name:"Callback1",arguments:["Object"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var TimeCodeView=function(el){this.el=el,this.tapeEl=Utils.querySelectorNotNull(el,TimeCodeView.selectorTapeTimeformat),this.standardEl=Utils.querySelectorNotNull(el,TimeCodeView.selectorStandardFormat),this.frameEl=Utils.querySelectorNotNull(el,TimeCodeView.selectorFrameFormat),this.activeEl=this.tapeEl};TimeCodeView=stjs.extend(TimeCodeView,null,[],function(constructor,prototype){constructor.selector=".app-timecodeView",prototype.el=null,constructor.FORMAT_TAPE="tape timecode",constructor.FORMAT_STANDARD="standard timecode",constructor.FORMAT_FRAME="frame",constructor.selectorTapeTimeformat="[data-timeformat='tape']",constructor.selectorStandardFormat="[data-timeformat='standard']",constructor.selectorFrameFormat="[data-timeformat='frame']",prototype.tapeEl=null,prototype.standardEl=null,prototype.frameEl=null,prototype.activeEl=null,prototype.showAsTape=function(){this.activeEl.classList.toggle("active"),this.tapeEl.classList.toggle("active"),this.activeEl=this.tapeEl},prototype.showAsStandard=function(){this.activeEl.classList.toggle("active"),this.standardEl.classList.toggle("active"),this.activeEl=this.standardEl},prototype.showAsFrame=function(){this.activeEl.classList.toggle("active"),this.frameEl.classList.toggle("active"),this.activeEl=this.frameEl},prototype.changeFormat=function(timeFormat){switch(timeFormat){case TimeCodeView.FORMAT_TAPE:this.showAsTape();break;case TimeCodeView.FORMAT_STANDARD:this.showAsStandard();break;case TimeCodeView.FORMAT_FRAME:this.showAsFrame();break;default:throw new RuntimeException("unknown time format"+timeFormat)}}},{el:"Element",tapeEl:"Element",standardEl:"Element",frameEl:"Element",activeEl:"Element"},{});var DropDown=function(container){this.container=container||window.document.createElement("div");var comment=window.document.createComment(Utils.constructorName(this));this.container.appendChild(comment),this.container.insertAdjacentHTML("beforeend",VG["templates/ddown.html"]({})),this.el=this.container.firstElementChild;var self=this;Utils.addMethod(this.el,"getView",function(){return self}),this.toggler=this.el.querySelector(".vgtheme__ddown-toggler"),this.list=this.el.querySelector(".vgtheme__ddown-list"),this.listHeader=this.el.querySelector(".vgtheme__ddown-list__header"),this.selected=this.el.querySelector(".vgtheme__ddown-selected"),this.setEventRx()};DropDown=stjs.extend(DropDown,null,[],function(constructor,prototype){prototype.container=null,prototype.el=null,prototype.toggler=null,prototype.list=null,prototype.listHeader=null,prototype.selected=null,prototype.togglerRx=null,prototype.listRx=null,prototype.deleteRx=null,prototype.setEventRx=function(){var self=this,toggler=this.toggler;this.togglerRx=Rx.Observable.fromEvent(toggler,"click").filter(function(e){return e.target.isSameNode(toggler)}),this.togglerRx.subscribe(function(e){return toggler.classList.toggle("active")}),this.listRx=Rx.Observable.fromEvent(this.list,"click");this.listRx.filter(function(e){return e.target.classList.contains("vgtheme__ddown-name")}).map(function(e){return e.target});this.deleteRx=this.listRx.filter(function(e){return e.target.classList.contains("vgtheme__ddown-delete")}).map(function(e){return e.target}),this.deleteRx.subscribe(function(item){self.list.removeChild(item.parentElement);var nextActive=self.list.querySelector(".vgtheme__ddown-item vgtheme__ddown-name");null!=nextActive?self.selectItem(nextActive):self.selected.innerHTML=""})},prototype.selectItem=function(item){item.classList.add("active"),this.selected.innerHTML=item.innerHTML}},{container:"Element",el:"Element",toggler:"Element",list:"Element",listHeader:"Element",selected:"Element",togglerRx:{name:"Rx.Observable",arguments:["DOMEvent"]},listRx:{name:"Rx.Observable",arguments:["DOMEvent"]},deleteRx:{name:"Rx.Observable",arguments:["Element"]}},{});var TimecodeHelpers=function(){};TimecodeHelpers=stjs.extend(TimecodeHelpers,null,[],function(constructor,prototype){constructor.getNdftcByTv=function(player,tValue){var playerTimeline=player.getTimeline();return playerTimeline.getTapeByTv(tValue)},constructor.getTimecodedDuration=function(player,frames){var playerTimeline=player.getTimeline();return playerTimeline.getTapeTimecode().getTimecodedDuration(frames)},constructor.getTapeTimecodeByTv=function(player,tv){var timeline=player.getTimeline();return timeline.getTapeTimecode().getTimecodeAtFrame(TimecodeHelpers.getFrameByTv(player,tv))},constructor.getFrameByTv=function(player,tValue){var playerTimeline=player.getTimeline();return playerTimeline.getFrameByTv(tValue)},constructor.getFrameCount=function(player){var playerTimeline=player.getTimeline();return playerTimeline.getFrameCount()},constructor.getStandardByTv=function(player,tv){var playerTimeline=player.getTimeline(),ms=playerTimeline.getMillisByTv(tv);return Utils.hhmmssms(ms)},constructor.getStandardDurationByTv=function(player,startTv,endTv){var playerTimeline=player.getTimeline(),startMs=playerTimeline.getMillisByTv(startTv),endMs=playerTimeline.getMillisByTv(endTv);return Utils.hhmmssms(endMs-startMs)},constructor.getStartTimecode=function(player){var playerTimeline=player.getTimeline();return playerTimeline.getTapeTimecode().getTimecodeAtFrame(0)},constructor.convertTimeScale=function(player,tValue,tScale){var playerTimeline=player.getTimeline();return stjs.trunc(tValue*playerTimeline.getTimeScale()/tScale)}},{},{});var ContexterData=function(){this.wordsByFrame=[],this.wordByName={}};ContexterData=stjs.extend(ContexterData,null,[],function(constructor,prototype){prototype.wordsByFrame=null,prototype.wordByName=null,prototype.bestWords=null,prototype.filtered=null,prototype.parent=null,constructor.IGNORED=["a","on","of","the","in","with","and","is","to","an","two","at","next","are","his"].reduce(function(prev,curr,i,a){return prev[curr]=!0,prev},{}),constructor.CONFIDENCE_FILTER_THRESHOLD=.1,constructor.CONFIDENCE_THRESHOLD=.03,prototype.filterByWordName=function(name){return this.filtered=new ContexterData,this.filtered.bestWords=this.bestWords.filter(function(word,i,arr){return word.name.contains(name)}),this.filtered.wordsByFrame=this.wordsByFrame,this.filtered.wordByName=this.wordByName,this.filtered.parent=this,this.filtered},prototype.clear=function(){this.filtered=null},constructor.create=function(fromJson){for(var data=new ContexterData,totalFrames=fromJson.length,fn=0;fn<totalFrames;fn++){for(var wordsInFrame=[],wn=0;wn<fromJson[fn].length;wn++){var name=fromJson[fn][wn][0];name=name.replace(" ","-");var value=fromJson[fn][wn][1];if(null==ContexterData.IGNORED[name]&&value>ContexterData.CONFIDENCE_FILTER_THRESHOLD){var word=data.wordByName[name];null==word&&(word=new ContexterWord(name),data.wordByName[name]=word),word.values[fn]=value,word.frames.push(fn),wordsInFrame.push(word)}}data.wordsByFrame.push(wordsInFrame)}data.bestWords=[];for(var wordConfidence={},fn=0;fn<totalFrames;fn++)for(var currentFrameWords=data.wordsByFrame[fn],j=0;j<currentFrameWords.length;j++){var currentWord=currentFrameWords[j];null==wordConfidence[currentWord.name]&&(data.bestWords.push(currentWord),wordConfidence[currentWord.name]=0),currentWord.values[fn]>ContexterData.CONFIDENCE_THRESHOLD&&(currentWord.confCount++,wordConfidence[currentWord.name]=wordConfidence[currentWord.name]+currentWord.values[fn])}return data.bestWords.forEach(function(word){return word.confidence=wordConfidence[word.name]/word.frames.length}),data.bestWords.sort(function(a,b){return b.confCount-a.confCount}),data}},{wordsByFrame:{name:"Array",arguments:[{name:"Array",arguments:["ContexterWord"]}]},wordByName:{name:"Map",arguments:[null,"ContexterWord"]},bestWords:{name:"Array",arguments:["ContexterWord"]},filtered:"ContexterData",parent:"ContexterData",IGNORED:{name:"Map",arguments:[null,null]}},{});var Track=function(displayName,owner){this.displayName=displayName,this.owner=owner,this.canWrite=!0,this.canDelete=!0,this.canRead=!0,this.state=TrackState.NEW,this.lastModified=Utils.currentTimeMillis(),this.version=1};Track=stjs.extend(Track,null,[],function(constructor,prototype){prototype.version=0,prototype.id=null,prototype.localId=null,prototype.mediaId=null,prototype.displayName=null,prototype.lastModified=0,prototype.created=0,prototype.state=null,prototype.type=null,prototype.importedFrom=null,prototype.owner=null,prototype.canRead=!1,prototype.canWrite=!1,prototype.canDelete=!1,constructor.fromJson=function(trackData){var owner=stjs.hydrate(trackData.owner,User);trackData.owner=null;var track=stjs.hydrate(trackData,Track);track.owner=owner;var state=trackData.state;if(state.equals(TrackState.CREATED.id))track.state=TrackState.CREATED;else if(state.equals(TrackState.EDITED.id))track.state=TrackState.EDITED;else if(state.equals(TrackState.NEW.id))track.state=TrackState.NEW;else{if(!state.equals(TrackState.DELETED.id))throw new RuntimeException("Unknown state: "+state);track.state=TrackState.DELETED}return track}},{state:"TrackState",type:{name:"Enum",arguments:["TrackType"]},owner:"User"},{});var UIUtils=function(){};UIUtils=stjs.extend(UIUtils,null,[],function(constructor,prototype){constructor.getOffset=function(div2){var offset=new Point;if(null!=div2.offsetParent){var parentOffset=UIUtils.getOffset(div2.offsetParent);return offset.x=parentOffset.x+div2.offsetLeft,offset.y=parentOffset.y+div2.offsetTop,offset}return offset.x=div2.offsetLeft,offset.y=div2.offsetTop,offset},constructor.getScroll=function(div2){if("fixed".equals(window.getComputedStyle(div2,null).getPropertyValue("position")))return new Point;if(null!=div2.parentElement){var parentScroll=UIUtils.getScroll(div2.parentElement),scroll=new Point;return scroll.x=parentScroll.x+div2.scrollLeft,scroll.y=parentScroll.y+div2.scrollTop,scroll}var scroll=new Point;return scroll.x=div2.scrollLeft,scroll.y=div2.scrollTop,scroll},constructor.getPosition=function(div2){var offset=UIUtils.getOffset(div2),scroll=UIUtils.getScroll(div2),pos=new Point;return pos.x=offset.x-scroll.x,pos.y=offset.y-scroll.y,pos},constructor.plural=function(name,count){return count+" "+name+(1!=count?"s":"")},constructor.toPlainObject=function(obj){return Object.assign({},obj)}},{},{});var Bezier=function(p1,cp1,cp2,p2){this.p1=p1,this.cp1=cp1,this.cp2=cp2,this.p2=p2};Bezier=stjs.extend(Bezier,null,[],function(constructor,prototype){prototype.p1=null,prototype.cp1=null,prototype.cp2=null,prototype.p2=null,constructor.fromPoints=function(points){return new Bezier(points[0],points[1],points[2],points[3])},prototype.getPointOnCurve=function(percent){var C4=this.p1,C3=this.cp1,C2=this.cp2,C1=this.p2,pos=new Point;return pos.x=C1.x*Bezier.B1(percent)+C2.x*Bezier.B2(percent)+C3.x*Bezier.B3(percent)+C4.x*Bezier.B4(percent),pos.y=C1.y*Bezier.B1(percent)+C2.y*Bezier.B2(percent)+C3.y*Bezier.B3(percent)+C4.y*Bezier.B4(percent),pos},constructor.B4=function(t){return(1-t)*(1-t)*(1-t)},constructor.B3=function(t){return 3*t*(1-t)*(1-t)},constructor.B2=function(t){return 3*t*t*(1-t)},constructor.B1=function(t){return t*t*t}},{p1:"Point",cp1:"Point",cp2:"Point",p2:"Point"},{});var WaveImages=function(http,channelInfo){this.http=http,this.channel=channelInfo,this.sppArray=channelInfo.waveformPreviews,this.images={}};WaveImages=stjs.extend(WaveImages,null,[],function(constructor,prototype){prototype.http=null,prototype.channel=null,prototype.sppArray=null,prototype.images=null,prototype.nearestSpp=function(wantedSpp){var idx=Utils.binarySearch0(this.sppArray,wantedSpp);return idx>=0?this.sppArray[idx]:idx==-1?Utils.min(this.sppArray):this.sppArray[-idx-2]},prototype.loadAllImages=function(onload){var loaded=new MutableInt(0),loadedOne=function(wi){loaded.value++,loaded.value>=4&&null!=onload&&onload()};this.getWaveImage(194,loadedOne),this.getWaveImage(3102,loadedOne),this.getWaveImage(49620,loadedOne),this.getWaveImage(198480,loadedOne)},prototype.getWaveImage=function(wantedSpp,onload){var spp=this.nearestSpp(wantedSpp),wi=null;if(0!=spp){var _spp=""+spp;if(null==this.images[_spp]){var url=this.getSppUrl(spp);wi=new WaveData(this.http,url),wi.spp=spp,this.images[_spp]=wi,wi.addOnLoadListener(onload),wi._load()}else wi=this.images[_spp],wi.isLoading?wi.addOnLoadListener(onload):onload(wi)}return wi},prototype.ipadMode=!1,prototype.onerror=null,prototype.getSppUrl=function(spp){return this.channel.serverUrl+"/"+this.channel.proxyId+"/w00_"+spp+".dat"},prototype.getPreciseWaveImage=function(sampleRange,clientWidth,drawPrecise){throw new RuntimeException("getPreciseWaveImage TODO")}},{http:"Http",channel:"PlayerAudioTrack",sppArray:{name:"Array",arguments:[null]},images:{name:"Map",arguments:[null,"WaveData"]},onerror:"Callback0"},{});var ColorBulletDropDown=function(title,className,items){DropDownMenu.call(this,title,className,items,function(item){return React.DOM.li({className:className+"__list-item",key:item.id,onClick:item.onClick},React.DOM.div({className:"pipka pipka-"+item.color}),React.DOM.span({className:className+"__list-item__label vg_info view-item",itemID:item.id},item.title))})};ColorBulletDropDown=stjs.extend(ColorBulletDropDown,DropDownMenu,[],null,{items:{name:"Array",arguments:["T"]},itemToElement:{name:"Function1",arguments:["T",{name:"ReactElement",arguments:["Object"]}]}},{});var SimpleDropDown=function(title,className,items){DropDownMenu.call(this,title,className,items,function(item){var classList=className+"__list-item";return item.selected&&(classList+=" active"),React.DOM.li({className:classList,key:item.id,onClick:item.onClick},React.DOM.span({className:className+"__list-item__radio"}),React.DOM.span({className:className+"__list-item__label vg_info view-item",itemID:item.id},item.title))})};SimpleDropDown=stjs.extend(SimpleDropDown,DropDownMenu,[],null,{items:{name:"Array",arguments:["T"]},itemToElement:{name:"Function1",arguments:["T",{name:"ReactElement",arguments:["Object"]}]}},{});var TrackView=function(track,pluginClass,player){this.logEventViewAddedRx=new Rx.ReplaySubject,this.onEventIdDeleted=new Rx.Subject,this.trackId=track.id,this.pluginClass=pluginClass,this.player=player,this.el=window.document.createElement("div"),this.el.innerHTML=VGTemplates.videologTrack(this.pluginClass,Helpers.playerWidthPercents(player)),this.hide(),this.logEventListView=new LogEventListView(this.el.querySelector(LogEventListView.selector)),this.cleanTrackButton=this.el.querySelector(TrackView.clearTrackButtonSelector),this.cleanTrackButtonRx=Rx.Observable.fromEvent(this.cleanTrackButton,"click"),this.timecodeViews=new Array,this.render(track)};TrackView=stjs.extend(TrackView,null,[],function(constructor,prototype){constructor.selector=".app-TrackView",constructor.clearTrackButtonSelector=".view-clearTrack",prototype.el=null,prototype.cleanTrackButton=null,prototype.onEventIdDeleted=null,prototype.cleanTrackButtonRx=null,prototype.trackId=null,prototype.player=null,prototype.pluginClass=null,prototype.logEventListView=null,prototype.logEventViewAddedRx=null,prototype.timecodeViews=null,prototype.displayName=null,prototype.hide=function(){this.el.style.display="none"},prototype.show=function(){this.el.style.display="block"},prototype.getElement=function(){return this.el},prototype.render=function(track){this.displayName=track.displayName},prototype.deleteEvent=function(logEventId){this.logEventListView.deleteEvent(logEventId),this.onEventIdDeleted.onNext(logEventId)}},{el:"Element",cleanTrackButton:"Element",onEventIdDeleted:{name:"Rx.Subject",arguments:[null]},cleanTrackButtonRx:{name:"Rx.Observable",arguments:["DOMEvent"]},player:"PlayerImpl",logEventListView:"LogEventListView",logEventViewAddedRx:{name:"Rx.ReplaySubject",arguments:["LogEventView"]},timecodeViews:{name:"Array",arguments:["TimeCodeView"]}},{});var SkinnedPlayer=function(){};SkinnedPlayer=stjs.extend(SkinnedPlayer,null,[VGPlayerPluginApi],function(constructor,prototype){prototype.getView=function(){},prototype.getVideoElement=function(){},prototype.getPlayRx=function(){},prototype.getVolumeChangeRx=function(){},prototype.getTimelineRx=function(){},prototype.isChangingVideoSrc=function(){}},{},{});var DebugInfoBoxView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player;var template='<div class="vg_aligner vg_info"><div class="vg_timecode">\n<div class="vg_seekable_duration_box__label">No data</div></div></div>';this.render(template),this.el.classList.add("vg_centerX"),this.setEventRx(),this.setTimelineRx()};DebugInfoBoxView=stjs.extend(DebugInfoBoxView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.eventsSubscription=null,prototype.setTimelineRx=function(){var timelineRx=this.player.getTimelineRx(),pepyaka=this.el.querySelector(".vg_seekable_duration_box__label");timelineRx.subscribe(stjs.bind(this,function(timeline){var videoDuration=timeline.getDurationSec(),audio=this.player.getAudioTracks().map(function(audioTrack,i,tracks){var trackString="Audio "+i+": ";return trackString+(null==audioTrack.dashStream?"N/A":audioTrack.dashStream.getDurationSec())}).join("<br>"),seekableDuration=timeline.getSeekableDurationSec();pepyaka.innerHTML="Seekable duration: "+seekableDuration+"<br>Video duration: "+videoDuration+"<br>"+audio}))},prototype.setEventRx=function(){var click=Rx.Observable.fromEvent(this.el,"click"),mouseup=Rx.Observable.fromEvent(this.el,"mouseup"),mousemove=Rx.Observable.fromEvent(window.document,"mousemove"),mousedown=Rx.Observable.fromEvent(this.el,"mousedown").filter(function(e){return!"INPUT".equals(e.target.nodeName)});click.subscribe(stjs.bind(this,function(e){this.player.getLog().debug("click"),e.stopPropagation()}));var dimensions=this.el.getBoundingClientRect(),mousedrag=mousedown.flatMap(stjs.bind(this,function(md){var bcr=this.container.getBoundingClientRect(),maxLeft=bcr.width-dimensions.width,maxTop=bcr.height-dimensions.height,startX=VGView.offsetX(md.clientX+bcr.left,this.el),startY=VGView.offsetY(md.clientY+bcr.top,this.el);return mousemove.map(function(mm){mm.preventDefault();var deltaX=mm.clientX-startX,deltaY=mm.clientY-startY,top=Math.min(Math.max(deltaY,0),maxTop),left=Math.min(Math.max(deltaX,0),maxLeft);return new Position(left,top)}).takeUntil(mouseup)}));this.eventsSubscription=mousedrag.subscribe(stjs.bind(this,function(pos){this.el.classList.remove("vg_centerX"),this.el.style.top=pos.top+"px",this.el.style.left=pos.left+"px"}))},prototype.close=function(){CloseableView.prototype.close.call(this),this.eventsSubscription.dispose()}},{player:"PlayerImpl",eventsSubscription:"Rx.Disposable",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var FluentMap=function(){this._map={}};FluentMap=stjs.extend(FluentMap,null,[],function(constructor,prototype){prototype._map=null,prototype.put=function(key,value){return this.build()[key]=value,this},prototype.onKeyPress=function(value){return this.build().onKeyPress=value,this},prototype.onChange=function(value){return this.build()[ReactViewUtils.ON_CHANGE]=value,this},prototype.onSubmit=function(handler){return this.build()[ViewConsts.ON_SUBMIT]=handler,this},prototype.value=function(value){return this.build()[ReactViewUtils.VALUE]=value,this},prototype.id=function(id){return this.build()[ViewConsts.ID]=id,this},prototype.key=function(key){return this.build()[ViewConsts.KEY]=key,this},prototype.type=function(type){return this.build()[ViewConsts.TYPE]=type,this},prototype.ref=function(ref){return this.build()[ReactViewUtils.REF]=ref,this},constructor.withClassName=function(cssClass){return FluentMap.map("className",cssClass)},constructor.map=function(key,value){var f=new FluentMap;return f.build()[key]=value,f},prototype.build=function(){return this._map},prototype.onClick=function(onClick){return this.build()[ReactViewUtils.ON_CLICK]=onClick,this},prototype.addClass=function(cssClass){var cN=this._map.className||"",strings=cN.split(" ");return strings.indexOf(cssClass)<0&&(strings.push(cssClass),this._map.className=strings.join(" ")),this},prototype.style=function(prop,value){null==this._map[ViewConsts.STYLE]&&(this._map[ViewConsts.STYLE]={});var styles=this._map[ViewConsts.STYLE];return styles[prop]=value,this}},{_map:{name:"Map",arguments:[null,"Object"]}},{});var ControlsView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.render(VG["templates/player/controls.html"]({})),this.el.className="vg_controlsContainer",this.playControlsEl=this.el.querySelector(".vg_playControls"),this.fullscreenControl(),this.playPauseControl(player),this.volumeControl(player),this.abcTheme(player)};ControlsView=stjs.extend(ControlsView,VGView,[],function(constructor,prototype){prototype.playControlsEl=null,prototype.fullscreenButton=null,prototype.volumeButton=null,prototype.stepSelectRx=null,prototype.cameraClickRx=null,prototype.fullscreenClickRx=null,prototype.volumeRangeEl=null,prototype.volumeClick=null,prototype.playPauseButton=null,prototype.lastVolumeLevel=0,prototype._muted=!1,prototype.abcTheme=function(player){this.onClick(this.el.querySelector(".vg_back1SecButton"),function(e){return player.previousSec(1)}),this.onClick(this.el.querySelector(".vg_back30SecButton"),function(e){return player.previousSec(30)}),this.onClick(this.el.querySelector(".vg_playFasterButton"),function(e){return player.playFaster()}),this.onClick(this.el.querySelector(".vg_forward1SecButton"),function(e){return player.nextSec(1)}),this.onClick(this.el.querySelector(".vg_forward30SecButton"),function(e){return player.nextSec(30)})},prototype.onClick=function(element,e){null!=element&&element.addEventListener("click",e)},prototype.volumeControl=function(player){this.volumeRangeEl=this.el.querySelector('input[type="range"]'),HotkeyManager.enableHotkeysForInput(this.volumeRangeEl),this.volumeButton=this.el.querySelector(".vg_volume"),this.volumeClick=Rx.Observable.fromEvent(this.volumeButton,"click"),this.lastVolumeLevel=100*player.getVolume(),this._muted=0==this.lastVolumeLevel,this.volumeRangeEl.value=String(this.lastVolumeLevel),Rx.Observable.fromEvent(this.volumeRangeEl,"input").subscribe(function(domEvent){domEvent.stopPropagation();var input=domEvent.target;player.setVolume(Number(input.value)/100)}),this.volumeClick.subscribe(stjs.bind(this,function(e){this._muted=!this._muted,this._muted?(this.lastVolumeLevel=Number(this.volumeRangeEl.value),this.volumeRangeEl.value=String(0),player.setVolume(0)):(this.volumeRangeEl.value=String(this.lastVolumeLevel),player.setVolume(this.lastVolumeLevel/100));
})),player.getVolumeChangeRx().subscribe(stjs.bind(this,function(volume){0!=volume?this.volumeButton.classList.remove("vg_volume--mute"):this.volumeButton.classList.add("vg_volume--mute"),this.volumeRangeEl.value=String(100*volume)}))},prototype.playPauseControl=function(player){this.playPauseButton=this.el.querySelector(".vg_playPauseButton");var backBtn=this.el.querySelector(".vg_playBackButton");null!=backBtn&&Rx.Observable.fromEvent(backBtn,"mousedown").subscribe(function(e){player.playFasterBackwards()}),Rx.Observable.fromEvent(this.playPauseButton,"click").subscribe(stjs.bind(this,function(e){this.playPauseButton.classList.contains("active")||this.playPauseButton.classList.add("active"),player.togglePlay()})),player.getPlayRx().subscribe(stjs.bind(this,function(isPlaying){isPlaying?this.playPauseButton.classList.add("vg_playing"):this.playPauseButton.classList.remove("vg_playing")}))},prototype.fullscreenControl=function(){this.fullscreenButton=this.el.querySelector(".vg_fullScreen");var fullscreenButton=this.el.querySelector(".vg_fullScreen");this.fullscreenClickRx=Rx.Observable.fromEvent(fullscreenButton,"click",stjs.bind(this,function(e){var active=this.toggleActive(fullscreenButton);return Utils.addField(fullscreenButton,"active",active),fullscreenButton}))},prototype.getPlayBtn=function(){return this.playPauseButton}},{playControlsEl:"Element",fullscreenButton:"Element",volumeButton:"Element",stepSelectRx:"Object",cameraClickRx:"Object",fullscreenClickRx:{name:"Rx.Observable",arguments:["Element"]},volumeRangeEl:"Input",volumeClick:{name:"Rx.Observable",arguments:["DOMEvent"]},playPauseButton:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var InputView=function(inputEl,log){this.el=inputEl,this.log=log,this.onInputRx=Rx.Observable.fromEvent(this.el,"input"),this.onFocusRx=Rx.Observable.fromEvent(this.el,"focus",function(e){return e.target}),this.onBlurRx=Rx.Observable.fromEvent(this.el,"blur",function(e){return e.target}),this.onKeyDownRx=Rx.Observable.fromEvent(this.el,"keydown"),this.onKeyUpRx=Rx.Observable.fromEvent(this.el,"keyup"),this.inputValueEnteredRx=new Rx.Subject,this.onFocusRx.subscribe(stjs.bind(this,function(eventTagsInput){this.el.parentElement.classList.add("active")})),this.onBlurRx.subscribe(stjs.bind(this,function(eventTagsInput){this.el.parentElement.classList.remove("active")})),this.onBlurRx.filter(stjs.bind(this,function(eventTagsInput){return this.el.classList.contains("vg_replace-input")})).subscribe(function(eventTagsInput){eventTagsInput.classList.remove("vg_replace-input")}),this.replaceKeyDown=this.onKeyDownRx.filter(function(e){return e.target.classList.contains("vg_replace-input")}),this.replaceKeyDown.subscribe(function(e){e.keyCode==HotkeyManager.getKeyCode("backspace")&&(e.preventDefault(),e.target.classList.remove("vg_replace-input"))}),this.onUserTypingRx=this.onKeyUpRx.map(stjs.bind(this,function(e){return e.keyCode==HotkeyManager.getKeyCode("backspace")&&(log.debug("backspace"),e.preventDefault(),e.target.classList.remove("vg_replace-input")),e.keyCode==HotkeyManager.getKeyCode("enter")&&(e.preventDefault(),log.debug("enter",this.el.value),this.inputValueEnteredRx.onNext(this.el.value)),e.keyCode==HotkeyManager.getKeyCode("esc")&&this.el.blur(),e.target.value})),this.onUserTypingRx.subscribe(function(v){log.debug("typing..",v)})};InputView=stjs.extend(InputView,null,[],function(constructor,prototype){prototype.onInputRx=null,prototype.onFocusRx=null,prototype.onBlurRx=null,prototype.onKeyDownRx=null,prototype.onKeyUpRx=null,prototype.replaceKeyDown=null,prototype.onUserTypingRx=null,prototype.inputValueEnteredRx=null,prototype.el=null,prototype.log=null,prototype.blur=function(){this.el.blur()},prototype.getElement=function(){return this.el},prototype.clear=function(){this.el.value="",this.el.focus()},prototype.getFocusRx=function(){return this.onFocusRx},prototype.getBlurRx=function(){return this.onBlurRx}},{onInputRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onKeyDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onKeyUpRx:{name:"Rx.Observable",arguments:["DOMEvent"]},replaceKeyDown:{name:"Rx.Observable",arguments:["DOMEvent"]},onUserTypingRx:{name:"Rx.Observable",arguments:[null]},inputValueEnteredRx:{name:"Rx.Subject",arguments:[null]},el:"Input",log:"Log"},{});var TrackRowView=function(track){this.trackToCommit=track,this.el=window.document.createElement("tr"),this.el.className="rrtheme-table__row",this.el.innerHTML=VGTemplates.modalRow(this.trackToCommit.displayName,this.trackToCommit.owner,track.state,this.trackToCommit.lastModified),this.inputEl=this.el.querySelector("input"),this.editIconEl=this.el.querySelector(".vg_icon-edit"),this.deleteIconEl=this.el.querySelector(".vg_icon-x"),track.canDelete&&track.canWrite||(this.deleteIconEl.style.display="none",this.editIconEl.style.display="none"),this.onTrackNameChanged=new Rx.Subject,this.onDeleteRx=Rx.Observable.fromEvent(this.deleteIconEl,"click").map(stjs.bind(this,function(domEvent){return this})),Rx.Observable.fromEvent(this.editIconEl,"click").subscribe(stjs.bind(this,function(domEvent){this.inputEl.disabled=!1,this.inputEl.focus()})),this.onFocusRx=Rx.Observable.fromEvent(this.inputEl,"focus",function(e){return e.target}),this.onBlurRx=Rx.Observable.fromEvent(this.inputEl,"blur",function(e){return e.target}),this.onBlurRx.subscribe(stjs.bind(this,function(input){this.inputEl.disabled=!0}));var onKeyUpRx=Rx.Observable.fromEvent(this.el,"keyup");onKeyUpRx.map(stjs.bind(this,function(e){return e.keyCode==HotkeyManager.getKeyCode("backspace")&&e.preventDefault(),e.keyCode==HotkeyManager.getKeyCode("enter")&&(e.preventDefault(),null!=this.validateTrackNameFunc?this.validateTrackNameFunc(this.inputEl.value)&&this.onTrackNameChanged.onNext(this):this.onTrackNameChanged.onNext(this)),e.keyCode==HotkeyManager.getKeyCode("esc")&&this.el.blur(),e.target.value})).subscribe(function(s){}),this.onFocusRx.subscribe(function(inp){inp.selectionEnd=inp.value.length,inp.selectionStart=inp.value.length}),this.onBlurRx.subscribe(stjs.bind(this,function(inputEl){inputEl.value=this.trackToCommit.displayName}))};TrackRowView=stjs.extend(TrackRowView,null,[],function(constructor,prototype){constructor.selectorTrackName=".view-trackName",constructor.selectorDisplayName=".view-state",constructor.selectorAuthor=".view-author",constructor.selectorCreatedDate=".view-createdDate",prototype.el=null,prototype.inputEl=null,prototype.editIconEl=null,prototype.deleteIconEl=null,prototype.onFocusRx=null,prototype.onBlurRx=null,prototype.onTrackNameChanged=null,prototype.trackId=null,prototype.onDeleteRx=null,prototype.isCommited=!1,prototype.trackToCommit=null,prototype.validateTrackNameFunc=null,prototype.getElement=function(){return this.el},prototype.render=function(track){this.trackToCommit=track,this.el.querySelector(TrackRowView.selectorTrackName).innerHTML=this.trackToCommit.displayName,this.el.querySelector(TrackRowView.selectorDisplayName).innerHTML=this.trackToCommit.state.displayName,this.el.querySelector(TrackRowView.selectorAuthor).innerHTML=this.trackToCommit.owner.displayName,this.el.querySelector(TrackRowView.selectorCreatedDate).innerHTML=VGTemplates.toDateString(this.trackToCommit.created)},prototype.hide=function(){this.el.classList.add("vg_invisible")},prototype.show=function(){this.el.classList.remove("vg_invisible")},prototype.isTrackNew=function(){return this.trackToCommit.state.equals(TrackState.NEW)},prototype.scheduleForDelete=function(){this.trackToCommit.state=TrackState.DELETED,this.isCommited=!1},prototype.getInputTrackName=function(){return this.inputEl.value}},{el:"Element",inputEl:"Input",editIconEl:"Element",deleteIconEl:"Element",onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onTrackNameChanged:{name:"Rx.Subject",arguments:["TrackRowView"]},onDeleteRx:{name:"Rx.Observable",arguments:["TrackRowView"]},trackToCommit:"Track",validateTrackNameFunc:{name:"Function1",arguments:[null,null]}},{});var ZoomRange=function(timeline,startFn,endFn,getFrame){ObjectEvents.call(this),this.start=startFn,this.end=endFn};ZoomRange=stjs.extend(ZoomRange,ObjectEvents,[],function(constructor,prototype){prototype.start=0,prototype.end=0},{events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{});var ObservableArray=function(){this.arr=[],this.aSubject=new Rx.ReplaySubject};ObservableArray=stjs.extend(ObservableArray,null,[],function(constructor,prototype){prototype.arr=null,prototype.aSubject=null,prototype.findIndex=function(predicate){for(var i=0;i<this.arr.length;i++)if(predicate(this.arr[i]))return i;return-1},prototype.push=function(val){var len=this.arr.length;this.arr.push(val);var obj=new ArrayChangeEvent;obj.type="splice",obj.index=len,obj.addedCount=1,obj.removed=[],obj.object=this,this.aSubject.onNext(obj)},prototype.remove=function(index){var el=this.arr.splice(index,1),obj=new ArrayChangeEvent;obj.type="splice",obj.index=index,obj.addedCount=0,obj.removed=el,obj.object=this,this.aSubject.onNext(obj)},prototype.subscribe=function(onNext){return this.aSubject.subscribe(onNext,null,null)},prototype.get=function(index){return this.arr[index]},prototype.set=function(index,val){this.arr[index]=val}},{arr:{name:"Array",arguments:["T"]},aSubject:{name:"Rx.ReplaySubject",arguments:[{name:"ArrayChangeEvent",arguments:["T"]}]}},{});var SafeAreaViewVG=function(container,parentView,player){VGView.call(this,container,parentView,"vg_safe-area"),this.player=player,this.render(this.markup("action-safe")+this.markup("caption-4-3")+this.markup("caption-16-9"));var menuEl=VGTemplates.elFromHTML(VGTemplates.addonControl("vg_safe-areas",""),player.getView().playerContainer.ownerDocument);menuEl.classList.remove("vg_ddown"),menuEl.classList.add("vg_ddown_hover"),this.el.appendChild(menuEl),this.resize=Rx.Observable.fromEvent(window,"resize").subscribe(stjs.bind(this,function(e){if(this.actionVisible){var element=this.el.querySelector(".safe-container.action-safe");this.safeAreaPosition(player,element)}if(this.captionVisible){var element=this.el.querySelector(".safe-container.caption-"+this.aspectRatio);this.safeAreaPosition(player,element)}}))};SafeAreaViewVG=stjs.extend(SafeAreaViewVG,VGView,[SafeAreaView],function(constructor,prototype){prototype.resize=null,prototype.captionVisible=!1,prototype.actionVisible=!1,prototype.aspectRatio="16-9",prototype.player=null,prototype.videoWidth=0,prototype.videoHeight=0,prototype.close=function(){this.resize.dispose(),CloseableView.prototype.close.call(this)},prototype.markup=function(cssClass){return'<div class="safe-container '+cssClass+' vg_invisible"><div class="safe-outer '+cssClass+'"><div class="safe-inner '+cssClass+'"></div></div></div>'},prototype.getElement=function(){return this.el},prototype.doApplyCrop=function(f){f-1>.001?(this.el.style.removeProperty("margin"),this.el.style.removeProperty("width"),this.el.style.setProperty("height",100/f+"%",null),this.el.style.setProperty("padding-top",450*(f-1)/(16*f)+"%",null)):1-f>.001&&(this.el.style.removeProperty("height"),this.el.style.removeProperty("padding-top"),this.el.style.setProperty("margin","0 auto",null),this.el.style.setProperty("width",100*f+"%",null))},prototype.safeAreaPosition=function(player,element){this.videoWidth=player.getVideoElement().getVideoWidth(),this.videoHeight=player.getVideoElement().getVideoHeight();var clientWidth=player.getView().playerContainer.clientWidth,clientHeight=player.getView().playerContainer.clientHeight,vh=clientHeight/this.videoHeight,vw=clientWidth/this.videoWidth,v=Math.min(vh,vw);element.style.height=this.videoHeight*v+"px",element.style.width=this.videoWidth*v+"px"},prototype.toggleActionSafe=function(){this.actionVisible=!this.actionVisible,this.toggleSafeArea("action-safe",this.el)},prototype.toggleCaptionSafe=function(){this.captionVisible=!this.captionVisible,this.toggleSafeArea("caption-"+this.aspectRatio,this.el)},prototype.isCaptionVisible=function(){return this.captionVisible},prototype.isActionVisible=function(){return this.actionVisible},prototype.toggleSafeArea=function(cssClass,el){var element=el.querySelector(".safe-container."+cssClass);return null==element?void this.player.getLog().error("Safe area class "+cssClass+" not found"):void(element.classList.contains("vg_invisible")?(this.safeAreaPosition(this.player,element),element.classList.remove("vg_invisible")):element.classList.add("vg_invisible"))},prototype.getAspectRatio=function(){return this.aspectRatio},prototype.switchAspectRatio=function(newAspectRatio){this.toggleCaptionSafe(),this.aspectRatio=newAspectRatio,this.setAspectRatio(newAspectRatio),this.toggleCaptionSafe()},prototype.setAspectRatio=function(aspectRatio){this.isCaptionVisible()&&this.switchAspectRatio(aspectRatio)}},{resize:"Rx.Disposable",player:"SkinnedPlayer",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SafeAreaViewRR=function(container,parentView,player){VGView.call(this,container,parentView,"vg_safe-area"),this.player=player,this.render(this.markup("action-safe")+this.markup("caption-4-3")+this.markup("caption-16-9")),this.resize=Rx.Observable.fromEvent(window,"resize").subscribe(stjs.bind(this,function(e){if(this.actionVisible){var element=this.el.querySelector(".safe-container.action-safe");this.safeAreaPosition(player,element)}if(this.captionVisible){var element=this.el.querySelector(".safe-container.caption-"+this.aspectRatio);this.safeAreaPosition(player,element)}}))};SafeAreaViewRR=stjs.extend(SafeAreaViewRR,VGView,[SafeAreaView],function(constructor,prototype){prototype.player=null,prototype.resize=null,prototype.aspectRatio="16-9",prototype.captionVisible=!1,prototype.actionVisible=!1,prototype.videoWidth=0,prototype.videoHeight=0,prototype.markup=function(cssClass){return'<div class="safe-container '+cssClass+' vg_invisible"><div class="safe-outer '+cssClass+'"><div class="safe-inner '+cssClass+'"></div></div></div>'},prototype.getElement=function(){return this.el},prototype.doApplyCrop=function(f){f-1>.001?(this.el.style.removeProperty("margin"),this.el.style.removeProperty("width"),this.el.style.setProperty("height","100%",null)):1-f>.001&&(this.el.style.removeProperty("height"),this.el.style.removeProperty("padding-top"),this.el.style.setProperty("margin","0 auto",null),this.el.style.setProperty("width",100*f+"%",null))},prototype.safeAreaPosition=function(player,element){this.videoWidth=player.getVideoElement().getVideoWidth(),this.videoHeight=player.getVideoElement().getVideoHeight();var clientWidth=player.getView().playerContainer.clientWidth,clientHeight=player.getView().playerContainer.clientHeight,vh=clientHeight/this.videoHeight,vw=clientWidth/this.videoWidth,v=Math.min(vh,vw);element.style.height=this.videoHeight*v+"px",element.style.width=this.videoWidth*v+"px"},prototype.toggleActionSafe=function(){this.actionVisible=!this.actionVisible,this.toggleSafeArea("action-safe",this.el)},prototype.toggleCaptionSafe=function(){this.captionVisible=!this.captionVisible,this.toggleSafeArea("caption-"+this.aspectRatio,this.el)},prototype.isCaptionVisible=function(){return this.captionVisible},prototype.isActionVisible=function(){return this.actionVisible},prototype.toggleSafeArea=function(cssClass,el){var element=el.querySelector(".safe-container."+cssClass);return null==element?void this.player.getLog().error("Safe area class "+cssClass+" not found"):void(element.classList.contains("vg_invisible")?(this.safeAreaPosition(this.player,element),element.classList.remove("vg_invisible")):element.classList.add("vg_invisible"))},prototype.getAspectRatio=function(){return this.aspectRatio},prototype.setAspectRatio=function(aspectRatio){this.isCaptionVisible()&&(this.toggleCaptionSafe(),this.aspectRatio=aspectRatio,this.toggleCaptionSafe())},prototype.switchAspectRatio=function(newAspectRatio){this.toggleCaptionSafe(),this.setAspectRatio(newAspectRatio),this.toggleCaptionSafe()}},{player:"SkinnedPlayerImpl",resize:"Rx.Disposable",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var BlobDataSrc=function(blob){throw new RuntimeException("BlobDataSrc TODO")};BlobDataSrc=stjs.extend(BlobDataSrc,null,[DataSrc],function(constructor,prototype){prototype.fetch=function(from,to,onDone,onError){throw new RuntimeException("TODO")}},{},{});var MyCSSRule=function(selector){this.selector=selector,this.name=0==selector.indexOf(".")?selector.substring(1):selector,this.subrules={},this.statuses={}};MyCSSRule=stjs.extend(MyCSSRule,null,[],function(constructor,prototype){constructor.RESERVED_PROPS={name:!0,selector:!0,subrules:!0},prototype.name=null,prototype.selector=null,prototype.subrules=null,prototype.statuses=null,prototype.font=null,prototype.width=null,prototype.height=null,prototype.top=null,prototype.right=null,prototype.bottom=null,prototype.left=null,prototype.background=null,prototype.color=null,prototype.textAlign=null,prototype.whiteSpace=null,prototype.overflow=null,prototype.position=null,prototype.display=null,prototype.backgroundColor=null,prototype.cursor=null,prototype.border=null,prototype.padding=null,prototype.paddingTop=null,prototype.paddingRight=null,prototype.paddingBottom=null,prototype.paddingLeft=null,prototype.boxShadow=null,prototype.zIndex=null,prototype.overflowX=null,prototype.overflowY=null,prototype.marginRight=null,prototype.marginTop=null,prototype.marginLeft=null,prototype.marginBottom=null,prototype.fontSize=null,prototype.borderStyle=null,prototype.borderWidth=null,prototype.borderColor=null,prototype.borderBottom=null,prototype.lineHeight=null,prototype.textDecoration=null,prototype.subruleStatus=null,prototype.backgroundPosition=null,prototype.margin=null,prototype.listStyle=null,prototype.fontWeight=null,prototype.fontFamily=null,prototype.outline=null,prototype.borderRadius=null,prototype.borderLeftWidth=null,prototype.borderLeftColor=null,prototype.minHeight=null,prototype.minWidth=null,prototype.floatStyle=null,prototype.borderRight=null,prototype.borderLeft=null,prototype.status=function(statusName,statusGroup){var status=this.statuses[statusName];return null==status&&(status=new CSSStatus(this,statusName,statusGroup),this.statuses[statusName]=status),status},prototype.when=function(status){var subrule=this.subrules[""+status.$id];return null==subrule&&(subrule=this.createSubrule(status),this.subrules[""+status.$id]=subrule),subrule},prototype.createSubrule=function(status){var sel=status.name.startsWith(":")?status.name:"."+status.name,rule=new MyCSSRule(sel);return rule.subruleStatus=status,rule},constructor.div=function(){return new MyCSSRule("div")},constructor.span=function(){return new MyCSSRule("div")},constructor.p=function(){return new MyCSSRule("div")},prototype.absolute=function(top,left,bottom,right){return this.position="absolute",this.bottom=bottom,this.top=top,this.left=left,this.right=right,this},prototype.relative=function(top,left,bottom,right){return this.position="relative",this.bottom=bottom,this.top=top,this.left=left,this.right=right,this},prototype.size=function(width,height){return this.width=width,this.height=height,this},prototype.val=function(prop){return null==prop?0:parseInt((prop+"").replace(new RegExp("[^0-9.-]","g"),""))},prototype.px=function(value,transform){return transform(this.val(value))+"px"},prototype.active=function(){return this.status(":active")},prototype.visited=function(){return this.status(":visited")},prototype.hover=function(){return this.status(":hover")},prototype.focus=function(){return this.status(":focus")},prototype.before=function(){return this.status(":before")},prototype.after=function(){return this.status(":after")},prototype.mixin=function(other){for(var prop in other)if(!MyCSSRule.RESERVED_PROPS[prop]){var value=other[prop];if(null!=value&&"function"!=typeof value)if(stjs.isInstanceOf(value.constructor,MyCSSRule)){var thisField=this[prop];null!=thisField&&thisField.mixin(value)}else this[prop]=value}return this}},{RESERVED_PROPS:{name:"Map",arguments:[null,null]},subrules:{name:"Map",arguments:[null,"MyCSSRule"]},statuses:{name:"Map",arguments:[null,"CSSStatus"]},background:{name:"Array",arguments:[null]},subruleStatus:"CSSStatus"},{});var WaveformSettings=function(){};WaveformSettings=stjs.extend(WaveformSettings,null,[],function(constructor,prototype){prototype.getFrame=null,prototype.color=null,prototype.fancy=!1,prototype.fancySettings=null,prototype.clickToSeek=null,prototype.volumeControl=null,prototype.twoSides=!1,prototype.disableRuler=!1,prototype.range=null,prototype.seekFrame=null,prototype.fillColor=null,constructor.defaultIfNull=function(settings){return null==settings&&(settings=new WaveformSettings),null==settings.fancySettings&&(settings.fancySettings=new FancySettings),settings}},{getFrame:{name:"Function0",arguments:[null]},fancySettings:"FancySettings",clickToSeek:"Object",volumeControl:"ObjectEvents",range:"ZoomRange",seekFrame:{name:"Callback1",arguments:[null]}},{});var FCPXml=function(duration,rate,width,height,filename,startTimeCode){this.duration=duration,this.rate=rate,this.width=width,this.height=height,this.filename=filename,this.startTimeCode=startTimeCode,this.fcp=this.initFCP()};FCPXml=stjs.extend(FCPXml,null,[],function(constructor,prototype){prototype.duration=0,prototype.rate=0,prototype.width=0,prototype.height=0,prototype.filename=null,prototype.fcp=null,prototype.startTimeCode=null,prototype.initFCP=function(){var uuid=this.filename,fcp=new FCP;return fcp.version=5,fcp.sequence=new FCP.Sequence,fcp.sequence.markers=new Array,fcp.sequence.id=uuid,fcp.sequence.uuid=uuid,fcp.sequence.name=this.filename,fcp.sequence.duration=this.duration,fcp.sequence.rate=FCP.rate(this.rate),fcp.sequence.timecode=new FCP.Timecode,fcp.sequence.timecode.rate=FCP.rate(this.rate),fcp.sequence.timecode.frame=0,fcp.sequence.timecode.string=this.startTimeCode,fcp.sequence.timecode.source="source",fcp.sequence.timecode.displayformat="NDF",fcp.sequence.media=new FCP.Media,fcp.sequence.media.video=new FCP.MediaElement,fcp.sequence.media.video.track=new FCP.Track,fcp.sequence.media.video.format=new FCP.MediaFormat,fcp.sequence.media.video.format.samplecharacteristics=FCP.vsample(this.width,this.height,this.rate),fcp.sequence.media.video.track.clipitem=new Array,fcp.sequence.media.audio=new FCP.MediaElement,fcp.sequence.media.audio.track=new FCP.Track,fcp.sequence.media.audio.track.clipitem=new Array,fcp},prototype.addLogEvent=function(logid,startTv,endTv,timescale,comments){var _in=stjs.trunc(stjs.trunc(startTv/timescale)),out=stjs.trunc(stjs.trunc(endTv/timescale)),start=stjs.trunc(stjs.trunc(startTv/timescale)),end=stjs.trunc(stjs.trunc(endTv/timescale)),duration=end-start,timebase=stjs.trunc(timescale),type="video",comment=FCP.comment(comments,null,null,null,null,null),sc=FCP.sc(logid,this.filename,_in,out,start,end,duration,timebase,this.width,this.height,type,comment);this.fcp.sequence.media.video.track.clipitem.push(FCP.clip(sc)),this.fcp.sequence.media.audio.track.clipitem.push(FCP.aclip(sc))},prototype.addLogMarker=function(name,startTv,endTv,timescale,comment){var _in=stjs.trunc(stjs.trunc(startTv/timescale)),out=stjs.trunc(stjs.trunc(endTv/timescale)),marker=FCP.marker(name,_in,out,comment);this.fcp.sequence.markers.push(marker)},constructor.createXml=function(fcp){var doc=FCPXml.getFCPDocument(fcp),xmeml=doc.querySelector("xmeml");xmeml.setAttribute("version",""+fcp.version);var sequenceEl=doc.createElement("sequence");sequenceEl.setAttribute("id",fcp.sequence.id),xmeml.appendChild(sequenceEl);var name=doc.createElement("name");name.textContent=fcp.sequence.name,sequenceEl.appendChild(name);var duration=doc.createElement("duration");duration.textContent=fcp.sequence.duration+"",sequenceEl.appendChild(duration);var rate=FCPXml.createRate(fcp);sequenceEl.appendChild(rate);var timecode=FCPXml.createTimecode(fcp);sequenceEl.appendChild(timecode);var media=doc.createElement("media");sequenceEl.appendChild(media);var video=doc.createElement("video");media.appendChild(video);var videoFormat=doc.createElement("format");video.appendChild(videoFormat);var sampleCharacteristics=FCPXml.createSampleCharacteristics(fcp);videoFormat.appendChild(sampleCharacteristics);var videoTrack=doc.createElement("track");video.appendChild(videoTrack);for(var i=0;i<fcp.sequence.media.video.track.clipitem.length;i++){var item=fcp.sequence.media.video.track.clipitem[i],clipItem=doc.createElement("clipitem");clipItem.setAttribute("id","video-"+fcp.sequence.id+"-"+i),videoTrack.appendChild(clipItem);var clipname=doc.createElement("name");clipname.textContent=item.name,clipItem.appendChild(clipname);var clipDuration=doc.createElement("duration");clipDuration.textContent=item.duration+"",clipItem.appendChild(clipDuration);var clipStart=doc.createElement("start");clipStart.textContent=item.start+"",clipItem.appendChild(clipStart);var clipEnd=doc.createElement("end");clipEnd.textContent=item.end+"",clipItem.appendChild(clipEnd);var clipIn=doc.createElement("in");clipIn.textContent=item._in+"",clipItem.appendChild(clipIn);var clipOut=doc.createElement("out");clipOut.textContent=item.out+"",clipItem.appendChild(clipOut);var comments=FCPXml.createComments(fcp,item);clipItem.appendChild(comments);var file=item.file,clipFile=FCPXml.createClipFile(fcp,file);clipItem.appendChild(clipFile)}for(var i=0;i<fcp.sequence.markers.length;i++){var marker=fcp.sequence.markers[i],markerRoot=doc.createElement("marker");sequenceEl.appendChild(markerRoot);var markerName=doc.createElement("name");markerName.textContent=marker.name,markerRoot.appendChild(markerName);var markerIn=doc.createElement("in");markerIn.textContent=marker._in+"",markerRoot.appendChild(markerIn);var markerOut=doc.createElement("out");markerOut.textContent=marker.out+"",markerRoot.appendChild(markerOut);var markerComment=doc.createElement("comment");markerComment.textContent=marker.comment,markerRoot.appendChild(markerComment)}return doc},prototype.log2xml=function(){var doc=FCPXml.createXml(this.fcp),xmlSerializer=new XMLSerializer;return xmlSerializer.serializeToString(doc)},constructor.createClipFile=function(fcp,file){var doc=FCPXml.getFCPDocument(fcp),clipFile=doc.createElement("file");clipFile.setAttribute("id",file.id);var fileName=doc.createElement("name");fileName.textContent=file.name,clipFile.appendChild(fileName);var filePathUrl=doc.createElement("pathurl");filePathUrl.textContent=file.pathurl,clipFile.appendChild(filePathUrl);var fileMedia=doc.createElement("media");clipFile.appendChild(fileMedia);var fmVideo=doc.createElement("video");fileMedia.appendChild(fmVideo);var fmvDuration=doc.createElement("duration");fmvDuration.textContent=file.duration+"",fmVideo.appendChild(fmvDuration);var fmvSampleCharacteristics=FCPXml.createSampleCharacteristics(fcp);return fmVideo.appendChild(fmvSampleCharacteristics),clipFile},constructor.createSampleCharacteristics=function(fcp){var doc=FCPXml.getFCPDocument(fcp),sampleCharacteristics=doc.createElement("samplecharacteristics"),rate=FCPXml.createRate(fcp);sampleCharacteristics.appendChild(rate);var videoWidth=doc.createElement("width");videoWidth.textContent=fcp.sequence.media.video.format.samplecharacteristics.width+"",sampleCharacteristics.appendChild(videoWidth);var videoHeight=doc.createElement("height");videoHeight.textContent=fcp.sequence.media.video.format.samplecharacteristics.height+"",sampleCharacteristics.appendChild(videoHeight);var videoAnamorphic=doc.createElement("anamorphic");videoAnamorphic.textContent=fcp.sequence.media.video.format.samplecharacteristics.anamorphic,sampleCharacteristics.appendChild(videoAnamorphic);var par=doc.createElement("pixelaspectratio");return par.textContent=fcp.sequence.media.video.format.samplecharacteristics.pixelaspectratio,sampleCharacteristics.appendChild(par),sampleCharacteristics},constructor.createTimecode=function(fcp){var doc=FCPXml.getFCPDocument(fcp),timecode=doc.createElement("timecode"),rate=FCPXml.createRate(fcp);timecode.appendChild(rate);var timecodeString=doc.createElement("string");timecodeString.textContent=fcp.sequence.timecode.string,timecode.appendChild(timecodeString);var timecodeFrame=doc.createElement("frame");timecodeFrame.textContent=fcp.sequence.timecode.frame+"",timecode.appendChild(timecodeFrame);var timecodeDisplayFormat=doc.createElement("displayformat");return timecodeDisplayFormat.textContent=fcp.sequence.timecode.displayformat,timecode.appendChild(timecodeDisplayFormat),timecode},constructor.getFCPDocument=function(fcp){return(new DOMParser).parseFromString('<?xml version="1.0" encoding="UTF-8"?><xmeml version="'+fcp.version+'"></xmeml>',"text/xml")},constructor.createRate=function(fcp){var doc=FCPXml.getFCPDocument(fcp),rate=doc.createElement("rate"),ntsc=doc.createElement("ntsc");ntsc.textContent=fcp.sequence.rate.ntsc+"",rate.appendChild(ntsc);var timebase=doc.createElement("timebase");return timebase.textContent=fcp.sequence.rate.timebase+"",rate.appendChild(timebase),rate},constructor.createComments=function(fcp,item){var doc=FCPXml.getFCPDocument(fcp),comments=doc.createElement("comments"),masterComment1=doc.createElement("mastercomment1");masterComment1.textContent=FCPXml.getCommentVal(item.comments.mastercomment1),comments.appendChild(masterComment1);var masterComment2=doc.createElement("mastercomment2");masterComment2.textContent=FCPXml.getCommentVal(item.comments.mastercomment2),comments.appendChild(masterComment2);var masterComment3=doc.createElement("mastercomment3");masterComment3.textContent=FCPXml.getCommentVal(item.comments.mastercomment3),comments.appendChild(masterComment3);var masterComment4=doc.createElement("mastercomment4");masterComment4.textContent=FCPXml.getCommentVal(item.comments.mastercomment4),comments.appendChild(masterComment4);var clipCommenta=doc.createElement("clipcommenta");clipCommenta.textContent=FCPXml.getCommentVal(item.comments.clipcommenta),comments.appendChild(clipCommenta);var clipCommentb=doc.createElement("clipcommentb");return clipCommentb.textContent=FCPXml.getCommentVal(item.comments.clipcommentb),comments.appendChild(clipCommentb),comments},constructor.getCommentVal=function(val){return null==val||"".equals(val)?"":val}},{fcp:"FCP"},{});var ErrorPopupView=function(el,log){ElementView.call(this,el),this.log=log,this.errorsHistory=[]};ErrorPopupView=stjs.extend(ErrorPopupView,ElementView,[],function(constructor,prototype){constructor.ERROR_SERVER_COMMUNICATION="LogTool server request failed",constructor.selector=".error-informer",prototype.errorsHistory=null,prototype.log=null,prototype.showError=function(message){this.log.error(message),this.errorsHistory.push(message),this.el.innerHTML=message}},{errorsHistory:{name:"Array",arguments:[null]},log:"Log",el:"Element"},{});var VideologAsyncStorage=function(log){this.log=log,this.displayNamesById={},this.trackChangedRx=new Rx.ReplaySubject,this.trackDeletedRx=new Rx.ReplaySubject,this.eventChangedRx=new Rx.ReplaySubject,this.eventDeletedRx=new Rx.ReplaySubject};VideologAsyncStorage=stjs.extend(VideologAsyncStorage,null,[IVideologAsyncStorage],function(constructor,prototype){prototype.trackChangedRx=null,prototype.trackDeletedRx=null,prototype.eventChangedRx=null,prototype.eventDeletedRx=null,prototype.displayNamesById=null,prototype.log=null,constructor.defaultTrackNames=["Sub-Titling","Comments","Promo","Compliance","Commercials","Textless Elements","Dubbing"],prototype.getEventChangedRx=function(){return this.eventChangedRx},prototype.getTrackDeletedRx=function(){return this.trackDeletedRx;
},prototype.getTrackChangedRx=function(){return this.trackChangedRx},prototype.getEventDeletedRx=function(){return this.eventDeletedRx},constructor.canBeTrackName=function(newTrackName){for(var canUseEnteredName=!0,i=0;i<VideologAsyncStorage.defaultTrackNames.length;i++){var displayName=VideologAsyncStorage.defaultTrackNames[i];if(displayName.equals(newTrackName)){canUseEnteredName=!1;break}}return canUseEnteredName},constructor.getTagNames=function(tags){return tags.map(function(tag,i,arr){return tag.displayName})},prototype.findTagDisplayNames=function(searchText){return VideologAsyncStorage._findTagNames(this.displayNamesById,searchText)},constructor._findTagNames=function(tags,searchText){if(Utils.isBlank(searchText))return[];var _searchText=searchText.toLowerCase(),filteredTags=Utils.filterMap(tags,function(displayName,k){return displayName.toLowerCase().contains(_searchText)}),tagsList=[];for(var tId in filteredTags){var name=filteredTags[tId],tag={id:tId,displayName:name};tagsList.push(tag)}return tagsList.sort(function(tag1,tag2){return tag1.displayName.compareTo(tag2.displayName)}),tagsList.sort(function(tag1,tag2){var _dn1=tag1.displayName.toLowerCase(),_dn2=tag2.displayName.toLowerCase(),_wi1=Utils.min(VideologAsyncStorage.splitWords(_dn1).map(function(word,i,a){return word.indexOf(_searchText)}).filter(function(idx,i,a){return idx!=-1})),_wi2=Utils.min(VideologAsyncStorage.splitWords(_dn2).map(function(word,i,a){return word.indexOf(_searchText)}).filter(function(idx,i,a){return idx!=-1})),diff=_wi1-_wi2;if(0==diff){var i1=_dn1.indexOf(_searchText),i2=_dn2.indexOf(_searchText);diff=i1-i2}return diff}),tagsList},constructor.splitWords=function(text){return text.split(" ")},prototype.tagNameById=function(tagId){return this.displayNamesById[tagId]},prototype.trackById=function(trackId,onLoad,onError){this._trackById(trackId,onLoad,onError)},prototype.eventById=function(eventId,onLoad,onError){this._eventById(eventId,onLoad,onError)},prototype.saveTrack=function(t,onLoad,onError){this._saveTrack(t,stjs.bind(this,function(track1){this.trackChangedRx.onNext(track1),onLoad(track1)}),onError)},prototype.saveEvent=function(le,onLoad,onError){this._saveEvent(le,stjs.bind(this,function(logEvent1){this.eventChangedRx.onNext(logEvent1),onLoad(logEvent1)}),onError)},prototype.rollbackEventFromServer=function(logEventId){this.eventById(logEventId,stjs.bind(this,function(logEvent){this.log.debug("rollback for event",logEventId),this.eventChangedRx.onNext(logEvent)}),stjs.bind(this,function(o){return this.log.error("can not rollback event!")}))},prototype.deleteTrack=function(track){this.log.debug("track deleted",track),this._deleteTrack(track,stjs.bind(this.trackDeletedRx,"onNext"))},prototype.deleteEvent=function(logEventId){this._deleteEvent(logEventId,stjs.bind(this.eventDeletedRx,"onNext"))},prototype.clearTrack=function(track){this.trackEvents(track.id,stjs.bind(this,function(events){for(var i=0;i<events.length;i++)this.eventDeletedRx.onNext(events[i]);this._clearTrack(track,stjs.bind(this,function(deletedTrack){this.log.debug("Track deleted: "+deletedTrack.displayName)}))}),stjs.bind(this,function(e){this.log.error("can not delete logevent")}))},prototype.updateEventById=function(eventId,eventToUpdate,onUpdated,onFailed){this.eventById(eventId,stjs.bind(this,function(logEvent){logEvent=eventToUpdate(logEvent),null!=logEvent&&this.saveEvent(logEvent,onUpdated,onFailed)}),onFailed)},prototype.trackEvents=function(trackId,onLoad,onError){},prototype.tracksOfProxy=function(proxyId,onLoad){},prototype._trackById=function(trackId,onLoad,onError){},prototype._eventById=function(eventId,onLoad,onError){},prototype._saveTrack=function(track,onLoad,onError){},prototype._saveEvent=function(logEvent,onLoad,onError){},prototype._deleteTrack=function(track,onDeleted){},prototype._clearTrack=function(track,onDeleted){},prototype._deleteEvent=function(logEventId,onDeleted){}},{trackChangedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},trackDeletedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},eventChangedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},eventDeletedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},displayNamesById:{name:"Map",arguments:[null,null]},log:"Log",defaultTrackNames:{name:"Array",arguments:[null]}},{});var ProPanelComponent=function(props){React.Component.call(this,props),this.state={plugins:{},activePluginId:null}};ProPanelComponent=stjs.extend(ProPanelComponent,React.Component,[],function(constructor,prototype){constructor.ProPanelProps=function(){},constructor.ProPanelProps=stjs.extend(constructor.ProPanelProps,null,[],null,{},{}),constructor.ProPanelState=function(){},constructor.ProPanelState=stjs.extend(constructor.ProPanelState,null,[],function(constructor,prototype){prototype.plugins=null,prototype.activePluginId=null},{plugins:{name:"Map",arguments:[null,"PluginData"]}},{}),constructor.createElement=function(){return React.createElement(ProPanelComponent,{})},prototype.addPlugin=function(plugin,iconClass,onDone){var pluginData=new PluginData(plugin,iconClass);pluginData.container=window.document.createElement("div"),pluginData.container.classList.add("vg-plugin-container");var UGLYTEMPHARDCODE=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER).parentElement.clientWidth-41-15;plugin.renderInto(pluginData.container,UGLYTEMPHARDCODE,stjs.bind(this,function(){var proPanelState=new ProPanelComponent.ProPanelState;proPanelState.plugins=this.state.plugins,proPanelState.plugins[plugin.getId()]=pluginData,this.setState(proPanelState),null==this.state.activePluginId&&this.activatePlugin(plugin.getId()),null!=onDone&&onDone()}))},prototype.activatePlugin=function(id){var panelState=new ProPanelComponent.ProPanelState;panelState.activePluginId=id,this.setState(panelState)},prototype.getActivePlugin=function(){return this.state.plugins[this.state.activePluginId]},prototype.icon=function(id,iconClass){var isActive=id.equals(this.state.activePluginId),className="vg_icon";isActive&&(className+=" active");var activatePlugin=stjs.bind(this,function(e){return this.activatePlugin(id)});return React.DOM.div({className:className,onClick:activatePlugin,key:id},React.DOM.span({className:iconClass}))},prototype.render=function(){var ref=stjs.bind(this,function(div){if(null!=div){div.innerHTML="";var activePlugin=this.getActivePlugin();null!=activePlugin&&div.appendChild(activePlugin.container)}});return React.DOM.div({className:"vg-pro-panel-container"},React.DOM.div({className:"vg-pro-panel"},React.DOM.div({className:"vg-pro-panel-icons"},Utils.mapValues(this.state.plugins).map(stjs.bind(this,function(plugin,i,a){return this.icon(plugin.id,plugin.icon)})))),React.DOM.div({className:"vg-plugin-panel",ref:ref}))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var BasePlugin=function(id){this.id=id};BasePlugin=stjs.extend(BasePlugin,null,[VGPlugin],function(constructor,prototype){prototype.pluginApi=null,prototype.id=null,prototype.getId=function(){return this.id},prototype.setAPI=function(api){this.pluginApi=api},prototype.getSkinnedPlayer=function(){return this.pluginApi}},{pluginApi:"VGPlayerPluginApi"},{});var StepsControlView=function(player,container,parentView,className){VGThemeView.call(this,container,parentView,className,VGThemeView.magicContext("vg_icon-bars","Step Interval","vg_steps")),this.player=player,this.setEventRx(),this.setStepsList()};StepsControlView=stjs.extend(StepsControlView,VGThemeView,[],function(constructor,prototype){prototype.player=null,prototype.iconClick=null,prototype.stepsListRx=null,prototype.stepElRx=null,constructor.STEPS=[1,5,10,25,50],prototype.setStepsList=function(){var stepsContainer=this.container.querySelector(".vg_steps");StepsControlView.STEPS.forEach(stjs.bind(this,function(v){var span=window.document.createElement("span");span.className="vg_steps-item",span.innerHTML=v+"",stepsContainer.appendChild(span),Rx.Observable.fromEvent(span,"click").subscribe(stjs.bind(this,function(e){e.preventDefault(),this.deactivateSteps(".vg_steps-item.active"),span.classList.add("active"),this.parent.stepInterval=v}))}))},prototype.setEventRx=function(){var header=this.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");this.iconClick=Rx.Observable.fromEvent(header,"click"),this.iconClick.subscribe(stjs.bind(this,function(x){this.player.iconClick.onNext(this.el)})),this.stepsListRx=Rx.Observable.fromEvent(this.list,"click"),this.stepElRx=this.stepsListRx.map(function(e){return e.target.closest(".vg_steps-item")}).filter(function(stepItem){return null!=stepItem}).map(stjs.bind(this,function(stepItem){var stepEl=stepItem.parentElement,active=stepEl.classList.contains("active");return this.deactivateSteps(".vg_steps.active"),active||stepEl.classList.add("active"),stepEl}))},prototype.deactivateSteps=function(className){Utils.forEachElement(this.list.querySelectorAll(className),function(el){el.classList.remove("active")})}},{player:"VGThemePlayer",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},stepsListRx:{name:"Rx.Observable",arguments:["DOMEvent"]},stepElRx:{name:"Rx.Observable",arguments:["Element"]},STEPS:{name:"Array",arguments:[null]},icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var RenderedDropDownItem=function(id,title,innerHTML,log){DropDownItem.call(this,id,title),this.innerHTML=innerHTML,this.log=log};RenderedDropDownItem=stjs.extend(RenderedDropDownItem,DropDownItem,[],function(constructor,prototype){prototype.innerHTML=null,prototype.log=null,prototype.getInnerHTML=function(className){return this.innerHTML},prototype.updateElement=function(el){this.log.warn("WARNING: trying to update a prerendered menu item",this.id)}},{log:"Log"},{});var ColorBulletDropDownItem=function(id,title,color){DropDownItem.call(this,id,title),this.color=color};ColorBulletDropDownItem=stjs.extend(ColorBulletDropDownItem,DropDownItem,[],function(constructor,prototype){prototype.color=null,prototype.getInnerHTML=function(className){return VGTemplates.safeAreaItemTemplate(this.color,this)},prototype.updateElement=function(el){DropDownItem.prototype.updateElement.call(this,el);var pipka=el.querySelector(".pipka");pipka.classList.remove("pipka-red","pipka-green","pipka-grey","pipka-white"),pipka.classList.add("pipka-"+this.color)}},{},{});var DropDownView=function(container,parentView,className,title,items){VGView.call(this,container,parentView,className),this.itemsById={},this.itemElById={},this.className=className,this.container=container,this.itemSelectedRx=new Rx.Subject;var self=this;this.render(VGTemplates.dropDownTemplate(className,title)),self.el.className=className+"__content vg_background vg_primary",this.iconClickRx=Rx.Observable.fromEvent(self.container,"click"),this.iconClickRx.subscribe(function(e){e.stopPropagation();var parent2=self.parent,activeDdown=parent2.el.querySelector(".vg_volumeScreenControls ."+className+".active");self.toggleActive(activeDdown),activeDdown!=self.container&&self.toggleActive(self.container)}),self.listEl=self.el.querySelector("."+className+"__list"),items.forEach(stjs.bind(this,function(item,i,arr){this.addItem(item)})),this.listEl.addEventListener("click",stjs.bind(this,function(e){e.stopPropagation();for(var selectedItemEl=e.target;"LI"!=selectedItemEl.nodeName;){if(selectedItemEl==this.listEl){selectedItemEl=this.listEl.querySelector("li");break}selectedItemEl=e.target.parentElement}this.setActiveItemEl(selectedItemEl);var value=selectedItemEl.textContent.replaceAll("\n","").trim(),item=new DropDownItem(selectedItemEl.querySelector(".vg_info").getAttribute("itemID"),value);item.ownTarget=!0,this.activeItem=item,this.itemSelectedRx.onNext(item)}),!0);var listItems=self.listEl.getElementsByTagName("li");self.itemSelectedRx.subscribe(function(detail){if(!detail.ownTarget){var target=Utils.findElement(listItems,function(li){return li.textContent.toLowerCase().contains(detail.title.toLowerCase())});target.click()}})};DropDownView=stjs.extend(DropDownView,VGView,[],function(constructor,prototype){prototype.itemsById=null,prototype.activeItem=null,prototype.className=null,prototype.activeItemEl=null,prototype.itemSelectedRx=null,prototype.listEl=null,prototype.itemElById=null,prototype.iconClickRx=null,prototype.getClickRx=function(){return this.iconClickRx},prototype.updateItem=function(itemId,item){this.itemsById[itemId]=item;var el=this.itemElById[itemId];item.updateElement(el)},prototype.itemIds=function(){var result=[];for(var iid in this.itemsById)result.push(iid);return result},prototype.addItem=function(item){this.itemsById[item.id]=item;var newItem=item.createElement(this.className),lastChild=this.listEl.lastElementChild;this.itemElById[item.id]=newItem,this.listEl.insertBefore(newItem,lastChild)},prototype.deleteItem=function(itemId){delete this.itemsById[itemId];var e=this.itemElementById(itemId);e.parentElement.removeChild(e)},prototype.setActiveItem=function(itemId){if(null==this.itemsById[itemId])throw new RuntimeException("item not found");this.setActiveItemEl(this.itemElementById(itemId))},prototype.itemById=function(itemId){return this.itemsById[itemId]},prototype.itemElementById=function(itemId){return this.itemElById[itemId]},prototype.setActiveItemEl=function(itemEl){null==this.activeItemEl&&(this.activeItemEl=this.listEl.querySelector("."+this.className+"-item.active")),this.activeItemEl!=itemEl&&(this.toggleActive(this.activeItemEl),this.toggleActive(itemEl),this.activeItemEl=itemEl)}},{itemsById:{name:"Map",arguments:[null,"DropDownItem"]},activeItem:"DropDownItem",activeItemEl:"Element",itemSelectedRx:{name:"Rx.Subject",arguments:["DropDownItem"]},listEl:"Element",itemElById:{name:"Map",arguments:[null,"Element"]},iconClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var Filmstrip=function(player){VGPlugins.call(this,player);var view=player.getView();view.pluginsPanelRx.subscribe(function(panelView){view.filmstrip=new FilmstripView(player,panelView.container,view,null)})};Filmstrip=stjs.extend(Filmstrip,VGPlugins,[],function(constructor,prototype){constructor.PLUGIN_ID="filmstrip",prototype.getCut=function(){return this.player.getCurrentCut()},prototype.show=function(){throw new RuntimeException("show TODO")}},{player:"PlayerImpl",view:"VGView"},{});var VGCropPluginView=function(){VGGenericView.call(this),this.el=window.document.createElement("div"),this.el.className="vg-crop-image-section",this.el.innerHTML=VGTemplates.cropPluginTemplateElement(),this.frameImage=this.el.querySelector(".crop-frame")};VGCropPluginView=stjs.extend(VGCropPluginView,VGGenericView,[],function(constructor,prototype){prototype.frameImage=null,prototype.appendTo=function(container){this.container=container,this.container.appendChild(this.el)},prototype.getElement=function(){return this.el}},{frameImage:"Image",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var CaptionsView=function(player,captionsContainer,searchContainer){VGGenericView.call(this),this.player=player,this.el=window.document.createElement("div"),this.searchContainer=searchContainer,this.el.className="vg_captionText vg_info",this.appendTo(captionsContainer)};CaptionsView=stjs.extend(CaptionsView,VGGenericView,[],function(constructor,prototype){prototype.player=null,prototype.searchContainer=null,prototype.hideSubs=!1,prototype.selectedTrack=null,prototype.select_div=null,prototype.drawCaps=function(tv,highlight){if(null==this.selectedTrack||this.hideSubs)return void(this.el.innerHTML="");var captionText=this.getCaptionsSpanWords(tv,highlight);this.el.innerHTML=Utils.defaultString(captionText,"")},prototype.setCaptions=function(captions,tv,highlight){this.selectedTrack=captions,this.clearSearch(),this.hideSubs=!1,this.drawCaps(tv,highlight)},prototype.hideCaptions=function(tv){this.hideSubs=!0,this.drawCaps(tv,null)},prototype.showCaptions=function(tv){this.hideSubs=!1,this.drawCaps(tv,null)},prototype.getCaptionsSpanWords=function(tv,highlight){var captText=this.getCaptionsByTv(tv).map(function(x,i,a){return x.notes}).join("");if(Utils.isNotEmpty(highlight)){this.player.getLog().debug(highlight);var regEx=new RegExp(highlight,"gi");return captText.replace(regEx,function(match){return"<span class='vg_caption--highlight'>"+match+"</span>"})}return captText},prototype.getCaptionsByTv=function(tv){var frameByTv=this.player.getTimeline().getFrameByTv(tv),capsToShow=[];return null!=this.selectedTrack&&this.selectedTrack.rows.forEach(stjs.bind(this,function(row){var startFrame=this.player.getTimeline().getFrameByTv(row.startTv),endFrame=this.player.getTimeline().getFrameByTv(row.endTv);frameByTv>=startFrame&&frameByTv<=endFrame&&capsToShow.push(row)})),capsToShow},prototype.renderSubs=function(title){var subs=Utils.findWhere(this.player.getCaptionsList(),function(c){return c.title.equals(title)});this.player.getLog().debug(title,subs)},prototype.addSearchHit=function(position){var div=window.document.createElement("div");div.classList.add("vg_searchHit"),div.style.left=100*position.left+"%",this.searchContainer.appendChild(div)},prototype.clearSearch=function(){var els=this.player.getView().playerContainer.querySelectorAll(".vg_searchHit");VGView.removeAll(els)},prototype.highlighSearchHits=function(text,term){throw new RuntimeException("todo")},prototype.isSelectEnabled=function(){return 0!=this.select_div.style.opacity},prototype.toggleSelect=function(){this.isSelectEnabled()?this.select_div.style.opacity=0:this.select_div.style.opacity=.82}},{player:"PlayerImpl",searchContainer:"Element",selectedTrack:"Subtitles",select_div:"Element",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var AddMediaView=function(el){VGGenericView.call(this),this.container=null,this.el=el};AddMediaView=stjs.extend(AddMediaView,VGGenericView,[],function(constructor,prototype){prototype.PN_CANCEL="btn-cancel",prototype.PN_OK="btn-ok",constructor.partNumber="addmedia",prototype.onYesSubscr=null,prototype.onNoSubscr=null,prototype.onYesNo=function(onYesCallback,onNoCallback){this.dispose(),this.onYesSubscr=this.onYesClick().subscribe(onYesCallback),this.onNoSubscr=this.onNoClick().subscribe(onNoCallback)},prototype.onYesClick=function(){return Rx.Observable.fromEvent(VGTemplates.queryByVGPartNumber(this.el,this.PN_OK),"click")},prototype.onNoClick=function(){return Rx.Observable.fromEvent(VGTemplates.queryByVGPartNumber(this.el,this.PN_CANCEL),"click")},prototype.close=function(){this.dispose(),this.el.style.display="none"},prototype.open=function(){this.el.style.display="block"},prototype.dispose=function(){null!=this.onYesSubscr&&this.onYesSubscr.dispose(),null!=this.onNoSubscr&&this.onNoSubscr.dispose()},prototype.getVGProxyId=function(){var vgproxyid=VGTemplates.queryByVGPartNumber(this.el,"vgproxyid");return vgproxyid.value}},{onYesSubscr:"Rx.Disposable",onNoSubscr:"Rx.Disposable",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var LogEvent=function(trackId,startTv,timescale){this.version=0,this.setTrackId(trackId),this.startTv=startTv,this.timescale=timescale,this.endTv=startTv,this.tags=[],this.created=new Date,this.lastModified=new Date};LogEvent=stjs.extend(LogEvent,null,[],function(constructor,prototype){prototype.version=0,prototype.trackId=null,prototype.ownerId=null,prototype.id=null,prototype.name=null,prototype.tags=null,prototype.timescale=0,prototype.startTv=0,prototype.endTv=0,prototype.notes=null,prototype.subclipId=null,prototype.lastModified=null,prototype.created=null,constructor.fromJson=function(map){var tagJson=map.tags,tags=[];if(Utils.isNotBlank(tagJson)){var tags2Hydrate=JSON.parse(tagJson);tags=tags2Hydrate.map(function(map1,aLong,strings){return stjs.hydrate(map1,LogEventTag)})}map.tags=null;var e=stjs.hydrate(map,LogEvent);return e.tags=tags,e.created=new Date(map.created),e.lastModified=new Date(map.lastModified),e},prototype.tagNames=function(){var sortedTags=this.tags.sort(function(a,b){return stjs.trunc(a.created-b.created)});return sortedTags.map(function(logEventTag,aLong,strings){return logEventTag.displayName})},prototype.getTrackId=function(){return this.trackId},prototype.setTrackId=function(track){this.trackId=track},prototype.getOwnerId=function(){return this.ownerId},prototype.setOwnerId=function(owner){this.ownerId=owner},prototype.removeTagByName=function(tagDisplayName){var tagToRemove=this.tags.filter(function(logEventTag,aLong,strings){return logEventTag.displayName.equals(tagDisplayName)});tagToRemove.length>0&&this.removeTag(tagToRemove[0])},prototype.removeTag=function(tag){this.tags=this.tags.filter(function(logEventTag,aLong,strings){return!tag.id.equals(logEventTag.id)})}},{tags:{name:"Array",arguments:["LogEventTag"]},lastModified:"Date",created:"Date"},{});var HintsView=function(el,log){this.el=el,this.log=log,Rx.Observable.fromEvent(this.el,"mousedown").subscribe(function(e){return e.preventDefault()}),this.itemSelectedRx=Rx.Observable.fromEvent(this.el,"click").filter(function(e){return"LI"==e.target.nodeName}).map(function(e){return e.stopPropagation(),e.preventDefault(),e.target}).map(stjs.bind(this,function(liElement){return this.selectItem(liElement),this.getSelectedItemId()})),this.itemSelectedRx.subscribe(function(o){log.debug("itemSelectedRx",o)})};HintsView=stjs.extend(HintsView,null,[],function(constructor,prototype){constructor.selector=".app-HintsView",prototype.el=null,prototype.log=null,prototype.hintItems=null,prototype.selectedItem=null,prototype.itemSelectedRx=null,prototype.selectItem=function(item){return null!=this.selectedItem&&this.selectedItem.classList.remove("active"),item.classList.add("active"),this.selectedItem=item,this.selectedItem},prototype.selectNextItem=function(){if(null==this.selectedItem)return null;var nextItem=this.selectedItem.nextElementSibling;return null!=nextItem&&this.selectItem(nextItem),this.log.debug("selectNextItem->",nextItem),this.selectedItem.getAttribute("data-tag-id")},prototype.selectPrevItem=function(){if(null==this.selectedItem)return null;var prevItem=this.selectedItem.previousElementSibling;return null!=prevItem&&this.log.debug("selected prev item",this.selectItem(prevItem)),this.selectedItem.getAttribute("data-tag-id")},prototype.renderTags=function(tagNames,highlight){this.el.style.display="block";var regEx=new RegExp(highlight,"gi"),highlightedTags=tagNames.map(function(tag,i,a){var replace=tag.displayName.replace(regEx,function(match){return"<span>"+match+"</span>"});return new LogEventTag(tag.id,replace)});this.el.innerHTML=VGTemplates.videologHint(highlightedTags),this.hintItems=this.el.querySelectorAll("li"),this.hintItems.length>0&&this.selectItem(this.hintItems[0])},prototype.placeTagsHint=function(element){var htmlRect=element.ownerDocument.documentElement.getBoundingClientRect(),boundingClientRect=element.getBoundingClientRect();this.el.style.top=boundingClientRect.bottom-htmlRect.top+"px",this.el.style.left=boundingClientRect.left-htmlRect.left+"px"},prototype.getSelectedItemId=function(){return null==this.selectedItem?null:this.selectedItem.getAttribute("data-tag-id")},prototype.close=function(){this.el.innerHTML="",this.el.style.display="none",this.selectedItem=null}},{el:"Element",log:"Log",hintItems:{name:"HTMLList",arguments:["Element"]},selectedItem:"Element",itemSelectedRx:{name:"Rx.Observable",arguments:[null]}},{});var TimecodeInput=function(input,timeline,timeRx,onChange,type,mask){this.input=input,this.timeline=timeline,this.onChange=onChange,this.type=type,this.mask=mask,this.maskedInput=new MaskedTimecodeInput(this.input,mask),timeRx.subscribe(stjs.bind(this,function(updatedTime){return this.timeline=updatedTime})),this.input.addEventListener("blur",stjs.bind(this,function(e){return this.__onInput()})),this.input.addEventListener("keypress",function(e){e.keyCode==HotkeyManager.getKeyCode("enter")&&e.target.blur()})};TimecodeInput=stjs.extend(TimecodeInput,null,[],function(constructor,prototype){prototype.timeline=null,prototype.input=null,prototype.maskedInput=null,prototype.lastTimeSample=null,prototype.type=null,prototype.mask=null,prototype.onChange=null,prototype.update=function(ts){this.lastTimeSample=ts,this.input.value=this.timeSampleToInputValue(ts)},prototype.timeSampleToInputValue=function(ts){},prototype.inputValueToTimeSample=function(value){},prototype.__onInput=function(){if(null!=this.input.value&&this.input.value.indexOf("_")<0){var frame=this.inputValueToTimeSample(this.input.value);this.onChange(frame)}else this.input.value=this.timeSampleToInputValue(this.lastTimeSample)}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var AddTagComponent=function(props){React.Component.call(this,props),this.state=new AddTagComponent.State,this.state.showDdown=!1,props.onClick=stjs.bind(this,function(domEvent){this.state.showDdown=!0})};AddTagComponent=stjs.extend(AddTagComponent,React.Component,[],function(constructor,prototype){prototype.suggestInput=null,constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],function(constructor,prototype){prototype.showDdown=!1},{},{}),constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.suggestArray=null,prototype.onClick=null,prototype.onChange=null,prototype.onCreate=null},{suggestArray:"Array",onClick:{name:"Callback1",arguments:["DOMEvent"]},onChange:{name:"Callback1",arguments:["DOMEvent"]},onCreate:{name:"Callback1",arguments:["DOMEvent"]}},{}),constructor.addTag=function(){var props={};return React.createElement(AddTagComponent,props)},prototype.render=function(){this.state.showDdown?this.suggestInput=React.DOM.div({className:"vg-event-tag-ddown"},React.DOM.input({className:"vg-event-tag-ddown-input",placeholder:"Add tag"}),React.DOM.div({className:"vg-event-tag-ddown-tags"},React.DOM.ul({className:"vg-event-tag-ddown-tags-content"},React.DOM.li(null,"Bars and Tone"),React.DOM.li(null,"Fade to Black"),React.DOM.li(null,"Black"),React.DOM.li(null,"Commercial Blank / Insert Ads"),React.DOM.li(null,"Commercial Black"),React.DOM.li(null,"Pull Commercial Black"),React.DOM.li(null,"Bars and Tone"),React.DOM.li(null,"Fade to Black")))):this.suggestInput=null;var attrs={};attrs.className=TagComponent.eventTagCss+" add_tag";var onclick=stjs.bind(this,function(domEvent){this.toggleInputDdown()});return attrs.onClick=onclick,React.DOM.div({className:"add_tag-wrapper"},React.DOM.span(attrs,"+ Add Tag"),this.suggestInput)},prototype.toggleInputDdown=function(){this.state.showDdown=!this.state.showDdown,this.setState(this.state)}},{suggestInput:{name:"ReactElement",arguments:["Object"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var LogEventView=function(logEvent,pluginClass,player,timeFormat){this.pluginClass=pluginClass,this.player=player,this.logEventId=logEvent.id,this.trackId=logEvent.getTrackId(),this.el=window.document.createElement("div"),this.el.className=pluginClass+"__logevent",this.el.id=logEvent.id,this.render(player,timeFormat),this.onStartTimeEditClickRx=new Rx.Subject,this.onEndTimeEditClickRx=new Rx.Subject,this.onTagDeleteRx=new Rx.Subject,this.onSubclipCreateClickRx=new Rx.Subject,this.onClickStartTimevalueRx=new Rx.Subject,this.onClickEndTimevalueRx=new Rx.Subject,this.onDeleteRx=Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorDeleteButton),"click").map(stjs.bind(this,function(domEvent){return this})),this.update(logEvent,timeFormat)};LogEventView=stjs.extend(LogEventView,null,[],function(constructor,prototype){constructor.selectorDeleteButton=".view-deleteEvent",constructor.selectorStartTape=".timevalue-start_tape",constructor.selectorEndTape=".timevalue-end_tape",constructor.selectorStartFrame=".timevalue-start_frame",constructor.selectorDurationTape=".view-durationTape",constructor.selectorEndFrame=".timevalue-end_frame",constructor.selectorDuration=".view-duration",constructor.selectorStartStandard=".timevalue-start_standard",constructor.selectorEndStandard=".timevalue-end_standard",constructor.selectorDurationStandard=".view-durationStandard",constructor.selectorSubclipButton=".logevent-subclip_button",constructor.selectorTagsContainer=".view-tags",constructor.selectorDurationBlock=".view-durationBlock",constructor.selectorTagDisplayName=".view-tag-displayName",constructor.selectorTagNameElement=".rrtheme_videolog__tag-name",constructor.selectorNotesInput=".description-input",constructor.selectorTimeformat=".logevent-timeformat",constructor.selectorStart=".logevent-start",constructor.selectorEnd=".logevent-end",constructor.selectorTimevalueContainer=".timevalue-container",prototype.el=null,prototype.timeCodeView=null,prototype.player=null,prototype.pluginClass=null,prototype.logEventId=null,prototype.trackId=null,prototype.onDeleteRx=null,prototype.onTagDeleteRx=null,prototype.onSubclipCreateClickRx=null,prototype.onStartTimeEditClickRx=null,prototype.onEndTimeEditClickRx=null,prototype.onClickStartTimevalueRx=null,prototype.onClickEndTimevalueRx=null,prototype.durationBlockEl=null,prototype.logEventToCommit=null,prototype.subclipEl=null,constructor.cssSubclipExist=".exist",constructor.cssSubclipExists=".create",prototype.getViewWeight=function(){return this.logEventToCommit.created.getTime()},prototype.commitLogEvent=function(logEventCallback1){this.logEventToCommit=logEventCallback1(this.logEventToCommit)},prototype.render=function(player,timeFormat){this.el.innerHTML=VGTemplates.videologLogevent({playerWidth:Helpers.playerWidthPercents(player),className:this.pluginClass,durationTape:"",startTape:"",endTape:"",durationFrames:"",startFrame:"",endFrame:"",durationStandard:"",startStandard:"",endStandard:"",notes:""}),this.durationBlockEl=Utils.querySelectorNotNull(this.el,LogEventView.selectorDurationBlock),this.subclipEl=Utils.querySelectorNotNull(this.el,LogEventView.selectorSubclipButton);for(var startTimecodes=this.el.querySelectorAll(LogEventView.selectorStart),i=0;i<startTimecodes.length;i++){var editIconEl=Utils.querySelectorNotNull(startTimecodes[i],".vg_icon-edit");Rx.Observable.fromEvent(editIconEl,"click",stjs.bind(this,function(domEvent){return this})).subscribe(stjs.bind(this,function(logEventView){this.onStartTimeEditClickRx.onNext(logEventView)}))}for(var endTimecodes=this.el.querySelectorAll(LogEventView.selectorEnd),i=0;i<startTimecodes.length;i++){var editIconEl=Utils.querySelectorNotNull(endTimecodes[i],".vg_icon-edit");Rx.Observable.fromEvent(editIconEl,"click",stjs.bind(this,function(domEvent){return this})).subscribe(stjs.bind(this,function(logEventView){this.onEndTimeEditClickRx.onNext(logEventView)}))}Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorStartTape),"click").subscribe(stjs.bind(this,function(domEvent){this.onClickStartTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorStartFrame),"click").subscribe(stjs.bind(this,function(domEvent){this.onClickStartTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorStartStandard),"click").subscribe(stjs.bind(this,function(domEvent){this.onClickStartTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorEndTape),"click").subscribe(stjs.bind(this,function(domEvent){
this.onClickEndTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorEndFrame),"click").subscribe(stjs.bind(this,function(domEvent){this.onClickEndTimevalueRx.onNext(this)})),Rx.Observable.fromEvent(Utils.querySelectorNotNull(this.el,LogEventView.selectorEndStandard),"click").subscribe(stjs.bind(this,function(domEvent){this.onClickEndTimevalueRx.onNext(this)})),this.timeCodeView=new TimeCodeView(Utils.querySelectorNotNull(this.el,TimeCodeView.selector)),this.timeCodeView.changeFormat(timeFormat),Rx.Observable.fromEvent(this.subclipEl,"click",stjs.bind(this,function(domEvent){return this})).subscribe(stjs.bind(this,function(logEventView){Utils.isBlank(this.logEventToCommit.subclipId)&&this.onSubclipCreateClickRx.onNext(logEventView.logEventId)}))},prototype.updateDurationBlock=function(startFrame,durationFrames,frameCount){this.durationBlockEl.style.width=durationFrames/frameCount*100+"%",this.durationBlockEl.style.left=startFrame/frameCount*100+"%"},prototype.getElement=function(){return this.el},prototype.getOnDeleteRx=function(){return this.onDeleteRx},prototype.renderTags=function(pluginClass,logEvent){var tagsContainer=Utils.querySelectorNotNull(this.el,LogEventView.selectorTagsContainer);tagsContainer.innerHTML=VGTemplates.videologEventTag(pluginClass,logEvent.tagNames());for(var tags=tagsContainer.querySelectorAll(LogEventView.selectorTagNameElement),i=0;i<tags.length;i++){var tagEl=tags[i],x=tagEl.querySelector(".vg_icon-x");Rx.Observable.fromEvent(x,"click").subscribe(stjs.bind(this,function(domEvent){var tagDisplayName=domEvent.target.parentElement.querySelector(LogEventView.selectorTagDisplayName).innerHTML;this.player.getLog().debug("onClick for deleteTag",tagDisplayName),this.onTagDeleteRx.onNext(tagDisplayName)}))}},prototype.update=function(logEvent,timeformat){this.logEventToCommit=logEvent,this.el.setAttribute("data-track-id",logEvent.getTrackId()),this.el.querySelector(LogEventView.selectorNotesInput).value=logEvent.notes;var startTv=TimecodeHelpers.convertTimeScale(this.player,logEvent.startTv,logEvent.timescale),endTv=TimecodeHelpers.convertTimeScale(this.player,logEvent.endTv,logEvent.timescale),startFrame=TimecodeHelpers.getFrameByTv(this.player,startTv),endFrame=TimecodeHelpers.getFrameByTv(this.player,endTv),durationFrames=endFrame-startFrame,startStandard=TimecodeHelpers.getStandardByTv(this.player,startTv),endStandard=TimecodeHelpers.getStandardByTv(this.player,endTv),durationStandard=TimecodeHelpers.getStandardDurationByTv(this.player,startTv,endTv),frameCount=TimecodeHelpers.getFrameCount(this.player),durationTape=(TimecodeHelpers.getTimecodedDuration(this.player,durationFrames),TimecodeHelpers.getTimecodedDuration(this.player,durationFrames)),startTape=TimecodeHelpers.getNdftcByTv(this.player,startTv),endTape=TimecodeHelpers.getNdftcByTv(this.player,endTv);this.el.querySelector(LogEventView.selectorStartTape).textContent=startTape,this.el.querySelector(LogEventView.selectorEndTape).textContent=endTape,this.el.querySelector(LogEventView.selectorDurationTape).textContent=durationTape,this.el.querySelector(LogEventView.selectorStartFrame).textContent=startFrame+"",this.el.querySelector(LogEventView.selectorEndFrame).textContent=endFrame+"",this.el.querySelector(LogEventView.selectorDuration).textContent=durationFrames+"",this.el.querySelector(LogEventView.selectorStartStandard).textContent=startStandard+"",this.el.querySelector(LogEventView.selectorEndStandard).textContent=endStandard+"",this.el.querySelector(LogEventView.selectorDurationStandard).textContent=durationStandard+"",Utils.isNotBlank(this.logEventToCommit.subclipId)?this.showAsWithSubclip():this.showAsWithoutSubclip(),this.updateDurationBlock(startFrame,durationFrames,frameCount),this.timeCodeView.changeFormat(timeformat),this.renderTags(this.pluginClass,logEvent)},prototype.showAsWithoutSubclip=function(){this.subclipEl.querySelector(LogEventView.cssSubclipExist).style.display="none",this.subclipEl.querySelector(LogEventView.cssSubclipExists).style.display="inline"},prototype.showAsWithSubclip=function(){this.subclipEl.querySelector(".exist").style.display="inline",this.subclipEl.querySelector(LogEventView.cssSubclipExists).style.display="none"},prototype.editStartTimevalueMode=function(){for(var startElList=this.el.querySelectorAll(LogEventView.selectorStart),i=0;i<startElList.length;i++){var tvc=Utils.querySelectorNotNull(startElList[i],LogEventView.selectorTimevalueContainer);tvc.classList.add("active")}},prototype.editEndTimevalueMode=function(){for(var elList=this.el.querySelectorAll(LogEventView.selectorEnd),i=0;i<elList.length;i++){var tvc=Utils.querySelectorNotNull(elList[i],LogEventView.selectorTimevalueContainer);tvc.classList.add("active")}},prototype.readOnlyMode=function(){for(var eList=this.el.querySelectorAll(LogEventView.selectorTimevalueContainer),i=0;i<eList.length;i++)eList[i].classList.remove("active")},prototype.existingTags=function(){return this.logEventToCommit.tags}},{el:"Element",timeCodeView:"TimeCodeView",player:"PlayerImpl",onDeleteRx:{name:"Rx.Observable",arguments:["LogEventView"]},onTagDeleteRx:{name:"Rx.Subject",arguments:[null]},onSubclipCreateClickRx:{name:"Rx.Subject",arguments:[null]},onStartTimeEditClickRx:{name:"Rx.Subject",arguments:["LogEventView"]},onEndTimeEditClickRx:{name:"Rx.Subject",arguments:["LogEventView"]},onClickStartTimevalueRx:{name:"Rx.Subject",arguments:["LogEventView"]},onClickEndTimevalueRx:{name:"Rx.Subject",arguments:["LogEventView"]},durationBlockEl:"Element",logEventToCommit:"LogEvent",subclipEl:"Element"},{});var TrackListComponent=function(props){React.Component.call(this,props);var noMasterTrack=0!=props.tracks.length&&null==Utils.findWhere(props.tracks,function(t){return"Master".equals(t.id)}),defaultTrack=noMasterTrack?props.tracks[0].id:"Master";this.importCallback=function(e){return props.importTrackRx.onNext(!0)},this.state={open:!1,currentTrack:defaultTrack};var currentTrack=this.getCurrentTrack();null!=currentTrack&&props.selectTrackRx.onNext(currentTrack)};TrackListComponent=stjs.extend(TrackListComponent,React.Component,[],function(constructor,prototype){prototype.importCallback=null,constructor.TrackListProps=function(tracks,deleteTrackRx,selectTrackRx,importTrackRx){this.tracks=tracks,this.deleteTrackRx=deleteTrackRx,this.selectTrackRx=selectTrackRx,this.importTrackRx=importTrackRx},constructor.TrackListProps=stjs.extend(constructor.TrackListProps,null,[],function(constructor,prototype){prototype.tracks=null,prototype.deleteTrackRx=null,prototype.selectTrackRx=null,prototype.importTrackRx=null},{tracks:{name:"Array",arguments:["Track"]},deleteTrackRx:{name:"Rx.Subject",arguments:["Track"]},selectTrackRx:{name:"Rx.Subject",arguments:["Track"]},importTrackRx:{name:"Rx.Subject",arguments:[null]}},{}),constructor.TrackListState=function(){},constructor.TrackListState=stjs.extend(constructor.TrackListState,null,[],function(constructor,prototype){prototype.open=!1,prototype.currentTrack=null},{},{}),prototype.render=function(){var className="vg-have-no-tracks-wrapper";0==this.props.tracks.length&&(className+=" active");var elements=[React.DOM.div({className:"main-dropdown-menu-name"},"TRACKS"),React.DOM.div({className:className},React.DOM.div({className:"vg-have-no-tracks"},"You have no tracks"),React.DOM.div({className:"vg-import-new-track-wrapper"},React.DOM.div({className:"add-new-track",onClick:this.importCallback},React.DOM.div({className:"plus"},"+"),React.DOM.div({className:"import-new-track"},"IMPORT NEW TRACK"))))];return 0!=this.props.tracks.length&&elements.push(this.trackList()),React.DOM.div({className:"vg-tracks-dropdown-menu"},elements)},prototype.trackList=function(){var toggleDropdown=stjs.bind(this,function(e){this.state.open=!this.state.open,this.setState(this.state)}),className="vg-magic-dropdown";0!=this.props.tracks.length&&(className+=" active"),this.state.open&&(className+=" open");var currentTrack=this.getCurrentTrack();return React.DOM.div({className:className},React.DOM.div({className:"selected-track",onClick:toggleDropdown},React.DOM.div({className:"triangle"}),React.DOM.div({className:"tracks-name-header"},null==currentTrack?"":currentTrack.displayName)),React.DOM.div({className:"dropdown-menu-content"},React.DOM.div({className:"add-new-track",onClick:this.importCallback},React.DOM.div({className:"plus"},"+"),React.DOM.div({className:"import-new-track"},"IMPORT NEW TRACK")),React.DOM.ul({},this.props.tracks.map(stjs.bind(this,function(track,idx,arr){return this.track(track)})))))},prototype.getCurrentTrack=function(){return this.props.tracks.filter(stjs.bind(this,function(t,i,a){return t.id.equals(this.state.currentTrack)}))[0]},prototype.track=function(track){var props=new TrackComponent.TrackProps(track,track.id.equals(this.state.currentTrack),stjs.bind(this,function(e){this.state.currentTrack=track.id,this.state.open=!1,this.setState(this.state),this.props.selectTrackRx.onNext(track)}),stjs.bind(this,function(e){return this.props.deleteTrackRx.onNext(track)}));return React.createElement(TrackComponent,UIUtils.toPlainObject(props))}},{importCallback:{name:"Callback1",arguments:["DOMEvent"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var CaptionsControlView=function(player,container,parentView,className){VGThemeView.call(this,container,parentView,className,VGThemeView.magicContext("vg_icon-captions","Captions","vg_captionslist")),this.player=player;var captionsCount=player.getCaptionsList().length;this.tracksInfo.innerHTML=UIUtils.plural("track",captionsCount),this.infoEl=this.el.querySelector(".vg_captionslist__info"),this.setEventRx()};CaptionsControlView=stjs.extend(CaptionsControlView,VGThemeView,[],function(constructor,prototype){constructor.GetCaption="getCaption",prototype.player=null,prototype.captionElRx=null,prototype.captionsFormRx=null,prototype.infoEl=null,prototype.iconClick=null,prototype.captionListRx=null,prototype.setEventRx=function(){var self=this,header=self.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");self.iconClick=Rx.Observable.fromEvent(header,"click"),self.iconClick.subscribe(stjs.bind(this,function(x){this.player.iconClick.onNext(self.el)})),self.captionListRx=Rx.Observable.fromEvent(self.list,"click"),self.captionElRx=self.captionListRx.map(function(e){return e.target.closest(".vg_caption__item")}).filter(function(captionItem){return null!=captionItem}).map(function(captionItem){var captionEl=captionItem.parentElement,active=captionEl.classList.contains("active");return self.deactivateCaptions(),active||captionEl.classList.add("active"),captionEl}),self.captionsFormRx=new Rx.Subject,this.player.getCaptionListChangeRx().subscribe(function(x){return self.appendCaption(x)}),this.player.getCaptionHandlerRx().subscribe(stjs.bind(this,function(cb){this.addCaptionsBtn(cb)}))},prototype.activateCaption=function(caption){this.deactivateCaptions();var _cationEl=this.list.querySelector("#"+caption.id);null!=_cationEl&&_cationEl.classList.add("active")},prototype.addCaptionsBtn=function(cb){var self=this,addCaptionBtn=window.document.createElement("span");addCaptionBtn.className="vgtheme_control-plus",self.infoEl.appendChild(addCaptionBtn),Rx.Observable.fromEvent(addCaptionBtn,"click").subscribe(function(e){cb()})},prototype.appendCaption=function(caption){var self=this;self.deactivateCaptions();var captionsCount=this.player.getCaptionsList().length;self.tracksInfo.innerHTML=UIUtils.plural("track",captionsCount);var captEl=VGTemplates.elFromHTML(VG["templates/caption.html"]({caption:caption}),this.player.container.ownerDocument);if(this.player.options.search){captEl.insertAdjacentHTML("beforeend",VG["templates/captionsearch.html"]({}));var captForm=captEl.querySelector(".vg_captionSearchForm");captForm.addEventListener("submit",function(e){e.preventDefault();var input=captForm.querySelector("input");self.captionsFormRx.onNext(input)})}captEl.id=caption.id,captEl.classList.add("active"),Utils.addMethod(captEl,CaptionsControlView.GetCaption,function(){return caption}),self.list.appendChild(captEl)},prototype.deactivateCaptions=function(){Utils.forEachElement(this.list.querySelectorAll(".vg_caption.active"),function(el){el.classList.remove("active");var input=el.querySelector("input");null!=input&&(input.value="")})},prototype.setSearchValue=function(searchValue){var _activeItem=this.list.querySelector(".active input");null!=_activeItem&&(_activeItem.value=searchValue)}},{player:"VGThemePlayer",captionElRx:{name:"Rx.Observable",arguments:["Element"]},captionsFormRx:{name:"Rx.Subject",arguments:["Input"]},infoEl:"Element",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},captionListRx:{name:"Rx.Observable",arguments:["DOMEvent"]},icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var AudioControlView=function(player,container,parentView,className){VGThemeView.call(this,container,parentView,className,VGThemeView.magicContext("vg_icon-audio","AUDIO","vg_audiolist")),this.player=player,this.tracksInfo.insertAdjacentHTML("afterend","<span class='vg_muteAllButton'></span><input class='vg_horizontal-range' type='range' min='0' max='100' step='1'>"),this.volumeButton=this.el.querySelector(".vg_muteAllButton"),this.volumeRange=this.el.querySelector(".vg_horizontal-range"),this.volumeRange.value=""+100*player.getVolume(),this.infoEl=this.el.querySelector(".vg_audiolist__info"),this.list.setAttribute("data-proxy",this.proxyId),this.setEventRx(),this.addScrubberWave()};AudioControlView=stjs.extend(AudioControlView,VGThemeView,[],function(constructor,prototype){constructor.GetTrack="getTrack",prototype.player=null,prototype.volumeButton=null,prototype.volumeRange=null,prototype.proxyId=null,prototype.waveformImg=null,prototype.iconClick=null,prototype.infoEl=null,prototype.muteButtonRx=null,prototype.volumeRangeRx=null,prototype.audioListRx=null,prototype.channelElRx=null,prototype.volume=0,prototype.addScrubberWave=function(){var self=this,waveformEl=window.document.createElement("div");waveformEl.className="vg_audioStrip",self.waveformImg=window.document.createElement("img"),waveformEl.appendChild(self.waveformImg);var timeScrubberEl=this.player.getView().timeScrubberView.el;null!=timeScrubberEl&&timeScrubberEl.appendChild(waveformEl)},prototype.waveIconClick=!1,prototype.activeWaveIcon=null,prototype.setEventRx=function(){var self=this,header=self.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");self.iconClick=Rx.Observable.fromEvent(header,"click"),self.iconClick.subscribe(stjs.bind(this,function(x){this.player.iconClick.onNext(self.el)}));var volumeButtonRx=Rx.Observable.fromEvent(self.volumeButton,"click");self.muteButtonRx=volumeButtonRx.map(function(x){return self.volumeButton.classList.contains("vg_volume--mute")});var volumeRangeRx=Rx.Observable.fromEvent(self.volumeRange,"mousemove");self.volumeRangeRx=volumeRangeRx.map(function(x){return Utils.toDouble(self.volumeRange.value)/100}),self.audioListRx=Rx.Observable.fromEvent(self.list,"click"),self.audioListRx.subscribe(stjs.bind(this,function(e){this.waveIconClick=Boolean(e.target.closest(".vg_waveformIcon"))})),self.channelElRx=self.audioListRx.map(stjs.bind(this,function(e){var channelEl=e.target.closest(".vg_audioTrack__channel");return this.waveIconClick||null==channelEl?null:this.player.isChangingVideoSrc()?null:channelEl}));var waveIconRx=self.audioListRx.map(function(e){return e.target.closest(".vg_waveformIcon")});waveIconRx.subscribe(stjs.bind(this,function(waveIconEl){this.waveIconClick&&(null!=this.activeWaveIcon&&this.activeWaveIcon!=waveIconEl&&(this.activeWaveIcon.classList.remove("active"),self.waveformImg.classList.remove("active")),self.loadWaveForm(waveIconEl),this.activeWaveIcon=waveIconEl)})),volumeButtonRx.subscribe(function(x){self.volumeButton.classList.toggle("vg_volume--mute")});var rendered=[];this.player.audioTracksRx.filter(function(t){return rendered.indexOf(t.proxyId)<0}).subscribe(stjs.bind(this,function(track){self.appendTrack(track);var totalChannels=Utils.sumBy(this.player.getAudioTracks(),function(t){return t.channelCount});self.tracksInfo.innerHTML=UIUtils.plural("track",totalChannels),rendered.push(track.proxyId)})),this.player.audioTracksRx.filter(function(t){return rendered.indexOf(t.proxyId)>=0}).subscribe(function(track){self.updateTrack(track)}),this.player.getVolumeChangeRx().subscribe(function(volume){0!=volume?self.volumeButton.classList.remove("vg_volume--mute"):self.volumeButton.classList.add("vg_volume--mute"),self.volumeRange.value=""+100*volume}),this.player.getAudioHandlerRx().subscribe(stjs.bind(this,function(cb){this.addAudioBtn(cb)}))},prototype.updateTrack=function(track){var trackEl=this.list.querySelector("[data-trackProxy='"+track.proxyId+"']");if(null!=trackEl&&null!=track.dashStream){var self=this,fullTraclEl=this.addFullTrackView(track,self);this.list.replaceChild(fullTraclEl,trackEl)}},prototype.addAudioBtn=function(cb){var self=this,addAudioBtn=window.document.createElement("span");addAudioBtn.className="vgtheme_control-plus",self.infoEl.insertBefore(addAudioBtn,self.infoEl.lastElementChild),Rx.Observable.fromEvent(addAudioBtn,"click").subscribe(function(e){cb()})},prototype.loadWaveForm=function(waveIconEl){var self=this;self.toggleActive(waveIconEl),self.toggleActive(self.waveformImg);var img=waveIconEl.querySelector("img");self.waveformImg.style.width=img.style.width,self.setWaveformSrc(img.src)},prototype.setWaveformSrc=function(src){Utils.isBlank(src)&&(this.waveformImg.style.width=null),this.waveformImg.src=src},prototype.appendTrack=function(track){this.player.getLog().debug("appendTrack",track);var self=this,trackEl=null;trackEl=null!=track.dashStream?this.addFullTrackView(track,self):this.addEmptyTrackView(track),self.list.appendChild(trackEl)},prototype.addEmptyTrackView=function(track){var channels=track.getChannels(),trackEl=VGTemplates.elFromHTML(VG["templates/audiotrack.html"]({track:track,width:0,channels:channels}),this.player.container.ownerDocument);return trackEl.classList.add("vg_audioTrack--empty"),trackEl.insertAdjacentHTML("beforeend","<div class='vg_loadingstate'><div class='vg_loading-spinner'></div></div>"),trackEl},prototype.addFullTrackView=function(track,self){var cur=this.player.getCurrentAudioTrack(),duration=0;null!=track.dashStream&&(duration=Math.min(track.dashStream.getDurationSec(),this.player.getSeekableDurationSec()));var width=null!=cur&&track.proxyId==cur.proxyId?"100%":duration/this.player.getSeekableDurationSec()*100+"%",channels=track.getChannels(),trackEl=VGTemplates.elFromHTML(VG["templates/audiotrack.html"]({proxyType:this.player.proxyType,track:track,width:width,channels:channels}),this.player.container.ownerDocument),channelEls=trackEl.querySelectorAll(".vg_audioTrack__channel"),channelImgs=trackEl.querySelectorAll("img");return Rx.Observable.fromEvent(channelImgs,"error").subscribe(function(e){e.target.parentElement.removeChild(e.target)}),track.channelMuteRx.subscribe(function(channelMute){var mute=channelMute.mute,channel=channelMute.channel;mute?channelEls[channel].classList.add("vg_muted"):channelEls[channel].classList.remove("vg_muted")}),trackEl}},{player:"VGThemePlayer",volumeButton:"Element",volumeRange:"Input",waveformImg:"Image",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},infoEl:"Element",muteButtonRx:{name:"Rx.Observable",arguments:[null]},volumeRangeRx:{name:"Rx.Observable",arguments:[null]},audioListRx:{name:"Rx.Observable",arguments:["DOMEvent"]},channelElRx:{name:"Rx.Observable",arguments:["Element"]},activeWaveIcon:"Element",icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var DropDownComponent=function(props){React.Component.call(this,props)};DropDownComponent=stjs.extend(DropDownComponent,React.Component,[],function(constructor,prototype){constructor.ddown=function(props){return React.createElement(DropDownComponent,UIUtils.toPlainObject(props))},prototype.render=function(){var items=[];null!=this.props.items&&(items=this.props.items.map(stjs.bind(this,function(item,idx,arr){return this.props.itemToElement(item)})));var ul=React.DOM.ul({className:this.props.className+"__list"},items),divProps={className:this.props.className+"__content vg_background vg_primary"};return null!=this.props.title?React.DOM.div(divProps,React.DOM.div({className:this.props.className+"__title vg_default"},React.DOM.span({className:"vg_info"},this.props.title)),ul):React.DOM.div(divProps,ul)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var EventListComponent=function(props){React.Component.call(this,props),this.logScale=new LogScale(1,EventListComponent.MIN_WIDTH*props.timeline.getFrameCount())};EventListComponent=stjs.extend(EventListComponent,React.Component,[],function(constructor,prototype){constructor.MIN_WIDTH=.01,prototype.logScale=null,constructor.EventListProps=function(events,timeline,filmstripDrawer,zoom,currentEvent,selectEventRx,deleteEventRx,height,log){this.timeline=timeline,this.filmstripDrawer=filmstripDrawer,this.events=events,this.zoom=zoom,this.currentEvent=currentEvent,this.selectEventRx=selectEventRx,this.deleteEventRx=deleteEventRx,this.height=height,this.log=log},constructor.EventListProps=stjs.extend(constructor.EventListProps,null,[],function(constructor,prototype){prototype.timeline=null,prototype.filmstripDrawer=null,prototype.zoom=0,prototype.events=null,prototype.currentEvent=0,prototype.selectEventRx=null,prototype.deleteEventRx=null,prototype.height=0,prototype.log=null},{timeline:"Timeline",filmstripDrawer:"FilmStripDrawer",events:{name:"Array",arguments:["LogEvent"]},selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log"},{}),prototype.render=function(){return this.props.height>0?React.createElement(Infinite,new InfiniteProps(71,this.props.height,"vg_events"),this.props.events.map(stjs.bind(this,function(e,i,arr){return this.logEvent(e,this.props.currentEvent==i)}))):null},prototype.logEvent=function(event,current){var width=100*(EventListComponent.MIN_WIDTH+this.calculateWidth(event))/(1+EventListComponent.MIN_WIDTH),props=new EventComponent.EventProps(event,this.props.timeline,this.props.filmstripDrawer,width,current,this.props.selectEventRx,this.props.deleteEventRx,this.props.log);return React.createElement(EventComponent,UIUtils.toPlainObject(props))},prototype.calculateWidth=function(event){var durationSec=(event.endTv-event.startTv)/event.timescale,relativeDuration=durationSec/this.props.timeline.getDurationSec();return this.logScale.scale(relativeDuration)}},{logScale:"LogScale",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var CssWaveCollider=function(http,channelInfo,canvas,log){this.http=http,this.log=log,this.waveImages=new WaveImages(http,channelInfo),this.canvas=canvas,this.channel=channelInfo,this.getContext().translate(-.5,-.5),this.waveColor=CssWaveCollider.defaultWaveColor,CssWaveCollider._initLogLut(),this.selectionStartSample=-1,this.selectionEndSample=-1};CssWaveCollider=stjs.extend(CssWaveCollider,null,[],function(constructor,prototype){prototype.waveImages=null,prototype.canvas=null,prototype.channel=null,prototype.fades=!1,prototype._debug=!1,constructor.defaultWaveColor="#475164",prototype.waveColor=null,prototype.ruler=!0,prototype.rulerText=!0,prototype.rulerTextColor="rgba(200,200,200,0.5)",prototype.rulerLines=8,prototype.rulerTextOffset=10,prototype.amplify=1,prototype.preciseWaveImage=null,prototype.uiSpp=0,prototype.sampleRange=null,prototype._fadein=null,prototype._fadeout=null,prototype.selectionStartSample=0,prototype.selectionEndSample=0,prototype.http=null,prototype.log=null,prototype.doBezierIn=function(sampleNumber,y){var f=this._fadein,bezier=Bezier.fromPoints(this._fadein.bezierControlPoints),range=f.range,beforeRange=sampleNumber<range.start;if(beforeRange)return 0;if(range.contains(sampleNumber)){var offset=sampleNumber-range.start,k=bezier.getPointOnCurve(stjs.trunc(offset/range.duration())).y;return y*(1-k)}return y},prototype.doBezierOut=function(sampleNumber,y){var f=this._fadeout,bezier=Bezier.fromPoints(this._fadeout.bezierControlPoints),range=f.range,contains=range.contains(sampleNumber),afterRange=sampleNumber>range.end;if(afterRange)return 0;if(contains){var offset=sampleNumber-range.start,k=bezier.getPointOnCurve(stjs.trunc(offset/range.duration())).y;return y*(1-k)}return y},prototype.bezierFilter=function(sample,y){var result=y;return null!=this._fadein&&null!=this._fadein.range&&(result=this.doBezierIn(sample,result)),null!=this._fadeout&&null!=this._fadeout.range&&(result=this.doBezierOut(sample,result)),result},constructor._logLut=null,constructor._logLut16=null,constructor._initLogLut=function(){null==CssWaveCollider._logLut&&(CssWaveCollider._logLut=LogScale.intLut(128,6,null),CssWaveCollider._logLut16=LogScale.intLut(32768,6,null))},prototype.setChannel=function(channelInfo){this.waveImages=new WaveImages(this.http,channelInfo),this.channel=channelInfo},prototype.rulerSampleConvert=function(sample){return sample},prototype.getContext=function(){var width=this.canvas.clientWidth,height=this.canvas.clientHeight;return this.canvas.width==width&&this.canvas.height==height||(this.canvas.width=width,this.canvas.height=height),this.canvas.getContext("2d",null)},prototype.getDimensions=function(){return new Dimension(this.canvas.clientWidth,this.canvas.clientHeight)},prototype.setAmplification=function(amplify){this.amplify=amplify},prototype.clear=function(){var dimensions=this.getDimensions();if(0!=dimensions.width&&0!=dimensions.height){var wctx=this.getContext();wctx.shadowColor="transparent",wctx.clearRect(0,0,dimensions.width,dimensions.height),this.drawFades(wctx)}},prototype.drawWave=function(){this.log.debug("CssWaveCollider drawWave"),this._debug&&(this.ruler=!0,this.rulerText=!0,this.rulerTextOffset=20);var self=this,clientWidth=this.getDimensions().width;this.uiSpp=stjs.trunc(this.sampleRange.duration()/clientWidth);var draw=function(img){return self._drawWave(img,null)},drawPrecise=function(img){return self._drawPreciseWave(img,null)},wi=this.waveImages.getWaveImage(this.uiSpp,draw);if(null==wi){var reloadData=null==this.preciseWaveImage||this.preciseWaveImage.spp!=this.uiSpp||!this.preciseWaveImage.containsRange(this.sampleRange.start,this.sampleRange.end);reloadData?(this.log.debug("reloading wave data"),this.waveImages.onerror=function(){return self.clear()},wi=this.waveImages.getPreciseWaveImage(this.sampleRange,clientWidth,drawPrecise),this.preciseWaveImage=wi):(wi=this.preciseWaveImage,wi.isLoading||this.drawPrecise())}return!wi.isLoading},prototype.drawPrecise=function(){throw new RuntimeException("drawPrecise TODO")},prototype._drawWave=function(waveData,c){var dimensions=this.getDimensions();if(0!=dimensions.width&&0!=dimensions.height){var wctx=this.getContext(),zoom=this.uiSpp/waveData.spp,h=(parseInt(dimensions.height/2),dimensions.height+1),d=h/256*this.amplify,dataStartSample=stjs.trunc(this.sampleRange.start/waveData.spp);wctx.shadowColor="transparent",wctx.clearRect(0,0,dimensions.width,dimensions.height),wctx.strokeStyle="rgba(0,0,0,0.9)",wctx.lineWidth=.5,wctx.lineJoin="bevel",wctx.fillStyle=this.waveColor,wctx.beginPath();var x=0;for(wctx.moveTo(x,h),x=0;x<dimensions.width;x++){var startidx=Math.round(x*zoom+dataStartSample),endidx=Math.round((x+1)*zoom+dataStartSample),sampleIndex=this.sampleRange.start+Math.round(x*this.uiSpp),sampleValue=waveData.getMinMax8(stjs.trunc(startidx),stjs.trunc(endidx));sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(x,h-sampleValue*d)}wctx.lineTo(x,h),wctx.closePath(),wctx.fill(),wctx.stroke(),this.drawSelection(wctx,h),this.fades&&this.drawFades(wctx),this.ruler&&this.drawRuler(wctx)}},prototype.assertTrue=function(msg,assertion){assertion||this.log.error(msg)},prototype._drawPreciseWave=function(waveData,channelData){this.assertTrue("sample range not within data range",waveData.dataSampleRange._containsRange(this.sampleRange));var dimensions=this.getDimensions();if(0!=dimensions.width&&0!=dimensions.height){var wctx=this.getContext(),h=(parseInt(dimensions.height/2),this.canvas.clientHeight+1),d=h/32768*this.amplify*.75;wctx.shadowColor="transparent",wctx.clearRect(0,0,dimensions.width,dimensions.height),wctx.strokeStyle="rgba(0,0,0,0.9)",wctx.lineWidth=.5,wctx.lineJoin="bevel",wctx.fillStyle=this.waveColor,wctx.beginPath();var sampleOff=waveData.getSampleOffset(this.sampleRange.start),minmax=[0,0];if(wctx.moveTo(0,h),this.uiSpp>=1)for(var x=0;x<dimensions.width;x++){waveData.getMinMax16(x+sampleOff,minmax);var sampleIndex=this.sampleRange.start+Math.round(x*this.uiSpp),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]);sampleValue=CssWaveCollider._logLut16[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(x,h-sampleValue*d)}else for(var x=0;parseInt(stjs.trunc(x/waveData.spp))<dimensions.width;x++){waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))+sampleOff,minmax);var sampleIndex=this.sampleRange.start+Math.round(x),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]);0==sampleValue&&(waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))+1+sampleOff,minmax),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),0==sampleValue&&(waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))-1+sampleOff,minmax),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]))),sampleValue=CssWaveCollider._logLut16[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(parseInt(stjs.trunc(x/waveData.spp)),h-sampleValue*d)}wctx.lineTo(parseInt(dimensions.width),h),wctx.closePath(),wctx.fill(),wctx.stroke(),this.drawSelection(wctx,h),this.fades&&this.drawFades(wctx),this.ruler&&this.drawRuler(wctx)}},constructor.avg=function(min,max){return Math.max(Math.abs(min),Math.abs(max))},prototype.drawSelection=function(wctx,h){if(this.log.debug("drawSelection"),this.selectionStartSample!=-1&&this.selectionEndSample!=-1){wctx.beginPath(),wctx.fillStyle="rgba(0,0,0,0.3)";var startx=this.sampleToX(this.selectionStartSample),endx=this.sampleToX(this.selectionEndSample);wctx.fillRect(startx,0,endx-startx,h),wctx.closePath(),wctx.fill()}},prototype.drawFades=function(wctx){this.log.debug("drawFades"),null==wctx&&(wctx=this.getContext()),wctx.shadowColor="transparent";var h=this.canvas.clientHeight,w=this.canvas.clientWidth;if(null!=this._fadein&&null!=this._fadein.range){var startx=this.sampleToX(this._fadein.range.start),endx=this.sampleToX(this._fadein.range.end);wctx.beginPath(),wctx.strokeStyle="rgba(0,0,0,0)",wctx.fillStyle="rgba(0,0,0,0.7)",wctx.lineWidth=0,wctx.moveTo(0,0),wctx.lineTo(0,h),wctx.lineTo(startx,h),wctx.lineTo(startx,0),wctx.lineTo(0,0),wctx.closePath(),wctx.fill(),wctx.lineWidth=.5,wctx.beginPath(),wctx.strokeStyle="rgba(0,0,0,1)",this.drawBezierin(),wctx.stroke(),wctx.beginPath(),wctx.strokeStyle="rgba(255,255,255,0.5)",this.drawBezierin(),wctx.stroke()}if(null!=this._fadeout&&null!=this._fadeout.range){var startx=this.sampleToX(this._fadeout.range.start),endx=this.sampleToX(this._fadeout.range.end);wctx.beginPath(),wctx.strokeStyle="rgba(0,0,0,0)",
wctx.fillStyle="rgba(0,0,0,0.7)",wctx.moveTo(endx,0),wctx.lineTo(w,0),wctx.lineTo(w,h),wctx.lineTo(endx,h),wctx.closePath(),wctx.fill(),wctx.lineWidth=.5,wctx.beginPath(),wctx.strokeStyle="rgba(0,0,0,1)",this.drawBezierout(),wctx.stroke(),wctx.beginPath(),wctx.strokeStyle="rgba(255,255,255,0.5)",this.drawBezierout(),wctx.stroke()}},prototype.drawBezierout=function(){throw new RuntimeException("drawBezierout TODO")},prototype.drawBezierin=function(){throw new RuntimeException("drawBezierin TODO")},prototype.sampleToX=function(sample){return parseInt(stjs.trunc((sample-this.sampleRange.start)/this.uiSpp))},prototype.drawRuler=function(wctx){this.log.debug("drawRuler"),wctx.shadowColor="rgba(0,0,0,0.8)",wctx.shadowOffsetX=1,wctx.shadowOffsetY=1,wctx.shadowBlur=1;for(var dimensions=this.getDimensions(),fadeinStartx=0,fadeoutEndx=dimensions.width,rulerSpacingSamples=this.getRulerSpacing(),lines=stjs.trunc(this.sampleRange.duration()/rulerSpacingSamples),start=this.align(this.sampleRange.start),samples=this.sampleToPixel(),line=0;line<lines;line++){var pysch=line*rulerSpacingSamples,wantsmp=start+pysch,x=CssWaveCollider.linearSearch1(samples,wantsmp);x>fadeinStartx&&x<fadeoutEndx&&(this.rulerText&&(CssWaveCollider.setColor(wctx,this.rulerTextColor),wctx.fillText(""+this.rulerSampleConvert(wantsmp),x+3,this.rulerTextOffset,10)),CssWaveCollider.setColor(wctx,"rgba(0, 0, 0, 0.15)"),wctx.fillRect(x-1,0,1,dimensions.height),CssWaveCollider.setColor(wctx,"rgba(255, 255, 255, 0.15)"),wctx.fillRect(x,0,1,dimensions.height),CssWaveCollider.setColor(wctx,this.waveColor))}},prototype.align=function(start){return start},prototype.setWaveColor=function(color){null!=color?this.waveColor=color:this.waveColor=CssWaveCollider.defaultWaveColor},prototype.setSampleRange=function(range){this.sampleRange=range},prototype.sampleToPixel=function(){var dimensions=this.getDimensions(),samples=new Array;samples[dimensions.width-1]=0;for(var x=0;x<dimensions.width;x++)samples[x]=parseInt(this.uiSpp*x)+this.sampleRange.start;return samples},prototype.getRulerSpacing=function(){var dimensions=this.getDimensions(),spacingPix=dimensions.width/this.rulerLines,spacingSamples=parseInt(spacingPix*this.uiSpp);return CssWaveCollider.nearestPowerOfTwo(spacingSamples)},constructor.setColor=function(wctx,color){wctx.fillStyle=color},constructor.nearestPowerOfTwo=function(samples){return CssWaveCollider._powersOfTwo[Utils.binarySearch1(CssWaveCollider._powersOfTwo,samples)]},constructor._powersOfTwo=[2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824],constructor.linearSearch1=function(a,key){for(var idx=Utils.binarySearch1(a,key),i=idx;i>=0;i--)if(a[i]!=key)return i;return 0}},{waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var DebugInfoBox=function(player,container,parentView){VGPlugins.call(this,player),this.player=player,this.view=new DebugInfoBoxView(player,container,parentView,"vg_debug_info_box vg_invisible")};DebugInfoBox=stjs.extend(DebugInfoBox,VGPlugins,[],function(constructor,prototype){prototype.player=null,prototype.view=null},{player:"PlayerImpl",view:"DebugInfoBoxView",player:"PlayerImpl",view:"VGView"},{});var SubtitleEntryComponent=function(props){React.Component.call(this,props),this.state={isActive:!1},this.props.activeRowRx.subscribe(stjs.bind(this,function(_row){var sameRow=_row==this.props.row;sameRow&&!this.state.isActive?this.changeActiveState(!0):!sameRow&&this.state.isActive&&this.changeActiveState(!1)}))};SubtitleEntryComponent=stjs.extend(SubtitleEntryComponent,React.Component,[],function(constructor,prototype){constructor.ROW="row",constructor.CAPTION_TIMES="caption__times",constructor.CAPTION_NOTES="caption__notes",constructor.CAPTION_END="caption__end",constructor.CAPTION_START="caption__start",prototype.getStartMs=function(){return this.props.timeline.getMillisByTv(this.props.row.startTv)},prototype.getEndMs=function(){return this.props.timeline.getMillisByTv(this.props.row.endTv)},prototype.getStartFrame=function(){return this.props.timeline.getFrameByTv(this.props.row.startTv)},prototype.getEndFrame=function(){return this.props.timeline.getFrameByTv(this.props.row.endTv)},prototype.changeActiveState=function(isActive){var state=new SubtitleEntryState;state.isActive=isActive,this.setState(state)},prototype.render=function(){return this._generateTemplate()},prototype._generateTemplate=function(){var _durationMsec=stjs.trunc(1e3*this.props.timeline.getDurationSec()),_startClass=SubtitleEntryComponent.CAPTION_START+" "+ViewConsts.TIME_ARROW,_endClass=SubtitleEntryComponent.CAPTION_END;this.getStartMs()>_durationMsec&&(_startClass+=" "+ViewConsts.VG_CAPTION_HIGHLIGHT),this.getEndMs()>_durationMsec&&(_endClass+=" "+ViewConsts.VG_CAPTION_HIGHLIGHT);var _startMsecAttrs=ReactViewUtils.className(_startClass),_endMsecAttrs=ReactViewUtils.className(_endClass),start=React.DOM.span(_startMsecAttrs,Utils.hhmmssms(this.props.row.startMsec)),end=React.DOM.span(_endMsecAttrs,Utils.hhmmssms(this.props.row.endMsec)),times=React.DOM.div(ReactViewUtils.className(SubtitleEntryComponent.CAPTION_TIMES),start,end),rowProps=FluentMap.withClassName(this.props.className).id(SubtitleEntryComponent.ROW+this.props.row.startTv+this.props.row.endTv).ref(SubtitleEntryComponent.ROW).onClick(stjs.bind(this,"onRowClick"));this.state.isActive&&rowProps.addClass(ViewConsts.ACTIVE);var notes=React.DOM.div(ReactViewUtils.className(SubtitleEntryComponent.CAPTION_NOTES),this._getNotes());return this.props.viewType==ViewConsts.BLOCK&&this._getBlockView(rowProps),React.DOM.div(rowProps.build(),times,notes)},prototype._getBlockView=function(rowProps){var rowFrames=this.getEndFrame()-this.getStartFrame(),frameCount=this.props.timeline.getFrameCount(),width=0,left=1*this.getStartFrame()/frameCount*100;rowFrames>0&&(width=1*rowFrames/frameCount*100);var fsize=stjs.trunc(Math.max(10*this.props.zoomRow,width));rowProps.style(ViewConsts.WIDTH,width+"%").style(ViewConsts.FONT_SIZE,fsize+"%").style(ViewConsts.LEFT,left+"%")},prototype._getNotes=function(){var spans,_serchRegExp=new RegExp("("+this.props.searchValue+")","ig"),notes=this.props.row.notes,searchHits=this.props.searchValue.length>0&&_serchRegExp.test(notes);if(searchHits){var split=notes.split(_serchRegExp);return spans=split.map(function(note,i,a){var _noteAttr=null;return _serchRegExp.test(note)&&(_noteAttr=ReactViewUtils.className(ViewConsts.HIGHLIGHT_YELLOW)),React.DOM.span(_noteAttr,note)})}return[React.DOM.span(null,notes)]},prototype.onRowClick=function(e){this.props.inActiveItem&&this.props.selectedFrameRx.onNext(this.props.row.startTv)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterWordsComponent=function(props){React.Component.call(this,props),this.timeSubscription=props.timeupdate.throttle(1e3).subscribe(stjs.bind(this,function(ts){this.setState(this.wordsByFrameState(ts.frame))})),this.state={words:[],frame:0}};ContexterWordsComponent=stjs.extend(ContexterWordsComponent,React.Component,[],function(constructor,prototype){prototype.timeSubscription=null,prototype.wordsByFrameState=function(fn){return null!=this.props.data?{words:this.props.data.wordsByFrame[fn],frame:fn}:this.state},prototype.componentWillUnmount=function(){this.timeSubscription.dispose()},constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.data=null,prototype.timeupdate=null,prototype.minConfidence=0,prototype.word=null,prototype.render=!1},{data:"ContexterData",timeupdate:{name:"Rx.Observable",arguments:["TimeSample"]},word:"ContexterWord"},{}),prototype.render=function(){return this.props.render&&null!=this.state.words&&this.state.words.length>0?React.DOM.div(FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_OVERLAY_WORDS).id(ContexterConsts.VG_CONTEXTER_OVERLAY_WORDS).addClass(ViewConsts.VG_INFO).build(),this.renderWords(this.state.words)):null},prototype.renderWords=function(words){return words.filter(stjs.bind(this,function(_word,i,arr){return this.showWord(_word)})).map(stjs.bind(this,function(word,i,arr){var opacity=word.values[this.state.frame+""],attributes=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_OVERLAY_WORD);return null!=this.props.word&&word.name==this.props.word.name&&(attributes.style(ViewConsts.COLOR,ViewConsts.YELLOW_COLOR),opacity=1),attributes.style(ViewConsts.OPACITY,opacity),React.DOM.span(attributes.build(),word.name)}))},prototype.showWord=function(_word){return this.props.data.bestWords.indexOf(_word)!=-1}},{timeSubscription:"Rx.Disposable",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ShiftTimecodesView=function(props){React.Component.call(this,props),this.state={active:!1,timecode:Utils.hhmmssms(props.startMsec)},this.initialStart=props.startMsec,this.newStart=props.startMsec};ShiftTimecodesView=stjs.extend(ShiftTimecodesView,React.Component,[],function(constructor,prototype){constructor.CANCEL="Cancel",constructor.SHIFT_CANCEL="shift__cancel",constructor.SHIFT_FORM="shift_form",constructor.SHIFT_INPUT_REF="shiftInput",constructor.SHIFT="SHIFT",constructor.CAPTIONS_SHIFT="captions__shift",constructor.SHIFT_INIT="shift__init",constructor.SHIFT_APPLY="shift__apply",constructor.SHIFT_TO="shift__to",constructor.SHIFT_FROM="shift__from",constructor.SHIFT_CONTROLS="shift__controls",constructor.SHIFT_INPUT="shift__input",constructor.SHIFT_CAPTIONS="SHIFT CAPTIONS",prototype.initialStart=0,prototype.newStart=0,prototype.isChanged=!1,prototype.componentDidMount=function(element){var inputEl=this.refs[ShiftTimecodesView.SHIFT_INPUT_REF];new MaskedTimecodeInput(inputEl,"__:__:__.___")},prototype.render=function(){var classNames=ShiftTimecodesView.CAPTIONS_SHIFT;return this.state.active&&(classNames+=" "+ViewConsts.ACTIVE),React.DOM.div(ReactViewUtils.className(classNames),this._initShift(),this._controlsShift())},prototype._controlsShift=function(){var attributes=FluentMap.withClassName(ShiftTimecodesView.SHIFT_INPUT).ref(ShiftTimecodesView.SHIFT_INPUT_REF).value(this.state.timecode).onChange(stjs.bind(this,function(e){var target=e.target;this.newStart=Utils.HHmmSSmsecToTimestamp(target.value),isNaN(this.newStart)&&(this.newStart=0),this._newTimecodeState(this.newStart)})).build(),inputShift=React.DOM.input(attributes),from=React.DOM.span(ReactViewUtils.className(ShiftTimecodesView.SHIFT_FROM),Utils.hhmmssms(this.props.startMsec)),to=React.DOM.span(ReactViewUtils.className(ShiftTimecodesView.SHIFT_TO),Utils.hhmmssms(this.props.endMsec)),applyShift=React.DOM.input(FluentMap.withClassName(ShiftTimecodesView.SHIFT_APPLY).addClass(ViewConsts.VG_INPUT_SUBMIT).put("type",ViewConsts.SUBMIT).value(ShiftTimecodesView.SHIFT).build()),cancelShift=React.DOM.span(FluentMap.withClassName(ShiftTimecodesView.SHIFT_CANCEL).onClick(stjs.bind(this,function(e){return this._cancelShift()})).build(),ShiftTimecodesView.CANCEL),elements=[inputShift,React.DOM.span(null,"to"),from,React.DOM.span(ReactViewUtils.className(ViewConsts.TIME_ARROW)),to,applyShift],formProps=FluentMap.withClassName(ShiftTimecodesView.SHIFT_FORM).onSubmit(stjs.bind(this,function(e){e.preventDefault(),this.props.shiftCaptionsRx.onNext(this.newStart-this.props.startMsec)})),form=React.DOM.form(formProps.build(),elements);return React.DOM.div(ReactViewUtils.className(ShiftTimecodesView.SHIFT_CONTROLS),form,cancelShift)},prototype._newTimecodeState=function(newStart){var timecodesState=new ShiftTimecodesState;timecodesState.timecode=Utils.hhmmssms(newStart),this.setState(timecodesState)},prototype._cancelShift=function(){this._newTimecodeState(this.initialStart),this.isChanged||(this.props.shiftCaptionsRx.onNext(0==this.newStart?this.initialStart:this.initialStart-this.newStart),this.isChanged=!0)},prototype._initShift=function(){var _props=FluentMap.withClassName(ShiftTimecodesView.SHIFT_INIT).onClick(stjs.bind(this,function(e){return this._toggleActive()}));return this.state.active&&_props.addClass(ViewConsts.ACTIVE),React.DOM.span(_props.build(),ShiftTimecodesView.SHIFT_CAPTIONS)},prototype._toggleActive=function(){var timecodesState=new ShiftTimecodesState;timecodesState.active=!this.state.active,this.setState(timecodesState)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContainerComponent=function(props){React.Component.call(this,props),this.state=new ContainerState,this.state.isActive=!0};ContainerComponent=stjs.extend(ContainerComponent,React.Component,[],function(constructor,prototype){prototype.render=function(){var cssClass=ViewConsts.COMPONENT_CONTAINER;this.props.isActive&&(cssClass+=" "+ViewConsts.ACTIVE);var fmap=FluentMap.withClassName(cssClass);return React.DOM.div(fmap.build(),this.props.children)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterTableComponent=function(props){React.Component.call(this,props),this.state={word:null},this.rainbow=new Rainbow,this.rainbow.setSpectrum(ViewConsts.PANEL_COLOR,"white","grey","red")};ContexterTableComponent=stjs.extend(ContexterTableComponent,React.Component,[],function(constructor,prototype){prototype.rainbow=null,constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.data=null,prototype.duration=0,prototype.sec=0,prototype.track=null,prototype.rowClick=null,prototype.videoFramesCount=0,prototype.wordSelect=null,prototype.containerWidth=0},{data:"ContexterData",track:"ReactElement",rowClick:{name:"Callback1",arguments:["DOMEvent"]},wordSelect:{name:"Callback1",arguments:["ContexterWord"]}},{}),prototype.render=function(){var list,container=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_CONTAINER).style(ViewConsts.POSITION,ViewConsts.RELATIVE).build();list=null!=this.props.data?React.DOM.ul({className:ContexterConsts.VG_CONTEXTER_WORD_LIST},this.props.track,this.props.data.bestWords.map(stjs.bind(this,function(e,i,arr){return this.wordRow(e)}))):React.DOM.ul({className:ContexterConsts.VG_CONTEXTER_WORD_LIST});var wrapper=React.DOM.div({className:ContexterConsts.VG_CONTEXTER_TABLE_WRAPPER},list);return React.DOM.div(container,wrapper)},prototype.wordRow=function(word){var props={};props.word=word,props.totalFrames=this.props.data.wordsByFrame.length,props.rainbow=this.rainbow,props.videoFramesCount=this.props.videoFramesCount,props.containerWidth=this.props.containerWidth;var wordFilmStrip=React.createElement(ContexterWordFilmStrip,props),info=this.renderInfo(word),data=React.DOM.div(FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_WORD_DATA).build(),wordFilmStrip),className=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_WORD);return word==this.state.word&&className.addClass(ViewConsts.ACTIVE),React.DOM.li(className.onClick(stjs.bind(this,function(e){return this.setActiveWord(e,word)})).build(),info,data)},prototype.setActiveWord=function(e,_word){this.setState({word:_word}),this.props.rowClick(e),this.props.wordSelect(_word)},prototype.renderInfo=function(word){var info=React.DOM.div(FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_WORD_INFO).build(),React.DOM.span({className:ContexterConsts.VG_CONTEXTER_WORD_CONF_COUNT},word.confCount),React.DOM.span({className:ContexterConsts.VG_CONTEXTER_WORD_NAME},word.name));return info}},{rainbow:"Rainbow",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var PluginSearchInput=function(props){React.Component.call(this,props)};PluginSearchInput=stjs.extend(PluginSearchInput,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.handleSubmit=null,prototype.onChange=null,prototype.searchValue=null},{handleSubmit:{name:"Callback1",arguments:["DOMEvent"]},onChange:{name:"Callback1",arguments:["DOMEvent"]},searchValue:"Object"},{}),prototype.render=function(){var _searchIcon=React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ICON_SEARCH)),_searchInputAttributes=FluentMap.withClassName(ViewConsts.VG_INPUT_SEARCH).onChange(this.props.onChange).value(this.props.searchValue).build(),_searchFormAttributes=FluentMap.withClassName(ViewConsts.VG_FORM_SEARCH).addClass(ViewConsts.VG_PLUGIN_SEARCH).put(ReactViewUtils.ON_SUBMIT,this.props.handleSubmit).build(),_searchInput=React.DOM.input(_searchInputAttributes),_searchForm=React.DOM.form(_searchFormAttributes,_searchIcon,_searchInput);return _searchForm}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var RangeInputComponent=function(props){React.Component.call(this,props)};RangeInputComponent=stjs.extend(RangeInputComponent,React.Component,[],function(constructor,prototype){prototype.render=function(){var step=this.props.max/this.props.points,rangeProps=FluentMap.withClassName(ViewConsts.VG_INPUT_RANGE).type(ViewConsts.RANGE).value(this.props.value).onChange(this.props.onChange).put("min",this.props.min).put("max",this.props.max).put("step",step),inputRange=React.DOM.input(rangeProps.build());return React.DOM.div(ReactViewUtils.className(ViewConsts.VG_RANGE),this._rangePoints(this.props.points),inputRange)},prototype._rangePoints=function(points){for(var spans=[],p=100/points,i=0;i<=points;i++){var span=React.DOM.span({className:"range__point--"+p*i,key:i});spans.push(span)}return spans}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var TimeTrackComponent=function(props){React.Component.call(this,props),this.state={sec:0,frame:0}};TimeTrackComponent=stjs.extend(TimeTrackComponent,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.id=null,prototype.onClick=null,prototype.cssClass=null,prototype.color=null,prototype.timeupdate=null,prototype.duration=0,prototype.framecount=0},{onClick:{name:"Callback1",arguments:["DOMEvent"]},timeupdate:{name:"Rx.Observable",arguments:["TimeSample"]}},{}),prototype.timeSubscription=null,prototype.componentDidMount=function(element){this.timeSubscription=this.props.timeupdate.subscribe(stjs.bind(this,function(tsample){this.updateState(tsample)}))},prototype.updateState=function(tsample){var partialState={sec:tsample.sec,frame:tsample.frame};this.setState(partialState)},prototype.componentWillUnmount=function(){this.timeSubscription.dispose()},prototype.render=function(){var track=FluentMap.withClassName(this.props.cssClass).style(ViewConsts.POSITION,ViewConsts.ABSOLUTE).style(ViewConsts.Z_INDEX,1).style("top",0).style(ViewConsts.WIDTH,"1px").style(ViewConsts.HEIGHT,"100%").style(ViewConsts.LEFT,this.getLeftPosition()).style(ViewConsts.BACKGROUND_COLOR,this.props.color).build();return React.DOM.div(track)},prototype.getLeftPosition=function(){var left=100*this.state.frame/this.props.framecount;return left+"%"}},{timeSubscription:"Rx.Disposable",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ModalComponent=function(props){React.Component.call(this,props),this.state={open:props.open}};ModalComponent=stjs.extend(ModalComponent,React.Component,[],function(constructor,prototype){constructor.MODAL="vg_modal",constructor.MODAL_CONTENT="vg_modal-content",constructor.MODAL_FOOTER="vg_modal-footer",constructor.MODAL_BODY="vg_modal-body",constructor.MODAL_HEADER="vg_modal-header",constructor.MODAL_DIALOG="vg_modal-dialog",constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.body=null,prototype.footer=null,prototype.header=null,prototype.open=!1,prototype.contentClass=null,prototype.modalClass=null,prototype.id=null},{body:{name:"ReactElement",arguments:["Object"]},footer:{name:"ReactElement",arguments:["Object"]},header:{name:"ReactElement",arguments:["Object"]}},{}),prototype.componentWillReceiveProps=function(nextProps){var _state={open:nextProps.open};this.setState(_state)},prototype.render=function(){var dialog=React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_DIALOG),this.renderContent()),modalP=FluentMap.withClassName(ModalComponent.MODAL).addClass(ViewConsts.FADE).addClass(this.props.modalClass);return modalP.style(ViewConsts.DISPLAY,1==this.state.open?ViewConsts.BLOCK:ViewConsts.NONE),modalP.id(this.props.id),React.DOM.div(modalP.build(),dialog)},prototype.renderContent=function(){var footer=null;null!=this.props.footer&&(footer=React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_FOOTER),this.props.footer));var _props=FluentMap.withClassName(ModalComponent.MODAL_CONTENT).addClass(this.props.contentClass);return React.DOM.div(_props.build(),this.renderHeader(),this.renderBody(),footer)},prototype.renderBody=function(){return React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_BODY),this.props.body)},prototype.renderHeader=function(){var btnProps=FluentMap.withClassName(ViewConsts.CLOSE).type(ViewConsts.BUTTON).onClick(stjs.bind(this,"closeModal")),button=React.DOM.button(btnProps.build(),React.DOM.span(ReactViewUtils.className(ViewConsts.CLOSE_ICON)));return React.DOM.div(ReactViewUtils.className(ModalComponent.MODAL_HEADER),this.props.header,button)},prototype.closeModal=function(e){var _state={open:!1};this.setState(_state)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VGButton=function(props){React.Component.call(this,props)};VGButton=stjs.extend(VGButton,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.label=null,prototype.className=null,prototype.onClick=null},{label:"Object",onClick:{name:"Callback1",arguments:["DOMEvent"]}},{}),prototype.render=function(){var btnProps=FluentMap.withClassName([ViewConsts.VG_BTN,this.props.className].join(" ")).onClick(this.props.onClick);return React.DOM.button(btnProps.build(),this.props.label)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SuggestInputView=function(inputEl,hintsView,log){InputView.call(this,inputEl,log),this.hintsView=hintsView,this.itemSelectedRx=new Rx.Subject,this.replaceSelectedRx=this.itemSelectedRx.filter(stjs.bind(this,function(tag){return this.el.classList.contains("vg_replace-input")})),this.emptySelectRx=this.itemSelectedRx.filter(function(tag){return null==tag}),this.getFocusRx().subscribe(function(eventTagsInput){eventTagsInput.parentElement.classList.add("active"),hintsView.placeTagsHint(eventTagsInput)}),this.getBlurRx().subscribe(stjs.bind(this,function(eventTagsInput){log.debug("onBlurRx",eventTagsInput),eventTagsInput.parentElement.classList.remove("active"),this.blurTagInput(hintsView,eventTagsInput)})),this.getBlurRx().filter(function(eventTagsInput){return eventTagsInput.classList.contains("vg_replace-input")}).subscribe(function(eventTagsInput){log.debug("onBlurRx vg_replace-input",eventTagsInput),eventTagsInput.classList.remove("vg_replace-input")}),this.replaceKeyDown.subscribe(stjs.bind(this,function(e){e.keyCode==HotkeyManager.getKeyCode("backspace")&&(e.preventDefault(),e.target.classList.remove("vg_replace-input"),this.itemSelectedRx.onNext(null))})),this.itemSelectedFromHintRx=this.onKeyUpRx.map(stjs.bind(this,function(e){if(e.keyCode==HotkeyManager.getKeyCode("down")){log.debug("down"),e.preventDefault();var itemId=hintsView.selectNextItem()}if(e.keyCode==HotkeyManager.getKeyCode("up")){log.debug("up"),e.preventDefault();var itemId=hintsView.selectPrevItem()}if(e.keyCode==HotkeyManager.getKeyCode("enter")){log.debug("enter"),e.preventDefault();var itemId=hintsView.getSelectedItemId();null!=itemId?(this.itemSelectedRx.onNext(itemId),this.clear()):log.debug("New tag to be created!")}return e.keyCode==HotkeyManager.getKeyCode("esc")&&this.el.blur(),e.target.value}))};SuggestInputView=stjs.extend(SuggestInputView,InputView,[],function(constructor,prototype){constructor.selector=".app-EditFieldsView",prototype.itemSelectedRx=null,prototype.replaceSelectedRx=null,prototype.emptySelectRx=null,prototype.itemSelectedFromHintRx=null,prototype.hintsView=null,prototype.getElement=function(){return this.el},prototype.blurTagInput=function(hintsView,eventTagsInput){eventTagsInput.value="",hintsView.close()},prototype.clear=function(){this.el.value="",this.el.focus(),this.hintsView.close()},prototype.showAsActive=function(){this.el.classList.add("vg_replace-input")}},{itemSelectedRx:{name:"Rx.Subject",arguments:[null]},replaceSelectedRx:{name:"Rx.Observable",arguments:[null]},emptySelectRx:{name:"Rx.Observable",arguments:[null]},itemSelectedFromHintRx:{name:"Rx.Observable",arguments:[null]},hintsView:"HintsView",onInputRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onKeyDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onKeyUpRx:{name:"Rx.Observable",arguments:["DOMEvent"]},replaceKeyDown:{name:"Rx.Observable",arguments:["DOMEvent"]},onUserTypingRx:{name:"Rx.Observable",arguments:[null]},inputValueEnteredRx:{name:"Rx.Subject",arguments:[null]},el:"Input",log:"Log"},{});var TrackManagerView=function(el,log){this.el=el,this.log=log;var comment=window.document.createComment(Utils.constructorName(this));this.el.appendChild(comment),this.trackExistsErrorEl=this.el.querySelector(TrackManagerView.selectorTrackExists),this.incorrectTrackErrorEl=this.el.querySelector(TrackManagerView.selectorEmptyTrack),this.trackTable=this.el.querySelector(".rrtheme-table__body"),this.trackRowViewsByTrackId={},this.newTrackForm=this.el.querySelector(".rrtheme-modal__form"),this.newTrackFormInputView=new InputView(this.newTrackForm.querySelector(TrackManagerView.selectorNewTrackNameInput),log);var saveBtnEl=this.el.querySelector(TrackManagerView.selectorSaveButton),cancelBtnEl=this.el.querySelector(TrackManagerView.selectorCancelButton);this.saveBtnClickRx=Rx.Observable.fromEvent(saveBtnEl,"click"),this.cancelBtnClickRx=Rx.Observable.fromEvent(cancelBtnEl,"click"),this.onTrackCommitRx=new Rx.Subject,this.onTrackRevertRx=new Rx.Subject,this.onTrackFormSubmitRx=new Rx.Subject,this.addEventsRx()};TrackManagerView=stjs.extend(TrackManagerView,null,[],function(constructor,prototype){constructor.selector=".app-TrackManagerView",constructor.selectorSaveButton=".view-saveBtn",constructor.selectorCancelButton=".view-cancelBtn",constructor.selectorTrackExists=".view-trackExistError",constructor.selectorEmptyTrack=".view-emptyTrackError",prototype.trackRowViewsByTrackId=null,prototype.trackTable=null,prototype.el=null,prototype.log=null,prototype.trackExistsErrorEl=null,prototype.incorrectTrackErrorEl=null,prototype.newTrackFormInputView=null,prototype.newTrackForm=null,prototype.saveBtnClickRx=null,prototype.cancelBtnClickRx=null,prototype.onTrackCommitRx=null,prototype.onTrackRevertRx=null,prototype.onTrackFormSubmitRx=null,constructor.selectorNewTrackNameInput=".view-newTrackName",prototype.addEventsRx=function(){this.cancelBtnClickRx.subscribe(stjs.bind(this,function(e){for(var k in this.trackRowViewsByTrackId){var mtv=this.trackRowViewsByTrackId[k];if(0==mtv.isCommited){var newState=mtv.trackToCommit.state;newState.equals(TrackState.DELETED)?mtv.show():newState.equals(TrackState.NEW)?this.deleteRow(mtv):this.onTrackRevertRx.onNext(mtv.trackToCommit.id)}}this.close(),this.log.debug("cancel")})),this.saveBtnClickRx.subscribe(stjs.bind(this,function(e){this.close();for(var k in this.trackRowViewsByTrackId){var mtv=this.trackRowViewsByTrackId[k];this.log.debug(mtv.isCommited,mtv.trackToCommit.state.id,"save button:",mtv.trackToCommit),0==mtv.isCommited&&(mtv.trackToCommit.state.equals(TrackState.NEW)&&this.deleteRow(mtv),mtv.trackToCommit.state.equals(TrackState.DELETED)&&this.deleteRow(mtv),this.onTrackCommitRx.onNext(mtv.trackToCommit))}this.log.debug("save")}));var table=this.el.querySelector(".rrtheme-modal__table");this.el.querySelector(".rrtheme-modal__footer"),Rx.Observable.fromEvent(table,"click");this.addFormRx(this.newTrackForm),this.addCloseRx()},prototype.deleteRow=function(mtv){mtv.getElement().parentElement.removeChild(mtv.getElement()),delete this.trackRowViewsByTrackId[mtv.trackId]},prototype.addFormRx=function(form){Rx.Observable.fromEvent(form,"submit").subscribe(stjs.bind(this,function(e){e.preventDefault(),this.onTrackFormSubmitRx.onNext(form)}))},prototype.show=function(el){el.classList.add("active")},prototype.hide=function(el){el.classList.remove("active")},prototype.addCloseRx=function(){var closeBtn=this.el.querySelector(".rrtheme-modal__close"),closeRx=Rx.Observable.fromEvent(closeBtn,"click");closeRx.subscribe(stjs.bind(this,function(e){this.close()}))},prototype.showTrackExistError=function(){this.trackExistsErrorEl.style.display="block"},prototype.hideTrackExistError=function(){this.trackExistsErrorEl.style.display="none"},prototype.open=function(){this.hideIncorrectTrackNameError(),this.hideTrackExistError(),this.show(this.el)},prototype.close=function(){this.hide(this.el)},prototype.createRowView=function(track){var trView=this.trackRowViewsByTrackId[this.getTrackId(track)];if(null!=trView)throw new RuntimeException("trView != null");return trView=new TrackRowView(track),trView.trackId=this.getTrackId(track),trView.isCommited=!1,this.trackRowViewsByTrackId[trView.trackId]=trView,this.trackTable.appendChild(trView.getElement()),trView},prototype.updateRow=function(track){var trView=this.trackRowViewsByTrackId[track.id];if(null==trView)throw new RuntimeException("trView == null");trView.render(track),trView.show()},prototype.containsTrack=function(track){return null!=this.trackRowViewsByTrackId[this.getTrackId(track)]},prototype.showIncorrectTrackNameError=function(){this.incorrectTrackErrorEl.style.display="block"},prototype.hideIncorrectTrackNameError=function(){this.incorrectTrackErrorEl.style.display="none"},prototype.getTrackId=function(track){return Utils.defaultString(track.id,track.localId)},prototype.commit=function(track){var trView=this.trackRowViewsByTrackId[this.getTrackId(track)];if(null==trView)throw new RuntimeException("trView == null");trView.isCommited=!0,this.trackRowViewsByTrackId[trView.trackId]=trView;
}},{trackRowViewsByTrackId:{name:"Map",arguments:[null,"TrackRowView"]},trackTable:"Element",el:"Element",log:"Log",trackExistsErrorEl:"Element",incorrectTrackErrorEl:"Element",newTrackFormInputView:"InputView",newTrackForm:"Form",saveBtnClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},cancelBtnClickRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onTrackCommitRx:{name:"Rx.Subject",arguments:["Track"]},onTrackRevertRx:{name:"Rx.Subject",arguments:[null]},onTrackFormSubmitRx:{name:"Rx.Subject",arguments:["Form"]}},{});var FrameSelections=function(player){VGPlugins.call(this,player);var selections=new ObservableArray;this.selectionsChangeRx=selections,this.add=stjs.bind(this,function(startFrame,endFrame){var timeline=player.getTimeline();startFrame=timeline.boundsFn(startFrame),endFrame=timeline.boundsFn(endFrame);var startTv=timeline.getTvByFrame(startFrame),startSec=timeline.getSecByTv(startTv),endTv=timeline.getTvByFrame(endFrame),endSec=timeline.getSecByTv(endTv);selections.push(this.selection(startFrame,endFrame,startSec,endSec,startTv,endTv,player.getSeekableDurationSec()))}),this.remove=function(startFrame,endFrame){var selection=selections.findIndex(function(item){return item.startFrame==startFrame&&item.endFrame==endFrame});selections.remove(selection)},player.addSelection=this.add,player.removeSelection=this.remove,player.getView().pluginsPanelRx.subscribe(stjs.bind(this,function(panelView){({parentView:this.player.getView(),model:this,container:panelView.overlay}),new FrameSelectionsView(this,panelView.overlay,this.player.getView(),null)}))};FrameSelections=stjs.extend(FrameSelections,VGPlugins,[],function(constructor,prototype){prototype.selectionsChangeRx=null,prototype.add=null,prototype.remove=null,constructor.Selection=function(){},constructor.Selection=stjs.extend(constructor.Selection,null,[],function(constructor,prototype){prototype.startFrame=0,prototype.endFrame=0,prototype.start=0,prototype.end=0,prototype.startTv=0,prototype.endTv=0,prototype.duration=0,prototype.el=null},{el:"Element"},{}),prototype.selection=function(startFrame,endFrame,startSec,endSec,startTv,endTv,durationSec){var s=new FrameSelections.Selection;return s.startFrame=startFrame,s.endFrame=endFrame,s.start=startSec,s.end=endSec,s.startTv=startTv,s.endTv=endTv,s.duration=durationSec,s}},{selectionsChangeRx:{name:"ObservableArray",arguments:["FrameSelections.Selection"]},add:{name:"Callback2",arguments:[null,null]},remove:{name:"Callback2",arguments:[null,null]},player:"PlayerImpl",view:"VGView"},{});var CSSStyleSheet=function(){};CSSStyleSheet=stjs.extend(CSSStyleSheet,null,[],function(constructor,prototype){prototype.stylesheet=null,prototype.id=null,prototype.setId=function(id){return this.id=id,this},prototype.addRule=function(cssRule){this.createStyleSheet(),this.addRuleWithPath([],cssRule,!1)},prototype.addRuleWithPath=function(parentPath,cssRule,isSubRule){var path=parentPath.slice(0);path.push(cssRule);var rules="";for(var prop in cssRule)if(!MyCSSRule.RESERVED_PROPS[prop]){var value=cssRule[prop];if(null!=value&&"function"!=typeof value)if(stjs.isInstanceOf(value.constructor,MyCSSRule))this.addRuleWithPath(path,value,!1);else if(prop.endsWith("Style")&&(prop=prop.replace("Style","")),"string"==typeof value&&(rules+="\n"+this.dashed(prop)+":"+value+";"),Array.isArray(value))for(var ar=value,i=0;i<ar.length;i++)rules+="\n"+this.dashed(prop)+":"+ar[i]+";"}""!=rules&&this.toDom(this.selector(path),rules);for(var r in cssRule.subrules)this.addRuleWithPath(path,cssRule.subrules[r],!0)},prototype.selector=function(path){for(var selector="",i=0;i<path.length;++i){var rule=path[i];if(null==rule.subruleStatus){for(var ruleSelector=rule.selector,j=i+1;j<path.length;++j){var relatedRule=path[j];null!=relatedRule.subruleStatus&&relatedRule.subruleStatus.rule==rule&&(ruleSelector+=relatedRule.selector)}selector+=" "+ruleSelector}}return selector},prototype.toDom=function(selector,rules){null!=this.stylesheet.insertRule?this.stylesheet.insertRule(selector+"{"+rules+"}",0):this.stylesheet.addRule(selector,rules,0)},prototype.dashed=function(prop){var split=prop.split(""),map=split.map(function(s,aLong,strings){return s.matches("[_A-Z]")?"-"+s.toLowerCase():s});return map.join("")},prototype.baseRules=null,prototype.toSass=function(parentSelector,cssRule,isSubRule){null==this.baseRules&&(this.baseRules={});var selector=parentSelector+(isSubRule?"":" ")+cssRule.selector,ownRules="",childRules="";for(var prop in cssRule)if(!MyCSSRule.RESERVED_PROPS[prop]){var value=cssRule[prop];null!=value&&"function"!=typeof value&&(stjs.isInstanceOf(value.constructor,MyCSSRule)?childRules+=this.toSass(selector,value,!1):ownRules+=this.dashed(prop)+":"+value+";")}for(var r in cssRule.subrules)childRules+=this.toSass(selector,cssRule.subrules[r],!0);if(""!=ownRules){var prevRules=this.baseRules[cssRule.selector];null==prevRules?this.baseRules[cssRule.selector]=ownRules:ownRules==prevRules&&(ownRules="")}return""==childRules&&""==ownRules?"":(isSubRule?"&":"")+cssRule.selector+" {"+ownRules+" "+childRules+"}"},prototype.createStyleSheet=function(){if(null==this.stylesheet){var stylesheetElement=window.document.createElement("style");null!=this.id&&(stylesheetElement.id=this.id),stylesheetElement.appendChild(window.document.createTextNode("")),window.document.getElementsByTagName("head")[0].appendChild(stylesheetElement),this.stylesheet=stylesheetElement.sheet}}},{stylesheet:"StyleSheet",baseRules:{name:"Map",arguments:[null,null]}},{});var FCPTests=function(){};FCPTests=stjs.extend(FCPTests,null,[],function(constructor,prototype){constructor.testWrite=function(){var uuid="75685E87-806A-4E9F-A787-C6E8DB99352E",fcp=new FCP;fcp.version=5,fcp.sequence=new FCP.Sequence,fcp.sequence.id=uuid,fcp.sequence.uuid=uuid,fcp.sequence.name="Clips",fcp.sequence.duration=986,fcp.sequence.rate=FCP.rate(25),fcp.sequence.timecode=new FCP.Timecode,fcp.sequence.timecode.rate=FCP.rate(25),fcp.sequence.timecode.frame=0,fcp.sequence.timecode.source="source",fcp.sequence.timecode.displayformat="NDF",fcp.sequence.media=new FCP.Media,fcp.sequence.media.video=new FCP.MediaElement,fcp.sequence.media.video.track=new FCP.Track,fcp.sequence.media.video.format=new FCP.MediaFormat,fcp.sequence.media.video.format.samplecharacteristics=FCP.vsample(1280,960,25);var cis=new Array;fcp.sequence.media.video.track.clipitem=cis,fcp.sequence.media.audio=new FCP.MediaElement,fcp.sequence.media.audio.track=new FCP.Track;var acis=new Array;fcp.sequence.media.audio.track.clipitem=acis;var comment=FCP.comment("gagaga",null,null,null,null,null),sc=FCP.sc("video-"+uuid+"-1","GOPR4638.MP4",0,51,0,51,2340,25,1280,960,"video",comment);cis.push(FCP.clip(sc)),acis.push(FCP.aclip(sc));var sc1=FCP.sc("video-"+uuid+"-2","GOPR4642.MP4",283,956,51,724,2685,25,1280,960,"video",comment);cis.push(FCP.clip(sc1)),acis.push(FCP.aclip(sc1));var sc2=FCP.sc("video-"+uuid+"-3","GOPR4640.MP4",578,840,724,986,2547,25,1280,960,"video",comment);cis.push(FCP.clip(sc2)),acis.push(FCP.aclip(sc2)),console.log(fcp);var created=FCPXml.createXml(fcp);window.DOC=created,console.log("created",created)},constructor.mymain=function(){console.log("hello");var parser=new DOMParser,log=new Log(LogLevel.DEBUG);new Http(log).get("fcp.xml").subscribe(function(str){var fcpExample=parser.parseFromString(str,"text/xml");console.log("example",fcpExample)},stjs.bind(console,"error")),FCPTests.testWrite()},constructor.mymain_=function(){console.log("hello");var xml=window.document.createElement("xml"),node=window.document.createElement("node");xml.appendChild(node);var a=[1,2,3],elList=[];elList.push(window.document.createElement("div"),window.document.createElement("div"),window.document.createElement("div"),window.document.createElement("div"));for(var i=0;i<a.length;i++){a[i]}xml.addEventListener("click",function(e){xml.textContent="innerText!",console.log(e,"click!")})}},{},{});var RAMVideologAsyncStorage=function(log){VideologAsyncStorage.call(this,log),this.tracksById={},this.eventsById={},this.trackVersions={}};RAMVideologAsyncStorage=stjs.extend(RAMVideologAsyncStorage,VideologAsyncStorage,[],function(constructor,prototype){prototype.tracksById=null,prototype.eventsById=null,prototype.trackVersions=null,prototype.trackEvents=function(trackId,onLoad,onError){onLoad(Utils.mapValues(this.eventsById).filter(function(e,i,arr){return trackId==e.getTrackId()}))},prototype.tracksOfProxy=function(proxyId,onLoad){onLoad(Utils.mapValues(this.tracksById).filter(function(t,i,arr){return proxyId==t.mediaId}))},prototype._trackById=function(trackId,onLoad,onError){onLoad(this.tracksById[trackId])},prototype._saveTrack=function(track,onLoad,onError){null==track.id&&(track.id=Utils.newUUIDString(),track.version=1,track.lastModified=Utils.currentTimeMillis(),track.created=Utils.currentTimeMillis(),track.state=TrackState.CREATED,this.trackVersions[track.id]=track.version),track.version=track.version+1;var lastVersion=this.trackVersions[track.id];lastVersion+1!=track.version?onError("outdated track version"+track.id):(this.tracksById[track.id]=track,this.trackVersions[track.id]=track.version,onLoad(track))},prototype._eventById=function(eventId,onLoad,onError){onLoad(this.eventsById[eventId])},prototype._saveEvent=function(logEvent,onDone,onError){null==logEvent.id&&(logEvent.id=Utils.newUUIDString()),this.eventsById[logEvent.id]=logEvent,onDone(logEvent)},prototype._deleteEvent=function(logEventId,onDeleted){var le=this.eventsById[logEventId];delete this.eventsById[logEventId],this.getEventDeletedRx().onNext(le)},prototype._deleteTrack=function(track,onDeleted){this.log.debug("track deleted",track),delete this.tracksById[track.id],delete this.trackVersions[track.id],onDeleted(track)},prototype._clearTrack=function(track,onDeleted){this.log.debug("track cleared",track),this.trackEvents(track.id,stjs.bind(this,function(events){return events.forEach(stjs.bind(this,function(logEvent){delete this.eventsById[logEvent.id]}))}),stjs.bind(this,function(e){return this.log.error("Error while sending request",e)}))}},{tracksById:{name:"Map",arguments:[null,"Track"]},eventsById:{name:"Map",arguments:[null,"LogEvent"]},trackVersions:{name:"Map",arguments:[null,null]},trackChangedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},trackDeletedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},eventChangedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},eventDeletedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},displayNamesById:{name:"Map",arguments:[null,null]},log:"Log",defaultTrackNames:{name:"Array",arguments:[null]}},{});var StepsControl=function(player){VGPlugins.call(this,player),this.view=new StepsControlView(player,player.getView().controlsPanelView.getControlsContainer(),player.getView(),null)};StepsControl=stjs.extend(StepsControl,VGPlugins,[VGControl],function(constructor,prototype){prototype.getControlEl=function(controlPanel){return this.view.el}},{player:"PlayerImpl",view:"VGView"},{});var SafeAreaDropDownRRControl=function(safeAreView,log){CloseableView.call(this),this.el=window.document.createElement("div"),this.dropDownElementId="vg_safe-areas";var menuEl=VGTemplates.elFromHTML(VGTemplates.addonControl(this.dropDownElementId,"vg_icon-map"),this.el.ownerDocument);menuEl.classList.remove("vg_ddown"),menuEl.classList.add("vg_ddown_hover"),this.el.appendChild(menuEl);var dropdownContainer=this.el.querySelector("#"+this.dropDownElementId),items=[new ColorBulletDropDownItem("4-3","4:3","grey"),new ColorBulletDropDownItem("caption","Caption","grey"),new ColorBulletDropDownItem("action","Action","grey"),new RenderedDropDownItem("separator","",'<div class="vg_ddown_hover__title vg_default" style="width: 100%"></div>',log),new ColorBulletDropDownItem("16-9","16:9","white")];this.dropDown=new DropDownView(dropdownContainer,this,"vg_ddown_hover","",items),SafeAreaDropDownRRControl.initDropDownEvents(this.dropDown,safeAreView)};SafeAreaDropDownRRControl=stjs.extend(SafeAreaDropDownRRControl,CloseableView,[VGControl],function(constructor,prototype){prototype.el=null,prototype.dropDownElementId=null,prototype.dropDown=null,constructor.initDropDownEvents=function(safeAreaDDown,safeAreaView){safeAreaDDown.itemSelectedRx.subscribe(function(detail){null!=detail&&("16-9".equals(detail.id)?(safeAreaView.setAspectRatio(detail.id),safeAreaDDown.updateItem("16-9",new ColorBulletDropDownItem("16-9","16:9","white")),safeAreaDDown.updateItem("4-3",new ColorBulletDropDownItem("4-3","4:3","grey"))):"4-3".equals(detail.id)?(safeAreaView.setAspectRatio(detail.id),safeAreaDDown.updateItem("16-9",new ColorBulletDropDownItem("16-9","16:9","grey")),safeAreaDDown.updateItem("4-3",new ColorBulletDropDownItem("4-3","4:3","white"))):"action".equals(detail.id)?(safeAreaView.toggleActionSafe(),safeAreaDDown.updateItem(detail.id,new ColorBulletDropDownItem("action","Action",safeAreaView.isActionVisible()?"green":"grey"))):"caption".equals(detail.id)&&(safeAreaView.toggleCaptionSafe(),safeAreaDDown.updateItem(detail.id,new ColorBulletDropDownItem("caption","Caption",safeAreaView.isCaptionVisible()?"red":"grey"))))})},prototype.getControlEl=function(controlPanel){return this.el}},{el:"Element",dropDown:"DropDownView",children:{name:"Array",arguments:["CloseableView"]}},{});var VideoControlView=function(player,container,parentView,className){VGThemeView.call(this,container,parentView,className,VGThemeView.magicContext("vg_icon-video","VIDEO","vg_videolist")),this.player=player,this.tracksInfo.insertAdjacentHTML("afterend",'<div class="vg_hdButton vg_primary-bg vg_panel active"></div>'),this.hdButton=this.el.querySelector(".vg_hdButton");var totalCuts=player.cutList.length;this.tracksInfo.innerHTML=UIUtils.plural("track",totalCuts);var trackEl=VGTemplates.elFromHTML(VG["templates/videotrack.html"]({}),player.container.ownerDocument);if(this.littlePlayButton=trackEl.querySelector(".vg_littlePlayButton"),this.list.appendChild(trackEl),player.options.plugins.indexOf(Filmstrip.PLUGIN_ID)!=-1){var canvas=trackEl.querySelector(".vg_videoTrack__canvas");player.getFilmStripDrawer(function(drawer){drawer.drawFilmstrip(canvas,0,player.getTimeline().getLastFrame(),4,!1,function(){player.getLog().debug("Filmstrip generated successfully")},function(e){player.getLog().error(e,"Couldn't draw filmstrip")})})}this.setEventRx()};VideoControlView=stjs.extend(VideoControlView,VGThemeView,[],function(constructor,prototype){prototype.player=null,prototype.hdButton=null,prototype.littlePlayButton=null,prototype.iconClick=null,prototype.littlePlayButtonClick=null,prototype.hdButtonRX=null,prototype.setEventRx=function(){var self=this,header=self.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon");self.iconClick=Rx.Observable.fromEvent(header,"click"),self.littlePlayButtonClick=Rx.Observable.fromEvent(self.littlePlayButton,"click"),self.iconClick.subscribe(stjs.bind(this,function(x){this.player.iconClick.onNext(self.el)})),self.littlePlayButtonClick.subscribe(function(x){self.littlePlayButton.classList.toggle("vg_playing")}),self.hdButtonRX=Rx.Observable.fromEvent(self.hdButton,"click").filter(stjs.bind(this,function(x){return!this.player.isChangingVideoSrc()})).map(function(x){return self.toggleActive(self.hdButton)}),this.player.getPlayRx().subscribe(function(playing){playing?self.littlePlayButton.classList.add("vg_playing"):self.littlePlayButton.classList.remove("vg_playing")})}},{player:"VGThemePlayer",hdButton:"Element",littlePlayButton:"Element",iconClick:{name:"Rx.Observable",arguments:["DOMEvent"]},littlePlayButtonClick:{name:"Rx.Observable",arguments:["DOMEvent"]},hdButtonRX:{name:"Rx.Observable",arguments:[null]},icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VGCropPlugin=function(view,w,h,top,left,log){BasePlugin.call(this,"crop"),this.view=view,this.log=log,this.editMode=null,this.cropMaskEl=this.view.getElement().querySelector(".crop-mask"),this.imageEl=this.view.getElement().querySelector(".crop-frame"),this.cropMask=new CropMask(w,h,top,left),this.disposable=new Rx.CompositeDisposable,this.drawMask(),this.initListeners()};VGCropPlugin=stjs.extend(VGCropPlugin,BasePlugin,[],function(constructor,prototype){constructor.EDIT_MODE_W="W",constructor.EDIT_MODE_L="L",constructor.EDIT_MODE_H="H",constructor.EDIT_MODE_T="T",prototype.cropMask=null,prototype.cropMaskEl=null,prototype.imageEl=null,prototype.editMode=null,prototype.view=null,prototype.log=null,prototype.disposable=null,constructor.vgEnableCropPlugin=function(player,onCropRequested){var cropView=new VGCropPluginView,button=new VGThemeView(player.getView().controlsPanelView.getControlsContainer(),player.getView(),null,{iconClass:"vg_icon-camera",header:"Image Capture",tracksClass:"vg_crop"});button.el.addEventListener("click",function(domEvent){var canvas=player.getView().freezeVideo();cropView.frameImage.src=canvas.toDataURL("image/jpeg"),cropView.frameImage.onload=function(event){var cropMaskW=stjs.trunc((cropView.frameImage.width+12)/2),cropMaskH=stjs.trunc((cropView.frameImage.height+12)/2),vgCropPlugin=new VGCropPlugin(cropView,cropMaskW,cropMaskH,0,0,player.getLog());onCropRequested(cropView,vgCropPlugin)},button.el.classList.add("active")})},constructor.rrEnableCropPlugin=function(player,onCropRequested){var cropView=new VGCropPluginView;player.getView().controlsPanelView.enableControl(new FrameCropCaptureControl(player,function(canvas){cropView.frameImage.src=canvas.toDataURL("image/jpeg");var cropMaskW=stjs.trunc((cropView.frameImage.width+12)/2),cropMaskH=stjs.trunc((cropView.frameImage.height+12)/2),vgCropPlugin=new VGCropPlugin(cropView,cropMaskW,cropMaskH,0,0,player.getLog());onCropRequested(cropView,vgCropPlugin)}))},prototype.getCroppedCanvas=function(){var canvas=window.document.createElement("canvas"),fullscaleImg=window.document.createElement("img");fullscaleImg.src=this.view.frameImage.src;var scaleW=fullscaleImg.width/this.view.frameImage.width,scaleH=fullscaleImg.height/this.view.frameImage.height;canvas.width=stjs.trunc(scaleW*this.cropMask.width),canvas.height=stjs.trunc(scaleH*this.cropMask.height);var d2=canvas.getContext("2d",null),x=scaleW*this.cropMask.left*-1,y=scaleH*this.cropMask.top*-1;return d2.drawImage(fullscaleImg,stjs.trunc(x),stjs.trunc(y)),canvas},prototype.initListeners=function(){for(var pipkaList=this.view.getElement().querySelectorAll(".pipka"),i=0;i<pipkaList.length;i++){var element=pipkaList[i];Rx.Observable.fromEvent(element,"mousedown").subscribe(stjs.bind(this,function(domEvent){this.log.debug("edit mode on!"),domEvent.target.classList.contains("mr")?this.editMode=VGCropPlugin.EDIT_MODE_W:domEvent.target.classList.contains("bm")?this.editMode=VGCropPlugin.EDIT_MODE_H:domEvent.target.classList.contains("ml")?this.editMode=VGCropPlugin.EDIT_MODE_L:domEvent.target.classList.contains("tm")&&(this.editMode=VGCropPlugin.EDIT_MODE_T)}))}null!=this.view.container&&null!=this.view.container.parentElement&&this.disposable.add(Rx.Observable.fromEvent(this.view.container.parentElement,"mouseup").subscribe(stjs.bind(this,function(event){return this.editModeOff()()}))),this.disposable.add(Rx.Observable.fromEvent(this.view.getElement(),"mouseup").subscribe(stjs.bind(this,function(event){return this.editModeOff()()}))),this.disposable.add(Rx.Observable.fromEvent(this.view.getElement(),"mousemove").subscribe(stjs.bind(this,function(domEvent){if(null!=this.editMode){var maskRect=this.cropMaskEl.getBoundingClientRect(),imageRect=this.imageEl.getBoundingClientRect(),minWidth=15,w=domEvent.clientX-maskRect.left,h=domEvent.clientY-maskRect.top,t=Math.min(domEvent.clientY-imageRect.top,imageRect.height-minWidth),l=Math.min(domEvent.clientX-imageRect.left,imageRect.width-2*minWidth);return this.editMode.contains(VGCropPlugin.EDIT_MODE_W)&&(this.cropMask.width=w),this.editMode.contains(VGCropPlugin.EDIT_MODE_H)&&(this.cropMask.height=Math.max(h,minWidth)),this.editMode.contains(VGCropPlugin.EDIT_MODE_L)&&(this.cropMask.left=l,this.cropMask.width=Math.max(maskRect.width-w,minWidth)),this.editMode.contains(VGCropPlugin.EDIT_MODE_T)&&(this.cropMask.top=t,this.cropMask.height=Math.max(maskRect.height-h,minWidth)),domEvent.clientX>=imageRect.right||domEvent.clientX<=imageRect.left||domEvent.clientY>=imageRect.bottom||domEvent.clientY<=imageRect.top?void this.editModeOff()():void this.drawMask()}})))},prototype.close=function(){this.disposable.dispose()},prototype.editModeOff=function(){return stjs.bind(this,function(){this.log.debug("edit mode off!"),this.editMode=null})},prototype.drawMask=function(){this.cropMaskEl.style.left=this.cropMask.left+"px",this.cropMaskEl.style.width=this.cropMask.width+"px",this.cropMaskEl.style.height=this.cropMask.height+"px",this.cropMaskEl.style.top=this.cropMask.top+"px"},prototype.renderInto=function(container,containerWidth,onDone){this.view.appendTo(container),onDone()}},{cropMask:"CropMask",cropMaskEl:"Element",imageEl:"Element",view:"VGCropPluginView",log:"Log",disposable:"Rx.CompositeDisposable",pluginApi:"VGPlayerPluginApi"},{});var SubtitlesToggleControl=function(player,dialogRequested){this.player=player,this.dialogRequested=dialogRequested,this.captionsView=new CaptionsView(player,player.getView().getCaptionsContainer(),null),player.getTimeUpdateRx().subscribe(stjs.bind(this,function(timeValues){this.captionsView.drawCaps(timeValues.tv,null)}))};SubtitlesToggleControl=stjs.extend(SubtitlesToggleControl,null,[VGControl],function(constructor,prototype){prototype.captionsView=null,prototype.iconClickRx=null,prototype.player=null,prototype.dialogRequested=null,prototype.showCaptions=function(subs){this.captionsView.setCaptions(subs,this.player.getCurrentTimeValue(),null)},prototype.getControlEl=function(controlPanel){var iconEl=VGTemplates.elFromHTML(VGTemplates.addonControl("external-control-subs","vg_icon-subs"),this.player.container.ownerDocument);return this.iconClickRx=Rx.Observable.fromEvent(iconEl,"click",function(e){return iconEl}),this.iconClickRx.subscribe(stjs.bind(this,function(_el){this.player.pause(),this.dialogRequested(this)})),iconEl}},{captionsView:"CaptionsView",iconClickRx:{name:"Rx.Observable",arguments:["Element"]},player:"SkinnedPlayerImpl",dialogRequested:{name:"Callback1",arguments:["SubtitlesToggleControl"]}},{});var RestVideoLogAsyncStorage=function(http,url,onReady,log){VideologAsyncStorage.call(this,log),this.http=http,this.url=url,this.coldStart(onReady)};RestVideoLogAsyncStorage=stjs.extend(RestVideoLogAsyncStorage,VideologAsyncStorage,[],function(constructor,prototype){prototype.http=null,prototype.url=null,prototype.coldStart=function(onReady){this.loadTags(this.url+"tags.json",stjs.bind(this,function(tagsById){this.displayNamesById=tagsById,onReady(this)}))},prototype.tracksOfProxy=function(proxyId,onLoad){this.http.get(this.url+"media/tracks/"+proxyId+"/").subscribe(stjs.bind(this,function(data){if(null==data)throw this.log.debug("empty response"),new RuntimeException("empty response");var parse=JSON.parse(data);onLoad(parse.map(function(tdata,aLong,strings){return Track.fromJson(tdata)}))}),stjs.bind(this,function(req){this.log.error("failed to load tracks list for media")}))},prototype.trackEvents=function(trackId,onLoad,onError){this.http.get(this.url+"trackevents/"+trackId+"/").subscribe(function(data){if(null==data)onError(null);else{var parsedArray=JSON.parse(data),events=parsedArray.map(function(map,aLong,strings){return LogEvent.fromJson(map)});onLoad(events)}},stjs.bind(this,function(req){this.log.error("failed to load track events!"),onError("failed to load track events!")}))},prototype.loggedUser=function(userUrl,onLoaded){this.http.request(function(){return userUrl},null,"GET",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(stjs.bind(this,function(data){if(null!=data){var user=stjs.hydrate(JSON.parse(data),User);onLoaded(user)}else this.log.error("can not load VideoLog User")}),stjs.bind(this,function(xmlHttpRequest){this.log.error("failed to load User",xmlHttpRequest)}))},prototype.loadTags=function(tagsUrl,onLoaded){var tagNamesById={};this.http.get(tagsUrl).subscribe(stjs.bind(this,function(data){if(null!=data){for(var parsedArray=JSON.parse(data),i=0;i<parsedArray.length;i++){var tag=parsedArray[i];tagNamesById[tag.id]=tag.displayName}this.log.info(parsedArray.length," tags loaded"),onLoaded(tagNamesById)}}),stjs.bind(this,function(req){this.log.error("failed to load tags",req,tagsUrl)}))},prototype._trackById=function(trackId,onLoad,onError){var trackUrl=this.url+"track/"+trackId+"/";this.http.get(trackUrl).subscribe(stjs.bind(this,function(trackData){null!=trackData?onLoad(Track.fromJson(JSON.parse(trackData))):(this.log.error("trackLoad response is null"),onError(null))}),stjs.bind(this,function(req){this.log.error(req,trackUrl),onError(req)}))},prototype._saveTrack=function(track,onStore,onError){this.log.debug(track);var headers=RestVideoLogAsyncStorage.getCRFTTokenHeader();headers["Content-Type"]="application/json",null==track.id?this.http.request(stjs.bind(this,function(){return this.url+"track/"}),JSON.stringify(track),"POST",headers).subscribe(function(json){onStore(Track.fromJson(JSON.parse(json)))},stjs.bind(this,function(xmlHttpRequest){this.log.error(xmlHttpRequest.responseText),onError(xmlHttpRequest)})):this.http.request(stjs.bind(this,function(){return this.url+"track/"+track.id+"/"}),JSON.stringify(track),"PUT",headers).subscribe(function(json){onStore(Track.fromJson(JSON.parse(json)))},stjs.bind(this,function(xmlHttpRequest){this.log.error(xmlHttpRequest.responseText),onError(xmlHttpRequest)}))},prototype._eventById=function(eventId,onLoad,onError){this.http.getJson(this.url+"event/"+eventId+"/",Map).subscribe(function(data){onLoad(LogEvent.fromJson(data))},function(xmlHttpRequest){onError(xmlHttpRequest)})},prototype._saveEvent=function(logEvent,onStore,onError){var headers=RestVideoLogAsyncStorage.getCRFTTokenHeader();headers["Content-Type"]="application/json",null==logEvent.id?this.http.request(stjs.bind(this,function(){return this.url+"event/"}),JSON.stringify(logEvent),"POST",headers).subscribe(function(json){onStore(LogEvent.fromJson(JSON.parse(json)))},stjs.bind(this,function(xmlHttpRequest){this.log.error(xmlHttpRequest.responseText),onError(xmlHttpRequest)})):this.http.request(stjs.bind(this,function(){return this.url+"event/"+logEvent.id+"/"}),JSON.stringify(logEvent),"PUT",headers).subscribe(function(json){onStore(LogEvent.fromJson(JSON.parse(json)))},stjs.bind(this,function(xmlHttpRequest){this.log.error(xmlHttpRequest.responseText),onError(xmlHttpRequest)}))},prototype._deleteTrack=function(track,onDeleted){this.http.request(stjs.bind(this,function(){return this.url+"track/"+track.id+"/"}),null,"DELETE",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(function(o){return onDeleted(track)})},prototype._deleteEvent=function(logEventId,onDeleted){this.http.request(stjs.bind(this,function(){return this.url+"event/"+logEventId}),null,"DELETE",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(function(data){return onDeleted(LogEvent.fromJson(JSON.parse(data)))})},prototype._clearTrack=function(track,onDeleted){this.http.request(stjs.bind(this,function(){return this.url+"clear/track/"+track.id+"/"}),null,"DELETE",RestVideoLogAsyncStorage.getCRFTTokenHeader()).subscribe(function(x){return onDeleted(track)})},constructor.getCRFTTokenHeader=function(){return{"X-CSRFToken":Utils.readCookie("csrftoken")}}},{http:"Http",trackChangedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},trackDeletedRx:{name:"Rx.ReplaySubject",arguments:["Track"]},eventChangedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},eventDeletedRx:{name:"Rx.ReplaySubject",arguments:["LogEvent"]},displayNamesById:{name:"Map",arguments:[null,null]},log:"Log",defaultTrackNames:{name:"Array",arguments:[null]}},{});var StandardTimecodeInput=function(element,timeline,timeRx,onChange){TimecodeInput.call(this,element,timeline,timeRx,onChange,"standard","__:__:__.___")};StandardTimecodeInput=stjs.extend(StandardTimecodeInput,TimecodeInput,[],function(constructor,prototype){prototype.timeSampleToInputValue=function(ts){return Utils.hhmmssms(stjs.trunc(1e3*ts.sec))},prototype.inputValueToTimeSample=function(value){var millis=Utils.HHmmSSmsecToTimestamp(value),fn=this.timeline.getFrameByMillis(millis),sec=millis/1e3,tv=this.timeline.getTvBySec(sec);return new TimeSample(tv,fn,sec)}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var TapeTimecodeInput=function(element,timeline,timeRx,onChange){TimecodeInput.call(this,element,timeline,timeRx,onChange,"tape","__:__:__:__")};TapeTimecodeInput=stjs.extend(TapeTimecodeInput,TimecodeInput,[],function(constructor,prototype){prototype.timeSampleToInputValue=function(ts){return this.timeline.getTapeByFrame(ts.frame)},prototype.inputValueToTimeSample=function(value){var fn=this.timeline.getFrameByTimecode(value),sec=this.timeline.getSecByFrame(fn),tv=this.timeline.getTvByFrame(fn),ts=new TimeSample(tv,fn,sec);return ts}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var FrameTimecodeInput=function(element,timeline,timeRx,onChange){TimecodeInput.call(this,element,timeline,timeRx,onChange,"frame","")};FrameTimecodeInput=stjs.extend(FrameTimecodeInput,TimecodeInput,[],function(constructor,prototype){prototype.timeSampleToInputValue=function(ts){return""+ts.frame},prototype.inputValueToTimeSample=function(value){var fn=Utils.toInt(value),sec=this.timeline.getSecByFrame(fn),tv=this.timeline.getTvByFrame(fn),ts=new TimeSample(tv,fn,sec);return ts}},{timeline:"Timeline",input:"Input",maskedInput:"MaskedTimecodeInput",lastTimeSample:"TimeSample",onChange:{name:"Callback1",arguments:["TimeSample"]}},{});var LogEventComponent=function(props){React.Component.call(this,props),this.state={editable:!0,showModifierInfo:!1}};LogEventComponent=stjs.extend(LogEventComponent,React.Component,[],function(constructor,prototype){constructor.eventCss="vg-side-panel-events-item",constructor.editEventCss="vg-side-panel-events-item editable",constructor.newEventCss="vg-side-panel-events-item new_event",constructor.tagsCss="vg-side-panel-events-item-tags",constructor.eventItemTimeCss="vg-side-panel-events-item-time",constructor.startTimeCss="start-time",constructor.endTimeCss="end-time",constructor.durationCss="duration",constructor.durationIcon="vg-icon-duration",constructor.durationValueCss="duration-value",constructor.modifiedCss="vg_modified vg-icon vg-icon-information",constructor.modifiedByCss="vg_modified-by",constructor.modifiedTitleCss="vg_modified-by_title",constructor.modifiedInfoCss="vg_modified-by_info",constructor.avatarCss="avatar",constructor.modifierAndDateCss="modifier_and_date",constructor.personInfoCss="person_info",constructor.dateInfoCss="date_info",constructor.tagsInputCss="vg-side-panel-events-item-tags-input",constructor.eventTagCss="vg-event-tag",constructor.deleteIcon="vg-icon vg-icon-delete",constructor.addTagCss="vg-event-tag add_tag",constructor.itemDescriptionCss="vg-side-panel-events-item-description",constructor.descriptionInputCss="description-input",prototype.event=null,constructor.State=function(){},constructor.State=stjs.extend(constructor.State,null,[],function(constructor,prototype){prototype.editable=!1,prototype.newEvent=!1,prototype.showModifierInfo=!1},{},{}),prototype.setEditable=function(b){this.setState({editable:b})},prototype.render=function(){var startTimecode=TimeCodeComponent.timeCode(TimeCodeComponent.TAPE,this.props.startTv,this.props.timescale,this.props.onChange),endTimecode=TimeCodeComponent.readOnlyTimeCode(TimeCodeComponent.TAPE,this.props.endTv,this.props.timescale,this.props.onChange),modifierInfo=null;this.state.showModifierInfo&&(modifierInfo=React.DOM.span({
className:LogEventComponent.modifiedCss},React.DOM.div({className:LogEventComponent.modifiedByCss},React.DOM.div({className:LogEventComponent.modifiedTitleCss},"Last modification"),React.DOM.div({className:LogEventComponent.modifiedInfoCss},React.DOM.span({className:LogEventComponent.avatarCss}),React.DOM.div({className:LogEventComponent.modifierAndDateCss},React.DOM.div({className:LogEventComponent.personInfoCss},"By: Dylan Brown"),React.DOM.div({className:LogEventComponent.dateInfoCss},"At: 17:45 11/11/2016"))))));var showModifierInfo=stjs.bind(this,function(event){this.state.showModifierInfo=!this.state.showModifierInfo,this.setState(this.state)}),durationIcon=React.DOM.span({className:LogEventComponent.durationIcon,onClick:showModifierInfo});return this.state.editable?this.event=React.DOM.div({className:LogEventComponent.editEventCss},React.DOM.div({className:LogEventComponent.eventItemTimeCss},React.DOM.div({className:LogEventComponent.startTimeCss},React.DOM.span(null,"Start:"),startTimecode),React.DOM.div({className:LogEventComponent.endTimeCss},React.DOM.span(null,"End:"),endTimecode),React.DOM.div({className:LogEventComponent.durationCss},durationIcon,React.DOM.span({className:LogEventComponent.durationValueCss},"00:01:00:00"),modifierInfo)),React.DOM.div({className:LogEventComponent.tagsCss},TagComponent.eventTag("42","Frame Shmrame Tag Name"),TagComponent.eventTag("43","Second Tag Name"),AddTagComponent.addTag()),React.DOM.div({className:LogEventComponent.itemDescriptionCss},React.DOM.input({className:LogEventComponent.descriptionInputCss,placeholder:"Add Description"}))):this.state.newEvent?this.event=React.DOM.div({className:LogEventComponent.newEventCss},React.DOM.div({className:LogEventComponent.eventItemTimeCss},React.DOM.div({className:LogEventComponent.startTimeCss},React.DOM.span(null,"Start:"),startTimecode),React.DOM.div({className:LogEventComponent.endTimeCss},React.DOM.span(null,"End:"),endTimecode),React.DOM.div({className:LogEventComponent.durationCss},durationIcon,React.DOM.span({className:LogEventComponent.durationValueCss},"00:01:00:00"),modifierInfo)),React.DOM.div({className:LogEventComponent.tagsCss},React.DOM.input({className:LogEventComponent.tagsInputCss,placeholder:"+ Add tag"}),React.DOM.div({className:"vg-side-panel-events-item-tags-input-container"},React.DOM.ul({className:"vg-side-panel-events-item-tags-input-dropdown"},React.DOM.li(null,"Bars and Tone"),React.DOM.li(null,"Fade toBlack"),React.DOM.li(null,"Black"),React.DOM.li(null,"Commercial Black / Insert Ads"),React.DOM.li(null,"Pull Commercial Black"),React.DOM.li(null,"Fade toBlack"),React.DOM.li(null,"Black"),React.DOM.li(null,"Commercial Black / Insert Ads"),React.DOM.li(null,"Pull Commercial Black")))),React.DOM.div({className:LogEventComponent.itemDescriptionCss},React.DOM.input({className:LogEventComponent.descriptionInputCss,placeholder:"Add Description"}))):this.event=React.DOM.div({className:LogEventComponent.eventCss},React.DOM.div({className:LogEventComponent.eventItemTimeCss},React.DOM.div({className:LogEventComponent.startTimeCss},React.DOM.span(null,"Start:"),startTimecode),React.DOM.div({className:LogEventComponent.endTimeCss},React.DOM.span(null,"End:"),endTimecode),React.DOM.div({className:LogEventComponent.durationCss},durationIcon,React.DOM.span({className:LogEventComponent.durationValueCss},"00:01:00:00"),modifierInfo)),React.DOM.div({className:LogEventComponent.tagsCss},TagComponent.eventTag("42","Frame Shmrame Tag Name"),TagComponent.eventTag("43","Second Tag Name")),React.DOM.div({className:LogEventComponent.itemDescriptionCss},React.DOM.input({className:LogEventComponent.descriptionInputCss,placeholder:"Add Description"}))),this.event}},{event:{name:"ReactElement",arguments:["Object"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var CaptionsControl=function(player){VGPlugins.call(this,player),this.view=new CaptionsControlView(player,player.getView().controlsPanelView.getControlsContainer(),player.getView(),null);var captionsContainer=player.getView().getCaptionsContainer(),searchContainer=null;player.options.search&&(searchContainer=player.getView().timeScrubberView.el),this.captionsView=new CaptionsView(player,captionsContainer,searchContainer),this.captionsChangeRx=new Rx.Subject,this.captionsSearchRx=new Rx.Subject,this.setEventSubscriptions()};CaptionsControl=stjs.extend(CaptionsControl,VGPlugins,[VGControl],function(constructor,prototype){prototype.tv=0,prototype.captionsView=null,prototype.captionsChangeRx=null,prototype.captions=null,prototype.searchValue=null,prototype.captionsSearchRx=null,prototype.getControlEl=function(controlPanel){return this.view.el},prototype.search=function(value){return Utils.filter(this.getCaptions().rows,function(row){return Utils.includes(row.notes.toLowerCase(),value.toLowerCase())})},prototype.addSearchHits=function(filteredRows){var self=this,timeline=this.player.getTimeline();filteredRows.forEach(function(row){var fn=timeline.getFrameByTv(row.startTv);if(fn<timeline.getLastFrame()){var left=fn/timeline.getFrameCount();self.captionsView.addSearchHit(new Position(left,0))}})},prototype.setEventSubscriptions=function(){var view=this.view;this.player.getTimeUpdateRx().subscribe(stjs.bind(this,function(timeValues){this.captionsView.drawCaps(timeValues.tv,this.searchValue),this.tv=timeValues.tv})),this.captionsChangeRx.subscribe(stjs.bind(this,function(caption){return caption==this.getCaptions()?(this.captionsView.hideCaptions(this.tv),this.captionsView.clearSearch(),this.setCaptions(null),void this.view.deactivateCaptions()):(this.setCaptions(caption),this.view.activateCaption(caption),this.captionsView.setCaptions(this.getCaptions(),this.tv,this.searchValue),void 0)})),this.captionsSearchRx.subscribe(stjs.bind(this,function(searchValue){if(this.captionsView.clearSearch(),this.searchValue=searchValue,this.captionsView.drawCaps(this.tv,this.searchValue),this.view.setSearchValue(searchValue),Utils.isNotEmpty(searchValue)){var filteredCapts=this.search(searchValue);this.addSearchHits(filteredCapts)}})),this.player.getCaptionListChangeRx().subscribe(stjs.bind(this,function(caption){this.captionsChangeRx.onNext(caption)})),view.captionElRx.subscribe(stjs.bind(this,function(el){this.captionsChangeRx.onNext(Utils.callMethod(el,CaptionsControlView.GetCaption))})),view.captionsFormRx.subscribe(stjs.bind(this,function(input){this.captionsSearchRx.onNext(input.value)}))},prototype.getCaptions=function(){return this.captions},prototype.setCaptions=function(captions){this.captions=captions}},{captionsView:"CaptionsView",captionsChangeRx:{name:"Rx.Subject",arguments:["Subtitles"]},captions:"Subtitles",captionsSearchRx:{name:"Rx.Subject",arguments:[null]},player:"PlayerImpl",view:"VGView"},{});var AudioControl=function(player){VGPlugins.call(this,player),this.log=player.getLog(),this.view=new AudioControlView(player,player.getView().controlsPanelView.getControlsContainer(),player.getView(),null),this.setEventSubscriptions()};AudioControl=stjs.extend(AudioControl,VGPlugins,[VGControl],function(constructor,prototype){prototype.log=null,prototype.view=null,prototype.volume=0,prototype.getControlEl=function(controlPanel){return this.view.el},prototype.setEventSubscriptions=function(){this.volume=this.player.getVolume(),this.player.audioTracksRx.distinct(function(track){return track.id()}).subscribe(stjs.bind(this,"addAudioTrack")),this.player.getVolumeChangeRx().subscribe(stjs.bind(this,function(volume){0!=volume&&(this.volume=volume)})),this.view.muteButtonRx.subscribe(stjs.bind(this,function(mute){mute?this.player.setVolume(0):this.player.setVolume(this.volume)})),this.view.volumeRangeRx.subscribe(stjs.bind(this.player,"setVolume")),this.view.channelElRx.subscribe(stjs.bind(this,function(channelEl){if(null!=channelEl){var trackEl=channelEl.closest(".vg_audioTrack"),currentAudioTrack=this.player.getCurrentAudioTrack(),track=this.player.getAudioTrack(trackEl.getAttribute("data-trackproxy"));if(null!=currentAudioTrack&&track.proxyId==currentAudioTrack.proxyId){if(this.player.proxyType==ProxyType.VG){var channelIndex=Utils.toInt(channelEl.getAttribute("data-channel")),mute=!track.getChannelMuted(channelIndex);this.log.debug(mute?"mute":"unmute",track,channelIndex),track.setChannelMuted(channelIndex,mute)}}else this.player.setVolume(this.volume),this.switchAudio(track)}}))},prototype.addAudioTrack=function(track){track.channelMuteRx.throttle(2).doOnNext(stjs.bind(this,function(channelMute){this.player.isAllMuted()&&0!=this.player.getVolume()?this.player.setVolume(0):this.player.setVolume(this.volume),this.player.applyAudioChanges()})).subscribe()},prototype.switchAudio=function(track){this.log.debug("switch audio track"),this.player.setCurrentAudioTrack(track.id())}},{log:"Log",view:"AudioControlView",player:"PlayerImpl",view:"VGView"},{});var MenuControlComponent=function(props){React.Component.call(this,props),this.state={active:!1}};MenuControlComponent=stjs.extend(MenuControlComponent,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.icon=null},{},{}),prototype.render=function(){var classList="vg_iconControls__item vg_ddown vg_info";if(null!=this.state.dropDown){var onClick=stjs.bind(this,function(e){return this.toggle()});return this.state.active&&(classList+=" active"),React.DOM.div({className:classList,onClick:onClick},React.DOM.span({className:this.props.icon}),DropDownComponent.ddown(this.state.dropDown))}return React.DOM.div({className:classList},React.DOM.span({className:this.props.icon}))},prototype.setActiveItem=function(id){null!=this.state.dropDown&&(this.state.dropDown.items.forEach(function(item){item.selected=item.id.equals(id)}),this.setState(this.state))},prototype.updateDropDown=function(dropDown){this.state.dropDown=dropDown,this.setState(this.state)},prototype.setActive=function(active){this.state.active=active,this.setState(this.state)},prototype.show=function(){this.setActive(!0)},prototype.hide=function(){this.setActive(!1)},prototype.toggle=function(){this.setActive(!this.state.active)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var MuteableHoverMenuComponent=function(props){React.Component.call(this,props),this.state={mute:!1},this.iconClickRx=new Rx.Subject};MuteableHoverMenuComponent=stjs.extend(MuteableHoverMenuComponent,React.Component,[],function(constructor,prototype){constructor.HoverMenuProps=function(icon,muteIcon){this.icon=icon,this.muteIcon=muteIcon},constructor.HoverMenuProps=stjs.extend(constructor.HoverMenuProps,null,[],function(constructor,prototype){prototype.icon=null,prototype.muteIcon=null},{},{}),prototype.iconClickRx=null,prototype.getIconClickRx=function(){return this.iconClickRx},prototype.render=function(){var onClick=stjs.bind(this,function(e){this.toggleMute(),this.iconClickRx.onNext(this.state.mute)});return React.DOM.div({className:"vg_iconControls__item vg_ddown_hover vg_info"},React.DOM.span({className:this.state.mute?this.props.muteIcon:this.props.icon,onClick:onClick}),DropDownComponent.ddown(this.state.dropDown))},prototype.toggleMute=function(){this.state.mute=!this.state.mute,this.setState(this.state)},prototype.updateDropDown=function(dropDown){this.state.dropDown=dropDown,this.setState(this.state)},prototype.setItemColor=function(itemId,color){null!=this.state.dropDown&&(this.state.dropDown.items.forEach(stjs.bind(this,function(item){item.id.equals(itemId)&&(item.color=color,this.state.mute=!1)})),this.setState(this.state))}},{iconClickRx:{name:"Rx.Subject",arguments:[null]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var RadioButtonMenuComponent=function(props){React.Component.call(this,props),this.state={mute:!1,selectedId:null,items:{}},this.iconClickRx=new Rx.Subject,this.selectedItemRx=new Rx.Subject};RadioButtonMenuComponent=stjs.extend(RadioButtonMenuComponent,React.Component,[],function(constructor,prototype){constructor.HoverMenuProps=function(title,className,icon,muteIcon){this.title=title,this.className=className,this.icon=icon,this.muteIcon=null!=muteIcon?muteIcon:icon},constructor.HoverMenuProps=stjs.extend(constructor.HoverMenuProps,null,[],function(constructor,prototype){prototype.title=null,prototype.className=null,prototype.icon=null,prototype.muteIcon=null},{},{}),prototype.iconClickRx=null,prototype.selectedItemRx=null,prototype.getIconClickRx=function(){return this.iconClickRx},prototype.getSelectedItemRx=function(){return this.selectedItemRx},prototype.render=function(){var onClick=stjs.bind(this,function(e){this.toggleMute(),this.iconClickRx.onNext(this.state.mute)});return React.DOM.div({className:"vg_iconControls__item vg_ddown_hover vg_info"},React.DOM.span({className:this.state.mute?this.props.muteIcon:this.props.icon,onClick:onClick}),DropDownComponent.ddown(this.createDropDown()))},prototype.createDropDown=function(){return new ColorBulletDropDown(this.props.title,this.props.className,Utils.map(this.state.items,stjs.bind(this,function(id,title){return new ColorBulletDropDownMenuItem(id,title,id.equals(this.state.selectedId)?"white":"grey",stjs.bind(this,function(e){this.state.selectedId=id,this.setState(this.state),this.selectedItemRx.onNext(id)}))})))},prototype.toggleMute=function(){this.state.mute=!this.state.mute,this.setState(this.state)},prototype.updateItems=function(items){this.state.items=items,this.setState(this.state)}},{iconClickRx:{name:"Rx.Subject",arguments:[null]},selectedItemRx:{name:"Rx.Subject",arguments:[null]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VideoLogComponent=function(props){React.Component.call(this,props),this.state={tracks:[],events:[],zoom:50,currentEvent:0}};VideoLogComponent=stjs.extend(VideoLogComponent,React.Component,[],function(constructor,prototype){constructor.VideoLogProps=function(timeline,filmstripDrawer,selectTrackRx,deleteTrackRx,importTrackRx,selectEventRx,deleteEventRx,log){this.timeline=timeline,this.filmstripDrawer=filmstripDrawer,this.selectTrackRx=selectTrackRx,this.deleteTrackRx=deleteTrackRx,this.importTrackRx=importTrackRx,this.selectEventRx=selectEventRx,this.deleteEventRx=deleteEventRx,this.log=log},constructor.VideoLogProps=stjs.extend(constructor.VideoLogProps,null,[],function(constructor,prototype){prototype.timeline=null,prototype.filmstripDrawer=null,prototype.deleteTrackRx=null,prototype.selectTrackRx=null,prototype.importTrackRx=null,prototype.selectEventRx=null,prototype.deleteEventRx=null,prototype.log=null},{timeline:"Timeline",filmstripDrawer:"FilmStripDrawer",deleteTrackRx:{name:"Rx.Subject",arguments:["Track"]},selectTrackRx:{name:"Rx.Subject",arguments:["Track"]},importTrackRx:{name:"Rx.Subject",arguments:[null]},selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log"},{}),prototype.setEvents=function(events){this.state.events=null==events?[]:events,this.setState(this.state)},prototype.setTracks=function(tracks){this.state.tracks=null==tracks?[]:tracks,this.setState(this.state)},prototype.setCurrentEvent=function(currentEvent){this.state.currentEvent=currentEvent,this.setState(this.state)},prototype.getHeight=function(){return null!=this.refs.panel?this.refs.panel.clientHeight:0},prototype.getEvents=function(){return this.state.events},prototype.render=function(){var tlProps=new TrackListComponent.TrackListProps(this.state.tracks,this.props.deleteTrackRx,this.props.selectTrackRx,this.props.importTrackRx),elProps=new EventListComponent.EventListProps(this.state.events,this.props.timeline,this.props.filmstripDrawer,this.state.zoom,this.state.currentEvent,this.props.selectEventRx,this.props.deleteEventRx,this.getHeight()-70-73,this.props.log);return React.DOM.div({className:"vg-events-and-tracks-container"},React.DOM.div({className:"vg-events-and-tracks-wrapper"},React.DOM.div({className:"vg-tracks-panel"},React.createElement(TrackListComponent,UIUtils.toPlainObject(tlProps))),React.DOM.div({className:"vg-events-panel",ref:"panel"},React.createElement(EventListComponent,UIUtils.toPlainObject(elProps)))))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ExtendedCssWaveCollider=function(waveform,channelInfo,canvas,log){CssWaveCollider.call(this,waveform.http,channelInfo,canvas,log),this.waveform=waveform};ExtendedCssWaveCollider=stjs.extend(ExtendedCssWaveCollider,CssWaveCollider,[],function(constructor,prototype){prototype.waveform=null,prototype.drawWave=function(){if(this.log.debug("ExtendedCssWaveCollider drawWave"),null==this.channel||0==this.channel.sampleRate)return!1;var sampleRange=null,uiSpp=0,channel=this.channel,startX=Math.floor(this.waveform.getLeftFor(this.waveform.range.start)),endX=Math.ceil(this.waveform.getLeftFor(this.waveform.range.end));if(null!=channel){var startTv=this.waveform.timeline.getTvByFrame(this.waveform.range.start),endTv=this.waveform.timeline.getTvByFrame(this.waveform.range.end),startSample=Utils.convertTv(startTv,this.waveform.timeline.getTimeScale(),channel.sampleRate),endSample=Utils.convertTv(endTv,this.waveform.timeline.getTimeScale(),channel.sampleRate);sampleRange=new Range(stjs.trunc(startSample),stjs.trunc(endSample)).offset(stjs.trunc(channel.channelOffset)),uiSpp=stjs.trunc(sampleRange.duration()/(endX-startX))}return this.drawChannel(DrawChannel.newDrawChannel(channel,stjs.trunc(startX),stjs.trunc(endX),sampleRange,uiSpp)),!1},constructor.WAVE_IMAGES={},constructor.preciseWaveImages={},prototype.getWaveImages=function(_channel){var json=JSON.stringify(_channel),_wi=ExtendedCssWaveCollider.WAVE_IMAGES[json];return null==_wi&&(ExtendedCssWaveCollider.WAVE_IMAGES[json]=new WaveImages(this.http,_channel)),ExtendedCssWaveCollider.WAVE_IMAGES[json]},prototype.drawChannel=function(channelData){this.log.debug("ExtendedCssWaveCollider drawChannel");var clientWidth=this.getDimensions().width;if(!(channelData.startX>clientWidth||channelData.endX<0)){if(null==channelData.sampleRange)return void this.getContext().clearRect(channelData.startX,0,channelData.endX-channelData.startX,this.getDimensions().height+2);channelData.startX<0&&(channelData.sampleRange.start+=Math.round(Math.abs(channelData.startX)*channelData.uiSpp),channelData.startX=0),channelData.endX>clientWidth&&(channelData.sampleRange.end-=Math.round((channelData.endX-clientWidth)*channelData.uiSpp),channelData.endX=clientWidth);var waveImages=this.getWaveImages(channelData.channel),wi=waveImages.getWaveImage(channelData.uiSpp,stjs.bind(this,function(img){this._drawWave(img,channelData)}));if(null==wi){var json=JSON.stringify(channelData.channel),pWaveImages=ExtendedCssWaveCollider.preciseWaveImages[json];null!=pWaveImages&&pWaveImages.containsRange(channelData.sampleRange.start,channelData.sampleRange.end)&&pWaveImages.spp==channelData.uiSpp?null==pWaveImages||pWaveImages.isLoading||this._drawPreciseWave(pWaveImages,channelData):waveImages.getPreciseWaveImage(channelData.sampleRange,Math.round(channelData.endX-channelData.startX),stjs.bind(this,function(img){this._drawPreciseWave(img,channelData)}))}}}},{waveform:"Waveform",WAVE_IMAGES:{name:"Map",arguments:[null,"WaveImages"]},preciseWaveImages:{name:"Map",arguments:[null,"WaveData"]},waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var EmptyWaveCollider=function(){throw CssWaveCollider.call(this,null,null,null,null),new RuntimeException("EmptyWaveCollider TODO")};EmptyWaveCollider=stjs.extend(EmptyWaveCollider,CssWaveCollider,[],null,{waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var SubsSummaryComponent=function(props){React.Component.call(this,props),this.state={isSubsActive:!1,className:props.className}};SubsSummaryComponent=stjs.extend(SubsSummaryComponent,React.Component,[],function(constructor,prototype){constructor.CAPTION_SCROLL_LOCK="caption_scroll-lock",constructor.CAPTION_SWITCH_BTN="caption_switch-btn",constructor.CAPTION_TIMEVALUES="caption_timevalues",constructor.CAPTION_OPEN="caption_open",prototype.render=function(){var div=this._generateTemplate();return div},prototype._generateTemplate=function(){var elements=[],_attrs=FluentMap.withClassName("caption__title").onClick(this.props.onClick).build(),_rows=this.props.subtitles.rows,_titleCSSClass=ViewConsts.VG_INFO;this.props.matchFound&&(_titleCSSClass=ViewConsts.TEXT_YELLOW);var _durationMsec=stjs.trunc(1e3*this.props.timeline.getDurationSec()),_startMsec=this.props.timeline.getMillisByTv(_rows[0].startTv),_endMsec=this.props.timeline.getMillisByTv(_rows[_rows.length-1].endTv),title=React.DOM.span(ReactViewUtils.className(_titleCSSClass),this.props.subtitles.title),timeValues=this._timeValues(_startMsec,_endMsec,_durationMsec);elements.push(this._switchBtn()),elements.push(this._scrollLock()),elements.push(React.DOM.div(_attrs,React.DOM.span(FluentMap.withClassName(SubsSummaryComponent.CAPTION_OPEN).build()),title,timeValues)),elements.push(this._shift(_startMsec,_endMsec));var div=React.DOM.div(ReactViewUtils.className(this.state.className),elements);return div},prototype._scrollLock=function(){var vgIconLock,attrs=FluentMap.withClassName(SubsSummaryComponent.CAPTION_SCROLL_LOCK).onClick(this.props.onLock);return this.props.scrollLocked?(vgIconLock=ViewConsts.VG_ICON_LOCK,attrs.addClass(ViewConsts.ACTIVE)):vgIconLock=ViewConsts.VG_ICON_UNLOCK,React.DOM.div(attrs.build(),React.DOM.span(ReactViewUtils.className(vgIconLock)))},prototype._shift=function(_startMsec,_endMsec){var shiftProps={};return shiftProps.startMsec=_startMsec,shiftProps.endMsec=_endMsec,shiftProps.shiftCaptionsRx=this.props.shiftCaptionsRx,React.createElement(ShiftTimecodesView,shiftProps)},prototype._timeValues=function(_startMsec,_endMsec,_durationMsec){var startMsec=Utils.hhmmss(_startMsec),endMsec=Utils.hhmmss(_endMsec),_attrs=ReactViewUtils.className(SubsSummaryComponent.CAPTION_TIMEVALUES),_startMsecAttrs=null,_endMsecAttrs=null;return _startMsec>_durationMsec&&(_startMsecAttrs=ReactViewUtils.className(ViewConsts.VG_CAPTION_HIGHLIGHT)),_endMsec>_durationMsec&&(_endMsecAttrs=ReactViewUtils.className(ViewConsts.VG_CAPTION_HIGHLIGHT)),React.DOM.span(_attrs,React.DOM.span(_startMsecAttrs,startMsec),React.DOM.span(ReactViewUtils.className(ViewConsts.TIME_ARROW)),React.DOM.span(_endMsecAttrs,endMsec))},prototype._switchBtn=function(){var btnText=ViewConsts.OFF,btnProps=FluentMap.withClassName(SubsSummaryComponent.CAPTION_SWITCH_BTN).onClick(this.props.switchBtnClick);return this.props.isSubsActive&&(btnText=ViewConsts.ON,btnProps.addClass(ViewConsts.ACTIVE)),React.DOM.div(btnProps.build(),btnText)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ZoomRangeComponent=function(props){React.Component.call(this,props)};ZoomRangeComponent=stjs.extend(ZoomRangeComponent,React.Component,[],function(constructor,prototype){prototype.render=function(){var rangeProps={};rangeProps.points=this.props.points,rangeProps.min=this.props.min,rangeProps.max=this.props.max,rangeProps.value=this.props.value,rangeProps.onChange=this.props.onChange;var rangeInput=React.createElement(RangeInputComponent,rangeProps);return React.DOM.div(ReactViewUtils.className(ViewConsts.VG_ZOOM),React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ZOOM+"--min")),rangeInput,React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ZOOM+"--max")))}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterStatusComponent=function(props){React.Component.call(this,props)};ContexterStatusComponent=stjs.extend(ContexterStatusComponent,React.Component,[],function(constructor,prototype){constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.progress=0,prototype.detect=null,prototype.stop=null,prototype.redo=null},{detect:"Callback0",stop:"Callback0",redo:{name:"Callback1",arguments:["DOMEvent"]}},{}),prototype.render=function(){var progress,btnProps={};btnProps.className=ViewConsts.VG_BTN_PRIMARY;var button=null;return this.props.progress==-1?(progress=React.DOM.span({},"press to detect"),btnProps.onClick=stjs.bind(this,function(e){return this.props.detect()}),btnProps.label="detect",button=React.createElement(VGButton,btnProps)):this.props.progress<100?(progress=React.DOM.span({},React.DOM.span({className:ViewConsts.VG_LOADING_SPINNER}),this.props.progress+"%"),btnProps.onClick=stjs.bind(this,function(e){return this.props.stop()}),btnProps.label="stop",button=React.createElement(VGButton,btnProps)):progress=React.DOM.span({},"detected"),React.DOM.div({className:ContexterConsts.VG_CONTEXTER_STATUSBAR},progress,button)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var TagSuggestInputView=function(pluginClass,logEventView,tagInputEl,hintsView,log){SuggestInputView.call(this,tagInputEl,hintsView,log),this.pluginClass=pluginClass,this.logEventView=logEventView,this.hintsView=hintsView};TagSuggestInputView=stjs.extend(TagSuggestInputView,SuggestInputView,[],function(constructor,prototype){prototype.pluginClass=null,prototype.logEventView=null,prototype.hintsView=null,prototype.itemFromHint=null,prototype.findIndexAndRemoveTag=function(tags){var index=VGView.findIndex(this.getTagsListElement().children,this.el);index!=-1&&this.removeTag(tags,index)},prototype.getTagsListElement=function(){return this.el.parentElement.querySelector(LogEventView.selectorTagsContainer)},prototype.removeTag=function(tags,index){index<tags.length&&tags.splice(index,1)},prototype.onTagSelected=function(logEvent,logEventTag,index){logEvent.tags.splice(index,0,logEventTag),this.logEventView.renderTags(this.pluginClass,logEvent)},prototype.showHint=function(tags,value){tags.length>0?this.hintsView.renderTags(tags,value):this.hintsView.close()},prototype.closeHint=function(){this.hintsView.close()}},{logEventView:"LogEventView",hintsView:"HintsView",itemFromHint:"Rx.Disposable",itemSelectedRx:{name:"Rx.Subject",arguments:[null]},replaceSelectedRx:{name:"Rx.Observable",arguments:[null]},emptySelectRx:{name:"Rx.Observable",arguments:[null]},itemSelectedFromHintRx:{name:"Rx.Observable",arguments:[null]},hintsView:"HintsView",onInputRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onFocusRx:{name:"Rx.Observable",arguments:["Input"]},onBlurRx:{name:"Rx.Observable",arguments:["Input"]},onKeyDownRx:{name:"Rx.Observable",arguments:["DOMEvent"]},onKeyUpRx:{name:"Rx.Observable",arguments:["DOMEvent"]},replaceKeyDown:{name:"Rx.Observable",arguments:["DOMEvent"]},onUserTypingRx:{name:"Rx.Observable",arguments:[null]},inputValueEnteredRx:{name:"Rx.Subject",arguments:[null]},el:"Input",log:"Log"},{});var VideoLogView=function(player,containerEl){VGGenericView.call(this),this.player=player,this.container=containerEl,this.pluginClass="rrtheme_videolog",this.enabledTCFormats=[TimeCodeView.FORMAT_TAPE,TimeCodeView.FORMAT_STANDARD,TimeCodeView.FORMAT_FRAME],this.defaultTimecodeFormat=TimeCodeView.FORMAT_TAPE,this.trackSwitchedRx=new Rx.ReplaySubject,this.trackViewsByTrackId={},this.icon=window.document.createElement("div"),this.icon.className="vg_icon--plugin "+this.pluginClass+"__icon";var context={pluginClass:this.pluginClass,header:{title:"VideoLog",name:"Event Log"},timeformat:this.defaultTimecodeFormat,width:Helpers.playerWidthPercents(player)};this.el=window.document.createElement("div"),this.el.className=this.el.className+" "+this.pluginClass,this.el.innerHTML=VGTemplates.rrVideologPlugin(context),this.container.appendChild(this.el),this.modalConfirmDialogEl=Utils.querySelectorNotNull(this.el,".rrtheme-modal__confirm"),this.modalCleanEventsConfirmDialogEl=Utils.querySelectorNotNull(this.el,".rrtheme-modal__confirm.clean-events-confirm"),this.errorView=new ErrorPopupView(this.el.querySelector(ErrorPopupView.selector),player.getLog()),this.trackButtons(),this.tagHintsView(),this.trackDropDown(),this.timeformatDropDown(),this.trackManagerDialog(),this.rxDropDowns()};VideoLogView=stjs.extend(VideoLogView,VGGenericView,[],function(constructor,prototype){constructor.selector=".app-VideoLogView",prototype.player=null,prototype.defaultTimecodeFormat=null,prototype.enabledTCFormats=null,prototype.trackSwitchedRx=null,prototype.trackViewsByTrackId=null,prototype.trackButtonsView=null,prototype.trackDropDownView=null,prototype.timeformatDropDownView=null,prototype.currentTrackView=null,prototype.trackManagerView=null,prototype.icon=null,prototype.pluginClass=null,prototype.dropDownElementsRx=null,prototype.createTrackEl=null,prototype.modalConfirmDialogEl=null,prototype.modalCleanEventsConfirmDialogEl=null,prototype.dropDownElements=null,prototype.hintsView=null,prototype.errorView=null,prototype.forEachTrackView=function(applyToTrackView){for(var trackId in this.trackViewsByTrackId)applyToTrackView(this.trackViewsByTrackId[trackId])},prototype.trackButtons=function(){this.trackButtonsView=new TrackButtonsView(this.el.querySelector(TrackButtonsView.selector))},prototype.tagHintsView=function(){this.hintsView=new HintsView(this.el.querySelector(HintsView.selector),this.player.getLog())},prototype.trackManagerDialog=function(){this.trackManagerView=new TrackManagerView(Utils.querySelectorNotNull(this.el,TrackManagerView.selector),this.player.getLog()),this.trackButtonsView.onNewTrackRx.subscribe(stjs.bind(this,function(e){this.trackManagerView.open()}))},prototype.timeformatDropDown=function(){var _timeformats=this.el.querySelector("."+this.pluginClass+"__timeformat-ddown"),items=this.enabledTCFormats.map(function(title,i,arr){return new DropDownItem(title,title)});this.timeformatDropDownView=new DropDownView(_timeformats,this,this.pluginClass+"-ddown",null,items);var timeformatSelected=this.el.querySelector("."+this.pluginClass+"__timeformat-selected"),timeformatSelectedValue=timeformatSelected.querySelector("."+this.pluginClass+"__timeformat-value");this.timeformatDropDownView.itemSelectedRx.subscribe(function(timeformat){timeformatSelectedValue.textContent=timeformat.title,timeformatSelected.classList.remove("active")})},prototype.trackDropDown=function(){var _tracks=this.el.querySelector("."+this.pluginClass+"__track-ddown");this.trackDropDownView=new DropDownView(_tracks,this,this.pluginClass+"-ddown",null,[]);var trackSelected=this.el.querySelector("."+this.pluginClass+"__track-selected"),trackSelectedValue=trackSelected.querySelector("."+this.pluginClass+"__track-value");
this.trackSwitchedRx.subscribe(stjs.bind(this,function(trackId){this.player.getLog().debug("trackSwitchedRx",trackId);var trackView=this.trackViewsByTrackId[trackId];this.showTrackView(trackView),trackSelectedValue.textContent=trackView.displayName})),this.trackDropDownView.itemSelectedRx.subscribe(stjs.bind(this,function(ddItem){this.player.getLog().debug("DDitemSelectedRx",ddItem.id),trackSelected.classList.remove("active")}))},prototype.rxDropDowns=function(){this.dropDownElements=this.el.getElementsByClassName(this.pluginClass+"__ddown"),this.dropDownElementsRx=Rx.Observable.fromEvent(this.dropDownElements,"click",stjs.bind(this,function(e){return e.target.classList.contains(this.pluginClass+"__ddown")?e.target:e.target.closest("."+this.pluginClass+"__ddown")})).filter(function(ddown){return Utils.toBoolean(ddown)}),this.dropDownElementsRx.subscribe(function(ddown){ddown.classList.toggle("active")})},prototype.showTrackView=function(curTV){null!=this.currentTrackView&&this.currentTrackView.hide(),this.currentTrackView=curTV,this.currentTrackView.show()},prototype.switchTrack=function(trackId){this.trackSwitchedRx.onNext(trackId)},prototype.addTrackView=function(trackView){this.trackViewsByTrackId[trackView.trackId]=trackView,this.el.querySelector(VideoLogView.selector).appendChild(trackView.getElement())},prototype.getCurrentTrackView=function(){return this.currentTrackView},prototype.getTrackView=function(trackId){return this.trackViewsByTrackId[trackId]},prototype.deleteTrackView=function(trackId){var trackView=this.trackViewsByTrackId[trackId];delete this.trackViewsByTrackId[trackId],trackView.getElement().parentElement.removeChild(trackView.getElement())}},{player:"VGPlayerPluginApi",enabledTCFormats:{name:"Array",arguments:[null]},trackSwitchedRx:{name:"Rx.ReplaySubject",arguments:[null]},trackViewsByTrackId:{name:"Map",arguments:[null,"TrackView"]},trackButtonsView:"TrackButtonsView",trackDropDownView:"DropDownView",timeformatDropDownView:"DropDownView",currentTrackView:"TrackView",trackManagerView:"TrackManagerView",icon:"Element",dropDownElementsRx:{name:"Rx.Observable",arguments:["Element"]},createTrackEl:"Element",modalConfirmDialogEl:"Element",modalCleanEventsConfirmDialogEl:"Element",dropDownElements:{name:"HTMLCollection",arguments:["Element"]},hintsView:"HintsView",errorView:"ErrorPopupView",el:"Element",container:"Element",children:{name:"Array",arguments:["CloseableView"]}},{});var SafeAreaDropDownVGView=function(view,player,container,parentView,className){VGThemeView.call(this,container,parentView,className,VGThemeView.magicContext(SafeAreaDropDownVGView.iconClass,"Safe Areas",SafeAreaDropDownVGView.dropDownContainerClass)),this.safeAreaView=view,this.player=player,this.renderDropdown(this.el.querySelector("."+SafeAreaDropDownVGView.dropDownContainerClass));var deactivateButton=window.document.createElement("span");deactivateButton.className="vg_safe-areas__deactivate",deactivateButton.innerHTML="<span>Deactivate</span>";var ddownList=window.document.querySelector(".vg_ddown_hover__content.vg_background.vg_primary");ddownList.appendChild(deactivateButton),Rx.Observable.fromEvent(deactivateButton,"click").subscribe(stjs.bind(this,function(e){this.setVisible(this.visible),this.visible?deactivateButton.classList.add("active"):deactivateButton.classList.remove("active"),this.visible=!this.visible}));var iconElements=this.el.querySelectorAll(".vg_addon__header .vg_headerText, .vg_addon__header .vg_addon__icon"),iconClick=Rx.Observable.fromEvent(iconElements,"click");iconClick.subscribe(stjs.bind(this,function(x){player.iconClick.onNext(this.el)}))};SafeAreaDropDownVGView=stjs.extend(SafeAreaDropDownVGView,VGThemeView,[VGControl],function(constructor,prototype){constructor.dropDownContainerClass="vg_safe-areas",constructor.iconClass="vg_icon-map",prototype.safeAreaView=null,prototype.player=null,prototype.visible=!0,prototype.renderDropdown=function(dropDownContainer){var items=[new ColorBulletDropDownItem("4-3","4:3","grey"),new ColorBulletDropDownItem("caption","Caption","grey"),new ColorBulletDropDownItem("action","Action","grey"),new RenderedDropDownItem("separator","",'<div class="vg_ddown_hover__title vg_default" style="width: 100%"></div>',this.player.getLog()),new ColorBulletDropDownItem("16-9","16:9","white")],safeAreaDDown=new DropDownView(dropDownContainer,this,"vg_ddown_hover","",items);SafeAreaDropDownRRControl.initDropDownEvents(safeAreaDDown,this.safeAreaView)},prototype.setVisible=function(visible){if(visible){var icon=window.document.querySelector("."+SafeAreaDropDownVGView.iconClass);icon.classList.remove(SafeAreaDropDownVGView.iconClass),icon.classList.add("vg_icon-map-stroke"),this.safeAreaView.getElement().classList.add("vg_invisible")}else{var icon=window.document.querySelector(".vg_icon-map-stroke");icon.classList.remove("vg_icon-map-stroke"),icon.classList.add(SafeAreaDropDownVGView.iconClass),this.safeAreaView.getElement().classList.remove("vg_invisible")}},prototype.getControlEl=function(controlPanel){return this.el}},{safeAreaView:"SafeAreaView",player:"VGThemePlayer",icon:"Element",list:"Element",tracksInfo:"Element",header:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var VideoControl=function(player){VGPlugins.call(this,player),this.view=new VideoControlView(player,player.getView().controlsPanelView.getControlsContainer(),player.getView(),null),this.setEventSubscriptions()};VideoControl=stjs.extend(VideoControl,VGPlugins,[VGControl],function(constructor,prototype){prototype.getControlEl=function(controlPanel){return this.view.el},prototype.setEventSubscriptions=function(){var view=this.view;view.hdButtonRX.subscribe(stjs.bind(this,function(hd){hd?this.player.setVideoQuality(PlayerImpl.FULL_RES):this.player.setVideoQuality(PlayerImpl.LOW_RES)})),view.littlePlayButtonClick.subscribe(stjs.bind(this,function(x){this.player.togglePlay()}))}},{player:"PlayerImpl",view:"VGView"},{});var CropControl=function(player){VGPlugins.call(this,player),this.autoDisposables=new Rx.CompositeDisposable;new VGCropPluginView;VGCropPlugin.vgEnableCropPlugin(player,stjs.bind(this,function(cropView,vgCropPlugin){this.vgCPlugin=vgCropPlugin,this.captureDialog=window.document.createElement("div"),this.captureDialog.className="vg-image-capture",this.captureDialog.innerHTML=VGTemplates.imageCaptureTemplate();var embedContainer=player.getView().playerContainer.parentElement;embedContainer.appendChild(this.captureDialog);var input=window.document.querySelector(".vg-image-capture_input");this.dialogBg=window.document.createElement("div"),this.dialogBg.className="vg-image-capture_background",embedContainer.appendChild(this.dialogBg);var dialogBgClick=Rx.Observable.fromEvent(this.dialogBg,"click"),cropContainerEl=window.document.body.querySelector(".vg-image-capture_image-section");cropView.appendTo(cropContainerEl);var closeButton=window.document.querySelector(".vg-image-capture_close"),cancelButton=window.document.querySelector(".vg-image-capture_cancel-button"),saveButton=window.document.querySelector(".vg-image-capture_save-button");input.addEventListener("keypress",stjs.bind(this,function(e){13==e.keyCode&&(this.saveCapture(player,vgCropPlugin,input,saveButton),saveButton.click())}));var closeButtonClick=Rx.Observable.fromEvent(closeButton,"click"),cancelButtonClick=Rx.Observable.fromEvent(cancelButton,"click"),resize=Rx.Observable.fromEvent(window,"resize").subscribe(stjs.bind(this,function(e){this.cropFrameSize(cropView,vgCropPlugin,cropContainerEl)})),controlsPanelView=player.getView().controlsPanelView,deactivateEvents=Rx.Observable.merge(dialogBgClick,cancelButtonClick,closeButtonClick).subscribe(stjs.bind(this,function(e){player.activeAddon=controlsPanelView.el.querySelector(".vg_addonview.active"),player.deactivateAddon(),this.dialogBg.classList.add("vg-image-capture_hidden"),this.captureDialog.remove(),setTimeout(stjs.bind(this,function(){this.player.getView().unfreezeVideo(),this.dialogBg.remove()}),1e3)})),saveCaptureEvent=Rx.Observable.fromEvent(saveButton,"click").subscribe(stjs.bind(this,function(domEvent){this.saveCapture(player,vgCropPlugin,input,saveButton)}));this.autoDisposables.add(deactivateEvents),this.autoDisposables.add(saveCaptureEvent),this.autoDisposables.add(resize),this.cropFrameSize(cropView,vgCropPlugin,cropContainerEl)}))};CropControl=stjs.extend(CropControl,VGPlugins,[VGControl],function(constructor,prototype){prototype.activeAddon=null,prototype.dialogBg=null,prototype.captureDialog=null,prototype.autoDisposables=null,prototype.vgCPlugin=null,prototype.cropFrameSize=function(cropView,vgCropPlugin,cropContainerEl){var h=stjs.trunc(cropContainerEl.offsetWidth/cropView.frameImage.width)*cropView.frameImage.height;if(h>42){var imageSection=cropView.container;imageSection.style.height=.6*this.captureDialog.clientHeight+"px";var imageRect=vgCropPlugin.imageEl.getBoundingClientRect();imageSection.style.width=imageRect.width+"px"}},prototype.saveCapture=function(player,vgCropPlugin,input,saveButton){var imageUrl=vgCropPlugin.getCroppedCanvas().toDataURL("image/png");saveButton.setAttribute("href",imageUrl);var inputValue=input.value;""==inputValue?saveButton.setAttribute("download",player.getCurrentTapeTimecode()+".png"):saveButton.setAttribute("download",inputValue+"-"+player.getCurrentTapeTimecode()+".png")},prototype.close=function(){this.autoDisposables.dispose(),null!=this.vgCPlugin&&this.vgCPlugin.close()},prototype.getControlEl=function(controlPanel){return null}},{activeAddon:"Element",dialogBg:"Element",captureDialog:"Element",autoDisposables:"Rx.CompositeDisposable",vgCPlugin:"VGCropPlugin",player:"PlayerImpl",view:"VGView"},{});var ExternalTheme=function(){};ExternalTheme=stjs.extend(ExternalTheme,null,[],function(constructor,prototype){constructor.enableAddMediaDialog=function(player,onDialogRequested){var control=new AddMediaControl(player,onDialogRequested);return player.getView().controlsPanelView.enableControl(control),control},constructor.enableSubtitleSelectDialog=function(player,onDialogRequested){var subtitlesToggleControl=new SubtitlesToggleControl(player,onDialogRequested);return player.getView().controlsPanelView.enableControl(subtitlesToggleControl),subtitlesToggleControl},constructor.enableCropPlugin=function(player,onCropRequested){VGCropPlugin.rrEnableCropPlugin(player,onCropRequested)},constructor.enableEDLExportButton=function(player,pluginCalled){var div=new(stjs.extend(function(){},null,[VGControl],function(constructor,prototype){prototype.getControlEl=function(controlPanel){var el=React.createElement(VGControlComponent,{id:"edl-export",onClick:function(domEvent){pluginCalled()}}),span=window.document.createElement("span");return ReactDOM.render(el,span),span}},{},{}));player.getView().controlsPanelView.enableControl(div)}},{},{});var TimeControlsView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this.render(VG["templates/player/timecontrols.html"]({}))};TimeControlsView=stjs.extend(TimeControlsView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.timecodeInputsInit=function(onTimeInput){var standartEl=this.el.querySelector(".vg_timecode.vg_timecode_standard input"),tapeEl=this.el.querySelector(".vg_timecode.vg_timecode_tape input"),frameEl=this.el.querySelector(".vg_timecode.vg_timecode_frame input"),timeline=this.player.getTimeline(),timeRx=this.player.getTimelineRx(),standardInput=new StandardTimecodeInput(standartEl,timeline,timeRx,onTimeInput),tapeInput=new TapeTimecodeInput(tapeEl,timeline,timeRx,onTimeInput),frameInput=new FrameTimecodeInput(frameEl,timeline,timeRx,onTimeInput),inputs=this.el.querySelectorAll("input");Rx.Observable.fromEvent(inputs,"focus").subscribe(stjs.bind(this,function(e){return this.player.pause()}));var onTimeUpdate=stjs.bind(this,function(t){this.player.isChangingVideoSrc()||(standardInput.update(t),tapeInput.update(t),frameInput.update(t))});this.player.getTimeUpdateRx().subscribe(onTimeUpdate),onTimeUpdate(this.player.getTimeSample())}},{player:"SkinnedPlayer",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var TimeControlsBoxView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this.render(VG["templates/timecontrolsbox.html"]({})),this.el.classList.add("vg_centerX"),this.setTimecodeInputs(),this.setEventRx()};TimeControlsBoxView=stjs.extend(TimeControlsBoxView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.eventsSubscription=null,prototype.onExitFullScreenMode=null,prototype.setTimecodeInputs=function(){var self=this,timecodeInputEls=self.el.querySelectorAll("input.vg_timecode__value");Rx.Observable.fromEvent(timecodeInputEls,"focus").subscribe(stjs.bind(this,function(e){return this.player.pause()}));var standard=self.el.querySelector("input.vg_standard_time"),tape=self.el.querySelector("input.vg_ndftc_time"),frame=self.el.querySelector("input.vg_frame_number"),onTimeInput=stjs.bind(this,function(ts){var playerView=this.player.getView(),fn=ts.frame;if(fn!=this.player.getCurrentFrame()&&!this.player.isPlaying()){var _fn=this.player.getTimeline().boundsFn(fn);playerView.scrubbing=!0,this.player.pause(),playerView.seekFrameAndCheckRange(_fn),setTimeout(function(){playerView.seekFrameAndCheckRange(_fn),playerView.scrubbing=!1},100)}}),timeline=this.player.getTimeline(),timeRx=this.player.getTimelineRx(),frameInput=new FrameTimecodeInput(frame,timeline,timeRx,onTimeInput),standardInput=new StandardTimecodeInput(standard,timeline,timeRx,onTimeInput),tapeInput=new TapeTimecodeInput(tape,timeline,timeRx,onTimeInput);this.player.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){this.player.isChangingVideoSrc()||(standardInput.update(t),tapeInput.update(t),frameInput.update(t))}))},prototype.setEventRx=function(){var self=this,click=Rx.Observable.fromEvent(self.el,"click"),mouseup=Rx.Observable.fromEvent(window.document,"mouseup"),mousemove=Rx.Observable.fromEvent(window.document,"mousemove"),mousedown=Rx.Observable.fromEvent(self.el,"mousedown").filter(function(e){return"INPUT"!=e.target.nodeName});click.subscribe(function(e){e.stopPropagation()});var dimensions=self.el.getBoundingClientRect(),mousedrag=mousedown.flatMap(function(md){var bcr=self.container.getBoundingClientRect(),maxLeft=bcr.width-dimensions.width,maxTop=bcr.height-dimensions.height,startX=VGView.offsetX(md.clientX+bcr.left,self.el),startY=VGView.offsetY(md.clientY+bcr.top,self.el);return mousemove.map(function(mm){mm.preventDefault();var deltaX=mm.clientX-startX,deltaY=mm.clientY-startY,top=Math.min(Math.max(deltaY,0),maxTop),left=Math.min(Math.max(deltaX,0),maxLeft);return new Position(left,top)}).takeUntil(mouseup)});this.eventsSubscription=mousedrag.subscribe(function(pos){self.el.classList.remove("vg_centerX"),self.el.style.top=pos.top+"px",self.el.style.left=pos.left+"px",self.el.style.transform="none"}),this.onExitFullScreenMode=stjs.bind(this,function(b){if(!b){var timeControlsBox=this.container.querySelector(".vg_time_controls_box");timeControlsBox.style.top="50px",timeControlsBox.style.left="50%",timeControlsBox.style.transform="translateX(-50%)"}}),this.player.addEventListener("fullscreen",this.onExitFullScreenMode)},prototype.close=function(){CloseableView.prototype.close.call(this),this.eventsSubscription.dispose(),this.player.removeEventListener("fullscreen",this.onExitFullScreenMode)}},{player:"SkinnedPlayerImpl",eventsSubscription:"Rx.Disposable",onExitFullScreenMode:"Callback1",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var StepsView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this._parentView=player.getView()};StepsView=stjs.extend(StepsView,VGView,[VGControl],function(constructor,prototype){prototype.player=null,prototype._parentView=null,prototype.menuComponent=null,prototype.getControlEl=function(controlPanel){var stepEl=VGTemplates.elFromHTML('<div id="vg_step-interval" class="vg_react-container"></div>',this.player.container.ownerDocument),menuProps={};menuProps.icon="vg_icon-bars";var menuEl=React.createElement(MenuControlComponent,menuProps);this.menuComponent=ReactDOM.render(menuEl,stepEl);var ddownProps=new SimpleDropDown("Step Interval","vg_ddown",[this.item(1,!0),this.item(5,!1),this.item(10,!1),this.item(25,!1),this.item(50,!1)]);return this.menuComponent.updateDropDown(ddownProps),stepEl},prototype.item=function(interval,selected){var id=""+interval;return new DropDownMenuItem(id,id,selected,stjs.bind(this,function(e){return interval==this._parentView.stepInterval?void(this._parentView.stepInterval=1):(this._parentView.stepInterval=interval,void this.menuComponent.setActiveItem(id))}))}},{player:"SkinnedPlayerImpl",_parentView:"SkinnedPlayerView",menuComponent:"MenuControlComponent",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SubtitlesMenuControl=function(player){this.player=player,this.captionsView=new CaptionsView(player,player.getView().getCaptionsContainer(),null),player.getTimeUpdateRx().subscribe(stjs.bind(this,function(timeValues){this.captionsView.drawCaps(timeValues.tv,null)}))};SubtitlesMenuControl=stjs.extend(SubtitlesMenuControl,null,[VGControl],function(constructor,prototype){prototype.player=null,prototype.items=null,prototype.menuComponent=null,prototype.captionsView=null,prototype.getControlEl=function(controlPanel){var subtitlesEl=VGTemplates.elFromHTML('<div id="vg_subtitles" class="vg_react-container"></div>',this.player.container.ownerDocument),menuProps=new RadioButtonMenuComponent.HoverMenuProps("Subtitles","vg_ddown_hover","vg_icon-subs","vg_icon-no_subs"),menuEl=React.createElement(RadioButtonMenuComponent,UIUtils.toPlainObject(menuProps));return this.menuComponent=ReactDOM.render(menuEl,subtitlesEl),this.items={},this.player.getCaptionsList().forEach(stjs.bind(this,function(subtitles,idx,arr){return this.items[subtitles.title]=subtitles.title})),this.menuComponent.updateItems(this.items),this.player.getCaptionListChangeRx().subscribe(stjs.bind(this,function(el){this.items[el.title]=el.title,this.menuComponent.updateItems(this.items)})),this.menuComponent.getIconClickRx().subscribe(stjs.bind(this,function(mute){mute?this.hideCaptions():this.captionsView.showCaptions(this.player.getCurrentTimeValue())})),this.menuComponent.getSelectedItemRx().subscribe(stjs.bind(this,function(title){return this.selectCaptions(title)})),subtitlesEl},prototype.selectCaptions=function(title){var sub=Utils.find(this.player.getCaptionsList(),function(subtitles){return subtitles.title.equals(title)});null!=sub?this.captionsView.setCaptions(sub,this.player.getCurrentTimeValue(),null):this.hideCaptions()},prototype.hideCaptions=function(){this.captionsView.hideCaptions(this.player.getCurrentTimeValue())}},{player:"SkinnedPlayerImpl",items:{name:"Map",arguments:[null,null]},menuComponent:"RadioButtonMenuComponent",captionsView:"CaptionsView"},{});var VideoLog=function(options){BasePlugin.call(this,VideoLog.PLUGIN_ID),this.options=options,this.deleteTrackRx=new Rx.Subject,this.selectTrackRx=new Rx.Subject,this.importTrackRx=new Rx.Subject,this.deleteEventRx=new Rx.Subject,this.selectEventRx=new Rx.Subject};VideoLog=stjs.extend(VideoLog,BasePlugin,[],function(constructor,prototype){constructor.PLUGIN_ID="videolog",constructor.PLUGIN_ICON="vg_icon-flag",prototype.storage=null,prototype.proxyId=null,prototype.view=null,prototype.currentTrack=null,prototype.importHandler=null,prototype.filmstripDrawer=null,prototype.deleteTrackRx=null,prototype.selectTrackRx=null,prototype.importTrackRx=null,prototype.deleteEventRx=null,prototype.selectEventRx=null,prototype.log=null,prototype.options=null,prototype.init=function(onReady){this.log=this.pluginApi.getLog(),VideoLogOptions.RAM_STORAGE.equals(this.options.storage)?this.storage=new RAMVideologAsyncStorage(this.pluginApi.getLog()):this.storage=new RestVideoLogAsyncStorage(this.pluginApi.getHttp(),this.options.storageUrl,this.options.onStorageReady,this.pluginApi.getLog()),this.initRx(),this.pluginApi.getFilmStripDrawer(stjs.bind(this,function(filmstripDrawer){this.filmstripDrawer=filmstripDrawer,this.pluginApi.addEventListener(PlayerEvents.TIMEUPDATE_EVENT,stjs.bind(this,function(ts){return this.updateTime(ts)})),onReady()}))},prototype.updateTime=function(ts){this.view.getEvents().forEach(stjs.bind(this,function(event,idx,arr){event.startTv<=ts.tv&&event.endTv>=ts.tv&&this.view.setCurrentEvent(stjs.trunc(stjs.trunc(idx)))}))},prototype.loadProxy=function(proxyId){this.proxyId=proxyId,this.storage.tracksOfProxy(proxyId,stjs.bind(this,function(tracks){this.view.setTracks(tracks),null!=tracks&&null!=tracks[0]&&this.storage.trackEvents(tracks[0].id,stjs.bind(this,function(events){return this.view.setEvents(events)}),stjs.bind(this.log,"error"))}))},prototype.initRx=function(){this.deleteTrackRx.subscribe(stjs.bind(this,function(track){this.log.debug("DELETE TRACK "+track.id),this.storage.deleteTrack(track)})),this.selectTrackRx.subscribe(stjs.bind(this,function(track){this.log.debug("SELECT TRACK "+track.id),this.currentTrack=track.id,this.storage.trackEvents(this.currentTrack,stjs.bind(this,function(events){this.log.debug("Loaded "+events.length+" events for "+track.displayName),this.view.setEvents(events)}),stjs.bind(this.log,"error"))})),this.importTrackRx.subscribe(stjs.bind(this,function(b){this.log.debug("IMPORT TRACK"),null!=this.importHandler&&this.importHandler(stjs.bind(this,function(tracks){tracks.forEach(stjs.bind(this,function(data){this.importTrack(data,this.proxyId)})),this.log.debug("Imported tracks: "+tracks.map(function(t,i,a){return t.track.displayName}).join(", "))}))})),this.deleteEventRx.subscribe(stjs.bind(this,function(event){this.log.debug("DELETE EVENT "+event.id),this.storage.deleteEvent(event.id)})),this.selectEventRx.subscribe(stjs.bind(this,function(event){this.log.debug("SELECT EVENT "+event.id),this.pluginApi.seekSec(event.startTv/event.timescale)})),Rx.Observable.merge(this.storage.getEventChangedRx(),this.storage.getEventDeletedRx()).bufferWithTime(500).subscribe(stjs.bind(this,function(events){events.map(function(e,i,a){return e.getTrackId()}).indexOf(this.currentTrack)!=-1&&(this.log.debug(events),this.storage.trackEvents(this.currentTrack,stjs.bind(this,function(es){return this.view.setEvents(es)}),stjs.bind(this.log,"error")))})),Rx.Observable.merge(this.storage.getTrackChangedRx(),this.storage.getTrackDeletedRx()).subscribe(stjs.bind(this,function(track){this.log.debug("RX updating tracks from storage"),this.log.debug(track),this.storage.tracksOfProxy(this.proxyId,stjs.bind(this,function(tracks){null!=this.view&&this.view.setTracks(tracks)}))}))},prototype.importTrack=function(data,proxyId){data.track.mediaId=proxyId,this.storage.saveTrack(data.track,stjs.bind(this,function(track){this.log.debug("Saved track "+track.id),data.events.forEach(stjs.bind(this,function(event){event.setTrackId(track.id),this.storage.saveEvent(event,function(e){},stjs.bind(this.log,"error"))}))}),stjs.bind(this.log,"error"))},prototype.setImportHandler=function(handler){this.importHandler=handler},prototype.renderInto=function(container,containerWidth,onDone){var props=new VideoLogComponent.VideoLogProps(this.pluginApi.getTimeline(),this.filmstripDrawer,this.selectTrackRx,this.deleteTrackRx,this.importTrackRx,this.selectEventRx,this.deleteEventRx,this.pluginApi.getLog()),component=React.createElement(VideoLogComponent,UIUtils.toPlainObject(props));this.view=ReactDOM.render(component,container),this.storage.tracksOfProxy(this.proxyId,stjs.bind(this,function(tracks){this.view.setTracks(tracks),onDone()}))}},{storage:"IVideologAsyncStorage",view:"VideoLogComponent",importHandler:{name:"Callback1",arguments:[{name:"Callback1",arguments:[{name:"Array",arguments:["TrackData"]}]}]},filmstripDrawer:"FilmStripDrawer",deleteTrackRx:{name:"Rx.Subject",arguments:["Track"]},selectTrackRx:{name:"Rx.Subject",arguments:["Track"]},importTrackRx:{name:"Rx.Subject",arguments:[null]},deleteEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},selectEventRx:{name:"Rx.Subject",arguments:["LogEvent"]},log:"Log",options:"VideoLogOptions",pluginApi:"VGPlayerPluginApi"},{});var FancyCssWaveCollider=function(waveform,channelInfo,canvas,log){ExtendedCssWaveCollider.call(this,waveform,channelInfo,canvas,log),this.settings=waveform.settings};FancyCssWaveCollider=stjs.extend(FancyCssWaveCollider,ExtendedCssWaveCollider,[],function(constructor,prototype){prototype.settings=null,prototype.amplified=!1,prototype.setMaxAmplification=function(waveData){if(!this.amplified){var amplification=256/waveData.getMinMax8(0,waveData.data.length);this.setAmplification(amplification),this.amplified=!0}},prototype._drawWave=function(waveData,channelData){this.log.debug("FancyCssWaveCollider _drawWave"),this.setMaxAmplification(waveData);var dimensions=this.getDimensions();if(0!=dimensions.width&&0!=dimensions.height){var h=dimensions.height+1,startX=channelData.startX,endX=0!=channelData.endX?channelData.endX:dimensions.width,wctx=this.getContext();this.log.debug("FancyCssWaveCollider _drawWave start");var lingradTop=wctx.createLinearGradient(0,0,0,dimensions.height),lingradBottom=wctx.createLinearGradient(0,0,0,dimensions.height);this.settings.twoSides?(lingradTop.addColorStop(.25,"rgba(80,85,91,255)"),lingradTop.addColorStop(.5,"rgba(80,85,91,255)")):(lingradTop.addColorStop(.25,"rgba(80,85,91,255)"),lingradTop.addColorStop(.5,"rgba(80,85,91,255)")),lingradBottom.addColorStop(.5,"rgba(50,50,50,255)"),lingradBottom.addColorStop(1,"rgba(50,50,50,255)");var zoom=channelData.uiSpp/waveData.spp,dataStartSample=(parseInt(dimensions.height/2),stjs.trunc(channelData.sampleRange.start/waveData.spp));wctx.shadowColor="transparent",wctx.clearRect(startX,0,endX-startX,dimensions.height+2),wctx.lineWidth=1,wctx.lineJoin="bevel",wctx.fillStyle=this.waveColor;var padding=this.settings.fancySettings.padding,paddingBottom=this.settings.fancySettings.paddingBottom;this.settings.twoSides&&(h=stjs.trunc(h/2));var d=(h-padding-paddingBottom)/256*this.amplify,x=0;if(this.settings.twoSides){for(wctx.beginPath(),wctx.moveTo(startX,h+paddingBottom),wctx.strokeStyle=wctx.fillStyle,x=0;x<endX-startX;x++){var startidx=Math.round(x*zoom+dataStartSample),endidx=Math.round((x+1)*zoom+dataStartSample),sampleIndex=channelData.sampleRange.start+Math.round(x*channelData.uiSpp),sampleValue=waveData.getMinMax8(stjs.trunc(startidx),stjs.trunc(endidx));sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(startX+x,Math.round(h+paddingBottom+sampleValue*d))}wctx.lineTo(x+startX,h+paddingBottom),wctx.closePath(),wctx.fillStyle=lingradBottom,wctx.fill(),wctx.stroke()}for(wctx.strokeStyle="rgb(70, 70, 70)",x=0,wctx.beginPath(),wctx.moveTo(startX,h-padding-1),x=0;x<endX-startX;x++){var startidx=Math.round(x*zoom+dataStartSample),endidx=Math.round((x+1)*zoom+dataStartSample),sampleIndex=channelData.sampleRange.start+Math.round(x*channelData.uiSpp),sampleValue=waveData.getMinMax8(stjs.trunc(startidx),stjs.trunc(endidx));sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(x+startX,Math.round(h-padding-sampleValue*d))}wctx.lineTo(x+startX,h-padding-1),wctx.closePath(),wctx.stroke(),wctx.fillStyle=null!=this.settings.fillColor?this.settings.fillColor:lingradTop,wctx.fill(),this.drawSelection(wctx,h),this.fades&&this.drawFades(wctx),this.ruler&&this.drawRuler(wctx),this.log.debug("FancyCssWaveCollider _drawWave end")}},prototype._drawPreciseWave=function(waveData,channelData){this.log.debug("FancyCssWaveCollider _drawPreciseWave");var dimensions=this.getDimensions();if(0!=dimensions.width&&0!=dimensions.height){var startX=channelData.startX,endX=0!=channelData.endX?channelData.endX:dimensions.width,wctx=this.getContext(),lingradTop=wctx.createLinearGradient(0,0,0,dimensions.height),lingradBottom=wctx.createLinearGradient(0,0,0,dimensions.height);this.settings.twoSides?(lingradTop.addColorStop(.25,"rgba(8,107,189,255)"),lingradTop.addColorStop(.5,"rgba(5,62,132,255)")):(lingradTop.addColorStop(.5,"rgba(8,107,189,255)"),lingradTop.addColorStop(1,"rgba(5,62,132,255)")),lingradBottom.addColorStop(.5,"rgba(1,79,107,255)"),lingradBottom.addColorStop(1,"rgba(1,22,62,255)");var h=(parseInt(dimensions.height/2),this.canvas.clientHeight+1),padding=this.settings.fancySettings.padding,paddingBottom=this.settings.fancySettings.paddingBottom;this.settings.twoSides&&(h=stjs.trunc(h/2));var d=(h-padding-paddingBottom)/32768*this.amplify*.75;wctx.shadowColor="transparent",wctx.clearRect(startX,0,endX-startX,dimensions.height),wctx.strokeStyle="rgba(0,0,0,0.9)",wctx.lineWidth=1,wctx.lineJoin="bevel",wctx.fillStyle=this.waveColor,wctx.beginPath();var sampleValue,sampleOff=waveData.getSampleOffset(channelData.sampleRange.start),minmax=[0,0];if(this.settings.twoSides){if(wctx.strokeStyle="rgb(29, 126, 209)",wctx.beginPath(),wctx.moveTo(startX,h+paddingBottom),this.uiSpp>=1)for(var x=0;x<endX-startX;x++){waveData.getMinMax16(x+sampleOff,minmax);var sampleIndex=this.sampleRange.start+Math.round(x*this.uiSpp);sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(startX+x,h+paddingBottom+sampleValue*d)}else for(var x=0;parseInt(stjs.trunc(x/waveData.spp))<endX-startX;x++){waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))+sampleOff,minmax);var sampleIndex=this.sampleRange.start+Math.round(x);sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),0==sampleValue&&(waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))+1+sampleOff,minmax),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),0==sampleValue&&(waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))-1+sampleOff,minmax),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]))),sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(startX+parseInt(stjs.trunc(x/waveData.spp)),h+paddingBottom+sampleValue*d)}wctx.lineTo(parseInt(endX),h+paddingBottom),wctx.closePath(),wctx.fillStyle=lingradBottom,wctx.fill(),wctx.stroke()}if(wctx.strokeStyle="rgb(29, 126, 209)",wctx.beginPath(),wctx.moveTo(startX,h-padding),this.uiSpp>=1)for(var x=0;x<dimensions.width;x++){waveData.getMinMax16(x+sampleOff,minmax);var sampleIndex=this.sampleRange.start+Math.round(x*this.uiSpp);sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(x+startX,h-padding-sampleValue*d)}else for(var x=0;parseInt(stjs.trunc(x/waveData.spp))<dimensions.width;x++){waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))+sampleOff,minmax);var sampleIndex=this.sampleRange.start+Math.round(x);sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),0==sampleValue&&(waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))+1+sampleOff,minmax),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]),0==sampleValue&&(waveData.getMinMax16(parseInt(stjs.trunc(x/waveData.spp))-1+sampleOff,minmax),sampleValue=CssWaveCollider.avg(minmax[0],minmax[1]))),sampleValue=CssWaveCollider._logLut[sampleValue],sampleValue=stjs.trunc(this.bezierFilter(sampleIndex,sampleValue)),wctx.lineTo(startX+parseInt(stjs.trunc(x/waveData.spp)),h-padding-sampleValue*d)}wctx.lineTo(parseInt(endX),h-padding),wctx.closePath(),wctx.fillStyle=lingradTop,wctx.fill(),wctx.stroke(),this.drawSelection(wctx,h),this.fades&&this.drawFades(wctx),this.ruler&&this.drawRuler(wctx)}}},{settings:"WaveformSettings",
waveform:"Waveform",WAVE_IMAGES:{name:"Map",arguments:[null,"WaveImages"]},preciseWaveImages:{name:"Map",arguments:[null,"WaveData"]},waveImages:"WaveImages",canvas:"Canvas",channel:"PlayerAudioTrack",preciseWaveImage:"WaveData",sampleRange:"Range",_fadein:"Curve",_fadeout:"Curve",http:"Http",log:"Log",_logLut:{name:"Array",arguments:[null]},_logLut16:{name:"Array",arguments:[null]},_powersOfTwo:{name:"Array",arguments:[null]}},{});var SubsItemComponent=function(props){React.Component.call(this,props),this.state={subtitles:props.subtitles,isExpanded:!1,matchFound:!1,scrollLocked:!1},this.activeRow=props.subtitles.rows[0];var lastTvRow=this._findClosest(props.timeline.getLastFrame(),props.subtitles.rows,this.activeRow);this.rowsInTimeline=props.subtitles.rows.slice(0,props.subtitles.rows.indexOf(lastTvRow)+1),this.notes=this.props.subtitles.rows.reduce(function(prev,curr,i,a){return prev+curr.notes},""),this.timeUpdate=props.timeUpdateRx,this.timeUpdate.subscribe(stjs.bind(this,function(timesample){this._onTimeUpdate(timesample)})),this.activeRowRx=new Rx.Subject,this.shiftCaptionsRx=new Rx.Subject,this.shiftCaptionsRx.subscribe(stjs.bind(this,function(value){this._shiftSubs(value)}))};SubsItemComponent=stjs.extend(SubsItemComponent,React.Component,[],function(constructor,prototype){constructor.TRACK="track",prototype.shiftCaptionsRx=null,constructor.CAPTION_ROWS="caption__rows",constructor.CAPTION_SUMMARY="caption__summary",constructor.CAPTIONS_LIST_ITEM="captions-list__item",constructor.CAPTION_ROW="caption__row",prototype.notes=null,prototype.timeUpdate=null,prototype.lastUpdateTv=0,prototype.rowsInTimeline=null,prototype.activeRow=null,prototype.activeRowRx=null,prototype._onTimeUpdate=function(timesample){var tv=timesample.tv;this.lastUpdateTv!=tv&&(this.lastUpdateTv=tv,this.props.isItemActive&&this._activeRowUpdate(timesample),this._trackUpdate(timesample.frame))},prototype._activeRowUpdate=function(timesample){var closest=this._findClosest(timesample.frame,this.rowsInTimeline,this.activeRow),startFrame=this.props.timeline.getFrameByTv(closest.startTv),endFrame=this.props.timeline.getFrameByTv(closest.endTv);startFrame<=timesample.frame&&timesample.frame<endFrame?(this.activeRow=closest,this.activeRowRx.onNext(closest)):this.activeRowRx.onNext(null),this.state.scrollLocked&&this._scrollRow(closest)},prototype._scrollRow=function(closest){if(this.props.rowsViewType==ViewConsts.LIST){var id="#row"+closest.startTv+closest.endTv,rows=this.refs[SubsItemComponent.CAPTION_ROWS],row=rows.querySelector(id);if(null!=row){var container=rows.offsetParent;container.scrollTop=row.offsetTop}}},prototype._trackUpdate=function(_frame){if(this.props.rowsViewType==ViewConsts.BLOCK){var track=this.refs[SubsItemComponent.TRACK],left=1*_frame/this.props.timeline.getFrameCount()*100;track.style.left=left+"%",this.state.scrollLocked&&this._scrollTrack()}},prototype._findClosest=function(tv,rows,initialRow){var startFrame=this.props.timeline.getFrameByTv(initialRow.startTv),endFrame=this.props.timeline.getFrameByTv(initialRow.endTv);if(null!=initialRow&&startFrame<=tv&&tv<endFrame)return initialRow;if(1==rows.length)return rows[0];var end=rows.length,middle=stjs.trunc(end/2);return initialRow=rows[middle],startFrame=this.props.timeline.getFrameByTv(initialRow.startTv),tv<startFrame?(initialRow=rows[middle-1],this._findClosest(tv,rows.slice(0,middle),initialRow)):this._findClosest(tv,rows.slice(middle,end),initialRow)},prototype._shiftSubs=function(value){var itemState=new SubsItemState;Captions.offsetCaptions(this.state.subtitles,this.props.timeline.getTvBySec(value/1e3),this.props.timeline),itemState.subtitles=this.state.subtitles,this.setState(itemState)},prototype._scrollTrack=function(){if(this.props.rowsViewType==ViewConsts.BLOCK&&this.state.isExpanded){var track=this.refs[SubsItemComponent.TRACK],rows=this.refs[SubsItemComponent.CAPTION_ROWS],container=rows.offsetParent,startScroll=track.offsetLeft-stjs.trunc(container.clientWidth/2);startScroll>=0&&(container.scrollLeft=startScroll)}},prototype.componentWillReceiveProps=function(nextProps){var _searchRegExp=new RegExp(nextProps.searchValue,"ig"),_subsItemState=new SubsItemState;_subsItemState.matchFound=nextProps.searchValue.length>0&&_searchRegExp.test(this.notes),this.setState(_subsItemState)},prototype._getRows=function(){return this.state.subtitles.rows.map(stjs.bind(this,function(row,aLong,rows){var rowProps={};return rowProps.row=row,rowProps.key=""+rows.indexOf(row),rowProps.className=SubsItemComponent.CAPTION_ROW+" "+this.props.rowsViewType,rowProps.timeline=this.props.timeline,rowProps.selectedFrameRx=this.props.selectedFrameRx,rowProps.searchValue=this.props.searchValue,rowProps.viewType=this.props.rowsViewType,rowProps.inActiveItem=this.props.isItemActive,rowProps.zoomRow=this.props.zoom,rowProps.scrollLock=this.state.scrollLocked,rowProps.activeRowRx=this.activeRowRx,React.createElement(SubtitleEntryComponent,rowProps)}))},prototype.render=function(){var _className=SubsItemComponent.CAPTIONS_LIST_ITEM+" "+this.props.rowsViewType;return this.state.isExpanded&&(_className+=" "+ViewConsts.ACTIVE),React.DOM.div(ReactViewUtils.className(_className),this._generateTemplate())},prototype._generateTemplate=function(){var elements=[],summaryProps={};if(summaryProps.onClick=stjs.bind(this,"onTitleClick"),summaryProps.switchBtnClick=stjs.bind(this,"switchBtnClick"),summaryProps.className=SubsItemComponent.CAPTION_SUMMARY,summaryProps.subtitles=this.state.subtitles,summaryProps.timeline=this.props.timeline,summaryProps.isSubsActive=this.props.isItemActive&&this.props.visible,summaryProps.matchFound=this.state.matchFound,summaryProps.shiftCaptionsRx=this.shiftCaptionsRx,summaryProps.scrollLocked=this.state.scrollLocked,summaryProps.onLock=stjs.bind(this,"toggleLock"),summaryProps.key="ssPropsKey",elements.push(React.createElement(SubsSummaryComponent,summaryProps)),null!=this.state.subtitles){var containerProps=new ContainerProps;containerProps.isActive=this.state.isExpanded,containerProps.key="cPropsKey";var trackEl=null;ViewConsts.BLOCK.equals(this.props.rowsViewType)&&(trackEl=React.DOM.div(FluentMap.withClassName(SubsItemComponent.TRACK).ref(SubsItemComponent.TRACK).build()));var rowElements=this._rows(trackEl),rowsContainer=React.createElement(ContainerComponent,UIUtils.toPlainObject(containerProps),rowElements);elements.push(rowsContainer)}return elements},prototype.toggleLock=function(e){var _subsItemState=new SubsItemState;_subsItemState.scrollLocked=!this.state.scrollLocked,this.setState(_subsItemState)},prototype._rows=function(trackEl){var zoom=Math.max(this.props.zoom,1),size=100*zoom+"%",rowsProps=FluentMap.withClassName(SubsItemComponent.CAPTION_ROWS).addClass(this.props.rowsViewType).style(ViewConsts.WIDTH,size).ref(SubsItemComponent.CAPTION_ROWS);return React.DOM.div(rowsProps.build(),trackEl,this._getRows())},prototype.onTitleClick=function(e){var _subsItemState=new SubsItemState;_subsItemState.isExpanded=!this.state.isExpanded,this.setState(_subsItemState)},prototype.switchBtnClick=function(e){e.preventDefault(),e.stopPropagation(),this.props.selectedItemRx.onNext(this.state.subtitles)}},{shiftCaptionsRx:{name:"Rx.Subject",arguments:[null]},timeUpdate:{name:"Rx.Observable",arguments:["TimeSample"]},rowsInTimeline:{name:"Array",arguments:["SubtitleEntry"]},activeRow:"SubtitleEntry",activeRowRx:{name:"Rx.Subject",arguments:["SubtitleEntry"]},propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var SubsHeaderView=function(props){React.Component.call(this,props)};SubsHeaderView=stjs.extend(SubsHeaderView,React.Component,[],function(constructor,prototype){constructor.VG_ICON_LIST="vg_icon-list",constructor.VG_ICON_BLOCK="vg_icon-block",constructor.CAPTION_HEADER_SWITCH_VIEW="captions-header__switch-view",constructor.CAPTIONS_HEADER="captions-header",constructor.CAPTIONS_HEADER_DATA="captions-header__data",constructor.CAPTIONS_HEADER_SIZE="captions-header__size",constructor.CAPTIONS_HEADER_TITLE="captions-header__title",constructor.CAPTIONS_HEADER_SEARCH="captions-header__search",prototype.title="CAPTIONS",prototype.searchIndex=0,prototype.render=function(){var _captionHeader=this._generateTemplate();return _captionHeader},prototype._generateTemplate=function(){var _headerData=this._headerData(),_switchView=this._switchBtns(),_headerSearch=this._headerSearch(),_headerZoom=this._headerZoom(),headerProps=FluentMap.withClassName(SubsHeaderView.CAPTIONS_HEADER).addClass(this.props.rowsViewType).build(),_captionHeader=React.DOM.div(headerProps,_headerData,_headerZoom,_switchView,_headerSearch);return _captionHeader},prototype._headerZoom=function(){var rangeProps={};rangeProps.points=this.props.zoomPoints,rangeProps.min=this.props.zoomMin,rangeProps.max=this.props.zoomMax,rangeProps.value=this.props.zoomValue,rangeProps.onChange=this.props.zoomRows;var zoomRange=React.createElement(ZoomRangeComponent,rangeProps);return React.DOM.div(ReactViewUtils.className("captions-header__zoom"),zoomRange)},prototype._headerSearch=function(){var _headerAttributes=ReactViewUtils.className(SubsHeaderView.CAPTIONS_HEADER_SEARCH),_searchIcon=React.DOM.span(ReactViewUtils.className(ViewConsts.VG_ICON_SEARCH)),_searchInputAttributes=FluentMap.withClassName(ViewConsts.VG_INPUT_SEARCH).onChange(this.props.onChange).onKeyPress(stjs.bind(this,function(key){var items=window.document.querySelectorAll("."+ViewConsts.HIGHLIGHT_YELLOW),captionsListHeader=window.document.querySelector(".captions-list__item.list"),captionsList=window.document.querySelector(".component_container"),isCaptionsListOpened=captionsList.classList.contains("active");if(13==key.charCode&&0!=items.length){isCaptionsListOpened||(captionsListHeader.classList.add("active"),captionsList.classList.add("active"));var item=items[this.searchIndex];this.searchIndex=this.searchIndex<items.length?this.searchIndex+1:0,item.scrollIntoView()}})).value(this.props.searchValue).build(),_searchFormAttributes=FluentMap.withClassName(ViewConsts.VG_FORM_SEARCH).put(ReactViewUtils.ON_SUBMIT,this.props.handleSubmit).build(),_searchInput=React.DOM.input(_searchInputAttributes),_searchForm=React.DOM.form(_searchFormAttributes,_searchIcon,_searchInput);return React.DOM.div(_headerAttributes,_searchForm)},prototype._switchBtns=function(){var iconBlockProps=FluentMap.withClassName(SubsHeaderView.VG_ICON_BLOCK).onClick(stjs.bind(this,"_listClick"));this.props.rowsViewType==ViewConsts.BLOCK&&iconBlockProps.addClass(ViewConsts.VG_INFO);var iconListProps=FluentMap.withClassName(SubsHeaderView.VG_ICON_LIST).onClick(stjs.bind(this,"_listClick"));return this.props.rowsViewType==ViewConsts.LIST&&iconListProps.addClass(ViewConsts.VG_INFO),React.DOM.div(ReactViewUtils.className(SubsHeaderView.CAPTION_HEADER_SWITCH_VIEW),React.DOM.span(iconBlockProps.build()),React.DOM.span(iconListProps.build()))},prototype._listClick=function(e){this.props.rowsViewType==ViewConsts.LIST?this.props.onIconClick(ViewConsts.BLOCK):this.props.onIconClick(ViewConsts.LIST)},prototype._headerData=function(){var _headerAttributes=ReactViewUtils.className(SubsHeaderView.CAPTIONS_HEADER_DATA),_title=this._getTitleEl(),_size=this._getSizeEl(),_addBtn=this._getBtnEl();return React.DOM.div(_headerAttributes,_title,_size,_addBtn)},prototype._getBtnEl=function(){var onAddCaptions=this.props.onAddCaptions;if(null!=onAddCaptions){var _btnAttributes=FluentMap.withClassName(ViewConsts.VGTHEME_CONTROL_PLUS).put(ReactViewUtils.ON_CLICK,onAddCaptions).build();return React.DOM.span(_btnAttributes)}return null},prototype._getSizeEl=function(){var _sizeAttributes=ReactViewUtils.classNames(SubsHeaderView.CAPTIONS_HEADER_SIZE,ViewConsts.VG_DEFAULT);return React.DOM.span(_sizeAttributes,this.props.size," files")},prototype._getTitleEl=function(){var _titleAttributes=ReactViewUtils.classNames(SubsHeaderView.CAPTIONS_HEADER_TITLE,ViewConsts.VG_INFO);return React.DOM.span(_titleAttributes,this.title)}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterHeader=function(props){React.Component.call(this,props),this.state={openModal:!1}};ContexterHeader=stjs.extend(ContexterHeader,React.Component,[],function(constructor,prototype){constructor.ContexterHeaderState=function(){},constructor.ContexterHeaderState=stjs.extend(constructor.ContexterHeaderState,null,[],function(constructor,prototype){prototype.openModal=!1},{},{}),constructor.Props=function(){},constructor.Props=stjs.extend(constructor.Props,null,[],function(constructor,prototype){prototype.handleSubmit=null,prototype.onSearchChange=null,prototype.detect=null,prototype.stop=null,prototype.openInVideoLog=null,prototype.searchString=null,prototype.progress=0,prototype.toggleOverlays=null,prototype.overlayClass=null},{handleSubmit:{name:"Callback1",arguments:["DOMEvent"]},onSearchChange:{name:"Callback1",arguments:["DOMEvent"]},detect:"Callback0",stop:"Callback0",openInVideoLog:"Callback0",searchString:"Object",toggleOverlays:{name:"Callback1",arguments:["DOMEvent"]}},{}),prototype.render=function(){var attributes=FluentMap.withClassName(ContexterConsts.VG_CONTEXTER_HEADER).id(ContexterConsts.VG_CONTEXTER_HEADER);return React.DOM.div(attributes.build(),this.renderContexterStatus(),this.renderActions(),this.renderSearch(),this.renderModal())},prototype.renderActions=function(){var overlaysBtnProps={};overlaysBtnProps.className=[ViewConsts.VG_BTN_DEFAULT,ContexterConsts.VG_CONTEXTER_TOGGLE_OVERLAYS].join(" "),overlaysBtnProps.onClick=this.props.toggleOverlays,overlaysBtnProps.label=React.DOM.span(FluentMap.withClassName(this.props.overlayClass).style(ViewConsts.FONT_SIZE,"18px").build());var overlaysBtn=React.createElement(VGButton,overlaysBtnProps),logBtnProps={};logBtnProps.className=[ViewConsts.VG_BTN_DEFAULT,ContexterConsts.VG_CONTEXTER_OPEN_LOG].join(" "),logBtnProps.onClick=stjs.bind(this,function(e){return this.props.openInVideoLog()}),logBtnProps.label=React.DOM.span(FluentMap.withClassName(ViewConsts.VG_ICON_FLAG).style(ViewConsts.FONT_SIZE,"18px").build());var logBtn=React.createElement(VGButton,logBtnProps);return React.DOM.div(ReactViewUtils.className(ContexterConsts.VG_CONTEXTER_HEADER_ACTIONS),overlaysBtn,logBtn)},prototype.renderModal=function(){var modalP={};modalP.open=this.state.openModal,modalP.contentClass=ViewConsts.VG_DEFAULT_BG,modalP.modalClass=ViewConsts.VG_INFO,modalP.body=React.DOM.span(null,"are you sure you want to rerun detection for this title");var cancelBtnProps={};cancelBtnProps.className=[ViewConsts.VG_BTN_DEFAULT,ContexterConsts.VG_CONTEXTER_MODAL_CLOSE].join(" "),cancelBtnProps.onClick=stjs.bind(this,"onCancel"),cancelBtnProps.label="Cancel";var cancelBtn=React.createElement(VGButton,cancelBtnProps),rerunBtnProps={};rerunBtnProps.className=ViewConsts.VG_BTN_PRIMARY,rerunBtnProps.onClick=stjs.bind(this,function(e){this.onCancel(e)}),rerunBtnProps.label="Rerun";var rerunBtn=React.createElement(VGButton,rerunBtnProps);return modalP.footer=React.DOM.div(null,cancelBtn,rerunBtn),modalP.id=ContexterConsts.VG_CONTEXTER_MODAL,React.createElement(ModalComponent,modalP)},prototype.renderSearch=function(){var inputProps={};inputProps.handleSubmit=this.props.handleSubmit,inputProps.onChange=this.props.onSearchChange,inputProps.searchValue=this.props.searchString;var inputSearch=React.createElement(PluginSearchInput,inputProps);return inputSearch},prototype.renderContexterStatus=function(){var statusProps={};return statusProps.progress=this.props.progress,statusProps.detect=this.props.detect,statusProps.stop=this.props.stop,statusProps.redo=stjs.bind(this,"redo"),React.createElement(ContexterStatusComponent,statusProps)},prototype.redo=function(e){this.setState({openModal:!0})},prototype.onCancel=function(e){this.setState({openModal:!1})}},{propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var VideoLogPlugin=function(storage,player,logView){BasePlugin.call(this,"rrtheme_videolog"),this.log=player.getLog(),this.storage=storage,this.player=player,this.view=logView,this.pluginClass=this.getId(),this.errorPopupCallback=stjs.bind(this,function(error){this.view.errorView.showError(ErrorPopupView.ERROR_SERVER_COMMUNICATION)}),this.view.trackButtonsView.onHotKeysRx.subscribe(stjs.bind(this,function(domEvent){null!=this.onHotkeysClicked&&this.onHotkeysClicked(domEvent)})),this.currentTimeFormat=logView.defaultTimecodeFormat,this.hm=new HotkeyManager(this.log),this.playerListeners(),this.trackButtonsListeners(),this.edlButtonsListeners(),this.storageListeners(),this.tracksDropDownListeners(),this.timeformatDropDownListeners(),this.trackManagerListeners()};VideoLogPlugin=stjs.extend(VideoLogPlugin,BasePlugin,[],function(constructor,prototype){prototype.log=null,prototype.storage=null,prototype.hm=null,prototype.videoUrl=null,prototype.player=null,prototype.pluginClass=null,prototype.view=null,prototype.onCleanEventsClick=null,prototype.onCreateSubclipClick=null,prototype.onSaveEDLClick=null,prototype.onSubclipUpdate=null,prototype.onHotkeysClicked=null,prototype.currentTimeFormat=null,prototype.currentUser=null,prototype.mediaId=null,prototype.selectedLogEvent=null,prototype.errorPopupCallback=null,prototype.mediaFilename=null,prototype.initialTrackName=null,prototype.enableHotKeysForDocument=function(doc){this.hm.enableHotKeysForDocument(doc)},prototype.setCurrentUser=function(currentUser){this.currentUser=currentUser},prototype.getCurrentUser=function(){return this.currentUser},prototype.onError=function(){},prototype.playerListeners=function(){this.player.getTimeUpdateRx().throttle(100).subscribe(stjs.bind(this,function(t){null!=this.selectedLogEvent&&this.storage.updateEventById(this.selectedLogEvent.logEventId,stjs.bind(this,function(logEvent){if(null==this.selectedLogEvent)return null;if(this.selectedLogEvent.isEditEnd())if(t.tv>logEvent.startTv){if(logEvent.endTv!=t.tv&&(logEvent.endTv=t.tv,Utils.isNotBlank(logEvent.subclipId))){var sc=SubClip.fromEvent(logEvent,this.player);this.onSubclipUpdate(sc)}}else this.player.checkRangeAndSeek(TimecodeHelpers.getFrameByTv(this.player,logEvent.startTv)+1);else{if(!this.selectedLogEvent.isEditStart())throw new RuntimeException("selected LogEvent unknown state");if(t.tv<logEvent.endTv){if(logEvent.startTv!=t.tv&&(logEvent.startTv=t.tv,Utils.isNotBlank(logEvent.subclipId))){var sc=SubClip.fromEvent(logEvent,this.player);this.onSubclipUpdate(sc)}}else this.player.checkRangeAndSeek(TimecodeHelpers.getFrameByTv(this.player,logEvent.endTv)-1)}return logEvent}),function(onOk){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}))},prototype.timeformatDropDownListeners=function(){this.view.timeformatDropDownView.itemSelectedRx.subscribe(stjs.bind(this,function(timeformat){this.currentTimeFormat=timeformat.id,this.view.forEachTrackView(stjs.bind(this,function(trackView){trackView.timecodeViews.map(stjs.bind(this,function(tcv,idx,arr){return tcv.changeFormat(this.currentTimeFormat),!0}))}))}))},prototype.trackManagerListeners=function(){this.storage.getTrackChangedRx().subscribe(stjs.bind(this,function(track){this.updateTrack(track),this.view.trackManagerView.commit(track)})),this.view.trackManagerView.onTrackRevertRx.subscribe(stjs.bind(this,function(trackId){this.storage.trackById(trackId,stjs.bind(this,function(track){this.updateTrack(track),this.view.trackManagerView.commit(track)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),this.view.trackManagerView.newTrackFormInputView.onUserTypingRx.subscribe(stjs.bind(this,function(newTrackName){var canUseEnteredName=VideologAsyncStorage.canBeTrackName(newTrackName);canUseEnteredName?this.view.trackManagerView.hideTrackExistError():this.view.trackManagerView.showTrackExistError()})),this.view.trackManagerView.onTrackFormSubmitRx.subscribe(stjs.bind(this,function(form){var trackNameEl=(form.querySelector("input[type='radio']:checked"),form.querySelector("input[name='trackName']")),newTrackName=trackNameEl.value,canUseEnteredName=VideologAsyncStorage.canBeTrackName(newTrackName);if(newTrackName.equals(""))return void this.view.trackManagerView.showIncorrectTrackNameError();if(canUseEnteredName){this.view.trackManagerView.hideTrackExistError(),this.view.trackManagerView.hideIncorrectTrackNameError();var track=new Track(trackNameEl.value,this.currentUser);track.mediaId=this.mediaId,track.localId="tempIdBeforeCommit"+Utils.currentTimeMillis(),this.updateTrack(track),trackNameEl.value=""}else this.view.trackManagerView.showTrackExistError()})),this.view.trackManagerView.onTrackCommitRx.subscribe(stjs.bind(this,function(track){this.log.debug("on Track Commit",track),track.state.equals(TrackState.DELETED)?this.storage.deleteTrack(track):track.state.equals(TrackState.NEW)?this.storage.saveTrack(track,function(onLoad){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})):this.storage.saveTrack(track,function(onLoad){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}))},prototype.updateTrack=function(track){if(this.view.trackManagerView.containsTrack(track))this.view.trackManagerView.updateRow(track);else{var row=this.view.trackManagerView.createRowView(track);this.trackRowListeners(row)}},prototype.trackRowListeners=function(trView){trView.onDeleteRx.subscribe(stjs.bind(this,function(trackRowView){if(trackRowView.isTrackNew())this.view.trackManagerView.deleteRow(trackRowView);else{var countEventsAndConfirm=stjs.bind(this,function(events){if(events.length>0){var confirmDialogView=new ConfirmDialogView(this.view.modalConfirmDialogEl);confirmDialogView.onYesNo(function(yesEvent){trackRowView.scheduleForDelete(),trackRowView.hide(),confirmDialogView.close()},function(noEvent){confirmDialogView.close()}),confirmDialogView.open()}else trackRowView.scheduleForDelete(),trackRowView.hide()});this.storage.trackEvents(trackRowView.trackId,countEventsAndConfirm,function(e){alert("Error while communicating with server")})}})),trView.validateTrackNameFunc=stjs.bind(this,function(newTrackName){return VideologAsyncStorage.canBeTrackName(newTrackName)?(this.view.trackManagerView.hideIncorrectTrackNameError(),!0):(this.log.warn("new track name is incorrect "+newTrackName),this.view.trackManagerView.showIncorrectTrackNameError(),!1)}),trView.onTrackNameChanged.subscribe(function(trackRowView1){trackRowView1.isCommited=!1,trackRowView1.trackToCommit.displayName=trackRowView1.getInputTrackName(),trackRowView1.isTrackNew()||(trackRowView1.trackToCommit.state=TrackState.EDITED)})},prototype.trackButtonsListeners=function(){var markInCallback=stjs.bind(this,function(domEvent){if(this.log.debug("Mark in event",this.player.getCurrentFrame()),null!=this.selectedLogEvent){var currentTrackView=this.view.getCurrentTrackView(),logEventView=currentTrackView.logEventListView.viewById(this.selectedLogEvent.logEventId);null!=logEventView&&logEventView.readOnlyMode(),this.selectedLogEvent=null}var tv=this.player.getCurrentTimeValue(),timeline=this.player.getTimeline(),logEvent=new LogEvent(this.view.getCurrentTrackView().trackId,tv,timeline.getTimeScale());logEvent.endTv=timeline.getTvByFrame(timeline.getFrameByTv(tv)+1),logEvent.setOwnerId(this.currentUser.id),this.storage.saveEvent(logEvent,stjs.bind(this,function(logEvent1){this.selectedLogEvent=new SelectedLogEvent(logEvent1.id,logEvent1.getTrackId(),SelectedLogEvent.EDIT_END);var logEventView=this.view.getCurrentTrackView().logEventListView.viewById(logEvent1.id);logEventView.editEndTimevalueMode()}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}),markOutCallback=stjs.bind(this,function(domEvent){null!=this.selectedLogEvent&&this.storage.updateEventById(this.selectedLogEvent.logEventId,stjs.bind(this,function(logEvent){var timeline=this.player.getTimeline();return logEvent.endTv=this.player.getCurrentTimeValue(),logEvent.startTv>logEvent.endTv&&(logEvent.endTv=timeline.getTvByFrame(timeline.getFrameByTv(logEvent.endTv)+1)),logEvent}),stjs.bind(this,function(onOkLogEvent){this.player.pause(),this.selectedLogEvent=null;var logEventView=this.view.getCurrentTrackView().logEventListView.viewById(onOkLogEvent.id);logEventView.readOnlyMode()}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))});this.view.trackButtonsView.onMarkInRx.subscribe(markInCallback),this.view.trackButtonsView.onMarkOutRx.subscribe(markOutCallback),this.hm.addShortcut("I",function(domEvent){return markInCallback(domEvent)},KeyOptions.gd("VideoLog","Mark In Event",!1)),this.hm.addShortcut("O",function(domEvent){return markOutCallback(domEvent)},KeyOptions.gd("VideoLog","Mark Out Event",!1))},prototype.edlButtonsListeners=function(){this.view.trackButtonsView.onEdlSaveClickRx.subscribe(stjs.bind(this,function(domEvent){var trackId=this.view.getCurrentTrackView().trackId;this.storage.trackById(trackId,stjs.bind(this,function(track){this.storage.trackEvents(trackId,stjs.bind(this,function(logEvents){var fcpXml=VideoLogPlugin.buildFCPXml(this.player,logEvents,this.mediaFilename);null!=this.onSaveEDLClick&&this.onSaveEDLClick(track,fcpXml)}),stjs.bind(this,function(e){this.log.error("error getting tracks")}))}),stjs.bind(this,function(e){this.log.error("error getting track object")}))})),this.view.trackButtonsView.onEdlExportClickRx.subscribe(stjs.bind(this,function(domEvent){this.log.debug("EDL export requested");var trackId=this.view.getCurrentTrackView().trackId;this.storage.trackById(trackId,stjs.bind(this,function(track){this.storage.trackEvents(trackId,stjs.bind(this,function(logEvents){var fcpXml=VideoLogPlugin.buildFCPXml(this.player,logEvents,this.mediaFilename),a=window.document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+window.encodeURIComponent(fcpXml)),a.setAttribute("download",this.mediaFilename+"_"+this.view.getCurrentTrackView().displayName+".xml"),a.style.display="none",window.document.body.appendChild(a),a.click(),window.document.body.removeChild(a)}),stjs.bind(this,function(e){this.log.error("error getting tracks")}))}),stjs.bind(this,function(e){this.log.error("error getting track object")}))}))},constructor.buildFCPXml=function(player,logEvents,filename){for(var frameDurationTv=stjs.trunc(player.getTimeline().getTvByFrame(1)-player.getTimeline().getTvByFrame(0)),duration=player.getTimeline().getFrameCount(),fps=stjs.trunc(player.getTimeline().getTimeScale()/frameDurationTv+.5),width=player.getVideoElement().getVideoWidth(),height=player.getVideoElement().getVideoHeight(),startTimecode=player.getTimeline().getTapeByFrame(0),fcpxml=new FCPXml(duration,fps,width,height,filename,startTimecode),i=0;i<logEvents.length;i++){var logEvent=logEvents[i];fcpxml.addLogEvent(logEvent.id,logEvent.startTv,logEvent.endTv,logEvent.timescale,logEvent.notes);var name=logEvent.tagNames().join(", ");fcpxml.addLogMarker(name,logEvent.startTv,logEvent.endTv,logEvent.timescale,logEvent.notes)}return fcpxml.log2xml()},prototype.tracksDropDownListeners=function(){this.storage.getTrackDeletedRx().subscribe(stjs.bind(this,function(track){this.view.trackDropDownView.deleteItem(track.id),this.view.deleteTrackView(track.id);var ids=this.view.trackDropDownView.itemIds();if(ids.length>0){var item=this.view.trackDropDownView.itemById(ids[0]);this.view.trackDropDownView.setActiveItem(item.id),this.view.switchTrack(item.id)}})),this.storage.getTrackChangedRx().subscribe(stjs.bind(this,function(track){null==this.view.trackDropDownView.itemElementById(track.id)?this.view.trackDropDownView.addItem(new DropDownItem(track.id,track.displayName)):this.view.trackDropDownView.updateItem(track.id,new DropDownItem(track.id,track.displayName))})),this.view.trackDropDownView.itemSelectedRx.subscribe(stjs.bind(this,function(ddItem){this.log.debug("DropDown selected track",ddItem.id),this.view.getCurrentTrackView().trackId.equals(ddItem.id)||(null!=this.selectedLogEvent&&(this.deselectLogEventById(this.selectedLogEvent.logEventId),this.selectedLogEvent=null),this.view.switchTrack(ddItem.id),this.view.trackDropDownView.setActiveItem(ddItem.id))}))},prototype.storageListeners=function(){this.storage.getEventDeletedRx().subscribe(stjs.bind(this,function(le){this.log.debug("event deleted",le);var trackView=this.view.getTrackView(le.getTrackId());null!=trackView&&trackView.logEventListView.deleteEvent(le.id)})),this.storage.getEventChangedRx().subscribe(stjs.bind(this,function(logEvent){var tv=this.view.getTrackView(logEvent.getTrackId());this.log.debug("event changed",logEvent,tv),null!=tv?this.renderEventForTrack(tv,logEvent):this.log.error("event exist with no track",logEvent.getTrackId(),logEvent)})),this.storage.getTrackChangedRx().subscribe(stjs.bind(this,function(track){this.log.debug("track change from storage",track.displayName,track.id);var tv=this.view.getTrackView(track.id);null==tv?(tv=new TrackView(track,this.pluginClass,this.player),this.trackViewListeners(tv),this.view.addTrackView(tv),this.storage.trackEvents(track.id,stjs.bind(this,function(events){events.map(stjs.bind(this,function(logEvent,aLong,strings){return this.storage.getEventChangedRx().onNext(logEvent),!0}))}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})),tv.onEventIdDeleted.subscribe(stjs.bind(this,function(logEventId){this.storage.deleteEvent(logEventId)}))):tv.render(track),null==this.view.getCurrentTrackView()&&(null==this.initialTrackName||track.displayName.toLowerCase().equals(this.initialTrackName.toLowerCase()))&&this.view.switchTrack(track.id)}))},prototype.setSubclipIdForEvent=function(subclipId,eventId,onOk,onFail){this.storage.updateEventById(eventId,function(logEvent){return logEvent.subclipId=subclipId,logEvent},onOk,stjs.bind(this,function(e){this.log.error("Error while sending request",e),onFail(e),this.errorPopupCallback(e)}))},prototype.renderEventForTrack=function(tv,logEvent){var lev=tv.logEventListView.viewById(logEvent.id);null==lev?(lev=new LogEventView(logEvent,this.pluginClass,this.player,this.currentTimeFormat),lev.onSubclipCreateClickRx.subscribe(stjs.bind(this,function(logEventId){null!=this.onCreateSubclipClick&&this.storage.eventById(logEventId,stjs.bind(this,function(logEvent1){this.onCreateSubclipClick(SubClip.fromEvent(logEvent1,this.player),logEvent1)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),lev.getOnDeleteRx().subscribe(stjs.bind(this,function(logEventView){this.log.debug("Deleting event",logEventView.logEventId),tv.deleteEvent(logEventView.logEventId),null!=this.selectedLogEvent&&this.selectedLogEvent.logEventId.equals(logEventView.logEventId)&&(this.selectedLogEvent=null)})),lev.onStartTimeEditClickRx.subscribe(stjs.bind(this,function(logEventView){this.player.pause();var anotherEventSelected=null!=this.selectedLogEvent&&!logEventView.logEventId.equals(this.selectedLogEvent.logEventId);if(null!=this.selectedLogEvent)if(anotherEventSelected)this.deselectLogEventById(this.selectedLogEvent.logEventId);else{if(logEventView.readOnlyMode(),this.selectedLogEvent.action.equals(SelectedLogEvent.EDIT_START))return void(this.selectedLogEvent=null);this.selectedLogEvent=null}this.storage.eventById(logEventView.logEventId,stjs.bind(this,function(logEvent1){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(logEvent1.startTv)),logEventView.editStartTimevalueMode(),this.selectedLogEvent=new SelectedLogEvent(logEvent1.id,logEvent1.getTrackId(),SelectedLogEvent.EDIT_START);
}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),lev.onEndTimeEditClickRx.subscribe(stjs.bind(this,function(logEventView){this.player.pause();var anotherEventSelected=null!=this.selectedLogEvent&&!logEventView.logEventId.equals(this.selectedLogEvent.logEventId);if(null!=this.selectedLogEvent)if(anotherEventSelected)this.deselectLogEventById(this.selectedLogEvent.logEventId);else{if(logEventView.readOnlyMode(),this.selectedLogEvent.action.equals(SelectedLogEvent.EDIT_END))return void(this.selectedLogEvent=null);this.selectedLogEvent=null}this.storage.eventById(logEventView.logEventId,stjs.bind(this,function(logEvent1){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(logEvent1.endTv)),logEventView.editEndTimevalueMode(),this.selectedLogEvent=new SelectedLogEvent(logEvent1.id,logEvent1.getTrackId(),SelectedLogEvent.EDIT_END)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),tv.timecodeViews.push(lev.timeCodeView),tv.logEventListView.addEvent(lev),tv.logEventViewAddedRx.onNext(lev)):lev.update(logEvent,this.currentTimeFormat)},prototype.deselectLogEventById=function(logEventId){this.view.getTrackView(this.selectedLogEvent.trackId).logEventListView.viewById(logEventId).readOnlyMode()},prototype.trackViewListeners=function(trackView){trackView.cleanTrackButtonRx.subscribe(stjs.bind(this,function(e){var confirmDialogView=new ConfirmDialogView(this.view.modalCleanEventsConfirmDialogEl);confirmDialogView.onYesNo(stjs.bind(this,function(yesEvent){this.log.debug("clean the track"),this.storage._trackById(trackView.trackId,stjs.bind(this,function(track){this.storage.clearTrack(track)}),stjs.bind(this,function(error){this.log.error(error)})),confirmDialogView.close()}),function(noEvent){confirmDialogView.close()}),confirmDialogView.open()})),trackView.logEventViewAddedRx.subscribe(stjs.bind(this,function(logEventView){this.logEventViewListeners(logEventView)}))},prototype.logEventViewListeners=function(logEventView){this.storage.eventById(logEventView.logEventId,stjs.bind(this,function(logevent_ref){logEventView.onTagDeleteRx.subscribe(stjs.bind(this,function(tagDisplayName){this.storage.updateEventById(logEventView.logEventId,function(logEvent){return logEvent.removeTagByName(tagDisplayName),logEvent},function(ok){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),logEventView.onClickStartTimevalueRx.subscribe(stjs.bind(this,function(logEventView1){this.storage.eventById(logEventView1.logEventId,stjs.bind(this,function(logEvent1){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(logEvent1.startTv))}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))})),logEventView.onClickEndTimevalueRx.subscribe(stjs.bind(this,function(logEventView1){this.storage.eventById(logEventView1.logEventId,stjs.bind(this,function(logEvent1){this.player.checkRangeAndSeek(this.player.getTimeline().getFrameByTv(logEvent1.endTv))}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}));var tagInputEl=logEventView.getElement().querySelector(".app-tagInputView"),tagSuggestInputView=new TagSuggestInputView(this.pluginClass,logEventView,tagInputEl,this.view.hintsView,this.log);this.controlTagSuggestInputView(tagSuggestInputView,logEventView);var descriptionInputEl=logEventView.getElement().querySelector(".description-input"),descriptionInputView=new InputView(descriptionInputEl,this.player.getLog());this.controlDescriptionInputView(descriptionInputView,logEventView)}),stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))},prototype.controlDescriptionInputView=function(descriptionInputView,logEventView){descriptionInputView.getFocusRx().subscribe(stjs.bind(this,function(_wat){this.player.pause()})),descriptionInputView.getBlurRx().subscribe(function(input){descriptionInputView.inputValueEnteredRx.onNext(input.value)}),descriptionInputView.inputValueEnteredRx.subscribe(stjs.bind(this,function(newDescription){this.log.debug("new description",newDescription),this.storage.updateEventById(logEventView.logEventId,function(logEvent){return logEvent.notes=newDescription,logEvent},function(onOk){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})),descriptionInputView.blur()}))},prototype.controlTagSuggestInputView=function(tagSuggestInputView,logEventView){tagSuggestInputView.itemSelectedRx.subscribe(stjs.bind(this,function(tagId){this.log.debug("Suggested itemSelectedRx",tagId);var index=VGView.findIndex(tagSuggestInputView.getElement().parentElement.children,tagSuggestInputView.getElement());if(index!=-1){var tName=this.storage.tagNameById(tagId),t=new LogEventTag(tagId,tName);this.storage.updateEventById(logEventView.logEventId,function(logEvent){return tagSuggestInputView.onTagSelected(logEvent,t,index),logEvent},function(onOk){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)})),this.storage.eventById(logEventView.logEventId,function(logEvent){},stjs.bind(this,function(e){this.log.error("Error while sending request",e),this.errorPopupCallback(e)}))}})),tagSuggestInputView.getFocusRx().subscribe(stjs.bind(this,function(inputEl){this.log.debug("tag input focused",inputEl),this.player.pause(),tagSuggestInputView.showAsActive();var tags=this.storage.findTagDisplayNames(inputEl.value);tagSuggestInputView.showHint(tags,inputEl.value),tagSuggestInputView.itemFromHint=this.view.hintsView.itemSelectedRx.subscribe(stjs.bind(this,function(itemId){this.log.debug("ITEM SELECTED FROM HINT",itemId),tagSuggestInputView.itemSelectedRx.onNext(itemId),tagSuggestInputView.getElement().blur()}))})),tagSuggestInputView.getBlurRx().subscribe(function(inputEl){tagSuggestInputView.itemFromHint.dispose()}),tagSuggestInputView.itemSelectedFromHintRx.subscribe(stjs.bind(this,function(tagId){this.log.debug("tagID selected",tagId)})),tagSuggestInputView.onUserTypingRx.subscribe(stjs.bind(this,function(inputValue){var resultTags=this.storage.findTagDisplayNames(inputValue),existingTagIds=logEventView.existingTags().map(function(evtTag,idx,arr){return evtTag.id});resultTags=resultTags.filter(function(evtTag,idx,obj){return existingTagIds.indexOf(evtTag.id)==-1}),tagSuggestInputView.showHint(resultTags,inputValue)})),tagSuggestInputView.inputValueEnteredRx.subscribe(stjs.bind(this,function(tagId){this.log.debug("newTAG!",tagId),tagSuggestInputView.closeHint()}))},prototype.setMediaId=function(mediaId){this.mediaId=mediaId},prototype.setMediaFilename=function(mediaFilename){this.mediaFilename=mediaFilename},prototype.renderInto=function(container,containerWidth,onDone){this.view.appendTo(container),onDone()}},{log:"Log",storage:"VideologAsyncStorage",hm:"HotkeyManager",player:"PlayerImpl",view:"VideoLogView",onCleanEventsClick:{name:"Callback1",arguments:["DOMEvent"]},onCreateSubclipClick:{name:"Callback2",arguments:["SubClip","LogEvent"]},onSaveEDLClick:{name:"Callback2",arguments:["Track",null]},onSubclipUpdate:{name:"Callback1",arguments:["SubClip"]},onHotkeysClicked:{name:"Callback1",arguments:["DOMEvent"]},currentUser:"User",selectedLogEvent:"SelectedLogEvent",errorPopupCallback:"Callback1",pluginApi:"VGPlayerPluginApi"},{});var SafeAreaPlugin=function(player){VGPlugins.call(this,player);var controlsContainer=player.getView().controlsPanelView.getControlsContainer();if("vg".equals(player.getOptions().theme)){this.view=new SafeAreaViewVG(player.getView().playerContainer,player.getView(),player);var vgp=player;this.controlButton=new SafeAreaDropDownVGView(this.view,vgp,controlsContainer,player.getView(),null)}else this.view=new SafeAreaViewRR(player.getView().playerContainer,player.getView(),player),this.controlButton=new SafeAreaDropDownRRControl(this.view,player.getLog()),player.getView().playerContainer.appendChild(this.view.getElement());var captionClass=null==this.view.getAspectRatio()?null:"caption-"+this.view.getAspectRatio(),playerView=player.getView();playerView.hm.addShortcut("shift-a",stjs.bind(this,function(e){return this.view.toggleActionSafe()}),KeyOptions.gd("Player","Show/hide action safe area",!1)),null!=captionClass&&playerView.hm.addShortcut("shift-c",stjs.bind(this,function(e){return this.view.toggleCaptionSafe()}),KeyOptions.gd("Player","Show/hide action safe area",!1))};SafeAreaPlugin=stjs.extend(SafeAreaPlugin,VGPlugins,[],function(constructor,prototype){prototype.view=null,prototype.controlButton=null,prototype.applyCrop=function(video){var videoHeight=video.getVideoHeight(),videoWidth=video.getVideoWidth(),videoRatio=videoWidth/videoHeight;this.player.getLog().debug("Aspect ratio: "+videoRatio),Math.abs(3*videoRatio/4-1)<.01&&this.view.setAspectRatio("4-3");var bCRect=this.view.getElement().parentElement.getBoundingClientRect();this.view.doApplyCrop(videoRatio*bCRect.height/bCRect.width)},prototype.getControlButton=function(){return this.controlButton}},{view:"SafeAreaView",controlButton:"VGControl",player:"PlayerImpl",view:"VGView"},{});var ControlsPanelView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.render('<div class="vg_closeLeftPanel"><div></div></div>'),this.el.className="vg_controlsPanel vg_panel-bg",this.controlsView=new ControlsView(player,this.el,this.parent,className),null!=player.getOptions().theme&&player.getOptions().theme.equals("delta")?this.playRateBox=this.addPlayRateBox(this.controlsView.playControlsEl):this.playRateBox=this.addPlayRateBox(this.el);var playRateText=this.playRateBox.querySelector(".vg_speedText");this.timeControlsEl=this.controlsView.el.querySelector(".vg_time_controls"),this.timeControlsView=new TimeControlsView(player,this.timeControlsEl,this.parent,className),player.getTimeUpdateRx().subscribe(stjs.bind(this,function(t){var playRate=player.getVideoElement().getPlayRate(),hiddenPlayRate=0==playRate||1==playRate;null==playRateText||hiddenPlayRate?hiddenPlayRate&&this.getPlayRateBox().classList.add("vg_invisible"):(this.getPlayRateBox().classList.remove("vg_invisible"),playRateText.innerHTML=playRate+"X")}));var onTimeInput=function(ts){var playerView=player.getView(),frame=ts.frame;if(frame!=player.getCurrentFrame()&&!player.isPlaying()){var fn=player.getTimeline().boundsFn(frame);playerView.scrubbing=!0,player.pause(),playerView.seekFrameAndCheckRange(fn),setTimeout(function(){playerView.seekFrameAndCheckRange(fn),playerView.scrubbing=!1},100)}};this.timeControlsView.timecodeInputsInit(onTimeInput);var documentClick=stjs.bind(this,function(e){var activeDdown=this.el.querySelector(".vg_volumeScreenControls .vg_ddown.active");this.toggleActive(activeDdown)});window.document.addEventListener("click",documentClick,!1)};ControlsPanelView=stjs.extend(ControlsPanelView,VGView,[],function(constructor,prototype){constructor.VG_PLAY_RATE_BOX="vg_playRateBox",prototype.timeControlsEl=null,prototype.el=null,prototype.controlsView=null,prototype.timeControlsView=null,prototype.playRateBox=null,prototype.addPlayRateBox=function(el){return el.insertAdjacentHTML("beforeend","<div class='"+ControlsPanelView.VG_PLAY_RATE_BOX+" vg_info vg_invisible'>PLAYBACK SPEED <span class='vg_speedText'></span></div>"),el.querySelector("."+ControlsPanelView.VG_PLAY_RATE_BOX)},prototype.getVolumeBtn=function(){return this.controlsView.volumeButton},prototype.getStepSelectRx=function(){return this.controlsView.stepSelectRx},prototype.getCameraClickRx=function(){return this.controlsView.cameraClickRx},prototype.getFullscreenClickRx=function(){return this.controlsView.fullscreenClickRx},prototype.getControlsContainer=function(){return this.el.querySelector(".vg_controls--addOn")},prototype.activate=function(){return this.el.classList.add("active")},prototype.deactivate=function(){var activeAddon=this.el.querySelector(".vg_addonview.active");return null!=activeAddon&&activeAddon.classList.remove("active"),this.el.classList.remove("active")},prototype.getVolumeRangeEl=function(){return this.controlsView.volumeRangeEl},prototype.getPlayBtn=function(){return this.controlsView.getPlayBtn()},prototype.getTimeControls=function(){return this.timeControlsView.el},prototype.activateControlsPanel=function(){throw exception("activateControlsPanel TODO")},prototype.deactivateControlsPanel=function(){throw exception("deactivateControlsPanel TODO")},prototype.getVolumeClick=function(){return this.controlsView.volumeClick},prototype.enableControl=function(control){var addOnsContainer=this.el.querySelector(".vg_controls--addOn");addOnsContainer.appendChild(control.getControlEl(this))},prototype.getPlayRateBox=function(){return this.playRateBox}},{timeControlsEl:"Element",el:"Element",controlsView:"ControlsView",timeControlsView:"TimeControlsView",playRateBox:"Element",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var TimeControlsBox=function(player,container,parentView){VGPlugins.call(this,player),this.view=new TimeControlsBoxView(player,container,parentView,"vg_time_controls_box")};TimeControlsBox=stjs.extend(TimeControlsBox,VGPlugins,[],null,{player:"PlayerImpl",view:"VGView"},{});var Waveform=function(http,div,timeline,timeRx,channel,settings,log){ObjectEvents.call(this),this.http=http,this.div=div,this.timeline=timeline,this.log=log,timeRx.subscribe(stjs.bind(this,function(updatedTime){this.timeline=updatedTime})),this.channel=channel,this.settings=WaveformSettings.defaultIfNull(settings),this.defaultColor="#393B40",this.range=this.settings.range,this.init(),this.waveCollider.setChannel(this.channel),this.initCollider(),this.update()};Waveform=stjs.extend(Waveform,ObjectEvents,[],function(constructor,prototype){prototype.http=null,prototype.div=null,prototype.timeline=null,prototype.log=null,prototype.channel=null,prototype.settings=null,prototype.defaultColor=null,prototype.range=null,prototype.waveCollider=null,prototype.updateTimeout=null,prototype.canvas=null,prototype.initCollider=function(){null!=this.canvas&&this.div.removeChild(this.canvas),this.canvas=window.document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.div.appendChild(this.canvas);var channel=this.channel;null!=channel?(this.settings.fancy?this.waveCollider=new FancyCssWaveCollider(this,channel,this.canvas,this.log):this.waveCollider=new ExtendedCssWaveCollider(this,channel,this.canvas,this.log),this.waveCollider.setWaveColor(null!=this.settings.color?this.settings.color:this.defaultColor),this.waveCollider.ruler=!1,this.waveCollider.rulerLines=10):this.waveCollider=new EmptyWaveCollider},prototype._getClientHeight=function(div){return parseInt(div._clientHeight)},prototype._setClientHeight=function(div,clientHeight){Utils.addField(div,"_clientHeight",clientHeight)},prototype._setClientWidth=function(div,clientWidth){Utils.addField(div,"_clientWidth",clientWidth)},prototype._getClientWidth=function(div){return parseInt(div._clientWidth)},prototype.init=function(){this.initCollider();var self=this;setInterval(stjs.bind(this,function(){(self.div.clientWidth!=this._getClientWidth(self.div)||self.div.clientHeight!=this._getClientHeight(self.div))&&self.div.clientHeight>0&&self.div.clientWidth>0&&(this._setClientWidth(self.div,self.div.clientWidth),this._setClientHeight(self.div,self.div.clientHeight),null!=self.updateTimeout&&clearTimeout(self.updateTimeout),self.updateTimeout=setTimeout(stjs.bind(self,"update"),100),self.fireEvent("resize",null))}),100),null!=this.settings.clickToSeek&&this.div.addEventListener("click",function(e){self.settings.seekFrame(self.getClosestFrame(e.pageX-UIUtils.getPosition(self.div).x))}),null!=this.settings.volumeControl&&this.settings.volumeControl.addEvent("changed",function(v){var _v=v;self.waveCollider.setAmplification(1+(_v-.5)/2),self.waveCollider.drawWave()})},prototype.getLeftFor=function(fn){var duration=this.range.end-this.range.start,fromStart=fn-this.range.start;return this.div.clientWidth/duration*fromStart},prototype.getClosestFrame=function(x){var frame=this.range.start+Math.floor(x/stjs.trunc(this.div.clientWidth/(this.range.end-this.range.start)));return this.timeline.boundsFn(stjs.trunc(frame))},prototype.update=function(timeline){null!=timeline&&(this.timeline=timeline),this.range=new ZoomRange(this.timeline,0,this.timeline.getFrameCount(),this.settings.getFrame),this.range.addEvent("changed",stjs.bind(this,function(x){return this.update()}));var startTv=this.timeline.getTvByFrame(this.range.start),endTv=this.timeline.getTvByFrame(this.range.end),startSample=Utils.convertTv(startTv,this.timeline.getTimeScale(),this.waveCollider.channel.sampleRate),endSample=Utils.convertTv(endTv,this.timeline.getTimeScale(),this.waveCollider.channel.sampleRate),sampleRange=new Range(stjs.trunc(startSample),stjs.trunc(endSample)).offset(stjs.trunc(this.waveCollider.channel.channelOffset));null!=this.waveCollider.sampleRange&&sampleRange.equals(this.waveCollider.sampleRange)||this.waveCollider.setSampleRange(sampleRange),this.waveCollider.drawWave(),this.fireEvent("show",null)}},{http:"Http",div:"Element",timeline:"Timeline",log:"Log",channel:"PlayerAudioTrack",settings:"WaveformSettings",range:"ZoomRange",waveCollider:"CssWaveCollider",updateTimeout:"TimeoutHandler",canvas:"Canvas",events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{});var SubsPluginComponent=function(props){React.Component.call(this,props),this.timeUpdateRx=props.player.getTimeUpdateRx(),this.timeline=this.props.player.getTimeline(),this.state={items:[],activeItem:null,visible:!1,searchValue:"",rowsViewType:ViewConsts.LIST,timeTrack:0,zoom:SubsPluginComponent.ZOOM_MIN}};SubsPluginComponent=stjs.extend(SubsPluginComponent,React.Component,[],function(constructor,prototype){constructor.ZOOM_POINTS=5,constructor.ZOOM_MAX=10,constructor.ZOOM_MIN=0,prototype.disposables=null,constructor.WRAP_CAPTIONS="wrap-captions",prototype.props=null,prototype.state=null,prototype.selectedFrameRx=null,prototype.selectedItemRx=null,prototype.captionsControl=null,prototype.captionHandlerCallBack=null,prototype.timeUpdateRx=null,prototype.timeline=null,prototype.componentDidMount=function(el){this.disposables=new Rx.CompositeDisposable,this.disposables.add(this.props.subsRx.subscribe(stjs.bind(this,function(subs){var pluginState=new SubsPluginState,_subs=[subs];pluginState.items=this.state.items.concat(_subs),pluginState.activeItem=subs,pluginState.visible=!0,this.setState(pluginState)}))),this.selectedFrameRx=new Rx.Subject,this.disposables.add(this.selectedFrameRx.subscribe(stjs.bind(this,function(tv){var frameByTv=this.timeline.getMillisByTv(tv)/1e3;this.props.player.seekSec(frameByTv)}))),this.captionsControl=this.props.captionsControl,this.selectedItemRx=new Rx.Subject,this.disposables.add(this.selectedItemRx.subscribe(stjs.bind(this,function(caption){this.captionsControl.captionsChangeRx.onNext(caption)}))),this.captionsControl.captionsSearchRx.subscribe(stjs.bind(this,function(searchValue){this.setStateSearchValue(searchValue)})),this.disposables.add(this.captionsControl.captionsChangeRx.subscribe(stjs.bind(this,function(caption){var _otherCaption=caption!=this.state.activeItem,_caption=null,_subsPluginState=new SubsPluginState;_otherCaption&&(_caption=caption),_subsPluginState.activeItem=_caption,_subsPluginState.visible=_otherCaption,this.setState(_subsPluginState)})));var captionHandlerRx=this.props.player.getCaptionHandlerRx();this.disposables.add(captionHandlerRx.subscribe(stjs.bind(this,function(cb){this.captionHandlerCallBack=cb})))},prototype.componentWillUnmount=function(){this.disposables.dispose()},prototype._getSubs=function(){var map=this.state.items.map(stjs.bind(this,function(item,aLong,items){var itemprops={};return itemprops.key=item.id,itemprops.subtitles=item,itemprops.rowsViewType=this.state.rowsViewType,itemprops.timeline=this.timeline,itemprops.timeUpdateRx=this.timeUpdateRx,itemprops.selectedFrameRx=this.selectedFrameRx,itemprops.selectedItemRx=this.selectedItemRx,itemprops.isItemActive=this.state.activeItem==item,itemprops.visible=this.state.visible,itemprops.searchValue=this.state.searchValue,itemprops.timeTrack=this.state.timeTrack,itemprops.zoom=this.state.zoom,React.createElement(SubsItemComponent,itemprops)}));return map},prototype._subsHeader=function(){var _subsHeaderProps={};return _subsHeaderProps.size=this.state.items.length,_subsHeaderProps.handleSubmit=stjs.bind(this,"handleSearchSubsSubmit"),_subsHeaderProps.onChange=stjs.bind(this,"onSearchSubsChange"),_subsHeaderProps.zoomRows=stjs.bind(this,"_zoomRows"),_subsHeaderProps.searchValue=this.state.searchValue,_subsHeaderProps.onAddCaptions=this.captionHandlerCallBack,_subsHeaderProps.onIconClick=stjs.bind(this,"onSwitchViewType"),_subsHeaderProps.rowsViewType=this.state.rowsViewType,_subsHeaderProps.zoomMax=SubsPluginComponent.ZOOM_MAX,_subsHeaderProps.zoomMin=SubsPluginComponent.ZOOM_MIN,_subsHeaderProps.zoomPoints=SubsPluginComponent.ZOOM_POINTS,_subsHeaderProps.zoomValue=this.state.zoom,React.createElement(SubsHeaderView,_subsHeaderProps)},prototype.onSwitchViewType=function(viewType){var _subsPluginState=new SubsPluginState;_subsPluginState.rowsViewType=viewType,viewType==ViewConsts.LIST&&(_subsPluginState.zoom=0),this.setState(_subsPluginState)},prototype.onSearchSubsChange=function(e){var target=e.target;this.setStateSearchValue(target.value)},prototype.setStateSearchValue=function(value){var _subsPluginState=new SubsPluginState;_subsPluginState.searchValue=value,this.setState(_subsPluginState)},prototype.handleSearchSubsSubmit=function(e){e.preventDefault(),this.captionsControl.captionsSearchRx.onNext(this.state.searchValue)},prototype._zoomRows=function(e){e.preventDefault();var target=e.target,pluginState=new SubsPluginState;pluginState.zoom=parseInt(target.value),this.setState(pluginState)},prototype.render=function(){return React.DOM.div(ReactViewUtils.className(SubsPluginComponent.WRAP_CAPTIONS),this._subsHeader(),React.DOM.div(ReactViewUtils.className(ViewConsts.CAPTIONS_LIST),this._getSubs()))},constructor.SubsPluginProps=function(){PluginProps.call(this)},constructor.SubsPluginProps=stjs.extend(constructor.SubsPluginProps,PluginProps,[],function(constructor,prototype){prototype.subsRx=null,prototype.captionsControl=null,prototype.displayName=null},{subsRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},captionsControl:"CaptionsControl",player:"VGPlayerPluginApi"},{})},{disposables:"Rx.CompositeDisposable",props:"SubsPluginComponent.SubsPluginProps",state:"SubsPluginState",selectedFrameRx:{name:"Rx.Subject",arguments:[null]},selectedItemRx:{name:"Rx.Subject",arguments:["Subtitles"]},captionsControl:"CaptionsControl",captionHandlerCallBack:"Callback0",timeUpdateRx:{name:"Rx.Observable",arguments:["TimeSample"]},timeline:"Timeline",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var ContexterComponent=function(props){React.Component.call(this,props);var timeline=props.player.getTimeline();this.timeupdate=props.player.getTimeUpdateRx(),this.state={initialized:!1,progress:-1,data:null,duration:timeline.getDurationSec(),framecount:timeline.getFrameCount(),searchString:"",overlays:!0}};ContexterComponent=stjs.extend(ContexterComponent,React.Component,[],function(constructor,prototype){prototype.timeupdate=null,prototype.selectedWord=null,prototype.renderWordsComponent=function(d,word,_overlays){var wordsProps={};wordsProps.data=d,wordsProps.timeupdate=this.timeupdate,wordsProps.minConfidence=.3,wordsProps.word=word,wordsProps.render=_overlays;var component=React.createElement(ContexterWordsComponent,wordsProps);ReactDOM.render(component,this.props.wordsContainer)},prototype.init=function(){this.setState({initialized:!0,progress:this.state.progress,data:this.state.data})},prototype.render=function(){if(this.state.initialized){var tableProps={};tableProps.data=this.state.data,tableProps.track=this.renderTrack(),tableProps.rowClick=stjs.bind(this,"rowClick"),tableProps.wordSelect=stjs.bind(this,"wordSelect"),tableProps.videoFramesCount=this.state.framecount,tableProps.containerWidth=this.props.containerWidth;var headerProps={};return headerProps.handleSubmit=stjs.bind(this,"handleSearchSubmit"),headerProps.detect=this.props.detect,headerProps.stop=this.props.stop,headerProps.openInVideoLog=this.props.openInVideoLog,headerProps.onSearchChange=stjs.bind(this,"onSearchChange"),headerProps.progress=this.state.progress,headerProps.searchString=this.state.searchString,headerProps.toggleOverlays=stjs.bind(this,"onToggleOverlays"),headerProps.overlayClass=this.state.overlays?ViewConsts.VG_ICON_TAG:ViewConsts.VG_ICON_NOTAG,React.DOM.div({className:ContexterConsts.VG_CONTEXTER_CONTAINER},React.createElement(ContexterHeader,headerProps),React.createElement(ContexterTableComponent,tableProps))}return React.DOM.div({className:ViewConsts.VG_LOADING_SPINNER})},prototype.onToggleOverlays=function(e){var _overlays=!this.state.overlays;this.renderWordsComponent(this.state.data,this.selectedWord,_overlays),this.setState({overlays:_overlays})},prototype.handleSearchSubmit=function(e){e.preventDefault(),this.renderWordsComponent(this.state.data,this.selectedWord,this.state.overlays)},prototype.onSearchChange=function(e){var filtered,value=e.target.value;this.state.searchString.contains(value)&&value.length==this.state.searchString.length-1?(filtered=this.state.data.parent,filtered.clear()):filtered=this.state.data.filterByWordName(value),this.setState({searchString:value,data:filtered})},prototype.wordSelect=function(word){this.selectedWord=word,this.renderWordsComponent(this.state.data,this.selectedWord,this.state.overlays)},prototype.rowClick=function(e){var clientRect=e.currentTarget.getBoundingClientRect(),x=e.clientX-clientRect.left,k=x/clientRect.width,frame=stjs.trunc(this.state.framecount*k);this.props.player.seekFrame(frame)},prototype.renderTrack=function(){var trackProps={};return trackProps.cssClass=ContexterConsts.VG_CONTEXTER_TRACK,trackProps.color=ViewConsts.PRIMARY_COLOR,trackProps.framecount=this.state.framecount,trackProps.timeupdate=this.timeupdate,React.createElement(TimeTrackComponent,trackProps)},prototype.setData=function(d){this.setState({initialized:this.state.initialized,progress:this.state.progress,data:d}),this.renderWordsComponent(d,this.selectedWord,this.state.overlays)},prototype.setProgress=function(newProgress){this.setState({initialized:this.state.initialized,progress:newProgress,data:this.state.data})}},{timeupdate:{name:"Rx.Observable",arguments:["TimeSample"]},selectedWord:"ContexterWord",propTypes:{name:"Map",arguments:[null,"TypeChecker"]},context:"Object",contextTypes:{name:"Map",arguments:[null,null]},childContextTypes:{name:"Map",arguments:[null,null]},refs:{name:"Map",arguments:[null,"Element"]}},{});var PlayerMain=function(){};PlayerMain=stjs.extend(PlayerMain,null,[],function(constructor,prototype){constructor.canvasToBlob=function(canvas){return Utils.canvasToBlob(canvas)},constructor.parseSubtitlesFromUrl=function(title,timeline,url,onLoaded){Captions.parseSubs(timeline,url,Captions.guessSubtitleCodec(url),function(err,subs){null==err?(subs.title=title,onLoaded(subs)):console.error("bummer. failed importing subtitles from "+url)},LogLevel.INFO)},constructor.videolog=function(player,mediaId,videologStorageUrl,videologEl,initialTrackName,onReady){var videologStorage=new RestVideoLogAsyncStorage(player.http,videologStorageUrl,function(videologAsyncStorage){},player.getLog()),logView=new VideoLogView(player,videologEl),videoLog=new VideoLogPlugin(videologStorage,player,logView);videoLog.initialTrackName=initialTrackName,videoLog.setMediaId(mediaId),videologStorage.loggedUser(videologStorageUrl+"user.json",function(user){console.log("vlog user is",user),videoLog.setCurrentUser(user),videologStorage.loadTags(videologStorageUrl+"tags.json",function(tagsById){videologStorage.displayNamesById=tagsById,videologStorage.tracksOfProxy(mediaId,function(tracks){for(var i=0;i<tracks.length;i++){var t=tracks[i];videologStorage.getTrackChangedRx().onNext(t)}for(var namesToCreate=RAMVideologAsyncStorage.defaultTrackNames.filter(function(displayName,aLong,strings){return 0==tracks.filter(function(track,aLong1,trackArray){return track.displayName.equals(displayName)}).length}),i=0;i<namesToCreate.length;i++){var displayName=namesToCreate[i],t=new Track(displayName,videoLog.getCurrentUser());t.mediaId=mediaId,t.canDelete=!1,videologStorage.saveTrack(t,function(track){console.log("default track created",track.displayName)},function(e){console.error("Can not create default track",e)})}})})}),onReady(videoLog)}},{},{});var SkinnedPlayerView=function(container,log){PlayerView.call(this,container,log),this.pluginsPanelRx=new Rx.ReplaySubject};SkinnedPlayerView=stjs.extend(SkinnedPlayerView,PlayerView,[],function(constructor,prototype){prototype.controlsPanelView=null,prototype.pluginsPanelRx=null,prototype.playerContainer=null,prototype.lastCutlistHeight=0,prototype.lastTimecodesPosition=null,prototype.timeControls=null,prototype.cutlistFilmstrip=null,prototype.filmstripEl=null,prototype.bottomPanel=null,prototype.leftPanelEl=null,prototype.filmstrip=null,prototype.audioMutable=!1,prototype.volumeRangeEl=null,prototype.muteAllButton=null,prototype.proPanelModeRx=null,prototype.fullscreenClickRx=null,prototype.shotsView=null,prototype.skin=null,prototype.videoList=null,prototype.captionsList=null,prototype.captionsHeader=null,prototype.audioViewEl=null,prototype.cutlistFilmstripEl=null,prototype.scrubbing=!1,prototype.scrubberMouseDown=!1,prototype.timeScrubberView=null,prototype.openLeftPanel=function(open){var self=this;open?(this.container.classList.remove("vg_minimizedLeftPanel"),this.timeControls.style.left="105px",this.timeControls.style.top="auto",this.timeControls.draggable=!1,this.container.classList.remove("vg_cutlistOpened"),this.player.options.playlist&&(this.cutlistFilmstrip.isVisible=!1),this.computePlayerContainerHeight()):(this.container.classList.add("vg_minimizedLeftPanel"),this.timeControls.style.left=this.lastTimecodesPosition.left,this.timeControls.style.top=this.lastTimecodesPosition.top,this.timeControls.draggable=!0),setTimeout(stjs.bind(this,function(){self.filmstripEl.style.width=self.bottomPanel.getBoundingClientRect().width-self.leftPanelEl.getBoundingClientRect().width+"px";try{self.filmstrip.draw()}catch(e){this.player.getLog().error("filmstrip load error")}}),10)},prototype.init=function(player){if(!stjs.isInstanceOf(player.constructor,SkinnedPlayer))throw new RuntimeException("SkinnedPlayer implementation expected");PlayerView.prototype.init.call(this,player),this.audioMutable=this.player.isAudioMutable();var allControlsContainer=this.container.querySelector(".vg_allControls"),controlsPanelView=new ControlsPanelView(this.player,allControlsContainer,this,null);this.volumeRangeEl=controlsPanelView.getVolumeRangeEl(),this.timeControls=controlsPanelView.getTimeControls(),this.muteAllButton=controlsPanelView.getVolumeBtn(),this.fullscreenClickRx=controlsPanelView.getFullscreenClickRx(),this.fullscreenClickRx.subscribe(stjs.bind(this,function(button){this.toggleFullscreen()})),this.controlsPanelView=controlsPanelView,this.initTimeScrubs(allControlsContainer),this.includeProPanel()},prototype.initTimeScrubs=function(allControlsContainer){this.timeScrubberView=new TimeScrubberView(this.player,allControlsContainer,this,null);var scrubberEl=this.timeScrubberView.scrubberEl,startScrubbing=stjs.bind(this,function(e){
this.scrubbing=!0;var x=VGView.offsetX(e.clientX,scrubberEl),sec=this.getSecByMouseX(x,scrubberEl);this.player.getVideoElement().startQuickSeek(),this.seekSecAndCheckRange(sec)}),scrub=stjs.bind(this,function(e){if(e.stopPropagation(),this.scrubbing){var x=VGView.offsetX(e.clientX,scrubberEl),sec=this.getSecByMouseX(x,scrubberEl);this.seekSecAndCheckRange(sec)}}),stopScrubbing=stjs.bind(this,function(e){this.scrubbing&&(this.scrubbing=!1,this.player.getVideoElement().endQuickSeek())});this.timeScrubberView.scrubberDownRx.subscribe(stjs.bind(this,function(e){var x=VGView.offsetX(e.clientX,scrubberEl),sec=this.getSecByMouseX(x,scrubberEl);this.seekSecAndCheckRange(sec),this.scrubberMouseDown=!0})),this.timeScrubberView.scrubberMoveRx.subscribe(stjs.bind(this,function(e){this.scrubberMouseDown&&(this.scrubbing?scrub(e):startScrubbing(e))})),this.pluginsPanelRx.subscribe(stjs.bind(this,function(propanel){this.timeScrubberView.scrubberMoveRx.subscribe(function(e){propanel.overlayMoveRx.onNext(e)}),propanel.overlayDownRx.subscribe(startScrubbing),propanel.overlayMoveRx.subscribe(stjs.bind(this,function(e){this.scrubbing&&(scrub(e),this.timeScrubberView.scrubberMoveRx.onNext(e))}))})),this.autoDisposable(Rx.Observable.fromEvent(scrubberEl.ownerDocument,"mouseup").subscribe(stjs.bind(this,function(e){this.scrubberMouseDown=!1,stopScrubbing(e)})))},prototype.getSecByMouseX=function(x,scrubberEl){var duration=this.player.getSeekableDurationSec(),width=scrubberEl.clientWidth;return x*duration/width},prototype.includeProPanel=function(){this.container.classList.add("vg_propanelMode");var propanelContainer=this.container.querySelector(".vg_proPanel");this.controlsPanelView.el.insertAdjacentHTML("beforeend",'<div class="vg_default vg_proPanel__toggle"></div>'),this.proPanelModeRx=Rx.Observable.fromEvent(this.controlsPanelView.el.querySelector(".vg_proPanel__toggle"),"click").map(stjs.bind(this,function(e){this.player.getLog().debug("PRO"),this.player.getLog().debug(e);var proContainer=this.container.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER);return Utils.isFullScreen()?(console.log(">>>>>>>>>>>>>>> GA"),this.playerContainer.style.height="70%",propanelContainer.style.height="30%"):console.log("<<<<<<<<<<<<<<<<< NE GA"),proContainer.classList.contains("hidden")})),this.proPanelModeRx.subscribe(stjs.bind(this,function(show){var panelContainer=this.container.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER);show?panelContainer.classList.remove("hidden"):panelContainer.classList.add("hidden")}));var propanelPlugins=Utils.defaultArray(this.player.options.plugins).filter(function(s,aLong,strings){var p=PlayerOptions.PLUGINS.valueOf(s);return p!=PlayerOptions.PLUGINS.filmstrip&&p!=PlayerOptions.PLUGINS.waveform}),panelIsCollapsed=0==propanelPlugins.length,pluginsPanelView=new PluginsPanelView(this.player,propanelContainer,panelIsCollapsed,this,null,this.controlsPanelView.el);this.pluginsPanelRx.onNext(pluginsPanelView)},prototype.captionsAddHandler=function(){throw new RuntimeException("captionsAddHandler TODO")},prototype.audioAddHandler=function(){throw new RuntimeException("audioAddHandler TODO")},prototype.createLogo=function(){var vgLogo=window.document.createElement("div");vgLogo.classList.add("vg_vglogo"),this.container.appendChild(vgLogo)},prototype.createNoSourcePlaceholder=function(){var noSourcePlaceholder=window.document.createElement("div");noSourcePlaceholder.classList.add("vg_noSourcePlaceholder"),noSourcePlaceholder.innerHTML="<p>No movie to play</p>",this.container.appendChild(noSourcePlaceholder)},prototype.computePlayerContainerHeight=function(){if(this.player.options.playlist){var cutlistsHeight=this.container.querySelector(".vg_cutlistPanel").getBoundingClientRect().height;this.playerContainer.style.marginTop=cutlistsHeight+"px",this.playerContainer.style.height=this.container.getBoundingClientRect().height-30-cutlistsHeight+"px",Integer.parseInt(this.timeControls.style.top)==this.lastCutlistHeight+30&&(this.lastTimecodesPosition.top="40px",this.timeControls.style.top="40px"),Utils.toInt(this.timeControls.offsetTop)<cutlistsHeight&&(this.lastTimecodesPosition.top=cutlistsHeight+30+"px",this.timeControls.style.top=cutlistsHeight+30+"px")}},prototype.openPlaylistPanel=function(){var self=this;self.container.classList.add("vg_cutlistOpened"),this.cutlistFilmstrip.isVisible=!0,self.videoList.classList.remove("is-shown"),self.captionsList.classList.remove("is-shown"),self.captionsHeader.classList.remove("is-opened"),self.audioViewEl.classList.remove("is-shown"),this.lastCutlistHeight=stjs.trunc(this.container.querySelector(".vg_cutlistPanel").getBoundingClientRect().height),this.computePlayerContainerHeight(),self.openLeftPanel(!1)},prototype.closePlaylistPanel=function(){var self=this;self.container.classList.remove("vg_cutlistOpened"),this.cutlistFilmstrip.isVisible=!1,self.videoList.classList.remove("is-shown"),self.captionsList.classList.remove("is-shown"),self.captionsHeader.classList.remove("is-opened"),self.audioViewEl.classList.remove("is-shown"),this.computePlayerContainerHeight(),self.openLeftPanel(!1)},prototype.createProPanel=function(){this.leftPanelEl=window.document.createElement("div"),this.leftPanelEl.innerHTML=VG["templates/player/propanel.html"]({}),this.container.appendChild(this.leftPanelEl)},prototype.seekFrameAndCheckRange=function(frame){this.player.checkRangeAndSeek(frame)},prototype.seekSecAndCheckRange=function(sec){this.player.checkRangeAndSeekSec(sec)},prototype.getTime=function(){return this.player.getTimeline()},prototype.getFrame=function(){return this.player.getCurrentFrame()},prototype.makeCutlistFilmstrip=function(){this.cutlistFilmstrip=new CutlistFilmstrip(this.player,this.cutlistFilmstripEl,{zoomMode:!0})},prototype.activateControlsPanel=function(){this.controlsPanelView.activateControlsPanel()},prototype.deactivateControlsPanel=function(){this.controlsPanelView.deactivateControlsPanel()},prototype.getCaptionsContainer=function(){return this.video.parentElement},prototype.initHotkeys=function(){PlayerView.prototype.initHotkeys.call(this),this.hm.addShortcut("down",stjs.bind(this,function(e){this.player.previousSec(1)}),KeyOptions.gd("Player","Next cut",!1)),this.hm.addShortcut("up",stjs.bind(this,function(e){return this.player.nextSec(1)}),KeyOptions.gd("Player","Previous cut",!1)),this.hm.addShortcut(",",stjs.bind(this,function(e){null!=this.shotsView&&this.filmstripEl.classList.contains("vg_shotsOn")&&this.shotsView.seekPrevShot()}),KeyOptions.gd("Player","Prev shot",!1)),this.hm.addShortcut(".",stjs.bind(this,function(e){null!=this.shotsView&&this.filmstripEl.classList.contains("vg_shotsOn")&&this.shotsView.seekNextShot()}),KeyOptions.gd("Player","Next shot",!1))},prototype.renderFatalError=function(err){var message;message="404"==err?"File you are trying to load was not found.":null==err||stjs.isInstanceOf(err.constructor,String)&&Utils.isNotBlank(err)?err:"Loading failed",this.playerContainer.innerHTML=VG["templates/player/load-error.html"]({message:message})},prototype.renderRange=function(fromFrame,toFrame){null!=this.filmstrip&&(this.filmstrip.setRange(fromFrame,toFrame),this.filmstrip.draw())},prototype.renderWhole=function(){if(null!=this.filmstrip)try{this.filmstrip.clearRange(),this.filmstrip.draw()}catch(e){this.player.getLog().error("filmstrip load error")}},prototype.showAsAudioPlayer=function(){this.playerContainer.classList.add("vg_invisible"),this.controlsPanelView.controlsView.fullscreenButton.classList.add("vg_invisible"),Utils.querySelectorNotNull(this.controlsPanelView.el,".vg_controls--addOn").classList.add("vg_invisible"),this.controlsPanelView.timeControlsEl.classList.add("vg_invisible"),this.controlsPanelView.controlsView.playControlsEl.classList.add("vg_audioControls")}},{controlsPanelView:"ControlsPanelView",pluginsPanelRx:{name:"Rx.ReplaySubject",arguments:["PluginsPanelView"]},playerContainer:"Element",lastTimecodesPosition:"LeftTop",timeControls:"Element",cutlistFilmstrip:"CutlistFilmstrip",filmstripEl:"Element",bottomPanel:"Element",leftPanelEl:"Element",filmstrip:"FilmstripView",volumeRangeEl:"Input",muteAllButton:"Element",proPanelModeRx:{name:"Rx.Observable",arguments:[null]},fullscreenClickRx:{name:"Rx.Observable",arguments:["Element"]},shotsView:"ShotsView",videoList:"Element",captionsList:"Element",captionsHeader:"Element",audioViewEl:"Element",cutlistFilmstripEl:"Element",timeScrubberView:"TimeScrubberView",player:"PlayerImpl",parentEl:"Element",log:"Log",container:"Element",video:"Video",trickVideo:"Video",hm:"HotkeyManager",playerContainer:"Element",frozenCanvas:"Canvas",fullscreenRx:{name:"Rx.Subject",arguments:[null]},spinner:"Element",autoDisposables:"Rx.CompositeDisposable",DO_NOTHING:{name:"Callback1",arguments:["DOMEvent"]},children:{name:"Array",arguments:["CloseableView"]}},{});var WaveformView=function(player,container,parentView,className,trackId,trackName,track){VGView.call(this,container,parentView,className),this.player=player,this.container=parentView.el,this.render(VG["templates/player/waveform.html"]({trackid:trackId,trackname:trackName})),this.waveformEl=this.el.querySelector(".vg_waveform"),this.track=track;var settings=new WaveformSettings;settings.color="#f4f4f4",settings.fillColor="#1DABFD",settings.disableRuler=!0,settings.twoSides=!0,settings.fancy=!0,settings.getFrame=function(){return player.getCurrentFrame()},this.waveform=new Waveform(player.http,this.waveformEl,player.getTimeline(),player.getTimelineRx(),track,settings,player.getLog()),this.onButton=this.el.querySelector(".vg_audioTrack__on"),this.offButton=this.el.querySelector(".vg_audioTrack__off"),this.onButton.addEventListener("click",stjs.bind(this,function(e){this.enableTrack(!0)})),this.offButton.addEventListener("click",stjs.bind(this,function(e){this.enableTrack(!1)}))};WaveformView=stjs.extend(WaveformView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.waveformEl=null,prototype.onButton=null,prototype.offButton=null,prototype.waveform=null,prototype.track=null,prototype.enableTrack=function(turnOnAction){this.onButton.classList.remove("vg_enabled"),this.offButton.classList.remove("vg_enabled");for(var waveListView=this.parent,currentTracks=waveListView.el.querySelectorAll(".vg_currenttrack"),i=0;i<currentTracks.length;i++)currentTracks[i].classList.remove("vg_currenttrack");if(turnOnAction){waveListView.waveforms.forEach(stjs.bind(this,function(w){w.getTrack().id().equals(this.getTrack().id())||w.enableTrack(!1)})),this.player.getCurrentAudioTrack().proxyId!=this.track.proxyId&&this.player.setCurrentAudioTrack(this.track.id());var vol=Utils.toInt(this.player.getView().volumeRangeEl.value);0==vol&&(this.player.setVolume(Math.max(.5,vol/100)),this.player.getView().volumeRangeEl.value=Double.toString(100*this.player.getVolume())),this.onButton.classList.add("vg_enabled"),this.el.classList.add("vg_currenttrack")}else this.offButton.classList.add("vg_enabled"),waveListView.waveforms.length>1&&this.player.muteAudioTrack(this.track.id()),0!=waveListView.el.querySelectorAll(".vg_currenttrack").length&&(this.player.setVolume(0),this.player.getView().volumeRangeEl.value="0")},prototype.getTrack=function(){return this.track},prototype.update=function(timeline){this.waveform.update(timeline)}},{player:"SkinnedPlayerImpl",waveformEl:"Element",onButton:"Element",offButton:"Element",waveform:"Waveform",track:"PlayerAudioTrack",el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var SubsPlugin=function(player){BasePlugin.call(this,SubsPlugin.PLUGIN_ID),player.registerPlugin(this),this.props={},this.props.displayName="SubsPluginView",this.props.name="SubsPlugin",this.props.key="SubsPlugin",this.props.subsRx=this.pluginApi.getCaptionListChangeRx(),this.props.player=this.pluginApi,this.props.captionsControl=this.getSkinnedPlayer().getCaptionControl()};SubsPlugin=stjs.extend(SubsPlugin,BasePlugin,[],function(constructor,prototype){constructor.VG_ICON_CC="vg_icon-cc",constructor.PLUGIN_ID="subsplugin",prototype.props=null,prototype.getProps=function(){return this.props},prototype.renderInto=function(container,containerWidth,onDone){ReactDOM.render(React.createElement(SubsPluginComponent,this.props),container),onDone()}},{props:"SubsPluginComponent.SubsPluginProps",pluginApi:"VGPlayerPluginApi"},{});var ContexterPlugin=function(){BasePlugin.call(this,ContexterPlugin.PLUGIN_ID)};ContexterPlugin=stjs.extend(ContexterPlugin,BasePlugin,[],function(constructor,prototype){constructor.PLUGIN_ID="contexter",constructor.PLUGIN_ICON="vg_icon-tag",prototype.view=null,prototype.wordsContainer=null,prototype.detect=null,prototype.stop=null,prototype.openInVideoLog=null,prototype.renderInto=function(container,containerWidth,onDone){var props={};props.player=this.pluginApi,props.wordsContainer=this.wordsContainer,props.containerWidth=containerWidth,props.detect=stjs.bind(this,"onDetect"),props.stop=stjs.bind(this,"onStop"),props.openInVideoLog=stjs.bind(this,"onOpenInVideoLog");var component=React.createElement(ContexterComponent,props);this.view=ReactDOM.render(component,container),onDone()},prototype.init=function(){this.view.init()},prototype.setData=function(data){this.view.setData(data)},prototype.setProgress=function(progress){this.view.setProgress(progress)},prototype.setWordsContainer=function(wordsDiv){this.wordsContainer=wordsDiv},prototype.setDetectHandler=function(handler){this.detect=handler},prototype.onDetect=function(){null!=this.detect&&this.detect()},prototype.setStopHandler=function(handler){this.stop=handler},prototype.onStop=function(){null!=this.stop&&this.stop()},prototype.setOpenInVideoLogHandler=function(handler){this.openInVideoLog=handler},prototype.onOpenInVideoLog=function(){null!=this.openInVideoLog&&this.openInVideoLog()}},{view:"ContexterComponent",wordsContainer:"Element",detect:"Callback0",stop:"Callback0",openInVideoLog:"Callback0",pluginApi:"VGPlayerPluginApi"},{});var WaveformListView=function(player,container,parentView,className){VGView.call(this,container,parentView,className),this.player=player,this.el=VGTemplates.elFromHTML('<div class="vg_waveforms__wrap vg_background"></div>',player.container.ownerDocument),this.el.className="vg_waveforms",this.container.appendChild(this.el),this.appendEl=this.el.querySelector(".vg_waveforms__wrap"),this.waveforms=[],player.audioTracksRx.subscribe(stjs.bind(this,function(track){for(var i=0;i<this.waveforms.length;i++){var tId=this.waveforms[i].getTrack().id();if(track.id().equals(tId))return}track.channelOffset=0,this.waveforms.push(new WaveformView(player,this.appendEl,this,className,track.id(),track.filename,track))}))};WaveformListView=stjs.extend(WaveformListView,VGView,[],function(constructor,prototype){prototype.player=null,prototype.appendEl=null,prototype.waveforms=null,prototype.update=function(timeline){for(var i=0;i<this.waveforms.length;i++)this.waveforms[i].update(timeline)}},{player:"SkinnedPlayerImpl",appendEl:"Element",waveforms:{name:"Array",arguments:["WaveformView"]},el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var WaveFormPlugin=function(player){VGPlugins.call(this,player),player.getView().pluginsPanelRx.subscribe(stjs.bind(this,function(panelView){this.player.container.classList.add("vg_propanelMode"),this.waveformListView=new WaveformListView(player,panelView.container,player.getView(),null)})),player.getTimelineRx().debounce(200).subscribe(stjs.bind(this,function(timeline){player.getLog().debug("getTimelineRx()"),this.waveformListView.update(timeline)}))};WaveFormPlugin=stjs.extend(WaveFormPlugin,VGPlugins,[],function(constructor,prototype){prototype.waveformListView=null},{waveformListView:"WaveformListView",player:"PlayerImpl",view:"VGView"},{});var SkinnedPlayerImpl=function(container,options){PlayerImpl.call(this,container,options)};SkinnedPlayerImpl=stjs.extend(SkinnedPlayerImpl,PlayerImpl,[SkinnedPlayer],function(constructor,prototype){prototype.captionsControl=null,prototype.addSelection=null,prototype.removeSelection=null,prototype.filmstrip=null,prototype.selections=null,prototype.waveform=null,prototype.videoLog=null,prototype.createView=function(){var view=new SkinnedPlayerView(this.container,this.getLog());return this.getErrorRx().subscribe(function(err){err.severity==PlayerError.FATAL&&view.renderFatalError(err.message)}),view},prototype.getView=function(){return this.view},prototype.setCaptionControl=function(captionsControl){this.captionsControl=captionsControl},prototype.getCaptionControl=function(){return this.captionsControl},prototype.initPlugins=function(plugins){({model:this,mainView:this.view,serverUrl:this.options.serverUrl});Utils.contains(plugins,"selections")&&null==this.selections&&(this.selections=new FrameSelections(this),this.pluginRx.onNext(this.selections)),Utils.contains(plugins,Filmstrip.PLUGIN_ID)&&null==this.filmstrip&&(this.filmstrip=new Filmstrip(this),this.pluginRx.onNext(this.filmstrip)),Utils.contains(plugins,"waveform")&&null==this.waveform&&(this.waveform=new WaveFormPlugin(this),this.pluginRx.onNext(this.waveform))}},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var ABCThemePlayer=function(container,options){SkinnedPlayerImpl.call(this,container,options)};ABCThemePlayer=stjs.extend(ABCThemePlayer,SkinnedPlayerImpl,[],function(constructor,prototype){constructor.THEME="abc"},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var RRThemePlayer=function(container,options){SkinnedPlayerImpl.call(this,container,options),this.initRx.subscribe(stjs.bind(this,function(player){var view=this.getView();if(null==view.skin){var safeAreaPlugin=new SafeAreaPlugin(player);this.getVideoElement().getVideoShownRx().subscribe(stjs.bind(this,function(v){safeAreaPlugin.applyCrop(this.getVideoElement())})),view.controlsPanelView.enableControl(safeAreaPlugin.getControlButton()),view.controlsPanelView.enableControl(new StepsView(this,view.playerContainer,view,null)),view.controlsPanelView.enableControl(new SubtitlesMenuControl(this)),view.skin=RRThemePlayer.THEME,this.getLog().info("rr theme enabled")}}))};RRThemePlayer=stjs.extend(RRThemePlayer,SkinnedPlayerImpl,[],function(constructor,prototype){constructor.THEME="rr",constructor.buildFCPXml=function(player,logEventsData,filename){var parsedArray=JSON.parse(logEventsData),events=parsedArray.map(function(map,aLong,strings){return LogEvent.fromJson(map)});return VideoLogPlugin.buildFCPXml(player,events,filename)}},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var VGThemePlayer=function(container,options){SkinnedPlayerImpl.call(this,container,options),this.iconClick=new Rx.Subject,this.panelDisplay=new Rx.Subject,this.initRx.subscribe(stjs.bind(this,function(player){this.onEveryPlayerInit()})),this.initRx.distinctUntilChanged().subscribe(stjs.bind(this,function(player){this.getLog().debug("distinctUntilChanged",player),this.onDistinctPlayerInit()})),this.iconClick.subscribe(stjs.bind(this,function(el){el!=this.activeAddon&&(this.deactivateAddon(),this.activeAddon=el),this.activeAddon.classList.toggle("active")}))};VGThemePlayer=stjs.extend(VGThemePlayer,SkinnedPlayerImpl,[],function(constructor,prototype){constructor.THEME="vg",prototype.captionsControl=null,prototype.cropControl=null,prototype.deactivateAddon=function(){null!=this.activeAddon&&this.activeAddon.classList.remove("active")},prototype.activatePanel=function(){this.controlsPanel.classList.add("active"),this.panelDisplay.onNext(!0)},prototype.deactivatePanel=function(){this.controlsPanel.classList.remove("active"),this.panelDisplay.onNext(!1)},prototype.hide=function(el){el.classList.add("vg_invisible")},prototype.show=function(el){el.classList.remove("vg_invisible")},prototype.toggle=function(el){return el.classList.contains("vg_invisible")?(this.show(el),!0):(this.hide(el),!1)},prototype.iconClick=null,prototype.panelDisplay=null,prototype.activeAddon=null,prototype.controlsPanel=null,prototype.onDistinctPlayerInit=function(){this.getView().pluginsPanelRx.subscribe(stjs.bind(this,function(pluginsPanelView){this.getLog().debug("pluginpanel ready");var vgProPanelView=({parentView:pluginsPanelView,container:pluginsPanelView.el,model:this,className:"vgtheme_pro-panel"},new VGThemeProPanelView(pluginsPanelView.el,pluginsPanelView,"vgtheme_pro-panel"));this.pluginRx.subscribe(stjs.bind(this,function(plugin){"videolog".equals(plugin.type)&&(this.getLog().debug("videolog ready"),vgProPanelView.addPluginView())}))}))},prototype.onEveryPlayerInit=function(){var controlsContainer=this.getView().controlsPanelView.getControlsContainer(),videoContainer=({container:controlsContainer,mainView:this.view,parentView:this.view,model:this,serverUrl:this.options.serverUrl},this.container.querySelector(".vg_player"));new VideoControl(this),new AudioControl(this),new StepsControl(this),this.cropControl=new CropControl(this);var safeAreaPlugin=new SafeAreaPlugin(this);safeAreaPlugin.applyCrop(this.getVideoElement()),this.setCaptionControl(new CaptionsControl(this));var timeControlsBox=({container:videoContainer,mainView:this.view,parentView:this.view,model:this,serverUrl:this.options.serverUrl},new TimeControlsBox(this,videoContainer,this.view)),durationBox=new DebugInfoBox(this,videoContainer,this.view);null!=this.view.hm&&this.view.hm.addShortcut("`",stjs.bind(this,function(e){return this.toggle(durationBox.view.el)}),KeyOptions.gd("Player","Show/hide debug panel",!1));var controlsPanelView=this.getView().controlsPanelView;this.controlsPanel=controlsPanelView.el;var filmStripEl=null;null!=this.getView().filmstrip&&(filmStripEl=this.getView().filmstrip.el);var openPanelBtn=controlsPanelView.el.querySelector(".vg_closeLeftPanel"),controlPanelObservable=Rx.Observable.fromEvent(openPanelBtn,"click");this.activeAddon=controlsPanelView.el.querySelector(".vg_addonview.active");var finalFilmStripEl=filmStripEl;controlPanelObservable.subscribe(stjs.bind(this,function(x){this.deactivatePanel(),this.deactivateAddon(),null!=finalFilmStripEl&&finalFilmStripEl.classList.toggle("vg_filmstrip--narrow")})),this.iconClick.subscribe(stjs.bind(this,function(el){this.activatePanel(),null!=finalFilmStripEl&&finalFilmStripEl.classList.add("vg_filmstrip--narrow")})),this.panelDisplay.subscribe(stjs.bind(this,function(panelVisible){var timeControlsEl=timeControlsBox.view.el;panelVisible?this.hide(timeControlsEl):this.show(timeControlsEl)}))},prototype.setCaptionControl=function(captionsControl){this.captionsControl=captionsControl},prototype.getCaptionControl=function(){return this.captionsControl},prototype.getCaptionListChangeRx=function(){return this.captionListChangeRx},prototype.close=function(){PlayerImpl.prototype.close.call(this),null!=this.cropControl&&this.cropControl.close()}},{captionsControl:"CaptionsControl",cropControl:"CropControl",iconClick:{name:"Rx.Subject",arguments:["Element"]},panelDisplay:{name:"Rx.Subject",arguments:[null]},activeAddon:"Element",controlsPanel:"Element",captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var DeltaThemePlayer=function(container,options){SkinnedPlayerImpl.call(this,container,options),this.initRx.subscribe(stjs.bind(this,function(player){null==this.getView().skin&&(this.getView().skin=DeltaThemePlayer.THEME,this.getLog().info(DeltaThemePlayer.THEME+" theme enabled"))}))};DeltaThemePlayer=stjs.extend(DeltaThemePlayer,SkinnedPlayerImpl,[],function(constructor,prototype){constructor.THEME="delta"},{captionsControl:"CaptionsControl",addSelection:{name:"Callback2",arguments:[null,null]},removeSelection:{name:"Callback2",arguments:[null,null]},filmstrip:"Filmstrip",selections:"FrameSelections",waveform:"WaveFormPlugin",videoLog:"VideoLogPlugin",log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",
initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var RequireModuleExposed=function(){};RequireModuleExposed=stjs.extend(RequireModuleExposed,null,[],function(constructor,prototype){constructor.Captions=Captions,constructor.Player=PlayerImpl,constructor.RRThemePlayer=RRThemePlayer,constructor.PlayerMain=PlayerMain,constructor.ExternalTheme=ExternalTheme,constructor.LogLevel=LogLevel},{Captions:"Class",Player:"Class",RRThemePlayer:"Class",PlayerMain:"Class",ExternalTheme:"Class",LogLevel:"Class"},{});var Player=function(container,options){VGThemePlayer.THEME.equals(options.theme)?this.player=new VGThemePlayer(container,options):RRThemePlayer.THEME.equals(options.theme)?this.player=new RRThemePlayer(container,options):DeltaThemePlayer.THEME.equals(options.theme)?this.player=new DeltaThemePlayer(container,options):ABCThemePlayer.THEME.equals(options.theme)?this.player=new ABCThemePlayer(container,options):this.player=new PlayerImpl(container,options)};Player=stjs.extend(Player,null,[VGPlayerPublicApi],function(constructor,prototype){prototype.player=null,prototype.close=function(){this.player.close()},prototype.addCaptionsHandler=function(cb){this.player.addCaptionsHandler(cb)},prototype.audioAddHandler=function(cb){this.player.audioAddHandler(cb)},prototype.addCaptions=function(input){this.player.addCaptions(input)},prototype.load=function(url,onDone){this.player.load(url,onDone)},prototype.loadUrl=function(url,onDone){this.player.loadUrl(url,onDone)},prototype.loadAudioTrack=function(url,displayName,onDone){this.player.loadAudioTrack(url,displayName,onDone)},prototype.setAudioTrackUrl=function(trackId,url,onDone){this.player.setAudioTrackUrl(trackId,url,onDone)},prototype.conformAudioTrack=function(trackId,offset){this.player.conformAudioTrack(trackId,offset)},prototype.getAudioTrack=function(id){return this.player.getAudioTrack(id)},prototype.setCurrentAudioTrack=function(id){this.player.setCurrentAudioTrack(id)},prototype.addAudioTrack=function(displayName,channelNames){return this.player.addAudioTrack(displayName,channelNames)},prototype.addAudioTrackWithId=function(id,displayName,channelNames){return this.player.addAudioTrackWithId(id,displayName,channelNames)},prototype.muteAudioTrack=function(id){this.player.muteAudioTrack(id)},prototype.togglePlay=function(){this.player.togglePlay()},prototype.play=function(){this.player.play()},prototype.pause=function(){this.player.pause()},prototype.getTimeline=function(){return this.player.getTimeline()},prototype.getCurrentTapeTimecode=function(){return this.player.getCurrentTapeTimecode()},prototype.getCurrentStandardTimecode=function(){return this.player.getCurrentStandardTimecode()},prototype.getCurrentFrame=function(){return this.player.getCurrentFrame()},prototype.getCurrentTime=function(){return this.player.getCurrentTime()},prototype.getCurrentTimeValue=function(){return this.player.getCurrentTimeValue()},prototype.seekSec=function(time){this.player.seekSec(time)},prototype.seek=function(anything){this.player.seek(anything)},prototype.seekFrame=function(fn){this.player.seekFrame(fn)},prototype.nextFrame=function(n){this.player.nextFrame(n)},prototype.previousFrame=function(n){this.player.previousFrame(n)},prototype.nextSec=function(n){this.player.nextSec(n)},prototype.previousSec=function(n){this.player.previousSec(n)},prototype.enterFullscreen=function(){this.player.enterFullscreen()},prototype.exitFullscreen=function(){this.player.exitFullscreen()},prototype.setRange=function(fromTimecode,toTimecode){this.player.setRange(fromTimecode,toTimecode)},prototype.cancelRange=function(){this.player.cancelRange()},prototype.hasRange=function(){return this.player.hasRange()},prototype.playAtRate=function(rate){this.player.playAtRate(rate)},prototype.playFasterBackwards=function(){this.player.playFasterBackwards()},prototype.playFaster=function(){this.player.playFaster()},prototype.setLoop=function(loop){this.player.setLoop(loop)},prototype.setPauseOnLoop=function(pauseOnLoop){this.player.setPauseOnLoop(pauseOnLoop)},prototype.getPlaybackRate=function(){return this.player.getPlaybackRate()},prototype.isPlaying=function(){return this.player.isPlaying()},prototype.getCurrentAudioTrack=function(){return this.player.getCurrentAudioTrack()},prototype.isAudioMutable=function(){return this.player.isAudioMutable()},prototype.setVolume=function(val){this.player.setVolume(val)},prototype.getVolume=function(){return this.player.getVolume()},prototype.getSeekableDurationSec=function(){return this.player.getSeekableDurationSec()},prototype.getDurationSec=function(){return this.player.getDurationSec()},prototype.getTimeSample=function(){return this.player.getTimeSample()},prototype.setVideoQuality=function(res){this.player.setVideoQuality(res)},prototype.setStartTapeTimecode=function(tapeTimecode){this.player.setStartTapeTimecode(tapeTimecode)},prototype.getCaptionsList=function(){return this.player.getCaptionsList()},prototype.getAudioTracks=function(){return this.player.getAudioTracks()},prototype.disableHotKeys=function(){this.player.disableHotKeys()},prototype.enableHotKeys=function(){this.player.enableHotKeys()},prototype.addEventListener=function(type,handler){this.player.addEventListener(type,handler)},prototype.removeEventListener=function(type,handler){this.player.removeEventListener(type,handler)},prototype.getFilmStripDrawer=function(callback){this.player.getFilmStripDrawer(callback)},prototype.registerPlugin=function(plugin){this.player.registerPlugin(plugin)},prototype.getBuffered=function(){return this.player.getBuffered()},prototype.setLogLevel=function(logLevel){this.player.setLogLevel(logLevel)}},{player:"PlayerImpl"},{});var PlayerDev=function(){};PlayerDev=stjs.extend(PlayerDev,null,[],function(constructor,prototype){constructor.SERVER_URL_KOTE="http://kote.videogorillas.com:8042/dash",constructor.justKoteProxyPlayer=function(containerEl){var options=new PlayerOptions;return options.hotkeys=!0,options.playlist=!1,options.search=!0,options.serverUrl=PlayerDev.SERVER_URL_KOTE,options.plugins=[PlayerOptions.PLUGINS.filmstrip.toString(),PlayerOptions.PLUGINS.waveform.toString()],new Player(containerEl,options)},constructor.mityaTest=function(){var root=window.document.body;ReactDOM.render(React.createElement(ZoomComponent,null),PlayerDev.createTestContainer(root)),ReactDOM.render(React.createElement(EventComponent,null),PlayerDev.createTestContainer(root))},constructor.createTestContainer=function(parentEl){var div=window.document.createElement("div");return parentEl.appendChild(window.document.createElement("hr")),parentEl.appendChild(div),div},constructor.vgVideoLog=function(){console.log("vgVideoLog"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),sUrl="http://localhost",player=new Player(pCont,{hotkeys:!0,playlist:!1,search:!1,serverUrl:sUrl,theme:VGThemePlayer.THEME,plugins:["filmstrip"]});player.loadUrl("http://localhost/qtspec.mov",function(loadResponse){if(console.log("loaded",player),Utils.isSomething(loadResponse))console.error(loadResponse);else{player.setStartTapeTimecode("01:00:00:00");var timeline=player.getTimeline(),proPanelContainer=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),proPanel=ReactDOM.render(ProPanelComponent.createElement(),proPanelContainer);proPanel.addPlugin(new SubsPlugin(player),SubsPlugin.VG_ICON_CC,function(){});var videoLog=new VideoLog({storage:VideoLogOptions.RAM_STORAGE});player.registerPlugin(videoLog),videoLog.init(function(){console.log("videolog init done"),proPanel.addPlugin(videoLog,VideoLog.PLUGIN_ICON,function(){videoLog.setImportHandler(function(onDone){return new Http(new Log(LogLevel.DEBUG)).getJson("http://localhost/code/vgplayer/JumpStreet.js",TrackData).subscribe(function(data){var events=data.events;data.events=[];for(var i=0;i<events.length;i++)data.events.push(Utils.cast(LogEvent,events[i]));onDone([data])},stjs.bind(console,"error"))}),console.log("everything loaded "+timeline)})})}}),window.PLAYER=player}},constructor.testCreateDocument=function(){var document=window.document.implementation.createDocument("http://www.w3.org/1999/xhtml","xml",null);console.log(document)},constructor.vgMain=function(playerContainer,proxyId,sUrl){var options=new PlayerOptions;options.hotkeys=!0,options.playlist=!1,options.search=!0,options.serverUrl=sUrl,options.plugins=[PlayerOptions.PLUGINS.filmstrip.toString()],options.theme=VGThemePlayer.THEME;var player=new Player(playerContainer,options);return player.load(proxyId,function(loadResp){console.log("player Loaded")}),player},constructor.testVGThemePlayer=function(){var playerEl=window.document.querySelector(".vgplayer"),player=PlayerDev.vgMain(playerEl,"m3019/v6374",PlayerDev.SERVER_URL_KOTE);return player.loadAudioTrack("m3020/v6379","m3020/v6379",function(onDone){return console.log("loadAudioTrack",onDone)}),player},constructor.testRRThemePlayer=function(staticVideoSrc,sUrl,proxyId,startTimecodeOverride,startTimecode,endTimecode){var playerEl=window.document.querySelector(".vgplayer"),options=new PlayerOptions;options.hotkeys=!0,options.playlist=!1,options.search=!0,options.serverUrl=sUrl,options.staticVideoSrc=Utils.toBoolean(staticVideoSrc),options.plugins=[PlayerOptions.PLUGINS.filmstrip.toString(),PlayerOptions.PLUGINS.waveform.toString()],options.theme=RRThemePlayer.THEME,console.log("player options: ",options,proxyId),console.log("timecodes: ",startTimecodeOverride,startTimecode,endTimecode);var player=new RRThemePlayer(playerEl,options);window.player=player;var addMediaView=new AddMediaView(VGTemplates.queryByVGPartNumber(window.document.body,AddMediaView.partNumber));return addMediaView.onYesNo(function(onYes){player.loadAudioTrack(addMediaView.getVGProxyId(),addMediaView.getVGProxyId(),function(onDone){return console.log("loadAudioTrack",onDone)}),addMediaView.close()},function(onCancel){addMediaView.close()}),player.addEventListener("init",function(o){player.getView().controlsPanelView.enableControl(new AddMediaControl(player,function(player1){addMediaView.open(),console.log("+ addmedia")})),VGCropPlugin.rrEnableCropPlugin(player,function(cropView,vgCropPlugin){var cropContainerEl=window.document.body.querySelector(".vg-cropplugin");cropContainerEl.innerHTML="",cropView.appendTo(cropContainerEl),cropContainerEl.style.display="block";var h=stjs.trunc(cropContainerEl.offsetWidth/cropView.frameImage.width)*cropView.frameImage.height;h>42&&(cropView.container.style.height=h+"px")})}),player.load(proxyId,function(loadResp){Utils.isNotBlank(startTimecodeOverride)&&player.setStartTapeTimecode(startTimecodeOverride),Utils.isNotBlank(startTimecode)&&Utils.isNotBlank(endTimecode)&&player.setRange(startTimecode,endTimecode),player.loadAudioTrack("m3205/v7143","m3205/v7143",function(onDone){return console.log("loadAudioTrack",onDone)})}),player},constructor.testLogMain=function(sUrl,proxyId,mediaId,originalFileName){window.onload=function(e){var playerEl=window.document.querySelector(".vglog-vgplayer"),vlogEl=window.document.querySelector(".vlog"),closestDoc=vlogEl.closest("html").parentNode,options=new PlayerOptions;options.hotkeys=!0,options.playlist=!1,options.search=!0,options.serverUrl=sUrl,options.plugins=[PlayerOptions.PLUGINS.filmstrip.toString()],options.theme=RRThemePlayer.THEME;var player=new RRThemePlayer(playerEl,options);window.player=player,player.load(proxyId,function(loadResp){PlayerMain.videolog(player,mediaId,"/api/source/vglogtool/",vlogEl,"CoMplIance",function(videoLogPlugin){player.enableHotKeysForDocument(closestDoc),videoLogPlugin.enableHotKeysForDocument(closestDoc),videoLogPlugin.onHotkeysClicked=function(domEvent){alert("HotKeys!")},videoLogPlugin.onCreateSubclipClick=function(subClip,logEvent){console.log("Subclip store request for ",logEvent)};var timeline=player.getTimeline();Captions.parseSubs(timeline,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(err,subs){null!=err?console.error(err):(Captions.offsetCaptions(subs,timeline.getTvByTimecode("09:59:50:00"),timeline),subs.title="Czech",player.addCaptionsObject(subs))},LogLevel.DEBUG)})})}},constructor.mymain=function(){console.log("hello"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),sUrl="http://localhost/",player=new PlayerImpl(pCont,{hotkeys:!0,playlist:!1,search:!0,serverUrl:sUrl,plugins:[Filmstrip.PLUGIN_ID,"waveform"]});player.load("taxi42",function(loadResponse){if(console.log(player),Utils.isSomething(loadResponse))console.error(loadResponse);else{var timeline=player.getTimeline();Captions.parseSubs(timeline,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(err,subs){null!=err?console.error(err):(Captions.offsetCaptions(subs,timeline.getTvByTimecode("09:59:50:00"),timeline),subs.title="Czech",player.addCaptionsObject(subs))},LogLevel.DEBUG),console.log("everything loaded "+timeline)}}),window.PLAYER=player}},constructor.lenamain=function(){console.log("hello"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),sUrl="http://localhost:8042/dash",player=new VGThemePlayer(pCont,{hotkeys:!0,playlist:!1,search:!0,serverUrl:sUrl,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});player.load("m16/v29",function(loadResponse){if(console.log(player),Utils.isSomething(loadResponse))console.error(loadResponse);else{var timeline=player.getTimeline();player.addCaptionsHandler(function(){console.log("kuku"),Captions.parseSubs(timeline,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(err,subs){null!=err?console.error(err):(Captions.offsetCaptions(subs,timeline.getTvByTimecode("09:59:50:00"),timeline),subs.title="Czech",player.addCaptions(subs))},LogLevel.DEBUG)}),player.audioAddHandler(function(){player.loadAudioTrack("m2725/v5533","1.mp3",function(onDone){return console.log("loadAudioTrack",onDone)})}),console.log("everything loaded "+timeline)}}),window.PLAYER=player}},constructor.mp4main=function(){var url="http://localhost/vgplayer_ng/pete51a.mp4";console.log("hello"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),sUrl="http://localhost/",player=new VGThemePlayer(pCont,{hotkeys:!0,playlist:!1,search:!0,serverUrl:sUrl,staticVideoSrc:!0,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});player.load(url,function(loadResponse){if(console.log("loaded",player),player.setStartTapeTimecode("01:00:00:00"),Utils.isSomething(loadResponse))console.error(loadResponse);else{var timeline=player.getTimeline(),endlessTimeline=SimpleTimeline.newEndlessTime(timeline);Captions.parseSubs(endlessTimeline,"http://kote.videogorillas.com:8042/api/1/storage/m2469/download","ebu",function(err,subs){null!=err?console.error(err):(Captions.offsetCaptions(subs,endlessTimeline.getTvByTimecode("09:59:50:00"),timeline),subs.title="Czech",player.addCaptionsObject(subs))},LogLevel.DEBUG),console.log("everything loaded "+timeline)}}),window.PLAYER=player}},constructor.loadVGHDVideo=function(serverUrl,proxyId){return Rx.Observable.create(function(observer){var log=new Log(LogLevel.DEBUG);new ProxyLoader(new Http(log),log).dashify(serverUrl+proxyId+"/video.mov",function(e,dash){null==e?(observer.onNext(dash),observer.onCompleted()):observer.onError(e)})})},constructor.loadVGAudio=function(serverUrl,proxyId){return Rx.Observable.create(function(observer){var log=new Log(LogLevel.DEBUG);new ProxyLoader(new Http(log),log).loadAudio(serverUrl,proxyId,function(e,dash){null==e?(observer.onNext(dash),observer.onCompleted()):observer.onError(e)})})},constructor.filmstripmain=function(){console.log("filmstripmain"),window.onload=function(e){var canvas=window.document.createElement("canvas");canvas.width=2540,canvas.height=20,window.document.body.appendChild(canvas);var log=new Log(LogLevel.DEBUG),http=new Http(log);new ProxyLoader(http,log).dashify("http://chugai.local/code/vgplayer/thumbs/thumbs_g25.mov",function(err,dashStream){var drawer=new FilmStripDrawer(http,log,new Rx.Subject),timeline=GenericTimeline.newGenericTime(24e3,1001);timeline.setDurationSec(6041.035),drawer.initWithDashStream(dashStream,timeline,function(info){var count=stjs.trunc(Math.ceil(canvas.width/(144*canvas.height/80)));drawer.drawFilmstrip(canvas,0,144839,count,!1,function(){return console.log("done drawing filmstrip")},null)})})}},constructor.conformmain=function(){window.onload=function(e){var log=new Log(LogLevel.DEBUG);new ProxyLoader(new Http(log),log).loadAudioFromMpd("http://localhost/code/vgplayer/tests/pete_rus20/file.mpd").subscribe(function(stream){var offset=ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION+5120+666,tail=15*stream.sampleRate,totalSamples=offset+stream.totalSamples+tail,conformed=new ConformedM4sAudioStream(stream,offset,totalSamples,log);DashStreamUtils.createDownloadLink(conformed);var ddash=new DynamicDash(null,conformed,log,new Rx.Subject),video=window.document.querySelector("#media");ddash.attach(video),window.DASH=ddash})}},constructor.chugaimain=function(){console.log("chugaimain"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),sUrl="http://localhost/code/vgplayer",player=new Player(pCont,{hotkeys:!0,serverUrl:sUrl,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME,drm:{widevine:{laUrl:"http://widevine-proxy.appspot.com/proxy"},fairplay:{laUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?type=FPS&WVCustomUserToken=34241&WVCustomProductId=1234",certUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?FairPlayCert=true"}}});player.load("https://s3.amazonaws.com/IdeaNova/DemoContent/Inplay/Video/FairPlay/sintelFP.m3u8",function(loadResponse){if(null!=loadResponse)return void console.error("player could not load",loadResponse);console.log("loaded !!!!!!",player);var fromEl=window.document.querySelector("#from"),toEl=window.document.querySelector("#to"),setRangeButton=window.document.querySelector("#setrange"),clearRangeButton=window.document.querySelector("#clearrange");setRangeButton.addEventListener("click",function(ee){player.setRange(fromEl.value,toEl.value),player.setLoop(!0),player.setPauseOnLoop(!0)}),clearRangeButton.addEventListener("click",function(ee){player.cancelRange()})}),window.PLAYER=player}},constructor.mityamain=function(){window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),sUrl="http://localhost/player",player=new Player(pCont,{hotkeys:!0,serverUrl:sUrl,theme:VGThemePlayer.THEME,plugins:[Filmstrip.PLUGIN_ID,SubsPlugin.PLUGIN_ID],preservePlaybackRate:!0});player.loadUrl("http://kote.videogorillas.com/vmir/maleficent/file.mpd",function(loadResponse){var proPanelContainer=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),proPanel=ReactDOM.render(ProPanelComponent.createElement(),proPanelContainer),splugin=new SubsPlugin(player);proPanel.addPlugin(splugin,SubsPlugin.VG_ICON_CC,function(){});var timeline=player.getTimeline();Captions.guessSubtitleCodec("http://kote.videogorillas.com/vmir/eng.stl");player.addCaptionsHandler(function(){var _codec=Captions.guessSubtitleCodec("http://kote.videogorillas.com/vmir/eng.stl");Captions.parseSubs(timeline,"http://kote.videogorillas.com/vmir/eng.stl",_codec,function(err,subs){return null!=err?void console.error("error parsing subs",err):(subs.title="pete_rus",subs.id="pete_rus",void player.addCaptions(subs))},LogLevel.DEBUG)})}),window.PLAYER=player}},constructor.mityaLog4=function(){var logEvent={};logEvent.trackId="t100";var logEventComponent=React.createElement(LogEventComponent,logEvent),superDivContainer=(React.createElement(HeaderComponent,null),React.createElement(SidePanelComponent,null),React.createElement(ControlsPanelComponent,null),window.document.createElement("div"));superDivContainer.className="vg-main-container";var pw=window.document.createComment("div");pw.className="vg-player-wrapper";var mc=window.document.createElement("div");mc.className="vg-main",mc.appendChild(pw),superDivContainer.appendChild(mc);var container=window.document.body;container.appendChild(superDivContainer),ReactDOM.render(logEventComponent,superDivContainer)},constructor.andrewmain=function(){console.log("andrewmain"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),player=new Player(pCont,{hotkeys:!0,playlist:!1,search:!0,serverUrl:"http://kote.videogorillas.com/vmir/dplayer/tests",plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});player.load("http://kote.videogorillas.com/vmir/maleficent/file.mpd",function(err){null!=err?console.error(err):(console.log("Player loaded",player),window.player=player)})}},constructor.testProPanel=function(){var pContainer=window.document.createElement("div");window.document.body.appendChild(pContainer);var player=new Player(pContainer,{hotkeys:!0,serverUrl:PlayerDev.SERVER_URL_KOTE,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});player.load("m3612/v8478",function(o){console.error(o)})},constructor.vgthememain=function(){console.log("vgthememain"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),player=new Player(pCont,{hotkeys:!0,playlist:!1,search:!0,plugins:[Filmstrip.PLUGIN_ID,SubsPlugin.PLUGIN_ID],theme:VGThemePlayer.THEME});player.loadUrl("http://kote.videogorillas.com:8042/api/1/storage/m3134/v6953/file.mpd",function(loadResponse){if(console.log("loaded",player),Utils.isSomething(loadResponse))console.error(loadResponse);else{var proPanelContainer=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),proPanel=ReactDOM.render(ProPanelComponent.createElement(),proPanelContainer),splugin=new SubsPlugin(player);proPanel.addPlugin(splugin,SubsPlugin.VG_ICON_CC,function(){});var timeline=player.getTimeline(),codec=Captions.guessSubtitleCodec("http://kote.local/storage/clients/giantsource/ShortPeteTong4min/eng.srt");Captions.parseSubs(timeline,"http://kote.local/storage/clients/giantsource/ShortPeteTong4min/eng.srt",codec,function(err,subs){return null!=err?void console.error("error parsing subs",err):(subs.title="english",subs.id="english",void player.addCaptions(subs))},LogLevel.DEBUG),player.addCaptionsHandler(function(){var _codec=Captions.guessSubtitleCodec("http://localhost:9080/tests/captions/pete_rus.srt");Captions.parseSubs(timeline,"http://localhost:9080/tests/captions/pete_rus.srt",_codec,function(err,subs){return null!=err?void console.error("error parsing subs",err):(subs.title="pete_rus",subs.id="pete_rus",void player.addCaptions(subs))},LogLevel.DEBUG)})}}),window.PLAYER=player}},constructor.vgMpdMain=function(){console.log("vgMpdMain"),window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),player=new Player(pCont,{hotkeys:!0,playlist:!1,search:!0,plugins:[Filmstrip.PLUGIN_ID],theme:VGThemePlayer.THEME});player.loadUrl("http://localhost/v208/file.mpd",function(nothing){console.log("loaded",player);var timeline=player.getTimeline();console.log("everything loaded ",timeline)}),window.PLAYER=player}},constructor.contexterMain=function(){window.onload=function(e){var pCont=window.document.querySelector("#playerContainer"),player=new Player(pCont,{serverUrl:"http://localhost/code/stjs-DPlayer",hotkeys:!0,theme:VGThemePlayer.THEME});player.load("http://localhost:8042/api/1/storage/m216/v1001/file.mpd",function(err){if(console.log("player loaded",player),Utils.isSomething(err))return void console.error(err);var contexter=new ContexterPlugin,innerPlayerDiv=pCont.querySelector(".vg_player"),wordsDiv=window.document.createElement("div");null!=innerPlayerDiv&&(innerPlayerDiv.appendChild(wordsDiv),contexter.setWordsContainer(wordsDiv)),contexter.setDetectHandler(function(){contexter.setProgress(0),Rx.Observable.from([25,50,75,100]).concatMap(function(progress){return Rx.Observable.just(progress).delay(3e3)}).concatMap(function(progress){console.log((new Date).toISOString(),"start load contexter data");var log=new Log(LogLevel.DEBUG);return new Http(log).get("http://localhost:8042/api/1/storage/m8/v54/words.js").doOnNext(function(str){var fromJson=JSON.parse(str);console.log("loaded frames from contexter",fromJson.length),console.log((new Date).toISOString(),"contexter data parsed"),fromJson=fromJson.slice(0,stjs.trunc(fromJson.length*progress/100));var data=ContexterData.create(fromJson);console.log((new Date).toISOString(),"contexter data processed"),contexter.setProgress(progress),contexter.setData(data)})}).subscribe()}),contexter.setStopHandler(function(){return console.log("STOP pressed")}),player.registerPlugin(contexter);var proPanelContainer=window.document.querySelector("."+ViewConsts.VG_PRO_PANEL_CONTAINER),proPanel=ReactDOM.render(ProPanelComponent.createElement(),proPanelContainer);proPanel.addPlugin(contexter,ContexterPlugin.PLUGIN_ICON,function(){contexter.init()})}),window.PLAYER=player}}},{},{}),window.VG={Player:Player,Captions:Captions,TapeTimecode:TapeTimecode,LogLevel:LogLevel},window.VG.Player._debug={PlayerMain:PlayerMain,PlayerDev:PlayerDev},window.VG.Player._internal={TimelineUtil:TimelineUtil,PlayerOptions:PlayerOptions,VideoLog:VideoLog,VideoLogOptions:VideoLogOptions,ViewConsts:ViewConsts,ProPanelComponent:ProPanelComponent,SubsPlugin:SubsPlugin,ContexterPlugin:ContexterPlugin},module.exports=window.VG,window.VG.Player.buildNumber="dev";var Infinite=__webpack_require__(171),VG={};VG["templates/videotrack.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_videoTrack vg_addon">\n    <div class="vg_littlePlayButton vg_addon__left vg_info"><span class="vg_addon__icon vg_icon-vgplay"></span></div>\n    <div class="vg_currentVideoInfo vg_addon__right">\n        <div class="vg_videoTrack__img">\n            <canvas class="vg_videoTrack__canvas" width="150" height="30"></canvas>\n        </div>\n    </div>\n</div>'},VG["templates/vgtheme_videolog_plugin.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="'+(null==(__t=data.pluginClass)?"":__t)+'__view">\n    <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__header">\n        <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__info vg_info">\n            <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__name">\n                <span>'+(null==(__t=data.header.name)?"":__t)+'</span>\n            </div>\n            <div class="'+(null==(__t=data.header.cssClass)?"":__t)+' vg_default">\n\n            </div>\n        </div>\n        <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__right">\n            <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__zoom">\n                <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-zoom-min"></span>\n\n                <div class="'+(null==(__t=data.pluginClass)?"":__t)+'-range">\n                    <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-range__point--0"></span>\n                    <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-range__point--20"></span>\n                    <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-range__point--40"></span>\n                    <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-range__point--60"></span>\n                    <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-range__point--80"></span>\n                    <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-range__point--100"></span>\n                    <input type="range" class="vg_vertical-range '+(null==(__t=data.pluginClass)?"":__t)+'-range__input"/>\n                </div>\n                <span class="'+(null==(__t=data.pluginClass)?"":__t)+'-zoom-max"></span>\n            </div>\n        </div>\n\n        <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__controls">\n            <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__controls--new vg_primary">\n                <span>'+(null==(__t=data.controls.create)?"":__t)+'</span>\n            </div>\n            <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__controls--details">\n                <span>'+(null==(__t=data.controls.details)?"":__t)+'</span>\n            </div>\n        </div>\n\n    </div>\n    <div class="'+(null==(__t=data.pluginClass)?"":__t)+'__content"></div>\n</div>'},VG["templates/vg_addon-control.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="vg_addon vg_addon__header">\n    <div class="vg_addon__left vg_default">\n        <i class="vg_addon__icon '+(null==(__t=data.iconClass)?"":__t)+'"></i>\n    </div>\n    <div class="vg_addon__right '+(null==(__t=data.tracksClass+"__info")?"":__t)+'">\n        <span class="vg_headerText vg_info">'+(null==(__t=data.header)?"":__t)+'</span>\n\n        <span class="vg_tracksInfo vg_default"></span>\n    </div>\n</div>\n<div class="vg_addon vg_addon__list vg_default-bg '+(null==(__t=data.tracksClass)?"":__t)+'"></div>\n'},VG["templates/timecontrolsbox.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_aligner vg_info">\n    <div class="vg_timecode vg_timecode_standard">\n        <div class="vg_time_controls_box__label">TIMECODE</div>\n        <input type="text" class="vg_timecode__value vg_standard_time"></div>\n</div>\n<div class="vg_aligner vg_info">\n    <div class="vg_timecode vg_timecode_tape">\n        <div class="vg_time_controls_box__label vg_ndftc_header">TAPE</div>\n        <input type="text" class="vg_timecode__value vg_ndftc_time"></div>\n</div>\n<div class="vg_aligner vg_info">\n    <div class="vg_timecode vg_timecode_frame">\n        <div class="vg_time_controls_box__label vg_frame_number_header vg_timecode__label">FRAME</div>\n        <input type="text" class="vg_timecode__value vg_frame_number"></div>\n</div>\n'},VG["templates/theme_propanel.html"]=function(data){var __p="";_.escape;return __p+='<div class="vgtheme_pro-panel__left vg_panel-bg">\n    <div class="vgtheme_pro-panel__plugin-icons vg_default">\n\n    </div>\n</div>\n<div class="vgtheme_pro-panel__right vg_default-bg vg_default">\n    <div class="vgtheme_pro-panel__plugin-views"></div>\n</div>'},VG["templates/theme_plugin.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="'+(null==(__t=data.pluginClass)?"":__t)+'__view"></div>'},VG["templates/player/waveform.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="vg_waveform__wrap vg_proPanel__wrap" id="#waveform'+(null==(__t=data.trackid)?"":__t)+'">\n    <div class="vg_proPanel__left vg_waveform__left">\n        <div class="vg_audioTrackName">'+(null==(__t=data.trackname)?"":__t)+'</div>\n        <div class="vg_audioTrackControlls">\n            <div class="vg_audioTrack__on">on</div>/<div class="vg_audioTrack__off">off</div>\n        </div>\n    </div>\n    <div class="vg_proPanel__right vg_waveform"></div>\n</div>'},VG["templates/player/safe-area-item.html"]=function(data){var __p="",__e=_.escape;return __p+='<div class="pipka pipka-'+__e(data.color)+'"></div><span class="vg_ddown_hover__list-item__label vg_info view-item" itemId="'+__e(data.item.id)+'">'+__e(data.item.title)+"</span>"},VG["templates/player/image-capture.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg-image-capture_header">\n    <span>Image Capture</span>\n    <i class="vg-image-capture_close vg_icon-x"></i>\n</div>\n<div class="vg-image-capture_content">\n    <div class="vg-image-capture_image-section"></div>\n    <input class="vg-image-capture_input" placeholder="File name" type="text"/>\n    <div class="vg-image-capture_actions">\n        <a class="vg-image-capture_cancel-button vg-image-capture_button">Cancel</a>\n        <a class="vg-image-capture_save-button vg-image-capture_button">Save & Download</a>\n    </div>\n</div>';
},VG["templates/player/ddown.html"]=function(data){var __t,__p="";_.escape,Array.prototype.join;return data.title&&(__p+='\n<div class="'+(null==(__t=data.className)?"":__t)+'__title vg_default">\n    <span class="vg_info">'+(null==(__t=data.title)?"":__t)+"</span>\n</div>\n"),__p+='\n\n<ul class="'+(null==(__t=data.className)?"":__t)+'__list">\n</ul>\n'},VG["templates/player/ddown-item.html"]=function(data){var __t,__p="",__e=_.escape;return __p+='<span class="'+(null==(__t=data.className)?"":__t)+'__radio"></span>\n<span class="'+(null==(__t=data.className)?"":__t)+'__label vg_info view-item" itemId="'+__e(data.item.id)+'">'+__e(data.item.title)+"</span>"},VG["templates/player/crop-plugin.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg-crop-container">\n    <div class="crop-mask">\n        <div class="pipka tl"></div>\n        <div class="pipka tm"></div>\n        <div class="pipka tr"></div>\n        <div class="pipka ml"></div>\n        <div class="pipka mr"></div>\n        <div class="pipka bl"></div>\n        <div class="pipka bm"></div>\n        <div class="pipka br"></div>\n    </div>\n    <img class="crop-frame" src="">\n</div>'},VG["templates/player/addon-control.html"]=function(data){var __t,__p="";_.escape;return __p+='<div id="'+(null==(__t=data.id)?"":__t)+'" class="vg_iconControls__item vg_ddown vg_info">\n    <span class="'+(null==(__t=data.iconClass)?"":__t)+'"></span>\n</div>'},VG["templates/logevent.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="'+(null==(__t=data.className)?"":__t)+'__details">\n    <div class="'+(null==(__t=data.className)?"":__t)+'__tags">\n        <span class="vg_info '+(null==(__t=data.className)?"":__t)+'__tag-name">'+(null==(__t=data.tag)?"":__t)+'</span>\n        <span class="vg_default '+(null==(__t=data.className)?"":__t)+'__tag-times">'+(null==(__t=data.startTv)?"":__t)+" - "+(null==(__t=data.endTv)?"":__t)+'</span>\n    </div>\n    <div class="'+(null==(__t=data.className)?"":__t)+'__duration vg_default"><span></span><span>'+(null==(__t=data.duration)?"":__t)+'</span></div>\n</div>\n<div class="'+(null==(__t=data.className)?"":__t)+"__tracks "+(null==(__t=data.className)?"":__t)+"__"+(null==(__t=data.tag)?"":__t)+'">\n    <div class="'+(null==(__t=data.className)?"":__t)+'__canvas" style="width: '+(null==(__t=data.width)?"":__t)+"; left:"+(null==(__t=data.left)?"":__t)+';">\n        <canvas></canvas>\n    </div>\n</div>'},VG["templates/ddown.html"]=function(data){var __p="";_.escape;return __p+='<div class="vgtheme__ddown">\n    <span class="vgtheme__ddown-toggler">\n\n        <ul class="vgtheme__ddown-list">\n            <li class="vgtheme__ddown-list__header"></li>\n        </ul>\n    </span>\n    <span class="vgtheme__ddown-selected"></span>\n</div>'},VG["templates/captionsearch.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_captionSearch vg_default">\n    <div class="vg_addon">\n        <div class="vg_addon__left">\n            <span class="vg_addon__icon vg_captionSearchButton"></span>\n        </div>\n        <div class="vg_addon__right">\n            <form class="vg_captionSearchForm"><input class="vg_captionSearchField" type="text"></form>\n        </div>\n    </div>\n\n</div>'},VG["templates/captionNew.html"]=function(data){var __p="";_.escape;return __p+='<div id="wrap-captions">\n    <div class="captions-header">\n        <div class="caption-row">\n            <div class="captions-header__left">\n                <div class="captions-header__left_title">\n                    CAPTIONS\n                </div>\n                <div class="captions-header__left_countFiles">\n                    5 Files\n                </div>\n                <div class="vgCaption__plusButton vgtheme_control-plus"></div>\n            </div>\n            <div class="captions-header__right caption-search__active">\n                <span class="vg_icon-search"></span>\n                <input type="search" placeholder="Search...">\n            </div>\n        </div>\n    </div>\n    <div class="captions-main">\n        <ul class="captions-main__list">\n            <li class="captions-main__list__item">\n                <div class="caption-row">\n                <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                    </div>\n                </div>\n            </li>\n\n            <li class="captions-main__list__item caption-row__active">\n                <div class="caption-row">\n                <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name find-match">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:02:25\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:03:30\n                    </span>\n                    </div>\n                    <div class="swift-timecode">\n                        <span class="swift-timecode__name">\n                            swift timecodes\n                        </span>\n                        <div class="swift-timecode__time">\n                            <span class="swift_timecode__from">\n                                00:00:22:01\n                            </span>\n                            <span>\n                                to\n                            </span>\n                            <div class="caption-time">\n                                <span class="caption-time_from">\n                                    00:00:02:25\n                                </span>\n                                <span class="caption-time_divider">\n                                    --\n                                </span>\n                                <span class="caption-time_to">\n                                    00:00:03:30\n                                </span>\n                            </div>\n                        </div>\n                        <div class="vgCaption__swiftButton"></div>\n                    </div>\n\n                </div>\n            </li>\n\n            <li class="captions-main__list__item caption-row__expand\n            ">\n                <div class="caption-row caption-row__find-match__ct">\n                    <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name captions-name__inActive">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                    </div>\n                </div>\n\n                <ul class="caption-subtitle-list">\n                    <li class="caption-subtitle-list__subItem caption-subRow__find-match__ct">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur <span class="find-match__inWord">adipisicing elit</span>. Voluptas, voluptates?\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur <span class="find-match__inWord">adipisicing elit. Voluptas, voluptates?</span>\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from caption-time_red">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to caption-time_red">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas, voluptates?\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas, voluptates?\n                        </p>\n                    </li>\n\n                    <li class="caption-subtitle-list__subItem">\n                        <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                        </div>\n                        <p class="caption-subtitle">\n                            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas, voluptates?\n                        </p>\n                    </li>\n                </ul>\n            </li>\n\n            <li class="captions-main__list__item">\n                <div class="caption-row">\n                <span class="captions-switch">\n\n                </span>\n                    <span class="vgCaption__triangle"></span>\n                <span class="captions-name">\n                    some new name for captions\n                </span>\n                    <div class="caption-time">\n                    <span class="caption-time_from">\n                        00:00:01:00\n                    </span>\n                    <span class="caption-time_divider">\n                        --\n                    </span>\n                    <span class="caption-time_to">\n                        00:00:01:30\n                    </span>\n                    </div>\n                </div>\n            </li>\n\n        </ul>\n    </div>\n\n</div>'},VG["templates/caption.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="vg_caption vg_default">\n    <div class="vg_addon vg_caption__item">\n        <div class="vg_addon__left">\n            <span class="vg_addon__icon vg_caption__switch"></span>\n        </div>\n        <div class="vg_caption__info vg_addon__right">\n            <span class="vg-controls__label vg_caption__label vg_info">'+(null==(__t=data.caption.title||data.caption.displayName)?"":__t)+"</span>\n        </div>\n    </div>\n</div>"},VG["templates/audiotrack.html"]=function(data){var __t,__p="",__e=_.escape;Array.prototype.join;return __p+='<div class="vg_audioTrack" data-trackProxy="'+(null==(__t=data.track.proxyId)?"":__t)+'">\n    ',data.track.filename&&(__p+='\n    <div class="vg_audioTrackName vg_addon" title="'+(null==(__t=data.track.filename)?"":__t)+'">\n        <span class="vg_info">'+(null==(__t=data.track.filename)?"":__t)+"</span>\n    </div>\n    "),__p+="\n    ",_.forEach(data.channels,function(channel,ci){__p+='\n\n    <div class="vg_addon vg_audioTrack__channel ',channel.muted&&(__p+="vg_muted"),__p+='"\n         id="track-'+__e(data.track.proxyId)+"_channel-"+__e(ci)+'" data-track="'+__e(data.track.proxyId)+'" data-channel="'+__e(ci)+'">\n        <div class="vg_volumeIcon vg_info vg_addon__left">\n            <span class="vg_addon__icon vg_icon-vgvolume"></span>\n        </div>\n        <div class="vg_currentAudioInfo vg_addon__right">\n            <span class="vg-controls__label vg_audioTrack__label vg_info">'+__e(channel.label||"undefined")+'</span>\n\n            <div class="vg_waveformIcon hello">\n                ',"VG"==data.proxyType&&(__p+='\n                    <img style="width:'+(null==(__t=data.width)?"":__t)+';" src="'+(null==(__t=channel.waveformPngUrl)?"":__t)+'">\n                '),__p+="\n            </div>\n        </div>\n    </div>\n    "}),__p+="\n</div>"},VG["templates/player/timescrubber.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="vg_proPanel__left vg_background"></div>\n<div class="vg_timescrubber__wrap vg_background">\n    <div class="vg_timevalues vg_default">\n        <div class="vg_timevalues__item">\n            <span class="vg_current-time">00:00:00</span>\n        </div>\n        <div class="vg_timevalues__item">\n            <span class="vg_duration-time">'+(null==(__t=data.duration)?"":__t)+'</span>\n        </div>\n    </div>\n    <div class="vg_scrubber">\n        <div class="vg_scrubber__wrap vg_default-bg">\n            <div class="vg_scrubber__buffered"></div>\n            <div class="vg_scrubber__played vg_primary-bg">\n                <div class="vg_handle vg_info-bg"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},VG["templates/player/timecontrols.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_iconControls">\n    <div class="vg_iconControls__item">\n        <span class="vg_icon-clock vg_default"></span>\n    </div>\n    <div class="vg_iconControls__item">\n        <div class="vg_timecode vg_vertical-rule vg_timecode_standard">\n            <span class="vg_timecode__label vg_standard_header vg_default">Standard</span>\n            <input type="text" class="vg_timecode__value vg_standard_time vg_info">\n        </div>\n    </div>\n    <div class="vg_iconControls__item">\n        <div class="vg_timecode vg_vertical-rule vg_timecode_tape">\n            <span class="vg_timecode__label vg_ndftc_header vg_default">Tape</span>\n            <input type="text" class="vg_timecode__value vg_ndftc_time vg_info">\n        </div>\n    </div>\n    <div class="vg_iconControls__item">\n        <div class="vg_timecode vg_timecode_frame">\n            <span class="vg_timecode__label vg_frame_number_header vg_timecode__label vg_default">Frames</span>\n            <input type="text" class="vg_timecode__value vg_frame_number vg_info">\n        </div>\n    </div>\n</div>\n'},VG["templates/player/selections.html"]=function(data){var __t,__p="";_.escape;return __p+='<div class="vg_selection vg_info" style="width:'+(null==(__t=data.width)?"":__t)+";left:"+(null==(__t=data.left)?"":__t)+';">\n    <span class="vg_selection__start">'+(null==(__t=data.startHhmmss)?"":__t)+'</span>\n    <span class="vg_selection__end">'+(null==(__t=data.endHhmmss)?"":__t)+"</span>\n</div>\n"},VG["templates/player/propanel.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_proPanel__overlay">\n    <div class="vg_proPanel__scrubtrack"></div>\n</div>\n'},VG["templates/player/my.html"]=function(data){var __p="";_.escape;return __p+="global"},VG["templates/player/main.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_embed-container">\n    <div class="vg_player embed-responsive embed-responsive-80 vg_background">\n        <div class="vg_loading-spinner vg_invisible"></div>\n        <video class="embed-responsive-item vg_player_opacity_0" type="hires+audio"\n               src=""></video>\n        <video class="embed-responsive-item vg_player_opacity_1" type="lowres"\n               src=""></video>\n\n    </div>\n<div class="vg_allControls"></div>\n</div>\n<div class="vg_proPanel vg_background"></div>\n    <!--<div class="vg_vglogo"></div>-->\n<!--<div class="vg_captionText"></div>-->\n\n'},VG["templates/player/load-error.html"]=function(data){var __t,__p="";_.escape,Array.prototype.join;return __p+='<div class="vg_error">\n    <div class="vg_error__icon vg_info">\n        <span class="vg_icon-broken_video"></span>\n    </div>\n    <div class="vg_error__message vg_info">\n        <h3 class="vg_error__heading">That\'s unexpected</h3>\n\n        <div class="vg_error__body">\n            ',__p+=data.message?"\n                <p>"+(null==(__t=data.message)?"":__t)+"</p>\n            ":"\n                <p>Something wrong has happened preventing player from loading and opening files.</p>\n                <p>We expect the next try to bring more success!</p>\n            ",__p+="\n        </div>\n    </div>\n\n</div>"},VG["templates/player/filmstrip.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_proPanel__wrap">\n    <div class="vg_proPanel__left"></div>\n    <div class="vg_proPanel__right">\n        <div class="vg_filmstrip__container">\n            <canvas class="vg_filmstrip__canvas"></canvas>\n        </div>\n    </div>\n</div>'},VG["templates/player/controls.html"]=function(data){var __p="";_.escape;return __p+='<div class="vg_controlls">\n    <div class="vg_playControls">\n        <div class="vg_iconControls vg_info">\n            <div class="vg_playBackButton vg_iconControls__item"><span\n                    class="vg_icon-playbackward vg_default"></span>\n            </div>\n            <div class="vg_playPauseButton vg_iconControls__item vg_default"><span\n                    class="vg_icon-play"></span></div>\n            <div class="vg_playFasterButton vg_iconControls__item"><span\n                    class="vg_icon-playforward vg_default"></span>\n            </div>\n        </div>\n    </div>\n    <div class="vg_time_controls vg_info">\n\n    </div>\n\n    <div class="vg_volumeScreenControls">\n        <div class="vg_iconControls vg_controls--addOn vg_vertical-rule">\n\n        </div>\n        <div class="vg_iconControls">\n\n            <div class="vg_iconControls__item vg_ddown--hover vg_default">\n                <span class="vg_volume vg_icon-volume "></span>\n\n\n                <div class="vg_ddown__content vg_background vg_primary">\n                    <div class="vg_vertical-range">\n                        <input class="vg_vertical-inputrange" type="range" min="0" max="100" step="1">\n                    </div>\n                </div>\n\n            </div>\n\n            <div class="vg_fullScreen vg_iconControls__item">\n                <span class="vg_icon-fullscreen vg_default"></span>\n            </div>\n        </div>\n    </div>\n</div>\n'}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global,module){(function(){function arrayPush(array,values){return array.push.apply(array,values),array}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseValues(object,props){return baseMap(props,function(key){return object[key]})}function overArg(func,transform){return function(arg){return func(transform(arg))}}function lodash(value){return value instanceof LodashWrapper?value:new LodashWrapper(value)}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function baseAssignValue(object,key,value){object[key]=value}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(computed===undefined?current===current&&!0:comparator(current,computed)))var computed=current,result=value}return result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseFunctions(object,props){return baseFilter(props,function(key){return isFunction(object[key])})}function baseGetTag(value){return objectToString(value)}function baseGt(value,other){return value>other}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:baseGetTag(object),othTag=othIsArr?arrayTag:baseGetTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;stack||(stack=[]);var objStack=find(stack,function(entry){return entry[0]==object}),othStack=find(stack,function(entry){return entry[0]==other});if(objStack&&othStack)return objStack[1]==other;if(stack.push([object,other]),stack.push([other,object]),isSameTag&&!objIsObj){var result=objIsArr?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);return stack.pop(),result}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other,result=equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack);return stack.pop(),result}}if(!isSameTag)return!1;var result=equalObjects(object,other,bitmask,customizer,equalFunc,stack);return stack.pop(),result}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIteratee(func){return"function"==typeof func?func:null==func?identity:("object"==typeof func?baseMatches:baseProperty)(func)}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var props=nativeKeys(source);return function(object){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length];if(!(key in object&&baseIsEqual(source[key],object[key],COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)))return!1}return!0}}function basePick(object,props){return object=Object(object),reduce(props,function(result,key){return key in object&&(result[key]=object[key]),result},{})}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),end=end>length?length:end,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function copyArray(source){return baseSlice(source,0,source.length)}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseWrapperValue(value,actions){var result=value;return reduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value===value,valIsSymbol=!1,othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other===other,othIsSymbol=!1;if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):undefined,object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createCtor(Ctor){return function(){var args=arguments,thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createPartial(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return fn.apply(isBind?thisArg:this,args)}if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return wrapper}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;for(var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?[]:undefined;++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!baseSome(other,function(othValue,othIndex){if(!indexOf(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+""}return!1}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}for(var result=!0,skipCtor=isPartial;++index<objLength;){key=objProps[index];var compared,objValue=object[key],othValue=other[key];if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){
result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function isFlattenable(value){return isArray(value)||isArguments(value)}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),func.apply(this,otherArgs)}}function compact(array){return baseFilter(array,Boolean)}function concat(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,baseIteratee(predicate,3),index)}function flatten(array){var length=null==array?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=null==array?0:array.length;return length?baseFlatten(array,INFINITY):[]}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=null==array?0:array.length;fromIndex="number"==typeof fromIndex?fromIndex<0?nativeMax(length+fromIndex,0):fromIndex:0;for(var index=(fromIndex||0)-1,isReflexive=value===value;++index<length;){var other=array[index];if(isReflexive?other===value:other!==other)return index}return-1}function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}function slice(array,start,end){var length=null==array?0:array.length;return start=null==start?0:+start,end=end===undefined?length:+end,length?baseSlice(array,start,end):[]}function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor){return interceptor(value),value}function thru(value,interceptor){return interceptor(value)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(collection,predicate,guard){return predicate=guard?undefined:predicate,baseEvery(collection,baseIteratee(predicate))}function filter(collection,predicate){return baseFilter(collection,baseIteratee(predicate))}function forEach(collection,iteratee){return baseEach(collection,baseIteratee(iteratee))}function map(collection,iteratee){return baseMap(collection,baseIteratee(iteratee))}function reduce(collection,iteratee,accumulator){return baseReduce(collection,baseIteratee(iteratee),accumulator,arguments.length<3,baseEach)}function size(collection){return null==collection?0:(collection=isArrayLike(collection)?collection:nativeKeys(collection),collection.length)}function some(collection,predicate,guard){return predicate=guard?undefined:predicate,baseSome(collection,baseIteratee(predicate))}function sortBy(collection,iteratee){var index=0;return iteratee=baseIteratee(iteratee),baseMap(baseMap(collection,function(value,key,collection){return{value:value,index:index++,criteria:iteratee(value,key,collection)}}).sort(function(object,other){return compareAscending(object.criteria,other.criteria)||object.index-other.index}),baseProperty("value"))}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;return!predicate.apply(this,args)}}function once(func){return before(2,func)}function clone(value){return isObject(value)?isArray(value)?copyArray(value):copyObject(value,nativeKeys(value)):value}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isBoolean(value){return value===!0||value===!1||isObjectLike(value)&&baseGetTag(value)==boolTag}function isEmpty(value){return isArrayLike(value)&&(isArray(value)||isString(value)||isFunction(value.splice)||isArguments(value))?!value.length:!nativeKeys(value).length}function isEqual(value,other){return baseIsEqual(value,other)}function isFinite(value){return"number"==typeof value&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isUndefined(value){return value===undefined}function toArray(value){return isArrayLike(value)?value.length?copyArray(value):[]:values(value)}function toString(value){return"string"==typeof value?value:null==value?"":value+""}function create(prototype,properties){var result=baseCreate(prototype);return null==properties?result:assign(result,properties)}function has(object,path){return null!=object&&hasOwnProperty.call(object,path)}function result(object,path,defaultValue){var value=null==object?undefined:object[path];return value===undefined&&(value=defaultValue),isFunction(value)?value.call(object):value}function values(object){return null==object?[]:baseValues(object,keys(object))}function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function identity(value){return value}function matches(source){return baseMatches(assign({},source))}function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return baseEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);return actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noConflict(){return root._===this&&(root._=oldDash),this}function noop(){}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}var undefined,VERSION="4.17.4",FUNC_ERROR_TEXT="Expected a function",COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_PARTIAL_FLAG=32,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",numberTag="[object Number]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",stringTag="[object String]",reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source),htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,escapeHtmlChar=(freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,basePropertyOf(htmlEscapes)),arrayProto=Array.prototype,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,nativeObjectToString=objectProto.toString,oldDash=root._,objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeIsFinite=root.isFinite,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();LodashWrapper.prototype=baseCreate(lodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),baseIsArguments=noop,setToString=identity,find=createFind(findIndex),bind=baseRest(function(func,thisArg,partials){return createPartial(func,WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG,thisArg,partials)}),defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isDate=baseIsDate,isRegExp=baseIsRegExp,toInteger=Number,toNumber=Number,assign=createAssigner(function(object,source){copyObject(source,nativeKeys(source),object)}),assignIn=createAssigner(function(object,source){copyObject(source,nativeKeysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),defaults=baseRest(function(args){return args.push(undefined,customDefaultsAssignIn),assignInWith.apply(undefined,args)}),keys=nativeKeys,keysIn=nativeKeysIn,pick=flatRest(function(object,paths){return null==object?{}:basePick(object,paths)}),iteratee=baseIteratee;lodash.assignIn=assignIn,lodash.before=before,lodash.bind=bind,lodash.chain=chain,lodash.compact=compact,lodash.concat=concat,lodash.create=create,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.filter=filter,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.iteratee=iteratee,lodash.keys=keys,lodash.map=map,lodash.matches=matches,lodash.mixin=mixin,lodash.negate=negate,lodash.once=once,lodash.pick=pick,lodash.slice=slice,lodash.sortBy=sortBy,lodash.tap=tap,lodash.thru=thru,lodash.toArray=toArray,lodash.values=values,lodash.extend=assignIn,mixin(lodash,lodash),lodash.clone=clone,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.forEach=forEach,lodash.has=has,lodash.head=head,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.last=last,lodash.max=max,lodash.min=min,lodash.noConflict=noConflict,lodash.noop=noop,lodash.reduce=reduce,lodash.result=result,lodash.size=size,lodash.some=some,lodash.uniqueId=uniqueId,lodash.each=forEach,lodash.first=head,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source}(),{chain:!1}),lodash.VERSION=VERSION,baseEach(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?String.prototype:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|join|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}}),lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,root._=lodash,__WEBPACK_AMD_DEFINE_RESULT__=function(){return lodash}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(this)}).call(exports,function(){return this}(),__webpack_require__(2)(module))},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global,process){(function(undefined){function checkGlobal(value){return value&&value.Object===Object?value:null}function cloneArray(arr){for(var a=[],i=0,len=arr.length;i<len;i++)a.push(arr[i]);return a}function tryCatcherGen(tryCatchTarget){return function(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}}function thrower(e){throw e}function makeStackTraceLong(error,observable){if(hasStacks&&observable.stack&&"object"==typeof error&&null!==error&&error.stack&&error.stack.indexOf(STACK_JUMP_SEPARATOR)===-1){for(var stacks=[],o=observable;o;o=o.source)o.stack&&stacks.unshift(o.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0,len=lines.length;i<len;i++){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||!line||desiredLines.push(line)}return desiredLines.join("\n")}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===rFileName&&lineNumber>=rStartingLine&&lineNumber<=rEndingLine}function isNodeFrame(stackLine){return stackLine.indexOf("(module.js:")!==-1||stackLine.indexOf("(node.js:")!==-1}function captureLine(){if(hasStacks)try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return rFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);return attempt3?[attempt3[1],Number(attempt3[2])]:void 0}function equalObjects(object,other,equalFunc,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!==othLength&&!isLoose)return!1;for(var key,index=objLength;index--;)if(key=objProps[index],!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1;for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var result,objValue=object[key],othValue=other[key];if(!(result===undefined?equalFunc(objValue,othValue,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"===key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!==othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object===+other;case errorTag:return object.name===other.name&&object.message===other.message;case numberTag:return object!==+object?other!==+other:object===+other;case regexpTag:case stringTag:return object===other+""}return!1}function isObjectLike(value){return!!value&&"object"==typeof value}function isLength(value){return"number"==typeof value&&value>-1&&value%1===0&&value<=MAX_SAFE_INTEGER}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function equalArrays(array,other,equalFunc,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!==othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var result,arrValue=array[index],othValue=other[index];if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,isLoose,stackA,stackB))return!1}return!0}function baseIsEqualDeep(object,other,equalFunc,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag===argsTag?objTag=objectTag:objTag!==objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag===argsTag&&(othTag=objectTag));var objIsObj=objTag===objectTag&&!isHostObject(object),othIsObj=othTag===objectTag&&!isHostObject(other),isSameTag=objTag===othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]===object)return stackB[length]===other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsEqual(value,other,isLoose,stackA,stackB){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,isLoose,stackA,stackB))}function arrayInitialize(count,factory){for(var a=new Array(count),i=0;i<count;i++)a[i]=factory();return a}function IndexedItem(id,value){this.id=id,this.value=value}function ScheduledDisposable(scheduler,disposable){this.scheduler=scheduler,this.disposable=disposable,this.isDisposed=!1}function scheduleItem(s,self){self.isDisposed||(self.isDisposed=!0,self.disposable.dispose())}function IsDisposedDisposable(state){this._s=state,this.isDisposed=!1}function StringIterable(s){this._s=s}function StringIterator(s){this._s=s,this._l=s.length,this._i=0}function ArrayIterable(a){this._a=a}function ArrayIterator(a){this._a=a,this._l=toLength(a),this._i=0}function numberIsFinite(value){return"number"==typeof value&&root.isFinite(value)}function getIterable(o){var it,i=o[$iterator$];if(!i&&"string"==typeof o)return it=new StringIterable(o),it[$iterator$]();if(!i&&o.length!==undefined)return it=new ArrayIterable(o),it[$iterator$]();if(!i)throw new TypeError("Object is not iterable");return o[$iterator$]()}function sign(value){var number=+value;return 0===number?number:isNaN(number)?number:number<0?-1:1}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),len<=0?0:len>maxSafeInteger?maxSafeInteger:len):len}function observableOf(scheduler,array){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)}function RepeatSink(observer,parent){this.observer=observer,this.parent=parent}function amb(p,c){return p.amb(c)}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function asObservable(source){return function(o){return source.subscribe(o)}}function toArray(x){return x.toArray()}function notEmpty(x){return x.length>0}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function concatMap(source,selector,thisArg){var selectorFunc=bindCallback(selector,thisArg,3);return source.map(function(x,i){var result=selectorFunc(x,i,source);return isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=observableFrom(result)),result}).concatAll()}function arrayIndexOfComparer(array,item,comparer){for(var i=0,len=array.length;i<len;i++)if(comparer(array[i],item))return i;return-1}function HashSet(comparer){this.comparer=comparer,this.set=[]}function plucker(args,len){return function(x){for(var currentProp=x,i=0;i<len;i++){var p=currentProp[args[i]];if("undefined"==typeof p)return undefined;currentProp=p}return currentProp}}function firstOnly(x){if(0===x.length)throw new EmptyError;return x[0]}function findValue(source,predicate,thisArg,yieldIndex){var callback=bindCallback(predicate,thisArg,3);return new AnonymousObservable(function(o){return source.subscribe(new FindValueObserver(o,source,callback,yieldIndex))},source)}function toObservable(obj){return obj?Observable.isObservable(obj)?obj:isPromise(obj)?Observable.fromPromise(obj):isGeneratorFunction(obj)||isGenerator(obj)?spawn.call(this,obj):isFunction(obj)?thunkToObservable.call(this,obj):isArrayLike(obj)||isIterable(obj)?arrayToObservable.call(this,obj):isObject(obj)?objectToObservable.call(this,obj):obj:obj}function arrayToObservable(obj){return Observable.from(obj).concatMap(function(o){return Observable.isObservable(o)||isObject(o)?toObservable.call(null,o):Rx.Observable.just(o)}).toArray()}function objectToObservable(obj){function defer(observable,key){results[key]=undefined,observables.push(observable.map(function(next){results[key]=next}))}for(var results=new obj.constructor,keys=Object.keys(obj),observables=[],i=0,len=keys.length;i<len;i++){var key=keys[i],observable=toObservable.call(this,obj[key]);observable&&Observable.isObservable(observable)?defer(observable,key):results[key]=obj[key]}return Observable.forkJoin.apply(Observable,observables).map(function(){return results})}function thunkToObservable(fn){var self=this;return new AnonymousObservable(function(o){fn.call(self,function(){var err=arguments[0],res=arguments[1];if(err)return o.onError(err);if(arguments.length>2){for(var args=[],i=1,len=arguments.length;i<len;i++)args.push(arguments[i]);res=args}o.onNext(res),o.onCompleted()})})}function isGenerator(obj){return isFunction(obj.next)&&isFunction(obj["throw"])}function isGeneratorFunction(obj){var ctor=obj.constructor;return!!ctor&&("GeneratorFunction"===ctor.name||"GeneratorFunction"===ctor.displayName||isGenerator(ctor.prototype))}function isObject(val){return Object==val.constructor}function createCbObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createCbHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createCbHandler(o,ctx,selector){return function(){for(var len=arguments.length,results=new Array(len),i=0;i<len;i++)results[i]=arguments[i];if(isFunction(selector)){if(results=tryCatch(selector).apply(ctx,results),results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function createNodeObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createNodeHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createNodeHandler(o,ctx,selector){return function(){var err=arguments[0];if(err)return o.onError(err);for(var len=arguments.length,results=[],i=1;i<len;i++)results[i-1]=arguments[i];if(isFunction(selector)){var results=tryCatch(selector).apply(ctx,results);if(results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function isNodeList(el){return root.StaticNodeList?el instanceof root.StaticNodeList||el instanceof root.NodeList:"[object NodeList]"===Object.prototype.toString.call(el)}function ListenDisposable(e,n,fn){this._e=e,this._n=n,this._fn=fn,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function createEventListener(el,eventName,handler){var disposables=new CompositeDisposable,elemToString=Object.prototype.toString.call(el);if(isNodeList(el)||"[object HTMLCollection]"===elemToString)for(var i=0,len=el.length;i<len;i++)disposables.add(createEventListener(el.item(i),eventName,handler));else el&&disposables.add(new ListenDisposable(el,eventName,handler));return disposables}function combineLatestSource(source,subject,resultSelector){return new AnonymousObservable(function(o){function next(x,i){if(values[i]=x,hasValue[i]=!0,hasValueAll||(hasValueAll=hasValue.every(identity))){if(err)return o.onError(err);var res=tryCatch(resultSelector).apply(null,values);if(res===errorObj)return o.onError(res.e);o.onNext(res)}isDone&&values[1]&&o.onCompleted()}var err,hasValue=[!1,!1],hasValueAll=!1,isDone=!1,values=new Array(2);return new BinaryDisposable(source.subscribe(function(x){next(x,0)},function(e){values[1]?o.onError(e):err=e},function(){isDone=!0,values[1]&&o.onCompleted()}),subject.subscribe(function(x){next(x,1)},function(e){o.onError(e)},function(){isDone=!0,next(!0,1)}))},source)}function toArray(x){return x.toArray()}function observableWindowWithOpenings(windowOpenings,windowClosingSelector){return windowOpenings.groupJoin(this,windowClosingSelector,observableEmpty,function(_,win){return win})}function observableWindowWithBoundaries(windowBoundaries){var source=this;return new AnonymousObservable(function(observer){var win=new Subject,d=new CompositeDisposable,r=new RefCountDisposable(d);return observer.onNext(addRef(win,r)),d.add(source.subscribe(function(x){win.onNext(x)},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),isPromise(windowBoundaries)&&(windowBoundaries=observableFromPromise(windowBoundaries)),d.add(windowBoundaries.subscribe(function(w){win.onCompleted(),win=new Subject,observer.onNext(addRef(win,r))},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),r},source)}function observableWindowWithClosingSelector(windowClosingSelector){var source=this;return new AnonymousObservable(function(observer){function createWindowClose(){var windowClose;try{windowClose=windowClosingSelector()}catch(e){return void observer.onError(e)}isPromise(windowClose)&&(windowClose=observableFromPromise(windowClose));var m1=new SingleAssignmentDisposable;m.setDisposable(m1),m1.setDisposable(windowClose.take(1).subscribe(noop,function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),win=new Subject,observer.onNext(addRef(win,r)),createWindowClose()}))}var m=new SerialDisposable,d=new CompositeDisposable(m),r=new RefCountDisposable(d),win=new Subject;return observer.onNext(addRef(win,r)),d.add(source.subscribe(function(x){win.onNext(x)},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),createWindowClose(),r},source)}function enumerableWhile(condition,source){return new WhileEnumerable(condition,source)}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function Pattern(patterns){this.patterns=patterns}function Plan(expression,selector){this.expression=expression,this.selector=selector}function handleOnError(o){return function(e){o.onError(e)}}function handleOnNext(self,observer){return function(){var result=tryCatch(self.selector).apply(self,arguments);return result===errorObj?observer.onError(result.e):void observer.onNext(result)}}function planCreateObserver(externalSubscriptions,observable,onError){var entry=externalSubscriptions.get(observable);if(!entry){var observer=new JoinObserver(observable,onError);return externalSubscriptions.set(observable,observer),observer}return entry}function ActivePlan(joinObserverArray,onNext,onCompleted){this.joinObserverArray=joinObserverArray,this.onNext=onNext,this.onCompleted=onCompleted,this.joinObservers=new Map;for(var i=0,len=this.joinObserverArray.length;i<len;i++){var joinObserver=this.joinObserverArray[i];this.joinObservers.set(joinObserver,joinObserver)}}function _observableTimer(dueTime,scheduler){return new TimerObservable(dueTime,scheduler)}function observableTimerDateAndPeriod(dueTime,period,scheduler){return new AnonymousObservable(function(observer){var d=dueTime,p=normalizeTime(period);return scheduler.scheduleRecursiveFuture(0,d,function(count,self){if(p>0){var now=scheduler.now();d=new Date(d.getTime()+p),d.getTime()<=now&&(d=new Date(now+p))}observer.onNext(count),self(count+1,new Date(d))})})}function observableTimerTimeSpanAndPeriod(dueTime,period,scheduler){return dueTime===period?new AnonymousObservable(function(observer){return scheduler.schedulePeriodic(0,period,function(count){return observer.onNext(count),count+1})}):observableDefer(function(){return observableTimerDateAndPeriod(new Date(scheduler.now()+dueTime),period,scheduler)})}function observableDelayRelative(source,dueTime,scheduler){return new AnonymousObservable(function(o){var subscription,active=!1,cancelable=new SerialDisposable,exception=null,q=[],running=!1;return subscription=source.materialize().timestamp(scheduler).subscribe(function(notification){var d,shouldRun;"E"===notification.value.kind?(q=[],q.push(notification),exception=notification.value.error,shouldRun=!running):(q.push({value:notification.value,timestamp:notification.timestamp+dueTime}),shouldRun=!active,active=!0),shouldRun&&(null!==exception?o.onError(exception):(d=new SingleAssignmentDisposable,cancelable.setDisposable(d),d.setDisposable(scheduler.scheduleRecursiveFuture(null,dueTime,function(_,self){var e,recurseDueTime,result,shouldRecurse;if(null===exception){running=!0;do result=null,q.length>0&&q[0].timestamp-scheduler.now()<=0&&(result=q.shift().value),null!==result&&result.accept(o);while(null!==result);
shouldRecurse=!1,recurseDueTime=0,q.length>0?(shouldRecurse=!0,recurseDueTime=Math.max(0,q[0].timestamp-scheduler.now())):active=!1,e=exception,running=!1,null!==e?o.onError(e):shouldRecurse&&self(null,recurseDueTime)}}))))}),new BinaryDisposable(subscription,cancelable)},source)}function observableDelayAbsolute(source,dueTime,scheduler){return observableDefer(function(){return observableDelayRelative(source,dueTime-scheduler.now(),scheduler)})}function delayWithSelector(source,subscriptionDelay,delayDurationSelector){var subDelay,selector;return isFunction(subscriptionDelay)?selector=subscriptionDelay:(subDelay=subscriptionDelay,selector=delayDurationSelector),new AnonymousObservable(function(o){function start(){subscription.setDisposable(source.subscribe(function(x){var delay=tryCatch(selector)(x);if(delay===errorObj)return o.onError(delay.e);var d=new SingleAssignmentDisposable;delays.add(d),d.setDisposable(delay.subscribe(function(){o.onNext(x),delays.remove(d),done()},function(e){o.onError(e)},function(){o.onNext(x),delays.remove(d),done()}))},function(e){o.onError(e)},function(){atEnd=!0,subscription.dispose(),done()}))}function done(){atEnd&&0===delays.length&&o.onCompleted()}var delays=new CompositeDisposable,atEnd=!1,subscription=new SerialDisposable;return subDelay?subscription.setDisposable(subDelay.subscribe(start,function(e){o.onError(e)},start)):start(),new BinaryDisposable(subscription,delays)},source)}function debounceWithSelector(source,durationSelector){return new AnonymousObservable(function(o){var value,hasValue=!1,cancelable=new SerialDisposable,id=0,subscription=source.subscribe(function(x){var throttle=tryCatch(durationSelector)(x);if(throttle===errorObj)return o.onError(throttle.e);isPromise(throttle)&&(throttle=observableFromPromise(throttle)),hasValue=!0,value=x,id++;var currentid=id,d=new SingleAssignmentDisposable;cancelable.setDisposable(d),d.setDisposable(throttle.subscribe(function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()},function(e){o.onError(e)},function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()}))},function(e){cancelable.dispose(),o.onError(e),hasValue=!1,id++},function(){cancelable.dispose(),hasValue&&o.onNext(value),o.onCompleted(),hasValue=!1,id++});return new BinaryDisposable(subscription,cancelable)},source)}function toArray(x){return x.toArray()}function toArray(x){return x.toArray()}function timeoutWithSelector(source,firstTimeout,timeoutDurationSelector,other){return isFunction(firstTimeout)&&(other=timeoutDurationSelector,timeoutDurationSelector=firstTimeout,firstTimeout=observableNever()),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function setTimer(timeout){function timerWins(){return switched=myId===id}var myId=id,d=new SingleAssignmentDisposable;timer.setDisposable(d),d.setDisposable(timeout.subscribe(function(){timerWins()&&subscription.setDisposable(other.subscribe(o)),d.dispose()},function(e){timerWins()&&o.onError(e)},function(){timerWins()&&subscription.setDisposable(other.subscribe(o))}))}function oWins(){var res=!switched;return res&&id++,res}var subscription=new SerialDisposable,timer=new SerialDisposable,original=new SingleAssignmentDisposable;subscription.setDisposable(original);var id=0,switched=!1;return setTimer(firstTimeout),original.setDisposable(source.subscribe(function(x){if(oWins()){o.onNext(x);var timeout=tryCatch(timeoutDurationSelector)(x);if(timeout===errorObj)return o.onError(timeout.e);setTimer(isPromise(timeout)?observableFromPromise(timeout):timeout)}},function(e){oWins()&&o.onError(e)},function(){oWins()&&o.onCompleted()})),new BinaryDisposable(subscription,timer)},source)}function timeout(source,dueTime,other,scheduler){return isScheduler(other)&&(scheduler=other,other=observableThrow(new TimeoutError)),other instanceof Error&&(other=observableThrow(other)),isScheduler(scheduler)||(scheduler=defaultScheduler),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function createTimer(){var myId=id;timer.setDisposable(scheduler.scheduleFuture(null,dueTime,function(){switched=id===myId,switched&&(isPromise(other)&&(other=observableFromPromise(other)),subscription.setDisposable(other.subscribe(o)))}))}var id=0,original=new SingleAssignmentDisposable,subscription=new SerialDisposable,switched=!1,timer=new SerialDisposable;return subscription.setDisposable(original),createTimer(),original.setDisposable(source.subscribe(function(x){switched||(id++,o.onNext(x),createTimer())},function(e){switched||(id++,o.onError(e))},function(){switched||(id++,o.onCompleted())})),new BinaryDisposable(subscription,timer)},source)}function transformForObserver(o){return{"@@transducer/init":function(){return o},"@@transducer/step":function(obs,input){return obs.onNext(input)},"@@transducer/result":function(obs){return obs.onCompleted()}}}function OnNextPredicate(predicate){this.predicate=predicate}function OnErrorPredicate(predicate){this.predicate=predicate}function MockPromise(scheduler,messages){var self=this;this.scheduler=scheduler,this.messages=messages,this.subscriptions=[],this.observers=[];for(var i=0,len=this.messages.length;i<len;i++){var message=this.messages[i],notification=message.value;!function(innerNotification){scheduler.scheduleAbsolute(null,message.time,function(){for(var obs=self.observers.slice(0),j=0,jLen=obs.length;j<jLen;j++)innerNotification.accept(obs[j]);return disposableEmpty})}(notification)}}var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:null,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:null,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),moduleExports=freeModule&&freeModule.exports===freeExports?freeExports:null,thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),Rx={internals:{},config:{Promise:root.Promise},helpers:{}},noop=Rx.helpers.noop=function(){},identity=Rx.helpers.identity=function(x){return x},defaultNow=Rx.helpers.defaultNow=Date.now,defaultComparer=Rx.helpers.defaultComparer=function(x,y){return isEqual(x,y)},defaultSubComparer=Rx.helpers.defaultSubComparer=function(x,y){return x>y?1:x<y?-1:0},defaultError=(Rx.helpers.defaultKeySerializer=function(x){return x.toString()},Rx.helpers.defaultError=function(err){throw err}),isPromise=Rx.helpers.isPromise=function(p){return!!p&&"function"!=typeof p.subscribe&&"function"==typeof p.then},isFunction=Rx.helpers.isFunction=function(){var isFn=function(value){return"function"==typeof value||!1};return isFn(/x/)&&(isFn=function(value){return"function"==typeof value&&"[object Function]"==toString.call(value)}),isFn}(),errorObj={e:{}},tryCatch=Rx.internals.tryCatch=function(fn){if(!isFunction(fn))throw new TypeError("fn must be a function");return tryCatcherGen(fn)};Rx.config.longStackSupport=!1;var hasStacks=!1,stacks=tryCatch(function(){throw new Error})();hasStacks=!!stacks.e&&!!stacks.e.stack;var rFileName,rStartingLine=captureLine(),STACK_JUMP_SEPARATOR="From previous event:",EmptyError=Rx.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};EmptyError.prototype=Object.create(Error.prototype),EmptyError.prototype.name="EmptyError";var ObjectDisposedError=Rx.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ObjectDisposedError.prototype=Object.create(Error.prototype),ObjectDisposedError.prototype.name="ObjectDisposedError";var ArgumentOutOfRangeError=Rx.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ArgumentOutOfRangeError.prototype=Object.create(Error.prototype),ArgumentOutOfRangeError.prototype.name="ArgumentOutOfRangeError";var NotSupportedError=Rx.NotSupportedError=function(message){this.message=message||"This operation is not supported",Error.call(this)};NotSupportedError.prototype=Object.create(Error.prototype),NotSupportedError.prototype.name="NotSupportedError";var NotImplementedError=Rx.NotImplementedError=function(message){this.message=message||"This operation is not implemented",Error.call(this)};NotImplementedError.prototype=Object.create(Error.prototype),NotImplementedError.prototype.name="NotImplementedError";var notImplemented=Rx.helpers.notImplemented=function(){throw new NotImplementedError},$iterator$=(Rx.helpers.notSupported=function(){throw new NotSupportedError},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");root.Set&&"function"==typeof(new root.Set)["@@iterator"]&&($iterator$="@@iterator");var doneEnumerator=Rx.doneEnumerator={done:!0,value:undefined},isIterable=Rx.helpers.isIterable=function(o){return o&&o[$iterator$]!==undefined},isArrayLike=Rx.helpers.isArrayLike=function(o){return o&&o.length!==undefined};Rx.helpers.iterator=$iterator$;var bindCallback=Rx.internals.bindCallback=function(func,thisArg,argCount){if("undefined"==typeof thisArg)return func;switch(argCount){case 0:return function(){return func.call(thisArg)};case 1:return function(arg){return func.call(thisArg,arg)};case 2:return function(value,index){return func.call(thisArg,value,index)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)}}return function(){return func.apply(thisArg,arguments)}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],argsTag=(dontEnums.length,"[object Arguments]"),arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,MAX_SAFE_INTEGER=Math.pow(2,53)-1,keys=Object.keys||function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("object"!=typeof obj&&("function"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}(),isObject=Rx.internals.isObject=function(value){var type=typeof value;return!!value&&("object"===type||"function"===type)},isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}(),isArray=Array.isArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)===arrayTag},isEqual=Rx.internals.isEqual=function(value,other){return baseIsEqual(value,other)},inherits=({}.hasOwnProperty,Array.prototype.slice,Rx.internals.inherits=function(child,parent){function __(){this.constructor=child}__.prototype=parent.prototype,child.prototype=new __}),addProperties=Rx.internals.addProperties=function(obj){for(var sources=[],i=1,len=arguments.length;i<len;i++)sources.push(arguments[i]);for(var idx=0,ln=sources.length;idx<ln;idx++){var source=sources[idx];for(var prop in source)obj[prop]=source[prop]}},addRef=Rx.internals.addRef=function(xs,r){return new AnonymousObservable(function(observer){return new BinaryDisposable(r.getDisposable(),xs.subscribe(observer))})};IndexedItem.prototype.compareTo=function(other){var c=this.value.compareTo(other.value);return 0===c&&(c=this.id-other.id),c};var PriorityQueue=Rx.internals.PriorityQueue=function(capacity){this.items=new Array(capacity),this.length=0},priorityProto=PriorityQueue.prototype;priorityProto.isHigherPriority=function(left,right){return this.items[left].compareTo(this.items[right])<0},priorityProto.percolate=function(index){if(!(index>=this.length||index<0)){var parent=index-1>>1;if(!(parent<0||parent===index)&&this.isHigherPriority(index,parent)){var temp=this.items[index];this.items[index]=this.items[parent],this.items[parent]=temp,this.percolate(parent)}}},priorityProto.heapify=function(index){if(+index||(index=0),!(index>=this.length||index<0)){var left=2*index+1,right=2*index+2,first=index;if(left<this.length&&this.isHigherPriority(left,first)&&(first=left),right<this.length&&this.isHigherPriority(right,first)&&(first=right),first!==index){var temp=this.items[index];this.items[index]=this.items[first],this.items[first]=temp,this.heapify(first)}}},priorityProto.peek=function(){return this.items[0].value},priorityProto.removeAt=function(index){this.items[index]=this.items[--this.length],this.items[this.length]=undefined,this.heapify()},priorityProto.dequeue=function(){var result=this.peek();return this.removeAt(0),result},priorityProto.enqueue=function(item){var index=this.length++;this.items[index]=new IndexedItem((PriorityQueue.count++),item),this.percolate(index)},priorityProto.remove=function(item){for(var i=0;i<this.length;i++)if(this.items[i].value===item)return this.removeAt(i),!0;return!1},PriorityQueue.count=0;var CompositeDisposable=Rx.CompositeDisposable=function(){var i,len,args=[];if(Array.isArray(arguments[0]))args=arguments[0];else for(len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];this.disposables=args,this.isDisposed=!1,this.length=args.length},CompositeDisposablePrototype=CompositeDisposable.prototype;CompositeDisposablePrototype.add=function(item){this.isDisposed?item.dispose():(this.disposables.push(item),this.length++)},CompositeDisposablePrototype.remove=function(item){var shouldDispose=!1;if(!this.isDisposed){var idx=this.disposables.indexOf(item);idx!==-1&&(shouldDispose=!0,this.disposables.splice(idx,1),this.length--,item.dispose())}return shouldDispose},CompositeDisposablePrototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var len=this.disposables.length,currentDisposables=new Array(len),i=0;i<len;i++)currentDisposables[i]=this.disposables[i];for(this.disposables=[],this.length=0,i=0;i<len;i++)currentDisposables[i].dispose()}};var Disposable=Rx.Disposable=function(action){this.isDisposed=!1,this.action=action||noop};Disposable.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var disposableCreate=Disposable.create=function(action){return new Disposable(action)},disposableEmpty=Disposable.empty={dispose:noop},isDisposable=Disposable.isDisposable=function(d){return d&&isFunction(d.dispose)},checkDisposed=Disposable.checkDisposed=function(disposable){if(disposable.isDisposed)throw new ObjectDisposedError},disposableFixup=Disposable._fixup=function(result){return isDisposable(result)?result:disposableEmpty},SingleAssignmentDisposable=Rx.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};SingleAssignmentDisposable.prototype.getDisposable=function(){return this.current},SingleAssignmentDisposable.prototype.setDisposable=function(value){if(this.current)throw new Error("Disposable has already been assigned");var shouldDispose=this.isDisposed;!shouldDispose&&(this.current=value),shouldDispose&&value&&value.dispose()},SingleAssignmentDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null,old&&old.dispose()}};var SerialDisposable=Rx.SerialDisposable=function(){this.isDisposed=!1,this.current=null};SerialDisposable.prototype.getDisposable=function(){return this.current},SerialDisposable.prototype.setDisposable=function(value){var shouldDispose=this.isDisposed;if(!shouldDispose){var old=this.current;this.current=value}old&&old.dispose(),shouldDispose&&value&&value.dispose()},SerialDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null}old&&old.dispose()};var BinaryDisposable=Rx.BinaryDisposable=function(first,second){this._first=first,this._second=second,this.isDisposed=!1};BinaryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old1=this._first;this._first=null,old1&&old1.dispose();var old2=this._second;this._second=null,old2&&old2.dispose()}};var NAryDisposable=Rx.NAryDisposable=function(disposables){this._disposables=disposables,this.isDisposed=!1};NAryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var i=0,len=this._disposables.length;i<len;i++)this._disposables[i].dispose();this._disposables.length=0}};var RefCountDisposable=Rx.RefCountDisposable=function(){function InnerDisposable(disposable){this.disposable=disposable,this.disposable.count++,this.isInnerDisposed=!1}function RefCountDisposable(disposable){this.underlyingDisposable=disposable,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return InnerDisposable.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},RefCountDisposable.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},RefCountDisposable.prototype.getDisposable=function(){return this.isDisposed?disposableEmpty:new InnerDisposable(this)},RefCountDisposable}();ScheduledDisposable.prototype.dispose=function(){this.scheduler.schedule(this,scheduleItem)};var ScheduledItem=Rx.internals.ScheduledItem=function(scheduler,state,action,dueTime,comparer){this.scheduler=scheduler,this.state=state,this.action=action,this.dueTime=dueTime,this.comparer=comparer||defaultSubComparer,this.disposable=new SingleAssignmentDisposable};ScheduledItem.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ScheduledItem.prototype.compareTo=function(other){return this.comparer(this.dueTime,other.dueTime)},ScheduledItem.prototype.isCancelled=function(){return this.disposable.isDisposed},ScheduledItem.prototype.invokeCore=function(){return disposableFixup(this.action(this.scheduler,this.state))};var Scheduler=Rx.Scheduler=function(){function Scheduler(){}Scheduler.isScheduler=function(s){return s instanceof Scheduler};var schedulerProto=Scheduler.prototype;return schedulerProto.schedule=function(state,action){throw new NotImplementedError},schedulerProto.scheduleFuture=function(state,dueTime,action){var dt=dueTime;return dt instanceof Date&&(dt-=this.now()),dt=Scheduler.normalize(dt),0===dt?this.schedule(state,action):this._scheduleFuture(state,dt,action)},schedulerProto._scheduleFuture=function(state,dueTime,action){throw new NotImplementedError},Scheduler.now=defaultNow,Scheduler.prototype.now=defaultNow,Scheduler.normalize=function(timeSpan){return timeSpan<0&&(timeSpan=0),timeSpan},Scheduler}(),normalizeTime=Scheduler.normalize,isScheduler=Scheduler.isScheduler;!function(schedulerProto){function invokeRecImmediate(scheduler,pair){function innerAction(state2){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.schedule(state2,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}function invokeRecDate(scheduler,pair){function innerAction(state2,dueTime1){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.scheduleFuture(state2,dueTime1,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}schedulerProto.scheduleRecursive=function(state,action){return this.schedule([state,action],invokeRecImmediate)},schedulerProto.scheduleRecursiveFuture=function(state,dueTime,action){return this.scheduleFuture([state,action],dueTime,invokeRecDate)}}(Scheduler.prototype),function(schedulerProto){schedulerProto.schedulePeriodic=function(state,period,action){if("undefined"==typeof root.setInterval)throw new NotSupportedError;period=normalizeTime(period);var s=state,id=root.setInterval(function(){s=action(s)},period);return disposableCreate(function(){root.clearInterval(id)})}}(Scheduler.prototype),function(schedulerProto){schedulerProto.catchError=schedulerProto["catch"]=function(handler){return new CatchScheduler(this,handler)}}(Scheduler.prototype);var scheduleMethod,clearMethod,SchedulePeriodicRecursive=Rx.internals.SchedulePeriodicRecursive=function(){function createTick(self){return function(command,recurse){recurse(0,self._period);var state=tryCatch(self._action)(self._state);state===errorObj&&(self._cancel.dispose(),thrower(state.e)),self._state=state}}function SchedulePeriodicRecursive(scheduler,state,period,action){this._scheduler=scheduler,this._state=state,this._period=period,this._action=action}return SchedulePeriodicRecursive.prototype.start=function(){var d=new SingleAssignmentDisposable;return this._cancel=d,d.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,createTick(this))),d},SchedulePeriodicRecursive}(),ImmediateScheduler=function(__super__){function ImmediateScheduler(){__super__.call(this)}return inherits(ImmediateScheduler,__super__),ImmediateScheduler.prototype.schedule=function(state,action){return disposableFixup(action(this,state))},ImmediateScheduler}(Scheduler),immediateScheduler=Scheduler.immediate=new ImmediateScheduler,CurrentThreadScheduler=function(__super__){function runTrampoline(){for(;queue.length>0;){var item=queue.dequeue();!item.isCancelled()&&item.invoke()}}function CurrentThreadScheduler(){__super__.call(this)}var queue;return inherits(CurrentThreadScheduler,__super__),CurrentThreadScheduler.prototype.schedule=function(state,action){var si=new ScheduledItem(this,state,action,this.now());if(queue)queue.enqueue(si);else{queue=new PriorityQueue(4),queue.enqueue(si);var result=tryCatch(runTrampoline)();queue=null,result===errorObj&&thrower(result.e)}return si.disposable},CurrentThreadScheduler.prototype.scheduleRequired=function(){return!queue},CurrentThreadScheduler}(Scheduler),currentThreadScheduler=Scheduler.currentThread=new CurrentThreadScheduler,localTimer=function(){var localSetTimeout,localClearTimeout=noop;if(root.setTimeout)localSetTimeout=root.setTimeout,localClearTimeout=root.clearTimeout;else{if(!root.WScript)throw new NotSupportedError;localSetTimeout=function(fn,time){root.WScript.Sleep(time),fn()}}return{setTimeout:localSetTimeout,clearTimeout:localClearTimeout}}(),localSetTimeout=localTimer.setTimeout,localClearTimeout=localTimer.clearTimeout;!function(){function runTask(handle){if(currentlyRunning)localSetTimeout(function(){runTask(handle)},0);else{var task=tasksByHandle[handle];if(task){currentlyRunning=!0;var result=tryCatch(task)();clearMethod(handle),currentlyRunning=!1,result===errorObj&&thrower(result.e)}}}function postMessageSupported(){if(!root.postMessage||root.importScripts)return!1;var isAsync=!1,oldHandler=root.onmessage;return root.onmessage=function(){isAsync=!0},root.postMessage("","*"),root.onmessage=oldHandler,isAsync}var nextHandle=1,tasksByHandle={},currentlyRunning=!1;clearMethod=function(handle){delete tasksByHandle[handle]};var reNative=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),setImmediate="function"==typeof(setImmediate=freeGlobal&&moduleExports&&freeGlobal.setImmediate)&&!reNative.test(setImmediate)&&setImmediate;if(isFunction(setImmediate))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,setImmediate(function(){runTask(id)}),id};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,process.nextTick(function(){runTask(id)}),id};else if(postMessageSupported()){var MSG_PREFIX="ms.rx.schedule"+Math.random(),onGlobalPostMessage=function(event){"string"==typeof event.data&&event.data.substring(0,MSG_PREFIX.length)===MSG_PREFIX&&runTask(event.data.substring(MSG_PREFIX.length))};root.addEventListener("message",onGlobalPostMessage,!1),scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,root.postMessage(MSG_PREFIX+id,"*"),id}}else if(root.MessageChannel){var channel=new root.MessageChannel;channel.port1.onmessage=function(e){runTask(e.data)},scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,channel.port2.postMessage(id),id}}else scheduleMethod="document"in root&&"onreadystatechange"in root.document.createElement("script")?function(action){var scriptElement=root.document.createElement("script"),id=nextHandle++;return tasksByHandle[id]=action,scriptElement.onreadystatechange=function(){runTask(id),scriptElement.onreadystatechange=null,scriptElement.parentNode.removeChild(scriptElement),scriptElement=null},root.document.documentElement.appendChild(scriptElement),id}:function(action){var id=nextHandle++;return tasksByHandle[id]=action,localSetTimeout(function(){runTask(id)},0),id}}();var DefaultScheduler=function(__super__){function DefaultScheduler(){__super__.call(this)}function scheduleAction(disposable,action,scheduler,state){return function(){disposable.setDisposable(Disposable._fixup(action(scheduler,state)))}}function ClearDisposable(id){this._id=id,this.isDisposed=!1}function LocalClearDisposable(id){this._id=id,this.isDisposed=!1}function scheduleLongRunning(state,action,disposable){return function(){action(state,disposable)}}return inherits(DefaultScheduler,__super__),ClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,clearMethod(this._id))},LocalClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,localClearTimeout(this._id))},DefaultScheduler.prototype.schedule=function(state,action){var disposable=new SingleAssignmentDisposable,id=scheduleMethod(scheduleAction(disposable,action,this,state));return new BinaryDisposable(disposable,new ClearDisposable(id))},DefaultScheduler.prototype._scheduleFuture=function(state,dueTime,action){if(0===dueTime)return this.schedule(state,action);var disposable=new SingleAssignmentDisposable,id=localSetTimeout(scheduleAction(disposable,action,this,state),dueTime);return new BinaryDisposable(disposable,new LocalClearDisposable(id))},DefaultScheduler.prototype.scheduleLongRunning=function(state,action){var disposable=disposableCreate(noop);return scheduleMethod(scheduleLongRunning(state,action,disposable)),disposable},DefaultScheduler}(Scheduler),defaultScheduler=Scheduler["default"]=Scheduler.async=new DefaultScheduler,CatchScheduler=function(__super__){function CatchScheduler(scheduler,handler){this._scheduler=scheduler,this._handler=handler,this._recursiveOriginal=null,this._recursiveWrapper=null,__super__.call(this)}return inherits(CatchScheduler,__super__),CatchScheduler.prototype.schedule=function(state,action){return this._scheduler.schedule(state,this._wrap(action))},CatchScheduler.prototype._scheduleFuture=function(state,dueTime,action){return this._scheduler.schedule(state,dueTime,this._wrap(action))},CatchScheduler.prototype.now=function(){return this._scheduler.now()},CatchScheduler.prototype._clone=function(scheduler){return new CatchScheduler(scheduler,this._handler)},CatchScheduler.prototype._wrap=function(action){var parent=this;return function(self,state){var res=tryCatch(action)(parent._getRecursiveWrapper(self),state);return res===errorObj?(parent._handler(res.e)||thrower(res.e),disposableEmpty):disposableFixup(res)}},CatchScheduler.prototype._getRecursiveWrapper=function(scheduler){if(this._recursiveOriginal!==scheduler){this._recursiveOriginal=scheduler;var wrapper=this._clone(scheduler);wrapper._recursiveOriginal=scheduler,wrapper._recursiveWrapper=wrapper,this._recursiveWrapper=wrapper}return this._recursiveWrapper},CatchScheduler.prototype.schedulePeriodic=function(state,period,action){var self=this,failed=!1,d=new SingleAssignmentDisposable;return d.setDisposable(this._scheduler.schedulePeriodic(state,period,function(state1){if(failed)return null;var res=tryCatch(action)(state1);return res===errorObj?(failed=!0,self._handler(res.e)||thrower(res.e),d.dispose(),null):res})),d},CatchScheduler}(Scheduler),Notification=Rx.Notification=function(){function Notification(){}return Notification.prototype._accept=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype._acceptObserver=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype.accept=function(observerOrOnNext,onError,onCompleted){return observerOrOnNext&&"object"==typeof observerOrOnNext?this._acceptObserver(observerOrOnNext):this._accept(observerOrOnNext,onError,onCompleted)},Notification.prototype.toObservable=function(scheduler){var self=this;return isScheduler(scheduler)||(scheduler=immediateScheduler),new AnonymousObservable(function(o){return scheduler.schedule(self,function(_,notification){notification._acceptObserver(o),"N"===notification.kind&&o.onCompleted()})})},Notification}(),OnNextNotification=function(__super__){function OnNextNotification(value){this.value=value,this.kind="N"}return inherits(OnNextNotification,__super__),OnNextNotification.prototype._accept=function(onNext){return onNext(this.value)},OnNextNotification.prototype._acceptObserver=function(o){return o.onNext(this.value)},OnNextNotification.prototype.toString=function(){return"OnNext("+this.value+")"},OnNextNotification}(Notification),OnErrorNotification=function(__super__){function OnErrorNotification(error){this.error=error,this.kind="E"}return inherits(OnErrorNotification,__super__),OnErrorNotification.prototype._accept=function(onNext,onError){return onError(this.error)},OnErrorNotification.prototype._acceptObserver=function(o){return o.onError(this.error)},OnErrorNotification.prototype.toString=function(){return"OnError("+this.error+")"},OnErrorNotification}(Notification),OnCompletedNotification=function(__super__){function OnCompletedNotification(){this.kind="C"}return inherits(OnCompletedNotification,__super__),OnCompletedNotification.prototype._accept=function(onNext,onError,onCompleted){return onCompleted()},OnCompletedNotification.prototype._acceptObserver=function(o){return o.onCompleted()},OnCompletedNotification.prototype.toString=function(){
return"OnCompleted()"},OnCompletedNotification}(Notification),notificationCreateOnNext=Notification.createOnNext=function(value){return new OnNextNotification(value)},notificationCreateOnError=Notification.createOnError=function(error){return new OnErrorNotification(error)},notificationCreateOnCompleted=Notification.createOnCompleted=function(){return new OnCompletedNotification},Observer=Rx.Observer=function(){};Observer.prototype.toNotifier=function(){var observer=this;return function(n){return n.accept(observer)}},Observer.prototype.asObserver=function(){var self=this;return new AnonymousObserver(function(x){self.onNext(x)},function(err){self.onError(err)},function(){self.onCompleted()})},Observer.prototype.checked=function(){return new CheckedObserver(this)};var observerCreate=Observer.create=function(onNext,onError,onCompleted){return onNext||(onNext=noop),onError||(onError=defaultError),onCompleted||(onCompleted=noop),new AnonymousObserver(onNext,onError,onCompleted)};Observer.fromNotifier=function(handler,thisArg){var cb=bindCallback(handler,thisArg,1);return new AnonymousObserver(function(x){return cb(notificationCreateOnNext(x))},function(e){return cb(notificationCreateOnError(e))},function(){return cb(notificationCreateOnCompleted())})},Observer.prototype.notifyOn=function(scheduler){return new ObserveOnObserver(scheduler,this)},Observer.prototype.makeSafe=function(disposable){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,disposable)};var observableProto,AbstractObserver=Rx.internals.AbstractObserver=function(__super__){function AbstractObserver(){this.isStopped=!1}return inherits(AbstractObserver,__super__),AbstractObserver.prototype.next=notImplemented,AbstractObserver.prototype.error=notImplemented,AbstractObserver.prototype.completed=notImplemented,AbstractObserver.prototype.onNext=function(value){!this.isStopped&&this.next(value)},AbstractObserver.prototype.onError=function(error){this.isStopped||(this.isStopped=!0,this.error(error))},AbstractObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},AbstractObserver.prototype.dispose=function(){this.isStopped=!0},AbstractObserver.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.error(e),!0)},AbstractObserver}(Observer),AnonymousObserver=Rx.AnonymousObserver=function(__super__){function AnonymousObserver(onNext,onError,onCompleted){__super__.call(this),this._onNext=onNext,this._onError=onError,this._onCompleted=onCompleted}return inherits(AnonymousObserver,__super__),AnonymousObserver.prototype.next=function(value){this._onNext(value)},AnonymousObserver.prototype.error=function(error){this._onError(error)},AnonymousObserver.prototype.completed=function(){this._onCompleted()},AnonymousObserver}(AbstractObserver),CheckedObserver=function(__super__){function CheckedObserver(observer){__super__.call(this),this._observer=observer,this._state=0}inherits(CheckedObserver,__super__);var CheckedObserverPrototype=CheckedObserver.prototype;return CheckedObserverPrototype.onNext=function(value){this.checkAccess();var res=tryCatch(this._observer.onNext).call(this._observer,value);this._state=0,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.onError=function(err){this.checkAccess();var res=tryCatch(this._observer.onError).call(this._observer,err);this._state=2,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.onCompleted=function(){this.checkAccess();var res=tryCatch(this._observer.onCompleted).call(this._observer);this._state=2,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},CheckedObserver}(Observer),ScheduledObserver=Rx.internals.ScheduledObserver=function(__super__){function ScheduledObserver(scheduler,observer){__super__.call(this),this.scheduler=scheduler,this.observer=observer,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new SerialDisposable}function enqueueNext(observer,x){return function(){observer.onNext(x)}}function enqueueError(observer,e){return function(){observer.onError(e)}}function enqueueCompleted(observer){return function(){observer.onCompleted()}}function scheduleMethod(state,recurse){var work;if(!(state.queue.length>0))return void(state.isAcquired=!1);work=state.queue.shift();var res=tryCatch(work)();return res===errorObj?(state.queue=[],state.hasFaulted=!0,thrower(res.e)):void recurse(state)}return inherits(ScheduledObserver,__super__),ScheduledObserver.prototype.next=function(x){this.queue.push(enqueueNext(this.observer,x))},ScheduledObserver.prototype.error=function(e){this.queue.push(enqueueError(this.observer,e))},ScheduledObserver.prototype.completed=function(){this.queue.push(enqueueCompleted(this.observer))},ScheduledObserver.prototype.ensureActive=function(){var isOwner=!1;!this.hasFaulted&&this.queue.length>0&&(isOwner=!this.isAcquired,this.isAcquired=!0),isOwner&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,scheduleMethod))},ScheduledObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this.disposable.dispose()},ScheduledObserver}(AbstractObserver),ObserveOnObserver=function(__super__){function ObserveOnObserver(scheduler,observer,cancel){__super__.call(this,scheduler,observer),this._cancel=cancel}return inherits(ObserveOnObserver,__super__),ObserveOnObserver.prototype.next=function(value){__super__.prototype.next.call(this,value),this.ensureActive()},ObserveOnObserver.prototype.error=function(e){__super__.prototype.error.call(this,e),this.ensureActive()},ObserveOnObserver.prototype.completed=function(){__super__.prototype.completed.call(this),this.ensureActive()},ObserveOnObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},ObserveOnObserver}(ScheduledObserver),Observable=Rx.Observable=function(){function makeSubscribe(self,subscribe){return function(o){var oldOnError=o.onError;return o.onError=function(e){makeStackTraceLong(e,self),oldOnError.call(o,e)},subscribe.call(self,o)}}function Observable(){if(Rx.config.longStackSupport&&hasStacks){var oldSubscribe=this._subscribe,e=tryCatch(thrower)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=makeSubscribe(this,oldSubscribe)}}return observableProto=Observable.prototype,Observable.isObservable=function(o){return o&&isFunction(o.subscribe)},observableProto.subscribe=observableProto.forEach=function(oOrOnNext,onError,onCompleted){return this._subscribe("object"==typeof oOrOnNext?oOrOnNext:observerCreate(oOrOnNext,onError,onCompleted))},observableProto.subscribeOnNext=function(onNext,thisArg){return this._subscribe(observerCreate("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext))},observableProto.subscribeOnError=function(onError,thisArg){return this._subscribe(observerCreate(null,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError))},observableProto.subscribeOnCompleted=function(onCompleted,thisArg){return this._subscribe(observerCreate(null,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted))},Observable}(),ObservableBase=Rx.ObservableBase=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.subscribeCore).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function ObservableBase(){__super__.call(this)}return inherits(ObservableBase,__super__),ObservableBase.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},ObservableBase.prototype.subscribeCore=notImplemented,ObservableBase}(Observable),FlatMapObservable=Rx.FlatMapObservable=function(__super__){function FlatMapObservable(source,selector,resultSelector,thisArg){this.resultSelector=isFunction(resultSelector)?resultSelector:null,this.selector=bindCallback(isFunction(selector)?selector:function(){return selector},thisArg,3),this.source=source,__super__.call(this)}function InnerObserver(observer,selector,resultSelector,source){this.i=0,this.selector=selector,this.resultSelector=resultSelector,this.source=source,this.o=observer,AbstractObserver.call(this)}return inherits(FlatMapObservable,__super__),FlatMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this.resultSelector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype._wrapResult=function(result,x,i){return this.resultSelector?result.map(function(y,i2){return this.resultSelector(x,y,i,i2)},this):result},InnerObserver.prototype.next=function(x){var i=this.i++,result=tryCatch(this.selector)(x,i,this.source);return result===errorObj?this.o.onError(result.e):(isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=Observable.from(result)),void this.o.onNext(this._wrapResult(result,x,i)))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FlatMapObservable}(ObservableBase),Enumerable=Rx.internals.Enumerable=function(){};IsDisposedDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var ConcatEnumerableObservable=function(__super__){function ConcatEnumerableObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(ConcatEnumerableObservable,__super__),ConcatEnumerableObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,o:o,subscription:subscription,e:this.sources[$iterator$]()},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.o.onError(e)},InnerObserver.prototype.completed=function(){this._recurse(this._state)},ConcatEnumerableObservable}(ObservableBase);Enumerable.prototype.concat=function(){return new ConcatEnumerableObservable(this)};var CatchErrorObservable=function(__super__){function CatchErrorObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return null!==state.lastError?state.o.onError(state.lastError):state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(CatchErrorObservable,__super__),CatchErrorObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,e:this.sources[$iterator$](),subscription:subscription,lastError:null,o:o},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.lastError=e,this._recurse(this._state)},InnerObserver.prototype.completed=function(){this._state.o.onCompleted()},CatchErrorObservable}(ObservableBase);Enumerable.prototype.catchError=function(){return new CatchErrorObservable(this)};var RepeatEnumerable=function(__super__){function RepeatEnumerable(v,c){this.v=v,this.c=null==c?-1:c}function RepeatEnumerator(p){this.v=p.v,this.l=p.c}return inherits(RepeatEnumerable,__super__),RepeatEnumerable.prototype[$iterator$]=function(){return new RepeatEnumerator(this)},RepeatEnumerator.prototype.next=function(){return 0===this.l?doneEnumerator:(this.l>0&&this.l--,{done:!1,value:this.v})},RepeatEnumerable}(Enumerable),enumerableRepeat=Enumerable.repeat=function(value,repeatCount){return new RepeatEnumerable(value,repeatCount)},OfEnumerable=function(__super__){function OfEnumerable(s,fn,thisArg){this.s=s,this.fn=fn?bindCallback(fn,thisArg,3):null}function OfEnumerator(p){this.i=-1,this.s=p.s,this.l=this.s.length,this.fn=p.fn}return inherits(OfEnumerable,__super__),OfEnumerable.prototype[$iterator$]=function(){return new OfEnumerator(this)},OfEnumerator.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:doneEnumerator},OfEnumerable}(Enumerable),enumerableOf=Enumerable.of=function(source,selector,thisArg){return new OfEnumerable(source,selector,thisArg)},ObserveOnObservable=function(__super__){function ObserveOnObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(ObserveOnObservable,__super__),ObserveOnObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ObserveOnObserver(this._s,o))},ObserveOnObservable}(ObservableBase);observableProto.observeOn=function(scheduler){return new ObserveOnObservable(this,scheduler)};var SubscribeOnObservable=function(__super__){function SubscribeOnObservable(source,s){this.source=source,this._s=s,__super__.call(this)}function scheduleMethod(scheduler,state){var source=state[0],d=state[1],o=state[2];d.setDisposable(new ScheduledDisposable(scheduler,source.subscribe(o)))}return inherits(SubscribeOnObservable,__super__),SubscribeOnObservable.prototype.subscribeCore=function(o){var m=new SingleAssignmentDisposable,d=new SerialDisposable;return d.setDisposable(m),m.setDisposable(this._s.schedule([this.source,d,o],scheduleMethod)),d},SubscribeOnObservable}(ObservableBase);observableProto.subscribeOn=function(scheduler){return new SubscribeOnObservable(this,scheduler)};var FromPromiseObservable=function(__super__){function FromPromiseObservable(p,s){this._p=p,this._s=s,__super__.call(this)}function scheduleNext(s,state){var o=state[0],data=state[1];o.onNext(data),o.onCompleted()}function scheduleError(s,state){var o=state[0],err=state[1];o.onError(err)}return inherits(FromPromiseObservable,__super__),FromPromiseObservable.prototype.subscribeCore=function(o){var sad=new SingleAssignmentDisposable,self=this,p=this._p;return isFunction(p)&&(p=tryCatch(p)(),p===errorObj)?(o.onError(p.e),sad):(p.then(function(data){sad.setDisposable(self._s.schedule([o,data],scheduleNext))},function(err){sad.setDisposable(self._s.schedule([o,err],scheduleError))}),sad)},FromPromiseObservable}(ObservableBase),observableFromPromise=Observable.fromPromise=function(promise,scheduler){return scheduler||(scheduler=defaultScheduler),new FromPromiseObservable(promise,scheduler)};observableProto.toPromise=function(promiseCtor){if(promiseCtor||(promiseCtor=Rx.config.Promise),!promiseCtor)throw new NotSupportedError("Promise type not provided nor in Rx.config.Promise");var source=this;return new promiseCtor(function(resolve,reject){var value;source.subscribe(function(v){value=v},reject,function(){resolve(value)})})};var ToArrayObservable=function(__super__){function ToArrayObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.a=[],AbstractObserver.call(this)}return inherits(ToArrayObservable,__super__),ToArrayObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.a.push(x)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},ToArrayObservable}(ObservableBase);observableProto.toArray=function(){return new ToArrayObservable(this)},Observable.create=function(subscribe,parent){return new AnonymousObservable(subscribe,parent)};var Defer=function(__super__){function Defer(factory){this._f=factory,__super__.call(this)}return inherits(Defer,__super__),Defer.prototype.subscribeCore=function(o){var result=tryCatch(this._f)();return result===errorObj?observableThrow(result.e).subscribe(o):(isPromise(result)&&(result=observableFromPromise(result)),result.subscribe(o))},Defer}(ObservableBase),observableDefer=Observable.defer=function(observableFactory){return new Defer(observableFactory)},EmptyObservable=function(__super__){function EmptyObservable(scheduler){this.scheduler=scheduler,__super__.call(this)}function EmptySink(observer,scheduler){this.observer=observer,this.scheduler=scheduler}function scheduleItem(s,state){return state.onCompleted(),disposableEmpty}return inherits(EmptyObservable,__super__),EmptyObservable.prototype.subscribeCore=function(observer){var sink=new EmptySink(observer,this.scheduler);return sink.run()},EmptySink.prototype.run=function(){var state=this.observer;return this.scheduler===immediateScheduler?scheduleItem(null,state):this.scheduler.schedule(state,scheduleItem)},EmptyObservable}(ObservableBase),EMPTY_OBSERVABLE=new EmptyObservable(immediateScheduler),observableEmpty=Observable.empty=function(scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),scheduler===immediateScheduler?EMPTY_OBSERVABLE:new EmptyObservable(scheduler)},FromObservable=function(__super__){function FromObservable(iterable,fn,scheduler){this._iterable=iterable,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function createScheduleMethod(o,it,fn){return function(i,recurse){var next=tryCatch(it.next).call(it);if(next===errorObj)return o.onError(next.e);if(next.done)return o.onCompleted();var result=next.value;return isFunction(fn)&&(result=tryCatch(fn)(result,i),result===errorObj)?o.onError(result.e):(o.onNext(result),void recurse(i+1))}}return inherits(FromObservable,__super__),FromObservable.prototype.subscribeCore=function(o){var list=Object(this._iterable),it=getIterable(list);return this._scheduler.scheduleRecursive(0,createScheduleMethod(o,it,this._fn))},FromObservable}(ObservableBase),maxSafeInteger=Math.pow(2,53)-1;StringIterable.prototype[$iterator$]=function(){return new StringIterator(this._s)},StringIterator.prototype[$iterator$]=function(){return this},StringIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:doneEnumerator},ArrayIterable.prototype[$iterator$]=function(){return new ArrayIterator(this._a)},ArrayIterator.prototype[$iterator$]=function(){return this},ArrayIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:doneEnumerator};var observableFrom=Observable.from=function(iterable,mapFn,thisArg,scheduler){if(null==iterable)throw new Error("iterable cannot be null.");if(mapFn&&!isFunction(mapFn))throw new Error("mapFn when provided must be a function");if(mapFn)var mapper=bindCallback(mapFn,thisArg,2);return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromObservable(iterable,mapper,scheduler)},FromArrayObservable=function(__super__){function FromArrayObservable(args,scheduler){this._args=args,this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,args){var len=args.length;return function(i,recurse){i<len?(o.onNext(args[i]),recurse(i+1)):o.onCompleted()}}return inherits(FromArrayObservable,__super__),FromArrayObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._args))},FromArrayObservable}(ObservableBase),observableFromArray=Observable.fromArray=function(array,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)},GenerateObservable=function(__super__){function GenerateObservable(state,cndFn,itrFn,resFn,s){this._initialState=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);var hasResult=tryCatch(state.self._cndFn)(state.newState);if(hasResult===errorObj)return state.o.onError(hasResult.e);if(hasResult){var result=tryCatch(state.self._resFn)(state.newState);if(result===errorObj)return state.o.onError(result.e);state.o.onNext(result),recurse(state)}else state.o.onCompleted()}return inherits(GenerateObservable,__super__),GenerateObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(state,scheduleRecursive)},GenerateObservable}(ObservableBase);Observable.generate=function(initialState,condition,iterate,resultSelector,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new GenerateObservable(initialState,condition,iterate,resultSelector,scheduler)},Observable.of=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return new FromArrayObservable(args,currentThreadScheduler)},Observable.ofWithScheduler=function(scheduler){for(var len=arguments.length,args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];return new FromArrayObservable(args,scheduler)},Observable.ofArrayChanges=function(array){if(!Array.isArray(array))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new AnonymousObservable(function(observer){function observerFn(changes){for(var i=0,len=changes.length;i<len;i++)observer.onNext(changes[i])}return Array.observe(array,observerFn),function(){Array.unobserve(array,observerFn)}})},Observable.ofObjectChanges=function(obj){if(null==obj)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new AnonymousObservable(function(observer){function observerFn(changes){for(var i=0,len=changes.length;i<len;i++)observer.onNext(changes[i])}return Object.observe(obj,observerFn),function(){Object.unobserve(obj,observerFn)}})};var NeverObservable=function(__super__){function NeverObservable(){__super__.call(this)}return inherits(NeverObservable,__super__),NeverObservable.prototype.subscribeCore=function(observer){return disposableEmpty},NeverObservable}(ObservableBase),NEVER_OBSERVABLE=new NeverObservable,observableNever=Observable.never=function(){return NEVER_OBSERVABLE},PairsObservable=function(__super__){function PairsObservable(o,scheduler){this._o=o,this._keys=Object.keys(o),this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,obj,keys){return function(i,recurse){if(i<keys.length){var key=keys[i];o.onNext([key,obj[key]]),recurse(i+1)}else o.onCompleted()}}return inherits(PairsObservable,__super__),PairsObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._o,this._keys))},PairsObservable}(ObservableBase);Observable.pairs=function(obj,scheduler){return scheduler||(scheduler=currentThreadScheduler),new PairsObservable(obj,scheduler)};var RangeObservable=function(__super__){function RangeObservable(start,count,scheduler){this.start=start,this.rangeCount=count,this.scheduler=scheduler,__super__.call(this)}function loopRecursive(start,count,o){return function(i,recurse){i<count?(o.onNext(start+i),recurse(i+1)):o.onCompleted()}}return inherits(RangeObservable,__super__),RangeObservable.prototype.subscribeCore=function(o){return this.scheduler.scheduleRecursive(0,loopRecursive(this.start,this.rangeCount,o))},RangeObservable}(ObservableBase);Observable.range=function(start,count,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RangeObservable(start,count,scheduler)};var RepeatObservable=function(__super__){function RepeatObservable(value,repeatCount,scheduler){this.value=value,this.repeatCount=null==repeatCount?-1:repeatCount,this.scheduler=scheduler,__super__.call(this)}return inherits(RepeatObservable,__super__),RepeatObservable.prototype.subscribeCore=function(observer){var sink=new RepeatSink(observer,this);return sink.run()},RepeatObservable}(ObservableBase);RepeatSink.prototype.run=function(){function loopRecursive(i,recurse){return(i===-1||i>0)&&(observer.onNext(value),i>0&&i--),0===i?observer.onCompleted():void recurse(i)}var observer=this.observer,value=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,loopRecursive)},Observable.repeat=function(value,repeatCount,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RepeatObservable(value,repeatCount,scheduler)};var JustObservable=function(__super__){function JustObservable(value,scheduler){this._value=value,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var value=state[0],observer=state[1];return observer.onNext(value),observer.onCompleted(),disposableEmpty}return inherits(JustObservable,__super__),JustObservable.prototype.subscribeCore=function(o){var state=[this._value,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},JustObservable}(ObservableBase),ThrowObservable=(Observable["return"]=Observable.just=function(value,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new JustObservable(value,scheduler)},function(__super__){function ThrowObservable(error,scheduler){this._error=error,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var e=state[0],o=state[1];return o.onError(e),disposableEmpty}return inherits(ThrowObservable,__super__),ThrowObservable.prototype.subscribeCore=function(o){var state=[this._error,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},ThrowObservable}(ObservableBase)),observableThrow=Observable["throw"]=function(error,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new ThrowObservable(error,scheduler)},UsingObservable=function(__super__){function UsingObservable(resFn,obsFn){this._resFn=resFn,this._obsFn=obsFn,__super__.call(this)}return inherits(UsingObservable,__super__),UsingObservable.prototype.subscribeCore=function(o){var disposable=disposableEmpty,resource=tryCatch(this._resFn)();if(resource===errorObj)return new BinaryDisposable(observableThrow(resource.e).subscribe(o),disposable);resource&&(disposable=resource);var source=tryCatch(this._obsFn)(resource);return source===errorObj?new BinaryDisposable(observableThrow(source.e).subscribe(o),disposable):new BinaryDisposable(source.subscribe(o),disposable)},UsingObservable}(ObservableBase);Observable.using=function(resourceFactory,observableFactory){return new UsingObservable(resourceFactory,observableFactory)},observableProto.amb=function(rightSource){var leftSource=this;return new AnonymousObservable(function(observer){function choiceL(){choice||(choice=leftChoice,rightSubscription.dispose())}function choiceR(){choice||(choice=rightChoice,leftSubscription.dispose())}var choice,leftChoice="L",rightChoice="R",leftSubscription=new SingleAssignmentDisposable,rightSubscription=new SingleAssignmentDisposable;isPromise(rightSource)&&(rightSource=observableFromPromise(rightSource));var leftSubscribe=observerCreate(function(left){choiceL(),choice===leftChoice&&observer.onNext(left)},function(e){choiceL(),choice===leftChoice&&observer.onError(e)},function(){choiceL(),choice===leftChoice&&observer.onCompleted()}),rightSubscribe=observerCreate(function(right){choiceR(),choice===rightChoice&&observer.onNext(right)},function(e){choiceR(),choice===rightChoice&&observer.onError(e)},function(){choiceR(),choice===rightChoice&&observer.onCompleted()});return leftSubscription.setDisposable(leftSource.subscribe(leftSubscribe)),rightSubscription.setDisposable(rightSource.subscribe(rightSubscribe)),new BinaryDisposable(leftSubscription,rightSubscription)})},Observable.amb=function(){var items,acc=observableNever();if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(items);for(var i=0;i<len;i++)items[i]=arguments[i]}for(var i=0,len=items.length;i<len;i++)acc=amb(acc,items[i]);return acc};var CatchObservable=function(__super__){function CatchObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CatchObservable,__super__),CatchObservable.prototype.subscribeCore=function(o){var d1=new SingleAssignmentDisposable,subscription=new SerialDisposable;return subscription.setDisposable(d1),d1.setDisposable(this.source.subscribe(new CatchObserver(o,subscription,this._fn))),subscription},CatchObservable}(ObservableBase),CatchObserver=function(__super__){function CatchObserver(o,s,fn){this._o=o,this._s=s,this._fn=fn,__super__.call(this)}return inherits(CatchObserver,__super__),CatchObserver.prototype.next=function(x){this._o.onNext(x)},CatchObserver.prototype.completed=function(){return this._o.onCompleted()},CatchObserver.prototype.error=function(e){var result=tryCatch(this._fn)(e);if(result===errorObj)return this._o.onError(result.e);isPromise(result)&&(result=observableFromPromise(result));var d=new SingleAssignmentDisposable;this._s.setDisposable(d),d.setDisposable(result.subscribe(this._o))},CatchObserver}(AbstractObserver);observableProto["catch"]=function(handlerOrSecond){return isFunction(handlerOrSecond)?new CatchObservable(this,handlerOrSecond):observableCatch([this,handlerOrSecond])};var observableCatch=Observable["catch"]=function(){var items;if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(len);for(var i=0;i<len;i++)items[i]=arguments[i]}return enumerableOf(items).catchError()};observableProto.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),combineLatest.apply(this,args)};var CombineLatestObservable=function(__super__){function CombineLatestObservable(params,cb){this._params=params,this._cb=cb,__super__.call(this)}return inherits(CombineLatestObservable,__super__),CombineLatestObservable.prototype.subscribeCore=function(observer){for(var len=this._params.length,subscriptions=new Array(len),state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,isDone:arrayInitialize(len,falseFactory),values:new Array(len)},i=0;i<len;i++){var source=this._params[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new CombineLatestObserver(observer,i,this._cb,state)))}return new NAryDisposable(subscriptions);
},CombineLatestObservable}(ObservableBase),CombineLatestObserver=function(__super__){function CombineLatestObserver(o,i,cb,state){this._o=o,this._i=i,this._cb=cb,this._state=state,__super__.call(this)}function notTheSame(i){return function(x,j){return j!==i}}return inherits(CombineLatestObserver,__super__),CombineLatestObserver.prototype.next=function(x){if(this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(identity))){var res=tryCatch(this._cb).apply(null,this._state.values);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._state.isDone.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},CombineLatestObserver.prototype.error=function(e){this._o.onError(e)},CombineLatestObserver.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(identity)&&this._o.onCompleted()},CombineLatestObserver}(AbstractObserver),combineLatest=Observable.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new CombineLatestObservable(args,resultSelector)};observableProto.concat=function(){for(var args=[],i=0,len=arguments.length;i<len;i++)args.push(arguments[i]);return args.unshift(this),observableConcat.apply(null,args)};var ConcatObserver=function(__super__){function ConcatObserver(s,fn){this._s=s,this._fn=fn,__super__.call(this)}return inherits(ConcatObserver,__super__),ConcatObserver.prototype.next=function(x){this._s.o.onNext(x)},ConcatObserver.prototype.error=function(e){this._s.o.onError(e)},ConcatObserver.prototype.completed=function(){this._s.i++,this._fn(this._s)},ConcatObserver}(AbstractObserver),ConcatObservable=function(__super__){function ConcatObservable(sources){this._sources=sources,__super__.call(this)}function scheduleRecursive(state,recurse){if(!state.disposable.isDisposed){if(state.i===state.sources.length)return state.o.onCompleted();var currentValue=state.sources[state.i];isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new ConcatObserver(state,recurse)))}}return inherits(ConcatObservable,__super__),ConcatObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,disposable=disposableCreate(noop),state={o:o,i:0,subscription:subscription,disposable:disposable,sources:this._sources},cancelable=immediateScheduler.scheduleRecursive(state,scheduleRecursive);return new NAryDisposable([subscription,disposable,cancelable])},ConcatObservable}(ObservableBase),observableConcat=Observable.concat=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(arguments.length);for(var i=0,len=arguments.length;i<len;i++)args[i]=arguments[i]}return new ConcatObservable(args)};observableProto.concatAll=function(){return this.merge(1)};var MergeObservable=function(__super__){function MergeObservable(source,maxConcurrent){this.source=source,this.maxConcurrent=maxConcurrent,__super__.call(this)}return inherits(MergeObservable,__super__),MergeObservable.prototype.subscribeCore=function(observer){var g=new CompositeDisposable;return g.add(this.source.subscribe(new MergeObserver(observer,this.maxConcurrent,g))),g},MergeObservable}(ObservableBase),MergeObserver=function(__super__){function MergeObserver(o,max,g){this.o=o,this.max=max,this.g=g,this.done=!1,this.q=[],this.activeCount=0,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeObserver,__super__),MergeObserver.prototype.handleSubscribe=function(xs){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(xs)&&(xs=observableFromPromise(xs)),sad.setDisposable(xs.subscribe(new InnerObserver(this,sad)))},MergeObserver.prototype.next=function(innerSource){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(innerSource)):this.q.push(innerSource)},MergeObserver.prototype.error=function(e){this.o.onError(e)},MergeObserver.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},MergeObserver}(AbstractObserver);observableProto.merge=function(maxConcurrentOrOther){return"number"!=typeof maxConcurrentOrOther?observableMerge(this,maxConcurrentOrOther):new MergeObservable(this,maxConcurrentOrOther)};var observableMerge=Observable.merge=function(){var scheduler,i,sources=[],len=arguments.length;if(arguments[0])if(isScheduler(arguments[0]))for(scheduler=arguments[0],i=1;i<len;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=0;i<len;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=1;i<len;i++)sources.push(arguments[i]);return Array.isArray(sources[0])&&(sources=sources[0]),observableOf(scheduler,sources).mergeAll()},MergeAllObservable=function(__super__){function MergeAllObservable(source){this.source=source,__super__.call(this)}return inherits(MergeAllObservable,__super__),MergeAllObservable.prototype.subscribeCore=function(o){var g=new CompositeDisposable,m=new SingleAssignmentDisposable;return g.add(m),m.setDisposable(this.source.subscribe(new MergeAllObserver(o,g))),g},MergeAllObservable}(ObservableBase),MergeAllObserver=function(__super__){function MergeAllObserver(o,g){this.o=o,this.g=g,this.done=!1,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeAllObserver,__super__),MergeAllObserver.prototype.next=function(innerSource){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),sad.setDisposable(innerSource.subscribe(new InnerObserver(this,sad)))},MergeAllObserver.prototype.error=function(e){this.o.onError(e)},MergeAllObserver.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},MergeAllObserver}(AbstractObserver);observableProto.mergeAll=function(){return new MergeAllObservable(this)};var CompositeError=Rx.CompositeError=function(errors){this.innerErrors=errors,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};CompositeError.prototype=Object.create(Error.prototype),CompositeError.prototype.name="CompositeError";var MergeDelayErrorObservable=function(__super__){function MergeDelayErrorObservable(source){this.source=source,__super__.call(this)}return inherits(MergeDelayErrorObservable,__super__),MergeDelayErrorObservable.prototype.subscribeCore=function(o){var group=new CompositeDisposable,m=new SingleAssignmentDisposable,state={isStopped:!1,errors:[],o:o};return group.add(m),m.setDisposable(this.source.subscribe(new MergeDelayErrorObserver(group,state))),group},MergeDelayErrorObservable}(ObservableBase),MergeDelayErrorObserver=function(__super__){function MergeDelayErrorObserver(group,state){this._group=group,this._state=state,__super__.call(this)}function setCompletion(o,errors){0===errors.length?o.onCompleted():1===errors.length?o.onError(errors[0]):o.onError(new CompositeError(errors))}function InnerObserver(inner,group,state){this._inner=inner,this._group=group,this._state=state,__super__.call(this)}return inherits(MergeDelayErrorObserver,__super__),MergeDelayErrorObserver.prototype.next=function(x){var inner=new SingleAssignmentDisposable;this._group.add(inner),isPromise(x)&&(x=observableFromPromise(x)),inner.setDisposable(x.subscribe(new InnerObserver(inner,this._group,this._state)))},MergeDelayErrorObserver.prototype.error=function(e){this._state.errors.push(e),this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.errors.push(e),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},InnerObserver.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver}(AbstractObserver);Observable.mergeDelayError=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{var len=arguments.length;args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}var source=observableOf(null,args);return new MergeDelayErrorObservable(source)},observableProto.onErrorResumeNext=function(second){if(!second)throw new Error("Second observable is required");return onErrorResumeNext([this,second])};var OnErrorResumeNextObservable=function(__super__){function OnErrorResumeNextObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(state.pos<state.sources.length){var current=state.sources[state.pos++];isPromise(current)&&(current=observableFromPromise(current));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(current.subscribe(new OnErrorResumeNextObserver(state,recurse)))}else state.o.onCompleted()}return inherits(OnErrorResumeNextObservable,__super__),OnErrorResumeNextObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={pos:0,subscription:subscription,o:o,sources:this.sources},cancellable=immediateScheduler.scheduleRecursive(state,scheduleMethod);return new BinaryDisposable(subscription,cancellable)},OnErrorResumeNextObservable}(ObservableBase),OnErrorResumeNextObserver=function(__super__){function OnErrorResumeNextObserver(state,recurse){this._state=state,this._recurse=recurse,__super__.call(this)}return inherits(OnErrorResumeNextObserver,__super__),OnErrorResumeNextObserver.prototype.next=function(x){this._state.o.onNext(x)},OnErrorResumeNextObserver.prototype.error=function(){this._recurse(this._state)},OnErrorResumeNextObserver.prototype.completed=function(){this._recurse(this._state)},OnErrorResumeNextObserver}(AbstractObserver),onErrorResumeNext=Observable.onErrorResumeNext=function(){var sources=[];if(Array.isArray(arguments[0]))sources=arguments[0];else{var len=arguments.length;sources=new Array(len);for(var i=0;i<len;i++)sources[i]=arguments[i]}return new OnErrorResumeNextObservable(sources)},SkipUntilObservable=function(__super__){function SkipUntilObservable(source,other){this._s=source,this._o=isPromise(other)?observableFromPromise(other):other,this._open=!1,__super__.call(this)}return inherits(SkipUntilObservable,__super__),SkipUntilObservable.prototype.subscribeCore=function(o){var leftSubscription=new SingleAssignmentDisposable;leftSubscription.setDisposable(this._s.subscribe(new SkipUntilSourceObserver(o,this))),isPromise(this._o)&&(this._o=observableFromPromise(this._o));var rightSubscription=new SingleAssignmentDisposable;return rightSubscription.setDisposable(this._o.subscribe(new SkipUntilOtherObserver(o,this,rightSubscription))),new BinaryDisposable(leftSubscription,rightSubscription)},SkipUntilObservable}(ObservableBase),SkipUntilSourceObserver=function(__super__){function SkipUntilSourceObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilSourceObserver,__super__),SkipUntilSourceObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilSourceObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilSourceObserver.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},SkipUntilSourceObserver}(AbstractObserver),SkipUntilOtherObserver=function(__super__){function SkipUntilOtherObserver(o,p,r){this._o=o,this._p=p,this._r=r,__super__.call(this)}return inherits(SkipUntilOtherObserver,__super__),SkipUntilOtherObserver.prototype.next=function(){this._p._open=!0,this._r.dispose()},SkipUntilOtherObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilOtherObserver.prototype.onCompleted=function(){this._r.dispose()},SkipUntilOtherObserver}(AbstractObserver);observableProto.skipUntil=function(other){return new SkipUntilObservable(this,other)};var SwitchObservable=function(__super__){function SwitchObservable(source){this.source=source,__super__.call(this)}function SwitchObserver(o,inner){this.o=o,this.inner=inner,this.stopped=!1,this.latest=0,this.hasLatest=!1,AbstractObserver.call(this)}function InnerObserver(parent,id){this.parent=parent,this.id=id,AbstractObserver.call(this)}return inherits(SwitchObservable,__super__),SwitchObservable.prototype.subscribeCore=function(o){var inner=new SerialDisposable,s=this.source.subscribe(new SwitchObserver(o,inner));return new BinaryDisposable(s,inner)},inherits(SwitchObserver,AbstractObserver),SwitchObserver.prototype.next=function(innerSource){var d=new SingleAssignmentDisposable,id=++this.latest;this.hasLatest=!0,this.inner.setDisposable(d),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),d.setDisposable(innerSource.subscribe(new InnerObserver(this,id)))},SwitchObserver.prototype.error=function(e){this.o.onError(e)},SwitchObserver.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.parent.latest===this.id&&this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.latest===this.id&&this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},SwitchObservable}(ObservableBase);observableProto["switch"]=observableProto.switchLatest=function(){return new SwitchObservable(this)};var TakeUntilObservable=function(__super__){function TakeUntilObservable(source,other){this.source=source,this.other=isPromise(other)?observableFromPromise(other):other,__super__.call(this)}return inherits(TakeUntilObservable,__super__),TakeUntilObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this.source.subscribe(o),this.other.subscribe(new TakeUntilObserver(o)))},TakeUntilObservable}(ObservableBase),TakeUntilObserver=function(__super__){function TakeUntilObserver(o){this._o=o,__super__.call(this)}return inherits(TakeUntilObserver,__super__),TakeUntilObserver.prototype.next=function(){this._o.onCompleted()},TakeUntilObserver.prototype.error=function(err){this._o.onError(err)},TakeUntilObserver.prototype.onCompleted=noop,TakeUntilObserver}(AbstractObserver);observableProto.takeUntil=function(other){return new TakeUntilObservable(this,other)};var WithLatestFromObservable=function(__super__){function WithLatestFromObservable(source,sources,resultSelector){this._s=source,this._ss=sources,this._cb=resultSelector,__super__.call(this)}return inherits(WithLatestFromObservable,__super__),WithLatestFromObservable.prototype.subscribeCore=function(o){for(var len=this._ss.length,state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,values:new Array(len)},n=this._ss.length,subscriptions=new Array(n+1),i=0;i<n;i++){var other=this._ss[i],sad=new SingleAssignmentDisposable;isPromise(other)&&(other=observableFromPromise(other)),sad.setDisposable(other.subscribe(new WithLatestFromOtherObserver(o,i,state))),subscriptions[i]=sad}var outerSad=new SingleAssignmentDisposable;return outerSad.setDisposable(this._s.subscribe(new WithLatestFromSourceObserver(o,this._cb,state))),subscriptions[n]=outerSad,new NAryDisposable(subscriptions)},WithLatestFromObservable}(ObservableBase),WithLatestFromOtherObserver=function(__super__){function WithLatestFromOtherObserver(o,i,state){this._o=o,this._i=i,this._state=state,__super__.call(this)}return inherits(WithLatestFromOtherObserver,__super__),WithLatestFromOtherObserver.prototype.next=function(x){this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(identity)},WithLatestFromOtherObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromOtherObserver.prototype.completed=noop,WithLatestFromOtherObserver}(AbstractObserver),WithLatestFromSourceObserver=function(__super__){function WithLatestFromSourceObserver(o,cb,state){this._o=o,this._cb=cb,this._state=state,__super__.call(this)}return inherits(WithLatestFromSourceObserver,__super__),WithLatestFromSourceObserver.prototype.next=function(x){var allValues=[x].concat(this._state.values);if(this._state.hasValueAll){var res=tryCatch(this._cb).apply(null,allValues);return res===errorObj?this._o.onError(res.e):void this._o.onNext(res)}},WithLatestFromSourceObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromSourceObserver.prototype.completed=function(){this._o.onCompleted()},WithLatestFromSourceObserver}(AbstractObserver);observableProto.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new WithLatestFromObservable(this,args,resultSelector)};var ZipObservable=function(__super__){function ZipObservable(sources,resultSelector){this._s=sources,this._cb=resultSelector,__super__.call(this)}return inherits(ZipObservable,__super__),ZipObservable.prototype.subscribeCore=function(observer){for(var n=this._s.length,subscriptions=new Array(n),done=arrayInitialize(n,falseFactory),q=arrayInitialize(n,emptyArrayFactory),i=0;i<n;i++){var source=this._s[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new ZipObserver(observer,i,this,q,done)))}return new NAryDisposable(subscriptions)},ZipObservable}(ObservableBase),ZipObserver=function(__super__){function ZipObserver(o,i,p,q,d){this._o=o,this._i=i,this._p=p,this._q=q,this._d=d,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipObserver,__super__),ZipObserver.prototype.next=function(x){if(this._q[this._i].push(x),this._q.every(notEmpty)){var queuedValues=this._q.map(shiftEach),res=tryCatch(this._p._cb).apply(null,queuedValues);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._d.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},ZipObserver.prototype.error=function(e){this._o.onError(e)},ZipObserver.prototype.completed=function(){this._d[this._i]=!0,this._d.every(identity)&&this._o.onCompleted()},ZipObserver}(AbstractObserver);observableProto.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;Array.isArray(args[0])&&(args=args[0]);var parent=this;return args.unshift(parent),new ZipObservable(args,resultSelector)},Observable.zip=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];Array.isArray(args[0])&&(args=isFunction(args[1])?args[0].concat(args[1]):args[0]);var first=args.shift();return first.zip.apply(first,args)};var ZipIterableObservable=function(__super__){function ZipIterableObservable(sources,cb){this.sources=sources,this._cb=cb,__super__.call(this)}return inherits(ZipIterableObservable,__super__),ZipIterableObservable.prototype.subscribeCore=function(o){for(var sources=this.sources,len=sources.length,subscriptions=new Array(len),state={q:arrayInitialize(len,emptyArrayFactory),done:arrayInitialize(len,falseFactory),cb:this._cb,o:o},i=0;i<len;i++)!function(i){var source=sources[i],sad=new SingleAssignmentDisposable;(isArrayLike(source)||isIterable(source))&&(source=observableFrom(source)),subscriptions[i]=sad,sad.setDisposable(source.subscribe(new ZipIterableObserver(state,i)))}(i);return new NAryDisposable(subscriptions)},ZipIterableObservable}(ObservableBase),ZipIterableObserver=function(__super__){function ZipIterableObserver(s,i){this._s=s,this._i=i,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipIterableObserver,__super__),ZipIterableObserver.prototype.next=function(x){if(this._s.q[this._i].push(x),this._s.q.every(notEmpty)){var queuedValues=this._s.q.map(shiftEach),res=tryCatch(this._s.cb).apply(null,queuedValues);if(res===errorObj)return this._s.o.onError(res.e);this._s.o.onNext(res)}else this._s.done.filter(notTheSame(this._i)).every(identity)&&this._s.o.onCompleted()},ZipIterableObserver.prototype.error=function(e){this._s.o.onError(e)},ZipIterableObserver.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(identity)&&this._s.o.onCompleted()},ZipIterableObserver}(AbstractObserver);observableProto.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray,parent=this;return args.unshift(parent),new ZipIterableObservable(args,resultSelector)},observableProto.asObservable=function(){return new AnonymousObservable(asObservable(this),this)},observableProto.bufferWithCount=observableProto.bufferCount=function(count,skip){return"number"!=typeof skip&&(skip=count),this.windowWithCount(count,skip).flatMap(toArray).filter(notEmpty)};var DematerializeObservable=function(__super__){function DematerializeObservable(source){this.source=source,__super__.call(this)}return inherits(DematerializeObservable,__super__),DematerializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DematerializeObserver(o))},DematerializeObservable}(ObservableBase),DematerializeObserver=function(__super__){function DematerializeObserver(o){this._o=o,__super__.call(this)}return inherits(DematerializeObserver,__super__),DematerializeObserver.prototype.next=function(x){x.accept(this._o)},DematerializeObserver.prototype.error=function(e){this._o.onError(e)},DematerializeObserver.prototype.completed=function(){this._o.onCompleted()},DematerializeObserver}(AbstractObserver);observableProto.dematerialize=function(){return new DematerializeObservable(this)};var DistinctUntilChangedObservable=function(__super__){function DistinctUntilChangedObservable(source,keyFn,comparer){this.source=source,this.keyFn=keyFn,this.comparer=comparer,__super__.call(this)}return inherits(DistinctUntilChangedObservable,__super__),DistinctUntilChangedObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctUntilChangedObserver(o,this.keyFn,this.comparer))},DistinctUntilChangedObservable}(ObservableBase),DistinctUntilChangedObserver=function(__super__){function DistinctUntilChangedObserver(o,keyFn,comparer){this.o=o,this.keyFn=keyFn,this.comparer=comparer,this.hasCurrentKey=!1,this.currentKey=null,__super__.call(this)}return inherits(DistinctUntilChangedObserver,__super__),DistinctUntilChangedObserver.prototype.next=function(x){var comparerEquals,key=x;return isFunction(this.keyFn)&&(key=tryCatch(this.keyFn)(x),key===errorObj)?this.o.onError(key.e):this.hasCurrentKey&&(comparerEquals=tryCatch(this.comparer)(this.currentKey,key),comparerEquals===errorObj)?this.o.onError(comparerEquals.e):void(this.hasCurrentKey&&comparerEquals||(this.hasCurrentKey=!0,this.currentKey=key,this.o.onNext(x)))},DistinctUntilChangedObserver.prototype.error=function(e){this.o.onError(e)},DistinctUntilChangedObserver.prototype.completed=function(){this.o.onCompleted()},DistinctUntilChangedObserver}(AbstractObserver);observableProto.distinctUntilChanged=function(keyFn,comparer){return comparer||(comparer=defaultComparer),new DistinctUntilChangedObservable(this,keyFn,comparer)};var TapObservable=function(__super__){function TapObservable(source,observerOrOnNext,onError,onCompleted){this.source=source,this._oN=observerOrOnNext,this._oE=onError,this._oC=onCompleted,__super__.call(this)}function InnerObserver(o,p){this.o=o,this.t=!p._oN||isFunction(p._oN)?observerCreate(p._oN||noop,p._oE||noop,p._oC||noop):p._oN,this.isStopped=!1,AbstractObserver.call(this)}return inherits(TapObservable,__super__),TapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var res=tryCatch(this.t.onNext).call(this.t,x);res===errorObj&&this.o.onError(res.e),this.o.onNext(x)},InnerObserver.prototype.error=function(err){var res=tryCatch(this.t.onError).call(this.t,err);return res===errorObj?this.o.onError(res.e):void this.o.onError(err)},InnerObserver.prototype.completed=function(){var res=tryCatch(this.t.onCompleted).call(this.t);return res===errorObj?this.o.onError(res.e):void this.o.onCompleted()},TapObservable}(ObservableBase);observableProto["do"]=observableProto.tap=observableProto.doAction=function(observerOrOnNext,onError,onCompleted){return new TapObservable(this,observerOrOnNext,onError,onCompleted)},observableProto.doOnNext=observableProto.tapOnNext=function(onNext,thisArg){return this.tap("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext)},observableProto.doOnError=observableProto.tapOnError=function(onError,thisArg){return this.tap(noop,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError)},observableProto.doOnCompleted=observableProto.tapOnCompleted=function(onCompleted,thisArg){return this.tap(noop,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted)};var FinallyObservable=function(__super__){function FinallyObservable(source,fn,thisArg){this.source=source,this._fn=bindCallback(fn,thisArg,0),__super__.call(this)}function FinallyDisposable(s,fn){this.isDisposed=!1,this._s=s,this._fn=fn}return inherits(FinallyObservable,__super__),FinallyObservable.prototype.subscribeCore=function(o){var d=tryCatch(this.source.subscribe).call(this.source,o);return d===errorObj&&(this._fn(),thrower(d.e)),new FinallyDisposable(d,this._fn)},FinallyDisposable.prototype.dispose=function(){if(!this.isDisposed){var res=tryCatch(this._s.dispose).call(this._s);this._fn(),res===errorObj&&thrower(res.e)}},FinallyObservable}(ObservableBase);observableProto["finally"]=function(action,thisArg){return new FinallyObservable(this,action,thisArg)};var IgnoreElementsObservable=function(__super__){function IgnoreElementsObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.isStopped=!1}return inherits(IgnoreElementsObservable,__super__),IgnoreElementsObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},InnerObserver.prototype.onNext=noop,InnerObserver.prototype.onError=function(err){this.isStopped||(this.isStopped=!0,this.o.onError(err))},InnerObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},InnerObserver.prototype.dispose=function(){this.isStopped=!0},InnerObserver.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(e),!0)},IgnoreElementsObservable}(ObservableBase);observableProto.ignoreElements=function(){return new IgnoreElementsObservable(this)};var MaterializeObservable=function(__super__){function MaterializeObservable(source,fn){this.source=source,__super__.call(this)}return inherits(MaterializeObservable,__super__),MaterializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new MaterializeObserver(o))},MaterializeObservable}(ObservableBase),MaterializeObserver=function(__super__){function MaterializeObserver(o){this._o=o,__super__.call(this)}return inherits(MaterializeObserver,__super__),MaterializeObserver.prototype.next=function(x){this._o.onNext(notificationCreateOnNext(x))},MaterializeObserver.prototype.error=function(e){this._o.onNext(notificationCreateOnError(e)),this._o.onCompleted()},MaterializeObserver.prototype.completed=function(){this._o.onNext(notificationCreateOnCompleted()),this._o.onCompleted()},MaterializeObserver}(AbstractObserver);observableProto.materialize=function(){return new MaterializeObservable(this)},observableProto.repeat=function(repeatCount){return enumerableRepeat(this,repeatCount).concat()},observableProto.retry=function(retryCount){return enumerableRepeat(this,retryCount).catchError()};var RetryWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RetryWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RetryWhenObservable,__super__),RetryWhenObservable.prototype.subscribeCore=function(o){var lastError,exceptions=new Subject,notifier=new Subject,handled=this._notifier(exceptions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),exceptions.onNext(exn),outer.dispose()},function(){o.onCompleted()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RetryWhenObservable}(ObservableBase);observableProto.retryWhen=function(notifier){return new RetryWhenObservable(repeat(this),notifier)};var RepeatWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RepeatWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RepeatWhenObservable,__super__),RepeatWhenObservable.prototype.subscribeCore=function(o){var lastError,completions=new Subject,notifier=new Subject,handled=this._notifier(completions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));
var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){o.onError(exn)},function(){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),completions.onNext(null),outer.dispose()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RepeatWhenObservable}(ObservableBase);observableProto.repeatWhen=function(notifier){return new RepeatWhenObservable(repeat(this),notifier)};var ScanObservable=function(__super__){function ScanObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ScanObservable,__super__),ScanObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ScanObserver(o,this))},ScanObservable}(ObservableBase),ScanObserver=function(__super__){function ScanObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ScanObserver,__super__),ScanObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},ScanObserver.prototype.error=function(e){this._o.onError(e)},ScanObserver.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},ScanObserver}(AbstractObserver);observableProto.scan=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ScanObservable(this,accumulator,hasSeed,seed)};var SkipLastObservable=function(__super__){function SkipLastObservable(source,c){this.source=source,this._c=c,__super__.call(this)}return inherits(SkipLastObservable,__super__),SkipLastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastObserver(o,this._c))},SkipLastObservable}(ObservableBase),SkipLastObserver=function(__super__){function SkipLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(SkipLastObserver,__super__),SkipLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._o.onNext(this._q.shift())},SkipLastObserver.prototype.error=function(e){this._o.onError(e)},SkipLastObserver.prototype.completed=function(){this._o.onCompleted()},SkipLastObserver}(AbstractObserver);observableProto.skipLast=function(count){if(count<0)throw new ArgumentOutOfRangeError;return new SkipLastObservable(this,count)},observableProto.startWith=function(){var scheduler,start=0;arguments.length&&isScheduler(arguments[0])?(scheduler=arguments[0],start=1):scheduler=immediateScheduler;for(var args=[],i=start,len=arguments.length;i<len;i++)args.push(arguments[i]);return observableConcat.apply(null,[observableFromArray(args,scheduler),this])};var TakeLastObserver=function(__super__){function TakeLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastObserver,__super__),TakeLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastObserver.prototype.error=function(e){this._o.onError(e)},TakeLastObserver.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},TakeLastObserver}(AbstractObserver);observableProto.takeLast=function(count){if(count<0)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastObserver(o,count))},source)};var TakeLastBufferObserver=function(__super__){function TakeLastBufferObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastBufferObserver,__super__),TakeLastBufferObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastBufferObserver.prototype.error=function(e){this._o.onError(e)},TakeLastBufferObserver.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},TakeLastBufferObserver}(AbstractObserver);observableProto.takeLastBuffer=function(count){if(count<0)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastBufferObserver(o,count))},source)},observableProto.windowWithCount=observableProto.windowCount=function(count,skip){var source=this;if(+count||(count=0),Math.abs(count)===1/0&&(count=0),count<=0)throw new ArgumentOutOfRangeError;if(null==skip&&(skip=count),+skip||(skip=0),Math.abs(skip)===1/0&&(skip=0),skip<=0)throw new ArgumentOutOfRangeError;return new AnonymousObservable(function(observer){function createWindow(){var s=new Subject;q.push(s),observer.onNext(addRef(s,refCountDisposable))}var m=new SingleAssignmentDisposable,refCountDisposable=new RefCountDisposable(m),n=0,q=[];return createWindow(),m.setDisposable(source.subscribe(function(x){for(var i=0,len=q.length;i<len;i++)q[i].onNext(x);var c=n-count+1;c>=0&&c%skip===0&&q.shift().onCompleted(),++n%skip===0&&createWindow()},function(e){for(;q.length>0;)q.shift().onError(e);observer.onError(e)},function(){for(;q.length>0;)q.shift().onCompleted();observer.onCompleted()})),refCountDisposable},source)},observableProto.selectConcat=observableProto.concatMap=function(selector,resultSelector,thisArg){return isFunction(selector)&&isFunction(resultSelector)?this.concatMap(function(x,i){var selectorResult=selector(x,i);return isPromise(selectorResult)&&(selectorResult=observableFromPromise(selectorResult)),(isArrayLike(selectorResult)||isIterable(selectorResult))&&(selectorResult=observableFrom(selectorResult)),selectorResult.map(function(y,i2){return resultSelector(x,y,i,i2)})}):isFunction(selector)?concatMap(this,selector,thisArg):concatMap(this,function(){return selector})},observableProto.concatMapObserver=observableProto.selectConcatObserver=function(onNext,onError,onCompleted,thisArg){var source=this,onNextFunc=bindCallback(onNext,thisArg,2),onErrorFunc=bindCallback(onError,thisArg,1),onCompletedFunc=bindCallback(onCompleted,thisArg,0);return new AnonymousObservable(function(observer){var index=0;return source.subscribe(function(x){var result;try{result=onNextFunc(x,index++)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result)},function(err){var result;try{result=onErrorFunc(err)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()},function(){var result;try{result=onCompletedFunc()}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()})},this).concatAll()};var DefaultIfEmptyObserver=function(__super__){function DefaultIfEmptyObserver(o,d){this._o=o,this._d=d,this._f=!1,__super__.call(this)}return inherits(DefaultIfEmptyObserver,__super__),DefaultIfEmptyObserver.prototype.next=function(x){this._f=!0,this._o.onNext(x)},DefaultIfEmptyObserver.prototype.error=function(e){this._o.onError(e)},DefaultIfEmptyObserver.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},DefaultIfEmptyObserver}(AbstractObserver);observableProto.defaultIfEmpty=function(defaultValue){var source=this;return defaultValue===undefined&&(defaultValue=null),new AnonymousObservable(function(o){return source.subscribe(new DefaultIfEmptyObserver(o,defaultValue))},source)},HashSet.prototype.push=function(value){var retValue=arrayIndexOfComparer(this.set,value,this.comparer)===-1;return retValue&&this.set.push(value),retValue};var DistinctObservable=function(__super__){function DistinctObservable(source,keyFn,cmpFn){this.source=source,this._keyFn=keyFn,this._cmpFn=cmpFn,__super__.call(this)}return inherits(DistinctObservable,__super__),DistinctObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctObserver(o,this._keyFn,this._cmpFn))},DistinctObservable}(ObservableBase),DistinctObserver=function(__super__){function DistinctObserver(o,keyFn,cmpFn){this._o=o,this._keyFn=keyFn,this._h=new HashSet(cmpFn),__super__.call(this)}return inherits(DistinctObserver,__super__),DistinctObserver.prototype.next=function(x){var key=x;return isFunction(this._keyFn)&&(key=tryCatch(this._keyFn)(x),key===errorObj)?this._o.onError(key.e):void(this._h.push(key)&&this._o.onNext(x))},DistinctObserver.prototype.error=function(e){this._o.onError(e)},DistinctObserver.prototype.completed=function(){this._o.onCompleted()},DistinctObserver}(AbstractObserver);observableProto.distinct=function(keySelector,comparer){return comparer||(comparer=defaultComparer),new DistinctObservable(this,keySelector,comparer)},observableProto.groupBy=function(keySelector,elementSelector){return this.groupByUntil(keySelector,elementSelector,observableNever)},observableProto.groupByUntil=function(keySelector,elementSelector,durationSelector){var source=this;return new AnonymousObservable(function(o){var map=new Map,groupDisposable=new CompositeDisposable,refCountDisposable=new RefCountDisposable(groupDisposable),handleError=function(e){return function(item){item.onError(e)}};return groupDisposable.add(source.subscribe(function(x){var key=tryCatch(keySelector)(x);if(key===errorObj)return map.forEach(handleError(key.e)),o.onError(key.e);var fireNewMapEntry=!1,writer=map.get(key);if(writer===undefined&&(writer=new Subject,map.set(key,writer),fireNewMapEntry=!0),fireNewMapEntry){var group=new GroupedObservable(key,writer,refCountDisposable),durationGroup=new GroupedObservable(key,writer),duration=tryCatch(durationSelector)(durationGroup);if(duration===errorObj)return map.forEach(handleError(duration.e)),o.onError(duration.e);o.onNext(group);var md=new SingleAssignmentDisposable;groupDisposable.add(md),md.setDisposable(duration.take(1).subscribe(noop,function(e){map.forEach(handleError(e)),o.onError(e)},function(){map["delete"](key)&&writer.onCompleted(),groupDisposable.remove(md)}))}var element=x;return isFunction(elementSelector)&&(element=tryCatch(elementSelector)(x),element===errorObj)?(map.forEach(handleError(element.e)),o.onError(element.e)):void writer.onNext(element)},function(e){map.forEach(handleError(e)),o.onError(e)},function(){map.forEach(function(item){item.onCompleted()}),o.onCompleted()})),refCountDisposable},source)};var MapObservable=function(__super__){function MapObservable(source,selector,thisArg){this.source=source,this.selector=bindCallback(selector,thisArg,3),__super__.call(this)}function innerMap(selector,self){return function(x,i,o){return selector.call(this,self.selector(x,i,o),i,o)}}function InnerObserver(o,selector,source){this.o=o,this.selector=selector,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(MapObservable,__super__),MapObservable.prototype.internalMap=function(selector,thisArg){return new MapObservable(this.source,innerMap(selector,this),thisArg)},MapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var result=tryCatch(this.selector)(x,this.i++,this.source);return result===errorObj?this.o.onError(result.e):void this.o.onNext(result)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},MapObservable}(ObservableBase);observableProto.map=observableProto.select=function(selector,thisArg){var selectorFn="function"==typeof selector?selector:function(){return selector};return this instanceof MapObservable?this.internalMap(selectorFn,thisArg):new MapObservable(this,selectorFn,thisArg)},observableProto.pluck=function(){var len=arguments.length,args=new Array(len);if(0===len)throw new Error("List of properties cannot be empty.");for(var i=0;i<len;i++)args[i]=arguments[i];return this.map(plucker(args,len))},observableProto.flatMap=observableProto.selectMany=observableProto.mergeMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).mergeAll()},observableProto.flatMapObserver=observableProto.selectManyObserver=function(onNext,onError,onCompleted,thisArg){var source=this;return new AnonymousObservable(function(observer){var index=0;return source.subscribe(function(x){var result;try{result=onNext.call(thisArg,x,index++)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result)},function(err){var result;try{result=onError.call(thisArg,err)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()},function(){var result;try{result=onCompleted.call(thisArg)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()})},source).mergeAll()},observableProto.flatMapLatest=observableProto.switchMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchLatest()};var SkipObservable=function(__super__){function SkipObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function SkipObserver(o,c){this._o=o,this._r=c,AbstractObserver.call(this)}return inherits(SkipObservable,__super__),SkipObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipObserver(o,this._count))},inherits(SkipObserver,AbstractObserver),SkipObserver.prototype.next=function(x){this._r<=0?this._o.onNext(x):this._r--},SkipObserver.prototype.error=function(e){this._o.onError(e)},SkipObserver.prototype.completed=function(){this._o.onCompleted()},SkipObservable}(ObservableBase);observableProto.skip=function(count){if(count<0)throw new ArgumentOutOfRangeError;return new SkipObservable(this,count)};var SkipWhileObservable=function(__super__){function SkipWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SkipWhileObservable,__super__),SkipWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipWhileObserver(o,this))},SkipWhileObservable}(ObservableBase),SkipWhileObserver=function(__super__){function SkipWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!1,__super__.call(this)}return inherits(SkipWhileObserver,__super__),SkipWhileObserver.prototype.next=function(x){if(!this._r){var res=tryCatch(this._p._fn)(x,this._i++,this._p);if(res===errorObj)return this._o.onError(res.e);this._r=!res}this._r&&this._o.onNext(x)},SkipWhileObserver.prototype.error=function(e){this._o.onError(e)},SkipWhileObserver.prototype.completed=function(){this._o.onCompleted()},SkipWhileObserver}(AbstractObserver);observableProto.skipWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SkipWhileObservable(this,fn)};var TakeObservable=function(__super__){function TakeObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function TakeObserver(o,c){this._o=o,this._c=c,this._r=c,AbstractObserver.call(this)}return inherits(TakeObservable,__super__),TakeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeObserver(o,this._count))},inherits(TakeObserver,AbstractObserver),TakeObserver.prototype.next=function(x){this._r-- >0&&(this._o.onNext(x),this._r<=0&&this._o.onCompleted())},TakeObserver.prototype.error=function(e){this._o.onError(e)},TakeObserver.prototype.completed=function(){this._o.onCompleted()},TakeObservable}(ObservableBase);observableProto.take=function(count,scheduler){if(count<0)throw new ArgumentOutOfRangeError;return 0===count?observableEmpty(scheduler):new TakeObservable(this,count)};var TakeWhileObservable=function(__super__){function TakeWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(TakeWhileObservable,__super__),TakeWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeWhileObserver(o,this))},TakeWhileObservable}(ObservableBase),TakeWhileObserver=function(__super__){function TakeWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!0,__super__.call(this)}return inherits(TakeWhileObserver,__super__),TakeWhileObserver.prototype.next=function(x){return this._r&&(this._r=tryCatch(this._p._fn)(x,this._i++,this._p),this._r===errorObj)?this._o.onError(this._r.e):void(this._r?this._o.onNext(x):this._o.onCompleted())},TakeWhileObserver.prototype.error=function(e){this._o.onError(e)},TakeWhileObserver.prototype.completed=function(){this._o.onCompleted()},TakeWhileObserver}(AbstractObserver);observableProto.takeWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new TakeWhileObservable(this,fn)};var FilterObservable=function(__super__){function FilterObservable(source,predicate,thisArg){this.source=source,this.predicate=bindCallback(predicate,thisArg,3),__super__.call(this)}function innerPredicate(predicate,self){return function(x,i,o){return self.predicate(x,i,o)&&predicate.call(this,x,i,o)}}function InnerObserver(o,predicate,source){this.o=o,this.predicate=predicate,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(FilterObservable,__super__),FilterObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.predicate,this))},FilterObservable.prototype.internalFilter=function(predicate,thisArg){return new FilterObservable(this.source,innerPredicate(predicate,this),thisArg)},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var shouldYield=tryCatch(this.predicate)(x,this.i++,this.source);return shouldYield===errorObj?this.o.onError(shouldYield.e):void(shouldYield&&this.o.onNext(x))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FilterObservable}(ObservableBase);observableProto.filter=observableProto.where=function(predicate,thisArg){return this instanceof FilterObservable?this.internalFilter(predicate,thisArg):new FilterObservable(this,predicate,thisArg)};var ExtremaByObservable=function(__super__){function ExtremaByObservable(source,k,c){this.source=source,this._k=k,this._c=c,__super__.call(this)}return inherits(ExtremaByObservable,__super__),ExtremaByObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ExtremaByObserver(o,this._k,this._c))},ExtremaByObservable}(ObservableBase),ExtremaByObserver=function(__super__){function ExtremaByObserver(o,k,c){this._o=o,this._k=k,this._c=c,this._v=null,this._hv=!1,this._l=[],__super__.call(this)}return inherits(ExtremaByObserver,__super__),ExtremaByObserver.prototype.next=function(x){var key=tryCatch(this._k)(x);if(key===errorObj)return this._o.onError(key.e);var comparison=0;if(this._hv){if(comparison=tryCatch(this._c)(key,this._v),comparison===errorObj)return this._o.onError(comparison.e)}else this._hv=!0,this._v=key;comparison>0&&(this._v=key,this._l=[]),comparison>=0&&this._l.push(x)},ExtremaByObserver.prototype.error=function(e){this._o.onError(e)},ExtremaByObserver.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},ExtremaByObserver}(AbstractObserver),ReduceObservable=function(__super__){function ReduceObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ReduceObservable,__super__),ReduceObservable.prototype.subscribeCore=function(observer){return this.source.subscribe(new ReduceObserver(observer,this))},ReduceObservable}(ObservableBase),ReduceObserver=function(__super__){function ReduceObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ReduceObserver,__super__),ReduceObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):void this._i++},ReduceObserver.prototype.error=function(e){this._o.onError(e)},ReduceObserver.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new EmptyError),this._o.onCompleted()},ReduceObserver}(AbstractObserver);observableProto.reduce=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ReduceObservable(this,accumulator,hasSeed,seed)};var SomeObservable=function(__super__){function SomeObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SomeObservable,__super__),SomeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SomeObserver(o,this._fn,this.source))},SomeObservable}(ObservableBase),SomeObserver=function(__super__){function SomeObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,__super__.call(this)}return inherits(SomeObserver,__super__),SomeObserver.prototype.next=function(x){var result=tryCatch(this._fn)(x,this._i++,this._s);return result===errorObj?this._o.onError(result.e):void(Boolean(result)&&(this._o.onNext(!0),this._o.onCompleted()))},SomeObserver.prototype.error=function(e){this._o.onError(e)},SomeObserver.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},SomeObserver}(AbstractObserver);observableProto.some=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SomeObservable(this,fn)};var IsEmptyObservable=function(__super__){function IsEmptyObservable(source){this.source=source,__super__.call(this)}return inherits(IsEmptyObservable,__super__),IsEmptyObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new IsEmptyObserver(o))},IsEmptyObservable}(ObservableBase),IsEmptyObserver=function(__super__){function IsEmptyObserver(o){this._o=o,__super__.call(this)}return inherits(IsEmptyObserver,__super__),IsEmptyObserver.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},IsEmptyObserver.prototype.error=function(e){this._o.onError(e)},IsEmptyObserver.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},IsEmptyObserver}(AbstractObserver);observableProto.isEmpty=function(){return new IsEmptyObservable(this)};var EveryObservable=function(__super__){function EveryObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(EveryObservable,__super__),EveryObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new EveryObserver(o,this._fn,this.source))},EveryObservable}(ObservableBase),EveryObserver=function(__super__){function EveryObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,__super__.call(this)}return inherits(EveryObserver,__super__),EveryObserver.prototype.next=function(x){var result=tryCatch(this._fn)(x,this._i++,this._s);return result===errorObj?this._o.onError(result.e):void(Boolean(result)||(this._o.onNext(!1),this._o.onCompleted()))},EveryObserver.prototype.error=function(e){this._o.onError(e)},EveryObserver.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},EveryObserver}(AbstractObserver);observableProto.every=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new EveryObservable(this,fn)};var IncludesObservable=function(__super__){function IncludesObservable(source,elem,idx){var n=+idx||0;Math.abs(n)===1/0&&(n=0),this.source=source,this._elem=elem,this._n=n,__super__.call(this)}return inherits(IncludesObservable,__super__),IncludesObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(!1),o.onCompleted(),disposableEmpty):this.source.subscribe(new IncludesObserver(o,this._elem,this._n))},IncludesObservable}(ObservableBase),IncludesObserver=function(__super__){function IncludesObserver(o,elem,n){this._o=o,this._elem=elem,this._n=n,this._i=0,__super__.call(this)}function comparer(a,b){return 0===a&&0===b||a===b||isNaN(a)&&isNaN(b)}return inherits(IncludesObserver,__super__),IncludesObserver.prototype.next=function(x){this._i++>=this._n&&comparer(x,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},IncludesObserver.prototype.error=function(e){this._o.onError(e)},IncludesObserver.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},IncludesObserver}(AbstractObserver);observableProto.includes=function(searchElement,fromIndex){return new IncludesObservable(this,searchElement,fromIndex)};var CountObservable=function(__super__){function CountObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CountObservable,__super__),CountObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new CountObserver(o,this._fn,this.source))},CountObservable}(ObservableBase),CountObserver=function(__super__){function CountObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,this._c=0,__super__.call(this)}return inherits(CountObserver,__super__),CountObserver.prototype.next=function(x){if(this._fn){var result=tryCatch(this._fn)(x,this._i++,this._s);if(result===errorObj)return this._o.onError(result.e);Boolean(result)&&this._c++}else this._c++},CountObserver.prototype.error=function(e){this._o.onError(e)},CountObserver.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},CountObserver}(AbstractObserver);observableProto.count=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new CountObservable(this,fn)};var IndexOfObservable=function(__super__){function IndexOfObservable(source,e,n){this.source=source,this._e=e,this._n=n,__super__.call(this)}return inherits(IndexOfObservable,__super__),IndexOfObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(-1),o.onCompleted(),disposableEmpty):this.source.subscribe(new IndexOfObserver(o,this._e,this._n))},IndexOfObservable}(ObservableBase),IndexOfObserver=function(__super__){function IndexOfObserver(o,e,n){this._o=o,this._e=e,this._n=n,this._i=0,__super__.call(this)}return inherits(IndexOfObserver,__super__),IndexOfObserver.prototype.next=function(x){this._i>=this._n&&x===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},IndexOfObserver.prototype.error=function(e){this._o.onError(e)},IndexOfObserver.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},IndexOfObserver}(AbstractObserver);observableProto.indexOf=function(searchElement,fromIndex){var n=+fromIndex||0;return Math.abs(n)===1/0&&(n=0),new IndexOfObservable(this,searchElement,n)};var SumObservable=function(__super__){function SumObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SumObservable,__super__),SumObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SumObserver(o,this._fn,this.source))},SumObservable}(ObservableBase),SumObserver=function(__super__){function SumObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,this._c=0,__super__.call(this)}return inherits(SumObserver,__super__),SumObserver.prototype.next=function(x){if(this._fn){var result=tryCatch(this._fn)(x,this._i++,this._s);if(result===errorObj)return this._o.onError(result.e);this._c+=result}else this._c+=x},SumObserver.prototype.error=function(e){this._o.onError(e)},SumObserver.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},SumObserver}(AbstractObserver);observableProto.sum=function(keySelector,thisArg){var fn=bindCallback(keySelector,thisArg,3);return new SumObservable(this,fn)},observableProto.minBy=function(keySelector,comparer){return comparer||(comparer=defaultSubComparer),new ExtremaByObservable(this,keySelector,function(x,y){return comparer(x,y)*-1})},observableProto.min=function(comparer){return this.minBy(identity,comparer).map(firstOnly)},observableProto.maxBy=function(keySelector,comparer){return comparer||(comparer=defaultSubComparer),new ExtremaByObservable(this,keySelector,comparer)},observableProto.max=function(comparer){return this.maxBy(identity,comparer).map(firstOnly)};var AverageObservable=function(__super__){function AverageObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(AverageObservable,__super__),AverageObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new AverageObserver(o,this._fn,this.source))},AverageObservable}(ObservableBase),AverageObserver=function(__super__){function AverageObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._c=0,this._t=0,__super__.call(this)}return inherits(AverageObserver,__super__),AverageObserver.prototype.next=function(x){if(this._fn){var r=tryCatch(this._fn)(x,this._c++,this._s);if(r===errorObj)return this._o.onError(r.e);this._t+=r}else this._c++,this._t+=x},AverageObserver.prototype.error=function(e){this._o.onError(e)},AverageObserver.prototype.completed=function(){return 0===this._c?this._o.onError(new EmptyError):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},AverageObserver}(AbstractObserver);observableProto.average=function(keySelector,thisArg){var fn,source=this;return isFunction(keySelector)&&(fn=bindCallback(keySelector,thisArg,3)),new AverageObservable(source,fn)},observableProto.sequenceEqual=function(second,comparer){var first=this;return comparer||(comparer=defaultComparer),new AnonymousObservable(function(o){var donel=!1,doner=!1,ql=[],qr=[],subscription1=first.subscribe(function(x){if(qr.length>0){var v=qr.shift(),equal=tryCatch(comparer)(v,x);if(equal===errorObj)return o.onError(equal.e);equal||(o.onNext(!1),o.onCompleted())}else doner?(o.onNext(!1),o.onCompleted()):ql.push(x)},function(e){o.onError(e)},function(){donel=!0,0===ql.length&&(qr.length>0?(o.onNext(!1),o.onCompleted()):doner&&(o.onNext(!0),o.onCompleted()))});(isArrayLike(second)||isIterable(second))&&(second=observableFrom(second)),isPromise(second)&&(second=observableFromPromise(second));var subscription2=second.subscribe(function(x){if(ql.length>0){var v=ql.shift(),equal=tryCatch(comparer)(v,x);if(equal===errorObj)return o.onError(equal.e);equal||(o.onNext(!1),o.onCompleted())}else donel?(o.onNext(!1),o.onCompleted()):qr.push(x)},function(e){o.onError(e)},function(){doner=!0,0===qr.length&&(ql.length>0?(o.onNext(!1),o.onCompleted()):donel&&(o.onNext(!0),o.onCompleted()))});return new BinaryDisposable(subscription1,subscription2)},first)};var ElementAtObservable=function(__super__){function ElementAtObservable(source,i,d){this.source=source,this._i=i,this._d=d,__super__.call(this)}return inherits(ElementAtObservable,__super__),ElementAtObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ElementAtObserver(o,this._i,this._d))},ElementAtObservable}(ObservableBase),ElementAtObserver=function(__super__){function ElementAtObserver(o,i,d){this._o=o,this._i=i,this._d=d,__super__.call(this)}return inherits(ElementAtObserver,__super__),ElementAtObserver.prototype.next=function(x){0===this._i--&&(this._o.onNext(x),this._o.onCompleted())},ElementAtObserver.prototype.error=function(e){this._o.onError(e)},ElementAtObserver.prototype.completed=function(){this._d===undefined?this._o.onError(new ArgumentOutOfRangeError):(this._o.onNext(this._d),this._o.onCompleted())},ElementAtObserver}(AbstractObserver);observableProto.elementAt=function(index,defaultValue){if(index<0)throw new ArgumentOutOfRangeError;
return new ElementAtObservable(this,index,defaultValue)};var SingleObserver=function(__super__){function SingleObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,this._hv=!1,this._v=null,__super__.call(this)}return inherits(SingleObserver,__super__),SingleObserver.prototype.next=function(x){var shouldYield=!1;if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(shouldYield=!0)}else this._obj.predicate||(shouldYield=!0);if(shouldYield){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=x}},SingleObserver.prototype.error=function(e){this._o.onError(e)},SingleObserver.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},SingleObserver}(AbstractObserver);observableProto.single=function(predicate,thisArg){var obj={},source=this;if(obj="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new AnonymousObservable(function(o){return source.subscribe(new SingleObserver(o,obj,source))},source)};var FirstObservable=function(__super__){function FirstObservable(source,obj){this.source=source,this._obj=obj,__super__.call(this)}return inherits(FirstObservable,__super__),FirstObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new FirstObserver(o,this._obj,this.source))},FirstObservable}(ObservableBase),FirstObserver=function(__super__){function FirstObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,__super__.call(this)}return inherits(FirstObserver,__super__),FirstObserver.prototype.next=function(x){if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(this._o.onNext(x),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(x),this._o.onCompleted())},FirstObserver.prototype.error=function(e){this._o.onError(e)},FirstObserver.prototype.completed=function(){this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},FirstObserver}(AbstractObserver);observableProto.first=function(){var obj={};if(obj="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new FirstObservable(this,obj)};var LastObservable=function(__super__){function LastObservable(source,obj){this.source=source,this._obj=obj,__super__.call(this)}return inherits(LastObservable,__super__),LastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new LastObserver(o,this._obj,this.source))},LastObservable}(ObservableBase),LastObserver=function(__super__){function LastObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,this._hv=!1,this._v=null,__super__.call(this)}return inherits(LastObserver,__super__),LastObserver.prototype.next=function(x){var shouldYield=!1;if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(shouldYield=!0)}else this._obj.predicate||(shouldYield=!0);shouldYield&&(this._hv=!0,this._v=x)},LastObserver.prototype.error=function(e){this._o.onError(e)},LastObserver.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},LastObserver}(AbstractObserver);observableProto.last=function(){var obj={};if(obj="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new LastObservable(this,obj)};var FindValueObserver=function(__super__){function FindValueObserver(observer,source,callback,yieldIndex){this._o=observer,this._s=source,this._cb=callback,this._y=yieldIndex,this._i=0,__super__.call(this)}return inherits(FindValueObserver,__super__),FindValueObserver.prototype.next=function(x){var shouldRun=tryCatch(this._cb)(x,this._i,this._s);return shouldRun===errorObj?this._o.onError(shouldRun.e):void(shouldRun?(this._o.onNext(this._y?this._i:x),this._o.onCompleted()):this._i++)},FindValueObserver.prototype.error=function(e){this._o.onError(e)},FindValueObserver.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},FindValueObserver}(AbstractObserver);observableProto.find=function(predicate,thisArg){return findValue(this,predicate,thisArg,!1)},observableProto.findIndex=function(predicate,thisArg){return findValue(this,predicate,thisArg,!0)};var ToSetObservable=function(__super__){function ToSetObservable(source){this.source=source,__super__.call(this)}return inherits(ToSetObservable,__super__),ToSetObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ToSetObserver(o))},ToSetObservable}(ObservableBase),ToSetObserver=function(__super__){function ToSetObserver(o){this._o=o,this._s=new root.Set,__super__.call(this)}return inherits(ToSetObserver,__super__),ToSetObserver.prototype.next=function(x){this._s.add(x)},ToSetObserver.prototype.error=function(e){this._o.onError(e)},ToSetObserver.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},ToSetObserver}(AbstractObserver);observableProto.toSet=function(){if("undefined"==typeof root.Set)throw new TypeError;return new ToSetObservable(this)};var ToMapObservable=function(__super__){function ToMapObservable(source,k,e){this.source=source,this._k=k,this._e=e,__super__.call(this)}return inherits(ToMapObservable,__super__),ToMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ToMapObserver(o,this._k,this._e))},ToMapObservable}(ObservableBase),ToMapObserver=function(__super__){function ToMapObserver(o,k,e){this._o=o,this._k=k,this._e=e,this._m=new root.Map,__super__.call(this)}return inherits(ToMapObserver,__super__),ToMapObserver.prototype.next=function(x){var key=tryCatch(this._k)(x);if(key===errorObj)return this._o.onError(key.e);var elem=x;return this._e&&(elem=tryCatch(this._e)(x),elem===errorObj)?this._o.onError(elem.e):void this._m.set(key,elem)},ToMapObserver.prototype.error=function(e){this._o.onError(e)},ToMapObserver.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},ToMapObserver}(AbstractObserver);observableProto.toMap=function(keySelector,elementSelector){if("undefined"==typeof root.Map)throw new TypeError;return new ToMapObservable(this,keySelector,elementSelector)};var SliceObservable=function(__super__){function SliceObservable(source,b,e){this.source=source,this._b=b,this._e=e,__super__.call(this)}return inherits(SliceObservable,__super__),SliceObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SliceObserver(o,this._b,this._e))},SliceObservable}(ObservableBase),SliceObserver=function(__super__){function SliceObserver(o,b,e){this._o=o,this._b=b,this._e=e,this._i=0,__super__.call(this)}return inherits(SliceObserver,__super__),SliceObserver.prototype.next=function(x){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(x)),this._i++},SliceObserver.prototype.error=function(e){this._o.onError(e)},SliceObserver.prototype.completed=function(){this._o.onCompleted()},SliceObserver}(AbstractObserver);observableProto.slice=function(begin,end){var start=begin||0;if(start<0)throw new Rx.ArgumentOutOfRangeError;if("number"==typeof end&&end<start)throw new Rx.ArgumentOutOfRangeError;return new SliceObservable(this,start,end)};var LastIndexOfObservable=function(__super__){function LastIndexOfObservable(source,e,n){this.source=source,this._e=e,this._n=n,__super__.call(this)}return inherits(LastIndexOfObservable,__super__),LastIndexOfObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(-1),o.onCompleted(),disposableEmpty):this.source.subscribe(new LastIndexOfObserver(o,this._e,this._n))},LastIndexOfObservable}(ObservableBase),LastIndexOfObserver=function(__super__){function LastIndexOfObserver(o,e,n){this._o=o,this._e=e,this._n=n,this._v=0,this._hv=!1,this._i=0,__super__.call(this)}return inherits(LastIndexOfObserver,__super__),LastIndexOfObserver.prototype.next=function(x){this._i>=this._n&&x===this._e&&(this._hv=!0,this._v=this._i),this._i++},LastIndexOfObserver.prototype.error=function(e){this._o.onError(e)},LastIndexOfObserver.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},LastIndexOfObserver}(AbstractObserver);observableProto.lastIndexOf=function(searchElement,fromIndex){var n=+fromIndex||0;return Math.abs(n)===1/0&&(n=0),new LastIndexOfObservable(this,searchElement,n)},Observable.wrap=function(fn){function createObservable(){return Observable.spawn.call(this,fn.apply(this,arguments))}return createObservable.__generatorFunction__=fn,createObservable};var spawn=Observable.spawn=function(){for(var gen=arguments[0],self=this,args=[],i=1,len=arguments.length;i<len;i++)args.push(arguments[i]);return new AnonymousObservable(function(o){function processGenerator(res){var ret=tryCatch(gen.next).call(gen,res);return ret===errorObj?o.onError(ret.e):void next(ret)}function onError(err){var ret=tryCatch(gen.next).call(gen,err);return ret===errorObj?o.onError(ret.e):void next(ret)}function next(ret){if(ret.done)return o.onNext(ret.value),void o.onCompleted();var obs=toObservable.call(self,ret.value),value=null,hasValue=!1;Observable.isObservable(obs)?g.add(obs.subscribe(function(val){hasValue=!0,value=val},onError,function(){hasValue&&processGenerator(value)})):onError(new TypeError("type not supported"))}var g=new CompositeDisposable;return isFunction(gen)&&(gen=gen.apply(self,args)),gen&&isFunction(gen.next)?(processGenerator(),g):(o.onNext(gen),o.onCompleted())})};Observable.start=function(func,context,scheduler){return observableToAsync(func,context,scheduler)()};var observableToAsync=Observable.toAsync=function(func,context,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),function(){var args=arguments,subject=new AsyncSubject;return scheduler.schedule(null,function(){var result;try{result=func.apply(context,args)}catch(e){return void subject.onError(e)}subject.onNext(result),subject.onCompleted()}),subject.asObservable()}};Observable.fromCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return createCbObservable(fn,ctx,selector,args)}},Observable.fromNodeCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return createNodeObservable(fn,ctx,selector,args)}},ListenDisposable.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Rx.config.useNativeEvents=!1;var EventObservable=function(__super__){function EventObservable(el,name,fn){this._el=el,this._n=name,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}return inherits(EventObservable,__super__),EventObservable.prototype.subscribeCore=function(o){return createEventListener(this._el,this._n,createHandler(o,this._fn))},EventObservable}(ObservableBase);Observable.fromEvent=function(element,eventName,selector){return element.addListener?fromEventPattern(function(h){element.addListener(eventName,h)},function(h){element.removeListener(eventName,h)},selector):Rx.config.useNativeEvents||"function"!=typeof element.on||"function"!=typeof element.off?new EventObservable(element,eventName,selector).publish().refCount():fromEventPattern(function(h){element.on(eventName,h)},function(h){element.off(eventName,h)},selector)};var EventPatternObservable=function(__super__){function EventPatternObservable(add,del,fn){this._add=add,this._del=del,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}function EventPatternDisposable(del,fn,ret){this._del=del,this._fn=fn,this._ret=ret,this.isDisposed=!1}return inherits(EventPatternObservable,__super__),EventPatternObservable.prototype.subscribeCore=function(o){var fn=createHandler(o,this._fn),returnValue=this._add(fn);return new EventPatternDisposable(this._del,fn,returnValue)},EventPatternDisposable.prototype.dispose=function(){this.isDisposed||(isFunction(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},EventPatternObservable}(ObservableBase),fromEventPattern=Observable.fromEventPattern=function(addHandler,removeHandler,selector){return new EventPatternObservable(addHandler,removeHandler,selector).publish().refCount()};Observable.startAsync=function(functionAsync){var promise=tryCatch(functionAsync)();return promise===errorObj?observableThrow(promise.e):observableFromPromise(promise)};var PausableObservable=function(__super__){function PausableObservable(source,pauser){this.source=source,this.controller=new Subject,this.paused=!0,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableObservable,__super__),PausableObservable.prototype._subscribe=function(o){var conn=this.source.publish(),subscription=conn.subscribe(o),connection=disposableEmpty,pausable=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(b){b?connection=conn.connect():(connection.dispose(),connection=disposableEmpty)});return new NAryDisposable([subscription,connection,pausable])},PausableObservable.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},PausableObservable.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},PausableObservable}(Observable);observableProto.pausable=function(pauser){return new PausableObservable(this,pauser)};var PausableBufferedObservable=function(__super__){function PausableBufferedObservable(source,pauser){this.source=source,this.controller=new Subject,this.paused=!0,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableBufferedObservable,__super__),PausableBufferedObservable.prototype._subscribe=function(o){function drainQueue(){for(;q.length>0;)o.onNext(q.shift())}var previousShouldFire,q=[],subscription=combineLatestSource(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(data,shouldFire){return{data:data,shouldFire:shouldFire}}).subscribe(function(results){previousShouldFire!==undefined&&results.shouldFire!==previousShouldFire?(previousShouldFire=results.shouldFire,results.shouldFire&&drainQueue()):(previousShouldFire=results.shouldFire,results.shouldFire?o.onNext(results.data):q.push(results.data))},function(err){drainQueue(),o.onError(err)},function(){drainQueue(),o.onCompleted()});return subscription},PausableBufferedObservable.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},PausableBufferedObservable.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},PausableBufferedObservable}(Observable);observableProto.pausableBuffered=function(pauser){return new PausableBufferedObservable(this,pauser)};var ControlledObservable=function(__super__){function ControlledObservable(source,enableQueue,scheduler){__super__.call(this),this.subject=new ControlledSubject(enableQueue,scheduler),this.source=source.multicast(this.subject).refCount()}return inherits(ControlledObservable,__super__),ControlledObservable.prototype._subscribe=function(o){return this.source.subscribe(o)},ControlledObservable.prototype.request=function(numberOfItems){return this.subject.request(null==numberOfItems?-1:numberOfItems)},ControlledObservable}(Observable),ControlledSubject=function(__super__){function ControlledSubject(enableQueue,scheduler){null==enableQueue&&(enableQueue=!0),__super__.call(this),this.subject=new Subject,this.enableQueue=enableQueue,this.queue=enableQueue?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=scheduler||currentThreadScheduler}return inherits(ControlledSubject,__super__),addProperties(ControlledSubject.prototype,Observer,{_subscribe:function(o){return this.subject.subscribe(o)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(error){this.hasFailed=!0,this.error=error,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnError(error)):(this.subject.onError(error),this.disposeCurrentRequest())},onNext:function(value){this.requestedCount<=0?this.enableQueue&&this.queue.push(Notification.createOnNext(value)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(value))},_processRequest:function(numberOfItems){if(this.enableQueue)for(;this.queue.length>0&&(numberOfItems>0||"N"!==this.queue[0].kind);){var first=this.queue.shift();first.accept(this.subject),"N"===first.kind?numberOfItems--:(this.disposeCurrentRequest(),this.queue=[])}return numberOfItems},request:function(number){this.disposeCurrentRequest();var self=this;return this.requestedDisposable=this.scheduler.schedule(number,function(s,i){var remaining=self._processRequest(i),stopped=self.hasCompleted||self.hasFailed;if(!stopped&&remaining>0)return self.requestedCount=remaining,disposableCreate(function(){self.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),ControlledSubject}(Observable);observableProto.controlled=function(enableQueue,scheduler){return enableQueue&&isScheduler(enableQueue)&&(scheduler=enableQueue,enableQueue=!0),null==enableQueue&&(enableQueue=!0),new ControlledObservable(this,enableQueue,scheduler)};var StopAndWaitObservable=function(__super__){function StopAndWaitObservable(source){__super__.call(this),this.source=source}function scheduleMethod(s,self){return self.source.request(1)}inherits(StopAndWaitObservable,__super__),StopAndWaitObservable.prototype._subscribe=function(o){return this.subscription=this.source.subscribe(new StopAndWaitObserver(o,this,this.subscription)),new BinaryDisposable(this.subscription,defaultScheduler.schedule(this,scheduleMethod))};var StopAndWaitObserver=function(__sub__){function StopAndWaitObserver(observer,observable,cancel){__sub__.call(this),this.observer=observer,this.observable=observable,this.cancel=cancel,this.scheduleDisposable=null}function innerScheduleMethod(s,self){return self.observable.source.request(1)}return inherits(StopAndWaitObserver,__sub__),StopAndWaitObserver.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},StopAndWaitObserver.prototype.error=function(error){this.observer.onError(error),this.dispose()},StopAndWaitObserver.prototype.next=function(value){this.observer.onNext(value),this.scheduleDisposable=defaultScheduler.schedule(this,innerScheduleMethod)},StopAndWaitObserver.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),__sub__.prototype.dispose.call(this)},StopAndWaitObserver}(AbstractObserver);return StopAndWaitObservable}(Observable);ControlledObservable.prototype.stopAndWait=function(){return new StopAndWaitObservable(this)};var WindowedObservable=function(__super__){function WindowedObservable(source,windowSize){__super__.call(this),this.source=source,this.windowSize=windowSize}function scheduleMethod(s,self){return self.source.request(self.windowSize)}inherits(WindowedObservable,__super__),WindowedObservable.prototype._subscribe=function(o){return this.subscription=this.source.subscribe(new WindowedObserver(o,this,this.subscription)),new BinaryDisposable(this.subscription,defaultScheduler.schedule(this,scheduleMethod))};var WindowedObserver=function(__sub__){function WindowedObserver(observer,observable,cancel){this.observer=observer,this.observable=observable,this.cancel=cancel,this.received=0,this.scheduleDisposable=null,__sub__.call(this)}function innerScheduleMethod(s,self){return self.observable.source.request(self.observable.windowSize)}return inherits(WindowedObserver,__sub__),WindowedObserver.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},WindowedObserver.prototype.error=function(error){this.observer.onError(error),this.dispose()},WindowedObserver.prototype.next=function(value){this.observer.onNext(value),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=defaultScheduler.schedule(this,innerScheduleMethod))},WindowedObserver.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),__sub__.prototype.dispose.call(this)},WindowedObserver}(AbstractObserver);return WindowedObservable}(Observable);ControlledObservable.prototype.windowed=function(windowSize){return new WindowedObservable(this,windowSize)},observableProto.pipe=function(dest){function onDrain(){source.resume()}var source=this.pausableBuffered();return dest.addListener("drain",onDrain),source.subscribe(function(x){!dest.write(x)&&source.pause()},function(err){dest.emit("error",err)},function(){!dest._isStdio&&dest.end(),dest.removeListener("drain",onDrain)}),source.resume(),dest};var MulticastObservable=function(__super__){function MulticastObservable(source,fn1,fn2){this.source=source,this._fn1=fn1,this._fn2=fn2,__super__.call(this)}return inherits(MulticastObservable,__super__),MulticastObservable.prototype.subscribeCore=function(o){var connectable=this.source.multicast(this._fn1());return new BinaryDisposable(this._fn2(connectable).subscribe(o),connectable.connect())},MulticastObservable}(ObservableBase);observableProto.multicast=function(subjectOrSubjectSelector,selector){return isFunction(subjectOrSubjectSelector)?new MulticastObservable(this,subjectOrSubjectSelector,selector):new ConnectableObservable(this,subjectOrSubjectSelector)},observableProto.publish=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new Subject},selector):this.multicast(new Subject)},observableProto.share=function(){return this.publish().refCount()},observableProto.publishLast=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new AsyncSubject},selector):this.multicast(new AsyncSubject)},observableProto.publishValue=function(initialValueOrSelector,initialValue){return 2===arguments.length?this.multicast(function(){return new BehaviorSubject(initialValue)},initialValueOrSelector):this.multicast(new BehaviorSubject(initialValueOrSelector))},observableProto.shareValue=function(initialValue){return this.publishValue(initialValue).refCount()},observableProto.replay=function(selector,bufferSize,windowSize,scheduler){return selector&&isFunction(selector)?this.multicast(function(){return new ReplaySubject(bufferSize,windowSize,scheduler)},selector):this.multicast(new ReplaySubject(bufferSize,windowSize,scheduler))},observableProto.shareReplay=function(bufferSize,windowSize,scheduler){return this.replay(null,bufferSize,windowSize,scheduler).refCount()};var InnerSubscription=function(s,o){this._s=s,this._o=o};InnerSubscription.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var idx=this._s.observers.indexOf(this._o);this._s.observers.splice(idx,1),this._o=null}};var RefCountObservable=function(__super__){function RefCountObservable(source){this.source=source,this._count=0,this._connectableSubscription=null,__super__.call(this)}function RefCountDisposable(p,s){this._p=p,this._s=s,this.isDisposed=!1}return inherits(RefCountObservable,__super__),RefCountObservable.prototype.subscribeCore=function(o){var subscription=this.source.subscribe(o);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new RefCountDisposable(this,subscription)},RefCountDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},RefCountObservable}(ObservableBase),ConnectableObservable=Rx.ConnectableObservable=function(__super__){function ConnectableObservable(source,subject){this.source=source,this._connection=null,this._source=source.asObservable(),this._subject=subject,__super__.call(this)}function ConnectDisposable(parent,subscription){this._p=parent,this._s=subscription}return inherits(ConnectableObservable,__super__),ConnectDisposable.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},ConnectableObservable.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return disposableEmpty;var subscription=this._source.subscribe(this._subject);this._connection=new ConnectDisposable(this,subscription)}return this._connection},ConnectableObservable.prototype._subscribe=function(o){return this._subject.subscribe(o)},ConnectableObservable.prototype.refCount=function(){return new RefCountObservable(this)},ConnectableObservable}(Observable);observableProto.singleInstance=function(){function getObservable(){return hasObservable||(hasObservable=!0,observable=source["finally"](function(){hasObservable=!1}).publish().refCount()),observable}var observable,source=this,hasObservable=!1;return new AnonymousObservable(function(o){return getObservable().subscribe(o)})},observableProto.join=function(right,leftDurationSelector,rightDurationSelector,resultSelector){var left=this;return new AnonymousObservable(function(o){var group=new CompositeDisposable,leftDone=!1,rightDone=!1,leftId=0,rightId=0,leftMap=new Map,rightMap=new Map,handleError=function(e){o.onError(e)};return group.add(left.subscribe(function(value){var id=leftId++,md=new SingleAssignmentDisposable;leftMap.set(id,value),group.add(md);var duration=tryCatch(leftDurationSelector)(value);return duration===errorObj?o.onError(duration.e):(md.setDisposable(duration.take(1).subscribe(noop,handleError,function(){leftMap["delete"](id)&&0===leftMap.size&&leftDone&&o.onCompleted(),group.remove(md)})),void rightMap.forEach(function(v){var result=tryCatch(resultSelector)(value,v);return result===errorObj?o.onError(result.e):void o.onNext(result)}))},handleError,function(){leftDone=!0,(rightDone||0===leftMap.size)&&o.onCompleted()})),group.add(right.subscribe(function(value){var id=rightId++,md=new SingleAssignmentDisposable;rightMap.set(id,value),group.add(md);var duration=tryCatch(rightDurationSelector)(value);return duration===errorObj?o.onError(duration.e):(md.setDisposable(duration.take(1).subscribe(noop,handleError,function(){rightMap["delete"](id)&&0===rightMap.size&&rightDone&&o.onCompleted(),group.remove(md)})),void leftMap.forEach(function(v){var result=tryCatch(resultSelector)(v,value);return result===errorObj?o.onError(result.e):void o.onNext(result)}))},handleError,function(){rightDone=!0,(leftDone||0===rightMap.size)&&o.onCompleted()})),group},left)},observableProto.groupJoin=function(right,leftDurationSelector,rightDurationSelector,resultSelector){var left=this;return new AnonymousObservable(function(o){function handleError(e){}var group=new CompositeDisposable,r=new RefCountDisposable(group),leftMap=new Map,rightMap=new Map,leftId=0,rightId=0,handleError=function(e){return function(v){v.onError(e)}};return group.add(left.subscribe(function(value){var s=new Subject,id=leftId++;leftMap.set(id,s);var result=tryCatch(resultSelector)(value,addRef(s,r));if(result===errorObj)return leftMap.forEach(handleError(result.e)),o.onError(result.e);o.onNext(result),rightMap.forEach(function(v){s.onNext(v)});var md=new SingleAssignmentDisposable;group.add(md);var duration=tryCatch(leftDurationSelector)(value);return duration===errorObj?(leftMap.forEach(handleError(duration.e)),o.onError(duration.e)):void md.setDisposable(duration.take(1).subscribe(noop,function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){leftMap["delete"](id)&&s.onCompleted(),group.remove(md)}))},function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){o.onCompleted()})),group.add(right.subscribe(function(value){var id=rightId++;rightMap.set(id,value);var md=new SingleAssignmentDisposable;group.add(md);var duration=tryCatch(rightDurationSelector)(value);return duration===errorObj?(leftMap.forEach(handleError(duration.e)),o.onError(duration.e)):(md.setDisposable(duration.take(1).subscribe(noop,function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){rightMap["delete"](id),group.remove(md)})),void leftMap.forEach(function(v){v.onNext(value)}))},function(e){leftMap.forEach(handleError(e)),o.onError(e)})),r},left)},observableProto.buffer=function(){return this.window.apply(this,arguments).flatMap(toArray)},observableProto.window=function(windowOpeningsOrClosingSelector,windowClosingSelector){return 1===arguments.length&&"function"!=typeof arguments[0]?observableWindowWithBoundaries.call(this,windowOpeningsOrClosingSelector):"function"==typeof windowOpeningsOrClosingSelector?observableWindowWithClosingSelector.call(this,windowOpeningsOrClosingSelector):observableWindowWithOpenings.call(this,windowOpeningsOrClosingSelector,windowClosingSelector)};var PairwiseObservable=function(__super__){function PairwiseObservable(source){this.source=source,__super__.call(this)}return inherits(PairwiseObservable,__super__),PairwiseObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new PairwiseObserver(o))},PairwiseObservable}(ObservableBase),PairwiseObserver=function(__super__){function PairwiseObserver(o){this._o=o,this._p=null,this._hp=!1,__super__.call(this)}return inherits(PairwiseObserver,__super__),PairwiseObserver.prototype.next=function(x){this._hp?this._o.onNext([this._p,x]):this._hp=!0,this._p=x},PairwiseObserver.prototype.error=function(err){this._o.onError(err)},PairwiseObserver.prototype.completed=function(){this._o.onCompleted()},PairwiseObserver}(AbstractObserver);observableProto.pairwise=function(){return new PairwiseObservable(this)},observableProto.partition=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return[this.filter(predicate,thisArg),this.filter(function(x,i,o){return!fn(x,i,o)})]};var WhileEnumerable=function(__super__){function WhileEnumerable(c,s){this.c=c,this.s=s}return inherits(WhileEnumerable,__super__),WhileEnumerable.prototype[$iterator$]=function(){var self=this;return{next:function(){return self.c()?{done:!1,value:self.s}:{done:!0,value:void 0}}}},WhileEnumerable}(Enumerable);observableProto.letBind=observableProto["let"]=function(func){return func(this)},Observable["if"]=function(condition,thenSource,elseSourceOrScheduler){return observableDefer(function(){return elseSourceOrScheduler||(elseSourceOrScheduler=observableEmpty()),isPromise(thenSource)&&(thenSource=observableFromPromise(thenSource)),isPromise(elseSourceOrScheduler)&&(elseSourceOrScheduler=observableFromPromise(elseSourceOrScheduler)),
"function"==typeof elseSourceOrScheduler.now&&(elseSourceOrScheduler=observableEmpty(elseSourceOrScheduler)),condition()?thenSource:elseSourceOrScheduler})},Observable["for"]=Observable.forIn=function(sources,resultSelector,thisArg){return enumerableOf(sources,resultSelector,thisArg).concat()};var observableWhileDo=Observable["while"]=Observable.whileDo=function(condition,source){return isPromise(source)&&(source=observableFromPromise(source)),enumerableWhile(condition,source).concat()};observableProto.doWhile=function(condition){return observableConcat([this,observableWhileDo(condition,this)])},Observable["case"]=function(selector,sources,defaultSourceOrScheduler){return observableDefer(function(){isPromise(defaultSourceOrScheduler)&&(defaultSourceOrScheduler=observableFromPromise(defaultSourceOrScheduler)),defaultSourceOrScheduler||(defaultSourceOrScheduler=observableEmpty()),isScheduler(defaultSourceOrScheduler)&&(defaultSourceOrScheduler=observableEmpty(defaultSourceOrScheduler));var result=sources[selector()];return isPromise(result)&&(result=observableFromPromise(result)),result||defaultSourceOrScheduler})};var ExpandObservable=function(__super__){function ExpandObservable(source,fn,scheduler){this.source=source,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function scheduleRecursive(args,recurse){var work,state=args[0],self=args[1];if(!(state.q.length>0))return void(state.isAcquired=!1);work=state.q.shift();var m1=new SingleAssignmentDisposable;state.d.add(m1),m1.setDisposable(work.subscribe(new ExpandObserver(state,self,m1))),recurse([state,self])}return inherits(ExpandObservable,__super__),ExpandObservable.prototype._ensureActive=function(state){var isOwner=!1;state.q.length>0&&(isOwner=!state.isAcquired,state.isAcquired=!0),isOwner&&state.m.setDisposable(this._scheduler.scheduleRecursive([state,this],scheduleRecursive))},ExpandObservable.prototype.subscribeCore=function(o){var m=new SerialDisposable,d=new CompositeDisposable(m),state={q:[],m:m,d:d,activeCount:0,isAcquired:!1,o:o};return state.q.push(this.source),state.activeCount++,this._ensureActive(state),d},ExpandObservable}(ObservableBase),ExpandObserver=function(__super__){function ExpandObserver(state,parent,m1){this._s=state,this._p=parent,this._m1=m1,__super__.call(this)}return inherits(ExpandObserver,__super__),ExpandObserver.prototype.next=function(x){this._s.o.onNext(x);var result=tryCatch(this._p._fn)(x);return result===errorObj?this._s.o.onError(result.e):(this._s.q.push(result),this._s.activeCount++,void this._p._ensureActive(this._s))},ExpandObserver.prototype.error=function(e){this._s.o.onError(e)},ExpandObserver.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},ExpandObserver}(AbstractObserver);observableProto.expand=function(selector,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new ExpandObservable(this,selector,scheduler)};var ForkJoinObservable=function(__super__){function ForkJoinObservable(sources,cb){this._sources=sources,this._cb=cb,__super__.call(this)}return inherits(ForkJoinObservable,__super__),ForkJoinObservable.prototype.subscribeCore=function(o){if(0===this._sources.length)return o.onCompleted(),disposableEmpty;for(var count=this._sources.length,state={finished:!1,hasResults:new Array(count),hasCompleted:new Array(count),results:new Array(count)},subscriptions=new CompositeDisposable,i=0,len=this._sources.length;i<len;i++){var source=this._sources[i];isPromise(source)&&(source=observableFromPromise(source)),subscriptions.add(source.subscribe(new ForkJoinObserver(o,state,i,this._cb,subscriptions)))}return subscriptions},ForkJoinObservable}(ObservableBase),ForkJoinObserver=function(__super__){function ForkJoinObserver(o,s,i,cb,subs){this._o=o,this._s=s,this._i=i,this._cb=cb,this._subs=subs,__super__.call(this)}return inherits(ForkJoinObserver,__super__),ForkJoinObserver.prototype.next=function(x){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=x)},ForkJoinObserver.prototype.error=function(e){this._s.finished=!0,this._o.onError(e),this._subs.dispose()},ForkJoinObserver.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var i=0;i<this._s.results.length;i++)if(!this._s.hasCompleted[i])return;this._s.finished=!0;var res=tryCatch(this._cb).apply(null,this._s.results);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res),this._o.onCompleted()}},ForkJoinObserver}(AbstractObserver);Observable.forkJoin=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new ForkJoinObservable(args,resultSelector)},observableProto.forkJoin=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),Observable.forkJoin.apply(null,args)},observableProto.manySelect=observableProto.extend=function(selector,scheduler){isScheduler(scheduler)||(scheduler=Rx.Scheduler.immediate);var source=this;return observableDefer(function(){var chain;return source.map(function(x){var curr=new ChainObservable(x);return chain&&chain.onNext(x),chain=curr,curr}).tap(noop,function(e){chain&&chain.onError(e)},function(){chain&&chain.onCompleted()}).observeOn(scheduler).map(selector)},source)};var ChainObservable=function(__super__){function ChainObservable(head){__super__.call(this),this.head=head,this.tail=new AsyncSubject}return inherits(ChainObservable,__super__),addProperties(ChainObservable.prototype,Observer,{_subscribe:function(o){var g=new CompositeDisposable;return g.add(currentThreadScheduler.schedule(this,function(_,self){o.onNext(self.head),g.add(self.tail.mergeAll().subscribe(o))})),g},onCompleted:function(){this.onNext(Observable.empty())},onError:function(e){this.onNext(Observable["throw"](e))},onNext:function(v){this.tail.onNext(v),this.tail.onCompleted()}}),ChainObservable}(Observable),Map=root.Map||function(){function Map(){this.size=0,this._values=[],this._keys=[]}return Map.prototype["delete"]=function(key){var i=this._keys.indexOf(key);return i!==-1&&(this._values.splice(i,1),this._keys.splice(i,1),this.size--,!0)},Map.prototype.get=function(key){var i=this._keys.indexOf(key);return i===-1?undefined:this._values[i]},Map.prototype.set=function(key,value){var i=this._keys.indexOf(key);return i===-1?(this._keys.push(key),this._values.push(value),this.size++):this._values[i]=value,this},Map.prototype.forEach=function(cb,thisArg){for(var i=0;i<this.size;i++)cb.call(thisArg,this._values[i],this._keys[i])},Map}();Pattern.prototype.and=function(other){return new Pattern(this.patterns.concat(other))},Pattern.prototype.thenDo=function(selector){return new Plan(this,selector)},Plan.prototype.activate=function(externalSubscriptions,observer,deactivate){for(var joinObservers=[],errHandler=handleOnError(observer),i=0,len=this.expression.patterns.length;i<len;i++)joinObservers.push(planCreateObserver(externalSubscriptions,this.expression.patterns[i],errHandler));var activePlan=new ActivePlan(joinObservers,handleOnNext(this,observer),function(){for(var j=0,jlen=joinObservers.length;j<jlen;j++)joinObservers[j].removeActivePlan(activePlan);deactivate(activePlan)});for(i=0,len=joinObservers.length;i<len;i++)joinObservers[i].addActivePlan(activePlan);return activePlan},ActivePlan.prototype.dequeue=function(){this.joinObservers.forEach(function(v){v.queue.shift()})},ActivePlan.prototype.match=function(){var i,len,hasValues=!0;for(i=0,len=this.joinObserverArray.length;i<len;i++)if(0===this.joinObserverArray[i].queue.length){hasValues=!1;break}if(hasValues){var firstValues=[],isCompleted=!1;for(i=0,len=this.joinObserverArray.length;i<len;i++)firstValues.push(this.joinObserverArray[i].queue[0]),"C"===this.joinObserverArray[i].queue[0].kind&&(isCompleted=!0);if(isCompleted)this.onCompleted();else{this.dequeue();var values=[];for(i=0,len=firstValues.length;i<firstValues.length;i++)values.push(firstValues[i].value);this.onNext.apply(this,values)}}};var JoinObserver=function(__super__){function JoinObserver(source,onError){__super__.call(this),this.source=source,this.onError=onError,this.queue=[],this.activePlans=[],this.subscription=new SingleAssignmentDisposable,this.isDisposed=!1}inherits(JoinObserver,__super__);var JoinObserverPrototype=JoinObserver.prototype;return JoinObserverPrototype.next=function(notification){if(!this.isDisposed){if("E"===notification.kind)return this.onError(notification.error);this.queue.push(notification);for(var activePlans=this.activePlans.slice(0),i=0,len=activePlans.length;i<len;i++)activePlans[i].match()}},JoinObserverPrototype.error=noop,JoinObserverPrototype.completed=noop,JoinObserverPrototype.addActivePlan=function(activePlan){this.activePlans.push(activePlan)},JoinObserverPrototype.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},JoinObserverPrototype.removeActivePlan=function(activePlan){this.activePlans.splice(this.activePlans.indexOf(activePlan),1),0===this.activePlans.length&&this.dispose()},JoinObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},JoinObserver}(AbstractObserver);observableProto.and=function(right){return new Pattern([this,right])},observableProto.thenDo=function(selector){return new Pattern([this]).thenDo(selector)},Observable.when=function(){var plans,len=arguments.length;if(Array.isArray(arguments[0]))plans=arguments[0];else{plans=new Array(len);for(var i=0;i<len;i++)plans[i]=arguments[i]}return new AnonymousObservable(function(o){var activePlans=[],externalSubscriptions=new Map,outObserver=observerCreate(function(x){o.onNext(x)},function(err){externalSubscriptions.forEach(function(v){v.onError(err)}),o.onError(err)},function(x){o.onCompleted()});try{for(var i=0,len=plans.length;i<len;i++)activePlans.push(plans[i].activate(externalSubscriptions,outObserver,function(activePlan){var idx=activePlans.indexOf(activePlan);activePlans.splice(idx,1),0===activePlans.length&&o.onCompleted()}))}catch(e){return observableThrow(e).subscribe(o)}var group=new CompositeDisposable;return externalSubscriptions.forEach(function(joinObserver){joinObserver.subscribe(),group.add(joinObserver)}),group})};var TimerObservable=function(__super__){function TimerObservable(dt,s){this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onNext(0),o.onCompleted()}return inherits(TimerObservable,__super__),TimerObservable.prototype.subscribeCore=function(o){return this._s.scheduleFuture(o,this._dt,scheduleMethod)},TimerObservable}(ObservableBase),observableinterval=Observable.interval=function(period,scheduler){return observableTimerTimeSpanAndPeriod(period,period,isScheduler(scheduler)?scheduler:defaultScheduler)};Observable.timer=function(dueTime,periodOrScheduler,scheduler){var period;return isScheduler(scheduler)||(scheduler=defaultScheduler),null!=periodOrScheduler&&"number"==typeof periodOrScheduler?period=periodOrScheduler:isScheduler(periodOrScheduler)&&(scheduler=periodOrScheduler),(dueTime instanceof Date||"number"==typeof dueTime)&&period===undefined?_observableTimer(dueTime,scheduler):dueTime instanceof Date&&period!==undefined?observableTimerDateAndPeriod(dueTime,periodOrScheduler,scheduler):observableTimerTimeSpanAndPeriod(dueTime,period,scheduler)};observableProto.delay=function(){var firstArg=arguments[0];if("number"==typeof firstArg||firstArg instanceof Date){var dueTime=firstArg,scheduler=arguments[1];return isScheduler(scheduler)||(scheduler=defaultScheduler),dueTime instanceof Date?observableDelayAbsolute(this,dueTime,scheduler):observableDelayRelative(this,dueTime,scheduler)}if(Observable.isObservable(firstArg)||isFunction(firstArg))return delayWithSelector(this,firstArg,arguments[1]);throw new Error("Invalid arguments")};var DebounceObservable=function(__super__){function DebounceObservable(source,dt,s){isScheduler(s)||(s=defaultScheduler),this.source=source,this._dt=dt,this._s=s,__super__.call(this)}return inherits(DebounceObservable,__super__),DebounceObservable.prototype.subscribeCore=function(o){var cancelable=new SerialDisposable;return new BinaryDisposable(this.source.subscribe(new DebounceObserver(o,this._dt,this._s,cancelable)),cancelable)},DebounceObservable}(ObservableBase),DebounceObserver=function(__super__){function DebounceObserver(observer,dueTime,scheduler,cancelable){this._o=observer,this._d=dueTime,this._scheduler=scheduler,this._c=cancelable,this._v=null,this._hv=!1,this._id=0,__super__.call(this)}return inherits(DebounceObserver,__super__),DebounceObserver.prototype.next=function(x){this._hv=!0,this._v=x;var currentId=++this._id,d=new SingleAssignmentDisposable;this._c.setDisposable(d),d.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(_,self){self._hv&&self._id===currentId&&self._o.onNext(x),self._hv=!1}))},DebounceObserver.prototype.error=function(e){this._c.dispose(),this._o.onError(e),this._hv=!1,this._id++},DebounceObserver.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},DebounceObserver}(AbstractObserver);observableProto.debounce=function(){if(isFunction(arguments[0]))return debounceWithSelector(this,arguments[0]);if("number"==typeof arguments[0])return new DebounceObservable(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},observableProto.windowWithTime=observableProto.windowTime=function(timeSpan,timeShiftOrScheduler,scheduler){var timeShift,source=this;return null==timeShiftOrScheduler&&(timeShift=timeSpan),isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof timeShiftOrScheduler?timeShift=timeShiftOrScheduler:isScheduler(timeShiftOrScheduler)&&(timeShift=timeSpan,scheduler=timeShiftOrScheduler),new AnonymousObservable(function(observer){function createTimer(){var m=new SingleAssignmentDisposable,isSpan=!1,isShift=!1;timerD.setDisposable(m),nextSpan===nextShift?(isSpan=!0,isShift=!0):nextSpan<nextShift?isSpan=!0:isShift=!0;var newTotalTime=isSpan?nextSpan:nextShift,ts=newTotalTime-totalTime;totalTime=newTotalTime,isSpan&&(nextSpan+=timeShift),isShift&&(nextShift+=timeShift),m.setDisposable(scheduler.scheduleFuture(null,ts,function(){if(isShift){var s=new Subject;q.push(s),observer.onNext(addRef(s,refCountDisposable))}isSpan&&q.shift().onCompleted(),createTimer()}))}var groupDisposable,refCountDisposable,nextShift=timeShift,nextSpan=timeSpan,q=[],timerD=new SerialDisposable,totalTime=0;return groupDisposable=new CompositeDisposable(timerD),refCountDisposable=new RefCountDisposable(groupDisposable),q.push(new Subject),observer.onNext(addRef(q[0],refCountDisposable)),createTimer(),groupDisposable.add(source.subscribe(function(x){for(var i=0,len=q.length;i<len;i++)q[i].onNext(x)},function(e){for(var i=0,len=q.length;i<len;i++)q[i].onError(e);observer.onError(e)},function(){for(var i=0,len=q.length;i<len;i++)q[i].onCompleted();observer.onCompleted()})),refCountDisposable},source)},observableProto.windowWithTimeOrCount=observableProto.windowTimeOrCount=function(timeSpan,count,scheduler){var source=this;return isScheduler(scheduler)||(scheduler=defaultScheduler),new AnonymousObservable(function(observer){function createTimer(id){var m=new SingleAssignmentDisposable;timerD.setDisposable(m),m.setDisposable(scheduler.scheduleFuture(null,timeSpan,function(){if(id===windowId){n=0;var newId=++windowId;s.onCompleted(),s=new Subject,observer.onNext(addRef(s,refCountDisposable)),createTimer(newId)}}))}var timerD=new SerialDisposable,groupDisposable=new CompositeDisposable(timerD),refCountDisposable=new RefCountDisposable(groupDisposable),n=0,windowId=0,s=new Subject;return observer.onNext(addRef(s,refCountDisposable)),createTimer(0),groupDisposable.add(source.subscribe(function(x){var newId=0,newWindow=!1;s.onNext(x),++n===count&&(newWindow=!0,n=0,newId=++windowId,s.onCompleted(),s=new Subject,observer.onNext(addRef(s,refCountDisposable))),newWindow&&createTimer(newId)},function(e){s.onError(e),observer.onError(e)},function(){s.onCompleted(),observer.onCompleted()})),refCountDisposable},source)},observableProto.bufferWithTime=observableProto.bufferTime=function(timeSpan,timeShiftOrScheduler,scheduler){return this.windowWithTime(timeSpan,timeShiftOrScheduler,scheduler).flatMap(toArray)},observableProto.bufferWithTimeOrCount=observableProto.bufferTimeOrCount=function(timeSpan,count,scheduler){return this.windowWithTimeOrCount(timeSpan,count,scheduler).flatMap(toArray)};var TimeIntervalObservable=function(__super__){function TimeIntervalObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimeIntervalObservable,__super__),TimeIntervalObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimeIntervalObserver(o,this._s))},TimeIntervalObservable}(ObservableBase),TimeIntervalObserver=function(__super__){function TimeIntervalObserver(o,s){this._o=o,this._s=s,this._l=s.now(),__super__.call(this)}return inherits(TimeIntervalObserver,__super__),TimeIntervalObserver.prototype.next=function(x){var now=this._s.now(),span=now-this._l;this._l=now,this._o.onNext({value:x,interval:span})},TimeIntervalObserver.prototype.error=function(e){this._o.onError(e)},TimeIntervalObserver.prototype.completed=function(){this._o.onCompleted()},TimeIntervalObserver}(AbstractObserver);observableProto.timeInterval=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimeIntervalObservable(this,scheduler)};var TimestampObservable=function(__super__){function TimestampObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimestampObservable,__super__),TimestampObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimestampObserver(o,this._s))},TimestampObservable}(ObservableBase),TimestampObserver=function(__super__){function TimestampObserver(o,s){this._o=o,this._s=s,__super__.call(this)}return inherits(TimestampObserver,__super__),TimestampObserver.prototype.next=function(x){this._o.onNext({value:x,timestamp:this._s.now()})},TimestampObserver.prototype.error=function(e){this._o.onError(e)},TimestampObserver.prototype.completed=function(){this._o.onCompleted()},TimestampObserver}(AbstractObserver);observableProto.timestamp=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimestampObservable(this,scheduler)};var SampleObservable=function(__super__){function SampleObservable(source,sampler){this.source=source,this._sampler=sampler,__super__.call(this)}return inherits(SampleObservable,__super__),SampleObservable.prototype.subscribeCore=function(o){var state={o:o,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new SingleAssignmentDisposable};return state.sourceSubscription.setDisposable(this.source.subscribe(new SampleSourceObserver(state))),new BinaryDisposable(state.sourceSubscription,this._sampler.subscribe(new SamplerObserver(state)))},SampleObservable}(ObservableBase),SamplerObserver=function(__super__){function SamplerObserver(s){this._s=s,__super__.call(this)}return inherits(SamplerObserver,__super__),SamplerObserver.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},SamplerObserver.prototype.next=function(){this._handleMessage()},SamplerObserver.prototype.error=function(e){this._s.onError(e)},SamplerObserver.prototype.completed=function(){this._handleMessage()},SamplerObserver}(AbstractObserver),SampleSourceObserver=function(__super__){function SampleSourceObserver(s){this._s=s,__super__.call(this)}return inherits(SampleSourceObserver,__super__),SampleSourceObserver.prototype.next=function(x){this._s.hasValue=!0,this._s.value=x},SampleSourceObserver.prototype.error=function(e){this._s.o.onError(e)},SampleSourceObserver.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},SampleSourceObserver}(AbstractObserver);observableProto.sample=function(intervalOrSampler,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof intervalOrSampler?new SampleObservable(this,observableinterval(intervalOrSampler,scheduler)):new SampleObservable(this,intervalOrSampler)};var TimeoutError=Rx.TimeoutError=function(message){this.message=message||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};TimeoutError.prototype=Object.create(Error.prototype),observableProto.timeout=function(){var firstArg=arguments[0];if(firstArg instanceof Date||"number"==typeof firstArg)return timeout(this,firstArg,arguments[1],arguments[2]);if(Observable.isObservable(firstArg)||isFunction(firstArg))return timeoutWithSelector(this,firstArg,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var GenerateAbsoluteObservable=function(__super__){function GenerateAbsoluteObservable(state,cndFn,itrFn,resFn,timeFn,s){this._state=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._timeFn=timeFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.hasResult&&state.o.onNext(state.result),state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);if(state.hasResult=tryCatch(state.self._cndFn)(state.newState),state.hasResult===errorObj)return state.o.onError(state.hasResult.e);if(state.hasResult){if(state.result=tryCatch(state.self._resFn)(state.newState),state.result===errorObj)return state.o.onError(state.result.e);var time=tryCatch(state.self._timeFn)(state.newState);if(time===errorObj)return state.o.onError(time.e);recurse(state,time)}else state.o.onCompleted()}return inherits(GenerateAbsoluteObservable,__super__),GenerateAbsoluteObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(state,new Date(this._s.now()),scheduleRecursive)},GenerateAbsoluteObservable}(ObservableBase);Observable.generateWithAbsoluteTime=function(initialState,condition,iterate,resultSelector,timeSelector,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new GenerateAbsoluteObservable(initialState,condition,iterate,resultSelector,timeSelector,scheduler)};var GenerateRelativeObservable=function(__super__){function GenerateRelativeObservable(state,cndFn,itrFn,resFn,timeFn,s){this._state=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._timeFn=timeFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.hasResult&&state.o.onNext(state.result),state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);if(state.hasResult=tryCatch(state.self._cndFn)(state.newState),state.hasResult===errorObj)return state.o.onError(state.hasResult.e);if(state.hasResult){if(state.result=tryCatch(state.self._resFn)(state.newState),state.result===errorObj)return state.o.onError(state.result.e);var time=tryCatch(state.self._timeFn)(state.newState);if(time===errorObj)return state.o.onError(time.e);recurse(state,time)}else state.o.onCompleted()}return inherits(GenerateRelativeObservable,__super__),GenerateRelativeObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(state,0,scheduleRecursive)},GenerateRelativeObservable}(ObservableBase);Observable.generateWithRelativeTime=function(initialState,condition,iterate,resultSelector,timeSelector,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new GenerateRelativeObservable(initialState,condition,iterate,resultSelector,timeSelector,scheduler)};var DelaySubscription=function(__super__){function DelaySubscription(source,dt,s){this.source=source,this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,state){var source=state[0],o=state[1],d=state[2];d.setDisposable(source.subscribe(o))}return inherits(DelaySubscription,__super__),DelaySubscription.prototype.subscribeCore=function(o){var d=new SerialDisposable;return d.setDisposable(this._s.scheduleFuture([this.source,o,d],this._dt,scheduleMethod)),d},DelaySubscription}(ObservableBase);observableProto.delaySubscription=function(dueTime,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new DelaySubscription(this,dueTime,scheduler)};var SkipLastWithTimeObservable=function(__super__){function SkipLastWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}return inherits(SkipLastWithTimeObservable,__super__),SkipLastWithTimeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastWithTimeObserver(o,this))},SkipLastWithTimeObservable}(ObservableBase),SkipLastWithTimeObserver=function(__super__){function SkipLastWithTimeObserver(o,p){this._o=o,this._s=p._s,this._d=p._d,this._q=[],__super__.call(this)}return inherits(SkipLastWithTimeObserver,__super__),SkipLastWithTimeObserver.prototype.next=function(x){var now=this._s.now();for(this._q.push({interval:now,value:x});this._q.length>0&&now-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},SkipLastWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipLastWithTimeObserver.prototype.completed=function(){for(var now=this._s.now();this._q.length>0&&now-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},SkipLastWithTimeObserver}(AbstractObserver);observableProto.skipLastWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipLastWithTimeObservable(this,duration,scheduler)};var TakeLastWithTimeObservable=function(__super__){function TakeLastWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}return inherits(TakeLastWithTimeObservable,__super__),TakeLastWithTimeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeLastWithTimeObserver(o,this._d,this._s))},TakeLastWithTimeObservable}(ObservableBase),TakeLastWithTimeObserver=function(__super__){function TakeLastWithTimeObserver(o,d,s){this._o=o,this._d=d,this._s=s,this._q=[],__super__.call(this)}return inherits(TakeLastWithTimeObserver,__super__),TakeLastWithTimeObserver.prototype.next=function(x){var now=this._s.now();for(this._q.push({interval:now,value:x});this._q.length>0&&now-this._q[0].interval>=this._d;)this._q.shift()},TakeLastWithTimeObserver.prototype.error=function(e){this._o.onError(e)},TakeLastWithTimeObserver.prototype.completed=function(){for(var now=this._s.now();this._q.length>0;){var next=this._q.shift();now-next.interval<=this._d&&this._o.onNext(next.value)}this._o.onCompleted()},TakeLastWithTimeObserver}(AbstractObserver);observableProto.takeLastWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TakeLastWithTimeObservable(this,duration,scheduler)},observableProto.takeLastBufferWithTime=function(duration,scheduler){var source=this;return isScheduler(scheduler)||(scheduler=defaultScheduler),new AnonymousObservable(function(o){var q=[];return source.subscribe(function(x){var now=scheduler.now();for(q.push({interval:now,value:x});q.length>0&&now-q[0].interval>=duration;)q.shift()},function(e){o.onError(e)},function(){for(var now=scheduler.now(),res=[];q.length>0;){var next=q.shift();now-next.interval<=duration&&res.push(next.value)}o.onNext(res),o.onCompleted()})},source)};var TakeWithTimeObservable=function(__super__){function TakeWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onCompleted()}return inherits(TakeWithTimeObservable,__super__),TakeWithTimeObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._s.scheduleFuture(o,this._d,scheduleMethod),this.source.subscribe(o))},TakeWithTimeObservable}(ObservableBase);observableProto.takeWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TakeWithTimeObservable(this,duration,scheduler)};var SkipWithTimeObservable=function(__super__){function SkipWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,this._open=!1,__super__.call(this)}function scheduleMethod(s,self){self._open=!0}return inherits(SkipWithTimeObservable,__super__),SkipWithTimeObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._s.scheduleFuture(this,this._d,scheduleMethod),this.source.subscribe(new SkipWithTimeObserver(o,this)))},SkipWithTimeObservable}(ObservableBase),SkipWithTimeObserver=function(__super__){function SkipWithTimeObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipWithTimeObserver,__super__),SkipWithTimeObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipWithTimeObserver.prototype.completed=function(){this._o.onCompleted()},SkipWithTimeObserver}(AbstractObserver);observableProto.skipWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipWithTimeObservable(this,duration,scheduler)};var SkipUntilWithTimeObservable=function(__super__){function SkipUntilWithTimeObservable(source,startTime,scheduler){this.source=source,this._st=startTime,this._s=scheduler,__super__.call(this)}function scheduleMethod(s,state){state._open=!0}return inherits(SkipUntilWithTimeObservable,__super__),SkipUntilWithTimeObservable.prototype.subscribeCore=function(o){return this._open=!1,new BinaryDisposable(this._s.scheduleFuture(this,this._st,scheduleMethod),this.source.subscribe(new SkipUntilWithTimeObserver(o,this)))},SkipUntilWithTimeObservable}(ObservableBase),SkipUntilWithTimeObserver=function(__super__){function SkipUntilWithTimeObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilWithTimeObserver,__super__),SkipUntilWithTimeObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipUntilWithTimeObserver.prototype.completed=function(){this._o.onCompleted()},SkipUntilWithTimeObserver}(AbstractObserver);observableProto.skipUntilWithTime=function(startTime,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipUntilWithTimeObservable(this,startTime,scheduler)},observableProto.takeUntilWithTime=function(endTime,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var source=this;return new AnonymousObservable(function(o){return new BinaryDisposable(scheduler.scheduleFuture(o,endTime,function(_,o){o.onCompleted()}),source.subscribe(o))},source)},observableProto.throttle=function(windowDuration,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var duration=+windowDuration||0;if(duration<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var source=this;return new AnonymousObservable(function(o){var lastOnNext=0;return source.subscribe(function(x){var now=scheduler.now();(0===lastOnNext||now-lastOnNext>=duration)&&(lastOnNext=now,o.onNext(x))},function(e){o.onError(e)},function(){o.onCompleted()})},source)};var TransduceObserver=function(__super__){function TransduceObserver(o,xform){this._o=o,this._xform=xform,__super__.call(this)}return inherits(TransduceObserver,__super__),TransduceObserver.prototype.next=function(x){var res=tryCatch(this._xform["@@transducer/step"]).call(this._xform,this._o,x);res===errorObj&&this._o.onError(res.e)},TransduceObserver.prototype.error=function(e){
this._o.onError(e)},TransduceObserver.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},TransduceObserver}(AbstractObserver);observableProto.transduce=function(transducer){var source=this;return new AnonymousObservable(function(o){var xform=transducer(transformForObserver(o));return source.subscribe(new TransduceObserver(o,xform))},source)};var SwitchFirstObservable=function(__super__){function SwitchFirstObservable(source){this.source=source,__super__.call(this)}return inherits(SwitchFirstObservable,__super__),SwitchFirstObservable.prototype.subscribeCore=function(o){var m=new SingleAssignmentDisposable,g=new CompositeDisposable,state={hasCurrent:!1,isStopped:!1,o:o,g:g};return g.add(m),m.setDisposable(this.source.subscribe(new SwitchFirstObserver(state))),g},SwitchFirstObservable}(ObservableBase),SwitchFirstObserver=function(__super__){function SwitchFirstObserver(state){this._s=state,__super__.call(this)}function InnerObserver(state,inner){this._s=state,this._i=inner,__super__.call(this)}return inherits(SwitchFirstObserver,__super__),SwitchFirstObserver.prototype.next=function(x){if(!this._s.hasCurrent){this._s.hasCurrent=!0,isPromise(x)&&(x=observableFromPromise(x));var inner=new SingleAssignmentDisposable;this._s.g.add(inner),inner.setDisposable(x.subscribe(new InnerObserver(this._s,inner)))}},SwitchFirstObserver.prototype.error=function(e){this._s.o.onError(e)},SwitchFirstObserver.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._s.o.onNext(x)},InnerObserver.prototype.error=function(e){this._s.o.onError(e)},InnerObserver.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},SwitchFirstObserver}(AbstractObserver);observableProto.switchFirst=function(){return new SwitchFirstObservable(this)},observableProto.flatMapFirst=observableProto.exhaustMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchFirst()},observableProto.flatMapWithMaxConcurrent=observableProto.flatMapMaxConcurrent=function(limit,selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).merge(limit)};var VirtualTimeScheduler=Rx.VirtualTimeScheduler=function(__super__){function VirtualTimeScheduler(initialClock,comparer){this.clock=initialClock,this.comparer=comparer,this.isEnabled=!1,this.queue=new PriorityQueue(1024),__super__.call(this)}inherits(VirtualTimeScheduler,__super__);var VirtualTimeSchedulerPrototype=VirtualTimeScheduler.prototype;return VirtualTimeSchedulerPrototype.now=function(){return this.toAbsoluteTime(this.clock)},VirtualTimeSchedulerPrototype.schedule=function(state,action){return this.scheduleAbsolute(state,this.clock,action)},VirtualTimeSchedulerPrototype.scheduleFuture=function(state,dueTime,action){var dt=dueTime instanceof Date?this.toRelativeTime(dueTime-this.now()):this.toRelativeTime(dueTime);return this.scheduleRelative(state,dt,action)},VirtualTimeSchedulerPrototype.add=notImplemented,VirtualTimeSchedulerPrototype.toAbsoluteTime=notImplemented,VirtualTimeSchedulerPrototype.toRelativeTime=notImplemented,VirtualTimeSchedulerPrototype.schedulePeriodic=function(state,period,action){var s=new SchedulePeriodicRecursive(this,state,period,action);return s.start()},VirtualTimeSchedulerPrototype.scheduleRelative=function(state,dueTime,action){var runAt=this.add(this.clock,dueTime);return this.scheduleAbsolute(state,runAt,action)},VirtualTimeSchedulerPrototype.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var next=this.getNext();null!==next?(this.comparer(next.dueTime,this.clock)>0&&(this.clock=next.dueTime),next.invoke()):this.isEnabled=!1}while(this.isEnabled)}},VirtualTimeSchedulerPrototype.stop=function(){this.isEnabled=!1},VirtualTimeSchedulerPrototype.advanceTo=function(time){var dueToClock=this.comparer(this.clock,time);if(this.comparer(this.clock,time)>0)throw new ArgumentOutOfRangeError;if(0!==dueToClock&&!this.isEnabled){this.isEnabled=!0;do{var next=this.getNext();null!==next&&this.comparer(next.dueTime,time)<=0?(this.comparer(next.dueTime,this.clock)>0&&(this.clock=next.dueTime),next.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=time}},VirtualTimeSchedulerPrototype.advanceBy=function(time){var dt=this.add(this.clock,time),dueToClock=this.comparer(this.clock,dt);if(dueToClock>0)throw new ArgumentOutOfRangeError;0!==dueToClock&&this.advanceTo(dt)},VirtualTimeSchedulerPrototype.sleep=function(time){var dt=this.add(this.clock,time);if(this.comparer(this.clock,dt)>=0)throw new ArgumentOutOfRangeError;this.clock=dt},VirtualTimeSchedulerPrototype.getNext=function(){for(;this.queue.length>0;){var next=this.queue.peek();if(!next.isCancelled())return next;this.queue.dequeue()}return null},VirtualTimeSchedulerPrototype.scheduleAbsolute=function(state,dueTime,action){function run(scheduler,state1){return self.queue.remove(si),action(scheduler,state1)}var self=this,si=new ScheduledItem(this,state,run,dueTime,this.comparer);return this.queue.enqueue(si),si.disposable},VirtualTimeScheduler}(Scheduler);Rx.HistoricalScheduler=function(__super__){function HistoricalScheduler(initialClock,comparer){var clock=null==initialClock?0:initialClock,cmp=comparer||defaultSubComparer;__super__.call(this,clock,cmp)}inherits(HistoricalScheduler,__super__);var HistoricalSchedulerProto=HistoricalScheduler.prototype;return HistoricalSchedulerProto.add=function(absolute,relative){return absolute+relative},HistoricalSchedulerProto.toAbsoluteTime=function(absolute){return new Date(absolute).getTime()},HistoricalSchedulerProto.toRelativeTime=function(timeSpan){return timeSpan},HistoricalScheduler}(Rx.VirtualTimeScheduler),OnNextPredicate.prototype.equals=function(other){return other===this||null!=other&&("N"===other.kind&&this.predicate(other.value))},OnErrorPredicate.prototype.equals=function(other){return other===this||null!=other&&("E"===other.kind&&this.predicate(other.error))};var ReactiveTest=Rx.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(ticks,value){return"function"==typeof value?new Recorded(ticks,new OnNextPredicate(value)):new Recorded(ticks,Notification.createOnNext(value))},onError:function(ticks,error){return"function"==typeof error?new Recorded(ticks,new OnErrorPredicate(error)):new Recorded(ticks,Notification.createOnError(error))},onCompleted:function(ticks){return new Recorded(ticks,Notification.createOnCompleted())},subscribe:function(start,end){return new Subscription(start,end)}},Recorded=Rx.Recorded=function(time,value,comparer){this.time=time,this.value=value,this.comparer=comparer||defaultComparer};Recorded.prototype.equals=function(other){return this.time===other.time&&this.comparer(this.value,other.value)},Recorded.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Subscription=Rx.Subscription=function(start,end){this.subscribe=start,this.unsubscribe=end||Number.MAX_VALUE};Subscription.prototype.equals=function(other){return this.subscribe===other.subscribe&&this.unsubscribe===other.unsubscribe},Subscription.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var MockDisposable=Rx.MockDisposable=function(scheduler){this.scheduler=scheduler,this.disposes=[],this.disposes.push(this.scheduler.clock)};MockDisposable.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var MockObserver=function(__super__){function MockObserver(scheduler){__super__.call(this),this.scheduler=scheduler,this.messages=[]}inherits(MockObserver,__super__);var MockObserverPrototype=MockObserver.prototype;return MockObserverPrototype.onNext=function(value){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnNext(value)))},MockObserverPrototype.onError=function(e){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnError(e)))},MockObserverPrototype.onCompleted=function(){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnCompleted()))},MockObserver}(Observer);MockPromise.prototype.then=function(onResolved,onRejected){var self=this;this.subscriptions.push(new Subscription(this.scheduler.clock));var newPromise,index=this.subscriptions.length-1,observer=Rx.Observer.create(function(x){var retValue=onResolved(x);if(retValue&&"function"==typeof retValue.then)newPromise=retValue;else{var ticks=self.scheduler.clock;newPromise=new MockPromise(self.scheduler,[Rx.ReactiveTest.onNext(ticks,undefined),Rx.ReactiveTest.onCompleted(ticks)])}var idx=self.observers.indexOf(observer);self.observers.splice(idx,1),self.subscriptions[index]=new Subscription(self.subscriptions[index].subscribe,self.scheduler.clock)},function(err){onRejected(err);var idx=self.observers.indexOf(observer);self.observers.splice(idx,1),self.subscriptions[index]=new Subscription(self.subscriptions[index].subscribe,self.scheduler.clock)});return this.observers.push(observer),newPromise||new MockPromise(this.scheduler,this.messages)};var HotObservable=function(__super__){function HotObservable(scheduler,messages){__super__.call(this);var message,notification,observable=this;this.scheduler=scheduler,this.messages=messages,this.subscriptions=[],this.observers=[];for(var i=0,len=this.messages.length;i<len;i++)message=this.messages[i],notification=message.value,function(innerNotification){scheduler.scheduleAbsolute(null,message.time,function(){for(var obs=observable.observers.slice(0),j=0,jLen=obs.length;j<jLen;j++)innerNotification.accept(obs[j]);return disposableEmpty})}(notification)}return inherits(HotObservable,__super__),HotObservable.prototype._subscribe=function(o){var observable=this;this.observers.push(o),this.subscriptions.push(new Subscription(this.scheduler.clock));var index=this.subscriptions.length-1;return disposableCreate(function(){var idx=observable.observers.indexOf(o);observable.observers.splice(idx,1),observable.subscriptions[index]=new Subscription(observable.subscriptions[index].subscribe,observable.scheduler.clock)})},HotObservable}(Observable),ColdObservable=function(__super__){function ColdObservable(scheduler,messages){__super__.call(this),this.scheduler=scheduler,this.messages=messages,this.subscriptions=[]}return inherits(ColdObservable,__super__),ColdObservable.prototype._subscribe=function(o){var message,notification,observable=this;this.subscriptions.push(new Subscription(this.scheduler.clock));for(var index=this.subscriptions.length-1,d=new CompositeDisposable,i=0,len=this.messages.length;i<len;i++)message=this.messages[i],notification=message.value,function(innerNotification){d.add(observable.scheduler.scheduleRelative(null,message.time,function(){return innerNotification.accept(o),disposableEmpty}))}(notification);return disposableCreate(function(){observable.subscriptions[index]=new Subscription(observable.subscriptions[index].subscribe,observable.scheduler.clock),d.dispose()})},ColdObservable}(Observable);Rx.TestScheduler=function(__super__){function baseComparer(x,y){return x>y?1:x<y?-1:0}function TestScheduler(){__super__.call(this,0,baseComparer)}return inherits(TestScheduler,__super__),TestScheduler.prototype.scheduleAbsolute=function(state,dueTime,action){return dueTime<=this.clock&&(dueTime=this.clock+1),__super__.prototype.scheduleAbsolute.call(this,state,dueTime,action)},TestScheduler.prototype.add=function(absolute,relative){return absolute+relative},TestScheduler.prototype.toAbsoluteTime=function(absolute){return new Date(absolute).getTime()},TestScheduler.prototype.toRelativeTime=function(timeSpan){return timeSpan},TestScheduler.prototype.startScheduler=function(createFn,settings){settings||(settings={}),null==settings.created&&(settings.created=ReactiveTest.created),null==settings.subscribed&&(settings.subscribed=ReactiveTest.subscribed),null==settings.disposed&&(settings.disposed=ReactiveTest.disposed);var source,subscription,observer=this.createObserver();return this.scheduleAbsolute(null,settings.created,function(){return source=createFn(),disposableEmpty}),this.scheduleAbsolute(null,settings.subscribed,function(){return subscription=source.subscribe(observer),disposableEmpty}),this.scheduleAbsolute(null,settings.disposed,function(){return subscription.dispose(),disposableEmpty}),this.start(),observer},TestScheduler.prototype.createHotObservable=function(){var args,len=arguments.length;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}return new HotObservable(this,args)},TestScheduler.prototype.createColdObservable=function(){var args,len=arguments.length;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}return new ColdObservable(this,args)},TestScheduler.prototype.createResolvedPromise=function(ticks,value){return new MockPromise(this,[Rx.ReactiveTest.onNext(ticks,value),Rx.ReactiveTest.onCompleted(ticks)])},TestScheduler.prototype.createRejectedPromise=function(ticks,reason){return new MockPromise(this,[Rx.ReactiveTest.onError(ticks,reason)])},TestScheduler.prototype.createObserver=function(){return new MockObserver(this)},TestScheduler}(VirtualTimeScheduler);var AnonymousObservable=Rx.AnonymousObservable=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.__subscribe).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function AnonymousObservable(subscribe,parent){this.source=parent,this.__subscribe=subscribe,__super__.call(this)}return inherits(AnonymousObservable,__super__),AnonymousObservable.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},AnonymousObservable}(Observable),AutoDetachObserver=function(__super__){function AutoDetachObserver(observer){__super__.call(this),this.observer=observer,this.m=new SingleAssignmentDisposable}inherits(AutoDetachObserver,__super__);var AutoDetachObserverPrototype=AutoDetachObserver.prototype;return AutoDetachObserverPrototype.next=function(value){var result=tryCatch(this.observer.onNext).call(this.observer,value);result===errorObj&&(this.dispose(),thrower(result.e))},AutoDetachObserverPrototype.error=function(err){var result=tryCatch(this.observer.onError).call(this.observer,err);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.completed=function(){var result=tryCatch(this.observer.onCompleted).call(this.observer);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.setDisposable=function(value){this.m.setDisposable(value)},AutoDetachObserverPrototype.getDisposable=function(){return this.m.getDisposable()},AutoDetachObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.m.dispose()},AutoDetachObserver}(AbstractObserver),UnderlyingObservable=function(__super__){function UnderlyingObservable(m,u){this._m=m,this._u=u,__super__.call(this)}return inherits(UnderlyingObservable,__super__),UnderlyingObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._m.getDisposable(),this._u.subscribe(o))},UnderlyingObservable}(ObservableBase),GroupedObservable=function(__super__){function GroupedObservable(key,underlyingObservable,mergedDisposable){__super__.call(this),this.key=key,this.underlyingObservable=mergedDisposable?new UnderlyingObservable(mergedDisposable,underlyingObservable):underlyingObservable}return inherits(GroupedObservable,__super__),GroupedObservable.prototype._subscribe=function(o){return this.underlyingObservable.subscribe(o)},GroupedObservable}(Observable),Subject=Rx.Subject=function(__super__){function Subject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return inherits(Subject,__super__),addProperties(Subject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?this.hasError?(o.onError(this.error),disposableEmpty):(o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped)for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onNext(value)},dispose:function(){this.isDisposed=!0,this.observers=null}}),Subject.create=function(observer,observable){return new AnonymousSubject(observer,observable)},Subject}(Observable),AsyncSubject=Rx.AsyncSubject=function(__super__){function AsyncSubject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return inherits(AsyncSubject,__super__),addProperties(AsyncSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):this.hasValue?(o.onNext(this.value),o.onCompleted()):o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){var i,len;if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var os=cloneArray(this.observers),len=os.length;if(this.hasValue)for(i=0;i<len;i++){var o=os[i];o.onNext(this.value),o.onCompleted()}else for(i=0;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){checkDisposed(this),this.isStopped||(this.value=value,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),AsyncSubject}(Observable),BehaviorSubject=Rx.BehaviorSubject=function(__super__){function BehaviorSubject(value){__super__.call(this),this.value=value,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return inherits(BehaviorSubject,__super__),addProperties(BehaviorSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):o.onCompleted(),disposableEmpty):(this.observers.push(o),o.onNext(this.value),new InnerSubscription(this,o))},getValue:function(){return checkDisposed(this),this.hasError&&thrower(this.error),this.value},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped){this.value=value;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onNext(value)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),BehaviorSubject}(Observable),ReplaySubject=Rx.ReplaySubject=function(__super__){function createRemovableDisposable(subject,observer){return disposableCreate(function(){observer.dispose(),!subject.isDisposed&&subject.observers.splice(subject.observers.indexOf(observer),1)})}function ReplaySubject(bufferSize,windowSize,scheduler){this.bufferSize=null==bufferSize?maxSafeInteger:bufferSize,this.windowSize=null==windowSize?maxSafeInteger:windowSize,this.scheduler=scheduler||currentThreadScheduler,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,__super__.call(this)}var maxSafeInteger=Math.pow(2,53)-1;return inherits(ReplaySubject,__super__),addProperties(ReplaySubject.prototype,Observer.prototype,{_subscribe:function(o){checkDisposed(this);var so=new ScheduledObserver(this.scheduler,o),subscription=createRemovableDisposable(this,so);this._trim(this.scheduler.now()),this.observers.push(so);for(var i=0,len=this.q.length;i<len;i++)so.onNext(this.q[i].value);return this.hasError?so.onError(this.error):this.isStopped&&so.onCompleted(),so.ensureActive(),subscription},hasObservers:function(){return checkDisposed(this),this.observers.length>0},_trim:function(now){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&now-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(value){if(checkDisposed(this),!this.isStopped){var now=this.scheduler.now();this.q.push({interval:now,value:value}),this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onNext(value),observer.ensureActive()}}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onError(error),observer.ensureActive()}this.observers.length=0}},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onCompleted(),observer.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),ReplaySubject}(Observable),AnonymousSubject=Rx.AnonymousSubject=function(__super__){function AnonymousSubject(observer,observable){this.observer=observer,this.observable=observable,__super__.call(this)}return inherits(AnonymousSubject,__super__),addProperties(AnonymousSubject.prototype,Observer.prototype,{_subscribe:function(o){return this.observable.subscribe(o)},onCompleted:function(){this.observer.onCompleted()},onError:function(error){this.observer.onError(error)},onNext:function(value){this.observer.onNext(value)}}),AnonymousSubject}(Observable);Rx.Pauser=function(__super__){function Pauser(){__super__.call(this)}return inherits(Pauser,__super__),Pauser.prototype.pause=function(){this.onNext(!1)},Pauser.prototype.resume=function(){this.onNext(!0)},Pauser}(Subject),root.Rx=Rx,__WEBPACK_AMD_DEFINE_RESULT__=function(){return Rx}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));var rEndingLine=captureLine()}).call(this)}).call(exports,__webpack_require__(2)(module),function(){return this}(),__webpack_require__(4))},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){function exception(err){return err}function isEnum(obj){return null!=obj&&obj.constructor==stjs.enumEntry}function Downloader(){this.isActive=!1,this.realtime=!1,this.chunkStart=0,this.chunkSize=0,this.totalLength=0,this.chunkTimeout=1e3,this.url=null,this.callback=null,this.eof=!1,this.setDownloadTimeoutCallback=null,this.withCredentials=!1}var stjs={};stjs.NOT_IMPLEMENTED=function(){throw"This method is not implemented in Javascript."},stjs.JavalikeEquals=function(value){return null!=value&&(value.valueOf?this.valueOf()===value.valueOf():this===value)},stjs.JavalikeGetClass=function(){return this.constructor},String.prototype.equals||(String.prototype.equals=stjs.JavalikeEquals),String.prototype.getBytes||(String.prototype.getBytes=stjs.NOT_IMPLEMENTED),String.prototype.getChars||(String.prototype.getChars=stjs.NOT_IMPLEMENTED),String.prototype.contentEquals||(String.prototype.contentEquals=stjs.NOT_IMPLEMENTED),String.prototype.startsWith||(String.prototype.startsWith=function(start,from){var f=null!=from?from:0;return this.substring(f,f+start.length)==start}),String.prototype.endsWith||(String.prototype.endsWith=function(end){return null!=end&&(!(this.length<end.length)&&this.substring(this.length-end.length,this.length)==end)}),String.prototype.trim||(stjs.trimLeftRegExp=/^\s+/,stjs.trimRightRegExp=/\s+$/,String.prototype.trim=function(){return this.replace(stjs.trimLeftRegExp,"").replace(stjs.trimRightRegExp,"")}),String.prototype.matches||(String.prototype.matches=function(regexp){return null!=this.match("^"+regexp+"$")}),String.prototype.compareTo||(String.prototype.compareTo=function(other){return null==other?1:this<other?-1:this==other?0:1}),String.prototype.compareToIgnoreCase||(String.prototype.compareToIgnoreCase=function(other){return null==other?1:this.toLowerCase().compareTo(other.toLowerCase())}),String.prototype.equalsIgnoreCase||(String.prototype.equalsIgnoreCase=function(other){return null!=other&&this.toLowerCase()===other.toLowerCase()}),String.prototype.codePointAt||(String.prototype.codePointAt=String.prototype.charCodeAt),String.prototype.codePointBefore||(String.prototype.codePointBefore=stjs.NOT_IMPLEMENTED),String.prototype.codePointCount||(String.prototype.codePointCount=stjs.NOT_IMPLEMENTED),String.prototype.replaceAll||(String.prototype.replaceAll=function(regexp,replace){return this.replace(new RegExp(regexp,"g"),replace)}),String.prototype.replaceFirst||(String.prototype.replaceFirst=function(regexp,replace){return this.replace(new RegExp(regexp),replace)}),String.prototype.regionMatches||(String.prototype.regionMatches=function(ignoreCase,toffset,other,ooffset,len){if(4==arguments.length&&(len=arguments[3],ooffset=arguments[2],other=arguments[1],toffset=arguments[0],ignoreCase=!1),toffset<0||ooffset<0||null==other||toffset+len>this.length||ooffset+len>other.length)return!1;var s1=this.substring(toffset,toffset+len),s2=other.substring(ooffset,ooffset+len);return ignoreCase?s1.equalsIgnoreCase(s2):s1===s2}),String.prototype.contains||(String.prototype.contains=function(it){return this.indexOf(it)>=0}),String.prototype.getClass||(String.prototype.getClass=stjs.JavalikeGetClass),String.valueOf=function(value){return new String(value)};var Byte=Number,Double=Number,Float=Number,Integer=Number,Long=Number,Short=Number;Number.prototype.intValue||(Number.prototype.intValue=function(){return parseInt(this)}),Number.prototype.shortValue||(Number.prototype.shortValue=function(){return parseInt(this)}),Number.prototype.longValue||(Number.prototype.longValue=function(){return parseInt(this)}),Number.prototype.byteValue||(Number.prototype.byteValue=function(){return parseInt(this)}),Number.prototype.floatValue||(Number.prototype.floatValue=function(){return parseFloat(this)}),Number.prototype.doubleValue||(Number.prototype.doubleValue=function(){return parseFloat(this)}),Number.parseInt||(Number.parseInt=parseInt),Number.parseShort||(Number.parseShort=parseInt),Number.parseLong||(Number.parseLong=parseInt),Number.parseByte||(Number.parseByte=parseInt),Number.parseDouble||(Number.parseDouble=parseFloat),Number.parseFloat||(Number.parseFloat=parseFloat),Number.isNaN||(Number.isNaN=isNaN),Number.prototype.isNaN||(Number.prototype.isNaN=function(){return isNaN(this)}),Number.prototype.equals||(Number.prototype.equals=stjs.JavalikeEquals),Number.prototype.getClass||(Number.prototype.getClass=stjs.JavalikeGetClass),Number.valueOf=function(value){return new Number(value).valueOf()},Boolean.prototype.equals||(Boolean.prototype.equals=stjs.JavalikeEquals),Boolean.prototype.getClass||(Boolean.prototype.getClass=stjs.JavalikeGetClass),Boolean.valueOf=function(value){return new Boolean(value).valueOf()},stjs.global=this,stjs.skipCopy={prototype:!0,constructor:!0,$typeDescription:!0,$inherit:!0},stjs.ns=function(path){for(var p=path.split("."),obj=stjs.global,i=0;i<p.length;++i){var part=p[i];obj=obj[part]=obj[part]||{}}return obj},stjs.copyProps=function(from,to){for(var key in from)stjs.skipCopy[key]||(to[key]=from[key]);return to},stjs.copyInexistentProps=function(from,to){for(var key in from)stjs.skipCopy[key]||to[key]||(to[key]=from[key]);return to},stjs.extend=function(_constructor,_super,_implements,_initializer,_typeDescription,_annotations){if("object"!=typeof _typeDescription)return stjs.extend12.apply(this,arguments);if(_constructor.$inherit=[],null!=_super){var I=function(){};I.prototype=_super.prototype,_constructor.prototype=new I,stjs.copyProps(_super,_constructor),stjs.copyProps(_super.$typeDescription,_typeDescription),stjs.copyProps(_super.$annotations,_annotations),_constructor.$inherit.push(_super)}for(var a=0;a<_implements.length;++a)_implements[a]&&(stjs.copyProps(_implements[a],_constructor),
stjs.copyInexistentProps(_implements[a].prototype,_constructor.prototype),_constructor.$inherit.push(_implements[a]));return _constructor.prototype.constructor=_constructor,null!=_initializer&&_initializer(_constructor,_constructor.prototype),_constructor.$typeDescription=_typeDescription,_constructor.$annotations=_annotations,null==_super&&(_constructor.prototype.equals||(_constructor.prototype.equals=stjs.JavalikeEquals),_constructor.prototype.getClass||(_constructor.prototype.getClass=stjs.JavalikeGetClass)),_constructor},stjs.extend12=function(_constructor,_super,_implements){var I=function(){};I.prototype=_super.prototype,_constructor.prototype=new I;for(var a=1;a<arguments.length;++a)stjs.copyProps(arguments[a],_constructor);return _constructor.prototype.constructor=_constructor,null==_super&&(_constructor.prototype.equals=stjs.JavalikeEquals,_constructor.prototype.getClass=stjs.JavalikeGetClass),_constructor},stjs.getAnnotations=function(clz){return clz.$annotations},stjs.getTypeAnnotation=function(clz,annType){var ann=clz.$annotations._;return ann?ann[annType]:null},stjs.getMemberAnnotation=function(clz,memberName,annType){var ann=clz.$annotations.memberName;return ann?ann[annType]:null},stjs.getParameterAnnotation=function(clz,methodName,idx,annType){var ann=clz.$annotations[methodName+"$"+idx];return ann?ann[annType]:null},stjs.isInstanceOf=function(child,parent){if(null==child)return!1;if(child===parent)return!0;if(!child.$inherit)return!1;for(var i=0;i<child.$inherit.length;++i)if(stjs.isInstanceOf(child.$inherit[i],parent))return!0;return!1},stjs.enumEntry=function(idx,name){this._name=name,this._ordinal=idx},stjs.enumEntry.prototype.name=function(){return this._name},stjs.enumEntry.prototype.ordinal=function(){return this._ordinal},stjs.enumEntry.prototype.toString=function(){return this._name},stjs.enumEntry.prototype.equals=stjs.JavalikeEquals,stjs.enumeration=function(){var i,e={};for(e._values=[],i=0;i<arguments.length;++i)e[arguments[i]]=new stjs.enumEntry(i,arguments[i]),e._values[i]=e[arguments[i]];return e.values=function(){return this._values},e.valueOf=function(label){return this[label]},e},stjs.mainCallDisabled=!1,stjs.exception=function(err){return err},stjs.isEnum=function(obj){return null!=obj&&obj.constructor==stjs.enumEntry},"function"==typeof Math.trunc?stjs.trunc=Math.trunc:stjs.trunc=function(n){return null==n?null:n>=0?Math.floor(n):Math.ceil(n)},stjs.converters={Date:function(s,type){var a=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)$/.exec(s);return a?new Date((+a[1]),+a[2]-1,(+a[3]),(+a[4]),(+a[5]),(+a[6])):null},Enum:function(s,type){return eval(type.arguments[0])[s]}},stjs.serializers={Date:function(d,type){function pad(n){return n<10?"0"+n:""+n}return d?""+d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())+" "+pad(d.getHours())+":"+pad(d.getMinutes())+":"+pad(d.getSeconds()):null},Enum:function(e,type){return null!=e?e.toString():null}},stjs.bind=function(obj,method,thisParamPos){var useFirstParamAsContext=!1;null==method&&(method=obj,obj=null,useFirstParamAsContext=!0);var addThisToParameters=null!=thisParamPos,f=function(){var args=arguments;return addThisToParameters&&Array.prototype.splice.call(args,thisParamPos,0,this),useFirstParamAsContext&&(obj=Array.prototype.shift.call(args)),"string"==typeof method?obj[method].apply(obj,args):method.apply(obj,args)};return f},stjs.parseJSON=function(){function unescapeOne(_,ch,hex){return ch?escapes[ch]:String.fromCharCode(parseInt(hex,16))}function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function convert(type,json){if(!type)return json;var cv=stjs.converters[type.name||type];return cv?cv(json,type):constr(type,json)}function builder(type){return type?"function"==typeof type?new type:type.name?"Map"==type.name?{}:"Array"==type.name?[]:constr(type.name):constr(type):{}}function nextMatch(str){var m=jsonToken.exec(str);return null!=m?m[0]:null}var number="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",oneChar='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',string='(?:"'+oneChar+'*")',jsonToken=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+number+"|"+string+")","g"),escapeSequence=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),escapes={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},constructors={},EMPTY_STRING=new String(""),SLASH="\\",firstTokenCtors={"{":Object,"[":Array},hop=Object.hasOwnProperty;return function(json,type){var result,tok=nextMatch(json),topLevelPrimitive=!1;"{"===tok?result=builder(type,null):"["===tok?result=[]:(result=[],topLevelPrimitive=!0);var key,stack=[result],stack2=[type];for(tok=nextMatch(json);null!=tok;tok=nextMatch(json)){var cont;switch(tok.charCodeAt(0)){default:cont=stack[0],cont[key||cont.length]=+tok,key=void 0;break;case 34:if(tok=tok.substring(1,tok.length-1),tok.indexOf(SLASH)!==-1&&(tok=tok.replace(escapeSequence,unescapeOne)),cont=stack[0],!key){if(!(cont instanceof Array)){key=tok||EMPTY_STRING,stack2[0]=cont.constructor.$typeDescription?cont.constructor.$typeDescription[key]:stack2[1].arguments[1];break}key=cont.length}cont[key]=convert(stack2[0],tok),key=void 0;break;case 91:cont=stack[0],stack.unshift(cont[key||cont.length]=[]),stack2.unshift(stack2[0].arguments[0]),key=void 0;break;case 93:stack.shift(),stack2.shift();break;case 102:cont=stack[0],cont[key||cont.length]=!1,key=void 0;break;case 110:cont=stack[0],cont[key||cont.length]=null,key=void 0;break;case 116:cont=stack[0],cont[key||cont.length]=!0,key=void 0;break;case 123:cont=stack[0],stack.unshift(cont[key||cont.length]=builder(stack2[0])),stack2.unshift(null),key=void 0;break;case 125:stack.shift(),stack2.shift()}}if(topLevelPrimitive){if(1!==stack.length)throw new Error;result=result[0]}else if(stack.length)throw new Error;return result}}(),stjs.isArray=function(obj){return"[object Array]"===stjs.toString.call(obj)},stjs.typefy=function(obj,cls){function constr(name,param){var c=constructors[name];return c||(constructors[name]=c=eval(name)),new c(param)}function elementType(type){return"function"==typeof type?type:type.arguments?eval(type.arguments[0]):"string"==typeof type?eval(type):Object}function convert(type,json){if(!type)return json;var cv=stjs.converters[type.name||type];return cv?cv(json,type):constr(type,json)}function builder(type){return type?"function"==typeof type?new type:type.name?"Map"==type.name?{}:"Array"==type.name?[]:constr(type.name):constr(type):{}}if(stjs.isArray(obj)){for(var result=[],idx=0;idx<obj.length;idx++)result.push(stjs.typefy(obj[idx],elementType(cls)));return result}var constructors={};if(null==obj)return null;var ret=new cls;for(var key in obj){var prop=obj[key];if(null!=prop){var td=cls.$typeDescription[key];td?"string"==typeof prop?ret[key]=convert(td,prop):"object"==typeof prop&&("string"==typeof td&&(td=eval(td)),ret[key]=stjs.typefy(prop,td)):ret[key]=prop}}return ret},stjs.hydrate=stjs.typefy,stjs.stringify=function(obj,cls){if(null==obj)return null;var ret={};for(var key in obj){var td=cls.$typeDescription[key],prop=obj[key],ser=null!=td?stjs.serializers[td.name||td]:null;"function"!=typeof prop&&(td&&ser?"string"!=typeof prop&&(ser?ret[key]=ser(prop,td):ret[key]=stjs.typefy(prop,td)):ret[key]=prop)}return ret},stjs.assertHandler=function(position,code,msg){throw msg+" at "+position},stjs.STJSAssert={},stjs.STJSAssert.setAssertHandler=function(a){stjs.assertHandler=a},stjs.STJSAssert.assertArgEquals=function(position,code,expectedValue,testValue){expectedValue!=testValue&&stjs.assertHandler&&stjs.assertHandler(position,code,"Wrong argument. Expected: "+expectedValue+", got:"+testValue)},stjs.STJSAssert.assertArgNotNull=function(position,code,testValue){null==testValue&&stjs.assertHandler&&stjs.assertHandler(position,code,"Wrong argument. Null value")},stjs.STJSAssert.assertArgTrue=function(position,code,condition){!condition&&stjs.assertHandler&&stjs.assertHandler(position,code,"Wrong argument. Condition is false")},stjs.STJSAssert.assertStateEquals=function(position,code,expectedValue,testValue){expectedValue!=testValue&&stjs.assertHandler&&stjs.assertHandler(position,code,"Wrong state. Expected: "+expectedValue+", got:"+testValue)},stjs.STJSAssert.assertStateNotNull=function(position,code,testValue){null==testValue&&stjs.assertHandler&&stjs.assertHandler(position,code,"Wrong state. Null value")},stjs.STJSAssert.assertStateTrue=function(position,code,condition){!condition&&stjs.assertHandler&&stjs.assertHandler(position,code,"Wrong state. Condition is false")};var Throwable=function(message,cause){if(Error.call(this),"function"==typeof Error.captureStackTrace)Error.captureStackTrace(this,arguments.callee);else try{throw new Error}catch(e){this.stack=e.stack}"string"==typeof message?(this.detailMessage=message,this.message=message,this.cause=cause):this.cause=message};stjs.extend(Throwable,Error,[],function(constructor,prototype){prototype.detailMessage=null,prototype.cause=null,prototype.getMessage=function(){return this.detailMessage},prototype.getLocalizedMessage=function(){return this.getMessage()},prototype.getCause=function(){return this.cause==this?null:this.cause},prototype.toString=function(){var s="Exception",message=this.getLocalizedMessage();return null!=message?s+": "+message:s},prototype.getStackTrace=function(){return this.stack},prototype.printStackTrace=function(){console.error(this.getStackTrace())}},{});var Exception=function(message,cause){Throwable.call(this,message,cause)};stjs.extend(Exception,Throwable,[],function(constructor,prototype){},{});var RuntimeException=function(message,cause){Exception.call(this,message,cause)};stjs.extend(RuntimeException,Exception,[],function(constructor,prototype){},{});var Iterator=function(){};Iterator=stjs.extend(Iterator,null,[],function(constructor,prototype){prototype.hasNext=function(){},prototype.next=function(){},prototype.remove=function(){}},{},{});var Iterable=function(){};Iterable=stjs.extend(Iterable,null,[],function(constructor,prototype){prototype.iterator=function(){}},{},{}),stjs.setField=function(obj,field,value,returnOldValue){if(stjs.setFieldHandler)return stjs.setFieldHandler(obj,field,value,returnOldValue);var toReturn=returnOldValue?obj[field]:value;return obj[field]=value,toReturn},stjs.getField=function(obj,field){return stjs.getFieldHandler?stjs.getFieldHandler(obj,field):obj[field]};var Decoder=__webpack_require__(6),MovDasher=__webpack_require__(7),Rx=__webpack_require__(3),_mp4box=__webpack_require__(8),DataStream=_mp4box.DataStream,BoxParser=_mp4box.BoxParser,ISOFile=_mp4box.ISOFile,MP4Box=_mp4box.MP4Box,Extend={};Extend.extend=function(parent,childContructor){var child=function(){parent.apply(this,arguments),childContructor.apply(this,arguments)};return child.prototype=Object.create(parent.prototype),child.prototype.constructor=childContructor,child};var FrameExtractor=function(url,http,log){this.url=url||"",this.http=http,this.log=log};FrameExtractor.prototype.init=function(callback){this.mp4box=new MP4Box((!1)),this.downloader=new Downloader,this.samples=[],this.chunkSize=1048576,this.maintrack=1,this.nextStart=0;var self=this;this.moovLoaded=!1,this.mp4box.onReady=function(){self.log.debug("moov processed"),self.moovLoaded=!0,self.mp4box.flush(),self.maintrack=self.mp4box.getInfo().tracks[0].id,self.samples=self.mp4box.getTrackSamplesInfo(self.maintrack);var stss=self.mp4box.inputIsoFile.moov.traks[0].mdia.minf.stbl.stss;if(stss){self.iframes=new Array(stss.sample_numbers.length);for(var i=0;i<stss.sample_numbers.length;i++)self.iframes[i]=stss.sample_numbers[i]-1}self.downloader.stop(),callback&&callback(self.getInfo())},this.frameData=[],this.downloader.setCallback(function(response,end,error){if(response){var nextfilestart=self.mp4box.appendBuffer(response);self.downloader.setChunkSize(self.chunkSize),self.mp4box.inputIsoFile.hasIncompleteMdat()&&!self.moovLoaded?(self.skippingMdat=!0,self.nextStart+=nextfilestart):self.nextStart+=self.chunkSize}self.downloader.setChunkStart(self.nextStart)}),this.downloader.setInterval(10),this.downloader.setChunkSize(131072),this.downloader.setUrl(Utils.addQueryParams(this.url,this.http.queryParams)),this.downloader.setWithCredentials(this.http.withCredentials),this.downloader.start()},FrameExtractor.prototype.getRange=function(start,size){return this.http.getArrayBufferRange(this.url,start,start+size+1).map(function(buffer){return buffer.fileStart=start,buffer.fileStart||(buffer=buffer.slice(0),buffer.fileStart=start),buffer})},FrameExtractor.prototype.getPrevIframe=function(fn){for(var i=0;i<this.iframes.length;i++)if(this.iframes[i]<=fn&&fn<this.iframes[i+1])return this.iframes[i];return this.iframes[this.iframes.length-1]},FrameExtractor.prototype.saveNALUnits=function(bytes,sampleId){for(var offset=0,end=this.getFrameSize(sampleId),nalUnits=[];end-offset>0;){var length=new DataView(bytes.buffer,offset).getUint32(0);nalUnits.push(bytes.subarray(offset+4,offset+length+4)),offset=offset+length+4}this.frameData[sampleId]=nalUnits},FrameExtractor.prototype.loadFrameData=function(frameId){if(this.moovLoaded){var self=this;if(frameId>=this.samples.length)return Rx.Observable.just(frameId);if(this.iframes){for(var prevIframe=this.getPrevIframe(frameId),framesToParse=[],rangeLength=0,dataStored=!0,startOffset=this.getFrameOffset(prevIframe),fId=prevIframe;fId<=frameId;fId++){var framesize=this.getFrameSize(fId);framesToParse.push({rangeFrameOffset:this.getFrameOffset(fId)-startOffset,size:framesize,id:fId}),rangeLength+=framesize,this.frameData[fId]||(dataStored=!1)}return dataStored?Rx.Observable.just(frameId):this.getRange(startOffset,rangeLength).doOnNext(function(buffer){for(var framesData=new Uint8Array(buffer),i=0;i<framesToParse.length;i++)self.saveNALUnits(framesData.subarray(framesToParse[i].rangeFrameOffset,framesToParse[i].rangeFrameOffset+framesToParse[i].size),framesToParse[i].id)}).map(function(x){return frameId})}return this.frameData[frameId]?Rx.Observable.just(frameId):this.getRange(this.getFrameOffset(frameId),this.getFrameSize(frameId)).doOnNext(function(buffer){self.saveNALUnits(new Uint8Array(buffer),frameId)}).map(function(x){return frameId})}return this.log.error("moov is not loaded"),Rx.Observable["throw"]("moov is not loaded")},FrameExtractor.prototype.getFrameOffset=function(framenumber){return this.samples[framenumber].offset},FrameExtractor.prototype.getFrameSize=function(framenumber){return this.samples[framenumber].size},FrameExtractor.prototype.getInfo=function(){var video=this.mp4box.inputIsoFile.moov.traks[0];return{width:video.tkhd.width>>16,height:video.tkhd.height>>16,framesTotal:this.samples.length}},FrameExtractor.prototype.getAvcC=function(){return MovDasher.getAvcC(this.mp4box)},Downloader.prototype.setDownloadTimeoutCallback=function(callback){return this.setDownloadTimeoutCallback=callback,this},Downloader.prototype.reset=function(){return this.chunkStart=0,this.totalLength=0,this.eof=!1,this},Downloader.prototype.setRealTime=function(_realtime){return this.realtime=_realtime,this},Downloader.prototype.setChunkSize=function(_size){return this.chunkSize=_size,this},Downloader.prototype.setChunkStart=function(_start){return this.chunkStart=_start,this.eof=!1,this},Downloader.prototype.setInterval=function(_timeout){return this.chunkTimeout=_timeout,this},Downloader.prototype.setUrl=function(_url){return this.url=_url,this},Downloader.prototype.setWithCredentials=function(b){return this.withCredentials=!!b,this},Downloader.prototype.setCallback=function(_callback){return this.callback=_callback,this},Downloader.prototype.isStopped=function(){return!this.isActive},Downloader.prototype.getFileLength=function(){return this.totalLength},Downloader.prototype.getFile=function(){var dl=this;if(dl.totalLength&&this.chunkStart>=dl.totalLength&&(dl.eof=!0),dl.eof===!0)return void this.callback(null,!0);var xhr=new XMLHttpRequest;xhr.open("GET",this.url,!0),xhr.responseType="arraybuffer";var range=null;xhr.start=this.chunkStart;var maxRange;this.chunkStart+this.chunkSize<1/0&&(range="bytes="+this.chunkStart+"-",maxRange=this.chunkStart+this.chunkSize-1,range+=maxRange,xhr.setRequestHeader("Range",range)),xhr.onerror=function(e){dl.callback(null,!1,!0)},xhr.onreadystatechange=function(e){if((200==xhr.status||206==xhr.status||304==xhr.status||416==xhr.status)&&xhr.readyState==this.DONE){var rangeReceived=xhr.getResponseHeader("Content-Range");if(!dl.totalLength&&rangeReceived){var sizeIndex;sizeIndex=rangeReceived.indexOf("/"),sizeIndex>-1&&(dl.totalLength=+rangeReceived.slice(sizeIndex+1))}dl.eof=xhr.response.byteLength!==dl.chunkSize||xhr.response.byteLength===dl.totalLength;var buffer=xhr.response;if(buffer.fileStart=xhr.start,buffer.fileStart||(buffer=buffer.slice(0),buffer.fileStart=xhr.start),dl.callback(buffer,dl.eof),dl.isActive===!0&&dl.eof===!1){var timeoutDuration=0;timeoutDuration=dl.realtime?computeWaitingTimeFromBuffer(video):dl.chunkTimeout,dl.setDownloadTimeoutCallback&&dl.setDownloadTimeoutCallback(timeoutDuration),dl.timeoutID=window.setTimeout(dl.getFile.bind(dl),timeoutDuration)}else dl.isActive=!1}},dl.isActive&&xhr.send()},Downloader.prototype.start=function(){return this.chunkStart=0,this.resume(),this},Downloader.prototype.resume=function(){return this.isActive=!0,0===this.chunkSize&&(this.chunkSize=1/0),this.getFile(),this},Downloader.prototype.stop=function(){return this.isActive=!1,this.timeoutID&&(window.clearTimeout(this.timeoutID),delete this.timeoutID),this},function(e){e.closest=e.closest||function closest(css){return this.parentNode?this.matches(css)?this:closest.call(this.parentNode,css):null}}(Element.prototype),Array.prototype.fill||(Array.prototype.fill=function(value){if(null==this)throw new TypeError("this is null or not defined");for(var O=Object(this),len=O.length>>>0,start=arguments[1],relativeStart=start>>0,k=relativeStart<0?Math.max(len+relativeStart,0):Math.min(relativeStart,len),end=arguments[2],relativeEnd=void 0===end?len:end>>0,final=relativeEnd<0?Math.max(len+relativeEnd,0):Math.min(relativeEnd,len);k<final;)O[k]=value,k++;return O}),Array.prototype.find||(Array.prototype.find=function(predicate){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value}),Array.prototype.reduce||(Array.prototype.reduce=function(callback){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof callback)throw new TypeError(callback+" is not a function");var value,t=Object(this),len=t.length>>>0,k=0;if(2==arguments.length)value=arguments[1];else{for(;k<len&&!(k in t);)k++;if(k>=len)throw new TypeError("Reduce of empty array with no initial value");value=t[k++]}for(;k<len;k++)k in t&&(value=callback(value,t[k],k,t));return value});var VideoSrc=function(){};VideoSrc=stjs.extend(VideoSrc,null,[],function(constructor,prototype){constructor.VIDEO_ONLY=0,constructor.VIDEO_AUDIO=1,prototype.detach=function(){},prototype.attach=function(video){},prototype.canSetAudioWithoutReattach=function(audio){},prototype.setAudio=function(audio){},prototype.clearAudioBuffer=function(){}},{},{});var Timeline=function(){};Timeline=stjs.extend(Timeline,null,[],function(constructor,prototype){constructor.UNKNOWN=null,prototype.getTimeScale=function(){},prototype.getFrameCount=function(){},prototype.getTvBySec=function(sec){},prototype.getLastFrame=function(){},prototype.getLastTv=function(){},prototype.getTvByTimecode=function(timecode){},prototype.getTvByFrame=function(fn){},prototype.getFrameByTv=function(tv){},prototype.getFrameBySec=function(sec){},prototype.getFrameByTimecode=function(tc){},prototype.getFrameByMillis=function(time){},prototype.floorTv=function(tv){},prototype.boundsFn=function(fn){},prototype.getSecByFrame=function(fn){},prototype.getSecByTv=function(tv){},prototype.getMillisByTv=function(tv){},prototype.getTapeByTv=function(tv){},prototype.getTapeByFrame=function(fn){},prototype.getTapeBySec=function(time){},prototype.getTapeTimecode=function(){},prototype.getDurationSec=function(){},prototype.getSeekableDurationSec=function(){},prototype.setSeekableDurationSec=function(durationSec){},prototype.getUpdateRx=function(){}},{UNKNOWN:"Timeline"},{});var AudioInfo=function(){};AudioInfo=stjs.extend(AudioInfo,null,[],function(constructor,prototype){constructor.AAC_CHANNEL_CONFIGS=[null,["FrontCenter"],["FrontLeft","FrontRight"],["FrontCenter","FrontLeft","FrontRight"],["FrontCenter","FrontLeft","FrontRight","BackCenter"],["FrontCenter","FrontLeft","FrontRight","BackLeft","BackRight"],["FrontCenter","FrontLeft","FrontRight","BackLeft","BackRight","LFE"],["FrontCenter","FrontLeft","FrontRight","SideLeft","SideRight","BackLeft","BackRight","LFE"]],prototype.audioType=null,prototype.channelCount=0,prototype.channelLabels=null,prototype.sampleRate=0,prototype.totalSamples=0,prototype.waveformPreviews=null},{AAC_CHANNEL_CONFIGS:{name:"Array",arguments:[{name:"Array",arguments:[null]}]},channelLabels:{name:"Array",arguments:[null]},waveformPreviews:{name:"Array",arguments:[null]}},{});var Utils=function(){};Utils=stjs.extend(Utils,null,[],function(constructor,prototype){constructor.match=function(str,regex){var match=str.match(new RegExp(regex,"i"));return null!=match&&match.length>0},constructor.timestampToHHmmSS=function(dt){var hours=stjs.trunc(dt.getUTCHours()),mins=stjs.trunc(dt.getUTCMinutes()),sec=stjs.trunc(dt.getUTCSeconds());return Utils.zeroPad2(hours)+":"+Utils.zeroPad2(mins)+":"+Utils.zeroPad2(sec)},constructor.timestampToHHmmSSmsec=function(dt){var msec=Utils.zeroPad(stjs.trunc(dt.getUTCMilliseconds()),3);return Utils.timestampToHHmmSS(dt)+"."+msec},constructor.isString=function(anything){return"string".equals(typeof anything)},constructor.isNumber=function(anything){return"number".equals(typeof anything)},constructor.isNormalNumber=function(anything){return Utils.isNumber(anything)&&isFinite(anything)},constructor.isSomething=function(anything){return Boolean(anything)},constructor.isObject=function(anything){return"object".equals(typeof anything)},constructor.findWhere=function(array,predicate){for(var i=0;i<array.length;i++){var item=array[i];if(predicate(item))return item}return null},constructor.toInt=function(anything){return Utils.isString(anything)?Integer.parseInt(Utils.defaultString(anything,"0")):parseInt(anything)},constructor.toDouble=function(anything){return Utils.isString(anything)?parseFloat(Utils.defaultString(anything,"0")):parseFloat(anything)},constructor.isPropertyDefined=function(o,property){return!"undefined".equals(typeof o[property])},constructor.removeFromList=function(a,item){var indexOf=a.indexOf(item);return indexOf>=0&&(a.splice(indexOf,1),!0)},constructor.userAgentContains=function(str){return null!=window&&Utils.match(window.navigator.userAgent,str)},constructor.isChrome=Utils.userAgentContains("chrome"),constructor.isFirefox=Utils.userAgentContains("firefox"),constructor.isSafari=Utils.userAgentContains("safari")&&!Utils.userAgentContains("chrome"),constructor.isMobileSafari=Utils.isSafari&&Utils.userAgentContains("mobile"),constructor.constructorName=function(obj){return obj.constructor.name},constructor.defaultObject=function(obj,defaultValue){return obj||defaultValue},constructor.convertTv=function(srcTv,srcTs,dstTs){return stjs.trunc(srcTv*dstTs/srcTs)},constructor.binarySearch0=function(a,key){for(var low=0,high=a.length-1;low<=high;){var mid=low+high>>>1,midVal=a[mid];if(midVal<key)low=mid+1;else{if(!(midVal>key))return mid;high=mid-1}}return-(low+1)},constructor.binarySearch1=function(a,key){var idx=Utils.binarySearch0(a,key);return idx>=0?idx:(idx+=1,idx=-idx,0==idx?0:idx>=a.length?a.length-1:idx-1)},constructor.min=function(array){for(var min=Integer.MAX_VALUE,i=0;i<array.length;i++)min=Math.min(min,array[i]);return stjs.trunc(min)},constructor.hms=function(sec){return Utils.hhmmss(stjs.trunc(1e3*sec))},constructor.hhmmss=function(timestamp){var dt=new Date(timestamp);return Utils.timestampToHHmmSS(dt)},constructor.hhmmssms=function(timestamp){var dt=new Date(timestamp);return Utils.timestampToHHmmSSmsec(dt)},constructor.toDuration=function(time){var t=Math.abs(time);return t<1e3?Math.round(time)+" msec":t<6e4?Math.round(stjs.trunc(time/1e3))+" sec":Math.round(stjs.trunc(stjs.trunc(time/1e3)/60))+" mins"},constructor.zeroPad=function(n,width){var z="0",_n=n+"";return _n.length>=width?_n:new Array(width-_n.length+1).join(z)+_n},constructor.zeroPad2=function(n){var _n=n+"";return _n.length<2?"0"+_n:_n},constructor.hmsf=function(h,m,s,f){return Utils.zeroPad2(h)+":"+Utils.zeroPad2(m)+":"+Utils.zeroPad2(s)+":"+Utils.zeroPad2(f)},constructor.currentTimeMillis=function(){return stjs.trunc((new Date).getTime())},constructor.defaultString=function(string,defaultString){return null!=string&&Utils.isString(string)&&!"".equals(string)?string:defaultString},constructor.isEmpty=function(string){return null==string||"".equals(string)},constructor.isNotEmpty=function(string){return null!=string&&!"".equals(string)},constructor.isBlank=function(string){return null==string||"".equals(string)||string.matches("\\s+")},constructor.isNotBlank=function(str){return null!=str&&!"".equals(str)&&!str.matches("\\s+")},constructor.contains=function(array,s){return array.indexOf(s)>-1},constructor.includes=function(haystack,needle){return Utils.defaultString(haystack,"").indexOf(needle)>=0},constructor.filter=function(array,predicate){for(var filtered=new Array,i=0;i<array.length;i++){var item=array[i],ok=predicate(item);ok&&filtered.push(item)}return filtered},constructor.isDigit=function(str){return!isNaN(parseFloat(str))},constructor.replaceAt=function(_this,index,character){return _this.substring(0,index)+character+_this.substring(index+character.length)},constructor.addMethod=function(o,methodName,func){o[methodName]=func},constructor.addField=function(o,fieldName,val){o[fieldName]=val},constructor.callMethod=function(o,methodName){var func=o[methodName];return func()},constructor.toBoolean=function(anything){return Boolean(anything)},constructor.binarySearch=function(a,comparator){for(var low=0,high=a.length-1;low<=high;){var mid=low+high>>>1,midVal=a[mid],c=comparator(midVal);if(c<0)low=mid+1;else{if(!(c>0))return mid;high=mid-1}}var floor=low-1;return-floor-1},constructor.binarySearchFloor=function(a,comparator){var idx=Utils.binarySearch(a,comparator);return idx<0&&(idx+=1,idx=-idx),idx},constructor.isFullScreen=function(){return null!=window.document.fullscreenElement||null!=window.document.webkitFullscreenElement||null!=window.document.mozFullscreenElement||window.document.mozFullScreen||window.document.webkitIsFullScreen||Utils.isPropertyDefined(window.document,"msFullscreenElement")},constructor.fullScreenElement=function(document){return document.msFullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.fullscreenElement},constructor.map=function(map,func){var result=[];for(var k in map){var item=map[k];result.push(func(k,item))}return result},constructor.mapValues=function(map){var result=[];for(var k in map){var item=map[k];result.push(item)}return result},constructor.filterMapValues=function(map,predicate){var result=[];for(var k in map){var item=map[k];predicate(item,k)&&result.push(item)}return result},constructor.filterMap=function(map,predicate){var result={};for(var k in map){var item=map[k];predicate(item,k)&&(result[k]=item)}return result},constructor.jdb=function(){},constructor.newUUIDString=function(){var d1=stjs.trunc(1e4*Math.abs(Math.random())),d0=stjs.trunc(1e4*Math.abs(Math.random())),d2=stjs.trunc(1e4*Math.abs(Math.random())),d3=stjs.trunc(1e4*Math.abs(Math.random()));return d0+"-"+d1+"-"+d2+"-"+d3},constructor.cast=function(cls,fromJson){var instance=Object.create(cls.prototype),casted=Object.assign(instance,fromJson);return casted},constructor.isDashBrowser=function(){return null!=window.MediaSource},constructor.querySelectorNotNull=function(el,query){if(null==query)throw new RuntimeException("query is null");var element1=el.querySelector(query);if(null==element1)throw new RuntimeException("query selector returned Great Emptiness but should not: "+query);return element1},constructor.readCookie=function(name){for(var nameEQ=name+"=",a=window.document.cookie.split(";"),ca=a,i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},constructor.jsonClone=function(o){return JSON.parse(JSON.stringify(o))},constructor.jsonToString=function(o){return JSON.stringify(o)},constructor.toAbsoluteUri=function(base,relative){var absoluteUrl=relative.startsWith("http://")||relative.startsWith("https://")||relative.startsWith("/");if(!absoluteUrl){var idx=base.lastIndexOf("/");idx>=0&&(relative=base.substring(0,idx)+"/"+relative)}return relative},constructor.dataURLtoBlob=function(dataURI){var dataURIPattern="^data:((.*?)(;charset=.*?)?)(;base64)?,",dataURIRegExp=new RegExp(dataURIPattern),matches=dataURIRegExp.exec(dataURI);if(null==matches||0==matches.length)throw new RuntimeException("invalid data URI");var byteString,mediaType=Utils.isNotBlank(matches[2])?matches[1]:"text/plain"+Utils.defaultString(matches[3],";charset=US-ASCII"),isBase64=Utils.isNotBlank(matches[4]),dataString=dataURI.substring(matches[0].length);byteString=isBase64?window.atob(dataString):decodeURIComponent(dataString);for(var intArray=new Uint8Array(byteString.length),i=0;i<byteString.length;i+=1)intArray[i]=byteString.codePointAt(i);return new Blob([intArray],{type:mediaType})},constructor.canvasToBlob=function(canvas){return Utils.dataURLtoBlob(canvas.toDataURL("image/jpeg"))},constructor.forEach=function(map,callback){null!=map&&Object.keys(map).forEach(function(key){callback(map[key],key)})},constructor.sumBy=function(array,func){for(var sum=0,i=0;i<array.length;i++){var j=func(array[i]);sum+=j}return sum},constructor.defaults=function(defaultValues,src){return Utils.forEach(src,function(v,k){void 0==defaultValues[k]&&(defaultValues[k]=v)}),defaultValues},constructor.forEachElement=function(elements,callback){if(null!=elements)for(var i=0;i<elements.length;i++)callback(elements[i])},constructor.findElement=function(elements,predicate){for(var i=0;i<elements.length;i++){var $invoke=predicate(elements[i]);if($invoke)return elements[i]}return null},constructor.find=function(elements,predicate){for(var i=0;i<elements.length;i++){var $invoke=predicate(elements[i]);if($invoke)return elements[i]}return null},constructor.defaultArray=function(arr){return null==arr?[]:arr},constructor.base64ToArrayBuffer=function(base64){for(var binary_string=window.atob(base64),len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes.buffer},constructor.secondsToTv=function(seconds,timescale){return stjs.trunc(seconds*timescale+1e-6)},constructor.keys=function(map){return null==map?[]:Object.keys(map)},constructor.HHmmSSmsecToTimestamp=function(string){var splited=string.split(":",3);if(3!=splited.length)return-1;var ssmsec=splited[2].split(".",2);if(2!=ssmsec.length)return-1;var msec=Integer.parseInt(ssmsec[1]),sec=Integer.parseInt(ssmsec[0]),min=Integer.parseInt(splited[1]),hour=Integer.parseInt(splited[0]);return msec+1e3*sec+60*min*1e3+60*hour*60*1e3},constructor.XS_DURATION_PATTERN="^(-)?P(([0-9]*)Y)?(([0-9]*)M)?(([0-9]*)D)?(T(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?)?$",constructor.parseXsDuration=function(value){var matches=value.match(new RegExp(Utils.XS_DURATION_PATTERN));if(null!=matches){var negated=Utils.isNotEmpty(matches[1]),years=matches[3],durationSeconds=null!=years?31556908*Double.parseDouble(years):0,months=matches[5];
durationSeconds+=null!=months?2629739*Double.parseDouble(months):0;var days=matches[7];durationSeconds+=null!=days?86400*Double.parseDouble(days):0;var hours=matches[10];durationSeconds+=null!=hours?3600*Double.parseDouble(hours):0;var minutes=matches[12];durationSeconds+=null!=minutes?60*Double.parseDouble(minutes):0;var seconds=matches[14];durationSeconds+=null!=seconds?Double.parseDouble(seconds):0;var durationMillis=stjs.trunc(1e3*durationSeconds);return negated?-durationMillis:durationMillis}return stjs.trunc(3600*Double.parseDouble(value)*1e3)},constructor.arrayFrom=function(obj){return Array.from(obj)},constructor.addQueryParams=function(url,params){if(null==params)return url;for(var query=url.replaceAll("^[^?]*",""),names=Utils.keys(params),i=0;i<names.length;i++){var name=encodeURIComponent(names[i]),value=encodeURIComponent(params[names[i]]),kvp=name+"="+value,existingRegex=new RegExp("(&|\\?)"+name+"=[^&]*");null!=query.match(existingRegex)?query=query.replace(existingRegex,"$1"+kvp):(query+=0==query.length?"?":"&",query+=kvp)}return url.replaceAll("\\?.*","")+query},constructor.fromCharCodes=function(codes){for(var str="",i=0;i<codes.length;i++)str+=String.fromCharCode(codes[i]);return str},constructor.stringToArray=function(str){for(var array=new Uint16Array(str.length),i=0;i<str.length;i++)array[i]=str.charCodeAt(i);return array},constructor.buffersEqual=function(buf1,buf2){var a1=new Uint8Array(buf1),a2=new Uint8Array(buf2);if(a1.length!=a2.length)return!1;for(var i=0;i<a1.length;i++)if(a1[i]!=a2[i])return!1;return!0}},{},{});var SegmentedStream=function(){this.updateRx=new Rx.Subject};SegmentedStream=stjs.extend(SegmentedStream,null,[],function(constructor,prototype){prototype.id=null,prototype.mimeType=null,prototype.codecs=null,prototype.url=null,prototype.updateRx=null,prototype.getDashInit=function(onDone,onError){},prototype.loadSegment=function(segmentIdx,onDone,onError){},prototype.getDashDescriptor=function(){},prototype.getSegmentIdxByTime=function(time){return this.getDashDescriptor().getSegmentIdxByTime(time)},prototype.getSegmentStartTime=function(idx){return this.getDashDescriptor().getSegmentStartTime(idx)},prototype.getSegmentStartTv=function(idx){return this.getDashDescriptor().getSegmentStartTv(idx)},prototype.getSegmentDuration=function(idx){return this.getDashDescriptor().getSegmentDuration(idx)},prototype.getSegmentCount=function(){return this.getDashDescriptor().getSegmentCount()},prototype.getDurationSec=function(){var desc=this.getDashDescriptor();return desc.duration/desc.timescale},prototype.getUpdateRx=function(){return this.updateRx},prototype.isDynamic=function(){return this.getDashDescriptor().dynamic}},{updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var VideoElement=function(){};VideoElement=stjs.extend(VideoElement,null,[],function(constructor,prototype){constructor.SEEKING="seeking",constructor.SEEKED="seeked",constructor.VG_PLAYER_OPACITY_0="vg_player_opacity_0",constructor.PAUSE="pause",constructor.PLAYING="playing",constructor.LOADEDMETADATA="loadedmetadata",constructor.VOLUMECHANGE="volumechange",constructor.mediaErrors=["lalala","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],constructor.networkStates=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],constructor.readyStates=["HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"],constructor.TIMEUPDATE="timeupdate",constructor.CANPLAY="canplay",constructor.PROGRESS="progress",prototype.seek=function(time){},prototype.getBusyRx=function(){},prototype.playAtRate=function(r){},prototype.close=function(){},prototype.pause=function(){},prototype.isPlaying=function(){},prototype.getFrame=function(){},prototype.getVolume=function(){},prototype.setVolume=function(v){},prototype.getTimeSec=function(){},prototype.getVideoWidth=function(){},prototype.getVideoHeight=function(){},prototype.getTimeline=function(){},prototype.getVideoShownRx=function(){},prototype.getTimeUpdateRx=function(){},prototype.forwardSec=function(n){},prototype.forward1=function(n){},prototype.backward1=function(n){},prototype.seekFrame=function(fn){},prototype.backwardSec=function(n){},prototype.getPlayRate=function(){},prototype.getTimeValue=function(){},prototype.playFaster=function(){},prototype.playFasterBackwards=function(){},prototype.getDuration=function(){},prototype.getSeekableDuration=function(){},prototype.endQuickSeek=function(){},prototype.startQuickSeek=function(){},prototype.setInitialTime=function(initialTime){},prototype.setLoop=function(loop){},prototype.setPauseOnLoop=function(pauseOnLoop){},prototype.hasRange=function(){},prototype.inRange=function(fn){},prototype.setRange=function(fromFrame,toFrame){},prototype.cancelRange=function(){},prototype.getPlayRx=function(){},prototype.getVolumeChangeRx=function(){},prototype.setCrossOrigin=function(type){},prototype.setResetPlayRateOnSeek=function(reset){},prototype.getBuffered=function(){},prototype.getProgressRx=function(){}},{mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var LogLevel=stjs.enumeration("DEBUG","INFO","WARN","ERROR","OFF"),TimeSample=function(tv,frame,sec){this.tv=tv,this.frame=frame,this.sec=sec};TimeSample=stjs.extend(TimeSample,null,[],function(constructor,prototype){prototype.tv=0,prototype.frame=0,prototype.sec=0},{},{});var PlayerOptions=function(){};PlayerOptions=stjs.extend(PlayerOptions,null,[],function(constructor,prototype){constructor.PLUGINS=stjs.enumeration("filmstrip","waveform","videolog"),prototype.logLevel=null,prototype.enableCORS=!1,prototype.staticVideoSrc=!1,prototype.hotkeys=!1,prototype.serverUrl=null,prototype.playlist=!1,prototype.search=!1,prototype.streaming=null,prototype.plugins=null,prototype.theme=null,prototype.preservePlaybackRate=!1,prototype.allowCrossSiteCredentials=!1,prototype.drm=null,prototype.queryParams=null,constructor.STREAMING_CUTLIST="cutlist",constructor.STREAMING_VFILE="vfile",constructor.STREAMING_FILE="file",constructor.DRMOptions=function(){},constructor.DRMOptions=stjs.extend(constructor.DRMOptions,null,[],function(constructor,prototype){prototype.widevine=null,prototype.playready=null,prototype.fairplay=null},{widevine:"PlayerOptions.DRMWidevineOptions",playready:"PlayerOptions.DRMPlayreadyOptions",fairplay:"PlayerOptions.DRMFairplayOptions"},{}),constructor.DRMWidevineOptions=function(){},constructor.DRMWidevineOptions=stjs.extend(constructor.DRMWidevineOptions,null,[],function(constructor,prototype){prototype.laUrl=null},{},{}),constructor.DRMPlayreadyOptions=function(){},constructor.DRMPlayreadyOptions=stjs.extend(constructor.DRMPlayreadyOptions,null,[],function(constructor,prototype){prototype.laUrl=null},{},{}),constructor.DRMFairplayOptions=function(){},constructor.DRMFairplayOptions=stjs.extend(constructor.DRMFairplayOptions,null,[],function(constructor,prototype){prototype.laUrl=null,prototype.certUrl=null},{},{})},{logLevel:{name:"Enum",arguments:["LogLevel"]},plugins:{name:"Array",arguments:[null]},drm:"PlayerOptions.DRMOptions",queryParams:{name:"Map",arguments:[null,null]}},{});var CutInfo=function(startFrame,endFrame,proxyId,cutListFrameStart,cutListFrameEnd,audioDashFile,audioInfo){this.start=startFrame,this.end=endFrame,this.proxyId=proxyId,this.cutListFrameStart=cutListFrameStart,this.cutListFrameEnd=cutListFrameEnd,this.audioDashFile=audioDashFile,this.audioInfo=audioInfo};CutInfo=stjs.extend(CutInfo,null,[],function(constructor,prototype){prototype.start=0,prototype.end=0,prototype.proxyId=null,prototype.cutListFrameStart=0,prototype.cutListFrameEnd=0,prototype.audioDashFile=null,prototype.audioInfo=null,prototype.frameCount=0,prototype.cutListFrameCount=0,prototype.cutId=0},{audioDashFile:"SegmentedAudioStream",audioInfo:"AudioInfo"},{});var ProxyType=stjs.enumeration("HLS","DASH","GENERIC","VG","MP4"),TimeRange=function(start,end){this.start=start,this.end=end};TimeRange=stjs.extend(TimeRange,null,[],function(constructor,prototype){prototype.start=0,prototype.end=0},{},{});var Proxy=function(){};Proxy=stjs.extend(Proxy,null,[],function(constructor,prototype){prototype.audioInfo=null,prototype.proxyId=null,prototype.video=null,prototype.audio=null,prototype.thumbshq=null},{audioInfo:"AudioInfo",video:"SegmentedVideoStream",audio:"SegmentedAudioStream",thumbshq:"SegmentedVideoStream"},{});var PlayerEvents=function(){};PlayerEvents=stjs.extend(PlayerEvents,null,[],function(constructor,prototype){constructor.PLAY_EVENT="play",constructor.LOAD_EVENT="load",constructor.TIMEUPDATE_EVENT="timeupdate",constructor.FULLSCREEN_EVENT="fullscreen",constructor.INIT_EVENT="init",constructor.TIMELINE_EVENT="timeline",constructor.ERROR_EVENT="error",constructor.VOLUME_CHANGED="volumechange",constructor.PROGRESS="progress"},{},{});var VGPlugins=function(player){this.player=player};VGPlugins=stjs.extend(VGPlugins,null,[],function(constructor,prototype){prototype.player=null,prototype.type=null,prototype.view=null},{player:"PlayerImpl",view:"VGView"},{});var PlayerCut=function(proxy,startFrame,endFrame){null!=proxy&&(this.proxyId=proxy.proxyId,this.videoDashFile=proxy.video,this.audioDashFile=proxy.audio,this.audioInfo=proxy.audioInfo),this.startFrame=startFrame,this.endFrame=endFrame};PlayerCut=stjs.extend(PlayerCut,null,[],function(constructor,prototype){prototype.audioDashFile=null,prototype.audioInfo=null,prototype.endFrame=0,prototype.startFrame=0,prototype.videoDashFile=null,prototype.proxyId=null,prototype.start=0,prototype.end=0,constructor.fromProxyId=function(proxyId){var playerCut=new PlayerCut(null,0,0);return playerCut.proxyId=proxyId,playerCut},constructor.LowRes=function(proxy,startFrame,endFrame){var cut=new PlayerCut(proxy,startFrame,endFrame);return cut.videoDashFile=proxy.thumbshq,cut},prototype.setAudio=function(dashStream){this.audioDashFile=dashStream,this.audioInfo=dashStream.audioInfo}},{audioDashFile:"SegmentedAudioStream",audioInfo:"AudioInfo",videoDashFile:"SegmentedVideoStream"},{});var DataSrc=function(){};DataSrc=stjs.extend(DataSrc,null,[],function(constructor,prototype){prototype.fetch=function(from,to,onDone,onError){}},{},{});var Subtitles=function(){};Subtitles=stjs.extend(Subtitles,null,[],function(constructor,prototype){prototype.id=null,prototype.rows=null,prototype.title=null},{rows:{name:"Array",arguments:["SubtitleEntry"]}},{});var DashSegment=function(){};DashSegment=stjs.extend(DashSegment,null,[],function(constructor,prototype){prototype.dataIntervals=null,prototype.header=null},{dataIntervals:{name:"Array",arguments:["DashSegmentDataInterval"]},header:"ArrayBuffer"},{});var DashSegmentDataInterval=function(){};DashSegmentDataInterval=stjs.extend(DashSegmentDataInterval,null,[],function(constructor,prototype){prototype.dataFrom=0,prototype.dataTo=0},{},{});var VGPlayerPublicApi=function(){};VGPlayerPublicApi=stjs.extend(VGPlayerPublicApi,null,[],function(constructor,prototype){prototype.close=function(){},prototype.addCaptionsHandler=function(cb){},prototype.audioAddHandler=function(cb){},prototype.addCaptions=function(input){},prototype.load=function(url,onDone){},prototype.loadUrl=function(url,onDone){},prototype.loadAudioTrack=function(url,displayName,onDone){},prototype.setAudioTrackUrl=function(trackId,url,onDone){},prototype.conformAudioTrack=function(trackId,offset){},prototype.getAudioTrack=function(id){},prototype.setCurrentAudioTrack=function(id){},prototype.addAudioTrack=function(displayName,channelNames){},prototype.addAudioTrackWithId=function(id,displayName,channelNames){},prototype.muteAudioTrack=function(id){},prototype.togglePlay=function(){},prototype.play=function(){},prototype.pause=function(){},prototype.getTimeline=function(){},prototype.getCurrentTapeTimecode=function(){},prototype.getCurrentStandardTimecode=function(){},prototype.getCurrentFrame=function(){},prototype.getCurrentTime=function(){},prototype.getCurrentTimeValue=function(){},prototype.seekSec=function(time){},prototype.seek=function(anything){},prototype.seekFrame=function(fn){},prototype.nextFrame=function(n){},prototype.previousFrame=function(n){},prototype.nextSec=function(n){},prototype.previousSec=function(n){},prototype.enterFullscreen=function(){},prototype.exitFullscreen=function(){},prototype.setRange=function(fromTimecode,toTimecode){},prototype.cancelRange=function(){},prototype.hasRange=function(){},prototype.playAtRate=function(rate){},prototype.playFasterBackwards=function(){},prototype.playFaster=function(){},prototype.setLoop=function(loop){},prototype.setPauseOnLoop=function(pauseOnLoop){},prototype.getPlaybackRate=function(){},prototype.isPlaying=function(){},prototype.getCurrentAudioTrack=function(){},prototype.isAudioMutable=function(){},prototype.setVolume=function(val){},prototype.getVolume=function(){},prototype.getSeekableDurationSec=function(){},prototype.getDurationSec=function(){},prototype.getTimeSample=function(){},prototype.setVideoQuality=function(res){},prototype.setStartTapeTimecode=function(tapeTimecode){},prototype.getCaptionsList=function(){},prototype.getAudioTracks=function(){},prototype.disableHotKeys=function(){},prototype.enableHotKeys=function(){},prototype.addEventListener=function(type,handler){},prototype.removeEventListener=function(type,handler){},prototype.getFilmStripDrawer=function(callback){},prototype.registerPlugin=function(plugin){},prototype.getBuffered=function(){},prototype.setLogLevel=function(logLevel){}},{},{});var InternalApi=function(){};InternalApi=stjs.extend(InternalApi,null,[],null,{},{});var SubtitleEntry=function(){};SubtitleEntry=stjs.extend(SubtitleEntry,null,[],function(constructor,prototype){prototype.startMsec=0,prototype.endMsec=0,prototype.startTv=0,prototype.endTv=0,prototype.timeCodeIn=null,prototype.timeCodeOut=null,prototype.notes=null,prototype.red=!1},{},{});var SubsUtils=function(){};SubsUtils=stjs.extend(SubsUtils,null,[],function(constructor,prototype){constructor.parseTimestamp=function(timestamp){var split2=timestamp.split(new RegExp("[:,.]")),msec=Integer.parseInt(split2.pop()),sec=Integer.parseInt(split2.pop()),min=Integer.parseInt(split2.pop()),hour=Integer.parseInt(split2.pop());return 36e5*hour+6e4*min+1e3*sec+msec}},{},{});var PacketCache=function(){};PacketCache=stjs.extend(PacketCache,null,[],function(constructor,prototype){prototype.updateTimePackets=function(segmentIdx,newPkts){},prototype.getFrameByTv=function(tv){},prototype.getTvByFrame=function(fn){},prototype.floorTv=function(tv){},prototype.getFrameCount=function(durationTv){},constructor.longCompare=function(x,y){return x<y?-1:x==y?0:1},prototype.getAverageFrameDuration=function(){}},{},{});var Pair=function(k,v){this.k=k,this.v=v};Pair=stjs.extend(Pair,null,[],function(constructor,prototype){prototype.k=null,prototype.v=null,constructor.of=function(k,v){return new Pair(k,v)},prototype.getKey=function(){return this.k},prototype.getValue=function(){return this.v}},{},{});var AbstractFrameExtractor=function(){};AbstractFrameExtractor=stjs.extend(AbstractFrameExtractor,null,[],function(constructor,prototype){prototype.mp4box=null,prototype.iframes=null,prototype.frameData=null,prototype.init=function(callback){},prototype.getInfo=function(){},prototype.getPrevIframe=function(fn){},prototype.loadFrameData=function(fn){},prototype.getAvcC=function(){return MovDasher.getAvcC(this.mp4box)}},{mp4box:"MP4Box",iframes:{name:"Array",arguments:[null]},frameData:{name:"Array",arguments:[{name:"Array",arguments:["Uint8Array"]}]}},{});var FilmstripInfo=function(width,height,framesTotal){this.width=width,this.height=height,this.framesTotal=framesTotal};FilmstripInfo=stjs.extend(FilmstripInfo,null,[],function(constructor,prototype){prototype.width=0,prototype.height=0,prototype.framesTotal=0},{},{});var ChannelMute=function(muted,channel){this.mute=muted,this.channel=channel};ChannelMute=stjs.extend(ChannelMute,null,[],function(constructor,prototype){prototype.mute=!1,prototype.channel=0},{},{});var PlayerAudioChannel=function(){};PlayerAudioChannel=stjs.extend(PlayerAudioChannel,null,[],function(constructor,prototype){prototype.muted=!1,prototype.label=null,prototype.waveformPngUrl=null},{},{});var PublicApi=function(){};PublicApi=stjs.extend(PublicApi,null,[],null,{},{});var CloseableView=function(){};CloseableView=stjs.extend(CloseableView,null,[],function(constructor,prototype){prototype.children=null,prototype.addChild=function(view){null==this.children&&(this.children=new Array),this.children.push(view)},prototype.close=function(){if(null!=this.children){for(var i=0;i<this.children.length;i++)this.children[i].close();this.children=null}}},{children:{name:"Array",arguments:["CloseableView"]}},{});var MutableInt=function(val){this.value=val};MutableInt=stjs.extend(MutableInt,null,[],function(constructor,prototype){prototype.value=0,prototype.decrementAndGet=function(){return--this.value},prototype.incrementAndGet=function(){return++this.value}},{},{});var DashSegmentUrls=function(init,urls){this.urls=urls,this.init=init};DashSegmentUrls=stjs.extend(DashSegmentUrls,null,[],function(constructor,prototype){prototype.urls=null,prototype.init=null,prototype.getInitUrl=function(){return this.init},prototype.getSegmentUrl=function(segmentIdx){return this.urls[segmentIdx]},prototype.getCount=function(){return this.urls.length}},{urls:{name:"Array",arguments:[null]}},{});var DashStreamUtils=function(){};DashStreamUtils=stjs.extend(DashStreamUtils,null,[],function(constructor,prototype){constructor.createDownloadLink=function(stream){console.log("creating downloadable mp4");var init=Rx.Observable.create(function(observer){stream.getDashInit(function(buf){observer.onNext(buf),observer.onCompleted()},stjs.bind(observer,"onError"))}),segs=Rx.Observable.range(0,stream.getSegmentCount()).concatMap(function(idx){return Rx.Observable.create(function(observer){console.log("segment "+idx+"/"+stream.getSegmentCount()),stream.loadSegment(idx,function(buf){observer.onNext(buf),observer.onCompleted()},function(err){return observer.onError(err)})})});init.concat(segs).reduce(function(parts,buf,x,xx){return parts.push(buf),parts},[]).subscribe(function(parts){console.log("finished creating downloadable mp4");var blob=new Blob(parts,{type:"video/mp4"}),a=window.document.createElement("a");a.href=URL.createObjectURL(blob),a.target="_blank",a.download="generated.mp4",a.innerHTML="download mp4",window.document.body.appendChild(a)})},constructor.segmentSize=function(segment){for(var size=0,i=0;i<segment.dataIntervals.length;i++){var interval=segment.dataIntervals[i];size+=interval.dataTo-interval.dataFrom}return size}},{},{});var PriorityQueue=function(comparator){this.comparator=comparator,this.arr=new Array};PriorityQueue=stjs.extend(PriorityQueue,null,[],function(constructor,prototype){prototype.arr=null,prototype.comparator=null,prototype.isEmpty=function(){return 0==this.arr.length},prototype.add=function(c){this.arr.push(c),this.arr.sort(this.comparator)},prototype.poll=function(){return this.arr.shift()}},{arr:{name:"Array",arguments:["T"]},comparator:{name:"SortFunction",arguments:["T"]}},{});var MutableBoolean=function(value){this.value=value};MutableBoolean=stjs.extend(MutableBoolean,null,[],function(constructor,prototype){prototype.value=!1},{},{});var KeyOptions=function(){};KeyOptions=stjs.extend(KeyOptions,null,[],function(constructor,prototype){prototype.group=null,prototype.description=null,prototype.allowInputs=!1,prototype.scope=null,prototype.ignoreSummary=!1,prototype.onKeyUp=!1,constructor.gd=function(group,desc,allowInputs){var gd=new KeyOptions;return gd.group=group,gd.description=desc,gd.allowInputs=allowInputs,gd}},{},{});var ObjectEvents=function(){this.events={},this.mandatoryEvents={},this.listenAlls=[]};ObjectEvents=stjs.extend(ObjectEvents,null,[],function(constructor,prototype){prototype.events=null,prototype.listenAlls=null,prototype.mandatoryEvents=null,prototype.addEventListener=function(type,func){this.addEvent(type,func)},prototype.addEvent=function(type,func){if(null==this.events[type]&&(this.events[type]=[]),this.events[type].push(func),null!=this.mandatoryEvents[type])for(var i=0;i<this.mandatoryEvents[type].length;i++){var args=this.mandatoryEvents[type][i];func(args)}},prototype.fireEvent=function(type,args){var listeners=this.events[type];if(null!=listeners)for(var i=0;i<listeners.length;i++){var listener=listeners[i];listener(args)}for(var j=0;j<this.listenAlls.length;j++){var listener=this.listenAlls[j];listener(type,args)}},prototype.fireMandatoryEvent=function(type,args){this.fireEvent(type,args),null==this.mandatoryEvents[type]&&(this.mandatoryEvents[type]=[]),this.mandatoryEvents[type].push(args)},prototype.removeEvent=function(type,func){if(null!=this.events[type])for(var listeners=this.events[type],i=0;i<listeners.length;i++){var listener=listeners[i];if(func==listener)return listeners.splice(i,1),void this.removeEvent(type,func)}},prototype.removeEvents=function(type){null!=this.events[type]&&(this.events[type]=[])},prototype.listenAll=function(func){this.listenAlls.push(func)}},{events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{});var FrameDrawer=function(frameExtractor){this.frameExtractor=frameExtractor,this.iframes=frameExtractor.iframes,this.canvas=window.document.createElement("canvas"),this.canvas.height=frameExtractor.getInfo().height,this.canvas.width=frameExtractor.getInfo().width,this.ctx=this.canvas.getContext("2d",null),this.imgData=this.ctx.createImageData(this.canvas.width,this.canvas.height),this.decoder=new Decoder({rgb:!0}),this.lastDecodedFn=-1;var avcC=frameExtractor.getAvcC();this.sps=avcC.SPS[0],this.pps=avcC.PPS[0]};FrameDrawer=stjs.extend(FrameDrawer,null,[],function(constructor,prototype){prototype.frameExtractor=null,prototype.iframes=null,prototype.canvas=null,prototype.ctx=null,prototype.imgData=null,prototype.decoder=null,prototype.lastDecodedFn=0,prototype.sps=null,prototype.pps=null,prototype.resetDecoder=function(){this.decoder.decode(this.sps),this.decoder.decode(this.pps)},prototype.renderFromPrevIframe=function(targetFn){var fromFn;if(targetFn==this.lastDecodedFn)return Rx.Observable.just(this.canvas);if(null!=this.iframes){var iframe=this.frameExtractor.getPrevIframe(targetFn);this.lastDecodedFn!=-1&&this.lastDecodedFn<targetFn&&this.frameExtractor.getPrevIframe(this.lastDecodedFn)==iframe?fromFn=this.lastDecodedFn+1:(fromFn=iframe,this.resetDecoder())}else fromFn=targetFn,this.resetDecoder();return this.decoder.onPictureDecoded=function(x){},Rx.Observable.create(stjs.bind(this,function(observer){for(var fn=fromFn;fn<=targetFn;fn++){var nalUnits=this.frameExtractor.frameData[fn];if(null==nalUnits){observer.onNext(null),observer.onCompleted();break}this.lastDecodedFn=fn;for(var i=0;i<nalUnits.length;i++)fn==targetFn&&i==nalUnits.length-1&&(this.decoder.onPictureDecoded=stjs.bind(this,function(buffer){this.imgData.data.set(buffer,0),this.ctx.putImageData(this.imgData,0,0),observer.onNext(this.canvas),observer.onCompleted()})),this.decoder.decode(nalUnits[i])}}))},prototype.decodeFrame=function(fn){return fn>=0&&fn<this.frameExtractor.getInfo().framesTotal?this.renderFromPrevIframe(fn):Rx.Observable.just(null)}},{frameExtractor:"AbstractFrameExtractor",iframes:{name:"Array",arguments:[null]},canvas:"Canvas",ctx:"CanvasRenderingContext2D",imgData:"CanvasImageData",decoder:"Decoder",sps:"Uint8Array",pps:"Uint8Array"},{});var Platform=function(){};Platform=stjs.extend(Platform,null,[],function(constructor,prototype){constructor.isJava="9007199254740993".equals("9007199254740992"),constructor.regexSplit=function(str,regex){return Platform.isJava?str.split(regex):str.split(new RegExp(regex))},constructor.fromCharCode=function(charcode){return Platform.isJava?String.valueOf(stjs.trunc(charcode)):String.fromCharCode(charcode)},constructor.ascii=function(view,offset,len){for(var str="",i=offset;i<offset+len;i++){var charcode=view.getUint8(i);str+=Platform.fromCharCode(charcode)}return str}},{},{});var Mp4Streams=function(){};Mp4Streams=stjs.extend(Mp4Streams,null,[],function(constructor,prototype){prototype.video=null,prototype.audio=null,prototype.timeline=null},{video:"SegmentedStream",audio:{name:"Array",arguments:["SegmentedAudioStream"]},timeline:"Timeline"},{});var MPDStreams=function(){};MPDStreams=stjs.extend(MPDStreams,null,[],function(constructor,prototype){prototype.video=null,prototype.audio=null,prototype.thumbshq=null,prototype.thumbs=null,prototype.drmInfo=null},{video:"MPDSegmentedVideoStream",audio:"MPDSegmentedAudioStream",thumbshq:"MPDSegmentedVideoStream",thumbs:"MPDSegmentedVideoStream",drmInfo:{name:"Array",arguments:["DRMInfo"]}},{});var DRMInfo=function(streamId,keySystem,initData,contentType){this.streamId=streamId,this.keySystem=keySystem,this.initData=initData,this.contentType=contentType};DRMInfo=stjs.extend(DRMInfo,null,[],function(constructor,prototype){prototype.streamId=null,prototype.keySystem=null,prototype.initData=null,prototype.contentType=null},{},{});var VGPlugin=function(){};VGPlugin=stjs.extend(VGPlugin,null,[],function(constructor,prototype){prototype.setAPI=function(playerApi){},prototype.getId=function(){},prototype.renderInto=function(container,containerWidth,onDone){}},{},{});var FileStreaming=function(cut,fullRes,hasAudio,serverUrl){throw new RuntimeException("TODO")};FileStreaming=stjs.extend(FileStreaming,null,[VideoSrc],function(constructor,prototype){prototype.detach=function(){throw new RuntimeException("TODO")},prototype.attach=function(video){throw new RuntimeException("TODO")},prototype.canSetAudioWithoutReattach=function(audio){return!1},prototype.setAudio=function(audio){throw new RuntimeException("TODO")},prototype.clearAudioBuffer=function(){throw new RuntimeException("TODO")}},{},{});var CutListStreaming=function(cutList,videoAudio,serverUrl){throw new RuntimeException("TODO")};CutListStreaming=stjs.extend(CutListStreaming,null,[VideoSrc],function(constructor,prototype){prototype.detach=function(){throw new RuntimeException("TODO")},prototype.attach=function(video){throw new RuntimeException("TODO")},prototype.canSetAudioWithoutReattach=function(audio){return!1},prototype.setAudio=function(audio){throw new RuntimeException("TODO")},prototype.clearAudioBuffer=function(){throw new RuntimeException("TODO")}},{},{});var DashCutListStreaming=function(cutList,b,videoAudio,serverUrl){throw new RuntimeException("DashCutListStreaming TODO")};DashCutListStreaming=stjs.extend(DashCutListStreaming,null,[VideoSrc],function(constructor,prototype){prototype.detach=function(){throw new RuntimeException("TODO")},prototype.attach=function(video){throw new RuntimeException("TODO")},prototype.canSetAudioWithoutReattach=function(audio){return!1},prototype.setAudio=function(audio){throw new RuntimeException("TODO")},prototype.clearAudioBuffer=function(){throw new RuntimeException("TODO")}},{},{});var DashDescriptor=function(){};DashDescriptor=stjs.extend(DashDescriptor,null,[],function(constructor,prototype){prototype.timecode=null,prototype.timescale=0,prototype.frameDuration=0,prototype.segmentStartTv=null,prototype.segmentStartFrame=null,prototype.duration=0,prototype.mimeType=null,prototype.codecs=null,prototype.dynamic=!1,prototype.width=0,prototype.height=0,prototype.channelConfig=0,prototype.getSegmentCount=function(){return this.segmentStartTv.length-1},prototype.getSegmentDuration=function(idx){var startTv=this.segmentStartTv[idx],endTv=this.segmentStartTv[idx+1];return(endTv-startTv)/this.timescale},prototype.frameDataAvailable=function(){return null!=this.segmentStartFrame},prototype.getSegmentFrameCount=function(idx){return this.frameDataAvailable()?this.segmentStartFrame[idx+1]-this.segmentStartFrame[idx]:-1},prototype.getSegmentIdxByFrame=function(fn){return this.frameDataAvailable()?Utils.binarySearchFloor(this.segmentStartFrame,function(segFn){return segFn-fn}):-1},prototype.getSegmentIdxByTime=function(time){var tv=Utils.secondsToTv(time,this.timescale),segmentIdx=Utils.binarySearchFloor(this.segmentStartTv,function(segTv){return stjs.trunc(segTv-tv)});return segmentIdx},prototype.getSegmentStartTime=function(idx){return this.segmentStartTv[idx]/this.timescale},prototype.getSegmentStartTv=function(idx){return this.segmentStartTv[idx]},prototype.update=function(updated){this.segmentStartTv=updated.segmentStartTv,this.duration=updated.duration}},{segmentStartTv:{name:"Array",arguments:[null]},segmentStartFrame:{name:"Array",arguments:[null]}},{});var Http=function(log){this.log=log};Http=stjs.extend(Http,null,[],function(constructor,prototype){prototype.log=null,prototype.queryParams=null,prototype.withCredentials=!1,constructor.bandwidth=-1,prototype.setWithCredentials=function(withCredentials){this.withCredentials=withCredentials},prototype.loadTime=function(byteLength){return stjs.trunc(byteLength/(1024*Http.bandwidth/8)*1e3)},prototype.postAsJson=function(url,o){return this.request(function(){return url},JSON.stringify(o),"POST",{"Content-type":"application/json"})},prototype.putAsJson=function(url,o){return this.request(function(){return url},JSON.stringify(o),"PUT",{"Content-type":"application/json"})},prototype.get=function(url){return this.request(function(){return url},null,"GET",null)},prototype.delete_=function(url){return this.request(function(){return url},null,"DELETE",null)},prototype.getJson=function(url,cls){return this.request(function(){return url},null,"GET",null).map(stjs.bind(this,function(jsonResponse){try{return stjs.parseJSON(jsonResponse,cls)}catch(e){this.log.warn("error parsing json. using default json parser",url);var object=JSON.parse(jsonResponse);return Utils.cast(cls,object)}}))},prototype.request=function(urlFunc,data,method,headers){return this.requestBinary(urlFunc,data,method,headers,!1)},prototype.requestBinary=function(urlFunc,data,method,headers,binary){var o=Rx.Observable.create(stjs.bind(this,function(observer){var url=Utils.addQueryParams(urlFunc(),this.queryParams),requestObserver=new Http.RequestObserver(url,data,headers,null,method,observer,this.withCredentials,binary,this.log).invoke(),http=requestObserver.getHttp();return stjs.bind(this,function(){requestObserver.loaded||4!=http.readyState&&(this.log.debug("abort "+method+" "+requestObserver.url),http.abort())})}));return o},prototype.getWithUrlFunc=function(urlFunc){return this.request(urlFunc,null,"GET",null)},prototype.getArrayBuffer=function(url){return this.getArrayBufferRange(url,0,0)},prototype.getArrayBufferRange=function(url,from,to){var _url=Utils.addQueryParams(url,this.queryParams),o=Rx.Observable.create(stjs.bind(this,function(observer){var http=new XMLHttpRequest;return http.open("GET",_url,!0),to>0&&http.setRequestHeader("Range","bytes="+from+"-"+(to-1)),http.withCredentials=this.withCredentials,http.responseType="arraybuffer",http.onreadystatechange=function(){4==http.readyState&&(200==http.status||206==http.status||304==http.status?(observer.onNext(http.response),observer.onCompleted()):observer.onError(http))},http.send(null),stjs.bind(this,function(){4!=http.readyState&&(this.log.debug("abort GET "+_url),http.abort())})}));return Http.bandwidth!=-1&&(o=o.flatMap(function(buf){return Http.slowdown(buf)})),o},constructor.slowdown=function(buf){for(var chunkSize=1e5,chunks=new Array,i=0;i<stjs.trunc(buf.byteLength/chunkSize);i++)chunks.push(chunkSize);return buf.byteLength%chunkSize>0&&chunks.push(buf.byteLength%chunkSize),Rx.Observable.from(chunks).concatMap(function(size){return Http.Slowdown.create(size)}).takeLast(1).map(function(x){return buf})},prototype.setQueryParams=function(queryParams){this.queryParams=queryParams},constructor.RequestObserver=function(url,data,headers,form,method,observer,withCredentials,binary,log){
this.url=url,this.data=data,this.withCredentials=withCredentials,this.binary=binary,this.log=log,this.headers=null==headers?{}:headers,this.form=form,this.method=method,this.observer=observer},constructor.RequestObserver=stjs.extend(constructor.RequestObserver,null,[],function(constructor,prototype){prototype.url=null,prototype.data=null,prototype.withCredentials=!1,prototype.binary=!1,prototype.log=null,prototype.form=null,prototype.method=null,prototype.observer=null,prototype.http=null,prototype.loaded=!1,prototype.headers=null,prototype.getHttp=function(){return this.http},prototype.getLoaded=function(){return this.loaded},prototype.invoke=function(){return this.http=new XMLHttpRequest,this.http.open(this.method,this.url),this.http.withCredentials=this.withCredentials,this.binary&&(this.http.responseType="arraybuffer"),Utils.keys(this.headers).forEach(stjs.bind(this,function(h){return this.http.setRequestHeader(h,this.headers[h])})),this.log.debug(this.method,this.url),this.loaded=!1,this.http.onreadystatechange=stjs.bind(this,function(){1==this.http.readyState&&Utils.keys(this.headers).forEach(stjs.bind(this,function(h){return this.http.setRequestHeader(h,this.headers[h])}))}),this.http.onload=stjs.bind(this,function(){this.loaded=!0,204==this.http.status&&(this.observer.onNext(null),this.observer.onCompleted()),this.http.status>=200&&this.http.status<400&&(this.observer.onNext(this.http.response),this.observer.onCompleted()),this.http.status>=400&&(this.log.debug("error "+this.http.status+" "+this.method+" "+this.url),this.observer.onError(this.http)),0==this.http.status&&(this.log.debug("error "+this.http.status+" "+this.method+" "+this.url),this.observer.onError(this.http))}),this.http.onerror=stjs.bind(this,function(e){this.log.debug("error "+this.http.status+" "+this.method+" "+this.url),this.observer.onError(e)}),null==this.data?this.http.send(this.form):this.http.send(this.data),this}},{data:"Object",log:"Log",form:"FormData",observer:{name:"Rx.Observer",arguments:["T"]},http:"XMLHttpRequest",headers:{name:"Map",arguments:[null,null]}},{}),constructor.Slowdown=function(){},constructor.Slowdown=stjs.extend(constructor.Slowdown,null,[],function(constructor,prototype){prototype.tid=null,constructor.create=function(byteLength){var instance=new Http.Slowdown;return Rx.Observable.create(function(observer){if(Http.bandwidth==-1)return observer.onNext(!0),observer.onCompleted(),function(){};var loadTime=stjs.trunc(byteLength/(1024*Http.bandwidth/8)*1e3);return instance.tid=setTimeout(function(){observer.onNext(!0),observer.onCompleted()},loadTime),function(){return clearTimeout(instance.tid)}})}},{tid:"TimeoutHandler"},{})},{log:"Log",queryParams:{name:"Map",arguments:[null,null]}},{});var PlayerError=function(_arguments){this.message=arguments[0],this.severity=stjs.trunc(arguments[1]),this.data=Utils.arrayFrom(arguments).slice(2)};PlayerError=stjs.extend(PlayerError,null,[],function(constructor,prototype){prototype.message=null,prototype.severity=0,prototype.data=null,constructor.FATAL=0,constructor.NONFATAL=1},{data:{name:"Array",arguments:["Object"]}},{});var PlayerUtils=function(){};PlayerUtils=stjs.extend(PlayerUtils,null,[],function(constructor,prototype){constructor.MAX_INT=2147483648,constructor.randomString=function(){var time=Utils.currentTimeMillis().toString(36),random=stjs.trunc(Math.random()*PlayerUtils.MAX_INT).toString(36);return time+"-"+random}},{},{});var TapeTimecode=function(dropFrame,startTimecode,fps){this.dropFrame=dropFrame,this.startTimecode=startTimecode,this.tapeFps=fps};TapeTimecode=stjs.extend(TapeTimecode,null,[],function(constructor,prototype){prototype.startTimecode=0,prototype.dropFrame=!1,prototype.tapeFps=0,constructor.timecodeFromString=function(tapeTimecode,fps){var dropFrame=TapeTimecode.isDropFrameString(tapeTimecode);return new TapeTimecode(dropFrame,TapeTimecode.parseTimecode(tapeTimecode,fps,dropFrame),fps)},prototype.setStartTimecode=function(startTimecode){this.startTimecode=startTimecode},prototype.getTapeFps=function(){return this.tapeFps},prototype.isDropFrame=function(){return this.dropFrame},constructor.parseTimecode=function(tc,timecodeRate,dropFrame){var split=tc.replace(";",":").split(":",4),h=parseInt(split[0],10),m=parseInt(split[1],10),s=parseInt(split[2],10),f=parseInt(split[3],10),timeCode=(3600*h+60*m+s)*timecodeRate+f;if(dropFrame){var D=stjs.trunc(stjs.trunc(timeCode/17982)),M=timeCode%17982;timeCode-=18*D+2*parseInt(stjs.trunc((M-2)/1798))}return timeCode},constructor.timecodeToString=function(timeCode,dropFrame,timecodeRate){if(dropFrame){var D=stjs.trunc(stjs.trunc(timeCode/17982)),M=timeCode%17982;timeCode+=18*D+2*stjs.trunc(stjs.trunc((M-2)/1798))}var frames=timeCode%timecodeRate;timeCode=parseInt(stjs.trunc(timeCode/timecodeRate));var seconds=timeCode%60;timeCode=parseInt(stjs.trunc(timeCode/60));var minutes=timeCode%60;timeCode=parseInt(stjs.trunc(timeCode/60));var hours=timeCode%24,tcfmt="";return tcfmt+=Utils.zeroPad2(hours)+":",tcfmt+=Utils.zeroPad2(minutes)+":",tcfmt+=Utils.zeroPad2(seconds),tcfmt+=dropFrame?";":":",tcfmt+=Utils.zeroPad2(frames)},constructor.isDropFrameString=function(tc){return 8==tc.indexOf(";")},prototype.getTimecodedDuration=function(frames){return TapeTimecode.timecodeToString(parseInt(frames),this.dropFrame,this.tapeFps)},prototype.getTimecodeAtFrame=function(frame){return TapeTimecode.timecodeToString(this.startTimecode+frame,this.dropFrame,this.tapeFps)},prototype.getFrameByTimecode=function(tc){return TapeTimecode.parseTimecode(tc,this.tapeFps,this.dropFrame)-this.startTimecode},constructor.TIMECODE_REGEX=new RegExp("^\\d\\d[:;]\\d\\d[:;]\\d\\d[:;]\\d\\d$"),constructor.isTimecode=function(tc){return TapeTimecode.TIMECODE_REGEX.test(tc)}},{TIMECODE_REGEX:"RegExp"},{});var SegmentedAudioStream=function(){SegmentedStream.call(this)};SegmentedAudioStream=stjs.extend(SegmentedAudioStream,SegmentedStream,[],function(constructor,prototype){constructor.FRAMES_PER_SEGMENT=84,prototype.channelMuted=null,prototype.proxyId=null,prototype.sampleRate=0,prototype.totalSamples=0,prototype.serverUrl=null,prototype.audioInfo=null,prototype.BITRATE=0,prototype.timestampOffset=0,prototype.getProxyId=function(){return this.proxyId},prototype.setAudioInfo=function(audioInfo){this.audioInfo=audioInfo},prototype.silenceAppended=function(){}},{channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var Log=function(level){this.level=level};Log=stjs.extend(Log,null,[],function(constructor,prototype){prototype.level=null,prototype.setLevel=function(logLevel){this.level=logLevel},prototype.debug=function(_arguments){this.level.ordinal()<=LogLevel.DEBUG.ordinal()&&this.log(arguments)},prototype.info=function(_arguments){this.level.ordinal()<=LogLevel.INFO.ordinal()&&this.log(arguments)},prototype.warn=function(_arguments){this.level.ordinal()<=LogLevel.WARN.ordinal()&&this.log(arguments)},prototype.error=function(_arguments){this.level.ordinal()<=LogLevel.ERROR.ordinal()&&this.err(arguments)},prototype.log=function(_arguments){console.log.apply(console,_arguments)},prototype.err=function(_arguments){console.error.apply(console,_arguments)}},{level:{name:"Enum",arguments:["LogLevel"]}},{});var HttpDataSrc=function(http,url){this.http=http,this.url=url};HttpDataSrc=stjs.extend(HttpDataSrc,null,[DataSrc],function(constructor,prototype){prototype.http=null,prototype.url=null,prototype.fetch=function(from,to,onDone,onError){var disp=this.http.getArrayBufferRange(this.url,from,to).subscribe(onDone,function(req){return onError(""+req.status)});return stjs.bind(disp,"dispose")}},{http:"Http"},{});var VGPlayerPluginApi=function(){};VGPlayerPluginApi=stjs.extend(VGPlayerPluginApi,null,[VGPlayerPublicApi],function(constructor,prototype){prototype.getCaptionListChangeRx=function(){},prototype.getTimeUpdateRx=function(){},prototype.getTimeline=function(){},prototype.seekSec=function(frameByTv){},prototype.getCaptionHandlerRx=function(){},prototype.getOptions=function(){},prototype.getHttp=function(){},prototype.getLog=function(){},prototype.getErrorRx=function(){}},{},{});var DCSubs=function(){};DCSubs=stjs.extend(DCSubs,null,[],function(constructor,prototype){constructor.probe=function(str){if(str.length<256)return-1;var score=0;str.startsWith("<?xml")&&(score=1),str.contains("<DCSubtitle")&&score++;for(var idx_=-1;-1!=(idx_=str.indexOf("<Subtitle",idx_+1));)score++;for(idx_=-1;-1!=(idx_=str.indexOf("<Text",idx_+1));)score++;return score},constructor.parse=function(string,timeline){var createElement=window.document.createElement("div");createElement.innerHTML=string;var subtitleElements=createElement.querySelectorAll("Subtitle"),seRx=Rx.Observable.from(DCSubs.toArray(subtitleElements)),subs=seRx.map(function(se){var startMsec=SubsUtils.parseTimestamp(se.getAttribute("timein")),endMsec=SubsUtils.parseTimestamp(se.getAttribute("timeout")),sub=new SubtitleEntry;return sub.startMsec=startMsec,sub.endMsec=endMsec,sub.startTv=timeline.getTvBySec(startMsec/1e3),sub.endTv=timeline.getTvBySec(endMsec/1e3),sub.timeCodeIn=timeline.getTapeBySec(startMsec/1e3),sub.timeCodeOut=timeline.getTapeBySec(endMsec/1e3),sub.notes=se.innerText,sub}),subtitles=new Subtitles;subtitles.rows=[];var subtitle=subs.reduce(function(all,sub){return all.rows.push(sub),all},subtitles);return subtitle},constructor.toArray=function(list){if(null==list)return null;for(var arr=[],i=0;i<list.length;i++)arr.push(list[i]);return arr}},{},{});var DefaultPacketCache=function(frameDuration){this.avgFrameDuration=0!=frameDuration?frameDuration:DefaultPacketCache.DEFAULT_SAMPLE_DURATION,this.knownPkts=[]};DefaultPacketCache=stjs.extend(DefaultPacketCache,null,[PacketCache],function(constructor,prototype){constructor.DEFAULT_SAMPLE_DURATION=1001,prototype.knownPkts=null,prototype.avgFrameDuration=0,prototype.contiguousDuration=0,prototype.contiguousFrames=0,prototype.packetIsKnown=function(pkt){if(0==this.knownPkts.length)return!1;var idx=Utils.binarySearch(this.knownPkts,function(p){return PacketCache.longCompare(p.pts,pkt.pts)});return idx>=0},prototype.updateTimePackets=function(segmentIdx,newPkts){for(var newPackets=0,i=0;i<newPkts.length;i++)this.packetIsKnown(newPkts[i])||(newPackets++,this.knownPkts.push(newPkts[i]));if(0!=newPackets){this.knownPkts.sort(function(pkt1,pkt2){return PacketCache.longCompare(pkt1.pts,pkt2.pts)});for(var avg=0,len=this.knownPkts.length,contiguousDuration=0,fn=0,stillContiguous=!0,i=0;i<len;i++){var pkt=this.knownPkts[i];avg+=pkt.duration,stillContiguous&&(pkt.pts==contiguousDuration?(pkt.frame=fn,fn++,contiguousDuration+=pkt.duration):stillContiguous=!1)}this.contiguousDuration=contiguousDuration,this.contiguousFrames=fn,this.avgFrameDuration=avg/len}},prototype.estimateFrameByTv=function(tv){return stjs.trunc(tv/this.avgFrameDuration)},prototype.estimateTvByFrame=function(fn){return stjs.trunc(fn*this.avgFrameDuration)},prototype.getFrameByTv=function(tv){if(tv<0)return 0;if(tv<this.contiguousDuration){var idx=Utils.binarySearch(this.knownPkts,function(pkt){return PacketCache.longCompare(pkt.pts,tv)});if(idx>=0)return this.knownPkts[idx].frame;var nearestIdx=-(idx+1),nearestPacket=this.knownPkts[nearestIdx];return nearestPacket.frame}return this.estimateFrameByTv(tv)},prototype.getTvByFrame=function(fn){return fn<0?0:fn<this.contiguousFrames?this.knownPkts[fn].pts:fn==this.contiguousFrames&&fn>0?this.knownPkts[fn-1].pts+this.knownPkts[fn-1].duration:this.estimateTvByFrame(fn)},prototype.estimateFloorTv=function(tv){return stjs.trunc(tv/stjs.trunc(this.avgFrameDuration))*stjs.trunc(this.avgFrameDuration)},prototype.floorTv=function(tv){if(0==this.knownPkts.length)return this.estimateFloorTv(tv);var idx=Utils.binarySearch(this.knownPkts,function(pkt){return PacketCache.longCompare(pkt.pts,tv)});if(idx>=0)return this.knownPkts[idx].pts;var nearestIdx=-(idx+1),nearestPacket=this.knownPkts[nearestIdx];return tv>=nearestPacket.pts&&tv<nearestPacket.pts+nearestPacket.duration?nearestPacket.pts:this.estimateFloorTv(tv)},prototype.getFrameCount=function(durationTv){return this.contiguousDuration==durationTv?this.knownPkts.length:stjs.trunc(durationTv/this.avgFrameDuration)},prototype.getAverageFrameDuration=function(){return this.avgFrameDuration}},{knownPkts:{name:"Array",arguments:["MovDasher.TimePacket"]}},{});var OptimizedPacketCache=function(segmentStartFrames,segmentStartTv,log){this.segmentStartFrames=segmentStartFrames,this.segmentStartTv=segmentStartTv,this.log=log,this.knownPkts=[],this.framesByTv={}};OptimizedPacketCache=stjs.extend(OptimizedPacketCache,null,[PacketCache],function(constructor,prototype){prototype.knownPkts=null,prototype.framesByTv=null,prototype.segmentStartFrames=null,prototype.segmentStartTv=null,prototype.log=null,prototype.segmentCached=function(segment){var firstFrameOfSegment=this.segmentStartFrames[segment];return null!=this.knownPkts[firstFrameOfSegment]},prototype.updateTimePackets=function(segmentIdx,newPkts){if(this.segmentCached(segmentIdx))return void this.log.debug("Segment "+segmentIdx+" is already cached, skiping");for(var firstFrameOfSegment=this.segmentStartFrames[segmentIdx],i=0;i<newPkts.length;i++){var packet=newPkts[i],fn=firstFrameOfSegment+i;packet.frame=fn,this.knownPkts[fn]=packet,this.framesByTv[""+packet.pts]=fn}},prototype.segmentIndexByFrame=function(fn){return Utils.binarySearchFloor(this.segmentStartFrames,function(start){return PacketCache.longCompare(start,fn)})},prototype.segmentIndexByTv=function(tv){return Utils.binarySearchFloor(this.segmentStartTv,function(start){return PacketCache.longCompare(start,tv)})},prototype.averageFrameDuration=function(segment){var baseFn=this.segmentStartFrames[segment],baseTv=this.segmentStartTv[segment],segmentDurationTv=this.segmentStartTv[segment+1]-baseTv,segmentDurationFrames=this.segmentStartFrames[segment+1]-baseFn;return segmentDurationTv/segmentDurationFrames},prototype.estimateFrameByTv=function(tv){var segment=this.segmentIndexByTv(tv),baseFn=this.segmentStartFrames[segment],baseTv=this.segmentStartTv[segment];return baseFn+stjs.trunc((tv-baseTv)/this.averageFrameDuration(segment))},prototype.estimateTvByFrame=function(fn){var segment=this.segmentIndexByFrame(fn),baseFn=this.segmentStartFrames[segment],baseTv=this.segmentStartTv[segment];return baseTv+stjs.trunc((fn-baseFn)*this.averageFrameDuration(segment))},prototype.getFrameByTv=function(tv){if(tv<this.getTotalDuration()){var fn=this.framesByTv[""+this.floorTv(tv)];return null!=fn?fn:this.estimateFrameByTv(tv)}return this.getFrameCount(this.getTotalDuration())-1},prototype.getTvByFrame=function(fn){var packet=this.knownPkts[fn];return null!=packet?packet.pts:this.estimateTvByFrame(fn)},prototype.estimateFloorTv=function(tv){var segment=this.segmentIndexByTv(tv),baseTv=this.segmentStartTv[segment],avgFrameDuration=stjs.trunc(this.averageFrameDuration(segment));return baseTv+stjs.trunc((tv-baseTv)/avgFrameDuration)*avgFrameDuration},prototype.floorTv=function(tv){var segment=this.segmentIndexByTv(tv);if(this.segmentCached(segment)){var segmentPackets=this.getSegmentPackets(segment),idx=Utils.binarySearchFloor(segmentPackets,function(pkt){return PacketCache.longCompare(pkt.pts,tv)});return segmentPackets[idx].pts}return this.estimateFloorTv(tv)},prototype.getSegmentPackets=function(segment){return this.knownPkts.slice(this.segmentStartFrames[segment],this.segmentStartFrames[segment+1])},prototype.getFrameCount=function(durationTv){return this.segmentStartFrames[this.segmentStartFrames.length-1]},prototype.getTotalDuration=function(){return this.segmentStartTv[this.segmentStartTv.length-1]},prototype.getAverageFrameDuration=function(){var totalDuration=this.getTotalDuration(),frameCount=this.getFrameCount(totalDuration);return totalDuration/frameCount}},{knownPkts:{name:"Array",arguments:["MovDasher.TimePacket"]},framesByTv:{name:"Map",arguments:[null,null]},segmentStartFrames:{name:"Array",arguments:[null]},segmentStartTv:{name:"Array",arguments:[null]},log:"Log"},{});var PlayerAudioTrack=function(id,log){this.proxyId=id,this.log=log,this.channelMuted=[],this.channelMuteRx=new Rx.ReplaySubject(1)};PlayerAudioTrack=stjs.extend(PlayerAudioTrack,null,[],function(constructor,prototype){prototype.dashStream=null,prototype.channelCount=0,prototype.channelLabels=null,prototype.channelMuted=null,prototype.filename=null,prototype.proxyId=null,prototype.log=null,prototype.sampleRate=0,prototype.serverUrl=null,prototype.totalSamples=0,prototype.waveformPreviews=null,prototype.channelMuteRx=null,prototype.channelOffset=0,prototype.offset=0,prototype.movieId=null,prototype.targetSampleRate=0,constructor.DEFAULT_LABELS=["Stereo-Left","Stereo-Right","Stereo-Left","Stereo-Right","Left","Right","Center","LFE","Left Surround","Right Surround","Mono","MOS"],prototype.id=function(){return this.proxyId},constructor.fromChannelLabels=function(id,displayName,labels,log){var p=new PlayerAudioTrack(id,log);return p.filename=displayName,p.channelCount=labels.length,p.channelLabels=labels.slice(0),p.channelMuted=new Array(p.channelCount),p},constructor.fromDashStream=function(id,dashStream,log){var self=new PlayerAudioTrack(id,log);return self.update(dashStream),self},prototype.setChannelMuted=function(index,muted){this.channelMuted[index]=muted,this.channelMuteRx.onNext(new ChannelMute(muted,index))},prototype.setChannelsMuted=function(muted){this.log.debug("setChannelsMuted",muted,this.proxyId);for(var k=0;k<this.channelMuted.length;k++)this.setChannelMuted(k,muted)},prototype.getChannelMuted=function(channelIdx){return this.channelMuted[channelIdx]},prototype.getChannels=function(){for(var channels=[],i=0;i<this.channelCount;i++){var channel=new PlayerAudioChannel;channel.label=this.channelLabels[i],channel.muted=this.channelMuted[i],channel.waveformPngUrl=this.serverUrl+"/"+this.proxyId+"/tw"+Utils.zeroPad2(i)+".png",channels.push(channel)}return channels},prototype.update=function(dashStream){this.dashStream=dashStream;var audioInfo=null==dashStream?null:dashStream.audioInfo;this.log.debug("update audio stream",dashStream),null!=audioInfo&&(this.totalSamples=audioInfo.totalSamples,this.sampleRate=audioInfo.sampleRate,this.waveformPreviews=audioInfo.waveformPreviews||new Array,this.channelCount=audioInfo.channelCount,this.channelMuted=new Array(audioInfo.channelCount),this.dashStream.channelMuted=this.channelMuted,this.channelLabels=audioInfo.channelLabels||PlayerAudioTrack.DEFAULT_LABELS.slice(0,this.channelCount)),null!=dashStream&&(this.serverUrl=dashStream.serverUrl)},prototype.initWithChannelNames=function(labels){this.channelCount=labels.length,this.channelLabels=labels.slice(0),this.channelMuted=new Array(this.channelCount)},constructor.fromAudioInfo=function(id,displayName,audioInfo,log){var self=new PlayerAudioTrack(id,log);return self},prototype.isMuted=function(){return this.channelMuted.every(function(muted,i,a){return muted})}},{dashStream:"SegmentedAudioStream",channelLabels:{name:"Array",arguments:[null]},channelMuted:{name:"Array",arguments:[null]},log:"Log",waveformPreviews:{name:"Array",arguments:[null]},channelMuteRx:{name:"Rx.ReplaySubject",arguments:["ChannelMute"]},DEFAULT_LABELS:{name:"Array",arguments:[null]}},{});var VGView=function(container,parentView,className){CloseableView.call(this),this.container=container,this.parent=parentView,this.el=window.document.createElement("div"),Utils.addMethod(this.el,"getView",stjs.bind(this,function(){return this})),this.parent.addChild(this),Utils.isNotBlank(className)&&(this.el.className=className)};VGView=stjs.extend(VGView,CloseableView,[],function(constructor,prototype){prototype.el=null,prototype.container=null,prototype.parent=null,prototype.render=function(template){var comment=window.document.createComment(Utils.constructorName(this));this.el.innerHTML=template,this.container.appendChild(comment),this.container.appendChild(this.el)},prototype.toggleActive=function(el){var active=!1;return null!=el&&(active=el.classList.toggle("active")),active},constructor.findIndex=function(collection,el){for(var i=0;i<collection.length;i++)if(collection[i].isEqualNode(el))return i;return-1},constructor.offsetLeft=function(el){return el.getBoundingClientRect().left},constructor.offsetX=function(clientX,el){return clientX-VGView.offsetLeft(el)},constructor.offsetTop=function(el){return el.getBoundingClientRect().top},constructor.offsetY=function(clientY,el){return clientY-VGView.offsetTop(el)},constructor.toggleCollectionClass=function(collection,className){for(var i=collection.length-1;i>=0;i--)collection[i].classList.toggle(className)},constructor.toggleListClass=function(collection,className){for(var i=collection.length-1;i>=0;i--)collection[i].classList.toggle(className)},constructor.removeAll=function(collection){Utils.forEachElement(collection,function(el){el.outerHTML=""})},prototype.addHandlers=function(eventsObj){Utils.forEach(eventsObj,stjs.bind(this,function(handler,typeSelector){var typeSelectorArr=typeSelector.split(" "),type=typeSelectorArr[0],el=this.el.querySelector(typeSelectorArr[1]),useCapture=Boolean(typeSelectorArr[2]);null!=el&&null!=type&&null!=handler&&el.addEventListener(type,handler,useCapture)}))}},{el:"Element",container:"Element",parent:"CloseableView",children:{name:"Array",arguments:["CloseableView"]}},{});var RetryWithDelay=function(){};RetryWithDelay=stjs.extend(RetryWithDelay,null,[],function(constructor,prototype){constructor.create=function(maxRetries,retryDelayMillis){var retryCount=new MutableInt(0);return function(attempts){return attempts.flatMap(function(errorNotification){return++retryCount.value<maxRetries?Rx.Observable.timer(retryDelayMillis):Rx.Observable["throw"](errorNotification)})}}},{},{});var DashifiedMp4SegmentedVideoStream=function(moovbuf,segments,dataSrc,desc,sampleDuration){SegmentedStream.call(this),this.desc=desc,this.moovbuf=moovbuf,this.segments=segments,this.dataSrc=dataSrc,this.sampleDuration=sampleDuration,this.timecode=desc.timecode,this.timescale=desc.timescale,this.mimeType=this.getDashDescriptor().mimeType,this.codecs=this.getDashDescriptor().codecs};DashifiedMp4SegmentedVideoStream=stjs.extend(DashifiedMp4SegmentedVideoStream,SegmentedStream,[],function(constructor,prototype){prototype.desc=null,prototype.segments=null,prototype.moovbuf=null,prototype.dataSrc=null,prototype.sampleDuration=0,prototype.timecode=null,prototype.timescale=0,prototype.getFrameCount=function(){return stjs.trunc(stjs.trunc(this.desc.duration/this.sampleDuration))},prototype.getDashDescriptor=function(){return this.desc},prototype.getDashInit=function(onDone,onError){onDone(this.moovbuf)},prototype.loadSegment=function(segmentIdx,onDone,onError){var segment=this.segments[segmentIdx],array=new Int8Array(segment.header.byteLength+DashStreamUtils.segmentSize(segment));array.set(new Int8Array(segment.header),0);var merged=new DashSegmentDataInterval;merged.dataFrom=segment.dataIntervals[0].dataFrom,merged.dataTo=segment.dataIntervals[segment.dataIntervals.length-1].dataTo;var disposable=this.fetchSingle(merged).doOnCompleted(function(){return onDone(array.buffer)}).subscribe(function(response){for(var offset=stjs.trunc(segment.header.byteLength),i=0;i<segment.dataIntervals.length;i++){var interval=segment.dataIntervals[i],subarray=response.slice(stjs.trunc(interval.dataFrom-merged.dataFrom),stjs.trunc(interval.dataTo-merged.dataFrom));array.set(subarray,offset),offset+=interval.dataTo-interval.dataFrom}},function(e){return onError(e)});return stjs.bind(disposable,"dispose")},prototype.fetchSingle=function(dataInterval){return Rx.Observable.create(stjs.bind(this,function(o){return this.dataSrc.fetch(dataInterval.dataFrom,dataInterval.dataTo,function(data){o.onNext(new Int8Array(data)),o.onCompleted()},stjs.bind(o,"onError"))}))}},{desc:"DashDescriptor",segments:{name:"Array",arguments:["DashSegment"]},moovbuf:"ArrayBuffer",dataSrc:"DataSrc",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var RxUtil=function(){};RxUtil=stjs.extend(RxUtil,null,[],function(constructor,prototype){constructor.split=function(from,predicate){var scan=from.scan(function(list,item){return 0!=list.length&&predicate(list,item)&&(list=new Array),list.push(item),list},new Array),tokens=scan.bufferWithCount(2,1).flatMap(function(ll){return 1==ll.length||ll[0]!=ll[1]?Rx.Observable.just(ll[0]):Rx.Observable.empty()});return tokens},constructor.doOnFirst=function(source,action){var isFirst=new MutableBoolean((!0));return source.doOnNext(function(item){isFirst.value&&(isFirst.value=!1,action(item))})},constructor.sequential=function(src,sequenceSelector,sequence){var lastSeqIdx=new MutableInt(0),q=new PriorityQueue(function(c1,c2){return sequenceSelector(c1)-sequenceSelector(c2)}),sequential=src.flatMap(function(x){var c=x,res=new Array;do{var seq=sequenceSelector(c);if(seq!=sequence[lastSeqIdx.value]){q.add(c);break}lastSeqIdx.value++,res.push(c)}while(null!=(c=q.poll()));return Rx.Observable.from(res)});return sequential},constructor.takeWhileWithFinalValue=function(periodicReq,whileCondition){return Rx.Observable.create(function(observer){return periodicReq.subscribe(function(item){observer.onNext(item),whileCondition(item)||observer.onCompleted()},function(err){observer.onError(err)},function(){observer.onCompleted()})})},constructor.firstOutIgnoreNext=function(source){return Rx.Observable.create(function(observer){var oneOut=new MutableBoolean((!1));return source.subscribe(function(t){oneOut.value||(oneOut.value=!0,observer.onNext(t))},function(e){observer.onError(e)},function(){observer.onCompleted()})})}},{},{});var Mp4Loader=function(dataSrc,onDone,onError){this.dataSrc=dataSrc,this.onDone=onDone,this.onError=onError};Mp4Loader=stjs.extend(Mp4Loader,null,[],function(constructor,prototype){prototype.moovParsed=!1,prototype.dataSrc=null,prototype.onDone=null,prototype.onError=null,prototype.inputMp4Box=null,prototype.load=function(){this.inputMp4Box=new MP4Box((!1)),this.inputMp4Box.onReady=stjs.bind(this,function(){this.moovParsed=!0,this.inputMp4Box.flush(),this.onDone(this.inputMp4Box)}),this.loadChunk(0,1e4)},prototype.loadChunk=function(chunkStart,chunkEnd){this.dataSrc.fetch(chunkStart,chunkEnd,stjs.bind(this,function(buf){var buffer=buf;buffer.fileStart=chunkStart,buffer.fileStart!=chunkStart&&(buffer=buffer.slice(0),buffer.fileStart=chunkStart);var nextStart=this.inputMp4Box.appendBuffer(buffer);this.moovParsed||(nextStart!=chunkStart?this.loadChunk(nextStart,nextStart+1048576):this.onError("mp4 parser went into a deadlock"))}),this.onError)},constructor.loadMp4=function(dataSrc,onDone,onError){new Mp4Loader(dataSrc,onDone,onError).load()},constructor.parseMoov=function(buf){var inputMp4Box=new MP4Box((!1)),moovParsed=new MutableBoolean((!1));inputMp4Box.onReady=function(){moovParsed.value=!0,inputMp4Box.flush()};var _buf=buf;return _buf.fileStart=0,inputMp4Box.appendBuffer(_buf),moovParsed.value?inputMp4Box:null},constructor.parseMoof=function(buf){var inputMp4Box=new MP4Box((!1)),_buf=buf;return _buf.fileStart=0,inputMp4Box.appendBuffer(_buf),inputMp4Box}},{dataSrc:"DataSrc",onDone:{name:"Callback1",arguments:["MP4Box"]},onError:{name:"Callback1",arguments:["Object"]},inputMp4Box:"MP4Box"},{});var HotkeyManager=function(log){ObjectEvents.call(this),this.log=log,this._keyHistory="",this._keyUpHistory="",this._curShortcut=[],this.shortcuts={},this._groups={},this._descriptions={},this._summary={},this._allowInputs={},this._lastIsTriggered=!1,this.disable=!1,this.initKeyDown=stjs.bind(this,function(e){return this._keyDown(e)}),this.initKeyUp=stjs.bind(this,function(e){return this._keyUp(e)}),this.onFullScreenChange=stjs.bind(this,function(e){return this._curShortcut=[]})};HotkeyManager=stjs.extend(HotkeyManager,ObjectEvents,[],function(constructor,prototype){constructor.KEYS={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,"*":106,"+":107,"-":189,";":186,"=":187,",":188,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,'"':222,space:32,esc:27,"?":"16+191",del:46},constructor.HOTKEYS_OKAY="hotkeysenabled",prototype.log=null,prototype.initKeyUp=null,prototype.initKeyDown=null,prototype.onFullScreenChange=null,prototype._summary=null,prototype._allowInputs=null,prototype._lastIsTriggered=!1,prototype._descriptions=null,prototype._groups=null,prototype.shortcuts=null,prototype._curShortcut=null,prototype._keyUpHistory=null,prototype._keyHistory=null,prototype._lastEscTime=0,prototype.disable=!1,prototype.bindedElement=null,prototype.bindedDocument=null,prototype.bindedWindow=null,prototype.enableHotKeysForWindow=function(window){this.destruct(),this.bindedWindow=window,this.bindedWindow.addEventListener("keydown",this.initKeyDown),this.bindedWindow.addEventListener("keyup",this.initKeyUp),this.bindedWindow.document.body.addEventListener("webkitfullscreenchange",this.onFullScreenChange)},prototype.enableHotKeysForDocument=function(document){this.destruct(),this.bindedDocument=document,this.bindedDocument.addEventListener("keydown",this.initKeyDown),this.bindedDocument.addEventListener("keyup",this.initKeyUp),this.bindedDocument.body.addEventListener("webkitfullscreenchange",this.onFullScreenChange)},prototype.enableHotKeysForElement=function(el){this.destruct(),this.bindedElement=el,this.bindedElement.addEventListener("keydown",this.initKeyDown),this.bindedElement.addEventListener("keyup",this.initKeyUp),this.bindedElement.addEventListener("webkitfullscreenchange",this.onFullScreenChange)},prototype.setDisable=function(disable){this.disable=disable},constructor.enableHotkeysForInput=function(input){input.setAttribute(HotkeyManager.HOTKEYS_OKAY,"true")},constructor.isHotkeysEnabled=function(el){var isOnInput=["textarea","input"].indexOf(el.nodeName.toLowerCase())>=0||1==el.contentEditable,forceEnable=Utils.isNotBlank(el.getAttribute(HotkeyManager.HOTKEYS_OKAY));return!!forceEnable||!isOnInput},prototype.destruct=function(){null!=this.bindedWindow&&(this.bindedWindow.removeEventListener("keydown",this.initKeyDown),this.bindedWindow.removeEventListener("keyup",this.initKeyUp),this.bindedWindow.document.body.removeEventListener("webkitfullscreenchange",this.onFullScreenChange)),null!=this.bindedDocument&&(this.bindedDocument.removeEventListener("keydown",this.initKeyDown),this.bindedDocument.removeEventListener("keyup",this.initKeyUp),this.bindedDocument.body.removeEventListener("webkitfullscreenchange",this.onFullScreenChange)),null!=this.bindedElement&&(this.bindedElement.removeEventListener("keydown",this.initKeyDown),this.bindedElement.removeEventListener("keyup",this.initKeyUp),this.bindedElement.document.body.removeEventListener("webkitfullscreenchange",this.onFullScreenChange))},prototype._fireShortcut=function(e,isKeyDown){var history=(e.keyCode,isKeyDown?this._keyHistory:this._keyUpHistory);for(var shortcut in this.shortcuts){var start=Math.max(0,history.length-shortcut.length-1),end=history.length;if(history.substring(start,end).equals(" "+shortcut))for(var scArray=this.shortcuts[shortcut],i=0;i<scArray.length;i++){var shortcutObj=scArray[i],func=shortcutObj.func;isKeyDown&&shortcutObj.options.onKeyUp||!isKeyDown&&!shortcutObj.options.onKeyUp||null==this._allowInputs[func.toString()]&&this._lastIsTriggered||func.apply(void 0,[e,this._groups[shortcut],this._descriptions[shortcut]])}}},constructor.notIn=function(key,map){return null==map[key]},prototype._keyDown=function(e){if(!this.disable&&HotkeyManager.isHotkeysEnabled(e.target)){var code=e.keyCode;if(this._lastIsTriggered!=HotkeyManager.isHotkeysEnabled(e.target)&&(this._keyHistory=""),this._lastIsTriggered=HotkeyManager.isHotkeysEnabled(e.target),27==code){if(0!=this._lastEscTime&&Utils.currentTimeMillis()-this._lastEscTime<200)return;this._lastEscTime=Utils.currentTimeMillis()}if(91==code||e.metaKey)return void(this._curShortcut=[]);if(!e.ctrlKey&&this._curShortcut.indexOf(HotkeyManager.getKeyCode("ctrl"))>=0&&this._curShortcut.splice(this._curShortcut.indexOf(HotkeyManager.getKeyCode("ctrl")),1),
!e.shiftKey&&this._curShortcut.indexOf(HotkeyManager.getKeyCode("shift"))>=0&&this._curShortcut.splice(this._curShortcut.indexOf(HotkeyManager.getKeyCode("shift")),1),20==code)return;this._curShortcut.indexOf(code)<0&&this._curShortcut.push(code),this._keyHistory+=" "+this._curShortcut.join("+"),this._fireShortcut(e,!0)}},prototype._keyUp=function(e){if(!this.disable){var code=e.keyCode;if(91==code||e.metaKey)return;27==code&&(this._lastEscTime=0),this._curShortcut.splice(this._curShortcut.indexOf(code),1),this._keyUpHistory+=" "+code,this._fireShortcut(e,!1)}},prototype.addShortcut=function(keyChain,func,options){var shortcut=null;options.ignoreSummary||(options.group=Utils.defaultString(options.group,""),options.description=Utils.defaultString(options.description,""),HotkeyManager.notIn(options.group,this._summary)&&(this._summary[options.group]={}),shortcut=Array.isArray(keyChain)?keyChain.constructor.join(", "):keyChain,this._summary[options.group][shortcut]=options.description);var keyChainArrStr=HotkeyManager._parseKeyChain(keyChain);this._groups[keyChainArrStr]=options.group,this._descriptions[keyChainArrStr]=options.description,this._allowInputs[func.toString()]=options.allowInputs,this.shortcuts[keyChainArrStr]=[HotkeyManager.shortCutObj(func,options)],options.ignoreSummary||this.fireEvent("added",{shortcut:shortcut,description:this._descriptions[keyChainArrStr],groups:this._groups[keyChainArrStr]})},constructor.ShortCut=function(){},constructor.ShortCut=stjs.extend(constructor.ShortCut,null,[],function(constructor,prototype){prototype.func=null,prototype.options=null},{func:{name:"Callback1",arguments:["DOMEvent"]},options:"KeyOptions"},{}),constructor.shortCutObj=function(func,options){var o=new HotkeyManager.ShortCut;return o.func=func,o.options=options,o},constructor._parseKeyChain=function(keyChain){var keyChainArr=keyChain.split(" "),result=[];return keyChainArr.forEach(function(shortcut){for(var bits=shortcut.split("-"),shortcutResult=[],j=0;j<bits.length;j++){var bit=bits[j].toLowerCase();if(bit.equals("")){if(!(j>0&&bits[j-1].equals("")))continue;bit="-"}shortcutResult.push(HotkeyManager.getKeyCode(bit))}result.push(shortcutResult.join("+"))}),result.join(" ")},constructor.getKeyCode=function(bit){return HotkeyManager.KEYS[bit]}},{KEYS:{name:"Map",arguments:[null,null]},log:"Log",initKeyUp:{name:"Callback1",arguments:["DOMEvent"]},initKeyDown:{name:"Callback1",arguments:["DOMEvent"]},onFullScreenChange:{name:"Callback1",arguments:["DOMEvent"]},_summary:{name:"Map",arguments:[null,{name:"Map",arguments:[null,"Object"]}]},_allowInputs:{name:"Map",arguments:[null,"Object"]},_descriptions:{name:"Map",arguments:[null,"Object"]},_groups:{name:"Map",arguments:[null,"Object"]},shortcuts:{name:"Map",arguments:[null,{name:"Array",arguments:["HotkeyManager.ShortCut"]}]},_curShortcut:{name:"Array",arguments:["Object"]},bindedElement:"Element",bindedDocument:"Document",bindedWindow:"Window",events:{name:"Map",arguments:[null,{name:"Array",arguments:[{name:"Callback1",arguments:["Object"]}]}]},listenAlls:{name:"Array",arguments:[{name:"Callback2",arguments:[null,"Object"]}]},mandatoryEvents:{name:"Map",arguments:[null,{name:"Array",arguments:["Object"]}]}},{}),function(){for(var i=0;i<10;i++)HotkeyManager.KEYS["num-"+i]=i+95,HotkeyManager.KEYS[""+i]=i+48;for(var i=1;i<25;i++)HotkeyManager.KEYS["f"+i]=i+111;for(var i=65;i<91;i++){var lowerCase=String.fromCharCode(i).toLowerCase();HotkeyManager.KEYS[lowerCase]=i}}();var EbuSubs=function(){};EbuSubs=stjs.extend(EbuSubs,null,[],function(constructor,prototype){constructor.HEADER_SIZE=1024,constructor.TTI_SIZE=128,constructor.TEXT_FIELD_CRLF=138,constructor.TEXT_FIELD_TERMINATOR=143,constructor.MODE_SYMBOLS_RANGE_FROM=128,constructor.MODE_SYMBOLS_RANGE_TO=133,constructor.fromEbuSubs=function(ttis,timeline){var fun=function(tti,i,arr){var entry=new SubtitleEntry,tcin=tti.getTimecodeIn(),tcout=tti.getTimecodeOut(),frameIn=timeline.getFrameByTimecode(tcin),frameOut=timeline.getFrameByTimecode(tcout);return entry.startMsec=stjs.trunc(1e3*timeline.getSecByFrame(frameIn)),entry.endMsec=stjs.trunc(1e3*timeline.getSecByFrame(frameOut)),entry.startTv=timeline.getTvByFrame(frameIn),entry.endTv=timeline.getTvByFrame(frameOut),entry.notes=tti.text,entry.timeCodeIn=tcin,entry.timeCodeOut=tcout,entry},entries=ttis.map(fun),subs=new Subtitles;return subs.rows=entries,subs},constructor.parse=function(f,timeline,log){var ttis=EbuSubs.parseFile(f,log),fromEbuSubs=EbuSubs.fromEbuSubs(ttis,timeline);return fromEbuSubs},constructor.probe=function(f,log){var parseFile=EbuSubs.parseFile(f,log);if(null==parseFile)return-1;for(var score=0,i=0;i<parseFile.length;i++){var tti=parseFile[i],secIn=3600*tti.timeCodeInHours+60*tti.timeCodeInMinutes+tti.timeCodeInSeconds,secOut=3600*tti.timeCodeOutHours+60*tti.timeCodeOutMinutes+tti.timeCodeOutSeconds;secOut>secIn&&score++,secOut<secIn&&score--}return score},constructor.parseFile=function(f,log){var data=new DataView(f);if(data.byteLength>EbuSubs.HEADER_SIZE){var h=EbuSubs.parseHeader(data);if(EbuSubs.isHeaderValid(h)){var ttis=EbuSubs.parseTTI(data,h,log);return ttis}}return null},constructor.VALID_CODEPAGES_SORTED=[437,850,860,863,865],constructor.isHeaderValid=function(h){var codePageNumber;try{codePageNumber=Integer.parseInt(h.codePageNumber)}catch(nfe){return!1}return Utils.binarySearch0(EbuSubs.VALID_CODEPAGES_SORTED,codePageNumber)!=-1},constructor.parseHeader=function(buffer){var header=new EbuSubs.EbuHeader;return header.codePageNumber=Platform.ascii(buffer,0,3),header.diskFormatCode=Platform.ascii(buffer,3,8),header.displayStandardCode=Platform.ascii(buffer,11,1),header.characterCodeTableNumber=Platform.ascii(buffer,12,2),header.languageCode=Platform.ascii(buffer,14,2),header.originalProgrammeTitle=Platform.ascii(buffer,16,32),header.originalEpisodeTitle=Platform.ascii(buffer,48,32),header.translatedProgrammeTitle=Platform.ascii(buffer,80,32),header.translatedEpisodeTitle=Platform.ascii(buffer,112,32),header.translatorsName=Platform.ascii(buffer,144,32),header.translatorsContactDetails=Platform.ascii(buffer,176,32),header.subtitleListReferenceCode=Platform.ascii(buffer,208,16),header.creationDate=Platform.ascii(buffer,224,6),header.revisionDate=Platform.ascii(buffer,230,6),header.revisionNumber=Platform.ascii(buffer,236,2),header.totalNumberOfTextAndTimingInformationBlocks=Platform.ascii(buffer,238,5),header.totalNumberOfSubtitles=Platform.ascii(buffer,243,5),header.totalNumberOfSubtitleGroups=Platform.ascii(buffer,248,3),header.maximumNumberOfDisplayableCharactersInAnyTextRow=Platform.ascii(buffer,251,2),header.maximumNumberOfDisplayableRows=Platform.ascii(buffer,253,2),header.timeCodeStatus=Platform.ascii(buffer,255,1),header.timeCodeStartOfProgramme=Platform.ascii(buffer,256,8),header},constructor.parseTTI=function(buffer,header,log){var result=new Array,offset=EbuSubs.HEADER_SIZE;header.diskFormatCode.startsWith("STL24.01")||header.diskFormatCode.startsWith("STL25.01")||header.diskFormatCode.startsWith("STL30.01")||log.warn("Unknown disk format code: "+header.diskFormatCode+", was set to defult value: 24");for(var isISO_6937="00".equals(header.characterCodeTableNumber);offset+EbuSubs.TTI_SIZE<buffer.byteLength;){var tti=new EbuSubs.EbuTextTimeInfo;tti.offset=offset,tti.subtitleGroupNumber=buffer.getUint8(offset),tti.subtitleNumber=256*buffer.getUint8(offset+2)+buffer.getUint8(offset+1),tti.extensionBlockNumber=buffer.getUint8(offset+3),tti.cumulativeStatus=buffer.getUint8(offset+4),tti.timeCodeInHours=buffer.getUint8(offset+5+0),tti.timeCodeInMinutes=buffer.getUint8(offset+5+1),tti.timeCodeInSeconds=buffer.getUint8(offset+5+2),tti.timeCodeInFrames=buffer.getUint8(offset+5+3),tti.timeCodeOutHours=buffer.getUint8(offset+9+0),tti.timeCodeOutMinutes=buffer.getUint8(offset+9+1),tti.timeCodeOutSeconds=buffer.getUint8(offset+9+2),tti.timeCodeOutFrames=buffer.getUint8(offset+9+3),tti.verticalPosition=buffer.getUint8(offset+13),tti.justificationCode=buffer.getUint8(offset+14),tti.commentFlag=buffer.getUint8(offset+15);for(var sb="",i=16;i<EbuSubs.TTI_SIZE;i++){var bi=buffer.getUint8(offset+i);if(bi==EbuSubs.TEXT_FIELD_TERMINATOR)break;if(!EbuSubs.isTextModeChange(bi)&&!EbuSubs.isColorSymbol(bi))if(bi==EbuSubs.TEXT_FIELD_CRLF)sb+="\n";else if(isISO_6937&&EbuSubs.isCombining(bi)){if(i<EbuSubs.TTI_SIZE-1){var bNext=buffer.getUint8(offset+i+1);if(EbuSubs.isCharacter(255&bNext)){var c=EbuSubs.combineChars(bi,255&bNext);sb+=c,i++}}}else if(EbuSubs.isCharacter(bi)){var c=Platform.fromCharCode(bi);sb+=c}}tti.text=sb,result.push(tti),offset+=EbuSubs.TTI_SIZE}return result},constructor.CombinedChars=function(prefix,toChars,fromChars){this.prefix=prefix,this.fromChars=fromChars,this.toChars=toChars},constructor.CombinedChars=stjs.extend(constructor.CombinedChars,null,[],function(constructor,prototype){prototype.prefix=0,prototype.fromChars=null,prototype.toChars=null},{},{}),constructor.combinedChars=new Array,constructor.combineChars=function(prefix,val){for(var c=String.fromCharCode(val),i=0;i<EbuSubs.combinedChars.length;i++){var cc=EbuSubs.combinedChars[i];if(cc.prefix==prefix){var idx=cc.fromChars.indexOf(c);if(idx!=-1)return cc.toChars.substring(idx,idx+1)}}return c},constructor.CODE_TABLE=["US-ASCII","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8"],constructor.isColorSymbol=function(bi){return bi>=0&&bi<=23},constructor.isCharacter=function(bi){return bi>=32&&bi<=127||bi>=161},constructor.isCombining=function(bi){return bi>=193&&bi<=207},constructor.isTextModeChange=function(bi){return bi>=EbuSubs.MODE_SYMBOLS_RANGE_FROM&&bi<=EbuSubs.MODE_SYMBOLS_RANGE_TO},constructor.EbuHeader=function(){},constructor.EbuHeader=stjs.extend(constructor.EbuHeader,null,[],function(constructor,prototype){prototype.codePageNumber=null,prototype.diskFormatCode=null,prototype.displayStandardCode=null,prototype.characterCodeTableNumber=null,prototype.languageCode=null,prototype.originalProgrammeTitle=null,prototype.originalEpisodeTitle=null,prototype.translatedProgrammeTitle=null,prototype.translatedEpisodeTitle=null,prototype.translatorsName=null,prototype.translatorsContactDetails=null,prototype.subtitleListReferenceCode=null,prototype.creationDate=null,prototype.revisionDate=null,prototype.revisionNumber=null,prototype.totalNumberOfTextAndTimingInformationBlocks=null,prototype.totalNumberOfSubtitles=null,prototype.totalNumberOfSubtitleGroups=null,prototype.maximumNumberOfDisplayableCharactersInAnyTextRow=null,prototype.maximumNumberOfDisplayableRows=null,prototype.timeCodeStatus=null,prototype.timeCodeStartOfProgramme=null,prototype.toString=function(){return Utils.jsonToString(this)}},{},{}),constructor.EbuTextTimeInfo=function(){},constructor.EbuTextTimeInfo=stjs.extend(constructor.EbuTextTimeInfo,null,[],function(constructor,prototype){prototype.offset=0,prototype.subtitleGroupNumber=0,prototype.subtitleNumber=0,prototype.extensionBlockNumber=0,prototype.cumulativeStatus=0,prototype.timeCodeInHours=0,prototype.timeCodeInMinutes=0,prototype.timeCodeInSeconds=0,prototype.timeCodeInFrames=0,prototype.timeCodeOutHours=0,prototype.timeCodeOutMinutes=0,prototype.timeCodeOutSeconds=0,prototype.timeCodeOutFrames=0,prototype.verticalPosition=0,prototype.justificationCode=0,prototype.commentFlag=0,prototype.text=null,prototype.getTimecodeIn=function(){return Utils.hmsf(this.timeCodeInHours,this.timeCodeInMinutes,this.timeCodeInSeconds,this.timeCodeInFrames)},prototype.getTimecodeOut=function(){return Utils.hmsf(this.timeCodeOutHours,this.timeCodeOutMinutes,this.timeCodeOutSeconds,this.timeCodeOutFrames)}},{},{})},{VALID_CODEPAGES_SORTED:{name:"Array",arguments:[null]},combinedChars:{name:"Array",arguments:["EbuSubs.CombinedChars"]},CODE_TABLE:{name:"Array",arguments:[null]}},{}),function(){EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(193,"","AEIOUaeiou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(194,"","ACEILNORSUYZacegilnorsuyz")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(195,"","ACEGHIJOSUWYaceghijosuwy")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(196,"","AINOUainou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(197,"","AEIOUaeiou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(198,"","AGUagu")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(199,"","CEGIZcegiz")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(200,"","AEIOUYaeiouy")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(202,"","AUau")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(203,"","CGKLNRSTcklnrst")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(205,"","OUou")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(206,"","AEIUaeiu")),EbuSubs.combinedChars.push(new EbuSubs.CombinedChars(207,"","CDELNRSTZcdelnrstz"))}();var Cavena890=function(){};Cavena890=stjs.extend(Cavena890,null,[],function(constructor,prototype){constructor.LanguageIdDanish=7,constructor.LanguageIdEnglish=9,constructor.LanguageIdRussian=86,constructor.LanguageIdArabic=128,constructor.LanguageIdHebrew=143,constructor.LanguageIdChineseTraditional=144,constructor.LanguageIdChineseSimplified=145,constructor.hebrew=null,constructor.russian=null,constructor.noencoding=null,constructor.encodings=[],constructor.textLength=51,constructor.LANGID1_OFFSET=146,constructor.LANGID2_OFFSET=147,constructor.FONTNAME1_OFFSET=187,constructor.FONTNAME2_OFFSET=246,constructor.FONTNAME_SIZE=6,constructor.TEXTSTART_OFFSET=455,constructor.probe=function(buf){if(buf.byteLength<Cavena890.TEXTSTART_OFFSET)return-1;var view=new DataView(buf),_languageId1=view.getUint8(Cavena890.LANGID1_OFFSET),fontName1=(view.getUint8(Cavena890.LANGID2_OFFSET),Cavena890.isAsciiString(view,Cavena890.FONTNAME1_OFFSET,Cavena890.FONTNAME_SIZE)),fontName2=Cavena890.isAsciiString(view,Cavena890.FONTNAME2_OFFSET,Cavena890.FONTNAME_SIZE),score=0;if(!fontName1||!fontName2)return score;score=1,_languageId1==Cavena890.LanguageIdEnglish&&score++;for(var i=Cavena890.TEXTSTART_OFFSET,lastNumber=-1;i<view.byteLength-20;){var start=i-Cavena890.textLength,number=view.getUint16(start-16);lastNumber<number?score++:score--;var startFrame=Cavena890.uint24(view,start-14),endFrame=Cavena890.uint24(view,start-11);startFrame<endFrame?score++:score--,lastNumber=number,i+=128}return score},constructor.parse=function(_buf,timeline,log){var view=new DataView(_buf),_languageId1=view.getUint8(Cavena890.LANGID1_OFFSET),_languageId2=view.getUint8(Cavena890.LANGID2_OFFSET),fontName1=Platform.ascii(view,Cavena890.FONTNAME1_OFFSET,Cavena890.FONTNAME_SIZE),fontName2=Platform.ascii(view,Cavena890.FONTNAME2_OFFSET,Cavena890.FONTNAME_SIZE),languageId=_languageId2;(_languageId1==Cavena890.LanguageIdRussian||fontName1.startsWith("KYRIL")||fontName2.startsWith("KYRIL"))&&(languageId=Cavena890.LanguageIdRussian),(_languageId1==Cavena890.LanguageIdHebrew||fontName1.startsWith("HEBNOA")||fontName2.startsWith("HEBNOA"))&&(languageId=Cavena890.LanguageIdHebrew);var encoding=Cavena890.encodings[languageId];null==encoding&&(_languageId1!=Cavena890.LanguageIdEnglish&&log.warn("unknown encoding "+_languageId1+"/"+_languageId2+" "+fontName1+"/"+fontName2),encoding=Cavena890.noencoding);var subtitles=new Subtitles;subtitles.rows=[];for(var i=Cavena890.TEXTSTART_OFFSET;i<view.byteLength-20;){var start=i-Cavena890.textLength,startFrame=(view.getUint16(start-16),Cavena890.uint24(view,start-14)),endFrame=Cavena890.uint24(view,start-11),buf1=new DataView(_buf,start,Cavena890.textLength),buf2=new DataView(_buf,start+Cavena890.textLength+6,Cavena890.textLength),line1=Cavena890.makeString(buf1,encoding),line2=Cavena890.makeString(buf2,encoding),sub=new SubtitleEntry;sub.timeCodeIn=timeline.getTapeByFrame(startFrame),sub.timeCodeOut=timeline.getTapeByFrame(endFrame),sub.startTv=timeline.getTvByFrame(startFrame),sub.endTv=timeline.getTvByFrame(endFrame),sub.startMsec=stjs.trunc(1e3*timeline.getSecByFrame(startFrame)),sub.endMsec=stjs.trunc(1e3*timeline.getSecByFrame(endFrame)),sub.notes=[line1,line2].join(" "),subtitles.rows.push(sub),i+=128}return subtitles},constructor.makeString=function(buf1,encoding){for(var string="",i=0;i<buf1.byteLength;i++){var b=buf1.getInt8(i);if(127==b)break;var c=encoding[b];if(null==c){var cb=String.fromCharCode(b);string+=cb}else string+=c}return string},constructor.uint24=function(view,offset){return view.getUint16(offset)<<8|view.getUint8(offset+2)},constructor.isAsciiString=function(view,offset,len){for(var i=0;i<len;i++){var uint8=view.getUint8(offset+i);if(uint8<32||uint8>127)return!1}return!0}},{hebrew:{name:"Array",arguments:[null]},russian:{name:"Array",arguments:[null]},noencoding:{name:"Array",arguments:[null]},encodings:{name:"Array",arguments:[{name:"Array",arguments:[null]}]}},{}),function(){Cavena890.hebrew=new Array(256),Cavena890.russian=new Array(256),Cavena890.noencoding=new Array(256),Cavena890.encodings[Cavena890.LanguageIdRussian]=Cavena890.russian,Cavena890.encodings[Cavena890.LanguageIdHebrew]=Cavena890.hebrew,Cavena890.hebrew[64]="",Cavena890.hebrew[65]="",Cavena890.hebrew[66]="",Cavena890.hebrew[67]="",Cavena890.hebrew[68]="",Cavena890.hebrew[69]="",Cavena890.hebrew[70]="",Cavena890.hebrew[71]="",Cavena890.hebrew[73]="",Cavena890.hebrew[76]="",Cavena890.hebrew[77]="",Cavena890.hebrew[78]="",Cavena890.hebrew[79]="",Cavena890.hebrew[80]="",Cavena890.hebrew[81]="",Cavena890.hebrew[82]="",Cavena890.hebrew[84]="",Cavena890.hebrew[86]="",Cavena890.hebrew[87]="",Cavena890.hebrew[88]="",Cavena890.hebrew[89]="",Cavena890.hebrew[90]="",Cavena890.hebrew[75]="",Cavena890.hebrew[74]="",Cavena890.hebrew[72]="",Cavena890.hebrew[83]="",Cavena890.hebrew[85]="",Cavena890.russian[66]="",Cavena890.russian[69]="",Cavena890.russian[90]="",Cavena890.russian[86]="",Cavena890.russian[73]="",Cavena890.russian[78]="",Cavena890.russian[88]="",Cavena890.russian[81]="",Cavena890.russian[86]="",Cavena890.russian[83]="",Cavena890.russian[114]="",Cavena890.russian[105]="",Cavena890.russian[113]="",Cavena890.russian[110]="",Cavena890.russian[116]="",Cavena890.russian[92]="",Cavena890.russian[119]="",Cavena890.russian[70]="",Cavena890.russian[94]="",Cavena890.russian[68]="",Cavena890.russian[98]="",Cavena890.russian[115]="",Cavena890.russian[117]="",Cavena890.russian[100]="",Cavena890.russian[96]="",Cavena890.russian[106]="",Cavena890.russian[108]="",Cavena890.russian[71]="",Cavena890.russian[120]="",Cavena890.russian[122]="",Cavena890.russian[126]="",Cavena890.russian[109]="",Cavena890.russian[103]="",Cavena890.russian[121]="",Cavena890.russian[112]="",Cavena890.russian[118]="",Cavena890.russian[85]="",Cavena890.russian[125]="",Cavena890.russian[102]="",Cavena890.russian[124]="",Cavena890.russian[123]="",Cavena890.russian[64]="",Cavena890.russian[65]="",Cavena890.russian[72]="",Cavena890.russian[74]="",Cavena890.russian[75]="",Cavena890.russian[76]="",Cavena890.russian[77]="",Cavena890.russian[79]="",Cavena890.russian[80]="",Cavena890.russian[82]="",Cavena890.russian[84]="",Cavena890.russian[89]="",Cavena890.russian[97]="",Cavena890.russian[99]="",Cavena890.russian[101]="",Cavena890.russian[104]="",Cavena890.russian[107]="",Cavena890.russian[111]=""}();var Fairplay=function(video,options,log,errorRx){this.video=video,this.options=options,this.log=log,this.errorRx=errorRx,this.autoDisposables=new Rx.CompositeDisposable,this.autoDisposable(Rx.Observable.combineLatest(this.fetchCertificate(),Rx.Observable.fromEvent(video,"webkitneedkey"),stjs.bind(this,function(cert,event){return this.certificate=cert,this.onVideoWebkitNeedKey(event),!0})).subscribe())};Fairplay=stjs.extend(Fairplay,null,[],function(constructor,prototype){prototype.video=null,prototype.options=null,prototype.log=null,prototype.errorRx=null,prototype.certificate=null,prototype.autoDisposables=null,prototype.onVideoWebkitNeedKey=function(domEvent){this.log.debug("onVideoWebkitNeedKey()");var event=domEvent,keySystem="com.apple.fps.1_0",contentId=this.extractContentId(Utils.fromCharCodes(new Uint16Array(event.initData.buffer))),contentIdBuf=Utils.stringToArray(contentId).buffer,initData=this.concatInitDataIdAndCertificate(event.initData.buffer,contentIdBuf,this.certificate),keySession=this.createKeySession(keySystem,initData);null!=keySession&&(keySession.contentId=contentId,this.autoDisposable(Rx.Observable.fromEvent(keySession,"webkitkeyadded").subscribe(stjs.bind(this,"onKeySessionWebkitKeyAdded"))),this.autoDisposable(Rx.Observable.fromEvent(keySession,"webkitkeyerror").subscribe(stjs.bind(this,"onKeySessionWebkitKeyError"))),this.autoDisposable(Rx.Observable.fromEvent(keySession,"webkitkeymessage").subscribe(stjs.bind(this,"onKeySessionWebkitKeyMessage"))))},prototype.extractContentId=function(initDataUri){var part=initDataUri.split("skd://")[1];return part.indexOf(";")==-1?part:part.split(";",2)[1]},prototype.onKeySessionWebkitKeyAdded=function(e){this.log.debug("onKeySessionWebkitKeyAdded()")},prototype.onKeySessionWebkitKeyError=function(e){this.log.debug("onKeySessionWebkitKeyError()"),this.errorRx.onNext(new PlayerError("onKeySessionWebkitKeyError",PlayerError.FATAL,e))},prototype.onKeySessionWebkitKeyMessage=function(event){this.log.debug("onKeySessionWebkitKeyMessage()");var message=event.message,session=event.target;this.fetchLicense(session,message)},prototype.concatInitDataIdAndCertificate=function(initData,id,certificate){var size=initData.byteLength+4+id.byteLength+4+certificate.byteLength,offset=0,array=new Uint8Array(size),dataView=new DataView(array.buffer);return array.set(new Uint8Array(initData),offset),offset+=initData.byteLength,dataView.setUint32(offset,id.byteLength,!0),offset+=4,array.set(new Uint8Array(id),offset),offset+=id.byteLength,dataView.setUint32(offset,certificate.byteLength,!0),offset+=4,array.set(new Uint8Array(certificate),offset),array},prototype.createKeySession=function(keySystem,initData){if(this.log.debug("createKeySession()"),null==this.video.webkitKeys){if(!WebKitMediaKeys.isTypeSupported(keySystem,"video/mp4"))return this.errorRx.onNext(new PlayerError("Key System not supported "+keySystem,PlayerError.FATAL)),null;this.video.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))}if(null==this.video.webkitKeys)return this.errorRx.onNext(new PlayerError("Could not create WebKitMediaKeys",PlayerError.FATAL)),null;var keySession=this.video.webkitKeys.createSession("video/mp4",initData);return null==keySession?(this.errorRx.onNext(new PlayerError("Could not create key session",PlayerError.FATAL)),null):keySession},prototype.fetchCertificate=function(){return this.log.debug("fetchCertificate()"),new Http(this.log).requestBinary(stjs.bind(this,function(){return this.options.certUrl}),"","GET",{},!0).doOnNext(stjs.bind(this,function(buf){return this.log.debug("cert len="+buf.byteLength)})).doOnError(stjs.bind(this,function(err){return this.errorRx.onNext(new PlayerError("error fetching certificate",PlayerError.FATAL))}))},prototype.fetchLicense=function(session,message){this.log.debug("fetchLicense()");var headers={"Content-Type":"application/octet-stream"};new Http(this.log).requestBinary(stjs.bind(this,function(){return this.options.laUrl}),message,"POST",headers,!0).subscribe(stjs.bind(this,function(response){this.log.debug("license fetched"),session.update(new Uint8Array(response))}),stjs.bind(this,function(err){this.errorRx.onNext(new PlayerError("error fetching license",PlayerError.FATAL))}))},prototype.autoDisposable=function(disposable){this.autoDisposables.add(disposable)},prototype.close=function(){this.autoDisposables.dispose(),this.autoDisposables=null}},{video:"Video",options:"PlayerOptions.DRMFairplayOptions",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},certificate:"ArrayBuffer",autoDisposables:"Rx.CompositeDisposable"},{});var DynamicDash=function(videoSegmentedStream,audioDashStream,log,errorRx){if(this.videoSegmentedStream=videoSegmentedStream,this.audioDashStream=audioDashStream,this.log=log,this.errorRx=errorRx,this.hasAudio=null!=audioDashStream,this.hasVideo=null!=videoSegmentedStream,!this.hasVideo&&!this.hasAudio)throw errorRx.onNext(new PlayerError("no audio and no video streams!",PlayerError.FATAL)),new RuntimeException("no audio and no video streams!");this.hasAudio&&(this.rawAudioStream="audio/mpeg".equals(this.audioDashStream.mimeType)),this.audioToSet=[],this.autoDisposables=new Rx.CompositeDisposable};DynamicDash=stjs.extend(DynamicDash,null,[VideoSrc],function(constructor,prototype){prototype.log=null,prototype.errorRx=null,constructor.SOURCEOPEN="sourceopen",constructor.READYSTATE_CLOSED="closed",constructor.READYSTATE_OPEN="open",constructor.READYSTATE_ENDED="ended",constructor.BUFFER_ERROR="error",constructor.BUFFER_UPDATEEND="updateend",constructor.ABORT_IMPOSSIBLE=function(){},prototype.MIN_TIME=1e-4,prototype.VIDEO_END_THRESHOLD=.01,prototype.hasAudio=!1,prototype.hasVideo=!1,prototype.rawAudioStream=!1,prototype.mediaSource=null,prototype.video=null,prototype.videoBuffer=null,prototype.audioBuffer=null,prototype.videoQueriedQueue=null,prototype.videoLoadedQueue=null,prototype.audioQueriedQueue=null,prototype.audioLoadedQueue=null,prototype.audioDashStream=null,prototype.videoSegmentedStream=null,prototype.videoTimeupdateRx=null,prototype.videoSeekingRx=null,prototype.audioUpdateSubscription=null,prototype.audioToSet=null,prototype.audioInitInProgress=!1,prototype.audioInitialized=!1,prototype.lastAppendedVideoSegment=0,prototype.lastAppendedAudioSegment=0,prototype.lastAppendedResetterInterval=null,prototype.audioTimestampOffset=0,prototype.autoDisposables=null,constructor.VIDEO_PREBUFFER_TIME=15,constructor.AUDIO_PREBUFFER_TIME=15,prototype.reset=function(){this.video=null,this.mediaSource=null,this.videoBuffer=null,this.audioBuffer=null,this.videoQueriedQueue={},this.videoLoadedQueue={},this.audioQueriedQueue={},this.audioLoadedQueue={},clearInterval(this.lastAppendedResetterInterval),this.lastAppendedAudioSegment=-1,this.lastAppendedVideoSegment=-1},prototype.detach=function(){null!=this.video&&(this.autoDisposables.dispose(),this.autoDisposables=new Rx.CompositeDisposable,this.abortAllSegmentsLoading(this.videoQueriedQueue),this.abortAllSegmentsLoading(this.audioQueriedQueue),null!=this.video&&(this.video.src=""),this.reset())},prototype.attach=function(video){this.reset(),this.mediaSource=new MediaSource,this.autoDisposable(Rx.Observable.fromEvent(this.mediaSource,DynamicDash.SOURCEOPEN).doOnNext(stjs.bind(this,function(e){return this.initMediaSource()})).subscribe()),this.video=video,this.video.src=URL.createObjectURL(this.mediaSource)},prototype.canSetAudioWithoutReattach=function(audioDashStream){return this.hasAudio&&this.audioDashStream.mimeType==audioDashStream.mimeType},prototype.setAudio=function(audioDashStream){if(this.log.debug("set audio"),this.audioInitInProgress&&(this.log.debug("postponed setting audio. another audio init is in progress"),this.audioToSet.push(audioDashStream)),this.hasAudio=!0,this.rawAudioStream="audio/mpeg".equals(audioDashStream.mimeType),null==this.mediaSource||this.mediaSource.readyState!=DynamicDash.READYSTATE_OPEN&&this.mediaSource.readyState!=DynamicDash.READYSTATE_ENDED)return void(this.audioDashStream=audioDashStream);if(this.audioInitialized=!1,this.audioInitInProgress=!0,null==this.audioBuffer){var string=audioDashStream.mimeType+(null==audioDashStream.codecs?"":'; codecs="'+audioDashStream.codecs+'"');this.audioBuffer=this.mediaSource.addSourceBuffer(string),this.audioBuffer.addEventListener(DynamicDash.BUFFER_ERROR,function(_e){throw exception("audio source buffer error")}),this.audioBuffer.addEventListener("abort",stjs.bind(this,function(e){return this.log.debug("audio buffer abort",e)})),this.audioUpdateRx=Rx.Observable.fromEvent(this.audioBuffer,DynamicDash.BUFFER_UPDATEEND).filter(stjs.bind(this,function(x){return!this.audioBuffer.updating}))}null!=this.audioUpdateSubscription&&(this.audioUpdateSubscription.dispose(),this.audioUpdateSubscription=null);var cleared=this.clearAudioBufferRx(),setAudioSubscription=cleared.flatMap(stjs.bind(this,function(b){return this.log.debug("adding new audio"),this.audioDashStream=audioDashStream,this.initAudio()})).subscribe(stjs.bind(this,function(done){this.autoDisposable(this.audioDashStream.getUpdateRx().subscribe(stjs.bind(this,function(updatedStream){this.lastAppendedAudioSegment=-1,this.regularBuffersCheck()}))),this.audioUpdateSubscription=this.audioUpdateRx.subscribe(stjs.bind(this,function(_e){return this.audioUpdateEnd()})),this.autoDisposable(this.audioUpdateSubscription),this.audioTimestampOffset=audioDashStream.timestampOffset,this.audioInitialized=!0,this.audioInitInProgress=!1;var newAudio=this.audioToSet.shift();null!=newAudio&&this.setAudio(newAudio)}));this.autoDisposable(setAudioSubscription)},prototype.appendAudioBuffer=function(buffer){var appended=Rx.Observable.create(stjs.bind(this,function(observer){this.audioBuffer.updating?observer.onError("audio buffer updating"):(this.audioBuffer.appendBuffer(buffer),observer.onNext(!0),observer.onCompleted())}));return appended.retryWhen(stjs.bind(this,function(errors){return errors.flatMap(stjs.bind(this,function(err){return this.audioUpdateRx.take(1)}))}))},prototype.trySetDuration=function(){if(null!=this.audioBuffer&&this.audioBuffer.updating||null!=this.videoBuffer&&this.videoBuffer.updating){var updateRx=this.videoUpdateRx;null!=this.audioUpdateRx&&(updateRx=Rx.Observable.merge(this.videoUpdateRx,this.audioUpdateRx)),this.autoDisposable(updateRx.take(1).subscribe(stjs.bind(this,function(e){return this.trySetDuration()})))}else this.hasVideo?this.videoSegmentedStream.isDynamic()?this.mediaSource.duration=100500:this.mediaSource.duration=this.videoSegmentedStream.getDurationSec():this.audioDashStream.isDynamic()?this.mediaSource.duration=100500:this.mediaSource.duration=this.audioDashStream.getDurationSec(),this.log.debug("media source duration "+this.mediaSource.duration)},prototype.initAudio=function(){this.log.debug("adding audio init segment");var initSegmentBuffer=Rx.Observable.create(stjs.bind(this,function(observer){this.audioDashStream.getDashInit(function(buffer){observer.onNext(buffer),observer.onCompleted()},stjs.bind(this,function(x){var err=new PlayerError("can not load initialization segment",PlayerError.FATAL,this.audioDashStream.url);this.errorRx.onNext(err),observer.onError(err)}))})),initAppended=initSegmentBuffer.flatMap(stjs.bind(this,function(buffer){return null==buffer?(this.log.debug("special case for no init segment mp3 stream, triggering audio update end"),this.audioBuffer.appendBuffer(new ArrayBuffer(0)),Rx.Observable.just(!0)):this.appendAudioBuffer(buffer)}));return initAppended.doOnNext(stjs.bind(this,function(r){return this.log.debug("audio init done")}))},prototype.appendVideoInit=function(){this.log.debug("adding video init segment"),this.videoSegmentedStream.getDashInit(stjs.bind(this,function(buffer){null!=buffer&&null!=this.videoBuffer&&this.videoBuffer.appendBuffer(buffer)}),stjs.bind(this,function(x){this.errorRx.onNext(new PlayerError("can not load initialization segment",PlayerError.FATAL,this.videoSegmentedStream.url))}))},prototype.initMediaSource=function(){this.mediaSource.readyState!=DynamicDash.READYSTATE_OPEN||this.mediaSource.sourceBuffers.length>0||(this.log.debug("initializing media source"),this.hasVideo&&(this.videoBuffer=this.mediaSource.addSourceBuffer(this.videoSegmentedStream.mimeType+'; codecs="'+this.videoSegmentedStream.codecs+'"'),this.videoBuffer.addEventListener(DynamicDash.BUFFER_ERROR,function(_e){throw exception("video source buffer error")}),this.autoDisposable(this.videoSegmentedStream.getUpdateRx().subscribe(stjs.bind(this,function(updatedStream){this.lastAppendedVideoSegment=-1,this.regularBuffersCheck()}))),this.videoUpdateRx=Rx.Observable.fromEvent(this.videoBuffer,DynamicDash.BUFFER_UPDATEEND),
this.autoDisposable(this.videoUpdateRx.subscribe(stjs.bind(this,function(_e){return this.videoUpdateEnd()})))),this.trySetDuration(),this.hasVideo&&this.appendVideoInit(),this.hasAudio&&this.setAudio(this.audioDashStream),this.videoTimeupdateRx=Rx.Observable.fromEvent(this.video,VideoElement.TIMEUPDATE),this.videoSeekingRx=Rx.Observable.fromEvent(this.video,VideoElement.SEEKING),this.autoDisposable(this.videoTimeupdateRx.subscribe(stjs.bind(this,function(_e){return this.regularBuffersCheck()}))),this.autoDisposable(this.videoSeekingRx.subscribe(stjs.bind(this,function(_e){return this.controlSegmentsRequests()}))),this.lastAppendedResetterInterval=setInterval(stjs.bind(this,function(){this.lastAppendedVideoSegment=-1,this.lastAppendedAudioSegment=-1}),3e4))},prototype.videoUpdateEnd=function(){var self=this;return this.log.debug("videoUpdateEnd"),null==self.videoBuffer?void this.log.debug("self.videoBuffer == null"):(self.processVideoLoadedQueue(),void(this.videoBufferUpdating(self)||(self.bufferedEnough(self.videoBuffer,DynamicDash.VIDEO_PREBUFFER_TIME)||self.queryVideoSegment(self.nextUnbufferedTime(self.videoBuffer)),self.mediaSource.readyState==DynamicDash.READYSTATE_ENDED||!self.bufferedEndOfStream()||this.videoBufferUpdating(self)||this.audioBufferUpdating(self)||(this.log.debug("end of stream"),self.mediaSource.endOfStream()))))},prototype.videoBufferUpdating=function(self){return null==self.videoBuffer&&this.log.debug("self.videoBuffer == null"),null!=self.videoBuffer&&self.videoBuffer.updating},prototype.audioBufferUpdating=function(self){return null!=self.audioBuffer&&self.audioBuffer.updating},prototype.audioUpdateEnd=function(){var self=this;return this.log.debug("audioUpdateEnd"),null==self.audioBuffer?void this.log.debug("self.audioBuffer == null"):(self.processAudioLoadedQueue(),void(this.audioBufferUpdating(self)||(self.bufferedEnough(self.audioBuffer,DynamicDash.AUDIO_PREBUFFER_TIME)||self.queryAudioSegment(self.nextUnbufferedTime(self.audioBuffer)),self.mediaSource.readyState==DynamicDash.READYSTATE_ENDED||!self.bufferedEndOfStream()||this.videoBufferUpdating(self)||this.audioBufferUpdating(self)||(this.log.debug("end of stream"),self.mediaSource.endOfStream()))))},prototype.regularBuffersCheck=function(){this.hasVideo&&null!=this.videoBuffer&&!this.videoBuffer.updating&&(this.bufferedEnough(this.videoBuffer,DynamicDash.VIDEO_PREBUFFER_TIME)||this.queryVideoSegment(this.nextUnbufferedTime(this.videoBuffer))),this.hasAudio&&this.audioInitialized&&null!=this.audioBuffer&&!this.audioBuffer.updating&&(this.bufferedEnough(this.audioBuffer,DynamicDash.AUDIO_PREBUFFER_TIME)||this.queryAudioSegment(this.nextUnbufferedTime(this.audioBuffer)))},prototype.controlSegmentsRequests=function(){this.abortUnneededSegmentsLoading(this.videoQueriedQueue,DynamicDash.VIDEO_PREBUFFER_TIME),this.abortUnneededSegmentsLoading(this.audioQueriedQueue,DynamicDash.AUDIO_PREBUFFER_TIME),this.regularBuffersCheck()},prototype.bufferedEndOfStream=function(){var bufferedVideoEnd,bufferedAudioEnd;if(this.hasVideo){if(this.videoSegmentedStream.isDynamic())return!1;if(null==this.videoBuffer)return!1;var bufV=this.videoBuffer.buffered;if(bufferedVideoEnd=bufV.length>0&&bufV.end(bufV.length-1)>=this.getTimelineEnd()-this.VIDEO_END_THRESHOLD,!this.hasAudio||!this.audioInitialized)return bufferedVideoEnd;var bufA=this.audioBuffer.buffered;return bufferedAudioEnd=bufA.length>0&&bufA.end(bufA.length-1)>=this.getTimelineEnd()-this.MIN_TIME,bufferedVideoEnd&&bufferedAudioEnd}if(this.hasAudio){var bufA=this.audioBuffer.buffered;return bufferedAudioEnd=bufA.length>0&&bufA.end(bufA.length-1)>=this.getTimelineEnd()-this.MIN_TIME}throw new RuntimeException("invalid state")},constructor.Infinity=1/0,prototype.videoUpdateRx=null,prototype.audioUpdateRx=null,prototype.nextUnbufferedTime=function(sourceBuffer){for(var buf=sourceBuffer.buffered,t=this.video.currentTime,nextUnbuffered=t,i=0;i<buf.length;i++)if(t>=buf.start(i)&&t<=buf.end(i)){nextUnbuffered=buf.end(i);break}return nextUnbuffered<this.getTimelineEnd()?nextUnbuffered+this.MIN_TIME:DynamicDash.Infinity},prototype.nextBufferedTime=function(sourceBuffer,t){for(var buf=sourceBuffer.buffered,i=0;i<buf.length;i++)if(buf.start(i)>t)return buf.start(i);return DynamicDash.Infinity},prototype.bufferedEnough=function(sourceBuffer,bufferTime){var nextUnbufferedTime=this.nextUnbufferedTime(sourceBuffer);if(Math.abs(nextUnbufferedTime-this.video.currentTime)<=this.MIN_TIME&&this.video.readyState==this.video.constructor.HAVE_ENOUGH_DATA)return 0!=sourceBuffer.buffered.length;var desiredNextUnbufferedTime=Math.min(this.video.currentTime+bufferTime,this.getTimelineEnd()-this.MIN_TIME);return nextUnbufferedTime>=desiredNextUnbufferedTime},prototype.queryVideoSegment=function(time){this.log.debug("querying video segment. time="+time+" nextBuf="+this.nextBufferedTime(this.videoBuffer,time));var segmentedStream=this.videoSegmentedStream,segmentIdx=segmentedStream.getSegmentIdxByTime(time);this.log.debug("queryVideoSegment "+segmentIdx+" "+segmentedStream.url),this.lastAppendedVideoSegment!=segmentIdx&&this.querySegment(segmentedStream,segmentIdx,this.videoQueriedQueue,this.videoLoadedQueue,stjs.bind(this,"processVideoLoadedQueue"))},prototype.queryAudioSegment=function(time){this.log.debug("querying audio segment. time="+time+" nextBuf="+this.nextBufferedTime(this.audioBuffer,time));var segmentedStream=this.audioDashStream,segmentIdx=segmentedStream.getSegmentIdxByTime(time);this.lastAppendedAudioSegment!=segmentIdx&&this.querySegment(segmentedStream,segmentIdx,this.audioQueriedQueue,this.audioLoadedQueue,stjs.bind(this,"processAudioLoadedQueue"))},prototype.getTimelineEnd=function(){return this.hasAudio&&!this.hasVideo?this.audioDashStream.getDurationSec():this.hasAudio&&this.audioInitialized&&!this.audioDashStream.silenceAppended()?Math.min(this.videoSegmentedStream.getDurationSec(),this.audioDashStream.getDurationSec()):this.videoSegmentedStream.getDurationSec()},constructor.Key=function(){},constructor.Key=stjs.extend(constructor.Key,null,[],function(constructor,prototype){prototype.segmentIdx=0,prototype.segStartTime=0,prototype.segEndTime=0,prototype.toString=function(){return DynamicDash.keyToString(this.segmentIdx,this.segStartTime,this.segEndTime)}},{},{}),constructor.keyToString=function(segmentIdx,segStartTime,segEndTime){return segmentIdx+":"+segStartTime+":"+segEndTime},constructor.keyFromString=function(key){var split=key.split(":"),k=new DynamicDash.Key;return k.segmentIdx=Utils.toInt(split[0]),k.segStartTime=Utils.toDouble(split[1]),k.segEndTime=Utils.toDouble(split[2]),k},prototype.querySegment=function(segmentedStream,segmentIdx,queriedQueue,loadedQueue,onLoad){var segStartTime=segmentedStream.getSegmentStartTime(segmentIdx),segEndTime=segStartTime+segmentedStream.getSegmentDuration(segmentIdx),key=DynamicDash.keyToString(segmentIdx,segStartTime,segEndTime);if(null==queriedQueue[key]&&null==loadedQueue[key]){this.log.debug("requesting "+Utils.constructorName(segmentedStream)+" seg="+segmentIdx),queriedQueue[key]=DynamicDash.ABORT_IMPOSSIBLE;var callbackReceived=new MutableBoolean((!1)),abort=segmentedStream.loadSegment(segmentIdx,function(segment){null!=queriedQueue[key]&&(callbackReceived.value=!0,delete queriedQueue[key],loadedQueue[key]=segment,onLoad())},stjs.bind(this,function(_e){delete queriedQueue[key],this.errorRx.onNext(new PlayerError("can not load "+Utils.constructorName(segmentedStream)+" segment "+key,PlayerError.FATAL))}));callbackReceived.value||(queriedQueue[key]=abort)}},prototype.appendVideoSegment=function(segment){this.videoBuffer.appendBuffer(segment)},prototype.appendM4sAudioSegment=function(segment){this.audioBuffer.timestampOffset=this.audioTimestampOffset,this.audioBuffer.appendBuffer(segment)},prototype.appendRawAudioSegment=function(segmentIdx,segment){var startTime=this.audioDashStream.getSegmentStartTime(segmentIdx),duration=this.audioDashStream.getSegmentDuration(segmentIdx);this.audioBuffer.appendWindowStart=0,this.audioBuffer.appendWindowEnd=startTime+duration,this.audioBuffer.appendWindowStart=startTime,this.audioBuffer.timestampOffset=startTime+this.audioTimestampOffset,this.audioBuffer.appendBuffer(segment)},prototype.processVideoLoadedQueue=function(){var self=this;null!=this.videoBuffer&&(this.videoBuffer.updating||this.processLoadedQueue(this.videoLoadedQueue,stjs.bind(this,function(segmentIdx,segment){this.lastAppendedVideoSegment=segmentIdx,self.appendVideoSegment(segment)})))},prototype.processAudioLoadedQueue=function(){var self=this;this.audioBuffer.updating||this.processLoadedQueue(this.audioLoadedQueue,stjs.bind(this,function(segmentIdx,segment){this.lastAppendedAudioSegment=segmentIdx,self.rawAudioStream?self.appendRawAudioSegment(segmentIdx,segment):self.appendM4sAudioSegment(segment)}))},prototype.processLoadedQueue=function(queue,callback){var keys=[];if(Utils.forEach(queue,function(v,key){keys.push(DynamicDash.keyFromString(key))}),0!=keys.length){keys.sort(function(k1,k2){return stjs.trunc(k1.segStartTime-k2.segStartTime)});var key=keys[0],segmentIdx=key.segmentIdx,segment=queue[key.toString()];delete queue[key.toString()],callback(segmentIdx,segment)}},prototype.clearAudioBufferRx=function(){var o=Rx.Observable.just(!0);return null!=this.audioBuffer&&(this.audioBuffer.updating&&(o=this.audioUpdateRx.take(1).doOnNext(stjs.bind(this,function(x){return this.log.debug("abort() cought audioupdateend")})).map(function(e){return!0})),o=o.flatMap(stjs.bind(this,function(e){return this.audioQueriedQueue={},this.audioLoadedQueue={},this.log.debug("abort++"),this.audioBuffer.updating&&this.log.debug("unexpected audio source buffer state: updating=true"),this.mediaSource.readyState!=DynamicDash.READYSTATE_CLOSED&&(this.mediaSource.readyState==DynamicDash.READYSTATE_OPEN&&this.audioBuffer.abort(),this.audioBuffer.buffered.length>0)?(this.log.debug("removing buffered audio"),this.audioBuffer.remove(0,this.audioBuffer.buffered.end(this.audioBuffer.buffered.length-1)),this.audioUpdateRx.take(1).map(function(e2){return!0})):Rx.Observable.just(!0)})).doOnNext(stjs.bind(this,function(b){return this.lastAppendedAudioSegment=-1}))),o},prototype.clearAudioBuffer=function(){this.autoDisposable(this.clearAudioBufferRx().subscribe(stjs.bind(this,function(b){return this.audioUpdateEnd()})))},prototype.abortSegment=function(queue,key){var abort=queue[key];delete queue[key],abort()},prototype.abortUnneededSegmentsLoading=function(queue,bufferTime){var allowedStart=this.video.currentTime,allowedEnd=allowedStart+bufferTime;Utils.forEach(queue,stjs.bind(this,function(v,key){var split=key.split(":"),segStartTime=parseFloat(split[2]),segEndTime=parseFloat(split[3]);(segStartTime>=allowedEnd||segEndTime<=allowedStart)&&this.abortSegment(queue,key)}))},prototype.abortAllSegmentsLoading=function(queue){Utils.forEach(queue,stjs.bind(this,function(v,key){this.abortSegment(queue,key)}))},prototype.autoDisposable=function(disposable){this.autoDisposables.add(disposable)}},{log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},ABORT_IMPOSSIBLE:"Callback0",mediaSource:"MediaSource",video:"Video",videoBuffer:"SourceBuffer",audioBuffer:"SourceBuffer",videoQueriedQueue:{name:"Map",arguments:[null,"Callback0"]},videoLoadedQueue:{name:"Map",arguments:[null,"ArrayBuffer"]},audioQueriedQueue:{name:"Map",arguments:[null,"Callback0"]},audioLoadedQueue:{name:"Map",arguments:[null,"ArrayBuffer"]},audioDashStream:"SegmentedAudioStream",videoSegmentedStream:"SegmentedStream",videoTimeupdateRx:{name:"Rx.Observable",arguments:["DOMEvent"]},videoSeekingRx:{name:"Rx.Observable",arguments:["DOMEvent"]},audioUpdateSubscription:"Rx.Disposable",audioToSet:{name:"Array",arguments:["SegmentedAudioStream"]},lastAppendedResetterInterval:"TimeoutHandler",autoDisposables:"Rx.CompositeDisposable",videoUpdateRx:{name:"Rx.Observable",arguments:["DOMEvent"]},audioUpdateRx:{name:"Rx.Observable",arguments:["DOMEvent"]}},{});var DRM=function(drmOptions,drmInfo,log,errorRx){this.drmOptions=drmOptions,this.drmInfo=drmInfo,this.log=log,this.errorRx=errorRx,this.keySystemRx=new Rx.ReplaySubject(1),this.http=new Http(log),this.autoDisposables=new Rx.CompositeDisposable,this.autoDisposable(Rx.Observable.from(drmInfo).map(function(i){return i.keySystem}).distinct().flatMap(stjs.bind(this,function(ks){var config=this.getConfigForKeySystem(ks);return Rx.Observable.fromPromise(window.navigator.requestMediaKeySystemAccess(ks,[config])).flatMapObserver(function(k,i){return Rx.Observable.just(k)},function(err){return err.message.contains("Unsupported keySystem")||err.message.contains("NotSupportedError")||errorRx.onNext(new PlayerError(err.message,PlayerError.FATAL,err)),Rx.Observable.empty()},Rx.Observable.empty)})).take(1).doOnNext(stjs.bind(this,function(keySystemAccess){log.info("using keysystem",keySystemAccess.keySystem),this.keySystemRx.onNext(keySystemAccess)})).subscribe())};DRM=stjs.extend(DRM,null,[],function(constructor,prototype){prototype.log=null,prototype.errorRx=null,prototype.drmOptions=null,prototype.drmInfo=null,prototype.autoDisposables=null,prototype.keySystemRx=null,prototype.http=null,constructor.WIDEVINE="com.widevine.alpha",constructor.PLAYREADY="com.microsoft.playready",prototype.setHttp=function(http){this.http=http},prototype.initVideo=function(video,streamIds){var mediaKeysReady=this.keySystemRx.flatMap(stjs.bind(this,function(keySystemAccess){return Rx.Observable.fromPromise(keySystemAccess.createMediaKeys()["catch"](stjs.bind(this,function(err){return this.errorRx.onNext(new PlayerError("Unable to create MediaKeys",PlayerError.FATAL,err))}))).flatMap(stjs.bind(this,function(mediaKeys){return Rx.Observable.fromPromise(video.setMediaKeys(mediaKeys)["catch"](stjs.bind(this,function(err){return this.errorRx.onNext(new PlayerError("Unable to set MediaKeys",PlayerError.FATAL,err))}))).map(function(x){return keySystemAccess.keySystem})}))})),fromMedia=new Rx.ReplaySubject;this.autoDisposable(Rx.Observable.fromEvent(video,"encrypted").map(function(domEvent){var event=domEvent;return new DRM.InitData(event.initDataType,event.initData)}).filter(function(idata){return null!=idata.initData}).doOnNext(stjs.bind(this,function(d){return this.log.debug("initData from encrypted event",d)})).doOnNext(stjs.bind(fromMedia,"onNext")).subscribe()),this.autoDisposable(mediaKeysReady.flatMap(stjs.bind(this,function(keySystem){var fromMPD=Rx.Observable.from(streamIds).map(stjs.bind(this,function(streamId){var info=this.drmInfo.filter(function(inf,i,a){return inf.streamId==streamId&&inf.keySystem==keySystem})[0];if(null==info)throw this.errorRx.onNext(new PlayerError("unknown stream/keysystem combination "+streamId+" "+keySystem,PlayerError.FATAL)),new RuntimeException;return info})).filter(function(info){return null!=info.initData}).map(function(info){var initDataBuf=Utils.base64ToArrayBuffer(info.initData);return new DRM.InitData("cenc",initDataBuf)}).doOnNext(stjs.bind(this,function(d){return this.log.debug("initData from mpd",d)}));return Rx.Observable.merge(fromMPD,fromMedia).distinct(function(d){return d},stjs.bind("equals")).flatMap(stjs.bind(this,function(initData){return this.createSession(video,keySystem,initData)}))})).subscribe())},prototype.createSession=function(video,keySystem,initData){var laUrl,mediaKeys=video.mediaKeys,session=mediaKeys.createSession();switch(keySystem){case DRM.WIDEVINE:laUrl=this.drmOptions.widevine.laUrl;break;case DRM.PLAYREADY:laUrl=this.drmOptions.playready.laUrl;break;default:return Rx.Observable["throw"]("unsupported key system "+keySystem)}return this.autoDisposable(Rx.Observable.fromEvent(session,"message").subscribe(stjs.bind(this,function(domEvent){var challenge,event=domEvent,headers={};if(keySystem==DRM.PLAYREADY){var stringMessage=Utils.fromCharCodes(new Uint16Array(event.message)),keyMessageXml=(new DOMParser).parseFromString(stringMessage,"application/xml"),b64challenge=keyMessageXml.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;challenge=window.atob(b64challenge);for(var headerNames=keyMessageXml.getElementsByTagName("name"),headerValues=keyMessageXml.getElementsByTagName("value"),i=0;i<headerNames.length;i++)headers[headerNames[i].childNodes[0].nodeValue]=headerValues[i].childNodes[0].nodeValue}else challenge=event.message;laUrl.indexOf("axtest.net")!=-1&&(headers["X-AxDRM-Message"]="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiNjllNTQwODgtZTllMC00NTMwLThjMWEtMWViNmRjZDBkMTRlIiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiNmU1YTFkMjYtMjc1Ny00N2Q3LTgwNDYtZWFhNWQxZDM0YjVhIn1dfX0.yF7PflOPv9qHnu3ZWJNZ12jgkqTabmwXbDWk_47tLNE"),this.http.requestBinary(function(){return laUrl},challenge,"POST",headers,!0).subscribe(stjs.bind(this,function(license){session.update(license)["catch"](stjs.bind(this,function(err){return this.errorRx.onNext(new PlayerError("keySession.update() failed",PlayerError.FATAL,err))}))}),stjs.bind(this,function(err){this.errorRx.onNext(new PlayerError("failed to acquire license",PlayerError.FATAL,err))}))}))),Rx.Observable.fromPromise(session.generateRequest(initData.initDataType,initData.initData)["catch"](stjs.bind(this,function(err){return this.errorRx.onNext(new PlayerError("cannot generate license request",PlayerError.FATAL,err))})))},prototype.getConfigForKeySystem=function(keySystem){return this.drmInfo.filter(function(inf,i,a){return inf.keySystem==keySystem}).reduce(function(config,info,i,a){var isVideo=info.contentType.startsWith("video"),caps=isVideo?config.videoCapabilities:config.audioCapabilities;if(null==caps&&(caps=[]),!caps.some(function(c,ii,aa){return c.contentType==info.contentType})){var capability={};capability.contentType=info.contentType,capability.robustness="",caps.push(capability),isVideo?config.videoCapabilities=caps:config.audioCapabilities=caps}return config},{})},prototype.autoDisposable=function(disposable){this.autoDisposables.add(disposable)},prototype.close=function(){this.autoDisposables.dispose(),this.autoDisposables=null},constructor.InitData=function(initDataType,initData){this.initDataType=initDataType,this.initData=initData},constructor.InitData=stjs.extend(constructor.InitData,null,[],function(constructor,prototype){prototype.initDataType=null,prototype.initData=null,prototype.equals=function(obj){if(!stjs.isInstanceOf(obj.constructor,DRM.InitData))return!1;var other=obj;return this.initDataType==other.initDataType&&Utils.buffersEqual(this.initData,other.initData)}},{initData:"ArrayBuffer"},{})},{log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drmOptions:"PlayerOptions.DRMOptions",drmInfo:{name:"Array",arguments:["DRMInfo"]},autoDisposables:"Rx.CompositeDisposable",keySystemRx:{name:"Rx.Subject",arguments:["MediaKeySystemAccess"]},http:"Http"},{});var StaticVideoSrc=function(url,errorRx){this.url=url,this.errorRx=errorRx};StaticVideoSrc=stjs.extend(StaticVideoSrc,null,[VideoSrc],function(constructor,prototype){prototype.url=null,prototype.errorRx=null,prototype.video=null,prototype.autoDisposables=null,prototype.detach=function(){null!=this.video&&(this.video.src=""),null!=this.autoDisposables&&this.autoDisposables.dispose()},prototype.attach=function(video){this.autoDisposables=new Rx.CompositeDisposable,this.video=video,this.video.src=this.url,this.autoDisposables.add(Rx.Observable.fromEvent(video,"error").skipUntil(this.loadedMetadata()).subscribe(stjs.bind(this,function(e){var err=new PlayerError("media element error code="+video.error.code,PlayerError.FATAL,video.error);this.errorRx.onNext(err)})))},prototype.getLoadingErrors=function(){return Rx.Observable.fromEvent(this.video,"error").takeUntil(this.loadedMetadata()).map(stjs.bind(this,function(e){return new PlayerError("can not load media. error code="+this.video.error.code,PlayerError.FATAL,this.video.error)}))},prototype.loadedMetadata=function(){return Rx.Observable.fromEvent(this.video,"loadedmetadata")},prototype.canSetAudioWithoutReattach=function(audio){return!0},prototype.setAudio=function(audio){},prototype.clearAudioBuffer=function(){}},{errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},video:"Video",autoDisposables:"Rx.CompositeDisposable"},{});var GenericTimeline=function(timeScale,frameDurationTv,tapeTimecode){this.timeScale=timeScale,this.frameDurationTv=frameDurationTv,this.timecode=tapeTimecode,this.updateRx=new Rx.Subject};GenericTimeline=stjs.extend(GenericTimeline,null,[Timeline],function(constructor,prototype){prototype.updateRx=null,prototype.timeScale=0,prototype.frameDurationTv=0,prototype.timecode=null,prototype.durationSec=0,prototype.seekableDurationSec=-1,constructor.newGenericTime=function(timeScale,frameDurationTv){var tapefps=stjs.trunc(Math.round(timeScale/frameDurationTv)),_tapeTimecode=new TapeTimecode((!1),0,tapefps);return new GenericTimeline(timeScale,frameDurationTv,_tapeTimecode)},prototype.getTimeScale=function(){return this.timeScale},prototype.getFrameCount=function(){return stjs.trunc(this.durationSec*this.timeScale/this.frameDurationTv)},prototype.getTvBySec=function(sec){return stjs.trunc(this.timeScale*sec)},prototype.getLastFrame=function(){return this.getFrameCount()-1},prototype.getLastTv=function(){return this.getTvByFrame(this.getLastFrame())},prototype.getTvByTimecode=function(timecode){var fn=this.getTapeTimecode().getFrameByTimecode(timecode);return this.getTvByFrame(fn)},prototype.getTvByFrame=function(fn){return fn*this.frameDurationTv},prototype.getFrameByTv=function(tv){var mod=tv%this.frameDurationTv;return 0==mod?stjs.trunc(stjs.trunc(tv/this.frameDurationTv)):stjs.trunc(stjs.trunc((tv-mod)/this.frameDurationTv))},prototype.getFrameBySec=function(sec){return this.getFrameByTv(this.floorTv(stjs.trunc(sec*this.timeScale+42e-5)))},prototype.getFrameByTimecode=function(tc){return this.timecode.getFrameByTimecode(tc)},prototype.getFrameByMillis=function(time){return this.getFrameBySec(time/1e3)},prototype.floorTv=function(tv){var mod=tv%this.frameDurationTv;return 0==mod?tv:tv-mod},prototype.boundsFn=function(fn){return Math.min(Math.max(fn,0),this.getFrameCount()-1)},prototype.getSecByFrame=function(fn){var _fn=this.boundsFn(fn);return _fn*this.frameDurationTv/this.timeScale},prototype.getSecByTv=function(tv){return tv/this.timeScale},prototype.getMillisByTv=function(tv){return stjs.trunc(1e3*tv/this.timeScale)},prototype.getTapeByTv=function(tv){return this.timecode.getTimecodeAtFrame(this.getFrameByTv(tv))},prototype.getTapeByFrame=function(fn){return this.timecode.getTimecodeAtFrame(fn)},prototype.getTapeBySec=function(time){return this.timecode.getTimecodeAtFrame(this.getFrameBySec(time))},prototype.getTapeTimecode=function(){return this.timecode},prototype.getDurationSec=function(){return this.durationSec},prototype.getSeekableDurationSec=function(){return this.seekableDurationSec},prototype.setSeekableDurationSec=function(durationSec){this.seekableDurationSec=durationSec,this.updateRx.onNext(this)},prototype.setDurationSec=function(durationSec){this.durationSec=durationSec,this.seekableDurationSec==-1&&(this.seekableDurationSec=durationSec),this.updateRx.onNext(this)},prototype.getUpdateRx=function(){return this.updateRx}},{updateRx:{name:"Rx.Subject",arguments:["Timeline"]},timecode:"TapeTimecode",UNKNOWN:"Timeline"},{});var BoundedTimeline=function(timeline){this.timeline=timeline};BoundedTimeline=stjs.extend(BoundedTimeline,null,[Timeline],function(constructor,prototype){prototype.timeline=null,prototype.assertFinite=function(val){if(!Utils.isNormalNumber(val))throw new RuntimeException(val+" is not a valid value")},prototype.checkTimecode=function(timecode){if(!TapeTimecode.isTimecode(timecode))throw new RuntimeException(timecode+" is not a valid timecode")},prototype.boundsTv=function(tv){return Math.max(0,Math.min(tv,this.timeline.getLastTv()))},prototype.getTimeScale=function(){return this.timeline.getTimeScale()},prototype.getFrameCount=function(){return this.timeline.getFrameCount()},prototype.getTvBySec=function(sec){return this.assertFinite(sec),this.boundsTv(this.timeline.getTvBySec(sec))},prototype.getLastFrame=function(){return this.timeline.getLastFrame()},prototype.getLastTv=function(){return this.timeline.getLastTv()},prototype.getTvByTimecode=function(timecode){return this.checkTimecode(timecode),this.boundsTv(this.timeline.getTvByTimecode(timecode))},prototype.getTvByFrame=function(fn){return this.assertFinite(fn),this.timeline.getTvByFrame(this.boundsFn(fn))},prototype.getFrameByTv=function(tv){return this.assertFinite(tv),this.timeline.getFrameByTv(this.boundsTv(tv))},prototype.getFrameBySec=function(sec){return this.assertFinite(sec),this.boundsFn(this.timeline.getFrameBySec(sec))},prototype.getFrameByTimecode=function(tc){return this.checkTimecode(tc),this.boundsFn(this.timeline.getFrameByTimecode(tc))},prototype.getFrameByMillis=function(time){return this.assertFinite(time),this.boundsFn(this.timeline.getFrameByMillis(time))},prototype.floorTv=function(tv){return this.assertFinite(tv),this.timeline.floorTv(this.boundsTv(tv))},prototype.boundsFn=function(fn){return this.assertFinite(fn),this.timeline.boundsFn(fn)},prototype.getSecByFrame=function(fn){return this.assertFinite(fn),this.timeline.getSecByFrame(this.boundsFn(fn))},prototype.getSecByTv=function(tv){return this.assertFinite(tv),this.timeline.getSecByTv(this.boundsTv(tv))},prototype.getMillisByTv=function(tv){return this.assertFinite(tv),this.timeline.getMillisByTv(this.boundsTv(tv))},prototype.getTapeByTv=function(tv){return this.assertFinite(tv),this.timeline.getTapeByTv(this.boundsTv(tv))},prototype.getTapeByFrame=function(fn){return this.assertFinite(fn),this.timeline.getTapeByFrame(this.boundsFn(fn))},prototype.getTapeBySec=function(time){return this.assertFinite(time),this.timeline.getTapeByFrame(this.getFrameBySec(time))},prototype.getTapeTimecode=function(){return this.timeline.getTapeTimecode()},prototype.getDurationSec=function(){return this.timeline.getDurationSec()},prototype.getSeekableDurationSec=function(){return this.timeline.getSeekableDurationSec()},prototype.setSeekableDurationSec=function(durationSec){this.assertFinite(durationSec),this.timeline.setSeekableDurationSec(durationSec)},prototype.getUpdateRx=function(){return this.timeline.getUpdateRx()},prototype.originalTimeline=function(){return this.timeline}},{UNKNOWN:"Timeline"},{});var MP4Timeline=function(pkts){this.pkts=pkts,this.timeScale=pkts[0].timescale;var dropFrame=!1,startTimecode=stjs.trunc(pkts[0].timecode),tapefps=stjs.trunc(Math.round(this.timeScale/pkts[0].duration));this.timecode=new TapeTimecode(dropFrame,startTimecode,tapefps),this.pkts.sort(function(p1,p2){var x=p1.pts,y=p2.pts;return MP4Timeline.longCompare(x,y)}),this.seekableDurationSec=this.getDurationSec(),this.updateRx=new Rx.Subject};MP4Timeline=stjs.extend(MP4Timeline,null,[Timeline],function(constructor,prototype){prototype.timeScale=0,prototype.timecode=null,prototype.pkts=null,prototype.seekableDurationSec=0,prototype.updateRx=null,constructor.longCompare=function(x,y){return x<y?-1:x==y?0:1},prototype.getTimeScale=function(){return this.timeScale},prototype.getFrameCount=function(){return this.pkts.length},prototype.getTvBySec=function(sec){return stjs.trunc(this.timeScale*sec)},prototype.getLastFrame=function(){return this.getFrameCount()-1},prototype.getLastTv=function(){return this.getTvByFrame(this.getLastFrame())},prototype.getTvByTimecode=function(timecode){var fn=this.getTapeTimecode().getFrameByTimecode(timecode);return this.getTvByFrame(this.boundsFn(fn))},prototype.getTvByFrame=function(fn){if(fn==this.pkts.length){var pkt=this.pkts[fn-1];return pkt.pts+pkt.duration}return this.pkts[fn].pts},prototype.getFrameByTv=function(tv){var idx=Utils.binarySearch(this.pkts,function(pkt){return MP4Timeline.longCompare(pkt.pts,tv)});return idx>=0?idx:-(idx+1)},prototype.getFrameBySec=function(sec){return this.getFrameByTv(this.floorTv(stjs.trunc(sec*this.timeScale+42e-5)))},prototype.getFrameByTimecode=function(tc){return this.timecode.getFrameByTimecode(tc)},prototype.getFrameByMillis=function(time){return this.getFrameBySec(time/1e3)},prototype.floorTv=function(tv){var idx=this.getFrameByTv(tv),pkt=this.pkts[idx];return pkt.pts},prototype.boundsFn=function(fn){return Math.min(Math.max(fn,0),this.getFrameCount()-1)},prototype.getSecByFrame=function(fn){var _fn=this.boundsFn(fn),pkt=this.pkts[_fn];return pkt.pts/pkt.timescale},prototype.getSecByTv=function(tv){return tv/this.timeScale},prototype.getMillisByTv=function(tv){return stjs.trunc(1e3*tv/this.timeScale)},prototype.getTapeByTv=function(tv){return this.timecode.getTimecodeAtFrame(this.getFrameByTv(tv))},prototype.getTapeByFrame=function(fn){return this.timecode.getTimecodeAtFrame(fn)},prototype.getTapeBySec=function(time){return this.timecode.getTimecodeAtFrame(this.getFrameBySec(time))},prototype.getTapeTimecode=function(){return this.timecode},prototype.getDurationSec=function(){var pkt=this.pkts[this.pkts.length-1],tv=pkt.pts+pkt.duration;return tv/pkt.timescale},prototype.getSeekableDurationSec=function(){return this.seekableDurationSec},prototype.setSeekableDurationSec=function(durationSec){this.seekableDurationSec=durationSec,this.updateRx.onNext(this)},prototype.getUpdateRx=function(){return this.updateRx}},{timecode:"TapeTimecode",pkts:{name:"Array",arguments:["MovDasher.TimePacket"]},updateRx:{name:"Rx.Subject",arguments:["Timeline"]},UNKNOWN:"Timeline"},{});var M4ASegmentedStream=function(segmentedStream){SegmentedAudioStream.call(this),this.segmentedStream=segmentedStream,this.sampleRate=this.getDashDescriptor().timescale,this.totalSamples=this.getDashDescriptor().duration,this.mimeType=this.getDashDescriptor().mimeType,this.codecs=this.getDashDescriptor().codecs};M4ASegmentedStream=stjs.extend(M4ASegmentedStream,SegmentedAudioStream,[],function(constructor,prototype){prototype.segmentedStream=null,prototype.silenceAppended=function(){return!1},prototype.getDashInit=function(onDone,onError){this.segmentedStream.getDashInit(onDone,onError)},prototype.loadSegment=function(segmentIdx,onDone,onError){return this.segmentedStream.loadSegment(segmentIdx,onDone,onError)},prototype.getDashDescriptor=function(){return this.segmentedStream.getDashDescriptor()},prototype.getChannelConfig=function(){return this.segmentedStream.getDashDescriptor().channelConfig}},{segmentedStream:"SegmentedStream",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var M4SMp3SegmentedStream=function(mp3){SegmentedAudioStream.call(this),this.mp3=mp3,this.proxyId=mp3.proxyId,this.sampleRate=mp3.sampleRate,this.channelMuted=new Array(mp3.audioInfo.channelCount),this.frameSize=stjs.trunc(Math.round(1e3*mp3.BITRATE*1152/(8*mp3.sampleRate))),this.mimeType="audio/mp4",this.serverUrl=mp3.serverUrl,this.audioInfo=mp3.audioInfo,this.url=mp3.url};M4SMp3SegmentedStream=stjs.extend(M4SMp3SegmentedStream,SegmentedAudioStream,[],function(constructor,prototype){prototype.mp3=null,prototype.frameSize=0,prototype.loadSegment=function(idx,onDone,onError){var self=this;return this.mp3.channelMuted=this.channelMuted,this.mp3.loadSegment(idx,stjs.bind(this,function(mp3Buf){var mp3Arr,frames=stjs.trunc(mp3Buf.byteLength/self.frameSize);mp3Arr=frames>SegmentedAudioStream.FRAMES_PER_SEGMENT&&idx<self.getSegmentCount()-1?new Uint8Array(mp3Buf,0,SegmentedAudioStream.FRAMES_PER_SEGMENT*self.frameSize):new Uint8Array(mp3Buf);var m4s=MovDasher.wrapMp3Segment(idx,SegmentedAudioStream.FRAMES_PER_SEGMENT,this.totalSamples,this.frameSize,mp3Arr);onDone(m4s)}),onError)},prototype.getDurationSec=function(){return this.mp3.getDurationSec()},prototype.getDashDescriptor=function(){throw new RuntimeException("TODO")},prototype.getSegmentCount=function(){return this.mp3.getSegmentCount()},prototype.getSegmentDuration=function(idx){return this.mp3.getSegmentDuration(idx)},prototype.getSegmentIdxByTime=function(time){return this.mp3.getSegmentIdxByTime(time)},
prototype.getSegmentStartTime=function(idx){return this.mp3.getSegmentStartTime(idx)},prototype.getDashInit=function(onDone,onError){MovDasher.mp3InitSegment(this.sampleRate,this.totalSamples,this.frameSize,onDone)},prototype.silenceAppended=function(){return this.mp3.silenceAppended()}},{mp3:"SegmentedAudioStream",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var Mp3SegmentedAudioStream=function(proxyId,sampleRate,totalSamples,dataSrc){throw SegmentedAudioStream.call(this),new RuntimeException("Mp3DashFile TODO")};Mp3SegmentedAudioStream=stjs.extend(Mp3SegmentedAudioStream,SegmentedAudioStream,[],function(constructor,prototype){prototype.getSegmentCount=function(){throw new RuntimeException("TODO")},prototype.loadSegment=function(segmentIdx,onDone,onError){throw new RuntimeException("TODO")},prototype.getSegmentDuration=function(idx){throw new RuntimeException("TODO")},prototype.getSegmentIdxByTime=function(time){throw new RuntimeException("TODO")},prototype.getSegmentStartTime=function(idx){throw new RuntimeException("TODO")},prototype.getDashInit=function(onDone,onError){throw new RuntimeException("TODO")},prototype.getDashDescriptor=function(){throw new RuntimeException("TODO")},prototype.silenceAppended=function(){throw new RuntimeException("TODO")}},{channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var HLSPlaylist=function(){this.headers={},this.mediaList=[],this.variantList=[]};HLSPlaylist=stjs.extend(HLSPlaylist,null,[],function(constructor,prototype){constructor.NO="NO",constructor.YES="YES",constructor.ENDLIST="#EXT-X-ENDLIST",constructor.EXTM3U="#EXTM3U",constructor.EXTINF="#EXTINF",constructor.ALLOW_CACHE="#EXT-X-ALLOW-CACHE",constructor.START="#EXT-X-START",constructor.MEDIA_SEQUENCE="#EXT-X-MEDIA-SEQUENCE",constructor.TARGETDURATION="#EXT-X-TARGETDURATION",constructor.PLAYLIST_TYPE="#EXT-X-PLAYLIST-TYPE",constructor.VERSION="#EXT-X-VERSION",constructor.BANDWIDTH="BANDWIDTH",constructor.RESOLUTION="RESOLUTION",constructor.URI="URI",constructor.AUTOSELECT="AUTOSELECT",constructor.DEFAULT="DEFAULT",constructor.GROUP_ID="GROUP-ID",constructor.TYPE="TYPE",constructor.VIDEO="VIDEO",constructor.AUDIO="AUDIO",constructor.NAME="NAME",constructor.Related="#EXT-X-MEDIA",constructor._Variant="#EXT-X-STREAM-INF",constructor.EVENT="EVENT",constructor.VOD="VOD",constructor.RelatedPlaylist=function(attrs){this.attributes=attrs},constructor.RelatedPlaylist=stjs.extend(constructor.RelatedPlaylist,null,[],function(constructor,prototype){prototype.attributes=null},{attributes:{name:"Map",arguments:[null,null]}},{}),constructor.createVariant=function(uri,attributes){var v=new HLSPlaylist.Variant;return v.uri=uri,v.attributes=attributes,v},constructor.Variant=function(){},constructor.Variant=stjs.extend(constructor.Variant,null,[],function(constructor,prototype){prototype.uri=null,prototype.attributes=null},{attributes:{name:"Map",arguments:[null,null]}},{}),constructor.Media=function(url,durationSec){this.url=url,this.durationSec=durationSec},constructor.Media=stjs.extend(constructor.Media,null,[],function(constructor,prototype){prototype.url=null,prototype.durationSec=0},{},{}),prototype.uri=null,prototype.headers=null,prototype.mediaList=null,prototype.variantList=null,prototype.endList=!1,prototype.getRelatedPlaylists=function(){var list=this.headers[HLSPlaylist.Related],collect=list.map(function(str,i,a){return new HLSPlaylist.RelatedPlaylist(HLSPlaylist.parseAttributeList(str))});return collect},prototype.getVariantList=function(){return this.copyOf(this.variantList)},prototype.copyOf=function(list){return list.slice(0)},prototype.getDurationSec=function(){for(var sum=0,i=0;i<this.mediaList.length;i++)sum+=this.mediaList[i].durationSec;return sum},prototype.getMediaList=function(){return this.copyOf(this.mediaList)},prototype.setEndList=function(endList){this.endList=endList},prototype.hasEndList=function(){return this.endList},prototype.addMedia=function(url,videoDurationSec){this.mediaList.push(new HLSPlaylist.Media(url,videoDurationSec))},prototype.setVersion=function(v){this.setHeader(HLSPlaylist.VERSION,Integer.toString(v))},prototype.setHeader=function(key,value){this.headers[key]=[value]},prototype.getVersion=function(){return this.toInt(this.getHeader(HLSPlaylist.VERSION))},prototype.toInt=function(val){return parseInt(val)},prototype.setTargetDuration=function(sec){this.setHeader(HLSPlaylist.TARGETDURATION,Integer.toString(sec))},prototype.getTargetDuration=function(){return this.toInt(this.getHeader(HLSPlaylist.TARGETDURATION))},prototype.setPlaylistType=function(string){this.setHeader(HLSPlaylist.PLAYLIST_TYPE,string)},prototype.getPlaylistType=function(){return this.getHeader(HLSPlaylist.PLAYLIST_TYPE)},prototype.getHeader=function(key){return this.containsKey(key)?this.headers[key][0]:null},prototype.containsKey=function(key){return this.headers.hasOwnProperty(key)},prototype.setMediaSequence=function(ms){this.setHeader(HLSPlaylist.MEDIA_SEQUENCE,Integer.toString(ms))},prototype.getMediaSequence=function(){return this.toInt(this.getHeader(HLSPlaylist.MEDIA_SEQUENCE))},prototype.setAllowCache=function(b){this.setHeader(HLSPlaylist.ALLOW_CACHE,b?HLSPlaylist.YES:HLSPlaylist.NO)},prototype.getAllowCache=function(){return HLSPlaylist.toBooleanObject(this.getHeader(HLSPlaylist.ALLOW_CACHE))},constructor.toBooleanObject=function(val){return!!HLSPlaylist.YES.equals(val)||!HLSPlaylist.NO.equals(val)&&null},constructor.attrsToString=function(attrs){var str="";for(var key in attrs){""!=str&&(str+=",");var val=attrs[key];null!=val&&(str+="="+val)}return str},constructor.parseString=function(str,log){return HLSPlaylist.parseM3U8(str.replaceAll("\r\n","\n").split("\n"),log)},constructor.parseM3U8=function(lines,log){var line=lines.length>0?lines.shift():null;if(!HLSPlaylist.EXTM3U.equals(line))return null;for(var playlist=new HLSPlaylist,names=!1,variants=!1,extinf=-1;lines.length>0;)if(line=lines.shift(),""!=line.trim())if(line.startsWith("#")){if(line.startsWith(HLSPlaylist.EXTINF)){var split=HLSPlaylist.split(line);extinf=Double.parseDouble(split[1].replaceAll(",$","")),names=!0}else if(line.startsWith(HLSPlaylist._Variant)){var split=HLSPlaylist.split(line),variant=new HLSPlaylist.Variant;variant.attributes=HLSPlaylist.parseAttributeList(split[1]),playlist.variantList.push(variant),variants=!0}else if(line.startsWith(HLSPlaylist.ENDLIST))playlist.endList=!0;else if(line.startsWith("#EXT-X")){var split=HLSPlaylist.split(line),key=split[0],value=split[1];playlist.addHeader(key,value)}}else if(names)playlist.addMedia(line,extinf);else{if(!variants)throw new HLSPlaylist.HLSParseException("error parsing m3u8 line: "+line);playlist.variantList[playlist.variantList.length-1].uri=line}return playlist},constructor.split=function(line){var idx=line.indexOf(":");return idx<0?[line]:[line.substring(0,idx),line.substring(idx+1)]},prototype.setStart=function(timeoffset,precise){this.setHeader(HLSPlaylist.START,String.format("TIME-OFFSET=%f,PRECISE=%s",timeoffset,precise?HLSPlaylist.YES:HLSPlaylist.NO))},prototype.getStart=function(){var string=this.getHeader(HLSPlaylist.START);if(null==string)return null;var map=HLSPlaylist.parseAttributeList(string);return Pair.of(HLSPlaylist.toFloatObject(map["TIME-OFFSET"]),HLSPlaylist.toBooleanObject(map.PRECISE))},constructor.parseAttributeList=function(string){for(var map={},m=new RegExp('(([^,]+)=(".+?"|[^,]+)),?',"g"),myArray=[];null!=(myArray=m.exec(string));)map[myArray[2]]=myArray[3];return map},constructor.toFloatObject=function(string){try{return Float.parseFloat(string)}catch(e){return null}},prototype.addRelatedPlaylist=function(attrs){this.addHeader(HLSPlaylist.Related,HLSPlaylist.attrsToString(attrs))},prototype.addHeader=function(key,value){this.containsKey(key)||(this.headers[key]=[]),this.headers[key].push(value)},prototype.addVariantStream=function(variant){this.variantList.push(variant)},constructor.quote=function(uri){return'"'+uri+'"'},constructor.audio=function(name,uri,groupId){var map={};return map[HLSPlaylist.TYPE]=HLSPlaylist.AUDIO,map[HLSPlaylist.GROUP_ID]=groupId,map[groupId]=HLSPlaylist.quote(name),map[HLSPlaylist.URI]=HLSPlaylist.quote(uri),map[HLSPlaylist.TYPE]=HLSPlaylist.AUDIO,map},constructor.testParse4=function(){var m3u8=["#EXTM3U","#EXT-X-VERSION:4",'#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="index_audio",NAME="eredeti",DEFAULT=NO,AUTOSELECT=YES,URI="AUD_MUL.m3u8"','#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="index_audio",NAME="magyar",DEFAULT=YES,AUTOSELECT=YES,LANGUAGE="hu",URI="AUD_HUN.m3u8"','#EXT-X-STREAM-INF:PROGRAM-ID=16,BANDWIDTH=2699680,RESOLUTION=1280x720,CODECS="avc1.4d401f,mp4a.40.2",AUDIO="index_audio"',"VID_1280x720.m3u8",'#EXT-X-STREAM-INF:PROGRAM-ID=16,BANDWIDTH=2185312,RESOLUTION=1024x576,CODECS="avc1.4d401f,mp4a.40.2",AUDIO="index_audio"',"VID_640x360_1.m3u8",'#EXT-X-STREAM-INF:PROGRAM-ID=16,BANDWIDTH=645216,RESOLUTION=384x216,CODECS="avc1.42e015,mp4a.40.2",AUDIO="index_audio"',"VID_384x216.m3u8"],log=new Log(LogLevel.DEBUG);log.debug(HLSPlaylist.parseM3U8(m3u8,log));var endlist=["#EXTM3U","#EXT-X-PLAYLIST-TYPE:VOD","#EXT-X-TARGETDURATION:3","#EXT-X-VERSION:3","#EXTINF:2.13547,","0.ts","#EXTINF:2.13547,","1.ts","#EXTINF:2.13547,","2.ts","#EXT-X-ENDLIST"];log.debug(HLSPlaylist.parseM3U8(endlist,log))},constructor.HLSParseException=function(message){Exception.call(this,message)},constructor.HLSParseException=stjs.extend(constructor.HLSParseException,Exception,[],null,{},{})},{headers:{name:"Map",arguments:[null,{name:"Array",arguments:[null]}]},mediaList:{name:"Array",arguments:["HLSPlaylist.Media"]},variantList:{name:"Array",arguments:["HLSPlaylist.Variant"]}},{});var Mp3MixSegmentedAudioStream=function(http,serverUrl,proxyId,audioInfo){SegmentedAudioStream.call(this),this.http=http,this.serverUrl=serverUrl,this.proxyId=proxyId,this.audioInfo=audioInfo,this.sampleRate=audioInfo.sampleRate,this.totalSamples=audioInfo.totalSamples,this.channelMuted=new Array(audioInfo.channelCount),this.mimeType="audio/mpeg",this.BITRATE=128};Mp3MixSegmentedAudioStream=stjs.extend(Mp3MixSegmentedAudioStream,SegmentedAudioStream,[],function(constructor,prototype){prototype.BITRATE=0,prototype.http=null,prototype.getDurationSec=function(){return this.totalSamples/this.sampleRate},prototype.getSegmentCount=function(){var frameCount=Math.ceil(stjs.trunc(this.totalSamples/1152));return stjs.trunc(Math.ceil(frameCount/SegmentedAudioStream.FRAMES_PER_SEGMENT))},prototype.getSegmentDuration=function(idx){return 1152*SegmentedAudioStream.FRAMES_PER_SEGMENT/this.sampleRate},prototype.getSegmentIdxByTime=function(time){var sample=parseInt(time*this.sampleRate),frame=parseInt(stjs.trunc(sample/1152));return parseInt(stjs.trunc(frame/SegmentedAudioStream.FRAMES_PER_SEGMENT))},prototype.getSegmentStartTime=function(idx){var samplesPerSegment=1152*SegmentedAudioStream.FRAMES_PER_SEGMENT;return idx*samplesPerSegment/this.sampleRate},prototype.loadSegment=function(segmentIdx,onDone,onError){for(var channels="",allMuted=!0,i=0;i<this.channelMuted.length;i++)allMuted=allMuted&&this.channelMuted[i],channels+=this.channelMuted[i]?"0":"1";var totalFrames=Math.ceil(stjs.trunc(this.totalSamples/1152)),fromFrame=segmentIdx*SegmentedAudioStream.FRAMES_PER_SEGMENT,toFrame=(segmentIdx+1)*SegmentedAudioStream.FRAMES_PER_SEGMENT;if(!allMuted&&fromFrame<totalFrames){var dataSrc=new HttpDataSrc(this.http,this.serverUrl+"/"+this.proxyId+"/"+channels+".mp3"),frameSize=Math.round(stjs.trunc(1e3*this.BITRATE*1152/(8*this.sampleRate))),from=fromFrame*frameSize,to=(toFrame+1)*frameSize,onLoaded=function(buf){var mp3Frames=stjs.trunc(stjs.trunc(buf.byteLength/frameSize));if(mp3Frames>=SegmentedAudioStream.FRAMES_PER_SEGMENT)onDone(buf);else{var mp3=new Int8Array(buf),framesToAdd=SegmentedAudioStream.FRAMES_PER_SEGMENT-mp3Frames+1,mp3PlusSilence=new Int8Array(mp3.length+framesToAdd*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length);mp3PlusSilence.set(mp3,0);for(var i=0,off=mp3.length;i<framesToAdd;i++)mp3PlusSilence.set(Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb,off+i*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length);onDone(mp3PlusSilence.buffer)}};return dataSrc.fetch(from,to,onLoaded,onError)}for(var n=toFrame-fromFrame+2,encodedSilence=new Int8Array(n*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length),j=0;j<n;j++)encodedSilence.set(Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb,j*Mp3MixSegmentedAudioStream.SILENCE_FRAME_48_128kb.length);var timeoutId=setTimeout(function(){return onDone(encodedSilence.buffer)},0),abort=function(){return clearTimeout(timeoutId)};return abort},constructor.SILENCE_FRAME_48_128kb=new Int8Array([-1,-5,-108,4,0,15,-16,0,0,105,0,0,0,8,0,0,13,32,0,0,1,0,0,1,-92,0,0,0,32,0,0,52,-128,0,0,4,76,65,77,69,51,46,57,57,46,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),prototype.getDashInit=function(onDone,onError){onDone(null)},prototype.getDashDescriptor=function(){throw new RuntimeException("TODO")},prototype.isDynamic=function(){return!1},prototype.silenceAppended=function(){return!0}},{http:"Http",SILENCE_FRAME_48_128kb:"Int8Array",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var DashTimeline=function(timeScale,frameDuration,duration,segmentStartFrames,segmentStartTv,log){this.duration=duration,this.seekableDurationSec=duration/timeScale,this.timeScale=timeScale,this.dropFrame=!1,null!=segmentStartFrames?this.packetCache=new OptimizedPacketCache(segmentStartFrames,segmentStartTv,log):this.packetCache=new DefaultPacketCache(frameDuration),this.updateRx=new Rx.Subject};DashTimeline=stjs.extend(DashTimeline,null,[Timeline],function(constructor,prototype){prototype.duration=0,prototype.timeScale=0,prototype.dropFrame=!1,prototype.seekableDurationSec=0,prototype.packetCache=null,prototype.updateRx=null,prototype.getTimeScale=function(){return this.timeScale},prototype.getFrameCount=function(){return this.packetCache.getFrameCount(this.duration)},prototype.getTvBySec=function(sec){return stjs.trunc(this.timeScale*sec)},prototype.getLastFrame=function(){return this.getFrameCount()-1},prototype.getLastTv=function(){return this.getTvByFrame(this.getLastFrame())},prototype.getTvByTimecode=function(timecode){var fn=this.getTapeTimecode().getFrameByTimecode(timecode);return this.getTvByFrame(fn)},prototype.getTvByFrame=function(fn){return this.packetCache.getTvByFrame(fn)},prototype.getFrameByTv=function(tv){return this.packetCache.getFrameByTv(tv)},prototype.getFrameBySec=function(sec){return this.getFrameByTv(this.floorTv(stjs.trunc(sec*this.timeScale+42e-5)))},prototype.getFrameByTimecode=function(tc){return this.getTapeTimecode().getFrameByTimecode(tc)},prototype.getFrameByMillis=function(time){return this.getFrameBySec(time/1e3)},prototype.floorTv=function(tv){return this.packetCache.floorTv(tv)},prototype.boundsFn=function(fn){return Math.min(Math.max(fn,0),this.getFrameCount()-1)},prototype.getSecByFrame=function(fn){var tv=this.getTvByFrame(fn);return tv/this.timeScale},prototype.getSecByTv=function(tv){return tv/this.timeScale},prototype.getMillisByTv=function(tv){return stjs.trunc(1e3*tv/this.timeScale)},prototype.getTapeByTv=function(tv){return this.getTapeTimecode().getTimecodeAtFrame(this.getFrameByTv(tv))},prototype.getTapeByFrame=function(fn){return this.getTapeTimecode().getTimecodeAtFrame(fn)},prototype.getTapeBySec=function(time){return this.getTapeTimecode().getTimecodeAtFrame(this.getFrameBySec(time))},prototype.getTapeTimecode=function(){var tapefps=stjs.trunc(Math.round(this.timeScale/this.packetCache.getAverageFrameDuration()));return new TapeTimecode(this.dropFrame,0,tapefps)},prototype.getDurationSec=function(){return this.duration/this.timeScale},prototype.getSeekableDurationSec=function(){return this.seekableDurationSec},prototype.setDuration=function(duration){this.duration=duration,this.updateRx.onNext(this)},prototype.setSeekableDurationSec=function(durationSec){this.seekableDurationSec=durationSec,this.updateRx.onNext(this)},prototype.updateTimePackets=function(segmentIdx,newPkts){this.packetCache.updateTimePackets(segmentIdx,newPkts),this.updateRx.onNext(this)},prototype.getUpdateRx=function(){return this.updateRx}},{packetCache:"PacketCache",updateRx:{name:"Rx.Subject",arguments:["Timeline"]},UNKNOWN:"Timeline"},{});var SegmentedVideoStream=function(http,urls,desc,sampleDuration){SegmentedStream.call(this),this.http=http,this.urls=urls,this.desc=desc,this.sampleDuration=sampleDuration,this.timecode=desc.timecode,this.timescale=desc.timescale,this.sampleDuration=sampleDuration,this.timecode=desc.timecode,this.mimeType=desc.mimeType,this.codecs=desc.codecs};SegmentedVideoStream=stjs.extend(SegmentedVideoStream,SegmentedStream,[],function(constructor,prototype){prototype.timecode=null,prototype.timescale=0,prototype.sampleDuration=0,prototype.http=null,prototype.urls=null,prototype.desc=null,prototype.getDashInit=function(onDone,onError){this.http.getArrayBuffer(this.urls.getInitUrl()).subscribe(onDone,onError)},prototype.getFrameCount=function(){return stjs.trunc(stjs.trunc(this.desc.duration/this.sampleDuration))},prototype.getDashDescriptor=function(){return this.desc},prototype.loadSegment=function(segmentIdx,onDone,onError){var sub=this.http.getArrayBuffer(this.urls.getSegmentUrl(segmentIdx)).retryWhen(RetryWithDelay.create(3,3e3)).subscribe(onDone,function(req){return onError(req.status)});return stjs.bind(sub,"dispose")},prototype.updateFrom=function(movDashStream){this.urls=movDashStream.urls,this.desc=movDashStream.desc,this.updateRx.onNext(this)}},{http:"Http",urls:"DashSegmentUrls",desc:"DashDescriptor",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var MPDSegmentedAudioStream=function(id,http,urls,desc){SegmentedAudioStream.call(this),this.id=id,this.http=http,this.urls=urls,this.desc=desc,this.populateFromDesc()};MPDSegmentedAudioStream=stjs.extend(MPDSegmentedAudioStream,SegmentedAudioStream,[],function(constructor,prototype){prototype.http=null,prototype.desc=null,prototype.urls=null,prototype.populateFromDesc=function(){this.sampleRate=this.desc.timescale,this.totalSamples=this.desc.duration,this.mimeType=this.desc.mimeType,this.codecs=this.desc.codecs},prototype.getDashDescriptor=function(){return this.desc},prototype.getDashInit=function(onDone,onError){this.http.getArrayBuffer(this.urls.getInitUrl()).subscribe(onDone,onError)},prototype.loadSegment=function(segmentIdx,onDone,onError){var sub=this.http.getArrayBuffer(this.urls.getSegmentUrl(segmentIdx)).retryWhen(RetryWithDelay.create(3,3e3)).subscribe(onDone,onError),abort=function(){return sub.dispose()};return abort},prototype.updateFrom=function(audio){this.urls=audio.urls,this.desc=audio.desc,this.populateFromDesc(),this.updateRx.onNext(this)},prototype.silenceAppended=function(){return!1}},{http:"Http",desc:"DashDescriptor",urls:"DashSegmentUrls",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var SRTParser=function(){};SRTParser=stjs.extend(SRTParser,null,[],function(constructor,prototype){constructor.parse=function(string,timeline){var subtitles=new Subtitles;subtitles.rows=[];var lines=string.replaceAll("\r\n","\n").split("\n"),groups=RxUtil.split(Rx.Observable.from(lines),function(list,item){return"".equals(item)});groups=groups.map(function(group){return"".equals(group[0])?group.slice(1):group}),groups=groups.filter(function(group){var b=group.length>=3,b2=!isNaN(parseInt(group[0]));return b&&b2});var subs=groups.map(function(group){var time=(group.shift(),group.shift()),inOutTime=time.split(" "),inTime=inOutTime[0],outTime=inOutTime[2],startMsec=SubsUtils.parseTimestamp(inTime),endMsec=SubsUtils.parseTimestamp(outTime),sub=new SubtitleEntry;sub.startMsec=startMsec,sub.endMsec=endMsec,sub.startTv=timeline.getTvBySec(startMsec/1e3),sub.endTv=timeline.getTvBySec(endMsec/1e3),sub.timeCodeIn=timeline.getTapeBySec(startMsec/1e3),sub.timeCodeOut=timeline.getTapeBySec(endMsec/1e3);var div=window.document.createElement("div");return div.innerHTML=group.join(),sub.notes=div.innerText,sub}),subtitle=subs.reduce(function(all,sub){return all.rows.push(sub),all},subtitles);return subtitle}},{},{});var ConformedM4sAudioStream=function(realStream,offsetSamples,totalSamples,log){SegmentedAudioStream.call(this),this.realStream=realStream,this.offsetPTS=offsetSamples,this.log=log;var tail=totalSamples-(offsetSamples+realStream.totalSamples);this.tailSilenceDuration=1024*stjs.trunc(Math.ceil(tail/1024)),this.totalSamples=offsetSamples+realStream.totalSamples+this.tailSilenceDuration,this.sampleRate=realStream.sampleRate,this.offsetSec=offsetSamples/realStream.sampleRate;var needAlign=offsetSamples%1024!=0;this.frameAlignTv=needAlign?1024-offsetSamples%1024:0,this.timestampOffset=-this.frameAlignTv/this.sampleRate,this.firstRealSegment=stjs.trunc(Math.ceil(offsetSamples/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION)),this.lastRealSegment=this.firstRealSegment+this.realStream.getSegmentCount()-1,this.codecs=realStream.codecs,this.mimeType=realStream.mimeType};ConformedM4sAudioStream=stjs.extend(ConformedM4sAudioStream,SegmentedAudioStream,[],function(constructor,prototype){prototype.realStream=null,prototype.offsetPTS=0,prototype.offsetSec=0,prototype.firstRealSegment=0,prototype.lastRealSegment=0,prototype.frameAlignTv=0,prototype.moovMp4Box=null,prototype.tailSilenceDuration=0,prototype.log=null,constructor.SILENCE_SEGMENT_DURATION=245760,constructor.ABORT_IMPOSSIBLE=function(){},prototype.getSegmentIdxByTime=function(time){var pts=Utils.secondsToTv(time,this.sampleRate),tailStartPts=this.offsetPTS+this.realStream.totalSamples;if(pts<this.offsetPTS){var dts=pts+this.frameAlignTv;return stjs.trunc(stjs.trunc(dts/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION))}return pts<tailStartPts?this.realStream.getSegmentIdxByTime(time-this.offsetSec)+this.firstRealSegment:stjs.trunc(stjs.trunc((pts-tailStartPts)/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION))+(this.lastRealSegment+1)},prototype.getSegmentStartTime=function(idx){return this.getSegmentStartTv(idx)/this.sampleRate},prototype.getSegmentStartTv=function(idx){if(idx<this.firstRealSegment){var dts=idx*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,pts=dts-this.frameAlignTv;return pts<0&&(pts=0),pts}if(idx<=this.lastRealSegment)return this.realStream.getSegmentStartTv(idx-this.firstRealSegment)+this.offsetPTS;var tailStartPts=this.offsetPTS+this.realStream.totalSamples;return tailStartPts+(idx-(this.lastRealSegment+1))*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION},prototype.getSegmentDuration=function(idx){if(idx>=this.firstRealSegment&&idx<=this.lastRealSegment)return this.realStream.getSegmentDuration(idx-this.firstRealSegment);var duration=this.getSilenceSegmentDurationInDTS(idx);return 0==idx&&(duration-=this.frameAlignTv),duration/this.sampleRate},prototype.getSilenceSegmentDurationInDTS=function(idx){if(idx>=this.firstRealSegment&&idx<=this.lastRealSegment)throw new RuntimeException("not a silence segment "+idx);if(idx==this.firstRealSegment-1){var dts=idx*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,nextSegDts=this.offsetPTS+this.frameAlignTv;return nextSegDts-dts}if(idx==this.getSegmentCount()-1){var dur=this.tailSilenceDuration%ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION;return dur>0?dur:ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION}return ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION},prototype.getSegmentCount=function(){var tailSilenceSegments=stjs.trunc(Math.ceil(this.tailSilenceDuration/ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION));return this.firstRealSegment+this.realStream.getSegmentCount()+tailSilenceSegments},prototype.getDurationSec=function(){return this.totalSamples/this.sampleRate},prototype.getDashInit=function(onDone,onError){this.realStream.getDashInit(stjs.bind(this,function(buf){this.moovMp4Box=Mp4Loader.parseMoov(buf),onDone(buf)}),onError)},prototype.loadSegment=function(idx,onDone,onError){if(idx<this.firstRealSegment){var dts=idx*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,duration=this.getSilenceSegmentDurationInDTS(idx),buf=MovDasher.createSilenceMoof(this.moovMp4Box,idx,dts,duration,this.log);return onDone(buf),ConformedM4sAudioStream.ABORT_IMPOSSIBLE}if(idx<=this.lastRealSegment)return this.realStream.loadSegment(idx-this.firstRealSegment,stjs.bind(this,function(buf){var pts=this.realStream.getSegmentStartTv(idx-this.firstRealSegment)+this.offsetPTS,dts=pts+this.frameAlignTv,patched=MovDasher.conformMoof(buf,idx,dts);onDone(patched)}),onError);var tailStartPts=this.offsetPTS+this.realStream.totalSamples,tailStartDts=tailStartPts+this.frameAlignTv,dts=tailStartDts+(idx-(this.lastRealSegment+1))*ConformedM4sAudioStream.SILENCE_SEGMENT_DURATION,duration=this.getSilenceSegmentDurationInDTS(idx),buf=MovDasher.createSilenceMoof(this.moovMp4Box,idx,dts,duration,this.log);return onDone(buf),ConformedM4sAudioStream.ABORT_IMPOSSIBLE},prototype.silenceAppended=function(){return!0},prototype.getDashDescriptor=function(){throw new RuntimeException("not supported")},prototype.isDynamic=function(){return this.realStream.isDynamic()}},{realStream:"SegmentedAudioStream",moovMp4Box:"MP4Box",log:"Log",ABORT_IMPOSSIBLE:"Callback0",channelMuted:{name:"Array",arguments:[null]},audioInfo:"AudioInfo",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var DashStreamFrameExtractor=function(segmentedStream,timeline,log,errorRx){AbstractFrameExtractor.call(this),this.segmentedStream=segmentedStream,this.timeline=timeline,this.log=log,this.errorRx=errorRx};DashStreamFrameExtractor=stjs.extend(DashStreamFrameExtractor,AbstractFrameExtractor,[],function(constructor,prototype){prototype.segmentedStream=null,prototype.timeline=null,prototype.log=null,prototype.errorRx=null,prototype.init=function(callback){this.frameData=new Array,this.iframes=new Array,this.addIFrames(),this.segmentedStream.getUpdateRx().subscribe(stjs.bind(this,function(d){return this.addIFrames()})),this.segmentedStream.getDashInit(stjs.bind(this,function(buf){this.mp4box=Mp4Loader.parseMoov(buf),callback(this.getInfo())}),stjs.bind(this,function(req){return this.errorRx.onNext(new PlayerError("error loading dash init segment from thumb stream",PlayerError.NONFATAL))}))},prototype.addIFrames=function(){for(var i=0;i<this.segmentedStream.getSegmentCount();i++){var time=this.segmentedStream.getSegmentStartTime(i),fn=this.timeline.getFrameBySec(time);this.addIFrame(fn)}},prototype.addIFrame=function(fn){var prevIdx=Utils.binarySearch1(this.iframes,fn),prev=this.iframes[prevIdx];fn!=prev&&this.iframes.splice(prevIdx+1,0,fn)},prototype.getInfo=function(){var trackInfo=this.mp4box.getInfo().videoTracks[0].video;return new FilmstripInfo(trackInfo.width,trackInfo.height,this.timeline.getFrameCount())},prototype.getPrevIframe=function(fn){return this.iframes[Utils.binarySearch1(this.iframes,fn)]},prototype.loadFrameData=function(fn){return Rx.Observable.create(stjs.bind(this,function(observer){if(null==this.frameData[fn]&&fn>=0&&fn<this.getInfo().framesTotal){var time=this.timeline.getSecByFrame(fn),segmentIdx=this.segmentedStream.getSegmentIdxByTime(time);return this.segmentedStream.loadSegment(segmentIdx,stjs.bind(this,function(buf){this.processSegment(segmentIdx,buf),observer.onNext(fn),observer.onCompleted()}),stjs.bind(this,function(err){this.errorRx.onNext(new PlayerError("error loading thumbs segment",PlayerError.NONFATAL,segmentIdx,err)),observer.onError(err)}))}return observer.onNext(fn),observer.onCompleted(),function(){}}))},prototype.processSegment=function(segmentIdx,buf){for(var segmentFirstFn=this.timeline.getFrameBySec(this.segmentedStream.getSegmentStartTime(segmentIdx)),segmentMp4Box=Mp4Loader.parseMoof(buf),samples=MovDasher.getTrunSamplesInfo(segmentMp4Box),i=0;i<samples.length;i++){var fn=segmentFirstFn+i,sample=samples[i],nalUnits=this.getNALUnits(buf,stjs.trunc(sample.offset),sample.size);this.frameData[fn]=nalUnits,this.isIFrame(nalUnits)&&this.addIFrame(fn)}},prototype.isIFrame=function(nalUnits){for(var i=0;i<nalUnits.length;i++){var type=31&nalUnits[i][0];if(5==type)return!0}return!1},prototype.getNALLength=function(buf,initialOffset,maxOffset){var nalLength=new DataView(buf,initialOffset,4).getInt32(0);if(1!=nalLength)return nalLength;for(var offset=initialOffset+4;1!=new DataView(buf,offset,4).getInt32(0);){if(offset==maxOffset-4)return maxOffset-initialOffset-4;offset++}return offset-initialOffset-4},prototype.getNALUnits=function(buf,offset,size){for(var nalOffset=offset,nalUnits=[];nalOffset-offset<size;){var nalLength=this.getNALLength(buf,nalOffset,offset+size);nalUnits.push(new Uint8Array(buf,nalOffset+4,nalLength)),nalOffset+=nalLength+4}return nalUnits}},{segmentedStream:"SegmentedStream",timeline:"Timeline",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},mp4box:"MP4Box",iframes:{name:"Array",arguments:[null]},frameData:{name:"Array",arguments:[{name:"Array",arguments:["Uint8Array"]}]}},{});var PlayerView=function(container,log){CloseableView.call(this),this.parentEl=container,this.log=log,this.autoDisposables=new Rx.CompositeDisposable,this.initPlayerContainer()};PlayerView=stjs.extend(PlayerView,CloseableView,[],function(constructor,prototype){prototype.player=null,prototype.parentEl=null,prototype.log=null,prototype.container=null,prototype.video=null,prototype.trickVideo=null,prototype.hm=null,prototype.playerContainer=null,prototype.frozenCanvas=null,prototype.fullscreenRx=null,prototype.spinner=null,prototype.autoDisposables=null,prototype.stepInterval=0,constructor.DO_NOTHING=function(e){},constructor.PLAYER_TEMPLATE='<style type="text/css">\n   .vg_player { position: relative; }\n   .vg_player video { display: block; height: 100%; width: 100%; border: 0; }\n   .vg_player video + video { position: absolute; top: 0; left: 0; }\n   .vg_player_opacity_0 { opacity: 0; }\n</style>\n<div class="vg_embed-container">\n    <div class="vg_player vg_background">\n        <div class="vg_loading-spinner vg_invisible"></div>\n        <video class="vg_player_opacity_0" type="hires+audio"></video>\n        <video type="lowres"></video>\n    </div>\n    <div class="vg_allControls"></div>\n</div>\n<div class="vg_proPanel vg_background"></div>',prototype.initPlayerContainer=function(){this.container=window.document.createElement("div"),this.container.className="vg_playerContainer",this.container.classList.add("vg_noselect"),this.container.innerHTML=PlayerView.PLAYER_TEMPLATE,this.parentEl.appendChild(this.container),this.playerContainer=this.container.querySelector(".vg_player"),this.trickVideo=this.playerContainer.querySelector('video[type="lowres"]'),this.video=this.playerContainer.querySelector('video[type="hires+audio"]'),this.spinner=this.playerContainer.querySelector(".vg_loading-spinner"),this.fullscreenRx=this.createFullScreenRx(),this.showSpinner()},prototype.init=function(player){this.player=player,player.getVideoElement().getBusyRx().subscribe(stjs.bind(this,function(busy){busy?this.showSpinner():this.hideSpinner()})),this.fullscreenRx.subscribe(stjs.bind(this,function(isFullScreen){isFullScreen?this.player.container.classList.add("vg_fullscreenMode"):this.player.container.classList.remove("vg_fullscreenMode");
})),player.options.hotkeys&&this.initHotkeys()},prototype.showSpinner=function(){this.spinner.classList.remove("vg_invisible")},prototype.hideSpinner=function(){this.spinner.classList.add("vg_invisible")},prototype.freezeVideo=function(){if(null==this.frozenCanvas){var c=window.document.createElement("div");c.classList.add("vg_frozen_container"),this.frozenCanvas=window.document.createElement("canvas"),c.appendChild(this.frozenCanvas),this.playerContainer.appendChild(c)}this.frozenCanvas.width=this.player.getVideoElement().getVideoWidth(),this.frozenCanvas.height=this.player.getVideoElement().getVideoHeight();var fw=this.playerContainer.clientWidth/this.frozenCanvas.width,fh=this.playerContainer.clientHeight/this.frozenCanvas.height,context=(Math.min(fw,fh),this.frozenCanvas.getContext("2d",null));return context.drawImage(this.video,0,0),this.frozenCanvas},prototype.unfreezeVideo=function(){if(null!=this.frozenCanvas){var parentNode=this.frozenCanvas.parentNode;parentNode.style.display="none"}},prototype.getFrozenCanvas=function(){return this.frozenCanvas},prototype.initHotkeys=function(){this.hm=new HotkeyManager(this.log),this.hm.enableHotKeysForWindow(window);var p=this.player;this.hm.addShortcut("space",stjs.bind(this,function(e){this.player.togglePlay(),e.preventDefault()}),KeyOptions.gd("Player","Play/Pause",!0)),this.hm.addShortcut("shift-right",function(e){p.playFaster()},KeyOptions.gd("Player","Play faster",!1)),this.hm.addShortcut("shift-left",function(e){p.playFasterBackwards()},KeyOptions.gd("Player","Play faster backwards",!1)),this.hm.addShortcut("left",stjs.bind(this,function(e){this.player.previousFrame(this.stepInterval)}),KeyOptions.gd("Player","Previous frame",!1)),this.hm.addShortcut("right",stjs.bind(this,function(e){this.player.nextFrame(this.stepInterval)}),KeyOptions.gd("Player","Next frame",!1)),this.hm.addShortcut("esc",stjs.bind(this,function(e){Utils.isFullScreen()&&this.exitFullscreen()}),KeyOptions.gd("Player","Exit fullscreen",!1)),this.hm.addShortcut("k",stjs.bind(this,function(e){this.player.pause()}),KeyOptions.gd("Player","Pause",!1)),this.hm.addShortcut("j",stjs.bind(this,function(e){this.player.playFasterBackwards()}),KeyOptions.gd("Player","Play backward, play backward faster",!1)),this.hm.addShortcut("l",stjs.bind(this,function(e){this.player.playFaster()}),KeyOptions.gd("Player","Play forward, play forward faster",!1)),this.hm.addShortcut("k-j",stjs.bind(this,function(e){this.player.previousFrame(1)}),KeyOptions.gd("Player","Previous frame",!1)),this.hm.addShortcut("k-l",stjs.bind(this,function(e){this.player.nextFrame(1)}),KeyOptions.gd("Player","Next frame",!1));var videoEl=this.container.querySelector(".vg_player"),clicks=new MutableInt(0);videoEl.addEventListener("click",stjs.bind(this,function(e){clicks.value++,2==clicks.value?(clicks.value=0,this.toggleFullscreen()):setTimeout(stjs.bind(this,function(){1==clicks.value&&(this.container.classList.contains("noSource")||this.player.togglePlay(),clicks.value=0)}),300)}))},prototype.onFullScreen=function(e){Utils.isFullScreen()?Utils.fullScreenElement(this.parentEl.ownerDocument)==this.parentEl&&this.fullscreenRx.onNext(!0):this.fullscreenRx.onNext(!1)},prototype.createFullScreenRx=function(){return this.autoDisposable(Rx.Observable.fromEvent(window.document,"webkitfullscreenchange").subscribe(stjs.bind(this,"onFullScreen"))),this.autoDisposable(Rx.Observable.fromEvent(window.document,"mozfullscreenchange").subscribe(stjs.bind(this,"onFullScreen"))),this.autoDisposable(Rx.Observable.fromEvent(window.document,"fullscreenchange").subscribe(stjs.bind(this,"onFullScreen"))),this.autoDisposable(Rx.Observable.fromEvent(window.document,"MSFullscreenChange").subscribe(stjs.bind(this,"onFullScreen"))),new Rx.Subject},prototype.closeFullScreenRx=function(){this.fullscreenRx.onCompleted()},prototype.toggleFullscreen=function(){Utils.isFullScreen()?this.exitFullscreen():this.enterFullscreen(this.parentEl)},prototype.enterFullscreen=function(elt){this.log.debug("enterFullscreen");var el=elt||this.container;null!=el.requestFullScreen?el.requestFullScreen():null!=el.mozRequestFullScreen?el.mozRequestFullScreen():null!=el.webkitRequestFullScreen?(el.webkitRequestFullScreen(1),window.document.isFullscreen||el.webkitRequestFullScreen(0)):null!=el.webkitEnterFullScreen?el.webkitEnterFullScreen():el!=this.video&&this.enterFullscreen(this.video)},prototype.exitFullscreen=function(){this.log.debug("exitFullscreen"),null!=window.document.cancelFullscreen?window.document.cancelFullscreen():null!=window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():null!=window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen()},prototype.seekFrameAndCheckRange=function(frame){},prototype.getCaptionsContainer=function(){},prototype.hideTrickVideo=function(){this.trickVideo.classList.add(VideoElement.VG_PLAYER_OPACITY_0),this.video.classList.remove(VideoElement.VG_PLAYER_OPACITY_0)},prototype.renderFatalError=function(err){},prototype.renderRange=function(fromFrame,toFrame){},prototype.renderWhole=function(){},prototype.showAsAudioPlayer=function(){},prototype.close=function(){CloseableView.prototype.close.call(this);var node=this.parentEl.querySelector(".vg_playerContainer");null!=node&&this.parentEl.removeChild(node),null!=this.hm&&this.hm.destruct(),this.closeFullScreenRx(),this.autoDisposables.dispose(),this.autoDisposables=new Rx.CompositeDisposable},prototype.autoDisposable=function(disposable){this.autoDisposables.add(disposable)}},{player:"PlayerImpl",parentEl:"Element",log:"Log",container:"Element",video:"Video",trickVideo:"Video",hm:"HotkeyManager",playerContainer:"Element",frozenCanvas:"Canvas",fullscreenRx:{name:"Rx.Subject",arguments:[null]},spinner:"Element",autoDisposables:"Rx.CompositeDisposable",DO_NOTHING:{name:"Callback1",arguments:["DOMEvent"]},children:{name:"Array",arguments:["CloseableView"]}},{});var MPDXml=function(xml,log){this.xml=xml,this.log=log};MPDXml=stjs.extend(MPDXml,null,[],function(constructor,prototype){prototype.xml=null,prototype.log=null,prototype.getDashDescriptor=function(representationId){var repr=this.xml.querySelector("Representation[id='"+representationId+"']"),segments=this.getSegmentTemplateOrList(representationId),desc=new DashDescriptor;return desc.timecode="00:00:00:00",desc.timescale=Integer.parseInt(segments.getAttribute("timescale")),desc.frameDuration=this.getFrameDuration(representationId),desc.segmentStartTv=this.getSegmentStartTv(representationId),desc.segmentStartFrame=this.getSegmentStartFrame(representationId),desc.duration=this.getDurationTv(representationId),desc.mimeType=this.getMimeType(repr),desc.codecs=repr.getAttribute("codecs"),desc.dynamic=this.isDynamic(),desc.width=Integer.parseInt(repr.getAttribute("width")),desc.height=Integer.parseInt(repr.getAttribute("height")),desc},prototype.getSegmentTemplate=function(representationId){var repr=this.xml.querySelector("Representation[id='"+representationId+"']");return repr.querySelector("SegmentTemplate")||repr.parentElement.querySelector("SegmentTemplate")},prototype.getSegmentTemplateOrList=function(representationId){var repr=this.xml.querySelector("Representation[id='"+representationId+"']");return repr.querySelector("SegmentTemplate")||repr.parentElement.querySelector("SegmentTemplate")||repr.querySelector("SegmentList")},prototype.getBaseURL=function(defaultBaseUrl){var baseUrlEl=this.xml.querySelector("BaseURL");return null!=baseUrlEl&&Utils.isNotBlank(baseUrlEl.innerHTML)?baseUrlEl.innerHTML:defaultBaseUrl},prototype.getSegmentUrls=function(baseUrl,representationId){var segmentList=this.xml.querySelector("Representation[id='"+representationId+"'] SegmentList");if(null!=segmentList){for(var init=this.xml.querySelector("Representation[id='"+representationId+"'] SegmentList Initialization").getAttribute("sourceURL"),segments=this.xml.querySelectorAll("Representation[id='"+representationId+"'] SegmentList SegmentURL"),urls=new Array,i=0;i<segments.length;i++)urls.push(segments[i].getAttribute("media"));return new DashSegmentUrls(init,urls)}var segTemplate=this.getSegmentTemplate(representationId),init=segTemplate.getAttribute("initialization").replace("$RepresentationID$",representationId),mediaTemplate=segTemplate.getAttribute("media").replace("$RepresentationID$",representationId),startNumber=Integer.parseInt(segTemplate.getAttribute("startNumber")),segmentEls=this.getSegmentTemplateOrList(representationId).querySelectorAll("S"),urls=new Array,count=0;if(segmentEls.length>0)for(var i=0;i<segmentEls.length;i++){var rStr=segmentEls[i].getAttribute("r"),repeats=Utils.isNotEmpty(rStr)?Integer.parseInt(rStr):0;count+=1+repeats}else{var durationTv=this.getDurationTv(representationId),segmentDurationTv=Long.parseLong(segTemplate.getAttribute("duration"));count=stjs.trunc(Math.ceil(durationTv/segmentDurationTv))}for(var i=0;i<count;i++){var url=baseUrl+this.format(i+startNumber,mediaTemplate);urls.push(url)}return new DashSegmentUrls(baseUrl+init,urls)},prototype.getSegmentStartTv=function(representationId){var segmentEls=this.getSegmentTemplateOrList(representationId).querySelectorAll("S"),tvs=new Array;if(segmentEls.length>0){for(var tv=0,i=0;i<segmentEls.length;i++){var dur=Long.parseLong(segmentEls[i].getAttribute("d")),countStr=segmentEls[i].getAttribute("r"),count=Utils.isNotEmpty(countStr)?Integer.parseInt(countStr)+1:1,tvStr=segmentEls[i].getAttribute("t");Utils.isNotEmpty(tvStr)&&(tv=Long.parseLong(tvStr));for(var j=0;j<count;j++)tvs.push(tv),tv+=dur}tvs.push(tv)}else{for(var durationTv=this.getDurationTv(representationId),segmentTemplate=this.getSegmentTemplate(representationId),segmentDurationTv=Long.parseLong(segmentTemplate.getAttribute("duration")),count=stjs.trunc(Math.ceil(durationTv/segmentDurationTv)),tv=0,i=0;i<count;i++)tvs.push(tv),tv+=segmentDurationTv;tvs.push(durationTv)}return tvs},prototype.getSegmentStartFrame=function(representationId){var segmentEls=this.getSegmentTemplateOrList(representationId).querySelectorAll("S");if(0==segmentEls.length)return null;for(var frames=new Array,frame=0,i=0;i<segmentEls.length;i++){var frameCountStr=segmentEls[i].getAttribute("f");if(Utils.isEmpty(frameCountStr)||"0".equals(frameCountStr))return null;for(var segmentFrameCount=Integer.parseInt(frameCountStr),countStr=segmentEls[i].getAttribute("r"),count=Utils.isNotEmpty(countStr)?Integer.parseInt(countStr)+1:1,j=0;j<count;j++)frames.push(frame),frame+=segmentFrameCount}return frames.push(frame),frames},prototype.getTimeScale=function(representationId){var segments=this.getSegmentTemplateOrList(representationId);return null!=segments?Integer.parseInt(segments.getAttribute("timescale")):-1},prototype.getDurationTv=function(representationId){var segmentEls=this.getSegmentTemplateOrList(representationId).querySelectorAll("S");if(segmentEls.length>0){for(var duration=0,i=0;i<segmentEls.length;i++){var dur=Long.parseLong(segmentEls[i].getAttribute("d")),countStr=segmentEls[i].getAttribute("r"),count=Utils.isNotEmpty(countStr)?Integer.parseInt(countStr)+1:1;duration+=dur*count}return duration}var xsDuration=this.xml.querySelector("MPD").getAttribute("mediaPresentationDuration"),millis=Utils.parseXsDuration(xsDuration);return Utils.convertTv(millis,1e3,this.getTimeScale(representationId))},prototype.isDynamic=function(){return"dynamic".equals(this.mpdElement().getAttribute("type"))},prototype.mpdElement=function(){return this.xml.querySelector("MPD")},prototype.getChannelConfiguration=function(representationId){var repr=this.xml.querySelector("Representation[id='"+representationId+"']"),conf=repr.querySelector("AudioChannelConfiguration")||repr.parentElement.querySelector("AudioChannelConfiguration");return Integer.parseInt(conf.getAttribute("value"))},prototype.getFrameDuration=function(representationId){var repr=this.xml.querySelector("Representation[id='"+representationId+"']"),frameRateStr=repr.getAttribute("frameRate")||repr.parentElement.getAttribute("frameRate");if(Utils.isNotBlank(frameRateStr)){var frameRate;if(frameRateStr.contains("/")){var split=frameRateStr.split("/");frameRate=Double.parseDouble(split[0])/Double.parseDouble(split[1])}else frameRate=Double.parseDouble(frameRateStr);return stjs.trunc(Math.round(this.getTimeScale(representationId)/frameRate))}return 0},prototype.getAudioRepresentationIds=function(){return this.getRepresentationIds("audio")},prototype.getVideoRepresentationIds=function(){return this.getRepresentationIds("video")},prototype.getRepresentationIds=function(type){for(var ids=[],representations=this.xml.querySelectorAll("AdaptationSet[contentType='"+type+"'] Representation"),i=0;i<representations.length;i++)ids.push(representations[i].id);representations=this.xml.querySelectorAll("AdaptationSet[mimeType^='"+type+"'] Representation");for(var i=0;i<representations.length;i++){var id=representations[i].id;ids.indexOf(id)==-1&&ids.push(id)}representations=this.xml.querySelectorAll("Representation[mimeType^='"+type+"']");for(var i=0;i<representations.length;i++){var id=representations[i].id;ids.indexOf(id)==-1&&ids.push(id)}return ids},constructor.fromString=function(s,log){var domParser=new DOMParser,parseFromString=domParser.parseFromString(s,"text/xml");if(log.debug(parseFromString),null!=parseFromString.querySelector("parsererror")){var err=parseFromString.querySelector("parsererror div").textContent;throw new MPDXml.MPDParseException(err)}return new MPDXml(parseFromString,log)},prototype.getVgTotalDuration=function(timescale){var d=this.getVgTotalDurationSec();return null==d?null:stjs.trunc(d*timescale)},prototype.getVgTotalDurationSec=function(){var vgTotalDurationSec=this.mpdElement().getAttribute("vgTotalDurationSec");return null==vgTotalDurationSec?null:Double.parseDouble(vgTotalDurationSec)},prototype.format=function(num,mediaTemplate){return mediaTemplate.replace("$Number$",num+"").replace("$Number%04d$",Utils.zeroPad(num,4)).replace("$Number%05d$",Utils.zeroPad(num,5))},prototype.getDrmInfo=function(){var infos=[];return Utils.arrayFrom(this.xml.querySelectorAll("Representation")).filter(stjs.bind(this,function(repr,i,a){var mt=this.getMimeType(repr);return mt.startsWith("video")||mt.startsWith("audio")})).filter(function(repr,i,a){return null!=repr.parentElement.querySelector("ContentProtection[value='cenc']")}).forEach(stjs.bind(this,function(repr,i,a){var adaptation=repr.parentElement,contentType=this.getMimeType(repr)+'; codecs="'+repr.getAttribute("codecs")+'"';Utils.arrayFrom(adaptation.querySelectorAll("ContentProtection")).forEach(stjs.bind(this,function(contentProtection){var pssh=contentProtection.querySelector("pssh"),psshContent=null!=pssh?pssh.textContent:null,pro=contentProtection.querySelector("pro"),proContent=null!=pro?pro.textContent:null;switch(contentProtection.getAttribute("schemeIdUri")){case"urn:mpeg:dash:mp4protection:2011":break;case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":infos.push(new DRMInfo(repr.id,DRM.WIDEVINE,psshContent,contentType));break;case"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":var initData=null;null!=pssh?initData=psshContent:null!=pro&&(initData=this.wrapProInPssh(proContent)),infos.push(new DRMInfo(repr.id,DRM.PLAYREADY,initData,contentType));break;default:this.log.warn("unsupported content protection for Representation.id="+repr.id)}}))})),infos},prototype.getMimeType=function(representation){return(representation.getAttribute("mimeType")||representation.parentElement.getAttribute("mimeType")).toLowerCase()},prototype.wrapProInPssh=function(pro64){var pro=window.atob(pro64),psshBuf=new ArrayBuffer(32),view=new DataView(psshBuf);view.setUint32(0,view.byteLength+pro.length,!1),view.setUint32(4,1886614376,!1),view.setUint32(8,0,!1),view.setUint32(12,-1710952327,!1),view.setUint16(16,38976,!1),view.setUint16(18,17030,!1),view.setUint16(20,43922,!1),view.setUint16(22,58971,!1),view.setUint32(24,-527933547,!1),view.setUint32(28,pro.length,!1);for(var pssh="",i=0;i<view.byteLength;i++)pssh+=String.fromCharCode(view.getUint8(i));return pssh+=pro,window.btoa(pssh)},constructor.MPDParseException=function(message){Exception.call(this,message)},constructor.MPDParseException=stjs.extend(constructor.MPDParseException,Exception,[],null,{},{})},{xml:"Document",log:"Log"},{});var AbstractVideoElement=function(video,timeline,log,errorRx){this.video=video,this.timeline=timeline,this.log=log,this.errorRx=errorRx,this.animationRequestId=0,this.rangeFromFrame=-1,this.rangeToFrame=-1,this.loop=!1,this.quickSeek=!1,this.metadataLoaded=!1,this.initialTime=0,this.playRateBeforeQuickSeek=0,this.playRateCurrent=0,this.resetPlayRateOnSeek=!0,this.busyRx=new Rx.Subject,this.playBackwardsRx=new Rx.Subject,this.autoDisposables=new Rx.CompositeDisposable;var playRx=Rx.Observable.fromEvent(this.video,VideoElement.PLAYING),pauseRx=Rx.Observable.fromEvent(this.video,VideoElement.PAUSE),forwardPlayRx=Rx.Observable.merge(playRx,pauseRx).map(stjs.bind(this,function(x){return this.isPlaying()}));if(this.playRx=Rx.Observable.merge(this.playBackwardsRx,forwardPlayRx),this.volumeChangeRx=Rx.Observable.fromEvent(this.video,VideoElement.VOLUMECHANGE,stjs.bind(this,function(e){return this.getVolume()})),this.timeUpdateSubject=new Rx.Subject,this.progressSubject=new Rx.Subject,this.autoDisposable(Rx.Observable.fromEvent(this.video,VideoElement.TIMEUPDATE).map(function(e){return video.currentTime}).subscribe(stjs.bind(this,function(e){this.checkUnbufferedPlayback(),this.timeUpdateSubject.onNext(e)}))),this.autoDisposable(Rx.Observable.fromEvent(this.video,VideoElement.PROGRESS).subscribe(stjs.bind(this,function(e){this.progressSubject.onNext(this.getBuffered())}))),this.autoDisposable(Rx.Observable.interval(1e3).subscribe(stjs.bind(this,function(x){return this.checkUnbufferedPlayback()}))),timeline==Timeline.UNKNOWN){var genericTime=GenericTimeline.newGenericTime(24e3,1001);this.timeline=new BoundedTimeline(genericTime),Rx.Observable.fromEvent(this.video,VideoElement.LOADEDMETADATA).take(1).subscribe(stjs.bind(this,function(e){log.debug(VideoElement.LOADEDMETADATA),video.currentTime=this.initialTime,genericTime.setDurationSec(video.duration),this.timeUpdateSubject.onNext(video.currentTime)}))}this.timeline.getUpdateRx().subscribe(stjs.bind(this,function(t){this.timeUpdateSubject.onNext(video.currentTime),null!=this.seekTarget&&this.timeToSeekByFrame(this.seekTarget.frame)!=this.seekTarget.time&&this.seekFrame(this.seekTarget.frame)})),this.autoDisposable(Rx.Observable.fromEvent(this.video,VideoElement.SEEKED).subscribe(stjs.bind(this,function(e){return this.seekTarget=null})))};AbstractVideoElement=stjs.extend(AbstractVideoElement,null,[VideoElement],function(constructor,prototype){constructor.progressLog=!1,constructor.allEventsLog=!1,prototype.log=null,prototype.errorRx=null,prototype.timeline=null,prototype.video=null,prototype.quickSeek=!1,prototype.wasPlayingBeforeQuickSeek=!1,prototype.metadataLoaded=!1,prototype.initialTime=0,prototype.loop=!1,prototype.pauseOnLoop=!1,prototype.rangeFromFrame=0,prototype.rangeToFrame=0,prototype.rangeFromTime=0,prototype.rangeToTime=0,prototype.animationRequestId=0,prototype.playRateCurrent=0,prototype.playRateBeforeQuickSeek=0,prototype.resetPlayRateOnSeek=!1,prototype.unbufferedPause=!1,prototype.playRx=null,prototype.playBackwardsRx=null,prototype.volumeChangeRx=null,prototype.timeUpdateSubject=null,prototype.progressSubject=null,prototype.busyRx=null,prototype.autoDisposables=null,prototype.__seekBackwardsInterval=null,prototype.seekTarget=null,prototype.backwardsPlaybackHackSeek=!1,constructor.HAVE_FUTURE_DATA=3,constructor.HAVE_ENOUGH_DATA=4,constructor.MIN_PREBUFFER_TIME=1,constructor.VIDEO_END_THRESHOLD=.5,constructor.SeekTarget=function(frame,time){this.frame=frame,this.time=time},constructor.SeekTarget=stjs.extend(constructor.SeekTarget,null,[],function(constructor,prototype){prototype.frame=0,prototype.time=0},{},{}),prototype.seek=function(time){},prototype.afterSeek=function(time){this.seekTarget=null,this.resetPlayRateOnSeek&&this.isPlaying()&&this.playRateCurrent!=this.direction(this.playRateCurrent)&&!this.backwardsPlaybackHackSeek&&this.playAtRate(this.direction(this.playRateCurrent)),this.checkUnbufferedPlayback()},prototype.playAtRate=function(r){if(this.stopBackwards(),r>16?r=16:r<-16&&(r=-16),r>0&&!this.isPlaying())if(this.hasRange()){var curFrame=this.getTimeline().getFrameBySec(this.getTimeSec());(curFrame>=this.rangeToFrame||this.getTimeSec()>this.getSeekableDuration()-AbstractVideoElement.VIDEO_END_THRESHOLD)&&this.seekFrame(this.rangeFromFrame)}else this.getTimeSec()>this.getSeekableDuration()-AbstractVideoElement.VIDEO_END_THRESHOLD&&this.seek(0);return 0==r?(this.pause(),void(this.playRateCurrent=0)):(this.playRateCurrent=r,void this.implementationSpecificPlay())},prototype.implementationSpecificPlay=function(){},prototype.stopBackwards=function(){null!=this.__seekBackwardsInterval&&(clearInterval(this.__seekBackwardsInterval),this.playBackwardsRx.onNext(!1),this.__seekBackwardsInterval=null)},prototype.close=function(){this.playBackwardsRx.onCompleted(),this.stopBackwards(),0!=this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.autoDisposables.dispose()},prototype.pause=function(){},prototype.isPlaying=function(){},prototype.getFrame=function(){},prototype.getVolume=function(){},prototype.setVolume=function(v){},prototype.getTimeSec=function(){},prototype.getVideoWidth=function(){},prototype.getVideoHeight=function(){},prototype.getTimeline=function(){return this.timeline},prototype.getVideoShownRx=function(){},prototype.getTimeUpdateRx=function(){return this.timeUpdateSubject},prototype.getProgressRx=function(){return this.progressSubject},prototype.forwardSec=function(n){n=Math.max(n,1);var calcSec=this.getTimeSec()+n,sec=Math.min(calcSec,this.getSeekableDuration());this.seek(sec)},prototype.forward1=function(n){var _n=Math.max(n,1),fn=this.getFrame(),toFrame=this.getTimeline().boundsFn(fn+_n);this.seekFrame(toFrame)},prototype.backward1=function(n){var _n=Math.max(n,1),fn=this.getFrame(),toFrame=fn-_n;toFrame<0&&(toFrame=0),this.seekFrame(toFrame)},prototype.timeToSeekByFrame=function(fn){if(fn<1)return 0;var t=this.getTimeline().getSecByFrame(fn),nt=this.getTimeline().getSecByFrame(fn+1),dt=(nt-t)/10;return t+dt},prototype.seekFrame=function(fn){var timeToSeek=this.timeToSeekByFrame(fn);this.seek(timeToSeek),this.seekTarget=new AbstractVideoElement.SeekTarget(fn,timeToSeek)},prototype.backwardSec=function(n){n=Math.max(n,1);var calcSec=this.getTimeSec()-n,sec=Math.max(0,Math.min(calcSec,this.getSeekableDuration()));this.seek(sec)},prototype.getPlayRate=function(){return this.playRateCurrent},prototype.getTimeValue=function(){return this.getTimeline().getTvByFrame(this.getFrame())},prototype.playFaster=function(){var r=this.playRateCurrent;r>=1?this.playAtRate(2*r):r<1&&this.playAtRate(1)},prototype.playFasterBackwards=function(){var r=this.playRateCurrent;r<=-1?this.playAtRate(2*r):r>-1&&this.playAtRate(-1)},prototype.getDuration=function(){return this.getTimeline().getDurationSec()},prototype.getSeekableDuration=function(){return this.getTimeline().getSeekableDurationSec()},prototype.endQuickSeek=function(){this.log.debug("quick seek ended"),this.quickSeek=!1,this.wasPlayingBeforeQuickSeek&&this.playAtRate(this.resetPlayRateOnSeek?this.direction(this.playRateBeforeQuickSeek):this.playRateBeforeQuickSeek)},prototype.startQuickSeek=function(){this.wasPlayingBeforeQuickSeek=this.isPlaying(),this.playRateBeforeQuickSeek=this.playRateCurrent,this.quickSeek=!0,this.pause(),this.log.debug("quick seek started")},prototype.setInitialTime=function(initialTime){this.initialTime=initialTime},prototype.setLoop=function(loop){},prototype.setPauseOnLoop=function(pauseOnLoop){this.pauseOnLoop=pauseOnLoop},prototype.hasRange=function(){return this.rangeFromFrame!=-1},prototype.inRange=function(fn){return fn>=this.rangeFromFrame&&fn<=this.rangeToFrame},prototype.setRange=function(fromFrame,toFrame){0!=this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.seekFrame(fromFrame),this.rangeFromFrame=fromFrame,this.rangeToFrame=toFrame,this.rangeFromTime=this.getTimeline().getSecByFrame(fromFrame),this.rangeToTime=this.getTimeline().getSecByFrame(toFrame+1),this.animationRequestId=window.requestAnimationFrame(stjs.bind(this,"timeRangeControl"))},prototype.timeRangeControl=function(){if(this.hasRange()){if(this.metadataLoaded){var time=this.getTimeSec();time>=this.rangeToTime&&(this.loop?(this.seekFrame(this.rangeFromFrame),this.pauseOnLoop&&this.pause()):(this.seekFrame(this.rangeToFrame),this.pause())),time<this.rangeFromTime&&(this.loop?(this.seekFrame(this.rangeToFrame),this.pauseOnLoop&&this.pause()):(this.seekFrame(this.rangeFromFrame),this.pause()))}this.animationRequestId=window.requestAnimationFrame(stjs.bind(this,"timeRangeControl"))}},prototype.cancelRange=function(){this.rangeFromFrame=-1,this.rangeToFrame=-1,this.loop=!1,0!=this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId)},prototype.addPrintEvents=function(v){if(null!=v){var printEventType=stjs.bind(this,function(e){if(AbstractVideoElement.allEventsLog){var errorType="";"error"==e.type&&(errorType="("+VideoElement.mediaErrors[v.error.code]+") ");for(var seekable="",i=0;i<v.seekable.length;i++)seekable+=" "+v.seekable.start(i)+".."+v.seekable.end(i);for(var buffered="",i=0;i<v.buffered.length;i++)buffered+=" "+v.buffered.start(i)+".."+v.buffered.end(i);var url=v.getAttribute("type"),str=url+" "+e.type+" "+errorType+VideoElement.networkStates[v.networkState]+" "+VideoElement.readyStates[v.readyState]+" "+seekable+" "+buffered+"\n";null!=v.id&&(str=v.id+" "+str),this.log.debug(str)}});v.addEventListener("abort",printEventType),v.addEventListener(VideoElement.CANPLAY,printEventType),v.addEventListener("canplaythrough",printEventType),v.addEventListener("durationchange",printEventType),v.addEventListener("emptied",printEventType),v.addEventListener("ended",printEventType),v.addEventListener("error",printEventType),v.addEventListener("loadeddata",printEventType),v.addEventListener(VideoElement.LOADEDMETADATA,printEventType),v.addEventListener("loadstart",printEventType),v.addEventListener(VideoElement.PAUSE,printEventType),v.addEventListener("play",printEventType),v.addEventListener(VideoElement.PLAYING,printEventType),AbstractVideoElement.progressLog&&v.addEventListener(VideoElement.PROGRESS,printEventType),v.addEventListener("ratechange",printEventType),v.addEventListener("readystatechange",printEventType),v.addEventListener("seeked",printEventType),v.addEventListener(VideoElement.SEEKING,printEventType),v.addEventListener("stalled",printEventType),v.addEventListener("suspend",printEventType),v.addEventListener(VideoElement.TIMEUPDATE,printEventType),v.addEventListener(VideoElement.VOLUMECHANGE,printEventType),v.addEventListener("waiting",printEventType)}},prototype.getPlayRx=function(){return this.playRx},prototype.getVolumeChangeRx=function(){return this.volumeChangeRx},prototype.getBusyRx=function(){return this.busyRx.distinctUntilChanged()},prototype.updateBusyStatus=function(video){video.readyState<AbstractVideoElement.HAVE_FUTURE_DATA||!this.enoughBufferForPlayback(video)?Utils.isChrome&&this.chromeCanPlayTime0(video)?(this.log.debug("special case: chrome can play even if the beginning of the video is said to be unbuffered"),this.busyRx.onNext(!1)):this.busyRx.onNext(!0):this.busyRx.onNext(!1)},prototype.enoughBufferForPlayback=function(video){for(var time=video.currentTime,i=0;i<video.buffered.length;i++)if(time>=video.buffered.start(i)&&time<=video.buffered.end(i))return!0;return!1},prototype.isNotBuffered=function(){var time=this.video.currentTime;if(Utils.isChrome&&this.chromeCanPlayTime0(this.video))return!1;for(var i=0;i<this.video.buffered.length;i++){if(time>=this.video.buffered.start(i)&&time<=this.video.buffered.end(i))return!1;if(time<this.video.buffered.start(i))return!0}return!0},prototype.notInitialLoading=function(){return this.video.buffered.length>0},prototype.chromeCanPlayTime0=function(video){var threshold=.04;return video.readyState==AbstractVideoElement.HAVE_ENOUGH_DATA&&video.currentTime<threshold&&video.buffered.length>0&&video.buffered.start(0)<=threshold},prototype.setCrossOrigin=function(type){this.video.setAttribute("crossorigin",type)},prototype.autoDisposable=function(disposable){this.autoDisposables.add(disposable)},prototype.setResetPlayRateOnSeek=function(reset){this.resetPlayRateOnSeek=reset},prototype.getBuffered=function(){for(var result=new Array,i=0;i<this.video.buffered.length;i++)result.push(new TimeRange(this.video.buffered.start(i),this.video.buffered.end(i)));return result},prototype.direction=function(n){return n>=0?1:-1},prototype.allowUnbufferedPlayback=function(){return 0!=this.video.src.indexOf("blob:")||Utils.isMobileSafari},prototype.checkUnbufferedPlayback=function(){this.allowUnbufferedPlayback()||(!this.video.paused&&this.isNotBuffered()&&this.notInitialLoading()?this.pauseUnbufferedPlayback():this.unbufferedPause&&!this.isNotBuffered()&&(this.unbufferedPause=!1,this.video.play()))},prototype.pauseUnbufferedPlayback=function(){this.log.debug("temp pause. video is unbuffered"),this.video.pause(),this.unbufferedPause=!0}},{log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},timeline:"Timeline",video:"Video",playRx:{name:"Rx.Observable",arguments:[null]},playBackwardsRx:{name:"Rx.Subject",arguments:[null]},volumeChangeRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubject:{name:"Rx.Subject",arguments:[null]},progressSubject:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},busyRx:{name:"Rx.Subject",arguments:[null]},autoDisposables:"Rx.CompositeDisposable",__seekBackwardsInterval:"TimeoutHandler",seekTarget:"AbstractVideoElement.SeekTarget",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var SimpleTimeline=function(timeScale,frameCount,frameDurationTv,tapeTimecode){GenericTimeline.call(this,timeScale,frameDurationTv,tapeTimecode),this.frameCount=frameCount,this.seekableDurationSec=this.getDurationSec()};SimpleTimeline=stjs.extend(SimpleTimeline,GenericTimeline,[],function(constructor,prototype){prototype.frameCount=0,constructor.newEndlessTime=function(timeline){var frameDurationTv=stjs.trunc(timeline.getTvByFrame(1)-timeline.getTvByFrame(0)),frameCount=Integer.MAX_VALUE;return SimpleTimeline.newSimpleTime(timeline.getTimeScale(),frameCount,frameDurationTv,timeline.getTapeByFrame(0))},constructor.newSimpleTime=function(timeScale,frameCount,frameDurationTv,tapeTimecode){var _tapeTimecode=TapeTimecode.timecodeFromString(tapeTimecode,stjs.trunc(Math.round(timeScale/frameDurationTv)));return new BoundedTimeline(new SimpleTimeline(timeScale,frameCount,frameDurationTv,_tapeTimecode))},prototype.getDurationSec=function(){return this.frameCount*this.frameDurationTv/this.timeScale},prototype.getFrameCount=function(){return stjs.trunc(this.frameCount)}},{updateRx:{name:"Rx.Subject",arguments:["Timeline"]},timecode:"TapeTimecode",UNKNOWN:"Timeline"},{});var HLSTimeline=function(timeScale,frameDurationTv,tapeTimecode){GenericTimeline.call(this,timeScale,frameDurationTv,tapeTimecode)};HLSTimeline=stjs.extend(HLSTimeline,GenericTimeline,[],function(constructor,prototype){prototype.schedule=null,prototype.updateInterval=null,prototype.playlist=null,constructor.liveUpdateHLSTime=function(http,url,initial,log,errorRx){var t=new HLSTimeline(24e3,1001,new TapeTimecode((!1),0,24));t.setDurationSec(initial.getDurationSec());var updateTimeoutMillis=2e3;return t.schedule=Rx.Observable.create(function(observer){return function(){return clearInterval(t.updateInterval)}}),t.updateInterval=setInterval(function(){log.debug("liveUpdateHLSTime"),http.get(url).subscribe(function(str){var playlist,split=str.split("\n");try{playlist=HLSPlaylist.parseM3U8(split,log)}catch(e){return void errorRx.onNext(new PlayerError(e.getMessage(),PlayerError.FATAL));
}t.playlist=playlist,t.getDurationSec()!=playlist.getDurationSec()&&(log.debug("liveUpdateHLSTime new duration",playlist.getDurationSec()),t.setDurationSec(playlist.getDurationSec())),playlist.hasEndList()&&(clearInterval(t.updateInterval),t.updateInterval=null)},function(req){errorRx.onNext(new PlayerError("error loading hls playlist "+req.status,PlayerError.FATAL))})},updateTimeoutMillis),t}},{schedule:{name:"Rx.Observable",arguments:[null]},updateInterval:"TimeoutHandler",playlist:"HLSPlaylist",updateRx:{name:"Rx.Subject",arguments:["Timeline"]},timecode:"TapeTimecode",UNKNOWN:"Timeline"},{});var MPDSegmentedVideoStream=function(id,http,urls,desc,totalDuration,log){SegmentedVideoStream.call(this,http,urls,desc,-1),this.id=id,this.timeline=new BoundedTimeline(new DashTimeline(this.timescale,desc.frameDuration,totalDuration,desc.segmentStartFrame,desc.segmentStartTv,log))};MPDSegmentedVideoStream=stjs.extend(MPDSegmentedVideoStream,SegmentedVideoStream,[],function(constructor,prototype){prototype.timeline=null,prototype.movieMp4Box=null,prototype.getFrameCount=function(){return this.timeline.getFrameCount()},prototype.getDashInit=function(onDone,onError){SegmentedVideoStream.prototype.getDashInit.call(this,stjs.bind(this,function(buf){this.movieMp4Box=Mp4Loader.parseMoov(buf),onDone(buf)}),onError)},prototype.loadSegment=function(segmentIdx,onDone,onError){return SegmentedVideoStream.prototype.loadSegment.call(this,segmentIdx,stjs.bind(this,function(buf){var segmentMp4Box=Mp4Loader.parseMoof(buf),pkts=MovDasher.parseTimePacketsInM4s(this.movieMp4Box,segmentMp4Box);this.timeline.originalTimeline().updateTimePackets(segmentIdx,pkts),onDone(buf)}),onError)},prototype.getTimeline=function(){return this.timeline},prototype.updateFrom=function(stream){SegmentedVideoStream.prototype.updateFrom.call(this,stream),this.timeline.originalTimeline().setDuration(this.desc.duration),this.timeline.setSeekableDurationSec(stjs.trunc(this.desc.duration/this.desc.timescale))}},{timeline:{name:"BoundedTimeline",arguments:["DashTimeline"]},movieMp4Box:"MP4Box",http:"Http",urls:"DashSegmentUrls",desc:"DashDescriptor",updateRx:{name:"Rx.Subject",arguments:["SegmentedStream"]}},{});var FilmStripDrawer=function(http,log,errorRx){this.http=http,this.log=log,this.errorRx=errorRx};FilmStripDrawer=stjs.extend(FilmStripDrawer,null,[],function(constructor,prototype){prototype.frameExtractor=null,prototype.closed=!1,prototype.fd=null,prototype.queueRx=null,prototype.queueSubscription=null,prototype.http=null,prototype.log=null,prototype.errorRx=null,prototype.initWithUrl=function(url,onDone){this.frameExtractor=new FrameExtractor(url,this.http,this.log),this.frameExtractor.init(stjs.bind(this,function(info){this.initPipeline(),null!=onDone&&onDone(info)}))},prototype.initWithDashStream=function(segmentedStream,timeline,onDone){this.frameExtractor=new DashStreamFrameExtractor(segmentedStream,timeline,this.log,this.errorRx),this.frameExtractor.init(stjs.bind(this,function(info){this.initPipeline(),null!=onDone&&onDone(info)}))},prototype.initPipeline=function(){this.fd=new FrameDrawer(this.frameExtractor),this.queueRx=new Rx.Subject,this.queueSubscription=this.queueRx.concatMap(stjs.bind(this,"processRequest")).subscribe()},prototype.processRequest=function(request){return Rx.Observable.create(stjs.bind(this,function(observer){if(request.cancelled)return observer.onCompleted(),function(){};var framesLoaded=Rx.Observable.from(request.frameNumbers).flatMap(stjs.bind(this,function(fn){return this.frameExtractor.loadFrameData(fn).flatMapObserver(function(x,i){return Rx.Observable.just(fn)},stjs.bind(this,function(err){return this.log.error("can not load thumb frame "+fn+". rendering black."),Rx.Observable.just(fn)}),function(){return Rx.Observable.empty()})})),framesSorted=RxUtil.sequential(framesLoaded,function(fn){return fn},request.frameNumbers),allFramesDrawn=this.drawThumbs(request.canvas,framesSorted);return request.disposable=allFramesDrawn["finally"](function(){return observer.onCompleted()}).subscribe(function(x){return request.onDone()},function(err){return request.onError(err)}),function(){return request.disposable.dispose()}}))},prototype.getInfo=function(){return this.frameExtractor.getInfo()},prototype.drawThumbs=function(canvas,frames){var info=this.getInfo(),aspect=info.width/info.height,frameHeight=canvas.height,frameWidth=stjs.trunc(frameHeight*aspect),ctx=canvas.getContext("2d",null);return frames.concatMap(stjs.bind(this,function(fn){return this.fd.decodeFrame(fn)})).reduce(function(b,decodedCanvas,idx,src){return null!=decodedCanvas?ctx.drawImage(decodedCanvas,idx*frameWidth,0,frameWidth,frameHeight):ctx.fillRect(idx*frameWidth,0,frameWidth,frameHeight),!0},!0)},prototype.drawFilmstrip=function(canvas,startFrame,endFrame,numberOfFrames,framePrecise,onDone,onError){if(this.closed)return null;var frameNumbers=this.frameNumbers(startFrame,endFrame,numberOfFrames);if(!framePrecise&&null!=this.frameExtractor.iframes){var aligned=this.alignToIframes(frameNumbers);this.hasDuplicates(aligned)||(frameNumbers=aligned)}var request=new FilmStripDrawer.DrawRequest(canvas,frameNumbers,onDone,onError);return this.queueRx.onNext(request),stjs.bind(request,"abort")},prototype.frameNumbers=function(startFn,endFn,count){for(var delta=(endFn-startFn+1)/count,frameNumbers=new Array(count),i=0;i<count;i++)frameNumbers[i]=parseInt(Math.round(startFn+i*delta));return frameNumbers[count-1]=endFn,frameNumbers[0]=startFn,frameNumbers},prototype.alignToIframes=function(frameNumbers){var aligned=new Array;aligned.push(frameNumbers[0]);for(var framesTotal=this.frameExtractor.getInfo().framesTotal,i=1;i<frameNumbers.length-1;i++){var fn=frameNumbers[i];if(fn<framesTotal){var prevIframe=this.frameExtractor.getPrevIframe(fn);aligned.push(Math.max(prevIframe,aligned[i-1]))}else aligned.push(fn)}return aligned.push(frameNumbers[frameNumbers.length-1]),aligned},prototype.hasDuplicates=function(array){for(var i=1;i<array.length;i++)if(array[i-1]==array[i])return!0;return!1},prototype.close=function(){this.closed=!0,this.queueSubscription.dispose()},constructor.DrawRequest=function(canvas,frameNumbers,onDone,onError){this.canvas=canvas,this.frameNumbers=frameNumbers,this.onDone=onDone,this.onError=onError},constructor.DrawRequest=stjs.extend(constructor.DrawRequest,null,[],function(constructor,prototype){prototype.canvas=null,prototype.frameNumbers=null,prototype.onDone=null,prototype.onError=null,prototype.disposable=null,prototype.cancelled=!1,prototype.abort=function(){this.cancelled=!0,null!=this.disposable&&this.disposable.dispose()}},{canvas:"Canvas",frameNumbers:{name:"Array",arguments:[null]},onDone:"Callback0",onError:{name:"Callback1",arguments:["Object"]},disposable:"Rx.Disposable"},{})},{frameExtractor:"AbstractFrameExtractor",fd:"FrameDrawer",queueRx:{name:"Rx.Subject",arguments:["FilmStripDrawer.DrawRequest"]},queueSubscription:"Rx.Disposable",http:"Http",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]}},{});var SkinlessPlayerView=function(parentEl,log){PlayerView.call(this,parentEl,log),this.parentEl=parentEl};SkinlessPlayerView=stjs.extend(SkinlessPlayerView,PlayerView,[],function(constructor,prototype){prototype.parentEl=null,prototype.enterFullscreen=function(elt){},prototype.exitFullscreen=function(){},prototype.seekFrameAndCheckRange=function(frame){},prototype.getCaptionsContainer=function(){return null},prototype.renderFatalError=function(err){},prototype.renderRange=function(fromFrame,toFrame){},prototype.renderWhole=function(){},prototype.showAsAudioPlayer=function(){}},{parentEl:"Element",player:"PlayerImpl",parentEl:"Element",log:"Log",container:"Element",video:"Video",trickVideo:"Video",hm:"HotkeyManager",playerContainer:"Element",frozenCanvas:"Canvas",fullscreenRx:{name:"Rx.Subject",arguments:[null]},spinner:"Element",autoDisposables:"Rx.CompositeDisposable",DO_NOTHING:{name:"Callback1",arguments:["DOMEvent"]},children:{name:"Array",arguments:["CloseableView"]}},{});var DualVideoElement=function(video,timeline,trickVideo,log,errorRx){AbstractVideoElement.call(this,video,timeline,log,errorRx);var self=this;this.trickVideo=trickVideo,this.videoShownRx=new Rx.Subject,this.video.preload="auto",this.trickVideo.preload="auto";var playRx=Rx.Observable.fromEvent(this.trickVideo,VideoElement.PLAYING),pauseRx=Rx.Observable.fromEvent(this.trickVideo,VideoElement.PAUSE),trickPlayRx=Rx.Observable.merge(playRx,pauseRx).map(function(x){return self.isPlaying()});this.playRx=Rx.Observable.merge(AbstractVideoElement.prototype.getPlayRx.call(this),trickPlayRx),this.playRx=this.playRx.debounce(10),this.shownVideo=this.video,this.addPrintEvents(this.video),this.addPrintEvents(trickVideo),this.video.autobuffer=!0,this.video.webkitPreservesPitch=!1;var metadatasToLoad=new MutableInt(2);this.video.addEventListener(VideoElement.LOADEDMETADATA,function(e){log.debug("videoAudio loadedmetadata autoseek="+self.initialTime),0!=self.initialTime&&(self.video.currentTime=self.initialTime),0==metadatasToLoad.decrementAndGet()&&(self.metadataLoaded=!0)}),this.videoCanplayRx=Rx.Observable.fromEvent(video,VideoElement.CANPLAY,function(e){return!0}),this.autoDisposable(this.videoCanplayRx.subscribe(stjs.bind(this,function(e){log.debug("videoAudio canplay"),this.quickSeek||this.isTrickRate(this.playRateCurrent)||this.autoDisposable(Rx.Observable.timer(100).subscribe(stjs.bind(this,function(x){log.debug("videoAudio canplay showVideoAudio"),self.showVideoAudio(),self.video.currentTime>=self.timeline.getSeekableDurationSec()&&log.debug("lastframe"),this.videoShownRx.onNext(this.video)})))}))),this.timeUpdateSubjectQTP=new Rx.Subject;var trickVideoUpdate=Rx.Observable.fromEvent(self.trickVideo,VideoElement.TIMEUPDATE).map(function(e){return self.trickVideo.currentTime});this.autoDisposable(AbstractVideoElement.prototype.getTimeUpdateRx.call(this).merge(trickVideoUpdate).subscribe(stjs.bind(this,function(t){return this.timeUpdateSubjectQTP.onNext(t)}))),this.trickVideoCanplayRx=Rx.Observable.fromEvent(trickVideo,VideoElement.CANPLAY,function(e){return!0}),this.autoDisposable(this.trickVideoCanplayRx.subscribe(function(e){log.debug("trickVideo canplay"),self.isBuffered(self.video,self.trickVideo.currentTime)?log.debug("current time "+self.trickVideo.currentTime+" is already buffered in videoAudio. do not show trickVideo"):(log.debug("current time "+self.trickVideo.currentTime+" is NOT buffered in videoAudio"),self.showTrickVideo())})),this.trickVideo.addEventListener(VideoElement.LOADEDMETADATA,function(e){log.debug("trickVideo loadedmetadata autoseek="+self.initialTime),0!=self.initialTime&&(self.trickVideo.currentTime=self.initialTime),0==metadatasToLoad.decrementAndGet()&&(self.metadataLoaded=!0)}),this.timeUpdateSubjectQTP.subscribe(function(e){return self.onTimeUpdate(e)}),this.busyCheckerInterval=setInterval(stjs.bind(this,function(){var vid=this.isTrickMode()&&this.isTrickRate(this.playRateCurrent)?trickVideo:video;this.updateBusyStatus(vid)}),500),this.autoDisposable(Rx.Observable.fromEvent(this.trickVideo,VideoElement.SEEKED).subscribe(stjs.bind(this,function(e){return this.seekTarget=null})))};DualVideoElement=stjs.extend(DualVideoElement,AbstractVideoElement,[],function(constructor,prototype){prototype.videoShownRx=null,prototype.shownVideo=null,prototype.trickVideo=null,prototype.trickVideoCanplayRx=null,prototype.videoCanplayRx=null,prototype.timeUpdateSubjectQTP=null,prototype.playRx=null,prototype.busyCheckerInterval=null,prototype.visualDebugEnabled=!1,prototype.visualDebugTrick=null,prototype.onTimeUpdate=function(time){time<0&&this.pause(),time>this.timeline.getSeekableDurationSec()&&(this.log.debug("time "+time+" > SeekableDuration "+this.timeline.getSeekableDurationSec()+". autoseeking."),this.pause(),this.seek(this.lastSeekableTime()))},prototype.lastSeekableTime=function(){var seekableDurationSec=Math.max(this.timeline.getSeekableDurationSec(),0),lastSeekableFrame=this.timeline.getFrameBySec(seekableDurationSec);return this.timeline.getSecByFrame(lastSeekableFrame)},prototype.startQuickSeek=function(){AbstractVideoElement.prototype.startQuickSeek.call(this),this.switchToTrickVideo(null)},prototype.endQuickSeek=function(){this.isTrickRate(this.playRateBeforeQuickSeek)||(this.video.currentTime=this.trickVideo.currentTime),AbstractVideoElement.prototype.endQuickSeek.call(this)},prototype.seek=function(time){if(time=Math.min(time+42e-5,this.timeline.getSeekableDurationSec()),!this.metadataLoaded)return void(this.initialTime=time);var targetVideo=this.video;this.log.debug("seek. quickSeek="+this.quickSeek+" playRateCurrent="+this.playRateCurrent),this.quickSeek||this.isTrickRate(this.playRateCurrent)?(this.log.debug("seeking trickVideo only"),targetVideo=this.trickVideo):this.log.debug("seeking both video and trickVideo");try{targetVideo.currentTime=Math.min(time,this.lastSeekableTime());var fn=this.getTimeline().getFrameBySec(time),fnTime=this.timeToSeekByFrame(fn);this.trickVideo.currentTime=Math.min(fnTime,this.lastSeekableTime())}catch(e){var buffered=targetVideo.buffered.length>0?targetVideo.buffered.end(0):-1,seekable=targetVideo.seekable.length>0?targetVideo.seekable.end(0):-1;this.log.debug(targetVideo.src,buffered,seekable),this.errorRx.onNext(new PlayerError("error setting currentTime",PlayerError.NONFATAL,e))}this.afterSeek(time)},prototype.implementationSpecificPlay=function(){var shouldPlayInLowRes=this.isTrickRate(this.playRateCurrent);this.shownVideo.pause();var r=Math.abs(this.playRateCurrent);shouldPlayInLowRes&&!this.isTrickMode()?(this.trickVideo.currentTime=this.video.currentTime,this.switchToTrickVideo(stjs.bind(this,function(){this.trickVideo.playbackRate=r,this.doPlay()}))):!shouldPlayInLowRes&&this.isTrickMode()?(this.video.currentTime=this.trickVideo.currentTime,this.switchToVideo(stjs.bind(this,function(){this.video.playbackRate=r,this.doPlay()}))):(this.shownVideo.playbackRate=r,this.doPlay())},prototype.switchToVideo=function(onSwitched){var self=this;this.canPlay().subscribe(function(e){self.showVideoAudio(),null!=onSwitched&&onSwitched()})},prototype.canPlay=function(){return this.video.readyState>=AbstractVideoElement.HAVE_ENOUGH_DATA?Rx.Observable.just(!0):this.videoCanplayRx.take(1)},prototype.canPlayTrickVideo=function(){return this.trickVideo.readyState>=AbstractVideoElement.HAVE_FUTURE_DATA?Rx.Observable.just(!0):this.trickVideoCanplayRx.take(1)},prototype.switchToTrickVideo=function(onSwitched){var self=this;this.canPlayTrickVideo().subscribe(function(e){self.showTrickVideo(),null!=onSwitched&&onSwitched()})},prototype.doPlay=function(){var r=this.playRateCurrent,interval=500;r<0?(null!=this.__seekBackwardsInterval&&clearInterval(this.__seekBackwardsInterval),this.__seekBackwardsInterval=setInterval(stjs.bind(this,function(){this.isTrickRate(r)&&this.showTrickVideo();try{this.backwardsPlaybackHackSeek=!0,this.seek(this.getTimeSec()+r*interval/1e3)}finally{this.backwardsPlaybackHackSeek=!1}this.playBackwardsRx.onNext(!0),this.getFrame()<=0&&(this.shownVideo.currentTime=0,this.pause())}),interval)):!this.isTrickRate(r)&&this.isNotBuffered()&&this.notInitialLoading()&&!this.allowUnbufferedPlayback()?this.pauseUnbufferedPlayback():(setTimeout(stjs.bind(this.shownVideo,"play"),0),this.shownVideo.play())},prototype.close=function(){AbstractVideoElement.prototype.close.call(this),this.video.pause(),this.trickVideo.pause(),clearInterval(this.busyCheckerInterval),this.video=null,this.trickVideo=null},prototype.pause=function(){if(this.log.debug("pause"),this.metadataLoaded&&this.isPlaying()&&(this.stopBackwards(),this.video.pause(),this.video.playbackRate=1,this.trickVideo.pause(),this.trickVideo.playbackRate=1,this.unbufferedPause=!1,this.playRateCurrent=0,!this.quickSeek)){var currentTime=this.getTimeSec(),ifn=this.getTimeline().getFrameBySec(currentTime),timeByFrame=this.getTimeline().getSecByFrame(ifn),fnFrac=currentTime-timeByFrame;fnFrac>.2?(this.log.debug("seeking to the next frame on pause"),this.seekFrame(ifn+1)):this.seekFrame(ifn),this.switchToVideo(null)}},prototype.isPlaying=function(){return!this.shownVideo.paused||null!=this.__seekBackwardsInterval||this.unbufferedPause},prototype.getFrame=function(){var video=this.isTrickMode()?this.trickVideo:this.video;return this.getTimeline().getFrameBySec(video.currentTime)},prototype.isBuffered=function(video,time){for(var i=0;i<video.buffered.length;i++)if(time>=video.buffered.start(i)&&time<=video.buffered.end(i))return!0;return!1},prototype.showTrickVideo=function(){this.trickVideo.classList.remove(VideoElement.VG_PLAYER_OPACITY_0),this.video.classList.add(VideoElement.VG_PLAYER_OPACITY_0),this.shownVideo=this.trickVideo,this.isTrickRate(this.playRateCurrent)||this.quickSeek||this.busyRx.onNext(!0),this.visualDebugEnabled&&(this.visualDebugTrick.style.display="")},prototype.showVideoAudio=function(){this.video.classList.remove(VideoElement.VG_PLAYER_OPACITY_0),this.trickVideo.classList.add(VideoElement.VG_PLAYER_OPACITY_0),this.shownVideo=this.video,this.busyRx.onNext(!1),this.visualDebugEnabled&&(this.visualDebugTrick.style.display="none")},prototype.getVolume=function(){return this.video.volume},prototype.setVolume=function(v){this.video.volume=Math.min(1,Math.max(0,v))},prototype.getTimeSec=function(){var video=this.isTrickMode()?this.trickVideo:this.video;return video.currentTime},prototype.isTrickRate=function(rate){return Math.abs(rate)>2},prototype.isTrickMode=function(){return this.shownVideo==this.trickVideo||this.quickSeek},prototype.setLoop=function(loop){this.video.loop=loop,this.trickVideo.loop=loop,this.loop=loop},prototype.getVideoWidth=function(){var video=this.isTrickMode()?this.trickVideo:this.video;return video.videoWidth},prototype.getVideoHeight=function(){var video=this.isTrickMode()?this.trickVideo:this.video;return video.videoHeight},prototype.getVideoShownRx=function(){return this.videoShownRx},prototype.getTimeUpdateRx=function(){return this.timeUpdateSubjectQTP},prototype.getPlayRx=function(){return this.playRx},prototype.visualDebug=function(){this.video.classList.add("vg_player_debug_opacity_05"),this.trickVideo.classList.add("vg_player_debug_opacity_05"),this.visualDebugTrick=window.document.createElement("div"),this.visualDebugTrick.classList.add("vg_player_debug_trick"),this.visualDebugTrick.innerHTML="trick",this.visualDebugTrick.style.display=this.isTrickMode()?"":"none",this.video.parentElement.insertBefore(this.visualDebugTrick,this.video),this.visualDebugEnabled=!0},prototype.checkUnbufferedPlayback=function(){this.playRateCurrent>0&&!this.isTrickRate(this.playRateCurrent)?AbstractVideoElement.prototype.checkUnbufferedPlayback.call(this):this.unbufferedPause=!1}},{videoShownRx:{name:"Rx.Subject",arguments:["Video"]},shownVideo:"Video",trickVideo:"Video",trickVideoCanplayRx:{name:"Rx.Observable",arguments:[null]},videoCanplayRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubjectQTP:{name:"Rx.Subject",arguments:[null]},playRx:{name:"Rx.Observable",arguments:[null]},busyCheckerInterval:"TimeoutHandler",visualDebugTrick:"Element",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},timeline:"Timeline",video:"Video",playRx:{name:"Rx.Observable",arguments:[null]},playBackwardsRx:{name:"Rx.Subject",arguments:[null]},volumeChangeRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubject:{name:"Rx.Subject",arguments:[null]},progressSubject:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},busyRx:{name:"Rx.Subject",arguments:[null]},autoDisposables:"Rx.CompositeDisposable",__seekBackwardsInterval:"TimeoutHandler",seekTarget:"AbstractVideoElement.SeekTarget",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var SimpleVideoElement=function(video,timeline,log,errorRx){AbstractVideoElement.call(this,video,timeline,log,errorRx),this.video.addEventListener(VideoElement.LOADEDMETADATA,stjs.bind(this,function(e){log.debug("videoAudio loadedmetadata autoseek="+this.initialTime),0!=this.initialTime&&(video.currentTime=Math.min(this.initialTime,video.duration)),this.metadataLoaded=!0})),this.videoCanplayRx=Rx.Observable.fromEvent(video,VideoElement.CANPLAY,function(e){return!0}),this.videoShownRx=new Rx.Subject,this.videoCanplayRx.subscribe(stjs.bind(this,function(e){log.debug("videoAudio canplay"),this.busyRx.onNext(!1),this.autoDisposable(Rx.Observable.timer(100).subscribe(stjs.bind(this,function(x){log.debug("videoAudio canplay showVideoAudio"),video.currentTime==video.duration&&log.debug("lastframe"),this.videoShownRx.onNext(this.video)})))})),this.busyCheckerInterval=setInterval(stjs.bind(this,function(){this.updateBusyStatus(video)}),500)};SimpleVideoElement=stjs.extend(SimpleVideoElement,AbstractVideoElement,[],function(constructor,prototype){prototype.videoCanplayRx=null,prototype.videoShownRx=null,prototype.__seekBackwardsInterval=null,prototype.busyCheckerInterval=null,prototype.seek=function(time){if(time+=42e-5,!this.metadataLoaded)return void(this.initialTime=time);time=Math.min(time,this.timeline.getSeekableDurationSec());try{this.video.currentTime=Math.min(time,this.video.duration)}catch(e){var buffered=this.video.buffered.length>0?this.video.buffered.end(0):-1,seekable=this.video.seekable.length>0?this.video.seekable.end(0):-1;this.log.debug(this.video.src,buffered,seekable),this.errorRx.onNext(new PlayerError("error setting currentTime",PlayerError.NONFATAL,e))}this.afterSeek(time)},prototype.implementationSpecificPlay=function(){var r=this.playRateCurrent;this.video.playbackRate=Math.abs(r);var interval=500;r<0?(null!=this.__seekBackwardsInterval&&clearInterval(this.__seekBackwardsInterval),this.__seekBackwardsInterval=setInterval(stjs.bind(this,function(){try{this.backwardsPlaybackHackSeek=!0,this.seek(this.getTimeSec()+r*interval/1e3)}finally{this.backwardsPlaybackHackSeek=!1}this.playBackwardsRx.onNext(!0),this.getFrame()<=0&&(this.video.currentTime=0,this.pause())}),interval)):this.isNotBuffered()&&this.notInitialLoading()&&!this.allowUnbufferedPlayback()?this.pauseUnbufferedPlayback():(setTimeout(stjs.bind(this.video,"play"),0),this.video.play())},prototype.close=function(){AbstractVideoElement.prototype.close.call(this),this.video.pause(),clearInterval(this.busyCheckerInterval),this.video=null},prototype.pause=function(){if(this.metadataLoaded&&this.isPlaying()&&(this.stopBackwards(),this.video.pause(),this.video.playbackRate=1,this.playRateCurrent=0,this.unbufferedPause=!1,!this.quickSeek)){var currentTime=this.getTimeSec(),ifn=this.getTimeline().getFrameBySec(currentTime),timeByFrame=this.getTimeline().getSecByFrame(ifn),fnFrac=currentTime-timeByFrame;fnFrac>.2?(this.log.debug("seeking to the next frame on pause"),this.seekFrame(ifn+1)):this.seekFrame(ifn)}},prototype.isPlaying=function(){return!this.video.paused||null!=this.__seekBackwardsInterval||this.unbufferedPause},prototype.getFrame=function(){var video=this.video;return this.getTimeline().getFrameBySec(video.currentTime)},prototype.getVolume=function(){return this.video.volume},prototype.setVolume=function(v){this.video.volume=Math.min(1,Math.max(0,v))},prototype.getTimeSec=function(){var video=this.video;return video.currentTime},prototype.getVideoWidth=function(){var video=this.video;return video.videoWidth},prototype.getVideoHeight=function(){var video=this.video;return video.videoHeight},prototype.getTimeline=function(){return this.timeline},prototype.getVideoShownRx=function(){return this.videoShownRx},prototype.setLoop=function(loop){this.video.loop=loop,this.loop=loop}},{videoCanplayRx:{name:"Rx.Observable",arguments:[null]},videoShownRx:{name:"Rx.Subject",arguments:["Video"]},__seekBackwardsInterval:"TimeoutHandler",busyCheckerInterval:"TimeoutHandler",log:"Log",errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},timeline:"Timeline",video:"Video",playRx:{name:"Rx.Observable",arguments:[null]},playBackwardsRx:{name:"Rx.Subject",arguments:[null]},volumeChangeRx:{name:"Rx.Observable",arguments:[null]},timeUpdateSubject:{name:"Rx.Subject",arguments:[null]},progressSubject:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},busyRx:{name:"Rx.Subject",arguments:[null]},autoDisposables:"Rx.CompositeDisposable",__seekBackwardsInterval:"TimeoutHandler",seekTarget:"AbstractVideoElement.SeekTarget",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var RangeVideoElement=function(e){this.e=e};RangeVideoElement=stjs.extend(RangeVideoElement,null,[VideoElement],function(constructor,prototype){prototype.e=null,prototype.fromSec=0,prototype.toSec=0,prototype.fromFrame=0,prototype.toFrame=0,prototype.rangeDurationSec=0,prototype.rangeTimeline=null,prototype.seek=function(rangeTimeSec){this.e.seek(this.fromSec+rangeTimeSec)},prototype.getBusyRx=function(){return this.e.getBusyRx()},prototype.playAtRate=function(r){this.e.playAtRate(r)},prototype.close=function(){this.e.close()},prototype.pause=function(){this.e.pause()},prototype.isPlaying=function(){return this.e.isPlaying()},prototype.getFrame=function(){return this.e.getFrame()-this.fromFrame},prototype.getVolume=function(){return this.e.getVolume()},prototype.setVolume=function(v){this.e.setVolume(v)},prototype.getTimeSec=function(){return this.e.getTimeSec()-this.fromSec},prototype.getVideoWidth=function(){return this.e.getVideoWidth()},prototype.getVideoHeight=function(){return this.e.getVideoHeight()},prototype.getTimeline=function(){return this.rangeTimeline},prototype.getVideoShownRx=function(){return this.e.getVideoShownRx()},prototype.getTimeUpdateRx=function(){return this.e.getTimeUpdateRx().map(stjs.bind(this,function(realTime){return realTime-this.fromSec}))},prototype.getProgressRx=function(){return this.e.getProgressRx()},prototype.forwardSec=function(n){this.e.forwardSec(n)},prototype.forward1=function(n){this.e.forward1(n)},prototype.backward1=function(n){this.e.backward1(n)},prototype.seekFrame=function(rangeFn){this.e.seekFrame(this.fromFrame+rangeFn)},prototype.backwardSec=function(n){this.e.backwardSec(n)},prototype.getPlayRate=function(){return this.e.getPlayRate()},prototype.getTimeValue=function(){return this.getTimeline().getTvByFrame(this.getFrame())},prototype.playFaster=function(){this.e.playFaster()},prototype.playFasterBackwards=function(){this.e.playFasterBackwards()},prototype.getDuration=function(){return this.rangeDurationSec},prototype.getSeekableDuration=function(){return this.rangeDurationSec},prototype.endQuickSeek=function(){this.e.endQuickSeek()},prototype.startQuickSeek=function(){this.e.startQuickSeek()},prototype.setInitialTime=function(initialTime){this.e.setInitialTime(this.fromSec+initialTime)},prototype.setLoop=function(loop){this.e.setLoop(loop)},prototype.setPauseOnLoop=function(pauseOnLoop){this.e.setPauseOnLoop(pauseOnLoop)},prototype.hasRange=function(){return this.e.hasRange()},prototype.inRange=function(fn){var totalFrames=this.toFrame-this.fromFrame;return fn>=0&&fn<totalFrames},prototype.setRange=function(fromFrame,toFrame){this.fromFrame=fromFrame,this.toFrame=toFrame,this.fromSec=this.e.getTimeline().getSecByFrame(fromFrame),this.toSec=this.e.getTimeline().getSecByFrame(toFrame),this.rangeDurationSec=this.e.getTimeline().getSecByFrame(toFrame-fromFrame+1);var realTimeline=this.e.getTimeline(),frameDurationTv=this.hackFrameDurationTv(realTimeline),rangeStartTimecode=realTimeline.getTapeByFrame(fromFrame),rangeTimeline=SimpleTimeline.newSimpleTime(realTimeline.getTimeScale(),toFrame-fromFrame+1,frameDurationTv,rangeStartTimecode);this.rangeTimeline=rangeTimeline,this.e.setRange(fromFrame,toFrame)},prototype.hackFrameDurationTv=function(realTimeline){var tvByFrame0=realTimeline.getTvByFrame(0),tvByFrame1=realTimeline.getTvByFrame(1),frameDurationTv=stjs.trunc(tvByFrame1-tvByFrame0);return frameDurationTv},prototype.cancelRange=function(){this.e.cancelRange()},prototype.getPlayRx=function(){return this.e.getPlayRx()},prototype.getVolumeChangeRx=function(){return this.e.getVolumeChangeRx()},prototype.setCrossOrigin=function(type){this.e.setCrossOrigin(type)},prototype.setResetPlayRateOnSeek=function(reset){this.e.setResetPlayRateOnSeek(reset)},prototype.getBuffered=function(){return this.e.getBuffered()}},{e:"VideoElement",rangeTimeline:"Timeline",mediaErrors:{name:"Array",arguments:[null]},networkStates:{name:"Array",arguments:[null]},readyStates:{name:"Array",arguments:[null]}},{});var TimelineUtil=function(){};TimelineUtil=stjs.extend(TimelineUtil,null,[],function(constructor,prototype){constructor.defaultTimeline=function(){return SimpleTimeline.newSimpleTime(24e3,Integer.MAX_VALUE,1001,"00:00:00:00")}},{},{});var ProxyLoader=function(http,log){this.http=http,this.log=log};ProxyLoader=stjs.extend(ProxyLoader,null,[],function(constructor,prototype){prototype.http=null,prototype.log=null,constructor.AUDIOTYPE_WAVS="wavs",constructor.AUDIOTYPE_MP3="mp3",constructor.AUDIOTYPE_MUXED="muxed",prototype.loadAudioRx=function(serverUrl,proxyId){return this.http.getJson(serverUrl+"/"+proxyId+"/audio.js",AudioInfo).flatMapObserver(stjs.bind(this,function(audioInfo,idx){var dashStream;if(ProxyLoader.AUDIOTYPE_WAVS.equals(audioInfo.audioType))dashStream=new Mp3MixSegmentedAudioStream(this.http,serverUrl,proxyId,audioInfo);else{if(!ProxyLoader.AUDIOTYPE_MP3.equals(audioInfo.audioType))return Rx.Observable["throw"]("unknown audioType "+audioInfo.audioType);var dataSrc=new HttpDataSrc(this.http,serverUrl+"/"+proxyId+"/audio.mp3");dashStream=new Mp3SegmentedAudioStream(proxyId,audioInfo.sampleRate,audioInfo.totalSamples,dataSrc)}return(Utils.isFirefox||Utils.isSafari)&&(dashStream=new M4SMp3SegmentedStream(dashStream)),dashStream.setAudioInfo(audioInfo),Rx.Observable.just(dashStream)}),function(req){return 404==req.status?Rx.Observable.empty():Rx.Observable["throw"](req)},function(){return Rx.Observable.empty()})},prototype.loadAudio=function(serverUrl,proxyId,callback){this.loadAudioRx(serverUrl,proxyId).subscribe(function(dash){return callback(null,dash)},function(err){return callback(err,null)})},prototype.loadProxyRx=function(serverUrl,proxyId){var create=Rx.Observable.create(stjs.bind(this,function(observer){this.loadProxy(serverUrl,proxyId,function(err,proxy){null==err?(observer.onNext(proxy),observer.onCompleted()):observer.onError(err)})}));return create},prototype.loadProxies=function(serverUrl,proxyIds){var proxies={};return Rx.Observable.from(proxyIds).flatMap(stjs.bind(this,function(proxyId){return this.loadProxyRx(serverUrl,proxyId)})).reduce(function(accu,proxy){return accu[proxy.proxyId]=proxy,accu},proxies)},constructor.DASH_FULLRES="stream-0",constructor.DASH_LOWRES="stream-1",constructor.USE_JS_DASHIFY=!0,prototype.loadProxy=function(serverUrl,proxyId,callback){this.log.debug("loadProxy "+serverUrl,proxyId);var results={},video=this.dashifyFirstTrack(serverUrl+"/"+proxyId+"/video.mov").doOnNext(function(d){return results.video=d}),thumbshq=this.dashifyFirstTrack(serverUrl+"/"+proxyId+"/thumbshq.mov").doOnNext(function(d){return results.thumbshq=d}),audio=this.loadAudioRx(serverUrl,proxyId).doOnNext(function(d){return results.audio=d}),merge=Rx.Observable.merge(video,thumbshq),gotProxyCallback=function(){var proxy=new Proxy;proxy.proxyId=proxyId,proxy.video=results.video,proxy.thumbshq=results.thumbshq;var audioStream=results.audio;null!=audioStream&&(proxy.audio=audioStream,proxy.audioInfo=audioStream.audioInfo),callback(null,proxy)};merge.subscribe(stjs.bind(this,function(onNext){this.log.debug("loaded",onNext)}),stjs.bind(this,function(errorRequest){audio.subscribe(stjs.bind(this,function(o){this.log.debug("Got audio")}),function(onError){callback(onError,null)},function(){gotProxyCallback()})}),stjs.bind(this,function(){audio.subscribe(stjs.bind(this,function(ok){this.log.debug("Got audio")}),function(onError){gotProxyCallback()},function(){gotProxyCallback()})}))},prototype.dashify=function(url,callback){
this.dashifyFirstTrack(url).subscribe(function(DashStream){return callback(null,DashStream)},function(err){return callback(err,null)})},prototype.createDashStreamFromMp4=function(dataSrc,mp4Box,track){return Rx.Observable.create(stjs.bind(this,function(observer){var dashified=MovDasher.dashify(mp4Box,track,this.log),desc=new DashDescriptor;if(desc.dynamic=!1,desc.timescale=dashified.timescale,desc.codecs=dashified.codecs,desc.mimeType=dashified.mimeType,desc.duration=dashified.duration,desc.segmentStartTv=dashified.segmentStartTv,desc.channelConfig=dashified.channelConfig,dashified.startTimecodeOffset==-1){desc.timecode="00:00:00:00";var stream=new DashifiedMp4SegmentedVideoStream(dashified.moovbuf,dashified.segments,dataSrc,desc,dashified.sampleDuration);observer.onNext(stream),observer.onCompleted()}else dataSrc.fetch(dashified.startTimecodeOffset,dashified.startTimecodeOffset+4,function(buf){var dv=new DataView(buf),tc=stjs.trunc(dv.getUint32(0,!1)),rate=stjs.trunc(Math.round(desc.timescale/dashified.sampleDuration));desc.timecode=new TapeTimecode(dashified.dropFrame,tc,rate).getTimecodeAtFrame(0);var stream=new DashifiedMp4SegmentedVideoStream(dashified.moovbuf,dashified.segments,dataSrc,desc,dashified.sampleDuration);observer.onNext(stream),observer.onCompleted()},function(err){observer.onError(new PlayerError("error loading start time code",PlayerError.FATAL,err,dataSrc))})}))},prototype.dashifyMp4=function(url){return Rx.Observable.create(stjs.bind(this,function(observer){var streams=new Mp4Streams;streams.audio=[];var dataSrc=new HttpDataSrc(this.http,url);Mp4Loader.loadMp4(dataSrc,stjs.bind(this,function(mp4Box){var trackRx=Rx.Observable.empty(),videoTracks=mp4Box.getInfo().videoTracks;if(0!=videoTracks.length){if(MovDasher.hasBFrames(mp4Box,videoTracks[0].id))return void observer.onError(new ProxyLoader.BFramesException);trackRx=Rx.Observable.merge(trackRx,Rx.Observable.create(stjs.bind(this,function(o){this.createDashStreamFromMp4(dataSrc,mp4Box,videoTracks[0].id).subscribe(function(videoTrack){streams.video=videoTrack,MovDasher.parseTimePackets(mp4Box,dataSrc,function(pkts){streams.timeline=new BoundedTimeline(new MP4Timeline(pkts)),o.onNext(videoTrack),o.onCompleted()},stjs.bind(o,"onError"))})})))}for(var audioTracks=mp4Box.getInfo().audioTracks,i=0;i<audioTracks.length;i++){var audioTrackRx=this.createDashStreamFromMp4(dataSrc,mp4Box,audioTracks[i].id).map(function(stream){return ProxyLoader.createAudioDashStream(stream,url)}).doOnNext(stjs.bind(streams.audio,"push"));trackRx=Rx.Observable.merge(trackRx,audioTrackRx)}trackRx.doOnCompleted(function(){observer.onNext(streams),observer.onCompleted()}).doOnError(stjs.bind(observer,"onError")).subscribe()}),function(err){observer.onError(new PlayerError("error converting mov",PlayerError.FATAL,err,url))})}))},prototype.dashifyFirstTrack=function(url){return Rx.Observable.create(stjs.bind(this,function(observer){var dataSrc=new HttpDataSrc(this.http,url);Mp4Loader.loadMp4(dataSrc,stjs.bind(this,function(mp4Box){this.createDashStreamFromMp4(dataSrc,mp4Box,1).subscribe(function(x){observer.onNext(x),observer.onCompleted()},stjs.bind(observer,"onError"))}),function(err){observer.onError(new PlayerError("error converting mov",PlayerError.FATAL,err,url))})}))},constructor.createAudioDashStream=function(dashStream,url){var stream=new M4ASegmentedStream(dashStream),audioInfo=new AudioInfo;return audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,audioInfo.channelLabels=AudioInfo.AAC_CHANNEL_CONFIGS[stream.getChannelConfig()],audioInfo.channelCount=audioInfo.channelLabels.length,audioInfo.sampleRate=stream.sampleRate,audioInfo.totalSamples=stream.totalSamples,audioInfo.waveformPreviews=[],stream.audioInfo=audioInfo,stream.proxyId=url,stream},prototype.loadAudioFromM4a=function(url){return this.dashifyFirstTrack(url).map(function(stream){return ProxyLoader.createAudioDashStream(stream,url)})},prototype.mpdFromUrl=function(mpdUrl){var defaultBaseURL=mpdUrl.substring(0,mpdUrl.lastIndexOf("/")+1),xml=this.xmlWithDynamicUpdates(mpdUrl);return this.mpdFromXml(defaultBaseURL,xml)},prototype.mpdFromXml=function(defaultBaseURL,xml){var streams=this.streamsFromXml(defaultBaseURL,xml);return this.mpdFromStreams(streams)},prototype.mpdFromStreams=function(streams){var mpd=new MPDStreams,mpdStreamsObservable=RxUtil.doOnFirst(streams,function(_streams){mpd.video=_streams.video,mpd.thumbshq=_streams.thumbshq,mpd.thumbs=_streams.thumbs,mpd.audio=_streams.audio}).doOnNext(function(_streams){null!=mpd.video&&mpd.video.updateFrom(_streams.video),null!=mpd.thumbshq&&mpd.thumbshq.updateFrom(_streams.thumbshq),null!=mpd.thumbs&&mpd.thumbs.updateFrom(_streams.thumbs),null!=mpd.audio&&mpd.audio.updateFrom(_streams.audio)});return RxUtil.firstOutIgnoreNext(mpdStreamsObservable)},prototype.xmlWithDynamicUpdates=function(mpdUrl){var periodicReq=Rx.Observable.timer(0,1e3).concatMap(stjs.bind(this,function(_x){return this.http.getWithUrlFunc(function(){return mpdUrl+"?time="+Utils.currentTimeMillis()})})).flatMap(stjs.bind(this,function(xmlString){try{return Rx.Observable.just(MPDXml.fromString(xmlString,this.log))}catch(e){return Rx.Observable["throw"](new PlayerError("can not parse MPD",PlayerError.FATAL,e))}})).retryWhen(RetryWithDelay.create(5,1e3)).flatMapObserver(function(m,i){return Rx.Observable.just(m)},function(err){return Rx.Observable["throw"](new PlayerError("can not load mpd",PlayerError.FATAL,err))},Rx.Observable.empty);return RxUtil.takeWhileWithFinalValue(periodicReq,function(mpdXml){return mpdXml.isDynamic()})},prototype.loadAudioFromMpd=function(mpdUrl){var audioStream=this.mpdFromUrl(mpdUrl).flatMap(function(_streams){return null==_streams.audio?Rx.Observable["throw"]("no audio representations found in "+mpdUrl):Rx.Observable.just(_streams.audio)});return audioStream},prototype.streamsFromXml=function(defaultBaseURL,mpdXmlObservable){return mpdXmlObservable.map(stjs.bind(this,function(xml){var baseUrl=xml.getBaseURL(defaultBaseURL),videoRepIds=xml.getVideoRepresentationIds(),audioRepIds=xml.getAudioRepresentationIds(),thumbsIds=videoRepIds.filter(function(id,idx,arr){return 80==xml.getDashDescriptor(id).height}),thumbsHqIds=videoRepIds.filter(function(id,idx,arr){return 512==xml.getDashDescriptor(id).width}),hiResRepId=videoRepIds.sort(function(id1,id2){return xml.getDashDescriptor(id2).height-xml.getDashDescriptor(id1).height})[0],loResRepId=thumbsHqIds.length>0?thumbsHqIds[0]:null,thumbsRepId=thumbsIds.length>0?thumbsIds[0]:null,audioRepId=audioRepIds.length>0?audioRepIds[0]:null,hiResStream=this.videoStreamFromXml(xml,hiResRepId,baseUrl),loResStream=this.videoStreamFromXml(xml,loResRepId,baseUrl),thumbsStream=this.videoStreamFromXml(xml,thumbsRepId,baseUrl),audioStream=this.audioStreamFromXml(xml,audioRepId,baseUrl),mpdStreams=new MPDStreams;mpdStreams.video=hiResStream,mpdStreams.thumbshq=loResStream,mpdStreams.thumbs=thumbsStream,mpdStreams.audio=audioStream;var streamIds=[hiResRepId,loResRepId,thumbsRepId,audioRepId];return mpdStreams.drmInfo=xml.getDrmInfo().filter(function(d,i,a){return streamIds.indexOf(d.streamId)!=-1}),mpdStreams}))},prototype.videoStreamFromXml=function(xml,representationId,baseUrl){if(null==representationId)return null;var segmentUrls=xml.getSegmentUrls(baseUrl,representationId),desc=xml.getDashDescriptor(representationId),vgTotalDuration=xml.getVgTotalDuration(desc.timescale);return null==vgTotalDuration&&(vgTotalDuration=desc.duration),new MPDSegmentedVideoStream(representationId,this.http,segmentUrls,desc,vgTotalDuration,this.log)},prototype.audioStreamFromXml=function(xml,representationId,baseUrl){if(null==representationId)return null;var audioSegmentUrls,audioDesc,audioStream,audioInfo;return audioSegmentUrls=xml.getSegmentUrls(baseUrl,representationId),audioDesc=xml.getDashDescriptor(representationId),audioStream=new MPDSegmentedAudioStream(representationId,this.http,audioSegmentUrls,audioDesc),audioInfo=new AudioInfo,audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,audioInfo.channelLabels=AudioInfo.AAC_CHANNEL_CONFIGS[xml.getChannelConfiguration(representationId)],audioInfo.channelCount=audioInfo.channelLabels.length,audioInfo.sampleRate=audioStream.sampleRate,audioInfo.totalSamples=audioStream.totalSamples,audioInfo.waveformPreviews=[],audioStream.audioInfo=audioInfo,audioStream},constructor.BFramesException=function(){RuntimeException.call(this)},constructor.BFramesException=stjs.extend(constructor.BFramesException,RuntimeException,[],null,{},{})},{http:"Http",log:"Log"},{});var Captions=function(){};Captions=stjs.extend(Captions,null,[],function(constructor,prototype){constructor.offsetCaptions=function(captions,offsetTv,timeline){var offsetMsec=timeline.getMillisByTv(offsetTv);captions.rows.forEach(function(row){return Captions.offsetRow(offsetTv,timeline,offsetMsec,row)})},constructor.offsetRow=function(offsetTv,timeline,offsetMsec,row){row.startTv=Math.max(0,row.startTv+offsetTv),row.endTv=Math.max(0,row.endTv+offsetTv),row.startMsec=Math.max(0,row.startMsec+offsetMsec),row.endMsec=Math.max(0,row.endMsec+offsetMsec),row.timeCodeIn=timeline.getTapeByTv(row.startTv),row.timeCodeOut=timeline.getTapeByTv(row.endTv)},constructor.CODEC_C890="c890",constructor.CODEC_DCSUBS="dcsubs",constructor.CODEC_EBU="ebu",constructor.CODEC_STL="stl",constructor.CODEC_SRT="srt",constructor.CODEC_WEBVTT="webvtt",constructor.guessSubtitleCodec=function(url){return url.endsWith("stl")?Captions.CODEC_STL:url.endsWith("srt")?Captions.CODEC_SRT:url.endsWith("vtt")?Captions.CODEC_WEBVTT:url.endsWith("890")?Captions.CODEC_C890:url.endsWith("xml")?Captions.CODEC_DCSUBS:"unknown"},constructor.parseSubs=function(time,url,codec,callback,logLevel){null==logLevel&&(logLevel=LogLevel.INFO);var subtitles,log=new Log(logLevel),http=new Http(log),timeline=null!=time?time:TimelineUtil.defaultTimeline();switch(codec){case Captions.CODEC_EBU:case Captions.CODEC_STL:subtitles=http.getArrayBuffer(url).map(function(subsBuf){return EbuSubs.parse(subsBuf,timeline,log)});break;case Captions.CODEC_DCSUBS:subtitles=http.get(url).flatMap(function(str){return DCSubs.parse(str,timeline)});break;case Captions.CODEC_SRT:case Captions.CODEC_WEBVTT:subtitles=http.get(url).flatMap(function(str){return SRTParser.parse(str,timeline)});break;case Captions.CODEC_C890:subtitles=http.getArrayBuffer(url).map(function(subsBuf){return Cavena890.parse(subsBuf,timeline,log)});break;default:return void callback("unknown codec "+codec,null)}subtitles.subscribe(function(subs){subs.title=url.split("/").pop(),callback(null,subs)},function(err){return callback(err,null)})},constructor.probe=function(codec,data,logLevel){null==logLevel&&(logLevel=LogLevel.INFO);var log=new Log(logLevel);switch(codec){case Captions.CODEC_EBU:return EbuSubs.probe(data,log);case Captions.CODEC_DCSUBS:return DCSubs.probe(data);case Captions.CODEC_C890:return Cavena890.probe(data);default:return-1}}},{},{});var PlayerImpl=function(container,options){this.options=this.defaultOptions(options),this.log=new Log(this.options.logLevel),this.errorRx=new Rx.Subject,this.errorRx.subscribe(stjs.bind(this.log,"error")),this.container=container,null==this.container.getAttribute("tabindex")&&this.container.setAttribute("tabindex","0"),this.view=this.createView(),this.eventListeners={},this.autoDisposables=new Rx.CompositeDisposable,this.initialized=!1,this.initRx=new Rx.Subject,this.http=new Http(this.log),this.http.setWithCredentials(this.options.allowCrossSiteCredentials),this.http.setQueryParams(this.options.queryParams)};PlayerImpl=stjs.extend(PlayerImpl,null,[VGPlayerPluginApi],function(constructor,prototype){constructor.FULL_RES="fullres",constructor.LOW_RES="lowres",constructor.RANGE_AUTO_CANCEL=!1,prototype.log=null,prototype.container=null,prototype.options=null,prototype.http=null,prototype.view=null,prototype.videoSrcHiRes=null,prototype.videoSrcLowRes=null,prototype.videoSrcTrick=null,prototype.cutList=null,prototype.cutListLowRes=null,prototype.captionsList=null,prototype.videoElement=null,prototype.originalVideoElement=null,prototype.initialized=!1,prototype.audioTracksRx=null,prototype.audioTracks=null,prototype.captionListChangeRx=null,prototype.pluginRx=null,prototype.cutsRx=null,prototype.currentVideoStream=null,prototype.timeUpdateRx=null,prototype.progressRx=null,prototype.timelineRx=null,prototype.timelineSubscription=null,prototype.audioHandlerRx=null,prototype.captionHandlerRx=null,prototype.changingVideoSrc=!1,prototype.currentVideoSrc=null,prototype.initRx=null,prototype.seekableDurationUpdaterSubscription=null,prototype.currentAudioTrack=null,prototype.eventListeners=null,prototype.filmStripDrawerRx=null,prototype.autoDisposables=null,prototype.playRateBeforePause=1,prototype.proxyType=null,prototype.errorRx=null,prototype.drm=null,prototype.fairplay=null,prototype.createView=function(){return new SkinlessPlayerView(this.container,this.log)},prototype.getView=function(){return this.view},prototype.defaultOptions=function(opts){return null==opts&&(opts=new PlayerOptions),null==opts.plugins&&(opts.plugins=new Array),null==opts.logLevel&&(opts.logLevel=LogLevel.INFO),opts},prototype.getOptions=function(){return this.options},prototype.getHttp=function(){return this.http},prototype.getLog=function(){return this.log},prototype.setLogLevel=function(logLevel){this.log.setLevel(logLevel)},prototype.init=function(){this.videoSrcHiRes=null,this.videoSrcLowRes=null,this.videoSrcTrick=null,this.cutList=[],this.cutListLowRes=[],this.audioTracks=[],this.captionsList=[],this.videoElement=null,this.timelineRx=new Rx.Subject,this.timeUpdateRx=new Rx.Subject,this.progressRx=new Rx.Subject,this.audioTracksRx=new Rx.ReplaySubject,this.audioHandlerRx=new Rx.Subject,this.captionHandlerRx=new Rx.Subject,this.cutsRx=new Rx.ReplaySubject,this.pluginRx=new Rx.ReplaySubject,this.captionListChangeRx=new Rx.ReplaySubject,this.filmStripDrawerRx=new Rx.ReplaySubject(1),this.drm=null,this.fairplay=null,this.initialized=!0},prototype.close=function(){this.autoDisposables.dispose(),this.autoDisposables=new Rx.CompositeDisposable,this.initialized&&(null!=this.videoElement&&this.videoElement.close(),null!=this.videoSrcHiRes&&this.videoSrcHiRes.detach(),null!=this.videoSrcLowRes&&this.videoSrcLowRes.detach(),null!=this.videoSrcTrick&&this.videoSrcTrick.detach(),null!=this.drm&&this.drm.close(),null!=this.fairplay&&this.fairplay.close(),this.timelineRx.onCompleted(),null!=this.timelineSubscription&&this.timelineSubscription.dispose(),this.timeUpdateRx.onCompleted(),this.progressRx.onCompleted(),this.audioTracksRx.onCompleted(),this.audioHandlerRx.onCompleted(),this.captionHandlerRx.onCompleted(),this.cutsRx.onCompleted(),this.pluginRx.onCompleted(),this.getCaptionListChangeRx().onCompleted(),this.removeAllEventListeners(),this.view.close(),this.view.initPlayerContainer(),this.initialized=!1)},prototype.addCaptionsHandler=function(cb){this.captionHandlerRx.onNext(cb)},prototype.audioAddHandler=function(cb){this.audioHandlerRx.onNext(cb)},prototype.addCaptionsObject=function(captions){if(null!=captions&&null==captions.id)do captions.id=PlayerUtils.randomString();while(this.captionsList.some(function(c,i,a){return c.id==captions.id}));this.captionsList.push(captions),this.getCaptionListChangeRx().onNext(captions)},prototype.addCaptions=function(input){null!=input&&this.addCaptionsObject(input)},prototype.load=function(url,onDone){if(null==this.options.serverUrl||this.options.staticVideoSrc||this.isUrl(url))this.loadUrl(url,function(err){return PlayerImpl.invoke1(onDone,err)});else{for(var cutList=new Array,split=url.split(","),i=0;i<split.length;i++)cutList.push(PlayerCut.fromProxyId(split[i]));this.loadCutList(cutList,onDone)}},prototype.isUrl=function(url){return new RegExp("^(http|https|ftp|file)://","i").test(url)},prototype.loadUrl=function(url,onDone){this.close(),this.init();var sourceUpdates=this.determineMimeType(url).flatMapObserver(stjs.bind(this,function(mime,idx){this.log.debug(mime);var o;switch(mime.toLowerCase()){case"application/xml":case"application/dash+xml":o=this.loadMPD(url);break;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":o=this.loadHLS(url);break;case"video/mp4":case"video/quicktime":case"audio/mp4":case"audio/x-m4a":o=this.loadMp4WithAudio(url).flatMapObserver(function(b,idx1){return Rx.Observable.just(b)},stjs.bind(this,function(err){return stjs.isInstanceOf(err.constructor,ProxyLoader.BFramesException)?(this.log.warn("video contains B-frames. Trying loadMp4"),this.loadMp4(url)):(this.log.warn("Failed loading mp4 (",err,"). Trying loadGeneric"),this.loadGeneric(url))}),Rx.Observable.empty);break;default:this.log.warn("unsupported mime type",mime),o=Rx.Observable["throw"](new PlayerError("unsupported mime type "+mime,PlayerError.FATAL))}return o}),stjs.bind(this,function(err){return 0==err?this.loadGeneric(url):Rx.Observable["throw"](new PlayerError("can not determine mime type. response code = "+err,PlayerError.FATAL))}),Rx.Observable.empty),subscribe=RxUtil.doOnFirst(sourceUpdates,function(x){null!=onDone&&onDone(null)}).subscribe(function(x){},stjs.bind(this,function(err){this.errorRx.onNext(err),null!=onDone&&onDone(err)}));this.autoDisposable(subscribe)},prototype.focus=function(){this.container.focus()},prototype.determineMimeType=function(url){var mimeType=this.mimeTypeByExtension(url);return null!=mimeType?Rx.Observable.just(mimeType):Rx.Observable.create(function(observer){var http=new XMLHttpRequest;return http.open("GET",url,!0),http.setRequestHeader("Range","bytes=0-0"),http.onreadystatechange=function(){if(4==http.readyState)if(http.status>=200&&http.status<400)try{var contentType=http.getResponseHeader("Content-Type");observer.onNext(contentType.replaceAll("[\\s;]+.*","")),observer.onCompleted()}catch(e){observer.onError(http.status)}else http.status>=400?observer.onError(http.status):observer.onError(0)},http.send(),stjs.bind(http,"abort")})},prototype.mimeTypeByExtension=function(url){if(url.indexOf("?")!=-1&&(url=url.substring(0,url.indexOf("?"))),url.indexOf("/")!=-1&&(url=url.substring(url.lastIndexOf("/")+1)),url.indexOf(".")!=-1){var ext=url.substring(url.lastIndexOf("."));switch(ext.toLowerCase()){case".mp4":case".mov":return"video/mp4";case".mpd":return"application/dash+xml";case".m3u8":return"application/x-mpegURL"}}return null},prototype.loadHLS=function(url){if(this.proxyType=ProxyType.HLS,!Utils.isSafari)return Rx.Observable["throw"](new PlayerError("HLS is not supported in this browser.",PlayerError.FATAL));var m3u8=this.loadHLSPlaylist(url).flatMap(stjs.bind(this,function(hls){var variants=hls.getVariantList();if(0==hls.getMediaList().length&&0==variants.length)return Rx.Observable["throw"](new PlayerError("Empty HLS. Neither media nor stream variants are present.",PlayerError.FATAL));if(variants.length>0){var variantUri=variants[0].uri;return variantUri=Utils.toAbsoluteUri(url,variantUri),this.loadHLSPlaylist(variantUri)}return Rx.Observable.just(hls)}));return m3u8.flatMap(stjs.bind(this,function(hls){if(null!=this.options.drm&&null!=this.options.drm.fairplay&&(this.fairplay=new Fairplay(this.view.video,this.options.drm.fairplay,this.log,this.errorRx)),hls.hasEndList())return this.loadGeneric(url);this.log.info("load live hls timeupdates",hls.uri);var timeline=HLSTimeline.liveUpdateHLSTime(this.http,hls.uri,hls,this.log,this.errorRx);this.videoSrcHiRes=new StaticVideoSrc(url,this.errorRx);var cut=new PlayerCut(null,0,0);return cut.audioInfo=new AudioInfo,cut.audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,cut.audioInfo.channelCount=2,cut.audioInfo.channelLabels=["left","right"],cut.audioInfo.sampleRate=44100,cut.audioInfo.totalSamples=0,cut.audioInfo.waveformPreviews=[],this.cutsRx.onNext(cut),this.cutList.push(cut),this.onLoadDefaultAudioTrack(PlayerAudioTrack.fromAudioInfo(hls.uri,hls.uri,cut.audioInfo,this.log)),timeline.schedule.merge(this.initVideoElement(new BoundedTimeline(timeline))).doOnNext(stjs.bind(this,function(loaded){return this.videoElement.setInitialTime(.1)}))}))},prototype.loadHLSPlaylist=function(url){return this.http.get(url).flatMap(stjs.bind(this,function(str){try{var parsed=HLSPlaylist.parseString(str,this.log);return parsed.uri=url,Rx.Observable.just(parsed)}catch(e){return Rx.Observable["throw"](new PlayerError(e.getMessage(),PlayerError.FATAL))}}))},prototype.onLoadDefaultAudioTrack=function(track){track.setChannelsMuted(!1),this.currentAudioTrack=track,this._addToAudioTracks(track)},prototype.loadGeneric=function(url){if(this.log.info("loadGeneric",url),this.proxyType=ProxyType.GENERIC,url.toLowerCase().endsWith(".m3u8")&&!Utils.isSafari)return Rx.Observable["throw"](new PlayerError("HLS is not supported in this browser.",PlayerError.FATAL));this.init();var timeline=Timeline.UNKNOWN,staticVideoSrc=new StaticVideoSrc(url,this.errorRx);this.videoSrcHiRes=staticVideoSrc;var cut=new PlayerCut(null,0,0);cut.audioInfo=new AudioInfo,cut.audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,cut.audioInfo.channelCount=2,cut.audioInfo.channelLabels=["left","right"],cut.audioInfo.sampleRate=44100,cut.audioInfo.totalSamples=0,cut.audioInfo.waveformPreviews=[],this.cutsRx.onNext(cut),this.cutList.push(cut);var track=PlayerAudioTrack.fromAudioInfo(url,url,cut.audioInfo,this.log);this.onLoadDefaultAudioTrack(track);var initDone=this.initVideoElement(timeline),loadingErrors=staticVideoSrc.getLoadingErrors().flatMap(function(e){return Rx.Observable["throw"](e)}).map(function(x){return!0});return initDone.merge(loadingErrors).take(1)},prototype.loadBlobUrl=function(timeScale,frameDurationTv,produceBlobSource,onDone){this.close(),this.init(),this.videoSrcHiRes=new StaticVideoSrc(produceBlobSource(this.view.video),this.errorRx);var timeline=GenericTimeline.newGenericTime(timeScale,frameDurationTv),endlessTimeline=SimpleTimeline.newEndlessTime(timeline),booleanObservable=this.initVideoElement(endlessTimeline),okie=booleanObservable.subscribe(stjs.bind(this,function(aBoolean){return onDone(this)}));this.autoDisposable(okie)},prototype.loadMPD=function(url){this.proxyType=ProxyType.DASH,this.log.info("loadMPD",url);var mpdUpdates=new ProxyLoader(this.http,this.log).mpdFromUrl(url);return this.initVideoFromMPDStream(url,mpdUpdates)},prototype.initVideoFromMPDStream=function(proxyId,mpdUpdates){return RxUtil.firstOutIgnoreNext(mpdUpdates).flatMap(stjs.bind(this,function(streams){this.videoSrcHiRes=new DynamicDash(streams.video,streams.audio,this.log,this.errorRx),null!=streams.thumbshq&&(this.videoSrcLowRes=new DynamicDash(streams.thumbshq,streams.audio,this.log,this.errorRx),this.videoSrcTrick=new DynamicDash(streams.thumbshq,null,this.log,this.errorRx));var proxy=new Proxy;proxy.video=streams.video,proxy.audio=streams.audio,proxy.thumbshq=streams.thumbshq,proxy.audioInfo=null!=streams.audio?streams.audio.audioInfo:null,proxy.proxyId=proxyId;var cut=new PlayerCut(proxy,0,0);this.cutsRx.onNext(cut),this.cutList.push(cut),this.currentVideoStream=streams.video;var track=PlayerAudioTrack.fromDashStream(proxyId,streams.audio,this.log);this.onLoadDefaultAudioTrack(track);var timeline=streams.video.getTimeline();if(this.subscribeSeekableDurationUpdater(streams.video,streams.audio,timeline),null!=streams.thumbs){var filmStripDrawer=new FilmStripDrawer(this.http,this.log,this.errorRx);filmStripDrawer.initWithDashStream(streams.thumbs,timeline,stjs.bind(this,function(info){return this.filmStripDrawerRx.onNext(filmStripDrawer)}))}return streams.drmInfo.length>0&&(this.drm=new DRM(this.options.drm,streams.drmInfo,this.log,this.errorRx),null!=streams.thumbshq?(this.drm.initVideo(this.view.video,[streams.video.id,streams.thumbshq.id,streams.audio.id]),this.drm.initVideo(this.view.trickVideo,[streams.thumbshq.id])):this.drm.initVideo(this.view.video,[streams.video.id,streams.audio.id])),this.initVideoElement(timeline)}))},prototype.loadMp4WithAudio=function(url){return this.log.info("loadMp4WithAudio",url),this.options.staticVideoSrc?this.loadGeneric(url):(this.proxyType=ProxyType.MP4,new ProxyLoader(this.http,this.log).dashifyMp4(url).flatMap(stjs.bind(this,function(streams){var firstAudio=streams.audio[0],videoStream=streams.video;this.videoSrcHiRes=new DynamicDash(videoStream,firstAudio,this.log,this.errorRx);var cut=new PlayerCut(null,0,streams.timeline.getFrameCount());cut.audioInfo=null==firstAudio?new AudioInfo:firstAudio.audioInfo,this.cutsRx.onNext(cut),this.cutList.push(cut),this.currentVideoStream=videoStream;var track=PlayerAudioTrack.fromDashStream(url,firstAudio,this.log);this.onLoadDefaultAudioTrack(track);var timeline=streams.timeline;return this.subscribeSeekableDurationUpdater(videoStream,firstAudio,timeline),this.initVideoElement(timeline).doOnNext(stjs.bind(this,function(x){null==videoStream&&this.view.showAsAudioPlayer()}))})))},prototype.loadMp4=function(url){return this.proxyType=ProxyType.MP4,Rx.Observable.create(stjs.bind(this,function(observer){var dataSrc=new HttpDataSrc(this.http,url);Mp4Loader.loadMp4(dataSrc,stjs.bind(this,function(mp4box){MovDasher.parseTimePackets(mp4box,dataSrc,stjs.bind(this,function(pkts){if(this.initialized){var time=new BoundedTimeline(new MP4Timeline(pkts));this.videoSrcHiRes=new StaticVideoSrc(url,this.errorRx);var cut=new PlayerCut(null,0,time.getFrameCount());cut.audioInfo=new AudioInfo;var audioTracks2=mp4box.getInfo().audioTracks,$length=audioTracks2.length;if($length>0){var at=audioTracks2[0];cut.audioInfo.audioType=ProxyLoader.AUDIOTYPE_MUXED,cut.audioInfo.channelCount=at.audio.channel_count,cut.audioInfo.channelLabels=AudioInfo.AAC_CHANNEL_CONFIGS[at.audio.channel_count],cut.audioInfo.sampleRate=at.audio.sample_rate,cut.audioInfo.totalSamples=at.duration,cut.audioInfo.waveformPreviews=[]}this.cutsRx.onNext(cut),this.cutList.push(cut);var track=PlayerAudioTrack.fromAudioInfo(url,url,cut.audioInfo,this.log);this.onLoadDefaultAudioTrack(track),this.initVideoElement(time).doOnNext(stjs.bind(this,function(x){0==mp4box.getInfo().videoTracks.length&&this.view.showAsAudioPlayer()})).subscribe(function(loaded){observer.onNext(!0),observer.onCompleted()},stjs.bind(observer,"onError"))}}),stjs.bind(observer,"onError"))}),stjs.bind(observer,"onError"))}))},prototype.loadAudioTrack=function(url,displayName,onDone){var streamRx;streamRx=Utils.isNotBlank(this.options.serverUrl)&&!this.isUrl(url)?new ProxyLoader(this.http,this.log).loadAudioRx(this.options.serverUrl,url):this.determineMimeType(url).flatMap(stjs.bind(this,function(mime){switch(this.log.debug(mime),mime.toLowerCase()){case"application/xml":case"application/dash+xml":return new ProxyLoader(this.http,this.log).loadAudioFromMpd(url);case"video/mp4":case"audio/mp4":case"audio/x-m4a":return new ProxyLoader(this.http,this.log).loadAudioFromM4a(url);default:return Rx.Observable["throw"](new PlayerError("unsupported mime type "+mime,PlayerError.FATAL))}}));var subscription=streamRx.subscribe(stjs.bind(this,function(stream){var track=PlayerAudioTrack.fromDashStream(url,stream,this.log);track.filename=displayName,this._addToAudioTracks(track),track.setChannelsMuted(!0),onDone(null)}),onDone);this.autoDisposable(subscription)},prototype.setAudioTrackUrl=function(trackId,url,onDone){var track=this.getAudioTrack(trackId);null==track&&PlayerImpl.invoke1(onDone,new Error("no track with id "+trackId));var subscription;subscription=url.endsWith(".mpd")?new ProxyLoader(this.http,this.log).loadAudioFromMpd(url).subscribe(stjs.bind(this,function(audioStream){track.update(audioStream),this.audioTracksRx.onNext(track),track.setChannelsMuted(!0),PlayerImpl.invoke1(onDone,null)})):new ProxyLoader(this.http,this.log).loadAudioRx(this.options.serverUrl,url).subscribe(stjs.bind(this,function(audioStream){track.update(audioStream),this.audioTracksRx.onNext(track),track.setChannelsMuted(!0),PlayerImpl.invoke1(onDone,null)}),function(err){return PlayerImpl.invoke1(onDone,err)}),this.autoDisposable(subscription)},prototype.conformAudioTrack=function(trackId,offset){var track=this.getAudioTrack(trackId);if(null==track)return void this.errorRx.onNext(new PlayerError("no track with id "+trackId,PlayerError.NONFATAL));if(null==track.dashStream)return void this.errorRx.onNext(new PlayerError("track "+trackId+" is not loaded",PlayerError.NONFATAL));if(track.id()==this.getCurrentAudioTrack().id())return void this.errorRx.onNext(new PlayerError("changing offset of current track is not supported. id="+trackId,PlayerError.NONFATAL));var offsetTv=Utils.secondsToTv(offset,track.dashStream.sampleRate),timelineDuration=stjs.trunc(this.getDurationSec()*track.dashStream.sampleRate),totalSamples=Math.max(offsetTv+track.dashStream.totalSamples,timelineDuration),conformed=new ConformedM4sAudioStream(track.dashStream,offsetTv,totalSamples,this.log);track.update(conformed),track.offset=offset,this.audioTracksRx.onNext(track)},constructor.invoke1=function(onDone,param){null!=onDone&&onDone(param)},prototype.getAudioTrack=function(id){var filter=this.audioTracks.filter(function(t,i,a){return t.proxyId==id});return filter.length>0?filter[0]:null},prototype.setCurrentAudioTrack=function(id){var track=this.getAudioTrack(id);null!=track&&(PlayerOptions.STREAMING_FILE.equals(this.options.streaming)||(this.currentAudioTrack=track,this.videoSrcHiRes.canSetAudioWithoutReattach(track.dashStream)?this.doChangeCurrentAudioTrack(track):this.reattachCurrentVideoSrc(stjs.bind(this,function(){return this.doChangeCurrentAudioTrack(track)}))))},prototype.doChangeCurrentAudioTrack=function(track){var cut=this.cutList[0];cut.setAudio(track.dashStream),this.videoSrcHiRes.setAudio(track.dashStream),null!=this.videoSrcLowRes&&this.videoSrcLowRes.setAudio(track.dashStream);var lowResCut=this.cutListLowRes[0];null!=lowResCut&&(lowResCut.setAudio(track.dashStream),this.videoSrcLowRes.setAudio(track.dashStream)),this.audioTracks.forEach(function(t){return t.setChannelsMuted(t!=track)}),null!=cut.audioDashFile&&(cut.audioDashFile.channelMuted=track.channelMuted),this.subscribeSeekableDurationUpdater(this.currentVideoStream,track.dashStream,this.getTimeline()),this.audioTracksRx.onNext(track)},constructor.parseStartEnd=function(t){return Utils.isNumber(t)?Utils.toInt(t):Utils.isString(t)?0:-1},prototype.loadCutList=function(cuts,onDone){this.close(),this.init(),this.proxyType=ProxyType.VG;for(var proxyCache={},proxyIds=new Array,i=0;i<cuts.length;i++){var proxyId=cuts[i].proxyId;proxyIds.indexOf(proxyId)==-1&&null==proxyCache[proxyId]&&proxyIds.push(proxyId)}var subscription=new ProxyLoader(this.http,this.log).loadProxies(this.options.serverUrl,proxyIds).doOnError(stjs.bind(this,function(err){this.errorRx.onNext(new PlayerError(err,PlayerError.FATAL)),PlayerImpl.invoke1(onDone,err)})).flatMap(stjs.bind(this,function(proxies){for(var i=0;i<proxyIds.length;i++){var _id=proxyIds[i],_proxy=proxies[_id];proxyCache[_id]=_proxy}return this.onAllProxiesLoaded(proxyCache,cuts)})).subscribe(function(loaded){setTimeout(function(){return PlayerImpl.invoke1(onDone,null)},0)});this.autoDisposable(subscription)},prototype.onAllProxiesLoaded=function(proxyCache,cuts){for(var self=this,i=0;i<cuts.length;i++){var cutEndFrame,proxy=proxyCache[cuts[i].proxyId],cutStartFrame=PlayerImpl.parseStartEnd(cuts[i].start);if(null!=proxy.video)cutEndFrame=PlayerImpl.parseStartEnd(cuts[i].end)||proxy.video.getFrameCount();else{var s=48e3*stjs.trunc(proxy.audio.getDurationSec());cutEndFrame=PlayerImpl.parseStartEnd(cuts[i].end)||s}var cut=new PlayerCut(proxy,cutStartFrame,cutEndFrame);self.cutsRx.onNext(cut),self.cutList.push(cut),self.cutListLowRes.push(PlayerCut.LowRes(proxy,cutStartFrame,cutEndFrame)),this.currentVideoStream=cut.videoDashFile;var audioStream=proxy.audio;if(null!=audioStream){var track=PlayerAudioTrack.fromDashStream(cuts[i].proxyId,audioStream,this.log);this.onLoadDefaultAudioTrack(track)}}self.options.streaming==PlayerOptions.STREAMING_VFILE?(self.videoSrcHiRes=new FileStreaming(self.cutList[0],(!0),(!0),self.options.serverUrl),self.videoSrcLowRes=new FileStreaming(self.cutListLowRes[0],(!1),(!0),self.options.serverUrl),self.videoSrcTrick=new FileStreaming(self.cutListLowRes[0],(!1),(!1),self.options.serverUrl)):self.options.streaming==PlayerOptions.STREAMING_CUTLIST?(self.videoSrcHiRes=new CutListStreaming(self.cutList,VideoSrc.VIDEO_AUDIO,self.options.serverUrl),
self.videoSrcLowRes=new CutListStreaming(self.cutList,VideoSrc.VIDEO_AUDIO,self.options.serverUrl),self.videoSrcTrick=new CutListStreaming(self.cutList,VideoSrc.VIDEO_ONLY,self.options.serverUrl)):1==self.cutList.length?(self.videoSrcHiRes=new DynamicDash(this.cutList[0].videoDashFile,this.cutList[0].audioDashFile,this.log,this.errorRx),null!=self.cutListLowRes[0].videoDashFile&&(self.videoSrcLowRes=new DynamicDash(this.cutListLowRes[0].videoDashFile,this.cutList[0].audioDashFile,this.log,this.errorRx),self.videoSrcTrick=new DynamicDash(self.cutListLowRes[0].videoDashFile,null,this.log,this.errorRx))):(self.videoSrcHiRes=new DashCutListStreaming(self.cutList,(!0),VideoSrc.VIDEO_AUDIO,self.options.serverUrl),self.videoSrcLowRes=new DashCutListStreaming(self.cutListLowRes,(!1),VideoSrc.VIDEO_AUDIO,self.options.serverUrl),self.videoSrcTrick=new DashCutListStreaming(self.cutListLowRes,(!1),VideoSrc.VIDEO_ONLY,self.options.serverUrl));var timeline,videoDashFile=self.cutList[0].videoDashFile;if(null!=videoDashFile){for(var timeScale=0,frameCount=0,frameDurationTv=0,i=0;i<self.cutList.length;i++){var cut=self.cutList[i],frames=cut.endFrame-cut.startFrame;frameCount+=frames,timeScale+=cut.videoDashFile.timescale*frames,frameDurationTv+=cut.videoDashFile.sampleDuration*frames}var tapeTimecode=videoDashFile.timecode;timeline=SimpleTimeline.newSimpleTime(Math.round(stjs.trunc(timeScale/frameCount)),frameCount,Math.round(stjs.trunc(frameDurationTv/frameCount)),tapeTimecode)}else{var audioDashFile=self.cutList[0].audioDashFile;timeline=SimpleTimeline.newSimpleTime(audioDashFile.sampleRate,audioDashFile.totalSamples,1,"00:00:00:00")}var filmStripDrawer=new FilmStripDrawer(this.http,this.log,this.errorRx);return filmStripDrawer.initWithUrl(this.options.serverUrl+"/"+cuts[0].proxyId+"/thumbs.mov",stjs.bind(this,function(info){return this.filmStripDrawerRx.onNext(filmStripDrawer)})),this.initVideoElement(timeline).doOnNext(stjs.bind(this,function(b){null==videoDashFile&&this.view.showAsAudioPlayer()}))},prototype.initVideoElement=function(timeline){this.videoSrcHiRes.attach(this.view.video),this.currentVideoSrc=this.videoSrcHiRes,null!=this.videoSrcTrick?(this.videoSrcTrick.attach(this.view.trickVideo),this.videoElement=new DualVideoElement(this.view.video,timeline,this.view.trickVideo,this.log,this.errorRx)):(this.view.hideTrickVideo(),this.videoElement=new SimpleVideoElement(this.view.video,timeline,this.log,this.errorRx)),this.videoElement.getVideoShownRx().subscribe(stjs.bind(this,function(v){this.changingVideoSrc=!1,this.view.unfreezeVideo()})),this.autoDisposable(this.videoElement.getTimeUpdateRx().map(stjs.bind(this,function(x){return this.getTimeSample()})).subscribe(stjs.bind(this.timeUpdateRx,"onNext"))),this.autoDisposable(this.videoElement.getProgressRx().subscribe(stjs.bind(this.progressRx,"onNext"))),this.options.enableCORS&&this.videoElement.setCrossOrigin("anonymous"),this.videoElement.setResetPlayRateOnSeek(!this.options.preservePlaybackRate),this.resubscribeTimeRx(),this.view.init(this),Utils.isSomething(this.options.plugins)&&this.initPlugins(this.options.plugins);var initDone;return initDone=timeline==Timeline.UNKNOWN?this.timelineRx.take(1).map(function(t){return!0}):Rx.Observable.just(!0),initDone.doOnNext(stjs.bind(this,function(aBoolean){this.log.info("video element initialized"),this.initRx.onNext(this)}))},prototype._addToAudioTracks=function(audiotrack){return this.audioTracks.push(audiotrack),this.audioTracksRx.onNext(audiotrack),audiotrack},prototype.addAudioTrack=function(displayName,channelNames){return this.addAudioTrackWithId(PlayerUtils.randomString(),displayName,channelNames)},prototype.addAudioTrackWithId=function(id,displayName,channelNames){var audiotrack=PlayerAudioTrack.fromChannelLabels(id,displayName,channelNames,this.log);return audiotrack.setChannelsMuted(!0),this._addToAudioTracks(audiotrack).proxyId},prototype.muteAudioTrack=function(id){var track=this.getAudioTrack(id);null!=track&&track.setChannelsMuted(!0)},prototype.togglePlay=function(){this.isPlaying()?this.pause():this.videoElement.playAtRate(this.options.preservePlaybackRate?this.playRateBeforePause:1)},prototype.play=function(){this.videoElement.playAtRate(this.options.preservePlaybackRate?this.playRateBeforePause:1)},prototype.pause=function(){if(this.isPlaying()){var rate=this.videoElement.getPlayRate();0!=rate&&(this.playRateBeforePause=rate),this.videoElement.pause()}},prototype.getTimeline=function(){return this.videoElement.getTimeline()},prototype.getTimelineRx=function(){return this.timelineRx.debounce(1)},prototype.getCurrentTapeTimecode=function(){var fn=this.videoElement.getFrame();return this.videoElement.getTimeline().getTapeByFrame(fn)},prototype.getCurrentStandardTimecode=function(){var ms=stjs.trunc(1e3*this.videoElement.getTimeSec());return Utils.hhmmssms(ms)},prototype.getCurrentFrame=function(){return this.videoElement.getFrame()},prototype.getCurrentTime=function(){return this.videoElement.getTimeSec()},prototype.getCurrentTimeValue=function(){return this.videoElement.getTimeValue()},prototype.seekSec=function(time){this.videoElement.seek(time)},prototype.seek=function(anything){var fn=-1,time=-1;if(Utils.isNumber(anything))fn=stjs.trunc(anything);else if(Utils.isString("string")){var str=anything;TapeTimecode.isTimecode(str)?fn=this.videoElement.getTimeline().getFrameByTimecode(str):Utils.HHmmSSmsecToTimestamp(str)!=-1?time=stjs.trunc(Utils.HHmmSSmsecToTimestamp(str)/1e3):new RegExp("^\\d+$").test(str)&&(fn=Integer.parseInt(str))}fn==-1&&time==-1?this.errorRx.onNext(new PlayerError("provided value is neither timecode nor frame number: "+anything,PlayerError.NONFATAL)):fn!=-1?this.videoElement.seekFrame(fn):this.videoElement.seek(time)},prototype.seekFrame=function(fn){this.videoElement.seekFrame(fn)},prototype.nextFrame=function(n){this.videoElement.pause(),this.videoElement.forward1(n)},prototype.previousFrame=function(n){this.videoElement.pause(),this.videoElement.backward1(n)},prototype.nextSec=function(n){this.videoElement.pause(),this.videoElement.forwardSec(n)},prototype.previousSec=function(n){this.videoElement.pause(),this.videoElement.backwardSec(n)},prototype.enterFullscreen=function(){this.view.enterFullscreen(null)},prototype.exitFullscreen=function(){this.view.exitFullscreen()},prototype.setRange=function(fromTimecode,toTimecode){var fromFrame=PlayerImpl.guessFrame(this.videoElement.getTimeline(),fromTimecode),toFrame=PlayerImpl.guessFrame(this.videoElement.getTimeline(),toTimecode);fromFrame!=-1&&toFrame!=-1?(this.originalVideoElement=this.videoElement,this.videoElement=new RangeVideoElement(this.videoElement),this.videoElement.setRange(fromFrame,toFrame),this.resubscribeTimeRx()):this.errorRx.onNext(new PlayerError("provided values are neither timecodes nor frame numbers: "+fromTimecode+" "+toTimecode,PlayerError.NONFATAL)),this.view.renderRange(fromFrame,toFrame)},prototype.resubscribeTimeRx=function(){null!=this.timelineSubscription&&this.timelineSubscription.dispose(),this.timelineSubscription=this.videoElement.getTimeline().getUpdateRx().subscribe(stjs.bind(this.timelineRx,"onNext")),this.timelineRx.onNext(this.videoElement.getTimeline())},prototype.cancelRange=function(){this.videoElement.cancelRange(),null!=this.originalVideoElement&&(this.videoElement=this.originalVideoElement,this.originalVideoElement=null,this.resubscribeTimeRx(),this.timeUpdateRx.onNext(this.getTimeSample())),this.view.renderWhole()},prototype.hasRange=function(){return this.videoElement.hasRange()},prototype.playAtRate=function(rate){this.videoElement.playAtRate(rate)},prototype.playFasterBackwards=function(){this.videoElement.playFasterBackwards()},prototype.playFaster=function(){this.videoElement.playFaster()},prototype.setLoop=function(loop){this.videoElement.setLoop(loop)},prototype.setPauseOnLoop=function(pauseOnLoop){this.videoElement.setPauseOnLoop(pauseOnLoop)},prototype.isPlaying=function(){return this.videoElement.isPlaying()},prototype.getPlaybackRate=function(){return this.videoElement.getPlayRate()},prototype.getCutsInfo=function(){for(var cuts=this.cutList,result=new Array,countedFrames=0,i=0;i<cuts.length;i++){var playerCut=cuts[i],cutListFrameCount=playerCut.endFrame-playerCut.startFrame,cutInfo=new CutInfo(playerCut.startFrame,playerCut.endFrame,playerCut.proxyId,countedFrames,countedFrames+cutListFrameCount,playerCut.audioDashFile,playerCut.audioInfo);cutInfo.frameCount=cutInfo.end-cutInfo.start,cutInfo.cutListFrameCount=cutListFrameCount,result.push(cutInfo),countedFrames+=cutListFrameCount}return result},prototype.getCurrentCut=function(){for(var currentFrame=this.videoElement.getFrame(),cutsInfo=this.getCutsInfo(),currentCut=cutsInfo[0],i=0;i<cutsInfo.length;i++){var cut=cutsInfo[i];currentFrame>=cut.cutListFrameStart&&currentFrame<cut.cutListFrameEnd&&(currentCut=cut,currentCut.cutId=i)}return currentCut},prototype.getCurrentAudioTrack=function(){return this.currentAudioTrack},prototype.initPlugins=function(plugins){},prototype.isAudioMutable=function(){for(var self=this,i=0;i<self.cutList.length;i++){var audioInfo=self.cutList[i].audioInfo;if(null!=audioInfo&&ProxyLoader.AUDIOTYPE_MP3.equals(audioInfo.audioType))return!1}return!0},prototype.isAllMuted=function(){return this.audioTracks.every(function(t,i,a){return t.isMuted()})},prototype.setVolume=function(val){this.videoElement.setVolume(val)},prototype.getVolume=function(){return this.videoElement.getVolume()},prototype.isChangingVideoSrc=function(){return this.changingVideoSrc},prototype.applyAudioChanges=function(){this.currentVideoSrc.clearAudioBuffer()},prototype.changeVideoSrc=function(newSrc){this.reattachCurrentVideoSrc(stjs.bind(this,function(){return this.currentVideoSrc=newSrc}))},prototype.reattachCurrentVideoSrc=function(doBeforeAttach){this.log.debug("reattaching"),this.changingVideoSrc=!0;var playRate=this.videoElement.getPlayRate();this.videoElement.pause(),this.videoElement.setInitialTime(this.videoElement.getTimeSec()),this.view.freezeVideo(),setTimeout(stjs.bind(this,function(){this.currentVideoSrc.detach(),null!=doBeforeAttach&&doBeforeAttach(),this.currentVideoSrc.attach(this.view.video),0!=playRate&&this.videoElement.playAtRate(playRate)}),100)},prototype.checkRangeAndSeek=function(frame){PlayerImpl.RANGE_AUTO_CANCEL&&this.videoElement.hasRange()&&!this.videoElement.inRange(frame)&&this.videoElement.cancelRange(),this.videoElement.seekFrame(frame)},prototype.checkRangeAndSeekSec=function(sec){var frame=this.getTimeline().getFrameBySec(sec);PlayerImpl.RANGE_AUTO_CANCEL&&this.videoElement.hasRange()&&!this.videoElement.inRange(frame)&&this.videoElement.cancelRange(),this.videoElement.seek(sec)},prototype.getSeekableDurationSec=function(){return this.videoElement.getSeekableDuration()},prototype.getDurationSec=function(){return this.videoElement.getDuration()},prototype.getTimeSample=function(){var _tv=this.getCurrentTimeValue(),_frame=this.getCurrentFrame(),_sec=this.getCurrentTime();return new TimeSample(_tv,_frame,_sec)},prototype.setVideoQuality=function(res){null!=this.videoSrcLowRes&&(PlayerImpl.FULL_RES.equals(res)?this.changeVideoSrc(this.videoSrcHiRes):this.changeVideoSrc(this.videoSrcLowRes))},constructor.guessFrame=function(timeline,anything){var fn=0;if(Utils.isNumber(anything))fn=Utils.toInt(anything);else if(Utils.isString(anything)){var str=anything;TapeTimecode.isTimecode(str)?fn=timeline.getFrameByTimecode(str):Utils.HHmmSSmsecToTimestamp(str)!=-1?fn=timeline.getFrameByMillis(Utils.HHmmSSmsecToTimestamp(str)):Utils.isDigit(str)&&(fn=Integer.parseInt(str))}return fn},prototype.getPlayRx=function(){return this.videoElement.getPlayRx()},prototype.getVolumeChangeRx=function(){return this.videoElement.getVolumeChangeRx()},prototype.getTimeUpdateRx=function(){return this.timeUpdateRx},prototype.setStartTapeTimecode=function(tapeTimecode){var tt=this.getTimeline().getTapeTimecode(),newStartTimecode=TapeTimecode.parseTimecode(tapeTimecode,tt.getTapeFps(),tt.isDropFrame());tt.setStartTimecode(newStartTimecode),this.timelineRx.onNext(this.getTimeline()),this.timeUpdateRx.onNext(this.getTimeSample())},prototype.getCaptionsList=function(){return this.captionsList},prototype.getAudioTracks=function(){return this.audioTracks},prototype.getAudioHandlerRx=function(){return this.audioHandlerRx},prototype.getCaptionHandlerRx=function(){return this.captionHandlerRx},prototype.disableHotKeys=function(){null!=this.view.hm&&this.view.hm.setDisable(!0)},prototype.enableHotKeys=function(){null!=this.view.hm&&this.view.hm.setDisable(!1)},prototype.getVideoElement=function(){return this.videoElement},prototype.enableHotKeysForDocument=function(doc){this.view.hm.enableHotKeysForDocument(doc)},prototype.addEventListener=function(type_,handler){var observable=null,type=type_.toLowerCase();switch(type){case PlayerEvents.FULLSCREEN_EVENT:observable=this.view.fullscreenRx;break;case PlayerEvents.TIMEUPDATE_EVENT:observable=this.timeUpdateRx;break;case PlayerEvents.LOAD_EVENT:observable=this.initRx;break;case PlayerEvents.PLAY_EVENT:observable=this.getPlayRx();break;case PlayerEvents.INIT_EVENT:observable=this.initRx;break;case PlayerEvents.TIMELINE_EVENT:observable=this.getTimelineRx();break;case PlayerEvents.ERROR_EVENT:observable=this.errorRx;break;case PlayerEvents.VOLUME_CHANGED:observable=this.getVolumeChangeRx();break;case PlayerEvents.PROGRESS:observable=this.progressRx}if(null!=observable){var handle=stjs.bind(this,function(x){try{handler(x)}catch(e){this.log.error("error in user's event listener \""+type+'"',e),type!=PlayerEvents.ERROR_EVENT&&this.errorRx.onNext(new PlayerError("error in user's event listener \""+type+'"',PlayerError.NONFATAL,e))}}),disposable=observable.subscribe(handle);null==this.eventListeners[type]&&(this.eventListeners[type]=[]),this.eventListeners[type].push(new PlayerImpl.PlayerEventListener(handler,disposable))}},prototype.removeEventListener=function(type,handler){var arr=this.eventListeners[type];if(null!=arr)for(var i=0;i<arr.length;i++){var l=arr[i];l.handler==handler&&(l.disposable.dispose(),arr.splice(i,1))}},prototype.removeAllEventListeners=function(){Utils.mapValues(this.eventListeners).forEach(function(arr){return arr.forEach(function(l){return l.disposable.dispose()})}),this.eventListeners={}},prototype.loadFromMpd=function(proxyId,mpd,onLoad){this.close(),this.init(),this.autoDisposable(this.initVideoFromMPDStream(proxyId,mpd).doOnError(stjs.bind(this,function(err){return this.errorRx.onNext(new PlayerError("can not load MPD",PlayerError.FATAL,err))})).subscribe(function(aBoolean){return onLoad()}))},constructor.PlayerEventListener=function(handler,disposable){this.handler=handler,this.disposable=disposable},constructor.PlayerEventListener=stjs.extend(constructor.PlayerEventListener,null,[],function(constructor,prototype){prototype.handler=null,prototype.disposable=null},{handler:"Callback1",disposable:"Rx.Disposable"},{}),prototype.subscribeSeekableDurationUpdater=function(video,audio,timeline){null!=this.seekableDurationUpdaterSubscription&&(this.seekableDurationUpdaterSubscription.dispose(),this.seekableDurationUpdaterSubscription=null),null!=video&&null!=audio?(timeline.setSeekableDurationSec(Math.min(audio.getDurationSec(),video.getDurationSec())),this.seekableDurationUpdaterSubscription=Rx.Observable.merge(audio.getUpdateRx(),video.getUpdateRx()).subscribe(function(s){timeline.setSeekableDurationSec(Math.min(video.getDurationSec(),audio.getDurationSec()))})):null!=video&&null==audio?(timeline.setSeekableDurationSec(video.getDurationSec()),this.seekableDurationUpdaterSubscription=video.getUpdateRx().subscribe(function(s){timeline.setSeekableDurationSec(video.getDurationSec())})):null==video&&null!=audio?(timeline.setSeekableDurationSec(audio.getDurationSec()),this.seekableDurationUpdaterSubscription=audio.getUpdateRx().subscribe(function(s){timeline.setSeekableDurationSec(audio.getDurationSec())})):this.errorRx.onNext(new PlayerError("invalid call. no video and audio",PlayerError.FATAL))},prototype.getStaticFilmStripDrawer=function(url,cb){var filmStripDrawer=new FilmStripDrawer(this.http,this.log,this.errorRx);filmStripDrawer.initWithUrl(url,function(info){return PlayerImpl.invoke1(cb,filmStripDrawer)})},prototype.getFilmStripDrawer=function(callback){this.filmStripDrawerRx.subscribe(function(drawer){return PlayerImpl.invoke1(callback,drawer)})},prototype.autoDisposable=function(disposable){this.autoDisposables.add(disposable)},prototype.registerPlugin=function(plugin){plugin.setAPI(this)},prototype.getCaptionListChangeRx=function(){return this.captionListChangeRx},prototype.getBuffered=function(){return this.videoElement.getBuffered()},prototype.getErrorRx=function(){return this.errorRx}},{log:"Log",container:"Element",options:"PlayerOptions",http:"Http",view:"PlayerView",videoSrcHiRes:"VideoSrc",videoSrcLowRes:"VideoSrc",videoSrcTrick:"VideoSrc",cutList:{name:"Array",arguments:["PlayerCut"]},cutListLowRes:{name:"Array",arguments:["PlayerCut"]},captionsList:{name:"Array",arguments:["Subtitles"]},videoElement:"VideoElement",originalVideoElement:"VideoElement",audioTracksRx:{name:"Rx.ReplaySubject",arguments:["PlayerAudioTrack"]},audioTracks:{name:"Array",arguments:["PlayerAudioTrack"]},captionListChangeRx:{name:"Rx.ReplaySubject",arguments:["Subtitles"]},pluginRx:{name:"Rx.ReplaySubject",arguments:["VGPlugins"]},cutsRx:{name:"Rx.ReplaySubject",arguments:["PlayerCut"]},currentVideoStream:"SegmentedStream",timeUpdateRx:{name:"Rx.Subject",arguments:["TimeSample"]},progressRx:{name:"Rx.Subject",arguments:[{name:"Array",arguments:["TimeRange"]}]},timelineRx:{name:"Rx.Subject",arguments:["Timeline"]},timelineSubscription:"Rx.Disposable",audioHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},captionHandlerRx:{name:"Rx.Subject",arguments:["Callback0"]},currentVideoSrc:"VideoSrc",initRx:{name:"Rx.Subject",arguments:["PlayerImpl"]},seekableDurationUpdaterSubscription:"Rx.Disposable",currentAudioTrack:"PlayerAudioTrack",eventListeners:{name:"Map",arguments:[null,{name:"Array",arguments:["PlayerImpl.PlayerEventListener"]}]},filmStripDrawerRx:{name:"Rx.Subject",arguments:["FilmStripDrawer"]},autoDisposables:"Rx.CompositeDisposable",proxyType:{name:"Enum",arguments:["ProxyType"]},errorRx:{name:"Rx.Subject",arguments:["PlayerError"]},drm:"DRM",fairplay:"Fairplay"},{});var CoreDev=function(){};CoreDev=stjs.extend(CoreDev,null,[],function(constructor,prototype){constructor.chugai=function(){window.onload=function(xxx){var container=window.document.getElementById("playerContainer"),player=new PlayerImpl(container,{logLevel:LogLevel.INFO,drm:{widevine:{laUrl:"https://drm-widevine-licensing.axtest.net/AcquireLicense"},playready:{laUrl:"https://drm-playready-licensing.axtest.net/AcquireLicense"},fairplay:{laUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?type=FPS&WVCustomUserToken=34241&WVCustomProductId=1234",certUrl:"https://drm.ideanovatech.com/InplayMultiDrmProxy?FairPlayCert=true"}}});player.load("http://localhost/code/vgplayer/maleficent/file.mpd",function(err){null!=err?console.error("load error",err):console.log("load ok")}),player.addEventListener(PlayerEvents.ERROR_EVENT,function(err){console.log("OMG! error event",err)}),window.PLAYER=player}},constructor.andrew=function(){window.onload=function(xxx){var container=window.document.getElementById("playerContainer"),player=new PlayerImpl(container,{serverUrl:"http://localhost/player/core/tests"});player.load("http://localhost/player/core/tests/pete30/file.mpd",function(err){null!=err?console.error(err):console.log("Player loaded")}),window.player=player}}},{},{}),module.exports={Player:PlayerImpl,Captions:Captions,TapeTimecode:TapeTimecode,LogLevel:LogLevel,PlayerError:PlayerError,_private:{CloseableView:CloseableView,VGView:VGView,VGPlayerPluginApi:VGPlayerPluginApi,ObjectEvents:ObjectEvents,DataSrc:DataSrc,VGPlugin:VGPlugin,VGPlugins:VGPlugins,PlayerView:PlayerView,VGPlayerPublicApi:VGPlayerPublicApi,Http:Http,TimelineUtil:TimelineUtil,tests:{PlayerOptions:PlayerOptions,Utils:Utils,Subtitles:Subtitles,SubtitleEntry:SubtitleEntry,MutableBoolean:MutableBoolean,PlayerEvents:PlayerEvents,KeyOptions:KeyOptions,HotkeyManager:HotkeyManager,Timeline:Timeline,TimeSample:TimeSample}}}},function(module,exports,__webpack_require__){var require,require,__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,require;(function(process,__dirname){var _require=require;require=void 0,function(root,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(){"use strict";function initglobal(){global=this,global||("undefined"!=typeof window?global=window:"undefined"!=self&&(global=self))}function error(message){console.error(message),console.trace()}function assert(condition,message){condition||error(message)}function asmFactory(stdlib,foreign,heap){"use asm";var imul=stdlib.Math.imul;var min=stdlib.Math.min;var max=stdlib.Math.max;var pow=stdlib.Math.pow;var out=new stdlib.Uint8Array(heap);var out32=new stdlib.Uint32Array(heap);var inp=new stdlib.Uint8Array(heap);var mem=new stdlib.Uint8Array(heap);var mem32=new stdlib.Uint32Array(heap);var width=0;var height=0;var lumaSize=0;var chromaSize=0;var inpSize=0;var outSize=0;var inpStart=0;var outStart=0;var widthFour=0;var cacheStart=0;function init(parWidth,parHeight){parWidth=parWidth|0;parHeight=parHeight|0;var i=0;var s=0;width=parWidth;widthFour=imul(parWidth,4)|0;height=parHeight;lumaSize=imul(width|0,height|0)|0;chromaSize=(lumaSize|0)>>2;outSize=imul(imul(width,height)|0,4)|0;inpSize=lumaSize+chromaSize|0+chromaSize|0;outStart=0;inpStart=outStart+outSize|0;cacheStart=inpStart+inpSize|0;s=~~+pow(+2,+24);s=imul(s,4)|0;for(i=0|0;(i|0)<(s|0)|0;i=i+4|0){mem32[(cacheStart+i|0)>>2]=0}}function doit(){var ystart=0;var ustart=0;var vstart=0;var y=0;var yn=0;var u=0;var v=0;var o=0;var line=0;var col=0;var usave=0;var vsave=0;var ostart=0;var cacheAdr=0;ostart=outStart|0;ystart=inpStart|0;ustart=ystart+lumaSize|0|0;vstart=ustart+chromaSize|0;for(line=0;(line|0)<(height|0);line=line+2|0){usave=ustart;vsave=vstart;for(col=0;(col|0)<(width|0);col=col+2|0){y=inp[ystart>>0]|0;yn=inp[(ystart+width|0)>>0]|0;u=inp[ustart>>0]|0;v=inp[vstart>>0]|0;cacheAdr=((y<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o){}else{o=yuv2rgbcalc(y,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[ostart>>2]=o;cacheAdr=((yn<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o){}else{o=yuv2rgbcalc(yn,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[(ostart+widthFour|0)>>2]=o;ostart=ostart+4|0;ystart=ystart+1|0;y=inp[ystart>>0]|0;yn=inp[(ystart+width|0)>>0]|0;cacheAdr=((y<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o){}else{o=yuv2rgbcalc(y,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[ostart>>2]=o;cacheAdr=((yn<<16|0)+(u<<8|0)|0)+v|0;o=mem32[(cacheStart+cacheAdr|0)>>2]|0;if(o){}else{o=yuv2rgbcalc(yn,u,v)|0;mem32[(cacheStart+cacheAdr|0)>>2]=o|0}mem32[(ostart+widthFour|0)>>2]=o;ostart=ostart+4|0;ystart=ystart+1|0;ustart=ustart+1|0;vstart=vstart+1|0}ostart=ostart+widthFour|0;ystart=ystart+width|0}}function yuv2rgbcalc(y,u,v){y=y|0;u=u|0;v=v|0;var r=0;var g=0;var b=0;var o=0;var a0=0;var a1=0;var a2=0;var a3=0;var a4=0;a0=imul(1192,y-16|0)|0;a1=imul(1634,v-128|0)|0;a2=imul(832,v-128|0)|0;a3=imul(400,u-128|0)|0;a4=imul(2066,u-128|0)|0;r=(a0+a1|0)>>10|0;g=((a0-a2|0)-a3|0)>>10|0;b=(a0+a4|0)>>10|0;if((r&255|0)!=(r|0)|0){r=min(255,max(0,r|0)|0)|0}if((g&255|0)!=(g|0)|0){g=min(255,max(0,g|0)|0)|0}if((b&255|0)!=(b|0)|0){b=min(255,max(0,b|0)|0)|0}o=255;o=o<<8|0;o=o+b|0;o=o<<8|0;o=o+g|0;o=o<<8|0;o=o+r|0;return o|0}return{init:init,doit:doit}}var global;initglobal();var getModule=function(_broadwayOnHeadersDecoded,_broadwayOnPictureDecoded){function d(a){throw a}function n(){return function(){}}function ha(a){eval.call(k,a)}function w(a,b){a||A("Assertion failed: "+b)}function na(a){var b=p["_"+a];if(!b)try{b=eval("_"+a)}catch(c){}return w(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)"),b}function sa(a,b,c){switch(c=c||"i8","*"===c.charAt(c.length-1)&&(c="i32"),c){case"i1":I[a>>0]=b;break;case"i8":I[a>>0]=b;break;case"i16":J[a>>1]=b;break;case"i32":K[a>>2]=b;break;case"i64":ma=[b>>>0,(la=b,1<=+ta(la)?0<la?(0|va(+wa(la/4294967296),4294967295))>>>0:~~+xa((la-+(~~la>>>0))/4294967296)>>>0:0)],K[a>>2]=ma[0],K[a+4>>2]=ma[1];break;case"float":ya[a>>2]=b;break;case"double":za[a>>3]=b;break;default:A("invalid type for setValue: "+c)}}function Aa(a,b){switch(b=b||"i8","*"===b.charAt(b.length-1)&&(b="i32"),b){case"i1":return I[a>>0];case"i8":return I[a>>0];case"i16":return J[a>>1];case"i32":return K[a>>2];case"i64":return K[a>>2];case"float":return ya[a>>2];case"double":return za[a>>3];default:A("invalid type for setValue: "+b)}return k}function M(a,b,c,e){var f,h;"number"==typeof a?(f=i,h=a):(f=m,h=a.length);var j="string"==typeof b?b:k,c=c==Ba?e:[Ca,z.pb,z.Ec,z.bb][c===g?L:c](Math.max(h,j?1:b.length));if(f){for(e=c,w(0==(3&c)),a=c+(h&-4);e<a;e+=4)K[e>>2]=0;for(a=c+h;e<a;)I[e++>>0]=0;return c}if("i8"===j)return a.subarray||a.slice?N.set(a,c):N.set(new Uint8Array(a),c),c;for(var l,u,e=0;e<h;){var q=a[e];"function"==typeof q&&(q=z.sg(q)),f=j||b[e],0===f?e++:("i64"==f&&(f="i32"),sa(c+e,q,f),u!==f&&(l=z.oc(f),u=f),e+=l)}return c}function ka(a,b){if(0===b||!a)return"";for(var e,c=m,f=0;;){if(e=N[a+f>>0],128<=e)c=i;else if(0==e&&!b)break;if(f++,b&&f==b)break}b||(b=f);var h="";if(!c){for(;0<b;)e=String.fromCharCode.apply(String,N.subarray(a,a+Math.min(b,1024))),h=h?h+e:e,a+=1024,b-=1024;return h}for(c=new z.Da,f=0;f<b;f++)e=N[a+f>>0],h+=c.nb(e);return h}function Da(a){function b(c,e,f){var s,e=e||1/0,h="",j=[];if("N"===a[l]){for(l++,"K"===a[l]&&l++,s=[];"E"!==a[l];)if("S"===a[l]){l++;var C=a.indexOf("_",l);s.push(q[a.substring(l,C)||0]||"?"),l=C+1}else if("C"===a[l])s.push(s[s.length-1]),l+=2;else{var C=parseInt(a.substr(l)),P=C.toString().length;if(!C||!P){l--;break}var sb=a.substr(l+P,C);s.push(sb),q.push(sb),l+=P+C}if(l++,s=s.join("::"),e--,0===e)return c?[s]:s}else("K"===a[l]||x&&"L"===a[l])&&l++,(C=parseInt(a.substr(l)))&&(P=C.toString().length,s=a.substr(l+P,C),l+=P+C);x=m,"I"===a[l]?(l++,C=b(i),P=b(i,1,i),h+=P[0]+" "+s+"<"+C.join(", ")+">"):h=s;a:for(;l<a.length&&0<e--;)if(s=a[l++],s in u)j.push(u[s]);else switch(s){case"P":j.push(b(i,1,i)[0]+"*");break;case"R":j.push(b(i,1,i)[0]+"&");break;case"L":l++,C=a.indexOf("E",l)-l,j.push(a.substr(l,C)),l+=C+2;break;case"A":C=parseInt(a.substr(l)),l+=C.toString().length,"_"!==a[l]&&d("?"),l++,j.push(b(i,1,i)[0]+" ["+C+"]");break;case"E":break a;default:h+="?"+s;break a}return!f&&1===j.length&&"void"===j[0]&&(j=[]),c?(h&&j.push(h+"?"),j):h+("("+j.join(", ")+")")}var c=!!p.___cxa_demangle;if(c)try{var e=Ca(a.length);ra(a.substr(1),e);var f=Ca(4),h=p.___cxa_demangle(e,0,0,f);if(0===Aa(f,"i32")&&h)return ka(h)}catch(j){}finally{e&&Ea(e),f&&Ea(f),h&&Ea(h)}var l=3,u={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},q=[],x=i,e=a;try{if("Object._main"==a||"_main"==a)return"main()";if("number"==typeof a&&(a=ka(a)),"_"!==a[0]||"_"!==a[1]||"Z"!==a[2])return a;switch(a[3]){case"n":return"operator new()";case"d":return"operator delete()"}e=b()}catch(s){e+="?"}return 0<=e.indexOf("?")&&!c&&z.Aa("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function Fa(){var a;a:{if(a=Error(),!a.stack){try{d(Error(0))}catch(b){a=b}if(!a.stack){a="(no stack trace available)";break a}}a=a.stack.toString()}return a.replace(/__Z[\w\d_]+/g,function(a){var b=Da(a);return a===b?a:a+" ["+b+"]"})}function Na(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var c=b.ja;"number"==typeof c?b.Xa===g?z.Fa("v",c):z.Fa("vi",c,[b.Xa]):c(b.Xa===g?k:b.Xa)}}}function Ta(a){Oa.unshift(a)}function Ua(a){Ra.unshift(a)}function Va(a,b,c){return a=(new z.Da).Ac(a),c&&(a.length=c),b||a.push(0),a}function ra(a,b,c){for(a=Va(a,c),c=0;c<a.length;)I[b+c>>0]=a[c],c+=1}function qa(a,b){for(var c=0;c<a.length;c++)I[b+c>>0]=a[c]}function Ya(){S++,p.monitorRunDependencies&&p.monitorRunDependencies(S)}function Za(){if(S--,p.monitorRunDependencies&&p.monitorRunDependencies(S),0==S&&(Wa!==k&&(clearInterval(Wa),Wa=k),Xa)){var a=Xa;Xa=k,a()}}function V(a){return K[bb>>2]=a}function cb(a,b){for(var c=0,e=a.length-1;0<=e;e--){var f=a[e];"."===f?a.splice(e,1):".."===f?(a.splice(e,1),c++):c&&(a.splice(e,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function db(a){var b="/"===a.charAt(0),c="/"===a.substr(-1),a=cb(a.split("/").filter(function(a){return!!a}),!b).join("/");return!a&&!b&&(a="."),a&&c&&(a+="/"),(b?"/":"")+a}function eb(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1),a=b[0],b=b[1];return a||b?(b&&(b=b.substr(0,b.length-1)),a+b):"."}function W(a){if("/"===a)return"/";var b=a.lastIndexOf("/");return-1===b?a:a.substr(b+1)}function fb(){var a=Array.prototype.slice.call(arguments,0);return db(a.join("/"))}function X(a,b){return db(a+"/"+b)}function gb(){for(var a="",b=m,c=arguments.length-1;-1<=c&&!b;c--){if(b=0<=c?arguments[c]:B.yb(),"string"!=typeof b&&d(new TypeError("Arguments to path.resolve must be strings")),!b)return"";a=b+"/"+a,b="/"===b.charAt(0)}return a=cb(a.split("/").filter(function(a){return!!a}),!b).join("/"),(b?"/":"")+a||"."}function hb(a,b){function c(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;0<=c&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}for(var a=gb(a).substr(1),b=gb(b).substr(1),e=c(a.split("/")),f=c(b.split("/")),h=Math.min(e.length,f.length),j=h,l=0;l<h;l++)if(e[l]!==f[l]){j=l;break}for(h=[],l=j;l<e.length;l++)h.push("..");return h=h.concat(f.slice(j)),h.join("/")}function jb(a,b){ib[a]={input:[],K:[],sa:b},B.Ob(a,kb)}function zb(){d("TODO")}function Ab(a,b,c){if(a=B.qa(a),!a)return V(U.V),-1;try{return B.write(a,I,b,c)}catch(e){return B.sc(e),-1}}function Cb(a){return a=B.pc(a),a?a.C:-1}function Db(a,b){return Ab(Cb(b),a,Bb(a))}function Eb(a,b){var c;return c=255&a,c=0<=c?c:Math.pow(2,g)+c,I[Eb.Cc>>0]=c,-1==Ab(Cb(b),Eb.Cc,1)?((c=B.pc(b))&&(c.error=i),-1):c}function Fb(a){Fb.$c||(E=E+4095&-4096,Fb.$c=i,w(z.bb),Fb.Wc=z.bb,z.bb=function(){A("cannot dynamically allocate, sbrk now has control")});var b=E;return 0!=a&&Fb.Wc(a),b}function Hb(a,b,c){window._broadwayOnPictureDecoded(a,b,c)}function Ib(){window._broadwayOnHeadersDecoded()}function Jb(a,b){return Kb=a,Lb=b,Mb?(0==a?(Nb=function(){setTimeout(Ob,b)},Pb="timeout"):1==a&&(Nb=function(){Qb(Ob)},Pb="rAF"),0):1}function Rb(a,b,c,e){p.noExitRuntime=i,w(!Mb,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Mb=a,Sb=e;var f=Tb;Ob=function(){if(!H)if(0<Ub.length){var b=Date.now(),c=Ub.shift();if(c.ja(c.Xa),Vb){var l=Vb,u=0==l%1?l-1:Math.floor(l);Vb=c.dg?u:(8*l+(u+.5))/9}console.log('main loop blocker "'+c.name+'" took '+(Date.now()-b)+" ms"),p.setStatus&&(b=p.statusMessage||"Please wait...",c=Vb,l=Wb.ig,c?c<l?p.setStatus(b+" ("+(l-c)+"/"+l+")"):p.setStatus(b):p.setStatus("")),setTimeout(Ob,0)}else if(!(f<Tb))if(Xb=Xb+1|0,1==Kb&&1<Lb&&0!=Xb%Lb)Nb();else{"timeout"===Pb&&p.fg&&(p.fa("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),Pb="");a:if(!(H||p.preMainLoop&&p.preMainLoop()===m)){try{
"undefined"!=typeof e?z.Fa("vi",a,[e]):z.Fa("v",a)}catch(q){if(q instanceof ia)break a;q&&"object"==typeof q&&q.stack&&p.fa("exception thrown: "+[q,q.stack]),d(q)}p.postMainLoop&&p.postMainLoop()}f<Tb||("object"==typeof SDL&&SDL.ac&&SDL.ac.Pd&&SDL.ac.Pd(),Nb())}},b&&0<b?Jb(0,1e3/b):Jb(1,1),Nb(),c&&d("SimulateInfiniteLoop")}function cc(a){var b=Date.now();if(0===bc)bc=b+1e3/60;else for(;b+2>=bc;)bc+=1e3/60;b=Math.max(bc-b,0),setTimeout(a,b)}function Qb(a){"undefined"==typeof window?cc(a):(window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||cc),window.requestAnimationFrame(a))}function xb(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[a.substr(a.lastIndexOf(".")+1)]}function yb(a,b,c){function e(){c?c():d('Loading data file "'+a+'" failed.')}var f=new XMLHttpRequest;f.open("GET",a,i),f.responseType="arraybuffer",f.onload=function(){if(200==f.status||0==f.status&&f.response){var c=f.response;w(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),b(new Uint8Array(c)),Za()}else e()},f.onerror=e,f.send(k),Ya()}function ec(){var a=p.canvas;dc.forEach(function(b){b(a.width,a.height)})}function fc(a,b,c){b&&c?(a.ae=b,a.Ad=c):(b=a.ae,c=a.Ad);var e=b,f=c;if(p.forcedAspectRatio&&0<p.forcedAspectRatio&&(e/f<p.forcedAspectRatio?e=Math.round(f*p.forcedAspectRatio):f=Math.round(e/p.forcedAspectRatio)),(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===a.parentNode&&"undefined"!=typeof screen)var h=Math.min(screen.width/e,screen.height/f),e=Math.round(e*h),f=Math.round(f*h);ac?(a.width!=e&&(a.width=e),a.height!=f&&(a.height=f),"undefined"!=typeof a.style&&(a.style.removeProperty("width"),a.style.removeProperty("height"))):(a.width!=b&&(a.width=b),a.height!=c&&(a.height=c),"undefined"!=typeof a.style&&(e!=b||f!=c?(a.style.setProperty("width",e+"px","important"),a.style.setProperty("height",f+"px","important")):(a.style.removeProperty("width"),a.style.removeProperty("height"))))}function ia(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function mc(a){function b(){if(!p.calledRun&&(p.calledRun=i,!H)){if(Sa||(Sa=i,Na(R)),Na(Pa),ba&&jc!==k&&p.fa("pre-main prep time: "+(Date.now()-jc)+" ms"),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p._main&&lc&&p.callMain(a),p.postRun)for("function"==typeof p.postRun&&(p.postRun=[p.postRun]);p.postRun.length;)Ua(p.postRun.shift());Na(Ra)}}if(a=a||p.arguments,jc===k&&(jc=Date.now()),!(0<S)){if(p.preRun)for("function"==typeof p.preRun&&(p.preRun=[p.preRun]);p.preRun.length;)Ta(p.preRun.shift());Na(Oa),!(0<S)&&!p.calledRun&&(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),b()},1)):b())}}function nc(a){p.noExitRuntime||(H=i,y=ic,Na(Qa),t?(process.stdout.once("drain",function(){process.exit(a)}),console.log(" "),setTimeout(function(){process.exit(a)},500)):da&&"function"==typeof quit&&quit(a),d(new ia(a)))}function A(a){a&&(p.print(a),p.fa(a)),H=i,d("abort() at "+Fa()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.")}var windowBak;"undefined"!=typeof window&&(windowBak=window);var window={_broadwayOnHeadersDecoded:_broadwayOnHeadersDecoded,_broadwayOnPictureDecoded:_broadwayOnPictureDecoded},g=void 0,i=!0,k=null,m=!1,p;p||(p=eval("(function() { try { return Module || {} } catch(e) { return {} } })()"));var aa={},r;for(r in p)p.hasOwnProperty(r)&&(aa[r]=p[r]);var t="object"==typeof process&&"function"==typeof require,ba="object"==typeof window,ca="function"==typeof importScripts,da=!ba&&!t&&!ca;if(t){p.print||(p.print=function(a){process.stdout.write(a+"\n")}),p.printErr||(p.printErr=function(a){process.stderr.write(a+"\n")});var fa=require("fs"),ga=require("path");p.read=function(a,b){var a=ga.normalize(a),c=fa.readFileSync(a);return!c&&a!=ga.resolve(a)&&(a=path.join(__dirname,"..","src",a),c=fa.readFileSync(a)),c&&!b&&(c=c.toString()),c},p.readBinary=function(a){return p.read(a,i)},p.load=function(a){ha(read(a))},p.thisProgram=1<process.argv.length?process.argv[1].replace(/\\/g,"/"):"unknown-program",p.arguments=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=p),process.on("uncaughtException",function(a){a instanceof ia||d(a)})}else da?(p.print||(p.print=print),"undefined"!=typeof printErr&&(p.printErr=printErr),p.read="undefined"!=typeof read?read:function(){d("no read() available (jsc?)")},p.readBinary=function(a){return"function"==typeof readbuffer?new Uint8Array(readbuffer(a)):(a=read(a,"binary"),w("object"==typeof a),a)},"undefined"!=typeof scriptArgs?p.arguments=scriptArgs:"undefined"!=typeof arguments&&(p.arguments=arguments),this.Module=p,eval("if (typeof gc === 'function' && gc.toString().indexOf('[native code]') > 0) var gc = undefined")):ba||ca?(p.read=function(a){var b=new XMLHttpRequest;return b.open("GET",a,m),b.send(k),b.responseText},"undefined"!=typeof arguments&&(p.arguments=arguments),"undefined"!=typeof console?(p.print||(p.print=function(a){console.log(a)}),p.printErr||(p.printErr=function(a){console.log(a)})):p.print||(p.print=n()),ba?window.Module=p:p.load=importScripts):d("Unknown runtime environment. Where are we?");!p.load&&p.read&&(p.load=function(a){ha(p.read(a))}),p.print||(p.print=n()),p.printErr||(p.printErr=p.print),p.arguments||(p.arguments=[]),p.thisProgram||(p.thisProgram="./this.program"),p.print=p.print,p.fa=p.printErr,p.preRun=[],p.postRun=[];for(r in aa)aa.hasOwnProperty(r)&&(p[r]=aa[r]);var z={Yd:function(a){ja=a},xd:function(){return ja},Tb:function(){return y},Sb:function(a){y=a},oc:function(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===a[a.length-1]?z.ia:"i"===a[0]?(a=parseInt(a.substr(1)),w(0===a%8),a/8):0}},vd:function(a){return Math.max(z.oc(a),z.ia)},Qf:16,ng:function(a,b,c){return c||"i64"!=a&&"double"!=a?a?Math.min(b||(a?z.vd(a):0),z.ia):Math.min(b,8):8},Fa:function(a,b,c){return c&&c.length?(c.splice||(c=Array.prototype.slice.call(c)),c.splice(0,0,b),p["dynCall_"+a].apply(k,c)):p["dynCall_"+a].call(k,b)},eb:[],Vc:function(a){for(var b=0;b<z.eb.length;b++)if(!z.eb[b])return z.eb[b]=a,2*(1+b);d("Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.")},Sd:function(a){z.eb[(a-2)/2]=k},og:function(a,b){z.wb||(z.wb={});var c=z.wb[a];if(c)return c;for(var c=[],e=0;e<b;e++)c.push(String.fromCharCode(36)+e);e=ka(a),'"'===e[0]&&(e.indexOf('"',1)===e.length-1?e=e.substr(1,e.length-2):A("invalid EM_ASM input |"+e+"|. Please use EM_ASM(..code..) (no quotes) or EM_ASM({ ..code($0).. }, input) (to input values)"));try{var f=eval("(function(Module, FS) { return function("+c.join(",")+"){ "+e+" } })")(p,"undefined"!=typeof B?B:k)}catch(h){p.fa("error in executing inline EM_ASM code: "+h+" on: \n\n"+e+"\n\nwith args |"+c+"| (make sure to use the right one out of EM_ASM, EM_ASM_ARGS, etc.)"),d(h)}return z.wb[a]=f},Aa:function(a){z.Aa.Rb||(z.Aa.Rb={}),z.Aa.Rb[a]||(z.Aa.Rb[a]=1,p.fa(a))},Cb:{},rg:function(a,b){w(b),z.Cb[b]||(z.Cb[b]={});var c=z.Cb[b];return c[a]||(c[a]=function(){return z.Fa(b,a,arguments)}),c[a]},Da:function(){var a=[],b=0;this.nb=function(c){if(c&=255,0==a.length)return 0==(128&c)?String.fromCharCode(c):(a.push(c),b=192==(224&c)?1:224==(240&c)?2:3,"");if(b&&(a.push(c),b--,0<b))return"";var c=a[0],e=a[1],f=a[2],h=a[3];return 2==a.length?c=String.fromCharCode((31&c)<<6|63&e):3==a.length?c=String.fromCharCode((15&c)<<12|(63&e)<<6|63&f):(c=(7&c)<<18|(63&e)<<12|(63&f)<<6|63&h,c=String.fromCharCode(((c-65536)/1024|0)+55296,(c-65536)%1024+56320)),a.length=0,c},this.Ac=function(a){for(var a=unescape(encodeURIComponent(a)),b=[],f=0;f<a.length;f++)b.push(a.charCodeAt(f));return b}},pg:function(){d("You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work")},pb:function(a){var b=y;return y=y+a|0,y=y+15&-16,b},Ec:function(a){var b=D;return D=D+a|0,D=D+15&-16,b},bb:function(a){var b=E;return E=E+a|0,E=E+15&-16,E>=F&&A("Cannot enlarge memory arrays. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value "+F+", (2) compile with ALLOW_MEMORY_GROWTH which adjusts the size at runtime but prevents some optimizations, or (3) set Module.TOTAL_MEMORY before the program runs."),b},ub:function(a,b){return Math.ceil(a/(b?b:16))*(b?b:16)},Fg:function(a,b,c){return c?+(a>>>0)+4294967296*+(b>>>0):+(a>>>0)+4294967296*+(0|b)},Pc:8,ia:4,Rf:0};p.Runtime=z,z.addFunction=z.Vc,z.removeFunction=z.Sd;var H=m,la,ma,ja,oa,pa;!function(){function a(a){return a=a.toString().match(e).slice(1),{arguments:a[0],body:a[1],returnValue:a[2]}}var b={stackSave:function(){z.Tb()},stackRestore:function(){z.Sb()},arrayToC:function(a){var b=z.pb(a.length);return qa(a,b),b},stringToC:function(a){var b=0;return a!==k&&a!==g&&0!==a&&(b=z.pb((a.length<<2)+1),ra(a,b)),b}},c={string:b.stringToC,array:b.arrayToC};pa=function(a,b,e,f){var h=na(a),s=[],a=0;if(f)for(var v=0;v<f.length;v++){var G=c[e[v]];G?(0===a&&(a=z.Tb()),s[v]=G(f[v])):s[v]=f[v]}return e=h.apply(k,s),"string"===b&&(e=ka(e)),0!==a&&z.Sb(a),e};var e=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,f={},h;for(h in b)b.hasOwnProperty(h)&&(f[h]=a(b[h]));oa=function(b,c,e){var e=e||[],h=na(b),b=e.every(function(a){return"number"===a}),x="string"!==c;if(x&&b)return h;var s=e.map(function(a,b){return"$"+b}),c="(function("+s.join(",")+") {",v=e.length;if(!b)for(var c=c+("var stack = "+f.stackSave.body+";"),G=0;G<v;G++){var ua=s[G],ea=e[G];"number"!==ea&&(ea=f[ea+"ToC"],c+="var "+ea.arguments+" = "+ua+";",c+=ea.body+";",c+=ua+"="+ea.returnValue+";")}return e=a(function(){return h}).returnValue,c+="var ret = "+e+"("+s.join(",")+");",x||(e=a(function(){return ka}).returnValue,c+="ret = "+e+"(ret);"),b||(c+=f.stackRestore.body.replace("()","(stack)")+";"),eval(c+"return ret})")}}(),p.cwrap=oa,p.ccall=pa,p.setValue=sa,p.getValue=Aa;var L=2,Ba=4;p.ALLOC_NORMAL=0,p.ALLOC_STACK=1,p.ALLOC_STATIC=L,p.ALLOC_DYNAMIC=3,p.ALLOC_NONE=Ba,p.allocate=M,p.Pointer_stringify=ka,p.UTF16ToString=function(a){for(var b=0,c="";;){var e=J[a+2*b>>1];if(0==e)return c;++b,c+=String.fromCharCode(e)}},p.stringToUTF16=function(a,b){for(var c=0;c<a.length;++c)J[b+2*c>>1]=a.charCodeAt(c);J[b+2*a.length>>1]=0},p.UTF32ToString=function(a){for(var b=0,c="";;){var e=K[a+4*b>>2];if(0==e)return c;++b,65536<=e?(e-=65536,c+=String.fromCharCode(55296|e>>10,56320|1023&e)):c+=String.fromCharCode(e)}},p.stringToUTF32=function(a,b){for(var c=0,e=0;e<a.length;++e){var f=a.charCodeAt(e);if(55296<=f&&57343>=f)var h=a.charCodeAt(++e),f=65536+((1023&f)<<10)|1023&h;K[b+4*c>>2]=f,++c}K[b+4*c>>2]=0},p.stackTrace=function(){return Fa()};for(var I,N,J,Ga,K,Ha,ya,za,Ia=0,D=0,Ja=0,y=0,Ka=0,La=0,E=0,Ma=p.TOTAL_STACK||5242880,F=p.TOTAL_MEMORY||52428800,O=65536;O<F||O<2*Ma;)O=16777216>O?2*O:O+16777216;O!==F&&(p.fa("increasing TOTAL_MEMORY to "+O+" to be compliant with the asm.js spec"),F=O),w("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var Q=new ArrayBuffer(F);I=new Int8Array(Q),J=new Int16Array(Q),K=new Int32Array(Q),N=new Uint8Array(Q),Ga=new Uint16Array(Q),Ha=new Uint32Array(Q),ya=new Float32Array(Q),za=new Float64Array(Q),K[0]=255,w(255===N[0]&&0===N[3],"Typed arrays 2 must be run on a little-endian system"),p.HEAP=g,p.buffer=Q,p.HEAP8=I,p.HEAP16=J,p.HEAP32=K,p.HEAPU8=N,p.HEAPU16=Ga,p.HEAPU32=Ha,p.HEAPF32=ya,p.HEAPF64=za;var Oa=[],R=[],Pa=[],Qa=[],Ra=[],Sa=m;p.addOnPreRun=p.Xf=Ta,p.addOnInit=p.Uf=function(a){R.unshift(a)},p.addOnPreMain=p.Wf=function(a){Pa.unshift(a)},p.addOnExit=p.Tf=function(a){Qa.unshift(a)},p.addOnPostRun=p.Vf=Ua,p.intArrayFromString=Va,p.intArrayToString=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];255<e&&(e&=255),b.push(String.fromCharCode(e))}return b.join("")},p.writeStringToMemory=ra,p.writeArrayToMemory=qa,p.writeAsciiToMemory=function(a,b,c){for(var e=0;e<a.length;e++)I[b+e>>0]=a.charCodeAt(e);c||(I[b+a.length>>0]=0)},Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(a,b){var c=65535&a,e=65535&b;return c*e+((a>>>16)*e+c*(b>>>16)<<16)|0}),Math.vg=Math.imul;var ta=Math.abs,xa=Math.ceil,wa=Math.floor,va=Math.min,S=0,Wa=k,Xa=k;p.addRunDependency=Ya,p.removeRunDependency=Za,p.preloadedImages={},p.preloadedAudios={};var T=k,Ia=8,D=Ia+7808;R.push(),M([0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,0,0,0,0,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,0,0,0,0,10,0,0,0,13,0,0,0,16,0,0,0,11,0,0,0,14,0,0,0,18,0,0,0,13,0,0,0,16,0,0,0,20,0,0,0,14,0,0,0,18,0,0,0,23,0,0,0,16,0,0,0,20,0,0,0,25,0,0,0,18,0,0,0,23,0,0,0,29,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,7,0,0,0,8,0,0,0,9,0,0,0,10,0,0,0,11,0,0,0,12,0,0,0,13,0,0,0,14,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,18,0,0,0,19,0,0,0,20,0,0,0,21,0,0,0,22,0,0,0,23,0,0,0,24,0,0,0,25,0,0,0,26,0,0,0,27,0,0,0,28,0,0,0,29,0,0,0,29,0,0,0,30,0,0,0,31,0,0,0,32,0,0,0,32,0,0,0,33,0,0,0,34,0,0,0,34,0,0,0,35,0,0,0,35,0,0,0,36,0,0,0,36,0,0,0,37,0,0,0,37,0,0,0,37,0,0,0,38,0,0,0,38,0,0,0,38,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,39,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,128,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,1,0,0,0,4,0,0,0,5,0,0,0,2,0,0,0,3,0,0,0,6,0,0,0,7,0,0,0,8,0,0,0,9,0,0,0,12,0,0,0,13,0,0,0,10,0,0,0,11,0,0,0,14,0,0,0,15,0,0,0,47,31,15,0,23,27,29,30,7,11,13,14,39,43,45,46,16,3,5,10,12,19,21,26,28,35,37,42,44,1,2,4,8,17,18,20,24,6,9,22,25,32,33,34,36,40,38,41,0,16,1,2,4,8,32,3,5,10,12,15,47,7,11,13,14,6,9,31,35,37,42,44,33,34,36,40,39,43,45,46,17,18,20,24,19,21,26,28,23,27,29,30,22,25,38,41,17,1,0,0,0,0,0,0,34,18,1,1,0,0,0,0,50,34,18,2,0,0,0,0,67,51,34,34,18,18,2,2,83,67,51,35,18,18,2,2,19,35,67,51,99,83,2,2,0,0,101,85,68,68,52,52,35,35,35,35,19,19,19,19,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,249,233,217,200,200,184,184,167,167,167,167,151,151,151,151,134,134,134,134,134,134,134,134,118,118,118,118,118,118,118,118,230,214,198,182,165,165,149,149,132,132,132,132,116,116,116,116,100,100,100,100,84,84,84,84,67,67,67,67,67,67,67,67,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,19,19,19,19,19,19,19,19,3,3,3,3,3,3,3,3,214,182,197,197,165,165,149,149,132,132,132,132,84,84,84,84,68,68,68,68,4,4,4,4,115,115,115,115,115,115,115,115,99,99,99,99,99,99,99,99,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,19,19,19,19,19,19,19,19,197,181,165,5,148,148,116,116,52,52,36,36,131,131,131,131,99,99,99,99,83,83,83,83,67,67,67,67,19,19,19,19,181,149,164,164,132,132,36,36,20,20,4,4,115,115,115,115,99,99,99,99,83,83,83,83,67,67,67,67,51,51,51,51,166,6,21,21,132,132,132,132,147,147,147,147,147,147,147,147,115,115,115,115,115,115,115,115,99,99,99,99,99,99,99,99,83,83,83,83,83,83,83,83,67,67,67,67,67,67,67,67,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,150,6,21,21,116,116,116,116,131,131,131,131,131,131,131,131,99,99,99,99,99,99,99,99,67,67,67,67,67,67,67,67,51,51,51,51,51,51,51,51,35,35,35,35,35,35,35,35,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,134,6,37,37,20,20,20,20,115,115,115,115,115,115,115,115,99,99,99,99,99,99,99,99,51,51,51,51,51,51,51,51,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,22,6,117,117,36,36,36,36,83,83,83,83,83,83,83,83,98,98,98,98,98,98,98,98,98,98,98,98,98,98,98,98,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,21,5,100,100,35,35,35,35,82,82,82,82,82,82,82,82,66,66,66,66,66,66,66,66,50,50,50,50,50,50,50,50,4,20,35,35,51,51,83,83,65,65,65,65,65,65,65,65,4,20,67,67,34,34,34,34,49,49,49,49,49,49,49,49,3,19,50,50,33,33,33,33,2,18,33,33,0,0,0,0,0,0,0,0,0,0,102,32,38,16,6,8,101,24,101,24,67,16,67,16,67,16,67,16,67,16,67,16,67,16,67,16,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,34,8,0,0,0,0,0,0,0,0,106,64,74,48,42,40,10,32,105,56,105,56,73,40,73,40,41,32,41,32,9,24,9,24,104,48,104,48,104,48,104,48,72,32,72,32,72,32,72,32,40,24,40,24,40,24,40,24,8,16,8,16,8,16,8,16,103,40,103,40,103,40,103,40,103,40,103,40,103,40,103,40,71,24,71,24,71,24,71,24,71,24,71,24,71,24,71,24,110,96,78,88,46,80,14,80,110,88,78,80,46,72,14,72,13,64,13,64,77,72,77,72,45,64,45,64,13,56,13,56,109,80,109,80,77,64,77,64,45,56,45,56,13,48,13,48,107,72,107,72,107,72,107,72,107,72,107,72,107,72,107,72,75,56,75,56,75,56,75,56,75,56,75,56,75,56,75,56,43,48,43,48,43,48,43,48,43,48,43,48,43,48,43,48,11,40,11,40,11,40,11,40,11,40,11,40,11,40,11,40,0,0,0,0,47,104,47,104,16,128,80,128,48,128,16,120,112,128,80,120,48,120,16,112,112,120,80,112,48,112,16,104,111,112,111,112,79,104,79,104,47,96,47,96,15,96,15,96,111,104,111,104,79,96,79,96,47,88,47,88,15,88,15,88,0,0,0,0,0,0,0,0,102,56,70,32,38,32,6,16,102,48,70,24,38,24,6,8,101,40,101,40,37,16,37,16,100,32,100,32,100,32,100,32,100,24,100,24,100,24,100,24,67,16,67,16,67,16,67,16,67,16,67,16,67,16,67,16,0,0,0,0,0,0,0,0,105,72,73,56,41,56,9,48,8,40,8,40,72,48,72,48,40,48,40,48,8,32,8,32,103,64,103,64,103,64,103,64,71,40,71,40,71,40,71,40,39,40,39,40,39,40,39,40,7,24,7,24,7,24,7,24,0,0,0,0,109,120,109,120,110,128,78,128,46,128,14,128,46,120,14,120,78,120,46,112,77,112,77,112,13,112,13,112,109,112,109,112,77,104,77,104,45,104,45,104,13,104,13,104,109,104,109,104,77,96,77,96,45,96,45,96,13,96,13,96,12,88,12,88,12,88,12,88,76,88,76,88,76,88,76,88,44,88,44,88,44,88,44,88,12,80,12,80,12,80,12,80,108,96,108,96,108,96,108,96,76,80,76,80,76,80,76,80,44,80,44,80,44,80,44,80,12,72,12,72,12,72,12,72,107,88,107,88,107,88,107,88,107,88,107,88,107,88,107,88,75,72,75,72,75,72,75,72,75,72,75,72,75,72,75,72,43,72,43,72,43,72,43,72,43,72,43,72,43,72,43,72,11,64,11,64,11,64,11,64,11,64,11,64,11,64,11,64,107,80,107,80,107,80,107,80,107,80,107,80,107,80,107,80,75,64,75,64,75,64,75,64,75,64,75,64,75,64,75,64,43,64,43,64,43,64,43,64,43,64,43,64,43,64,43,64,11,56,11,56,11,56,11,56,11,56,11,56,11,56,11,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,24,70,56,38,56,6,16,102,72,70,48,38,48,6,8,37,40,37,40,69,40,69,40,37,32,37,32,69,32,69,32,37,24,37,24,101,64,101,64,69,24,69,24,37,16,37,16,100,56,100,56,100,56,100,56,100,48,100,48,100,48,100,48,100,40,100,40,100,40,100,40,100,32,100,32,100,32,100,32,100,24,100,24,100,24,100,24,68,16,68,16,68,16,68,16,36,8,36,8,36,8,36,8,4,0,4,0,4,0,4,0,0,0,10,128,106,128,74,128,42,128,10,120,106,120,74,120,42,120,10,112,106,112,74,112,42,112,10,104,41,104,41,104,9,96,9,96,73,104,73,104,41,96,41,96,9,88,9,88,105,104,105,104,73,96,73,96,41,88,41,88,9,80,9,80,104,96,104,96,104,96,104,96,72,88,72,88,72,88,72,88,40,80,40,80,40,80,40,80,8,72,8,72,8,72,8,72,104,88,104,88,104,88,104,88,72,80,72,80,72,80,72,80,40,72,40,72,40,72,40,72,8,64,8,64,8,64,8,64,7,56,7,56,7,56,7,56,7,56,7,56,7,56,7,56,7,48,7,48,7,48,7,48,7,48,7,48,7,48,7,48,71,72,71,72,71,72,71,72,71,72,71,72,71,72,71,72,7,40,7,40,7,40,7,40,7,40,7,40,7,40,7,40,103,80,103,80,103,80,103,80,103,80,103,80,103,80,103,80,71,64,71,64,71,64,71,64,71,64,71,64,71,64,71,64,39,64,39,64,39,64,39,64,39,64,39,64,39,64,39,64,7,32,7,32,7,32,7,32,7,32,7,32,7,32,7,32,6,8,38,8,0,0,6,0,6,16,38,16,70,16,0,0,6,24,38,24,70,24,102,24,6,32,38,32,70,32,102,32,6,40,38,40,70,40,102,40,6,48,38,48,70,48,102,48,6,56,38,56,70,56,102,56,6,64,38,64,70,64,102,64,6,72,38,72,70,72,102,72,6,80,38,80,70,80,102,80,6,88,38,88,70,88,102,88,6,96,38,96,70,96,102,96,6,104,38,104,70,104,102,104,6,112,38,112,70,112,102,112,6,120,38,120,70,120,102,120,6,128,38,128,70,128,102,128,0,0,67,16,2,0,2,0,33,8,33,8,33,8,33,8,103,32,103,32,72,32,40,32,71,24,71,24,39,24,39,24,6,32,6,32,6,32,6,32,6,24,6,24,6,24,6,24,6,16,6,16,6,16,6,16,102,24,102,24,102,24,102,24,38,16,38,16,38,16,38,16,6,8,6,8,6,8,6,8,3,0,0,0,15,0,0,0,1,0,0,0,10,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,3,0,0,0,19,0,0,0,1,0,0,0,18,0,0,0,0,0,0,0,17,0,0,0,4,0,0,0,16,0,0,0,3,0,0,0,23,0,0,0,1,0,0,0,22,0,0,0,0,0,0,0,21,0,0,0,4,0,0,0,20,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,4,0,0,0,1,0,0,0,15,0,0,0,2,0,0,0,10,0,0,0,4,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,12,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,2,0,0,0,4,0,0,0,13,0,0,0,255,0,0,0,8,0,0,0,1,0,0,0,19,0,0,0,2,0,0,0,18,0,0,0,4,0,0,0,17,0,0,0,255,0,0,0,16,0,0,0,1,0,0,0,23,0,0,0,2,0,0,0,22,0,0,0,4,0,0,0,21,0,0,0,255,0,0,0,20,0,0,0,1,0,0,0,10,0,0,0,1,0,0,0,11,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,1,0,0,0,14,0,0,0,1,0,0,0,15,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,5,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,7,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,13,0,0,0,1,0,0,0,18,0,0,0,1,0,0,0,19,0,0,0,4,0,0,0,16,0,0,0,4,0,0,0,17,0,0,0,1,0,0,0,22,0,0,0,1,0,0,0,23,0,0,0,4,0,0,0,20,0,0,0,4,0,0,0,21,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,0,0,0,0,15,0,0,0,4,0,0,0,10,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,11,0,0,0,4,0,0,0,14,0,0,0,0,0,0,0,17,0,0,0,4,0,0,0,16,0,0,0,0,0,0,0,19,0,0,0,4,0,0,0,18,0,0,0,0,0,0,0,21,0,0,0,4,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,4,0,0,0,22,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,8,0,0,0,12,0,0,0,8,0,0,0,12,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,8,0,0,0,12,0,0,0,8,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,8,0,0,0,8,0,0,0,12,0,0,0,12,0,0,0,8,0,0,0,8,0,0,0,12,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,3,0,0,0,15,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,3,0,0,0,15,0,0,0,0,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,3,0,0,0,15,0,0,0,1,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,3,0,0,0,15,0,0,0,1,0,0,0,10,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,7,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,13,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,3,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,4,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,4,0,0,0,2,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,2,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,15,0,0,0,2,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,15,0,0,0,2,0,0,0,10,0,0,0,4,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,12,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,12,0,0,0,255,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,2,0,0,0,255,0,0,0,8,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,2,0,0,0,4,0,0,0,13,0,0,0,255,0,0,0,8,0,0,0,1,0,0,0,10,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,10,0,0,0,4,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,10,0,0,0,1,0,0,0,11,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,10,0,0,0,1,0,0,0,11,0,0,0,4,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,1,0,0,0,14,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,4,0,0,0,4,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,1,0,0,0,15,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,1,0,0,0,15,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,5,0,0,0,4,0,0,0,2,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,3,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,6,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,12,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,7,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,6,0,0,0,4,0,0,0,7,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,13,0,0,0,0,0,0,0,5,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,7,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,4,0,0,0,2,0,0,0,4,0,0,0,1,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,3,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,1,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,6,0,0,0,0,0,0,0,13,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,0,0,0,0,15,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,0,0,0,8,0,0,0,0,0,0,0,15,0,0,0,4,0,0,0,10,0,0,0,4,0,0,0,9,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,11,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,4,0,0,0,9,0,0,0,4,0,0,0,12,0,0,0,4,0,0,0,11,0,0,0,4,0,0,0,14,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,7,0,0,0,8,0,0,0,9,0,0,0,10,0,0,0,11,0,0,0,12,0,0,0,13,0,0,0,14,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,5,6,7,8,9,10,12,13,15,17,20,22,25,28,32,36,40,45,50,56,63,71,80,90,101,113,127,144,162,182,203,226,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,3,3,3,3,4,4,4,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,1,2,1,2,3,1,2,3,2,2,3,2,2,4,2,3,4,2,3,4,3,3,5,3,4,6,3,4,6,4,5,7,4,5,8,4,6,9,5,7,10,6,8,11,6,8,13,7,10,14,8,11,16,9,12,18,10,13,20,11,15,23,13,17,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,69,67,79,68,69,82,32,73,78,73,84,73,65,76,73,90,65,84,73,79,78,32,70,65,73,76,69,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",Ba,z.Pc);
var $a=z.ub(M(12,"i8",L),8);w(0==$a%8);var U={O:1,Q:2,Ef:3,De:4,ha:5,Zb:6,be:7,$e:8,V:9,oe:10,Ca:11,Of:11,Mc:12,qb:13,ye:14,mf:15,ga:16,Xb:17,Oc:18,Qa:19,Sa:20,pa:21,B:22,Ve:23,Lc:24,Nc:25,Lf:26,ze:27,hf:28,Ua:29,Bf:30,Oe:31,uf:32,ve:33,yf:34,df:42,Be:43,pe:44,Fe:45,Ge:46,He:47,Ne:48,Mf:49,Ye:50,Ee:51,te:35,af:37,ge:52,je:53,Pf:54,We:55,ke:56,le:57,ue:35,me:59,kf:60,Ze:61,If:62,jf:63,ef:64,ff:65,Af:66,bf:67,ee:68,Ff:69,qe:70,vf:71,Qe:72,we:73,ie:74,qf:76,he:77,zf:78,Ie:79,Je:80,Me:81,Le:82,Ke:83,lf:38,sb:39,Re:36,rb:40,Ta:95,tf:96,se:104,Xe:105,fe:97,xf:91,of:88,gf:92,Cf:108,Wb:111,ce:98,re:103,Ue:101,Se:100,Jf:110,Ae:112,Yb:113,Jc:115,Hc:114,Ic:89,Pe:90,wf:93,Df:94,de:99,Te:102,Kc:106,Ra:107,Kf:109,Nf:87,xe:122,Gf:116,pf:95,cf:123,Ce:84,rf:75,ne:125,nf:131,sf:130,Hf:86},ab={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},bb=0,ib=[],kb={open:function(a){var b=ib[a.g.ob];b||d(new B.e(U.Qa)),a.N=b,a.seekable=m},close:function(a){a.N.sa.flush(a.N)},flush:function(a){a.N.sa.flush(a.N)},M:function(a,b,c,e){(!a.N||!a.N.sa.rc)&&d(new B.e(U.Zb));for(var f=0,h=0;h<e;h++){var j;try{j=a.N.sa.rc(a.N)}catch(l){d(new B.e(U.ha))}if(j===g&&0===f&&d(new B.e(U.Ca)),j===k||j===g)break;f++,b[c+h]=j}return f&&(a.g.timestamp=Date.now()),f},write:function(a,b,c,e){(!a.N||!a.N.sa.Lb)&&d(new B.e(U.Zb));for(var f=0;f<e;f++)try{a.N.sa.Lb(a.N,b[c+f])}catch(h){d(new B.e(U.ha))}return e&&(a.g.timestamp=Date.now()),f}},mb={rc:function(a){if(!a.input.length){var b=k;if(t){if(b=process.stdin.read(),!b){if(process.stdin._readableState&&process.stdin._readableState.ended)return k;return}}else"undefined"!=typeof window&&"function"==typeof window.prompt?(b=window.prompt("Input: "),b!==k&&(b+="\n")):"function"==typeof readline&&(b=readline(),b!==k&&(b+="\n"));if(!b)return k;a.input=Va(b,i)}return a.input.shift()},flush:function(a){a.K&&0<a.K.length&&(p.print(a.K.join("")),a.K=[])},Lb:function(a,b){b===k||10===b?(p.print(a.K.join("")),a.K=[]):a.K.push(lb.nb(b))}},nb={Lb:function(a,b){b===k||10===b?(p.printErr(a.K.join("")),a.K=[]):a.K.push(lb.nb(b))},flush:function(a){a.K&&0<a.K.length&&(p.printErr(a.K.join("")),a.K=[])}},Y={U:k,F:function(){return Y.createNode(k,"/",16895,0)},createNode:function(a,b,c,e){return(B.Bd(c)||B.Cd(c))&&d(new B.e(U.O)),Y.U||(Y.U={dir:{g:{S:Y.n.S,I:Y.n.I,ra:Y.n.ra,ba:Y.n.ba,rename:Y.n.rename,za:Y.n.za,Oa:Y.n.Oa,Na:Y.n.Na,ca:Y.n.ca},A:{$:Y.p.$}},file:{g:{S:Y.n.S,I:Y.n.I},A:{$:Y.p.$,M:Y.p.M,write:Y.p.write,Ea:Y.p.Ea,Ja:Y.p.Ja}},link:{g:{S:Y.n.S,I:Y.n.I,ta:Y.n.ta},A:{}},ec:{g:{S:Y.n.S,I:Y.n.I},A:B.bd}}),c=B.createNode(a,b,c,e),B.J(c.mode)?(c.n=Y.U.dir.g,c.p=Y.U.dir.A,c.k={}):B.isFile(c.mode)?(c.n=Y.U.file.g,c.p=Y.U.file.A,c.q=0,c.k=k):B.Ia(c.mode)?(c.n=Y.U.link.g,c.p=Y.U.link.A):B.ib(c.mode)&&(c.n=Y.U.ec.g,c.p=Y.U.ec.A),c.timestamp=Date.now(),a&&(a.k[b]=c),c},ud:function(a){if(a.k&&a.k.subarray){for(var b=[],c=0;c<a.q;++c)b.push(a.k[c]);return b}return a.k},qg:function(a){return a.k?a.k.subarray?a.k.subarray(0,a.q):new Uint8Array(a.k):new Uint8Array},lc:function(a,b){if(a.k&&a.k.subarray&&b>a.k.length&&(a.k=Y.ud(a),a.q=a.k.length),!a.k||a.k.subarray){var c=a.k?a.k.buffer.byteLength:0;c>=b||(b=Math.max(b,c*(1048576>c?2:1.125)|0),0!=c&&(b=Math.max(b,256)),c=a.k,a.k=new Uint8Array(b),0<a.q&&a.k.set(c.subarray(0,a.q),0))}else for(!a.k&&0<b&&(a.k=[]);a.k.length<b;)a.k.push(0)},Ud:function(a,b){if(a.q!=b)if(0==b)a.k=k,a.q=0;else{if(!a.k||a.k.subarray){var c=a.k;a.k=new Uint8Array(new ArrayBuffer(b)),c&&a.k.set(c.subarray(0,Math.min(b,a.q)))}else if(a.k||(a.k=[]),a.k.length>b)a.k.length=b;else for(;a.k.length<b;)a.k.push(0);a.q=b}},n:{S:function(a){var b={};return b.gg=B.ib(a.mode)?a.id:1,b.wg=a.id,b.mode=a.mode,b.Ig=1,b.uid=0,b.ug=0,b.ob=a.ob,b.size=B.J(a.mode)?4096:B.isFile(a.mode)?a.q:B.Ia(a.mode)?a.link.length:0,b.Zf=new Date(a.timestamp),b.Hg=new Date(a.timestamp),b.eg=new Date(a.timestamp),b.Zc=4096,b.$f=Math.ceil(b.size/b.Zc),b},I:function(a,b){b.mode!==g&&(a.mode=b.mode),b.timestamp!==g&&(a.timestamp=b.timestamp),b.size!==g&&Y.Ud(a,b.size)},ra:function(){d(B.Db[U.Q])},ba:function(a,b,c,e){return Y.createNode(a,b,c,e)},rename:function(a,b,c){if(B.J(a.mode)){var e;try{e=B.aa(b,c)}catch(f){}if(e)for(var h in e.k)d(new B.e(U.sb))}delete a.parent.k[a.name],a.name=c,b.k[c]=a,a.parent=b},za:function(a,b){delete a.k[b]},Oa:function(a,b){var e,c=B.aa(a,b);for(e in c.k)d(new B.e(U.sb));delete a.k[b]},Na:function(a){var c,b=[".",".."];for(c in a.k)a.k.hasOwnProperty(c)&&b.push(c);return b},ca:function(a,b,c){return a=Y.createNode(a,b,41471,0),a.link=c,a},ta:function(a){return B.Ia(a.mode)||d(new B.e(U.B)),a.link}},p:{M:function(a,b,c,e,f){var h=a.g.k;if(f>=a.g.q)return 0;if(a=Math.min(a.g.q-f,e),w(0<=a),8<a&&h.subarray)b.set(h.subarray(f,f+a),c);else for(e=0;e<a;e++)b[c+e]=h[f+e];return a},write:function(a,b,c,e,f,h){if(!e)return 0;if(a=a.g,a.timestamp=Date.now(),b.subarray&&(!a.k||a.k.subarray)){if(h)return a.k=b.subarray(c,c+e),a.q=e;if(0===a.q&&0===f)return a.k=new Uint8Array(b.subarray(c,c+e)),a.q=e;if(f+e<=a.q)return a.k.set(b.subarray(c,c+e),f),e}if(Y.lc(a,f+e),a.k.subarray&&b.subarray)a.k.set(b.subarray(c,c+e),f);else for(h=0;h<e;h++)a.k[f+h]=b[c+h];return a.q=Math.max(a.q,f+e),e},$:function(a,b,c){return 1===c?b+=a.position:2===c&&B.isFile(a.g.mode)&&(b+=a.g.q),0>b&&d(new B.e(U.B)),b},Ea:function(a,b,c){Y.lc(a.g,b+c),a.g.q=Math.max(a.g.q,b+c)},Ja:function(a,b,c,e,f,h,j){return B.isFile(a.g.mode)||d(new B.e(U.Qa)),c=a.g.k,2&j||c.buffer!==b&&c.buffer!==b.buffer?((0<f||f+e<a.g.q)&&(c=c.subarray?c.subarray(f,f+e):Array.prototype.slice.call(c,f,f+e)),a=i,(e=Ca(e))||d(new B.e(U.Mc)),b.set(c,e)):(a=m,e=c.byteOffset),{Lg:e,Yf:a}}}},ob=M(1,"i32*",L),pb=M(1,"i32*",L),qb=M(1,"i32*",L),B={root:k,La:[],ic:[k],oa:[],Jd:1,T:k,hc:"/",hb:m,vc:i,H:{},Gc:{yc:{Rc:1,Sc:2}},e:k,Db:{},sc:function(a){return a instanceof B.e||d(a+" : "+Fa()),V(a.cb)},u:function(a,b){if(a=gb(B.yb(),a),b=b||{},!a)return{path:"",g:k};var e,c={Bb:i,Nb:0};for(e in c)b[e]===g&&(b[e]=c[e]);8<b.Nb&&d(new B.e(U.rb));var c=cb(a.split("/").filter(function(a){return!!a}),m),f=B.root;e="/";for(var h=0;h<c.length;h++){var j=h===c.length-1;if(j&&b.parent)break;if(f=B.aa(f,c[h]),e=X(e,c[h]),B.ka(f)&&(!j||j&&b.Bb)&&(f=f.Ka.root),!j||b.R)for(j=0;B.Ia(f.mode);)f=B.ta(e),e=gb(eb(e),f),f=B.u(e,{Nb:b.Nb}).g,40<j++&&d(new B.e(U.rb))}return{path:e,g:f}},da:function(a){for(var b;;){if(B.jb(a))return a=a.F.Id,b?"/"!==a[a.length-1]?a+"/"+b:a+b:a;b=b?a.name+"/"+b:a.name,a=a.parent}},Fb:function(a,b){for(var c=0,e=0;e<b.length;e++)c=(c<<5)-c+b.charCodeAt(e)|0;return(a+c>>>0)%B.T.length},tc:function(a){var b=B.Fb(a.parent.id,a.name);a.ma=B.T[b],B.T[b]=a},uc:function(a){var b=B.Fb(a.parent.id,a.name);if(B.T[b]===a)B.T[b]=a.ma;else for(b=B.T[b];b;){if(b.ma===a){b.ma=a.ma;break}b=b.ma}},aa:function(a,b){var c=B.Gd(a);for(c&&d(new B.e(c,a)),c=B.T[B.Fb(a.id,b)];c;c=c.ma){var e=c.name;if(c.parent.id===a.id&&e===b)return c}return B.ra(a,b)},createNode:function(a,b,c,e){return B.Va||(B.Va=function(a,b,c,e){a||(a=this),this.parent=a,this.F=a.F,this.Ka=k,this.id=B.Jd++,this.name=b,this.mode=c,this.n={},this.p={},this.ob=e},B.Va.prototype={},Object.defineProperties(B.Va.prototype,{M:{get:function(){return 365===(365&this.mode)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(146&this.mode)},set:function(a){a?this.mode|=146:this.mode&=-147}},Dd:{get:function(){return B.J(this.mode)}},Gb:{get:function(){return B.ib(this.mode)}}})),a=new B.Va(a,b,c,e),B.tc(a),a},zb:function(a){B.uc(a)},jb:function(a){return a===a.parent},ka:function(a){return!!a.Ka},isFile:function(a){return 32768===(61440&a)},J:function(a){return 16384===(61440&a)},Ia:function(a){return 40960===(61440&a)},ib:function(a){return 8192===(61440&a)},Bd:function(a){return 24576===(61440&a)},Cd:function(a){return 4096===(61440&a)},Ed:function(a){return 49152===(49152&a)},rd:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},wc:function(a){var b=B.rd[a];return"undefined"==typeof b&&d(Error("Unknown file open mode: "+a)),b},sd:function(a){var b=["r","w","rw"][2097155&a];return 512&a&&(b+="w"),b},na:function(a,b){return B.vc?0:(-1===b.indexOf("r")||292&a.mode)&&(-1===b.indexOf("w")||146&a.mode)&&(-1===b.indexOf("x")||73&a.mode)?0:U.qb},Gd:function(a){var b=B.na(a,"x");return b?b:a.n.ra?0:U.qb},Jb:function(a,b){try{return B.aa(a,b),U.Xb}catch(c){}return B.na(a,"wx")},kb:function(a,b,c){var e;try{e=B.aa(a,b)}catch(f){return f.cb}if(a=B.na(a,"wx"))return a;if(c){if(!B.J(e.mode))return U.Sa;if(B.jb(e)||B.da(e)===B.yb())return U.ga}else if(B.J(e.mode))return U.pa;return 0},Hd:function(a,b){return a?B.Ia(a.mode)?U.rb:B.J(a.mode)&&(0!==(2097155&b)||512&b)?U.pa:B.na(a,B.sd(b)):U.Q},Qc:4096,Kd:function(a,b){for(var b=b||B.Qc,c=a||0;c<=b;c++)if(!B.oa[c])return c;d(new B.e(U.Lc))},qa:function(a){return B.oa[a]},fc:function(a,b,c){B.Wa||(B.Wa=n(),B.Wa.prototype={},Object.defineProperties(B.Wa.prototype,{object:{get:function(){return this.g},set:function(a){this.g=a}},yg:{get:function(){return 1!==(2097155&this.D)}},zg:{get:function(){return 0!==(2097155&this.D)}},xg:{get:function(){return 1024&this.D}}}));var f,e=new B.Wa;for(f in a)e[f]=a[f];return a=e,b=B.Kd(b,c),a.C=b,B.oa[b]=a},dd:function(a){B.oa[a]=k},pc:function(a){return B.oa[a-1]},Eb:function(a){return a?a.C+1:0},bd:{open:function(a){a.p=B.td(a.g.ob).p,a.p.open&&a.p.open(a)},$:function(){d(new B.e(U.Ua))}},Ib:function(a){return a>>8},Gg:function(a){return 255&a},la:function(a,b){return a<<8|b},Ob:function(a,b){B.ic[a]={p:b}},td:function(a){return B.ic[a]},nc:function(a){for(var b=[],a=[a];a.length;){var c=a.pop();b.push(c),a.push.apply(a,c.La)}return b},Fc:function(a,b){function c(a){if(a){if(!c.pd)return c.pd=i,b(a)}else++f>=e.length&&b(k)}"function"==typeof a&&(b=a,a=m);var e=B.nc(B.root.F),f=0;e.forEach(function(b){return b.type.Fc?void b.type.Fc(b,a,c):c(k)})},F:function(a,b,c){var h,e="/"===c,f=!c;return e&&B.root&&d(new B.e(U.ga)),!e&&!f&&(h=B.u(c,{Bb:m}),c=h.path,h=h.g,B.ka(h)&&d(new B.e(U.ga)),B.J(h.mode)||d(new B.e(U.Sa))),b={type:a,Kg:b,Id:c,La:[]},a=a.F(b),a.F=b,b.root=a,e?B.root=a:h&&(h.Ka=b,h.F&&h.F.La.push(b)),a},Qg:function(a){a=B.u(a,{Bb:m}),B.ka(a.g)||d(new B.e(U.B));var a=a.g,b=a.Ka,c=B.nc(b);Object.keys(B.T).forEach(function(a){for(a=B.T[a];a;){var b=a.ma;-1!==c.indexOf(a.F)&&B.zb(a),a=b}}),a.Ka=k,b=a.F.La.indexOf(b),w(-1!==b),a.F.La.splice(b,1)},ra:function(a,b){return a.n.ra(a,b)},ba:function(a,b,c){var e=B.u(a,{parent:i}).g,a=W(a);(!a||"."===a||".."===a)&&d(new B.e(U.B));var f=B.Jb(e,a);return f&&d(new B.e(f)),e.n.ba||d(new B.e(U.O)),e.n.ba(e,a,b,c)},create:function(a,b){return b=4095&(b!==g?b:438),b|=32768,B.ba(a,b,0)},ea:function(a,b){return b=1023&(b!==g?b:511),b|=16384,B.ba(a,b,0)},lb:function(a,b,c){return"undefined"==typeof c&&(c=b,b=438),B.ba(a,8192|b,c)},ca:function(a,b){gb(a)||d(new B.e(U.Q));var c=B.u(b,{parent:i}).g;c||d(new B.e(U.Q));var e=W(b),f=B.Jb(c,e);return f&&d(new B.e(f)),c.n.ca||d(new B.e(U.O)),c.n.ca(c,e,a)},rename:function(a,b){var j,l,u,c=eb(a),e=eb(b),f=W(a),h=W(b);try{j=B.u(a,{parent:i}),l=j.g,j=B.u(b,{parent:i}),u=j.g}catch(q){d(new B.e(U.ga))}(!l||!u)&&d(new B.e(U.Q)),l.F!==u.F&&d(new B.e(U.Oc)),j=B.aa(l,f),e=hb(a,e),"."!==e.charAt(0)&&d(new B.e(U.B)),e=hb(b,c),"."!==e.charAt(0)&&d(new B.e(U.sb));var x;try{x=B.aa(u,h)}catch(s){}if(j!==x){c=B.J(j.mode),(f=B.kb(l,f,c))&&d(new B.e(f)),(f=x?B.kb(u,h,c):B.Jb(u,h))&&d(new B.e(f)),l.n.rename||d(new B.e(U.O)),(B.ka(j)||x&&B.ka(x))&&d(new B.e(U.ga)),u!==l&&(f=B.na(l,"w"))&&d(new B.e(f));try{B.H.willMovePath&&B.H.willMovePath(a,b)}catch(v){console.log("FS.trackingDelegate['willMovePath']('"+a+"', '"+b+"') threw an exception: "+v.message)}B.uc(j);try{l.n.rename(j,u,h)}catch(G){d(G)}finally{B.tc(j)}try{B.H.onMovePath&&B.H.onMovePath(a,b)}catch(ua){console.log("FS.trackingDelegate['onMovePath']('"+a+"', '"+b+"') threw an exception: "+ua.message)}}},Oa:function(a){var b=B.u(a,{parent:i}).g,c=W(a),e=B.aa(b,c),f=B.kb(b,c,i);f&&d(new B.e(f)),b.n.Oa||d(new B.e(U.O)),B.ka(e)&&d(new B.e(U.ga));try{B.H.willDeletePath&&B.H.willDeletePath(a)}catch(h){console.log("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+h.message)}b.n.Oa(b,c),B.zb(e);try{B.H.onDeletePath&&B.H.onDeletePath(a)}catch(j){console.log("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+j.message)}},Na:function(a){return a=B.u(a,{R:i}).g,a.n.Na||d(new B.e(U.Sa)),a.n.Na(a)},za:function(a){var b=B.u(a,{parent:i}).g,c=W(a),e=B.aa(b,c),f=B.kb(b,c,m);f&&(f===U.pa&&(f=U.O),d(new B.e(f))),b.n.za||d(new B.e(U.O)),B.ka(e)&&d(new B.e(U.ga));try{B.H.willDeletePath&&B.H.willDeletePath(a)}catch(h){console.log("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+h.message)}b.n.za(b,c),B.zb(e);try{B.H.onDeletePath&&B.H.onDeletePath(a)}catch(j){console.log("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+j.message)}},ta:function(a){return(a=B.u(a).g)||d(new B.e(U.Q)),a.n.ta||d(new B.e(U.B)),a.n.ta(a)},Dc:function(a,b){var c=B.u(a,{R:!b}).g;return c||d(new B.e(U.Q)),c.n.S||d(new B.e(U.O)),c.n.S(c)},Eg:function(a){return B.Dc(a,i)},Ya:function(a,b,c){a="string"==typeof a?B.u(a,{R:!c}).g:a,a.n.I||d(new B.e(U.O)),a.n.I(a,{mode:4095&b|a.mode&-4096,timestamp:Date.now()})},Bg:function(a,b){B.Ya(a,b,i)},jg:function(a,b){var c=B.qa(a);c||d(new B.e(U.V)),B.Ya(c.g,b)},dc:function(a,b,c,e){a="string"==typeof a?B.u(a,{R:!e}).g:a,a.n.I||d(new B.e(U.O)),a.n.I(a,{timestamp:Date.now()})},Cg:function(a,b,c){B.dc(a,b,c,i)},kg:function(a,b,c){(a=B.qa(a))||d(new B.e(U.V)),B.dc(a.g,b,c)},truncate:function(a,b){0>b&&d(new B.e(U.B));var c;c="string"==typeof a?B.u(a,{R:i}).g:a,c.n.I||d(new B.e(U.O)),B.J(c.mode)&&d(new B.e(U.pa)),B.isFile(c.mode)||d(new B.e(U.B));var e=B.na(c,"w");e&&d(new B.e(e)),c.n.I(c,{size:b,timestamp:Date.now()})},mg:function(a,b){var c=B.qa(a);c||d(new B.e(U.V)),0===(2097155&c.D)&&d(new B.e(U.B)),B.truncate(c.g,b)},Rg:function(a,b,c){a=B.u(a,{R:i}).g,a.n.I(a,{timestamp:Math.max(b,c)})},open:function(a,b,c,e,f){""===a&&d(new B.e(U.Q));var h,b="string"==typeof b?B.wc(b):b,c=64&b?4095&("undefined"==typeof c?438:c)|32768:0;if("object"==typeof a)h=a;else{a=db(a);try{h=B.u(a,{R:!(131072&b)}).g}catch(j){}}var l=m;64&b&&(h?128&b&&d(new B.e(U.Xb)):(h=B.ba(a,c,0),l=i)),h||d(new B.e(U.Q)),B.ib(h.mode)&&(b&=-513),l||(c=B.Hd(h,b))&&d(new B.e(c)),512&b&&B.truncate(h,0),b&=-641,e=B.fc({g:h,path:B.da(h),D:b,seekable:i,position:0,p:h.p,$d:[],error:m},e,f),e.p.open&&e.p.open(e),p.logReadFiles&&!(1&b)&&(B.Mb||(B.Mb={}),a in B.Mb||(B.Mb[a]=1,p.printErr("read file: "+a)));try{B.H.onOpenFile&&(f=0,1!==(2097155&b)&&(f|=B.Gc.yc.Rc),0!==(2097155&b)&&(f|=B.Gc.yc.Sc),B.H.onOpenFile(a,f))}catch(u){console.log("FS.trackingDelegate['onOpenFile']('"+a+"', flags) threw an exception: "+u.message)}return e},close:function(a){try{a.p.close&&a.p.close(a)}catch(b){d(b)}finally{B.dd(a.C)}},$:function(a,b,c){return(!a.seekable||!a.p.$)&&d(new B.e(U.Ua)),a.position=a.p.$(a,b,c),a.$d=[],a.position},M:function(a,b,c,e,f){(0>e||0>f)&&d(new B.e(U.B)),1===(2097155&a.D)&&d(new B.e(U.V)),B.J(a.g.mode)&&d(new B.e(U.pa)),a.p.M||d(new B.e(U.B));var h=i;return"undefined"==typeof f?(f=a.position,h=m):a.seekable||d(new B.e(U.Ua)),b=a.p.M(a,b,c,e,f),h||(a.position+=b),b},write:function(a,b,c,e,f,h){(0>e||0>f)&&d(new B.e(U.B)),0===(2097155&a.D)&&d(new B.e(U.V)),B.J(a.g.mode)&&d(new B.e(U.pa)),a.p.write||d(new B.e(U.B)),1024&a.D&&B.$(a,0,2);var j=i;"undefined"==typeof f?(f=a.position,j=m):a.seekable||d(new B.e(U.Ua)),b=a.p.write(a,b,c,e,f,h),j||(a.position+=b);try{a.path&&B.H.onWriteToFile&&B.H.onWriteToFile(a.path)}catch(l){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+l.message)}return b},Ea:function(a,b,c){(0>b||0>=c)&&d(new B.e(U.B)),0===(2097155&a.D)&&d(new B.e(U.V)),!B.isFile(a.g.mode)&&!B.J(node.mode)&&d(new B.e(U.Qa)),a.p.Ea||d(new B.e(U.Ta)),a.p.Ea(a,b,c)},Ja:function(a,b,c,e,f,h,j){return 1===(2097155&a.D)&&d(new B.e(U.qb)),a.p.Ja||d(new B.e(U.Qa)),a.p.Ja(a,b,c,e,f,h,j)},Ha:function(a,b,c){return a.p.Ha||d(new B.e(U.Nc)),a.p.Ha(a,b,c)},Mg:function(a,b){b=b||{},b.D=b.D||"r",b.encoding=b.encoding||"binary","utf8"!==b.encoding&&"binary"!==b.encoding&&d(Error('Invalid encoding type "'+b.encoding+'"'));var c,e=B.open(a,b.D),f=B.Dc(a).size,h=new Uint8Array(f);if(B.M(e,h,0,f,0),"utf8"===b.encoding){c="";for(var j=new z.Da,l=0;l<f;l++)c+=j.nb(h[l])}else"binary"===b.encoding&&(c=h);return B.close(e),c},Sg:function(a,b,c){c=c||{},c.D=c.D||"w",c.encoding=c.encoding||"utf8","utf8"!==c.encoding&&"binary"!==c.encoding&&d(Error('Invalid encoding type "'+c.encoding+'"')),a=B.open(a,c.D,c.mode),"utf8"===c.encoding?(b=new Uint8Array((new z.Da).Ac(b)),B.write(a,b,0,b.length,0,c.ad)):"binary"===c.encoding&&B.write(a,b,0,b.length,0,c.ad),B.close(a)},yb:function(){return B.hc},bg:function(a){a=B.u(a,{R:i}),B.J(a.g.mode)||d(new B.e(U.Sa));var b=B.na(a.g,"x");b&&d(new B.e(b)),B.hc=a.path},fd:function(){B.ea("/tmp"),B.ea("/home"),B.ea("/home/web_user")},ed:function(){B.ea("/dev"),B.Ob(B.la(1,3),{M:function(){return 0},write:function(){return 0}}),B.lb("/dev/null",B.la(1,3)),jb(B.la(5,0),mb),jb(B.la(6,0),nb),B.lb("/dev/tty",B.la(5,0)),B.lb("/dev/tty1",B.la(6,0));var a;if("undefined"!=typeof crypto){var b=new Uint8Array(1);a=function(){return crypto.getRandomValues(b),b[0]}}else a=t?function(){return require("crypto").randomBytes(1)[0]}:function(){return 256*Math.random()|0};B.X("/dev","random",a),B.X("/dev","urandom",a),B.ea("/dev/shm"),B.ea("/dev/shm/tmp")},od:function(){p.stdin?B.X("/dev","stdin",p.stdin):B.ca("/dev/tty","/dev/stdin"),p.stdout?B.X("/dev","stdout",k,p.stdout):B.ca("/dev/tty","/dev/stdout"),p.stderr?B.X("/dev","stderr",k,p.stderr):B.ca("/dev/tty1","/dev/stderr");var a=B.open("/dev/stdin","r");K[ob>>2]=B.Eb(a),w(0===a.C,"invalid handle for stdin ("+a.C+")"),a=B.open("/dev/stdout","w"),K[pb>>2]=B.Eb(a),w(1===a.C,"invalid handle for stdout ("+a.C+")"),a=B.open("/dev/stderr","w"),K[qb>>2]=B.Eb(a),w(2===a.C,"invalid handle for stderr ("+a.C+")")},jc:function(){B.e||(B.e=function(a,b){this.g=b,this.Xd=function(a){this.cb=a;for(var b in U)if(U[b]===a){this.code=b;break}},this.Xd(a),this.message=ab[a]},B.e.prototype=Error(),[U.Q].forEach(function(a){B.Db[a]=new B.e(a),B.Db[a].stack="<generic error, no stack>"}))},Zd:function(){B.jc(),B.T=Array(4096),B.F(Y,{},"/"),B.fd(),B.ed()},Ga:function(a,b,c){w(!B.Ga.hb,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),B.Ga.hb=i,B.jc(),p.stdin=a||p.stdin,p.stdout=b||p.stdout,p.stderr=c||p.stderr,B.od()},Qd:function(){B.Ga.hb=m;for(var a=0;a<B.oa.length;a++){var b=B.oa[a];b&&B.close(b)}},fb:function(a,b){var c=0;return a&&(c|=365),b&&(c|=146),c},Ag:function(a,b){var c=fb.apply(k,a);return b&&"/"==c[0]&&(c=c.substr(1)),c},Sf:function(a,b){return gb(b,a)},Pg:function(a){return db(a)},lg:function(a,b){var c=B.vb(a,b);return c.Ab?c.object:(V(c.error),k)},vb:function(a,b){try{var c=B.u(a,{R:!b}),a=c.path}catch(e){}var f={jb:m,Ab:m,error:0,name:k,path:k,object:k,Md:m,Od:k,Nd:k};try{c=B.u(a,{parent:i}),f.Md=i,f.Od=c.path,f.Nd=c.g,f.name=W(a),c=B.u(a,{R:!b}),f.Ab=i,f.path=c.path,f.object=c.g,f.name=c.g.name,f.jb="/"===c.path}catch(h){f.error=h.cb}return f},hd:function(a,b,c,e){return a=X("string"==typeof a?a:B.da(a),b),B.ea(a,B.fb(c,e))},ld:function(a,b){for(var a="string"==typeof a?a:B.da(a),c=b.split("/").reverse();c.length;){var e=c.pop();if(e){var f=X(a,e);try{B.ea(f)}catch(h){}a=f}}return f},gd:function(a,b,c,e,f){return a=X("string"==typeof a?a:B.da(a),b),B.create(a,B.fb(e,f))},xb:function(a,b,c,e,f,h){if(a=b?X("string"==typeof a?a:B.da(a),b):a,e=B.fb(e,f),f=B.create(a,e),c){if("string"==typeof c){for(var a=Array(c.length),b=0,j=c.length;b<j;++b)a[b]=c.charCodeAt(b);c=a}B.Ya(f,146|e),a=B.open(f,"w"),B.write(a,c,0,c.length,0,h),B.close(a),B.Ya(f,e)}return f},X:function(a,b,c,e){a=X("string"==typeof a?a:B.da(a),b),b=B.fb(!!c,!!e),B.X.Ib||(B.X.Ib=64);var f=B.la(B.X.Ib++,0);return B.Ob(f,{open:function(a){a.seekable=m},close:function(){e&&e.buffer&&e.buffer.length&&e(10)},M:function(a,b,e,f){for(var q=0,x=0;x<f;x++){var s;try{s=c()}catch(v){d(new B.e(U.ha))}if(s===g&&0===q&&d(new B.e(U.Ca)),s===k||s===g)break;q++,b[e+x]=s}return q&&(a.g.timestamp=Date.now()),q},write:function(a,b,c,f){for(var q=0;q<f;q++)try{e(b[c+q])}catch(x){d(new B.e(U.ha))}return f&&(a.g.timestamp=Date.now()),q}}),B.lb(a,b,f)},kd:function(a,b,c){return a=X("string"==typeof a?a:B.da(a),b),B.ca(c,a)},mc:function(a){if(a.Gb||a.Dd||a.link||a.k)return i;var b=i;if("undefined"!=typeof XMLHttpRequest&&d(Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.")),p.read)try{a.k=Va(p.read(a.url),i),a.q=a.k.length}catch(c){b=m}else d(Error("Cannot load without read() or XMLHttpRequest."));return b||V(U.ha),b},jd:function(a,b,c,e,f){function h(){this.Hb=m,this.Za=[]}if(h.prototype.get=function(a){if(!(a>this.length-1||0>a)){var b=a%this.cd;return this.yd(a/this.cd|0)[b]}},h.prototype.Wd=function(a){this.yd=a},h.prototype.bc=function(){var a=new XMLHttpRequest;a.open("HEAD",c,m),a.send(k),200<=a.status&&300>a.status||304===a.status||d(Error("Couldn't load "+c+". Status: "+a.status));var e,b=Number(a.getResponseHeader("Content-length")),f=1048576;(e=a.getResponseHeader("Accept-Ranges"))&&"bytes"===e||(f=b);var h=this;h.Wd(function(a){var e=a*f,j=(a+1)*f-1,j=Math.min(j,b-1);if("undefined"==typeof h.Za[a]){var l=h.Za;e>j&&d(Error("invalid range ("+e+", "+j+") or no bytes requested!")),j>b-1&&d(Error("only "+b+" bytes available! programmer error!"));var q=new XMLHttpRequest;q.open("GET",c,m),b!==f&&q.setRequestHeader("Range","bytes="+e+"-"+j),"undefined"!=typeof Uint8Array&&(q.responseType="arraybuffer"),q.overrideMimeType&&q.overrideMimeType("text/plain; charset=x-user-defined"),q.send(k),200<=q.status&&300>q.status||304===q.status||d(Error("Couldn't load "+c+". Status: "+q.status)),e=q.response!==g?new Uint8Array(q.response||[]):Va(q.responseText||"",i),l[a]=e}return"undefined"==typeof h.Za[a]&&d(Error("doXHR failed!")),h.Za[a]}),this.Uc=b,this.Tc=f,this.Hb=i},"undefined"!=typeof XMLHttpRequest){ca||d("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var j=new h;Object.defineProperty(j,"length",{get:function(){return this.Hb||this.bc(),this.Uc}}),Object.defineProperty(j,"chunkSize",{get:function(){return this.Hb||this.bc(),this.Tc}}),j={Gb:m,k:j}}else j={Gb:m,url:c};var l=B.gd(a,b,j,e,f);j.k?l.k=j.k:j.url&&(l.k=k,l.url=j.url),Object.defineProperty(l,"usedBytes",{get:function(){return this.k.length}});var u={};return Object.keys(l.p).forEach(function(a){var b=l.p[a];u[a]=function(){return B.mc(l)||d(new B.e(U.ha)),b.apply(k,arguments)}}),u.M=function(a,b,c,e,f){if(B.mc(l)||d(new B.e(U.ha)),a=a.g.k,f>=a.length)return 0;if(e=Math.min(a.length-f,e),w(0<=e),a.slice)for(var h=0;h<e;h++)b[c+h]=a[f+h];else for(h=0;h<e;h++)b[c+h]=a.get(f+h);return e},l.p=u,l},md:function(a,b,c,e,f,h,j,l,u){function q(){rb=document.pointerLockElement===v||document.mozPointerLockElement===v||document.webkitPointerLockElement===v||document.msPointerLockElement===v}function x(c){function q(c){l||B.xb(a,b,c,e,f,u),h&&h(),Za()}var s=m;p.preloadPlugins.forEach(function(a){!s&&a.canHandle(G)&&(a.handle(c,G,q,function(){j&&j(),Za()}),s=i)}),s||q(c)}if(p.preloadPlugins||(p.preloadPlugins=[]),!tb){tb=i;try{new Blob,ub=i}catch(s){ub=m,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}vb="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:ub?k:console.log("warning: no BlobBuilder"),wb="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:g,!p.xc&&"undefined"==typeof wb&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),p.xc=i),p.preloadPlugins.push({canHandle:function(a){return!p.xc&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},handle:function(a,b,c,e){var f=k;if(ub)try{f=new Blob([a],{type:xb(b)}),f.size!==a.length&&(f=new Blob([new Uint8Array(a).buffer],{type:xb(b)}))}catch(h){z.Aa("Blob constructor present but fails: "+h+"; falling back to blob builder")}f||(f=new vb,f.append(new Uint8Array(a).buffer),f=f.getBlob());var j=wb.createObjectURL(f),l=new Image;l.onload=function(){w(l.complete,"Image "+b+" could not be decoded");var e=document.createElement("canvas");e.width=l.width,e.height=l.height,e.getContext("2d").drawImage(l,0,0),p.preloadedImages[b]=e,wb.revokeObjectURL(j),c&&c(a)},l.onerror=function(){console.log("Image "+j+" could not be decoded"),e&&e()},l.src=j}}),p.preloadPlugins.push({canHandle:function(a){return!p.Jg&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(a,b,c,e){function f(e){j||(j=i,p.preloadedAudios[b]=e,c&&c(a))}function h(){j||(j=i,p.preloadedAudios[b]=new Audio,e&&e())}var j=m;if(!ub)return h();try{var l=new Blob([a],{type:xb(b)})}catch(q){return h()}var l=wb.createObjectURL(l),s=new Audio;s.addEventListener("canplaythrough",function(){f(s)},m),s.onerror=function(){if(!j){console.log("warning: browser could not fully decode audio "+b+", trying slower base64 approach");for(var c="",e=0,h=0,l=0;l<a.length;l++)for(e=e<<8|a[l],h+=8;6<=h;)var q=e>>h-6&63,h=h-6,c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q];2==h?(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&e)<<4],c+="=="):4==h&&(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&e)<<2],c+="="),s.src="data:audio/x-"+b.substr(-3)+";base64,"+c,f(s)}},s.src=l,p.noExitRuntime=i,setTimeout(function(){H||f(s)},1e4)}});var v=p.canvas;v&&(v.Pb=v.requestPointerLock||v.mozRequestPointerLock||v.webkitRequestPointerLock||v.msRequestPointerLock||n(),v.kc=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||n(),v.kc=v.kc.bind(document),document.addEventListener("pointerlockchange",q,m),document.addEventListener("mozpointerlockchange",q,m),document.addEventListener("webkitpointerlockchange",q,m),document.addEventListener("mspointerlockchange",q,m),p.elementPointerLock&&v.addEventListener("click",function(a){!rb&&v.Pb&&(v.Pb(),a.preventDefault())},m))}var G=b?gb(X(a,b)):a;Ya(),"string"==typeof c?yb(c,function(a){x(a)},j):x(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},Ub:function(){return"EM_FS_"+window.location.pathname},Vb:20,Ba:"FILE_DATA",Og:function(a,b,c){var b=b||n(),c=c||n(),e=B.indexedDB();try{var f=e.open(B.Ub(),B.Vb)}catch(h){return c(h)}f.Ld=function(){console.log("creating db"),f.result.createObjectStore(B.Ba)},f.onsuccess=function(){var e=f.result.transaction([B.Ba],"readwrite"),h=e.objectStore(B.Ba),u=0,q=0,x=a.length;a.forEach(function(a){a=h.put(B.vb(a).object.k,a),a.onsuccess=function(){u++,u+q==x&&(0==q?b():c())},a.onerror=function(){q++,u+q==x&&(0==q?b():c())}}),e.onerror=c},f.onerror=c},Dg:function(a,b,c){var b=b||n(),c=c||n(),e=B.indexedDB();try{var f=e.open(B.Ub(),B.Vb)}catch(h){return c(h)}f.Ld=c,f.onsuccess=function(){var e=f.result;try{var h=e.transaction([B.Ba],"readonly")}catch(u){return void c(u)}var q=h.objectStore(B.Ba),x=0,s=0,v=a.length;a.forEach(function(a){var e=q.get(a);e.onsuccess=function(){B.vb(a).Ab&&B.za(a),B.xb(eb(a),W(a),e.result,i,i,i),x++,x+s==v&&(0==s?b():c())},e.onerror=function(){s++,x+s==v&&(0==s?b():c())}}),h.onerror=c},f.onerror=c}},Z={F:function(){return p.websocket=p.websocket&&"object"==typeof p.websocket?p.websocket:{},p.websocket.tb={},p.websocket.on=function(a,b){return"function"==typeof b&&(this.tb[a]=b),this},p.websocket.P=function(a,b){"function"==typeof this.tb[a]&&this.tb[a].call(this,b)},B.createNode(k,"/",16895,0)},nd:function(a,b,c){return c&&w(1==b==(6==c)),a={qd:a,type:b,protocol:c,G:k,error:k,Ma:{},Kb:[],ua:[],wa:Z.L},b=Z.mb(),c=B.createNode(Z.root,b,49152,0),c.va=a,b=B.fc({path:b,g:c,D:B.wc("r+"),seekable:m,p:Z.p}),a.A=b,a},wd:function(a){return a=B.qa(a),a&&B.Ed(a.g.mode)?a.g.va:k},p:{zc:function(a){return a=a.g.va,a.wa.zc(a)},Ha:function(a,b,c){return a=a.g.va,a.wa.Ha(a,b,c)},M:function(a,b,c,e){return a=a.g.va,(e=a.wa.Rd(a,e))?(b.set(e.buffer,c),e.buffer.length):0},write:function(a,b,c,e){return a=a.g.va,a.wa.Vd(a,b,c,e)},close:function(a){a=a.g.va,a.wa.close(a)}},mb:function(){return Z.mb.gc||(Z.mb.gc=0),"socket["+Z.mb.gc++ +"]"},L:{$a:function(a,b,c){var e;if("object"==typeof b&&(e=b,c=b=k),e)e._socket?(b=e._socket.remoteAddress,c=e._socket.remotePort):((c=/ws[s]?:\/\/([^:]+):(\d+)/.exec(e.url))||d(Error("WebSocket URL must be in the format ws(s)://address:port")),b=c[1],
c=parseInt(c[2],10));else try{var f=p.websocket&&"object"==typeof p.websocket,h="ws:#".replace("#","//");if(f&&"string"==typeof p.websocket.url&&(h=p.websocket.url),"ws://"===h||"wss://"===h)var j=b.split("/"),h=h+j[0]+":"+c+"/"+j.slice(1).join("/");j="binary",f&&"string"==typeof p.websocket.subprotocol&&(j=p.websocket.subprotocol);var j=j.replace(/^ +| +$/g,"").split(/ *, */),l=t?{protocol:j.toString()}:j;e=new(t?require("ws"):window.WebSocket)(h,l),e.binaryType="arraybuffer"}catch(u){d(new B.e(U.Yb))}return b={W:b,port:c,o:e,ab:[]},Z.L.$b(a,b),Z.L.zd(a,b),2===a.type&&"undefined"!=typeof a.ya&&b.ab.push(new Uint8Array([255,255,255,255,112,111,114,116,(65280&a.ya)>>8,255&a.ya])),b},gb:function(a,b,c){return a.Ma[b+":"+c]},$b:function(a,b){a.Ma[b.W+":"+b.port]=b},Bc:function(a,b){delete a.Ma[b.W+":"+b.port]},zd:function(a,b){function c(){p.websocket.P("open",a.A.C);try{for(var c=b.ab.shift();c;)b.o.send(c),c=b.ab.shift()}catch(e){b.o.close()}}function e(c){w("string"!=typeof c&&c.byteLength!==g);var c=new Uint8Array(c),e=f;f=m,e&&10===c.length&&255===c[0]&&255===c[1]&&255===c[2]&&255===c[3]&&112===c[4]&&111===c[5]&&114===c[6]&&116===c[7]?(c=c[8]<<8|c[9],Z.L.Bc(a,b),b.port=c,Z.L.$b(a,b)):(a.ua.push({W:b.W,port:b.port,data:c}),p.websocket.P("message",a.A.C))}var f=i;t?(b.o.on("open",c),b.o.on("message",function(a,b){b.binary&&e(new Uint8Array(a).buffer)}),b.o.on("close",function(){p.websocket.P("close",a.A.C)}),b.o.on("error",function(){a.error=U.Wb,p.websocket.P("error",[a.A.C,a.error,"ECONNREFUSED: Connection refused"])})):(b.o.onopen=c,b.o.onclose=function(){p.websocket.P("close",a.A.C)},b.o.onmessage=function(a){e(a.data)},b.o.onerror=function(){a.error=U.Wb,p.websocket.P("error",[a.A.C,a.error,"ECONNREFUSED: Connection refused"])})},zc:function(a){if(1===a.type&&a.G)return a.Kb.length?65:0;var b=0,c=1===a.type?Z.L.gb(a,a.Y,a.Z):k;return(a.ua.length||!c||c&&c.o.readyState===c.o.Pa||c&&c.o.readyState===c.o.CLOSED)&&(b|=65),(!c||c&&c.o.readyState===c.o.OPEN)&&(b|=4),(c&&c.o.readyState===c.o.Pa||c&&c.o.readyState===c.o.CLOSED)&&(b|=16),b},Ha:function(a,b,c){switch(b){case 21531:return b=0,a.ua.length&&(b=a.ua[0].data.length),K[c>>2]=b,0;default:return U.B}},close:function(a){if(a.G){try{a.G.close()}catch(b){}a.G=k}for(var c=Object.keys(a.Ma),e=0;e<c.length;e++){var f=a.Ma[c[e]];try{f.o.close()}catch(h){}Z.L.Bc(a,f)}return 0},bind:function(a,b,c){if(("undefined"!=typeof a.Qb||"undefined"!=typeof a.ya)&&d(new B.e(U.B)),a.Qb=b,a.ya=c||zb(),2===a.type){a.G&&(a.G.close(),a.G=k);try{a.wa.Fd(a,0)}catch(e){e instanceof B.e||d(e),e.cb!==U.Ta&&d(e)}}},cg:function(a,b,c){if(a.G&&d(new B.e(U.Ta)),"undefined"!=typeof a.Y&&"undefined"!=typeof a.Z){var e=Z.L.gb(a,a.Y,a.Z);e&&(e.o.readyState===e.o.CONNECTING&&d(new B.e(U.Hc)),d(new B.e(U.Kc)))}b=Z.L.$a(a,b,c),a.Y=b.W,a.Z=b.port,d(new B.e(U.Jc))},Fd:function(a){t||d(new B.e(U.Ta)),a.G&&d(new B.e(U.B));var b=require("ws").Server;a.G=new b({host:a.Qb,port:a.ya}),p.websocket.P("listen",a.A.C),a.G.on("connection",function(b){if(1===a.type){var e=Z.nd(a.qd,a.type,a.protocol),b=Z.L.$a(e,b);e.Y=b.W,e.Z=b.port,a.Kb.push(e),p.websocket.P("connection",e.A.C)}else Z.L.$a(a,b),p.websocket.P("connection",a.A.C)}),a.G.on("closed",function(){p.websocket.P("close",a.A.C),a.G=k}),a.G.on("error",function(){a.error=U.Yb,p.websocket.P("error",[a.A.C,a.error,"EHOSTUNREACH: Host is unreachable"])})},accept:function(a){a.G||d(new B.e(U.B));var b=a.Kb.shift();return b.A.D=a.A.D,b},tg:function(a,b){var c,e;return b?((a.Y===g||a.Z===g)&&d(new B.e(U.Ra)),c=a.Y,e=a.Z):(c=a.Qb||0,e=a.ya||0),{W:c,port:e}},Vd:function(a,b,c,e,f,h){2===a.type?(f!==g&&h!==g||(f=a.Y,h=a.Z),(f===g||h===g)&&d(new B.e(U.Ic))):(f=a.Y,h=a.Z);var j=Z.L.gb(a,f,h);if(1===a.type&&((!j||j.o.readyState===j.o.Pa||j.o.readyState===j.o.CLOSED)&&d(new B.e(U.Ra)),j.o.readyState===j.o.CONNECTING&&d(new B.e(U.Ca))),b=b instanceof Array||b instanceof ArrayBuffer?b.slice(c,c+e):b.buffer.slice(b.byteOffset+c,b.byteOffset+c+e),2===a.type&&(!j||j.o.readyState!==j.o.OPEN))return j&&j.o.readyState!==j.o.Pa&&j.o.readyState!==j.o.CLOSED||(j=Z.L.$a(a,f,h)),j.ab.push(b),e;try{return j.o.send(b),e}catch(l){d(new B.e(U.B))}},Rd:function(a,b){1===a.type&&a.G&&d(new B.e(U.Ra));var c=a.ua.shift();if(!c){if(1===a.type){var e=Z.L.gb(a,a.Y,a.Z);if(e){if(e.o.readyState===e.o.Pa||e.o.readyState===e.o.CLOSED)return k;d(new B.e(U.Ca))}d(new B.e(U.Ra))}d(new B.e(U.Ca))}var e=c.data.byteLength||c.data.length,f=c.data.byteOffset||0,h=c.data.buffer||c.data,j=Math.min(b,e),l={buffer:new Uint8Array(h,f,j),W:c.W,port:c.port};return 1===a.type&&j<e&&(c.data=new Uint8Array(h,f+j,e-j),a.ua.unshift(c)),l}}};p._strlen=Bb,p._memset=Gb,p._broadwayOnPictureDecoded=Hb,p._broadwayOnHeadersDecoded=Ib;var Nb=k,Pb="",Tb=0,Mb=k,Sb=0,Kb=0,Lb=0,Xb=0,Ub=[],Wb={},Ob,Vb,Yb=m,rb=m,Zb=m,$b=g,ac=g,bc=0,dc=[],tb,ub,vb,wb;p._memcpy=gc,B.Zd(),R.unshift({ja:function(){!p.noFSInit&&!B.Ga.hb&&B.Ga()}}),Pa.push({ja:function(){B.vc=m}}),Qa.push({ja:function(){B.Qd()}}),p.FS_createFolder=B.hd,p.FS_createPath=B.ld,p.FS_createDataFile=B.xb,p.FS_createPreloadedFile=B.md,p.FS_createLazyFile=B.jd,p.FS_createLink=B.kd,p.FS_createDevice=B.X,bb=z.Ec(4),K[bb>>2]=0,R.unshift({ja:n()}),Qa.push({ja:n()});var lb=new z.Da;t&&(require("fs"),process.platform.match(/^win/)),R.push({ja:function(){Z.root=B.F(Z,{},k)}}),Eb.Cc=M([0],"i8",L),p.requestFullScreen=function(a,b){function c(){Yb=m;var a=e.parentNode;(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===a?(e.cc=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen||document.exitFullscreen||n(),e.cc=e.cc.bind(document),$b&&e.Pb(),Yb=i,ac&&("undefined"!=typeof SDL&&(a=Ha[SDL.screen+0*z.ia>>2],K[SDL.screen+0*z.ia>>2]=8388608|a),ec())):(a.parentNode.insertBefore(e,a),a.parentNode.removeChild(a),ac&&("undefined"!=typeof SDL&&(a=Ha[SDL.screen+0*z.ia>>2],K[SDL.screen+0*z.ia>>2]=a&-8388609),ec())),p.onFullScreen&&p.onFullScreen(Yb),fc(e)}$b=a,ac=b,"undefined"==typeof $b&&($b=i),"undefined"==typeof ac&&(ac=m);var e=p.canvas;Zb||(Zb=i,document.addEventListener("fullscreenchange",c,m),document.addEventListener("mozfullscreenchange",c,m),document.addEventListener("webkitfullscreenchange",c,m),document.addEventListener("MSFullscreenChange",c,m));var f=document.createElement("div");e.parentNode.insertBefore(f,e),f.appendChild(e),f.Td=f.requestFullScreen||f.mozRequestFullScreen||f.msRequestFullscreen||(f.webkitRequestFullScreen?function(){f.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:k),f.Td()},p.requestAnimationFrame=function(a){Qb(a)},p.setCanvasSize=function(a,b,c){fc(p.canvas,a,b),c||ec()},p.pauseMainLoop=function(){Nb=k,Tb++},p.resumeMainLoop=function(){Tb++;var a=Kb,b=Lb,c=Mb;Mb=k,Rb(c,0,m,Sb),Jb(a,b)},p.getUserMedia=function(){window.qc||(window.qc=navigator.getUserMedia||navigator.mozGetUserMedia),window.qc(g)},Ja=y=z.ub(D),Ka=Ja+Ma,La=E=z.ub(Ka),w(La<F,"TOTAL_MEMORY not big enough for stack"),p.Xc={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},p.Yc={abort:A,assert:w,min:va,invoke_viiiii:function(a,b,c,e,f,h){try{p.dynCall_viiiii(a,b,c,e,f,h)}catch(j){"number"!=typeof j&&"longjmp"!==j&&d(j),$.setThrew(1,0)}},_broadwayOnPictureDecoded:Hb,_puts:function(a){var b=K[pb>>2],a=Db(a,b);return 0>a?a:0>Eb(10,b)?-1:a+1},_fflush:n(),_fputc:Eb,_send:function(a,b,c){return Z.wd(a)?Ab(a,b,c):(V(U.V),-1)},_pwrite:function(a,b,c,e){if(a=B.qa(a),!a)return V(U.V),-1;try{return B.write(a,I,b,c,e)}catch(f){return B.sc(f),-1}},_fputs:Db,_emscripten_set_main_loop:Rb,_abort:function(){p.abort()},___setErrNo:V,_sbrk:Fb,_mkport:zb,_emscripten_set_main_loop_timing:Jb,_emscripten_memcpy_big:function(a,b,c){return N.set(N.subarray(b,b+c),a),a},_fileno:Cb,_broadwayOnHeadersDecoded:Ib,_write:Ab,_time:function(a){var b=Date.now()/1e3|0;return a&&(K[a>>2]=b),b},_sysconf:function(a){switch(a){case 30:return 4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator?navigator.hardwareConcurrency||1:1}return V(U.B),-1},___errno_location:function(){return bb},STACKTOP:y,STACK_MAX:Ka,tempDoublePtr:$a,ABORT:H,NaN:NaN,Infinity:1/0};var $=function(global,env,buffer){"use asm";var a=new global.Int8Array(buffer);var b=new global.Int16Array(buffer);var c=new global.Int32Array(buffer);var d=new global.Uint8Array(buffer);var e=new global.Uint16Array(buffer);var f=new global.Uint32Array(buffer);var g=new global.Float32Array(buffer);var h=new global.Float64Array(buffer);var i=env.STACKTOP|0;var j=env.STACK_MAX|0;var k=env.tempDoublePtr|0;var l=env.ABORT|0;var m=0;var n=0;var o=0;var p=0;var q=+env.NaN,r=+env.Infinity;var s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;var B=0;var C=0;var D=0;var E=0;var F=0;var G=0;var H=0;var I=0;var J=0;var K=0;var L=global.Math.floor;var M=global.Math.abs;var N=global.Math.sqrt;var O=global.Math.pow;var P=global.Math.cos;var Q=global.Math.sin;var R=global.Math.tan;var S=global.Math.acos;var T=global.Math.asin;var U=global.Math.atan;var V=global.Math.atan2;var W=global.Math.exp;var X=global.Math.log;var Y=global.Math.ceil;var Z=global.Math.imul;var _=env.abort;var $=env.assert;var aa=env.min;var ba=env.invoke_viiiii;var ca=env._broadwayOnPictureDecoded;var da=env._puts;var ea=env._fflush;var fa=env._fputc;var ga=env._send;var ha=env._pwrite;var ia=env._fputs;var ja=env._emscripten_set_main_loop;var ka=env._abort;var la=env.___setErrNo;var ma=env._sbrk;var na=env._mkport;var oa=env._emscripten_set_main_loop_timing;var pa=env._emscripten_memcpy_big;var qa=env._fileno;var ra=env._broadwayOnHeadersDecoded;var sa=env._write;var ta=env._time;var ua=env._sysconf;var va=env.___errno_location;var wa=0;function Sb(a,f,g,h,j,k){a=a|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;var l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0;X=i;i=i+32|0;W=X;p=c[j+4>>2]|0;V=(h>>>0)/(p>>>0)|0;U=V<<4;V=h-(Z(V,p)|0)<<4;c[W+4>>2]=p;c[W+8>>2]=c[j+8>>2];p=c[a>>2]|0;do if((p|0)==2){z=b[f+160>>1]|0;A=b[f+162>>1]|0;C=c[f+144>>2]|0;B=a+4|0;o=c[a+204>>2]|0;if((o|0)!=0?(c[o+4>>2]|0)==(c[B>>2]|0):0)if((c[o>>2]|0)>>>0<6){w=o+172|0;w=e[w>>1]|e[w+2>>1]<<16;m=1;o=c[o+108>>2]|0;r=w&65535;w=w>>>16&65535}else{m=1;o=-1;r=0;w=0}else{m=0;o=-1;r=0;w=0}a:do if((o|0)==(C|0)){n=r;o=w}else{n=c[a+200>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[B>>2]|0):0)if((c[n>>2]|0)>>>0<6){o=n+152|0;o=e[o>>1]|e[o+2>>1]<<16;q=1;s=o&65535;o=o>>>16&65535;p=c[n+104>>2]|0}else{q=1;s=0;o=0;p=-1}else{q=0;s=0;o=0;p=-1}n=c[a+208>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[B>>2]|0):0)if((c[n>>2]|0)>>>0<6){t=n+172|0;n=c[n+108>>2]|0;t=e[t>>1]|e[t+2>>1]<<16}else{n=-1;t=0}else T=54;do if((T|0)==54){n=c[a+212>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[B>>2]|0):0){if((c[n>>2]|0)>>>0>=6){n=-1;t=0;break}t=n+192|0;n=c[n+112>>2]|0;t=e[t>>1]|e[t+2>>1]<<16;break}if((q|0)==0|(m|0)!=0){n=-1;t=0}else{n=s;break a}}while(0);m=(p|0)==(C|0);if((((n|0)==(C|0)&1)+(m&1)|0)==1){if(m){n=m?s:r;o=m?o:w;break}n=t&65535;o=t>>>16&65535;break}n=s<<16>>16;l=r<<16>>16;p=t<<16>>16;if(r<<16>>16>s<<16>>16)m=l;else{m=n;n=(l|0)<(n|0)?l:n}if((m|0)<(p|0))q=m;else q=(n|0)>(p|0)?n:p;n=o<<16>>16;m=w<<16>>16;l=t>>16;if(w<<16>>16>o<<16>>16)o=m;else{o=n;n=(m|0)<(n|0)?m:n}if((o|0)>=(l|0))o=(n|0)>(l|0)?n:l;n=q&65535;o=o&65535}while(0);n=(n&65535)+(z&65535)|0;o=(o&65535)+(A&65535)|0;if(((n<<16>>16)+8192|0)>>>0>16383){G=1;i=X;return G|0}if(((o<<16>>16)+2048|0)>>>0>4095){G=1;i=X;return G|0}m=ic(g,C)|0;if(!m){G=1;i=X;return G|0}A=a+132|0;x=a+136|0;y=a+140|0;z=a+144|0;q=a+148|0;p=a+152|0;G=a+156|0;v=a+160|0;b[a+160>>1]=n;b[a+162>>1]=o;v=e[v>>1]|e[v+2>>1]<<16;b[G>>1]=v;b[G+2>>1]=v>>>16;b[p>>1]=v;b[p+2>>1]=v>>>16;b[q>>1]=v;b[q+2>>1]=v>>>16;b[z>>1]=v;b[z+2>>1]=v>>>16;b[y>>1]=v;b[y+2>>1]=v>>>16;b[x>>1]=v;b[x+2>>1]=v>>>16;b[A>>1]=v;b[A+2>>1]=v>>>16;c[a+100>>2]=C;c[a+104>>2]=C;A=a+116|0;c[A>>2]=m;c[a+120>>2]=m;x=b[f+164>>1]|0;y=b[f+166>>1]|0;z=c[f+148>>2]|0;q=c[a+200>>2]|0;p=(q|0)==0;if((!p?(c[q+4>>2]|0)==(c[B>>2]|0):0)?(c[q>>2]|0)>>>0<6:0){w=q+184|0;w=e[w>>1]|e[w+2>>1]<<16;r=w&65535;w=w>>>16&65535;o=c[q+112>>2]|0}else{r=0;w=0;o=-1}do if((o|0)!=(z|0)){s=v&65535;n=v>>>16;u=n&65535;if((!p?(c[q+4>>2]|0)==(c[B>>2]|0):0)?(c[q>>2]|0)>>>0<6:0){t=q+160|0;p=c[q+104>>2]|0;t=e[t>>1]|e[t+2>>1]<<16}else{p=-1;t=0}o=(C|0)==(z|0);if((((p|0)==(z|0)&1)+(o&1)|0)==1){m=o?v:t;o=o?n:t>>>16;break}o=r<<16>>16;p=v<<16>>16;q=t<<16>>16;if(s<<16>>16>r<<16>>16)m=p;else{m=o;o=(p|0)<(o|0)?p:o}if((m|0)>=(q|0))m=(o|0)>(q|0)?o:q;n=w<<16>>16;l=v>>16;p=t>>16;if(u<<16>>16>w<<16>>16)o=l;else{o=n;n=(l|0)<(n|0)?l:n}if((o|0)>=(p|0))o=(n|0)>(p|0)?n:p}else{o=w&65535;m=o<<16|r&65535}while(0);m=(m&65535)+(x&65535)|0;n=(o&65535)+(y&65535)|0;if(((m<<16>>16)+8192|0)>>>0>16383){G=1;i=X;return G|0}if(((n<<16>>16)+2048|0)>>>0>4095){G=1;i=X;return G|0}o=ic(g,z)|0;if(!o){G=1;i=X;return G|0}else{G=a+164|0;E=a+168|0;D=a+172|0;C=a+176|0;B=a+180|0;y=a+184|0;x=a+188|0;F=a+192|0;b[a+192>>1]=m;b[a+194>>1]=n;F=e[F>>1]|e[F+2>>1]<<16;b[x>>1]=F;b[x+2>>1]=F>>>16;b[y>>1]=F;b[y+2>>1]=F>>>16;b[B>>1]=F;b[B+2>>1]=F>>>16;b[C>>1]=F;b[C+2>>1]=F>>>16;b[D>>1]=F;b[D+2>>1]=F>>>16;b[E>>1]=F;b[E+2>>1]=F>>>16;b[G>>1]=F;b[G+2>>1]=F>>>16;c[a+108>>2]=z;c[a+112>>2]=z;F=a+124|0;c[F>>2]=o;c[a+128>>2]=o;c[W>>2]=c[A>>2];dc(k,a+132|0,W,V,U,0,0,16,8);c[W>>2]=c[F>>2];dc(k,G,W,V,U,0,8,16,8);break}}else if((p|0)==1|(p|0)==0){A=c[f+144>>2]|0;l=a+4|0;n=c[a+200>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[l>>2]|0):0)if((c[n>>2]|0)>>>0<6){o=n+152|0;o=e[o>>1]|e[o+2>>1]<<16;m=1;v=o&65535;o=o>>>16&65535;s=c[n+104>>2]|0}else{m=1;v=0;o=0;s=-1}else{m=0;v=0;o=0;s=-1}n=c[a+204>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[l>>2]|0):0)if((c[n>>2]|0)>>>0<6){w=n+172|0;w=e[w>>1]|e[w+2>>1]<<16;u=w&65535;q=1;r=c[n+108>>2]|0;w=w>>>16&65535}else{u=0;q=1;r=-1;w=0}else{u=0;q=0;r=-1;w=0}do if(!p)if(!((m|0)==0|(q|0)==0)){if((s|0)==0?((o&65535)<<16|v&65535|0)==0:0){n=0;o=0;break}if((r|0)==0?((w&65535)<<16|u&65535|0)==0:0){n=0;o=0}else T=16}else{n=0;o=0}else T=16;while(0);if((T|0)==16){y=b[f+160>>1]|0;z=b[f+162>>1]|0;n=c[a+208>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[l>>2]|0):0)if((c[n>>2]|0)>>>0<6){t=n+172|0;p=c[n+108>>2]|0;t=e[t>>1]|e[t+2>>1]<<16;T=25}else{p=-1;t=0;T=25}else T=20;do if((T|0)==20){p=c[a+212>>2]|0;if((p|0)!=0?(c[p+4>>2]|0)==(c[l>>2]|0):0){if((c[p>>2]|0)>>>0>=6){p=-1;t=0;T=25;break}t=p+192|0;p=c[p+112>>2]|0;t=e[t>>1]|e[t+2>>1]<<16;T=25;break}if((m|0)==0|(q|0)!=0){p=-1;t=0;T=25}else n=v}while(0);do if((T|0)==25){m=(s|0)==(A|0);n=(r|0)==(A|0);if(((n&1)+(m&1)+((p|0)==(A|0)&1)|0)==1){if(m|n){n=m?v:u;o=m?o:w;break}n=t&65535;o=t>>>16&65535;break}n=v<<16>>16;l=u<<16>>16;p=t<<16>>16;if(u<<16>>16>v<<16>>16)m=l;else{m=n;n=(l|0)<(n|0)?l:n}if((m|0)<(p|0))p=m;else p=(n|0)>(p|0)?n:p;n=o<<16>>16;m=w<<16>>16;l=t>>16;if(w<<16>>16>o<<16>>16)o=m;else{o=n;n=(m|0)<(n|0)?m:n}if((o|0)>=(l|0))o=(n|0)>(l|0)?n:l;n=p&65535;o=o&65535}while(0);n=(n&65535)+(y&65535)|0;o=(o&65535)+(z&65535)|0;if(((n<<16>>16)+8192|0)>>>0>16383){G=1;i=X;return G|0}if(((o<<16>>16)+2048|0)>>>0>4095){G=1;i=X;return G|0}else{n=n&65535;o=o&65535}}l=ic(g,A)|0;if(!l){G=1;i=X;return G|0}else{G=a+132|0;E=a+136|0;D=a+140|0;C=a+144|0;B=a+148|0;z=a+152|0;y=a+156|0;x=a+160|0;w=a+164|0;v=a+168|0;m=a+172|0;p=a+176|0;q=a+180|0;r=a+184|0;s=a+188|0;F=a+192|0;b[a+192>>1]=n;b[a+194>>1]=o;F=e[F>>1]|e[F+2>>1]<<16;b[s>>1]=F;b[s+2>>1]=F>>>16;b[r>>1]=F;b[r+2>>1]=F>>>16;b[q>>1]=F;b[q+2>>1]=F>>>16;b[p>>1]=F;b[p+2>>1]=F>>>16;b[m>>1]=F;b[m+2>>1]=F>>>16;b[v>>1]=F;b[v+2>>1]=F>>>16;b[w>>1]=F;b[w+2>>1]=F>>>16;b[x>>1]=F;b[x+2>>1]=F>>>16;b[y>>1]=F;b[y+2>>1]=F>>>16;b[z>>1]=F;b[z+2>>1]=F>>>16;b[B>>1]=F;b[B+2>>1]=F>>>16;b[C>>1]=F;b[C+2>>1]=F>>>16;b[D>>1]=F;b[D+2>>1]=F>>>16;b[E>>1]=F;b[E+2>>1]=F>>>16;b[G>>1]=F;b[G+2>>1]=F>>>16;c[a+100>>2]=A;c[a+104>>2]=A;c[a+108>>2]=A;c[a+112>>2]=A;c[a+116>>2]=l;c[a+120>>2]=l;c[a+124>>2]=l;c[a+128>>2]=l;c[W>>2]=l;dc(k,a+132|0,W,V,U,0,0,16,16);break}}else if((p|0)==3){x=b[f+160>>1]|0;y=b[f+162>>1]|0;C=c[f+144>>2]|0;u=a+4|0;o=c[a+200>>2]|0;if((o|0)!=0?(c[o+4>>2]|0)==(c[u>>2]|0):0)if((c[o>>2]|0)>>>0<6){w=o+152|0;w=e[w>>1]|e[w+2>>1]<<16;n=1;s=w&65535;w=w>>>16&65535;o=c[o+104>>2]|0}else{n=1;s=0;w=0;o=-1}else{n=0;s=0;w=0;o=-1}b:do if((o|0)==(C|0)){n=s;o=w}else{o=c[a+204>>2]|0;if((o|0)!=0?(c[o+4>>2]|0)==(c[u>>2]|0):0)if((c[o>>2]|0)>>>0<6){G=o+172|0;G=e[G>>1]|e[G+2>>1]<<16;t=o+188|0;p=c[o+108>>2]|0;l=c[o+112>>2]|0;n=G&65535;o=G>>>16&65535;t=e[t>>1]|e[t+2>>1]<<16}else{p=-1;l=-1;n=0;o=0;t=0}else T=107;do if((T|0)==107){o=c[a+212>>2]|0;if((o|0)!=0?(c[o+4>>2]|0)==(c[u>>2]|0):0){if((c[o>>2]|0)>>>0>=6){p=-1;l=-1;n=0;o=0;t=0;break}t=o+192|0;p=-1;l=c[o+112>>2]|0;n=0;o=0;t=e[t>>1]|e[t+2>>1]<<16;break}if(!n){p=-1;l=-1;n=0;o=0;t=0}else{n=s;o=w;break b}}while(0);m=(p|0)==(C|0);if(((m&1)+((l|0)==(C|0)&1)|0)==1){if(m)break;n=t&65535;o=t>>>16&65535;break}l=s<<16>>16;p=n<<16>>16;q=t<<16>>16;if(n<<16>>16>s<<16>>16){m=p;n=l}else{m=l;n=(p|0)<(l|0)?p:l}if((m|0)<(q|0))q=m;else q=(n|0)>(q|0)?n:q;n=w<<16>>16;m=o<<16>>16;l=t>>16;if(o<<16>>16>w<<16>>16)o=m;else{o=n;n=(m|0)<(n|0)?m:n}if((o|0)>=(l|0))o=(n|0)>(l|0)?n:l;n=q&65535;o=o&65535}while(0);n=(n&65535)+(x&65535)|0;o=(o&65535)+(y&65535)|0;if(((n<<16>>16)+8192|0)>>>0>16383){G=1;i=X;return G|0}if(((o<<16>>16)+2048|0)>>>0>4095){G=1;i=X;return G|0}m=ic(g,C)|0;if(!m){G=1;i=X;return G|0}x=a+132|0;z=a+136|0;A=a+140|0;y=a+144|0;G=a+164|0;F=a+168|0;E=a+172|0;w=a+176|0;b[a+176>>1]=n;b[a+178>>1]=o;w=e[w>>1]|e[w+2>>1]<<16;b[E>>1]=w;b[E+2>>1]=w>>>16;b[F>>1]=w;b[F+2>>1]=w>>>16;b[G>>1]=w;b[G+2>>1]=w>>>16;b[y>>1]=w;b[y+2>>1]=w>>>16;b[A>>1]=w;b[A+2>>1]=w>>>16;b[z>>1]=w;b[z+2>>1]=w>>>16;b[x>>1]=w;b[x+2>>1]=w>>>16;c[a+100>>2]=C;c[a+108>>2]=C;x=a+116|0;c[x>>2]=m;c[a+124>>2]=m;z=b[f+164>>1]|0;A=b[f+166>>1]|0;y=c[f+148>>2]|0;o=c[a+208>>2]|0;if((o|0)!=0?(c[o+4>>2]|0)==(c[u>>2]|0):0)if((c[o>>2]|0)>>>0<6){r=o+172|0;o=c[o+108>>2]|0;p=1;r=e[r>>1]|e[r+2>>1]<<16}else{o=-1;p=1;r=0}else{o=c[a+204>>2]|0;if((o|0)!=0?(c[o+4>>2]|0)==(c[u>>2]|0):0)if((c[o>>2]|0)>>>0<6){r=o+176|0;o=c[o+108>>2]|0;p=1;r=e[r>>1]|e[r+2>>1]<<16}else{o=-1;p=1;r=0}else{o=-1;p=0;r=0}}do if((o|0)!=(y|0)){s=w&65535;o=w>>>16;v=o&65535;n=c[a+204>>2]|0;if((n|0)!=0?(c[n+4>>2]|0)==(c[u>>2]|0):0)if((c[n>>2]|0)>>>0<6){u=n+188|0;u=e[u>>1]|e[u+2>>1]<<16;p=c[n+112>>2]|0;l=u&65535;u=u>>>16&65535}else{p=-1;l=0;u=0}else if(!p){m=w;break}else{p=-1;l=0;u=0}m=(C|0)==(y|0);n=(p|0)==(y|0);if(((n&1)+(m&1)|0)==1){if(m){m=w;break}if(n){o=u&65535;m=o<<16|l&65535;break}else{m=r;o=r>>>16;break}}o=w<<16>>16;p=l<<16>>16;q=r<<16>>16;if(l<<16>>16>s<<16>>16)m=p;else{m=o;o=(p|0)<(o|0)?p:o}if((m|0)>=(q|0))m=(o|0)>(q|0)?o:q;n=w>>16;l=u<<16>>16;p=r>>16;if(u<<16>>16>v<<16>>16)o=l;else{o=n;n=(l|0)<(n|0)?l:n}if((o|0)>=(p|0))o=(n|0)>(p|0)?n:p}else{m=r;o=r>>>16}while(0);m=(m&65535)+(z&65535)|0;n=(o&65535)+(A&65535)|0;if(((m<<16>>16)+8192|0)>>>0>16383){G=1;i=X;return G|0}if(((n<<16>>16)+2048|0)>>>0>4095){G=1;i=X;return G|0}o=ic(g,y)|0;if(!o){G=1;i=X;return G|0}else{G=a+148|0;E=a+152|0;D=a+156|0;C=a+160|0;B=a+180|0;A=a+184|0;z=a+188|0;F=a+192|0;b[a+192>>1]=m;b[a+194>>1]=n;F=e[F>>1]|e[F+2>>1]<<16;b[z>>1]=F;b[z+2>>1]=F>>>16;b[A>>1]=F;b[A+2>>1]=F>>>16;b[B>>1]=F;b[B+2>>1]=F>>>16;b[C>>1]=F;b[C+2>>1]=F>>>16;b[D>>1]=F;b[D+2>>1]=F>>>16;b[E>>1]=F;b[E+2>>1]=F>>>16;b[G>>1]=F;b[G+2>>1]=F>>>16;c[a+104>>2]=y;c[a+112>>2]=y;F=a+120|0;c[F>>2]=o;c[a+128>>2]=o;c[W>>2]=c[x>>2];dc(k,a+132|0,W,V,U,0,0,8,16);c[W>>2]=c[F>>2];dc(k,G,W,V,U,8,0,8,16);break}}else{S=a+4|0;H=0;c:while(1){D=f+(H<<2)+176|0;G=eb(c[D>>2]|0)|0;E=f+(H<<2)+192|0;c[a+(H<<2)+100>>2]=c[E>>2];F=ic(g,c[E>>2]|0)|0;c[a+(H<<2)+116>>2]=F;if(!F){l=1;T=212;break}if(G){J=H<<2;K=a+(J<<2)+132|0;O=a+(J<<2)+134|0;P=J|1;L=a+(P<<2)+132|0;P=a+(P<<2)+134|0;Q=J|2;M=a+(Q<<2)+132|0;Q=a+(Q<<2)+134|0;R=J|3;N=a+(R<<2)+132|0;R=a+(R<<2)+134|0;I=0;do{C=b[f+(H<<4)+(I<<2)+208>>1]|0;B=b[f+(H<<4)+(I<<2)+210>>1]|0;F=hb(c[D>>2]|0)|0;n=c[E>>2]|0;s=ub(a,c[6288+(H<<7)+(F<<5)+(I<<3)>>2]|0)|0;r=d[6288+(H<<7)+(F<<5)+(I<<3)+4>>0]|0;if((s|0)!=0?(c[s+4>>2]|0)==(c[S>>2]|0):0)if((c[s>>2]|0)>>>0<6){q=s+(r<<2)+132|0;q=e[q>>1]|e[q+2>>1]<<16;A=c[s+(r>>>2<<2)+100>>2]|0;o=q&65535;z=1;q=q>>>16&65535}else{A=-1;o=0;z=1;q=0}else{A=-1;o=0;z=0;q=0}v=ub(a,c[5776+(H<<7)+(F<<5)+(I<<3)>>2]|0)|0;l=d[5776+(H<<7)+(F<<5)+(I<<3)+4>>0]|0;if((v|0)!=0?(c[v+4>>2]|0)==(c[S>>2]|0):0)if((c[v>>2]|0)>>>0<6){p=v+(l<<2)+132|0;p=e[p>>1]|e[p+2>>1]<<16;y=1;x=c[v+(l>>>2<<2)+100>>2]|0;m=p&65535;p=p>>>16&65535}else{y=1;x=-1;m=0;p=0}else{y=0;x=-1;m=0;p=0}w=ub(a,c[5264+(H<<7)+(F<<5)+(I<<3)>>2]|0)|0;v=d[5264+(H<<7)+(F<<5)+(I<<3)+4>>0]|0;if((w|0)!=0?(c[w+4>>2]|0)==(c[S>>2]|0):0)if((c[w>>2]|0)>>>0<6){z=w+(v<<2)+132|0;z=e[z>>1]|e[z+2>>1]<<16;v=c[w+(v>>>2<<2)+100>>2]|0;T=180}else{z=0;v=-1;T=180}else T=175;do if((T|0)==175){T=0;w=ub(a,c[4752+(H<<7)+(F<<5)+(I<<3)>>2]|0)|0;v=d[4752+(H<<7)+(F<<5)+(I<<3)+4>>0]|0;if((w|0)!=0?(c[w+4>>2]|0)==(c[S>>2]|0):0){if((c[w>>2]|0)>>>0>=6){z=0;v=-1;T=180;break}z=w+(v<<2)+132|0;z=e[z>>1]|e[z+2>>1]<<16;v=c[w+(v>>>2<<2)+100>>2]|0;T=180;break}if((z|0)==0|(y|0)!=0){z=0;v=-1;T=180}else{v=o;t=q}}while(0);do if((T|0)==180){l=(A|0)==(n|0);w=(x|0)==(n|0);if(((w&1)+(l&1)+((v|0)==(n|0)&1)|0)==1){if(l|w){v=l?o:m;t=l?q:p;break}v=z&65535;t=z>>>16&65535;break}u=o<<16>>16;w=m<<16>>16;l=z<<16>>16;if(m<<16>>16>o<<16>>16)v=w;else{v=u;u=(w|0)<(u|0)?w:u}if((v|0)<(l|0))w=v;else w=(u|0)>(l|0)?u:l;t=q<<16>>16;v=p<<16>>16;l=z>>16;if(p<<16>>16>q<<16>>16)s=v;else{s=t;t=(v|0)<(t|0)?v:t}if((s|0)>=(l|0))s=(t|0)>(l|0)?t:l;v=w&65535;t=s&65535}while(0);C=(v&65535)+(C&65535)|0;q=C&65535;s=(t&65535)+(B&65535)|0;r=s&65535;if(((C<<16>>16)+8192|0)>>>0>16383){l=1;T=212;break c}if(((s<<16>>16)+2048|0)>>>0>4095){l=1;T=212;break c}if((F|0)==1){F=(I<<1)+J|0;b[a+(F<<2)+132>>1]=q;b[a+(F<<2)+134>>1]=r;F=F|1;b[a+(F<<2)+132>>1]=q;b[a+(F<<2)+134>>1]=r}else if((F|0)==2){F=I+J|0;b[a+(F<<2)+132>>1]=q;b[a+(F<<2)+134>>1]=r;F=F+2|0;b[a+(F<<2)+132>>1]=q;b[a+(F<<2)+134>>1]=r}else if((F|0)==3){F=I+J|0;b[a+(F<<2)+132>>1]=q;b[a+(F<<2)+134>>1]=r}else if(!F){b[K>>1]=q;b[O>>1]=r;b[L>>1]=q;b[P>>1]=r;b[M>>1]=q;b[Q>>1]=r;b[N>>1]=q;b[R>>1]=r}I=I+1|0}while(I>>>0<G>>>0)}H=H+1|0;if(H>>>0>=4){T=201;break}}if((T|0)==201){o=0;do{c[W>>2]=c[a+(o<<2)+116>>2];m=hb(c[f+(o<<2)+176>>2]|0)|0;l=o<<3&8;n=o>>>0<2?0:8;if(!m)dc(k,a+(o<<2<<2)+132|0,W,V,U,l,n,8,8);else if((m|0)==1){G=o<<2;dc(k,a+(G<<2)+132|0,W,V,U,l,n,8,4);dc(k,a+((G|2)<<2)+132|0,W,V,U,l,n|4,8,4)}else if((m|0)==2){G=o<<2;dc(k,a+(G<<2)+132|0,W,V,U,l,n,4,8);dc(k,a+((G|1)<<2)+132|0,W,V,U,l|4,n,4,8)}else{E=o<<2;dc(k,a+(E<<2)+132|0,W,V,U,l,n,4,4);F=l|4;dc(k,a+((E|1)<<2)+132|0,W,V,U,F,n,4,4);G=n|4;dc(k,a+((E|2)<<2)+132|0,W,V,U,l,G,4,4);dc(k,a+((E|3)<<2)+132|0,W,V,U,F,G,4,4)}o=o+1|0}while((o|0)!=4)}else if((T|0)==212){i=X;return l|0}}while(0);if((c[a+196>>2]|0)>>>0>1){G=0;i=X;return G|0}if(!(c[a>>2]|0)){sc(j,k);G=0;i=X;return G|0}else{tc(j,h,k,f+328|0);G=0;i=X;return G|0}return 0}function Tb(b,c,e,f,g,h,j,k,l){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0;B=i;i=i+144|0;m=B;if((e|0)>=0?!((e+1+k|0)>>>0>g>>>0|(f|0)<0|(l+f|0)>>>0>h>>>0):0)m=b;else{A=k+1|0;Ub(b,m,e,f,g,h,A,l,A);Ub(b+(Z(h,g)|0)|0,m+(Z(A,l)|0)|0,e,f,g,h,A,l,A);h=l;g=A;e=0;f=0}A=8-j|0;v=l>>>1;z=(v|0)==0;w=k>>>1;y=(w|0)==0;x=16-k|0;u=(g<<1)-k|0;s=g+1|0;t=g+2|0;p=w<<1;r=0;do{l=m+((Z((Z(r,h)|0)+f|0,g)|0)+e)|0;if(!(z|y)){q=c+(r<<6)|0;o=v;while(1){k=q;b=l;n=w;while(1){D=d[b>>0]|0;E=d[b+s>>0]|0;F=b;b=b+2|0;C=d[F+1>>0]|0;a[k+8>>0]=(((Z(E,j)|0)+(Z(d[F+g>>0]|0,A)|0)<<3)+32|0)>>>6;a[k>>0]=(((Z(C,j)|0)+(Z(D,A)|0)<<3)+32|0)>>>6;D=d[b>>0]|0;a[k+9>>0]=(((Z(d[F+t>>0]|0,j)|0)+(Z(E,A)|0)<<3)+32|0)>>>6;a[k+1>>0]=(((Z(D,j)|0)+(Z(C,A)|0)<<3)+32|0)>>>6;n=n+-1|0;if(!n)break;else k=k+2|0}o=o+-1|0;if(!o)break;else{q=q+(p+x)|0;l=l+(p+u)|0}}}r=r+1|0}while((r|0)!=2);i=B;return}function Ub(a,b,c,d,e,f,g,h,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;var k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;t=i;k=g+c|0;o=h+d|0;s=(c|0)<0|(k|0)>(e|0)?2:1;m=(o|0)<0?0-h|0:d;d=(k|0)<0?0-g|0:c;m=(m|0)>(f|0)?f:m;d=(d|0)>(e|0)?e:d;k=d+g|0;l=m+h|0;if((d|0)>0)a=a+d|0;if((m|0)>0)a=a+(Z(m,e)|0)|0;r=(d|0)<0?0-d|0:0;q=(k|0)>(e|0)?k-e|0:0;p=g-r-q|0;g=0-m|0;m=(m|0)<0?g:0;c=l-f|0;n=(l|0)>(f|0)?c:0;k=h-m|0;d=k-n|0;if(m){m=h+-1-((o|0)>0?o:0)|0;l=~f;l=(m|0)>(l|0)?m:l;m=~l;m=Z(l+((m|0)>0?m:0)+1|0,j)|0;l=b;while(1){xa[s&3](a,l,r,p,q);g=g+-1|0;if(!g)break;else l=l+j|0}b=b+m|0}if((k|0)!=(n|0)){l=h+-1|0;g=l-((o|0)>0?o:0)|0;k=~f;k=(g|0)>(k|0)?g:k;l=l-k|0;g=~k;g=h+f+-1-((l|0)<(f|0)?f:l)-k-((g|0)>0?g:0)|0;k=Z(g,j)|0;g=Z(g,e)|0;l=b;m=a;while(1){xa[s&3](m,l,r,p,q);d=d+-1|0;if(!d)break;else{l=l+j|0;m=m+e|0}}b=b+k|0;a=a+g|0}a=a+(0-e)|0;if(!n){i=t;return}while(1){xa[s&3](a,b,r,p,q);c=c+-1|0;if(!c)break;else b=b+j|0}i=t;return}function Vb(b,c,e,f,g,h,j,k,l){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0;C=i;i=i+144|0;m=C;if(((e|0)>=0?!((k+e|0)>>>0>g>>>0|(f|0)<0):0)?(f+1+l|0)>>>0<=h>>>0:0)m=b;else{A=l+1|0;Ub(b,m,e,f,g,h,k,A,k);Ub(b+(Z(h,g)|0)|0,m+(Z(A,k)|0)|0,e,f,g,h,k,A,k);h=A;g=k;e=0;f=0}B=8-j|0;w=l>>>1;A=(w|0)==0;x=k>>>1;z=(x|0)==0;y=16-k|0;v=g<<1;u=v-k|0;t=v|1;s=g+1|0;p=x<<1;r=0;do{l=m+((Z((Z(r,h)|0)+f|0,g)|0)+e)|0;if(!(A|z)){q=c+(r<<6)|0;o=w;while(1){k=q;b=l;n=x;while(1){D=d[b+g>>0]|0;E=d[b>>0]|0;a[k+8>>0]=(((Z(D,B)|0)+(Z(d[b+v>>0]|0,j)|0)<<3)+32|0)>>>6;a[k>>0]=(((Z(E,B)|0)+(Z(D,j)|0)<<3)+32|0)>>>6;D=d[b+s>>0]|0;E=d[b+1>>0]|0;a[k+9>>0]=(((Z(D,B)|0)+(Z(d[b+t>>0]|0,j)|0)<<3)+32|0)>>>6;a[k+1>>0]=(((Z(E,B)|0)+(Z(D,j)|0)<<3)+32|0)>>>6;n=n+-1|0;if(!n)break;else{k=k+2|0;b=b+2|0}}o=o+-1|0;if(!o)break;else{q=q+(p+y)|0;l=l+(p+u)|0}}}r=r+1|0}while((r|0)!=2);i=C;return}function Wb(b,c,e,f,g,h,j,k,l,m){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;m=m|0;var n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0;I=i;i=i+176|0;n=I;if(((e|0)>=0?!((e+1+l|0)>>>0>g>>>0|(f|0)<0):0)?(f+1+m|0)>>>0<=h>>>0:0)n=b;else{B=l+1|0;A=m+1|0;Ub(b,n,e,f,g,h,B,A,B);Ub(b+(Z(h,g)|0)|0,n+(Z(A,B)|0)|0,e,f,g,h,B,A,B);h=A;g=B;e=0;f=0}G=8-j|0;H=8-k|0;B=m>>>1;E=(B|0)==0;A=g<<1;C=l>>>1;F=(C|0)==0;D=16-l|0;z=A-l|0;v=g+1|0;w=A|1;x=g+2|0;y=A+2|0;s=C<<1;u=0;do{l=n+((Z((Z(u,h)|0)+f|0,g)|0)+e)|0;if(!(E|F)){t=c+(u<<6)|0;r=B;while(1){p=d[l+g>>0]|0;m=t;b=l;o=(Z(p,k)|0)+(Z(d[l>>0]|0,H)|0)|0;p=(Z(d[l+A>>0]|0,k)|0)+(Z(p,H)|0)|0;q=C;while(1){K=d[b+v>>0]|0;J=(Z(K,k)|0)+(Z(d[b+1>>0]|0,H)|0)|0;K=(Z(d[b+w>>0]|0,k)|0)+(Z(K,H)|0)|0;M=((Z(o,G)|0)+32+(Z(J,j)|0)|0)>>>6;a[m+8>>0]=((Z(p,G)|0)+32+(Z(K,j)|0)|0)>>>6;a[m>>0]=M;M=b;b=b+2|0;L=d[M+x>>0]|0;o=(Z(L,k)|0)+(Z(d[b>>0]|0,H)|0)|0;p=(Z(d[M+y>>0]|0,k)|0)+(Z(L,H)|0)|0;J=((Z(J,G)|0)+32+(Z(o,j)|0)|0)>>>6;a[m+9>>0]=((Z(K,G)|0)+32+(Z(p,j)|0)|0)>>>6;a[m+1>>0]=J;q=q+-1|0;if(!q)break;else m=m+2|0}r=r+-1|0;if(!r)break;else{t=t+(s+D)|0;l=l+(s+z)|0}}}u=u+1|0}while((u|0)!=2);i=I;return}function Xb(b,c,e,f,g,h,j,k){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;var l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0;r=i;i=i+448|0;l=r;if(((e|0)>=0?!((j+e|0)>>>0>g>>>0|(f|0)<0):0)?(f+5+k|0)>>>0<=h>>>0:0)l=b;else{Ub(b,l,e,f,g,h,j,k+5|0,j);g=j;e=0;f=0}h=e+g+(Z(f,g)|0)|0;b=k>>>2;if(!b){i=r;return}n=g<<2;q=0-g|0;o=q<<1;p=g<<1;if(!j){i=r;return}else{m=l+h|0;e=l+(h+(g*5|0))|0}while(1){l=j;h=c;k=m;f=e;while(1){u=d[f+o>>0]|0;v=d[f+q>>0]|0;w=d[f+g>>0]|0;y=d[f>>0]|0;x=w+u|0;s=d[k+p>>0]|0;a[h+48>>0]=a[((d[f+p>>0]|0)+16-x-(x<<2)+s+((y+v|0)*20|0)>>5)+3984>>0]|0;x=s+y|0;t=d[k+g>>0]|0;a[h+32>>0]=a[(w+16-x-(x<<2)+t+((v+u|0)*20|0)>>5)+3984>>0]|0;x=t+v|0;w=d[k>>0]|0;a[h+16>>0]=a[(y+16-x-(x<<2)+w+((s+u|0)*20|0)>>5)+3984>>0]|0;u=w+u|0;a[h>>0]=a[(v+16-u-(u<<2)+(d[k+q>>0]|0)+((t+s|0)*20|0)>>5)+3984>>0]|0;l=l+-1|0;if(!l)break;else{h=h+1|0;k=k+1|0;f=f+1|0}}b=b+-1|0;if(!b)break;else{c=c+64|0;m=m+n|0;e=e+n|0}}i=r;return}function Yb(b,c,e,f,g,h,j,k,l){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0;v=i;i=i+448|0;m=v;if(((e|0)>=0?!((j+e|0)>>>0>g>>>0|(f|0)<0):0)?(f+5+k|0)>>>0<=h>>>0:0)m=b;else{Ub(b,m,e,f,g,h,j,k+5|0,j);g=j;e=0;f=0}h=e+g+(Z(f,g)|0)|0;b=k>>>2;if(!b){i=v;return}u=(j|0)==0;s=(g<<2)-j|0;t=64-j|0;r=0-g|0;p=r<<1;q=g<<1;e=m+h|0;f=m+(h+(Z(g,l+2|0)|0))|0;m=m+(h+(g*5|0))|0;while(1){if(u){h=c;k=f}else{k=f+j|0;h=c+j|0;l=j;o=e;n=m;while(1){y=d[n+p>>0]|0;z=d[n+r>>0]|0;A=d[n+g>>0]|0;C=d[n>>0]|0;B=A+y|0;w=d[o+q>>0]|0;a[c+48>>0]=((d[((d[n+q>>0]|0)+16-B-(B<<2)+w+((C+z|0)*20|0)>>5)+3984>>0]|0)+1+(d[f+q>>0]|0)|0)>>>1;B=w+C|0;x=d[o+g>>0]|0;a[c+32>>0]=((d[(A+16-B-(B<<2)+x+((z+y|0)*20|0)>>5)+3984>>0]|0)+1+(d[f+g>>0]|0)|0)>>>1;B=x+z|0;A=d[o>>0]|0;a[c+16>>0]=((d[(C+16-B-(B<<2)+A+((w+y|0)*20|0)>>5)+3984>>0]|0)+1+(d[f>>0]|0)|0)>>>1;y=A+y|0;a[c>>0]=((d[(z+16-y-(y<<2)+(d[o+r>>0]|0)+((x+w|0)*20|0)>>5)+3984>>0]|0)+1+(d[f+r>>0]|0)|0)>>>1;l=l+-1|0;if(!l)break;else{c=c+1|0;o=o+1|0;f=f+1|0;n=n+1|0}}e=e+j|0;m=m+j|0}b=b+-1|0;if(!b)break;else{c=h+t|0;e=e+s|0;f=k+s|0;m=m+s|0}}i=v;return}function Zb(b,c,e,f,g,h,j,k){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;var l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;u=i;i=i+448|0;l=u;if((e|0)>=0?!((e+5+j|0)>>>0>g>>>0|(f|0)<0|(k+f|0)>>>0>h>>>0):0)l=b;else{n=j+5|0;Ub(b,l,e,f,g,h,n,k,n);g=n;e=0;f=0}if(!k){i=u;return}r=j>>>2;t=(r|0)==0;s=g-j|0;q=16-j|0;p=r<<2;b=c;l=l+(e+5+(Z(f,g)|0))|0;o=k;while(1){if(t)h=b;else{h=b+p|0;e=l;g=d[l+-1>>0]|0;k=d[l+-2>>0]|0;m=d[l+-3>>0]|0;n=d[l+-4>>0]|0;j=d[l+-5>>0]|0;c=r;while(1){f=n+g|0;v=n;n=d[e>>0]|0;a[b>>0]=a[(j+16-f-(f<<2)+n+((m+k|0)*20|0)>>5)+3984>>0]|0;j=n+m|0;f=m;m=d[e+1>>0]|0;a[b+1>>0]=a[(v+16-j-(j<<2)+m+((k+g|0)*20|0)>>5)+3984>>0]|0;j=m+k|0;v=k;k=d[e+2>>0]|0;a[b+2>>0]=a[(f+16-j-(j<<2)+k+((n+g|0)*20|0)>>5)+3984>>0]|0;j=k+g|0;f=d[e+3>>0]|0;a[b+3>>0]=a[(v+16-j-(j<<2)+f+((m+n|0)*20|0)>>5)+3984>>0]|0;c=c+-1|0;if(!c)break;else{j=g;b=b+4|0;e=e+4|0;g=f}}l=l+p|0}o=o+-1|0;if(!o)break;else{b=h+q|0;l=l+s|0}}i=u;return}function _b(b,c,e,f,g,h,j,k,l){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;v=i;i=i+448|0;m=v;if((e|0)>=0?!((e+5+j|0)>>>0>g>>>0|(f|0)<0|(k+f|0)>>>0>h>>>0):0)m=b;else{o=j+5|0;Ub(b,m,e,f,g,h,o,k,o);g=o;e=0;f=0}if(!k){i=v;return}s=j>>>2;u=(s|0)==0;t=g-j|0;r=16-j|0;q=(l|0)!=0;p=s<<2;b=c;m=m+(e+5+(Z(f,g)|0))|0;while(1){if(u)h=b;else{h=b+p|0;l=m;e=d[m+-1>>0]|0;g=d[m+-2>>0]|0;n=d[m+-3>>0]|0;o=d[m+-4>>0]|0;j=d[m+-5>>0]|0;c=s;while(1){f=o+e|0;w=o;o=d[l>>0]|0;a[b>>0]=((q?g:n)+1+(d[(j+16-f-(f<<2)+o+((n+g|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;j=o+n|0;f=n;n=d[l+1>>0]|0;a[b+1>>0]=((q?e:g)+1+(d[(w+16-j-(j<<2)+n+((g+e|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;j=n+g|0;w=g;g=d[l+2>>0]|0;a[b+2>>0]=((q?o:e)+1+(d[(f+16-j-(j<<2)+g+((o+e|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;j=g+e|0;f=d[l+3>>0]|0;a[b+3>>0]=((q?n:o)+1+(d[(w+16-j-(j<<2)+f+((n+o|0)*20|0)>>5)+3984>>0]|0)|0)>>>1;
c=c+-1|0;if(!c)break;else{j=e;b=b+4|0;l=l+4|0;e=f}}m=m+p|0}k=k+-1|0;if(!k)break;else{b=h+r|0;m=m+t|0}}i=v;return}function $b(b,c,e,f,g,h,j,k,l){b=b|0;c=c|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0;z=i;i=i+448|0;m=z;if(((e|0)>=0?!((e+5+j|0)>>>0>g>>>0|(f|0)<0):0)?(f+5+k|0)>>>0<=h>>>0:0)m=b;else{y=j+5|0;Ub(b,m,e,f,g,h,y,k+5|0,y);g=y;e=0;f=0}b=(Z(f,g)|0)+e|0;y=(l&1|2)+g+b|0;n=m+y|0;if(!k){i=z;return}u=j>>>2;w=(u|0)==0;v=g-j|0;x=16-j|0;t=u<<2;b=m+((Z(g,l>>>1&1|2)|0)+5+b)|0;s=k;while(1){if(!w){r=c+t|0;h=b;e=d[b+-1>>0]|0;f=d[b+-2>>0]|0;o=d[b+-3>>0]|0;p=d[b+-4>>0]|0;l=d[b+-5>>0]|0;q=u;while(1){A=p+e|0;B=p;p=d[h>>0]|0;a[c>>0]=a[(l+16-A-(A<<2)+p+((o+f|0)*20|0)>>5)+3984>>0]|0;A=p+o|0;l=o;o=d[h+1>>0]|0;a[c+1>>0]=a[(B+16-A-(A<<2)+o+((f+e|0)*20|0)>>5)+3984>>0]|0;A=o+f|0;B=f;f=d[h+2>>0]|0;a[c+2>>0]=a[(l+16-A-(A<<2)+f+((p+e|0)*20|0)>>5)+3984>>0]|0;A=f+e|0;l=d[h+3>>0]|0;a[c+3>>0]=a[(B+16-A-(A<<2)+l+((o+p|0)*20|0)>>5)+3984>>0]|0;q=q+-1|0;if(!q)break;else{A=e;c=c+4|0;h=h+4|0;e=l;l=A}}c=r;b=b+t|0}s=s+-1|0;if(!s)break;else{c=c+x|0;b=b+v|0}}b=k>>>2;if(!b){i=z;return}t=(j|0)==0;p=(g<<2)-j|0;o=64-j|0;q=0-g|0;s=q<<1;r=g<<1;c=c+(x-(k<<4))|0;h=m+(y+(g*5|0))|0;l=b;while(1){if(t){b=c;m=n}else{b=c+j|0;m=c;e=n;f=h;c=j;while(1){x=d[f+s>>0]|0;w=d[f+q>>0]|0;u=d[f+g>>0]|0;B=d[f>>0]|0;y=u+x|0;k=d[e+r>>0]|0;A=m+48|0;a[A>>0]=((d[((d[f+r>>0]|0)+16-y-(y<<2)+k+((B+w|0)*20|0)>>5)+3984>>0]|0)+1+(d[A>>0]|0)|0)>>>1;A=k+B|0;y=d[e+g>>0]|0;v=m+32|0;a[v>>0]=((d[(u+16-A-(A<<2)+y+((w+x|0)*20|0)>>5)+3984>>0]|0)+1+(d[v>>0]|0)|0)>>>1;v=d[e>>0]|0;A=y+w|0;u=m+16|0;a[u>>0]=((d[(B+16-A-(A<<2)+v+((k+x|0)*20|0)>>5)+3984>>0]|0)+1+(d[u>>0]|0)|0)>>>1;x=v+x|0;a[m>>0]=((d[(w+16-x-(x<<2)+(d[e+q>>0]|0)+((y+k|0)*20|0)>>5)+3984>>0]|0)+1+(d[m>>0]|0)|0)>>>1;c=c+-1|0;if(!c)break;else{m=m+1|0;e=e+1|0;f=f+1|0}}m=n+j|0;h=h+j|0}l=l+-1|0;if(!l)break;else{c=b+o|0;n=m+p|0;h=h+p|0}}i=z;return}function ac(b,e,f,g,h,j,k,l){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;x=i;i=i+1792|0;m=x+1344|0;w=x;if(((f|0)>=0?!((f+5+k|0)>>>0>h>>>0|(g|0)<0):0)?(g+5+l|0)>>>0<=j>>>0:0){o=l+5|0;m=b;n=f+5|0}else{n=k+5|0;o=l+5|0;Ub(b,m,f,g,h,j,n,o,n);h=n;n=5;g=0}if(o){t=k>>>2;v=(t|0)==0;s=h-k|0;u=t<<2;f=w;m=m+(n+(Z(g,h)|0))|0;while(1){if(v)b=f;else{b=f+(u<<2)|0;g=m;h=d[m+-1>>0]|0;j=d[m+-2>>0]|0;p=d[m+-3>>0]|0;q=d[m+-4>>0]|0;n=d[m+-5>>0]|0;r=t;while(1){y=q+h|0;z=q;q=d[g>>0]|0;c[f>>2]=n-y-(y<<2)+q+((p+j|0)*20|0);y=q+p|0;n=p;p=d[g+1>>0]|0;c[f+4>>2]=z-y+p-(y<<2)+((j+h|0)*20|0);y=p+j|0;z=j;j=d[g+2>>0]|0;c[f+8>>2]=n-y+j-(y<<2)+((q+h|0)*20|0);y=j+h|0;n=d[g+3>>0]|0;c[f+12>>2]=z-y+n-(y<<2)+((p+q|0)*20|0);r=r+-1|0;if(!r)break;else{y=h;f=f+16|0;g=g+4|0;h=n;n=y}}m=m+u|0}o=o+-1|0;if(!o)break;else{f=b;m=m+s|0}}}h=l>>>2;if(!h){i=x;return}u=(k|0)==0;s=64-k|0;p=k*3|0;t=0-k|0;q=t<<1;r=k<<1;g=e;b=w+(k<<2)|0;m=w+(k*6<<2)|0;o=h;while(1){if(u)h=g;else{h=g+k|0;f=b;j=m;n=k;while(1){e=c[j+(q<<2)>>2]|0;w=c[j+(t<<2)>>2]|0;z=c[j+(k<<2)>>2]|0;A=c[j>>2]|0;y=z+e|0;v=c[f+(r<<2)>>2]|0;a[g+48>>0]=a[((c[j+(r<<2)>>2]|0)+512-y-(y<<2)+v+((A+w|0)*20|0)>>10)+3984>>0]|0;y=v+A|0;l=c[f+(k<<2)>>2]|0;a[g+32>>0]=a[(z+512-y-(y<<2)+l+((w+e|0)*20|0)>>10)+3984>>0]|0;y=c[f>>2]|0;z=l+w|0;a[g+16>>0]=a[(A+512-z-(z<<2)+y+((v+e|0)*20|0)>>10)+3984>>0]|0;e=y+e|0;a[g>>0]=a[(w+512-e-(e<<2)+(c[f+(t<<2)>>2]|0)+((l+v|0)*20|0)>>10)+3984>>0]|0;n=n+-1|0;if(!n)break;else{g=g+1|0;f=f+4|0;j=j+4|0}}b=b+(k<<2)|0;m=m+(k<<2)|0}o=o+-1|0;if(!o)break;else{g=h+s|0;b=b+(p<<2)|0;m=m+(p<<2)|0}}i=x;return}function bc(b,e,f,g,h,j,k,l,m){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;m=m|0;var n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0;y=i;i=i+1792|0;n=y+1344|0;x=y;if(((f|0)>=0?!((f+5+k|0)>>>0>h>>>0|(g|0)<0):0)?(g+5+l|0)>>>0<=j>>>0:0){o=l+5|0;n=b;f=f+5|0}else{q=k+5|0;o=l+5|0;Ub(b,n,f,g,h,j,q,o,q);h=q;f=5;g=0}if(o){v=k>>>2;t=(v|0)==0;u=h-k|0;w=v<<2;p=x;n=n+(f+(Z(g,h)|0))|0;s=o;while(1){if(t)b=p;else{b=p+(w<<2)|0;g=n;f=d[n+-1>>0]|0;h=d[n+-2>>0]|0;j=d[n+-3>>0]|0;q=d[n+-4>>0]|0;o=d[n+-5>>0]|0;r=v;while(1){z=q+f|0;A=q;q=d[g>>0]|0;c[p>>2]=o-z-(z<<2)+q+((j+h|0)*20|0);z=q+j|0;o=j;j=d[g+1>>0]|0;c[p+4>>2]=A-z+j-(z<<2)+((h+f|0)*20|0);z=j+h|0;A=h;h=d[g+2>>0]|0;c[p+8>>2]=o-z+h-(z<<2)+((q+f|0)*20|0);z=h+f|0;o=d[g+3>>0]|0;c[p+12>>2]=A-z+o-(z<<2)+((j+q|0)*20|0);r=r+-1|0;if(!r)break;else{z=f;p=p+16|0;g=g+4|0;f=o;o=z}}n=n+w|0}s=s+-1|0;if(!s)break;else{p=b;n=n+u|0}}}f=l>>>2;if(!f){i=y;return}w=(k|0)==0;u=64-k|0;q=k*3|0;v=0-k|0;t=v<<1;s=k<<1;b=x+(k<<2)|0;n=x+((Z(m+2|0,k)|0)+k<<2)|0;h=x+(k*6<<2)|0;r=f;while(1){if(w){g=e;f=n}else{f=n+(k<<2)|0;g=e+k|0;p=b;j=h;o=k;while(1){m=c[j+(t<<2)>>2]|0;l=c[j+(v<<2)>>2]|0;B=c[j+(k<<2)>>2]|0;C=c[j>>2]|0;A=B+m|0;z=c[p+(s<<2)>>2]|0;a[e+48>>0]=((d[((c[j+(s<<2)>>2]|0)+512-A-(A<<2)+z+((C+l|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[n+(s<<2)>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;A=z+C|0;x=c[p+(k<<2)>>2]|0;a[e+32>>0]=((d[(B+512-A-(A<<2)+x+((l+m|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[n+(k<<2)>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;A=c[p>>2]|0;B=x+l|0;a[e+16>>0]=((d[(C+512-B-(B<<2)+A+((z+m|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[n>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;m=A+m|0;a[e>>0]=((d[(l+512-m-(m<<2)+(c[p+(v<<2)>>2]|0)+((x+z|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[n+(v<<2)>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;o=o+-1|0;if(!o)break;else{e=e+1|0;p=p+4|0;n=n+4|0;j=j+4|0}}b=b+(k<<2)|0;h=h+(k<<2)|0}r=r+-1|0;if(!r)break;else{e=g+u|0;b=b+(q<<2)|0;n=f+(q<<2)|0;h=h+(q<<2)|0}}i=y;return}function cc(b,e,f,g,h,j,k,l,m){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;m=m|0;var n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0;B=i;i=i+1792|0;n=B+1344|0;A=B;z=k+5|0;if(((f|0)>=0?!((f+5+k|0)>>>0>h>>>0|(g|0)<0):0)?(g+5+l|0)>>>0<=j>>>0:0)n=b;else{Ub(b,n,f,g,h,j,z,l+5|0,z);h=z;f=0;g=0}s=f+h+(Z(g,h)|0)|0;g=l>>>2;if(g){y=(z|0)==0;x=(h<<2)-k+-5|0;t=z*3|0;p=0-h|0;w=p<<1;v=h<<1;u=z<<1;q=-5-k|0;j=A+(z<<2)|0;r=n+s|0;f=n+(s+(h*5|0))|0;while(1){if(y)s=j;else{s=j+(z<<2)|0;n=r;b=f;o=z;while(1){E=d[b+w>>0]|0;F=d[b+p>>0]|0;H=d[b+h>>0]|0;I=d[b>>0]|0;G=H+E|0;C=d[n+v>>0]|0;c[j+(u<<2)>>2]=(d[b+v>>0]|0)-G-(G<<2)+C+((I+F|0)*20|0);G=C+I|0;D=d[n+h>>0]|0;c[j+(z<<2)>>2]=H-G+D-(G<<2)+((F+E|0)*20|0);G=d[n>>0]|0;H=D+F|0;c[j>>2]=I-H+G-(H<<2)+((C+E|0)*20|0);E=G+E|0;c[j+(q<<2)>>2]=F-E+(d[n+p>>0]|0)-(E<<2)+((D+C|0)*20|0);o=o+-1|0;if(!o)break;else{j=j+4|0;n=n+1|0;b=b+1|0}}r=r+z|0;f=f+z|0}g=g+-1|0;if(!g)break;else{j=s+(t<<2)|0;r=r+x|0;f=f+x|0}}}if(!l){i=B;return}v=k>>>2;w=(v|0)==0;u=16-k|0;t=v<<2;h=A+(m+2<<2)|0;g=A+20|0;while(1){if(w)f=h;else{f=h+(t<<2)|0;s=e;n=g;j=c[g+-4>>2]|0;o=c[g+-8>>2]|0;p=c[g+-12>>2]|0;q=c[g+-16>>2]|0;b=c[g+-20>>2]|0;r=v;while(1){m=q+j|0;k=q;q=c[n>>2]|0;a[s>>0]=((d[(b+512-m-(m<<2)+q+((p+o|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[h>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;m=q+p|0;b=p;p=c[n+4>>2]|0;a[s+1>>0]=((d[(k+512-m-(m<<2)+p+((o+j|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[h+4>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;m=p+o|0;k=o;o=c[n+8>>2]|0;a[s+2>>0]=((d[(b+512-m-(m<<2)+o+((q+j|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[h+8>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;m=o+j|0;b=c[n+12>>2]|0;a[s+3>>0]=((d[(k+512-m-(m<<2)+b+((p+q|0)*20|0)>>10)+3984>>0]|0)+1+(d[((c[h+12>>2]|0)+16>>5)+3984>>0]|0)|0)>>>1;r=r+-1|0;if(!r)break;else{m=j;s=s+4|0;h=h+16|0;n=n+16|0;j=b;b=m}}e=e+t|0;g=g+(t<<2)|0}l=l+-1|0;if(!l)break;else{e=e+u|0;h=f+20|0;g=g+20|0}}i=B;return}function dc(a,d,e,f,g,h,j,k,l){a=a|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;x=i;q=a+((j<<4)+h)|0;u=b[d>>1]|0;w=d+2|0;t=b[w>>1]|0;s=e+4|0;p=c[s>>2]<<4;r=e+8|0;o=c[r>>2]<<4;f=h+f|0;m=f+(u>>2)|0;g=j+g|0;n=g+(t>>2)|0;do switch(c[6800+((u&3)<<4)+((t&3)<<2)>>2]|0){case 10:{ac(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l);break}case 12:{_b(c[e>>2]|0,q,m+-2|0,n,p,o,k,l,1);break}case 5:{$b(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,0);break}case 7:{$b(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,2);break}case 9:{bc(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,0);break}case 0:{Ub(c[e>>2]|0,q,m,n,p,o,k,l,16);break}case 4:{_b(c[e>>2]|0,q,m+-2|0,n,p,o,k,l,0);break}case 1:{Yb(c[e>>2]|0,q,m,n+-2|0,p,o,k,l,0);break}case 14:{cc(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,1);break}case 3:{Yb(c[e>>2]|0,q,m,n+-2|0,p,o,k,l,1);break}case 8:{Zb(c[e>>2]|0,q,m+-2|0,n,p,o,k,l);break}case 2:{Xb(c[e>>2]|0,q,m,n+-2|0,p,o,k,l);break}case 6:{cc(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,0);break}case 11:{bc(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,1);break}case 13:{$b(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,1);break}default:$b(c[e>>2]|0,q,m+-2|0,n+-2|0,p,o,k,l,3)}while(0);u=(h>>>1)+256+(j>>>1<<3)|0;v=a+u|0;t=c[e>>2]|0;m=c[s>>2]|0;j=c[r>>2]|0;r=m<<3;s=j<<3;p=b[d>>1]|0;e=(p>>3)+(f>>>1)|0;q=b[w>>1]|0;o=(q>>3)+(g>>>1)|0;p=p&7;q=q&7;g=k>>>1;h=l>>>1;j=Z(m<<8,j)|0;f=t+j|0;m=(p|0)!=0;n=(q|0)!=0;if(m&n){Wb(f,v,e,o,r,s,p,q,g,h);i=x;return}if(m){Tb(f,v,e,o,r,s,p,g,h);i=x;return}if(n){Vb(f,v,e,o,r,s,q,g,h);i=x;return}else{Ub(f,v,e,o,r,s,g,h,8);Ub(t+((Z(s,r)|0)+j)|0,a+(u+64)|0,e,o,r,s,g,h,8);i=x;return}}function ec(b,c,d,e,f){b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0;j=i;if(d){nd(c|0,a[b>>0]|0,d|0)|0;c=c+d|0}if(e){h=c+e|0;g=e;d=b;while(1){a[c>>0]=a[d>>0]|0;g=g+-1|0;if(!g)break;else{c=c+1|0;d=d+1|0}}c=h;b=b+e|0}if(!f){i=j;return}nd(c|0,a[b+-1>>0]|0,f|0)|0;i=j;return}function fc(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;c=i;hd(b,a,d);i=c;return}function gc(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;q=i;f=c[a+40>>2]|0;if(f){h=c[a>>2]|0;k=a+32|0;j=0;do{if(((c[h+(j*40|0)+20>>2]|0)+-1|0)>>>0<2){g=c[h+(j*40|0)+12>>2]|0;if(g>>>0>d>>>0)g=g-(c[k>>2]|0)|0;c[h+(j*40|0)+8>>2]=g}j=j+1|0}while((j|0)!=(f|0))}if(!(c[b>>2]|0)){p=0;i=q;return p|0}g=c[b+4>>2]|0;if(g>>>0>=3){p=0;i=q;return p|0}o=a+32|0;p=a+24|0;n=a+4|0;f=d;m=0;a:while(1){b:do if(g>>>0<2){k=c[b+(m*12|0)+8>>2]|0;if(!g){g=f-k|0;if((g|0)<0)g=(c[o>>2]|0)+g|0}else{l=k+f|0;g=c[o>>2]|0;g=l-((l|0)<(g|0)?0:g)|0}if(g>>>0>d>>>0)f=g-(c[o>>2]|0)|0;else f=g;j=c[p>>2]|0;if(!j){f=1;g=37;break a}k=c[a>>2]|0;l=0;while(1){h=c[k+(l*40|0)+20>>2]|0;if((h+-1|0)>>>0<2?(c[k+(l*40|0)+8>>2]|0)==(f|0):0){f=g;break b}l=l+1|0;if(l>>>0>=j>>>0){f=1;g=37;break a}}}else{j=c[b+(m*12|0)+12>>2]|0;h=c[p>>2]|0;if(!h){f=1;g=37;break a}k=c[a>>2]|0;g=0;while(1){if((c[k+(g*40|0)+20>>2]|0)==3?(c[k+(g*40|0)+8>>2]|0)==(j|0):0){h=3;l=g;break b}g=g+1|0;if(g>>>0>=h>>>0){f=1;g=37;break a}}}while(0);if(!((l|0)>-1&h>>>0>1)){f=1;g=37;break}if(m>>>0<e>>>0){k=e;do{j=k;k=k+-1|0;h=c[n>>2]|0;c[h+(j<<2)>>2]=c[h+(k<<2)>>2]}while(k>>>0>m>>>0);k=c[a>>2]|0}c[(c[n>>2]|0)+(m<<2)>>2]=k+(l*40|0);m=m+1|0;if(m>>>0<=e>>>0){g=m;k=m;do{j=c[n>>2]|0;h=c[j+(g<<2)>>2]|0;if((h|0)!=((c[a>>2]|0)+(l*40|0)|0)){c[j+(k<<2)>>2]=h;k=k+1|0}g=g+1|0}while(g>>>0<=e>>>0)}g=c[b+(m*12|0)+4>>2]|0;if(g>>>0>=3){f=0;g=37;break}}if((g|0)==37){i=q;return f|0}return 0}function hc(a,b,d,e,f,g,h,j){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;var k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0;K=i;I=c[d>>2]|0;J=c[a+8>>2]|0;if((I|0)!=(c[J>>2]|0)){D=1;i=K;return D|0}B=a+52|0;c[B>>2]=0;G=c[a+56>>2]|0;o=(G|0)==0;H=o&1;do if(!b){c[J+20>>2]=0;c[J+12>>2]=e;c[J+8>>2]=e;c[J+16>>2]=f;c[J+24>>2]=H;if(o){d=a+44|0;c[d>>2]=(c[d>>2]|0)+1;d=0;r=0}else{d=G;r=0}}else{if(g){k=a+20|0;c[k>>2]=0;l=a+16|0;c[l>>2]=0;r=c[a>>2]|0;s=a+44|0;q=0;do{p=r+(q*40|0)+20|0;if((c[p>>2]|0)!=0?(c[p>>2]=0,(c[r+(q*40|0)+24>>2]|0)==0):0)c[s>>2]=(c[s>>2]|0)+-1;q=q+1|0}while((q|0)!=16);a:do if(o){n=c[a+28>>2]|0;m=a+12|0;q=0;while(1){e=0;p=2147483647;o=0;do{if(c[r+(e*40|0)+24>>2]|0){C=c[r+(e*40|0)+16>>2]|0;D=(C|0)<(p|0);p=D?C:p;o=D?r+(e*40|0)|0:o}e=e+1|0}while(e>>>0<=n>>>0);if(!o){d=0;break a}D=c[m>>2]|0;c[D+(q<<4)>>2]=c[o>>2];c[D+(q<<4)+12>>2]=c[o+36>>2];c[D+(q<<4)+4>>2]=c[o+28>>2];c[D+(q<<4)+8>>2]=c[o+32>>2];q=q+1|0;c[l>>2]=q;c[o+24>>2]=0;if(c[o+20>>2]|0)continue;c[s>>2]=(c[s>>2]|0)+-1}}else d=G;while(0);p=a+40|0;c[p>>2]=0;o=a+36|0;c[o>>2]=65535;c[a+48>>2]=0;if(!(c[b>>2]|d))d=0;else{c[l>>2]=0;c[k>>2]=0}r=(c[b+4>>2]|0)==0;c[J+20>>2]=r?2:3;c[o>>2]=r?65535:0;c[J+12>>2]=0;c[J+8>>2]=0;c[J+16>>2]=0;c[J+24>>2]=H;c[s>>2]=1;c[p>>2]=1;r=0;break}if(!(c[b+8>>2]|0)){d=a+40|0;q=c[d>>2]|0;p=c[a+24>>2]|0;if(q>>>0>=p>>>0)if(q){l=c[a>>2]|0;m=0;o=-1;n=0;do{if(((c[l+(m*40|0)+20>>2]|0)+-1|0)>>>0<2){D=c[l+(m*40|0)+8>>2]|0;C=(D|0)<(n|0)|(o|0)==-1;o=C?m:o;n=C?D:n}m=m+1|0}while((m|0)!=(q|0));if((o|0)>-1){q=q+-1|0;c[l+(o*40|0)+20>>2]=0;c[d>>2]=q;if(!(c[l+(o*40|0)+24>>2]|0)){d=a+44|0;c[d>>2]=(c[d>>2]|0)+-1;d=G;n=0}else{d=G;n=0}}else{d=G;n=1}}else{q=0;d=G;n=1}else{d=G;n=0}}else{E=a+24|0;C=a+40|0;v=a+44|0;x=a+36|0;A=a+48|0;u=a+28|0;y=a+16|0;z=a+12|0;r=G;d=G;t=0;w=0;b:while(1){switch(c[b+(t*20|0)+12>>2]|0){case 2:{l=c[b+(t*20|0)+20>>2]|0;m=c[E>>2]|0;if(!m){n=1;break b}n=c[a>>2]|0;s=0;while(1){k=n+(s*40|0)+20|0;if((c[k>>2]|0)==3?(c[n+(s*40|0)+8>>2]|0)==(l|0):0)break;s=s+1|0;if(s>>>0>=m>>>0){n=1;break b}}if((s|0)<0){n=1;break b}c[k>>2]=0;c[C>>2]=(c[C>>2]|0)+-1;if(!(c[n+(s*40|0)+24>>2]|0)){c[v>>2]=(c[v>>2]|0)+-1;s=w}else s=w;break}case 4:{l=c[b+(t*20|0)+28>>2]|0;c[x>>2]=l;m=c[E>>2]|0;if(!m)s=w;else{n=c[a>>2]|0;s=l;o=0;do{k=n+(o*40|0)+20|0;do if((c[k>>2]|0)==3){if((c[n+(o*40|0)+8>>2]|0)>>>0<=l>>>0)if((s|0)==65535)s=65535;else break;c[k>>2]=0;c[C>>2]=(c[C>>2]|0)+-1;if(!(c[n+(o*40|0)+24>>2]|0))c[v>>2]=(c[v>>2]|0)+-1}while(0);o=o+1|0}while((o|0)!=(m|0));s=w}break}case 0:{n=0;F=101;break b}case 1:{n=e-(c[b+(t*20|0)+16>>2]|0)|0;l=c[E>>2]|0;if(!l){n=1;break b}m=c[a>>2]|0;s=0;while(1){k=m+(s*40|0)+20|0;if(((c[k>>2]|0)+-1|0)>>>0<2?(c[m+(s*40|0)+8>>2]|0)==(n|0):0)break;s=s+1|0;if(s>>>0>=l>>>0){n=1;break b}}if((s|0)<0){n=1;break b}c[k>>2]=0;c[C>>2]=(c[C>>2]|0)+-1;if(!(c[m+(s*40|0)+24>>2]|0)){c[v>>2]=(c[v>>2]|0)+-1;s=w}else s=w;break}case 6:{m=c[b+(t*20|0)+24>>2]|0;s=c[x>>2]|0;if((s|0)==65535|s>>>0<m>>>0){n=1;F=101;break b}r=c[E>>2]|0;c:do if(r){l=c[a>>2]|0;s=0;while(1){k=l+(s*40|0)+20|0;if((c[k>>2]|0)==3?(c[l+(s*40|0)+8>>2]|0)==(m|0):0)break;s=s+1|0;if(s>>>0>=r>>>0){F=88;break c}}c[k>>2]=0;k=(c[C>>2]|0)+-1|0;c[C>>2]=k;if(!(c[l+(s*40|0)+24>>2]|0)){c[v>>2]=(c[v>>2]|0)+-1;s=k}else s=k}else{r=0;F=88}while(0);if((F|0)==88){F=0;s=c[C>>2]|0}if(s>>>0>=r>>>0){n=1;F=101;break b}c[J+12>>2]=e;c[J+8>>2]=m;c[J+16>>2]=f;c[J+20>>2]=3;c[J+24>>2]=H;c[C>>2]=s+1;c[v>>2]=(c[v>>2]|0)+1;r=G;d=G;s=1;break}case 3:{s=c[b+(t*20|0)+16>>2]|0;n=c[b+(t*20|0)+24>>2]|0;k=c[x>>2]|0;if((k|0)==65535|k>>>0<n>>>0){n=1;break b}o=c[E>>2]|0;if(!o){n=1;break b}p=c[a>>2]|0;k=0;while(1){m=p+(k*40|0)+20|0;if((c[m>>2]|0)==3?(c[p+(k*40|0)+8>>2]|0)==(n|0):0){F=47;break}l=k+1|0;if(l>>>0<o>>>0)k=l;else break}if((F|0)==47?(F=0,c[m>>2]=0,c[C>>2]=(c[C>>2]|0)+-1,(c[p+(k*40|0)+24>>2]|0)==0):0)c[v>>2]=(c[v>>2]|0)+-1;m=e-s|0;s=0;while(1){l=p+(s*40|0)+20|0;k=c[l>>2]|0;if((k+-1|0)>>>0<2?(D=p+(s*40|0)+8|0,(c[D>>2]|0)==(m|0)):0)break;s=s+1|0;if(s>>>0>=o>>>0){n=1;break b}}if(!((s|0)>-1&k>>>0>1)){n=1;break b}c[l>>2]=3;c[D>>2]=n;s=w;break}case 5:{n=c[a>>2]|0;q=0;do{p=n+(q*40|0)+20|0;if((c[p>>2]|0)!=0?(c[p>>2]=0,(c[n+(q*40|0)+24>>2]|0)==0):0)c[v>>2]=(c[v>>2]|0)+-1;q=q+1|0}while((q|0)!=16);d:do if(!d){l=c[u>>2]|0;m=r;while(1){d=0;s=2147483647;k=0;do{if(c[n+(d*40|0)+24>>2]|0){o=c[n+(d*40|0)+16>>2]|0;e=(o|0)<(s|0);s=e?o:s;k=e?n+(d*40|0)|0:k}d=d+1|0}while(d>>>0<=l>>>0);if(!k){r=m;d=0;break d}s=c[y>>2]|0;d=c[z>>2]|0;c[d+(s<<4)>>2]=c[k>>2];c[d+(s<<4)+12>>2]=c[k+36>>2];c[d+(s<<4)+4>>2]=c[k+28>>2];c[d+(s<<4)+8>>2]=c[k+32>>2];c[y>>2]=s+1;c[k+24>>2]=0;if(!(c[k+20>>2]|0))c[v>>2]=(c[v>>2]|0)+-1;if(!m)m=0;else{r=m;d=m;break}}}while(0);c[C>>2]=0;c[x>>2]=65535;c[A>>2]=0;c[B>>2]=1;e=0;s=w;break}default:{n=1;break b}}t=t+1|0;w=s}if(w){r=n;break}q=c[C>>2]|0;p=c[E>>2]|0}if(q>>>0<p>>>0){c[J+12>>2]=e;c[J+8>>2]=e;c[J+16>>2]=f;c[J+20>>2]=2;c[J+24>>2]=H;r=a+44|0;c[r>>2]=(c[r>>2]|0)+1;c[a+40>>2]=q+1;r=n}else r=1}while(0);c[J+36>>2]=g;c[J+28>>2]=h;c[J+32>>2]=j;if(!d){o=a+44|0;d=c[o>>2]|0;k=c[a+28>>2]|0;if(d>>>0>k>>>0){p=a+16|0;q=a+12|0;do{n=c[a>>2]|0;e=0;l=2147483647;m=0;do{if(c[n+(e*40|0)+24>>2]|0){C=c[n+(e*40|0)+16>>2]|0;D=(C|0)<(l|0);l=D?C:l;m=D?n+(e*40|0)|0:m}e=e+1|0}while(e>>>0<=k>>>0);if((m|0)!=0?(D=c[p>>2]|0,C=c[q>>2]|0,c[C+(D<<4)>>2]=c[m>>2],c[C+(D<<4)+12>>2]=c[m+36>>2],c[C+(D<<4)+4>>2]=c[m+28>>2],c[C+(D<<4)+8>>2]=c[m+32>>2],c[p>>2]=D+1,c[m+24>>2]=0,(c[m+20>>2]|0)==0):0){d=d+-1|0;c[o>>2]=d}}while(d>>>0>k>>>0)}}else{k=a+16|0;D=c[k>>2]|0;C=c[a+12>>2]|0;c[C+(D<<4)>>2]=I;c[C+(D<<4)+12>>2]=g;c[C+(D<<4)+4>>2]=h;c[C+(D<<4)+8>>2]=j;c[k>>2]=D+1;k=c[a+28>>2]|0}rc(c[a>>2]|0,k+1|0);D=r;i=K;return D|0}function ic(a,b){a=a|0;b=b|0;var d=0,e=0;e=i;if((b>>>0<=16?(d=c[(c[a+4>>2]|0)+(b<<2)>>2]|0,(d|0)!=0):0)?(c[d+20>>2]|0)>>>0>1:0)d=c[d>>2]|0;else d=0;i=e;return d|0}function jc(a){a=a|0;var b=0;b=(c[a>>2]|0)+((c[a+28>>2]|0)*40|0)|0;c[a+8>>2]=b;return c[b>>2]|0}function kc(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,j=0;j=i;c[a+36>>2]=65535;e=e>>>0>1?e:1;c[a+24>>2]=e;h=a+28|0;c[h>>2]=(g|0)==0?d:e;c[a+32>>2]=f;c[a+56>>2]=g;c[a+44>>2]=0;c[a+40>>2]=0;c[a+48>>2]=0;g=fd(680)|0;c[a>>2]=g;if(!g){g=65535;i=j;return g|0}id(g,0,680);a:do if((c[h>>2]|0)!=-1){f=b*384|47;e=0;while(1){d=fd(f)|0;g=c[a>>2]|0;c[g+(e*40|0)+4>>2]=d;if(!d){g=65535;break}c[g+(e*40|0)>>2]=d+(0-d&15);e=e+1|0;if(e>>>0>=((c[h>>2]|0)+1|0)>>>0)break a}i=j;return g|0}while(0);g=a+4|0;c[g>>2]=fd(68)|0;f=fd((c[h>>2]<<4)+16|0)|0;c[a+12>>2]=f;g=c[g>>2]|0;if((g|0)==0|(f|0)==0){g=65535;i=j;return g|0}id(g,0,68);c[a+20>>2]=0;c[a+16>>2]=0;g=0;i=j;return g|0}function lc(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0;l=i;h=c[a>>2]|0;if(h){k=a+28|0;if((c[k>>2]|0)!=-1){j=0;do{gd(c[h+(j*40|0)+4>>2]|0);h=c[a>>2]|0;c[h+(j*40|0)+4>>2]=0;j=j+1|0}while(j>>>0<((c[k>>2]|0)+1|0)>>>0)}}else h=0;gd(h);c[a>>2]=0;h=a+4|0;gd(c[h>>2]|0);c[h>>2]=0;h=a+12|0;gd(c[h>>2]|0);c[h>>2]=0;h=kc(a,b,d,e,f,g)|0;i=l;return h|0}function mc(a){a=a|0;var b=0,d=0,e=0,f=0;f=i;b=c[a>>2]|0;if(b){e=a+28|0;if((c[e>>2]|0)!=-1){d=0;do{gd(c[b+(d*40|0)+4>>2]|0);b=c[a>>2]|0;c[b+(d*40|0)+4>>2]=0;d=d+1|0}while(d>>>0<((c[e>>2]|0)+1|0)>>>0)}}else b=0;gd(b);c[a>>2]=0;b=a+4|0;gd(c[b>>2]|0);c[b>>2]=0;b=a+12|0;gd(c[b>>2]|0);c[b>>2]=0;i=f;return}function nc(a){a=a|0;var b=0,d=0,e=0,f=0;f=i;b=c[a+40>>2]|0;if(!b){i=f;return}e=a+4|0;d=0;do{c[(c[e>>2]|0)+(d<<2)>>2]=(c[a>>2]|0)+(d*40|0);d=d+1|0}while(d>>>0<b>>>0);i=f;return}function oc(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;y=i;v=a+16|0;c[v>>2]=0;c[a+20>>2]=0;if(!e){b=0;i=y;return b|0}x=a+48|0;e=c[x>>2]|0;f=(e|0)==(b|0);a:do if(!f?(u=a+32|0,l=c[u>>2]|0,k=((e+1|0)>>>0)%(l>>>0)|0,(k|0)!=(b|0)):0){t=a+28|0;w=c[(c[a>>2]|0)+((c[t>>2]|0)*40|0)>>2]|0;r=a+40|0;p=a+24|0;o=a+44|0;q=a+56|0;s=a+12|0;n=k;while(1){k=c[r>>2]|0;if(!k)k=0;else{j=c[a>>2]|0;h=0;do{if(((c[j+(h*40|0)+20>>2]|0)+-1|0)>>>0<2){e=c[j+(h*40|0)+12>>2]|0;c[j+(h*40|0)+8>>2]=e-(e>>>0>n>>>0?l:0)}h=h+1|0}while((h|0)!=(k|0))}if(k>>>0>=(c[p>>2]|0)>>>0){if(!k){e=1;g=46;break}f=c[a>>2]|0;h=0;l=-1;j=0;while(1){if(((c[f+(h*40|0)+20>>2]|0)+-1|0)>>>0<2){e=c[f+(h*40|0)+8>>2]|0;m=(e|0)<(j|0)|(l|0)==-1;g=m?h:l;j=m?e:j}else g=l;h=h+1|0;if((h|0)==(k|0))break;else l=g}if((g|0)<=-1){e=1;g=46;break}l=k+-1|0;c[f+(g*40|0)+20>>2]=0;c[r>>2]=l;if(!(c[f+(g*40|0)+24>>2]|0)){c[o>>2]=(c[o>>2]|0)+-1;k=l}else k=l}l=c[o>>2]|0;m=c[t>>2]|0;if(l>>>0>=m>>>0){e=(c[q>>2]|0)==0;do if(e){g=c[a>>2]|0;f=0;j=2147483647;h=0;do{if(c[g+(f*40|0)+24>>2]|0){A=c[g+(f*40|0)+16>>2]|0;z=(A|0)<(j|0);j=z?A:j;h=z?g+(f*40|0)|0:h}f=f+1|0}while(f>>>0<=m>>>0);if((h|0)!=0?(f=c[v>>2]|0,g=c[s>>2]|0,c[g+(f<<4)>>2]=c[h>>2],c[g+(f<<4)+12>>2]=c[h+36>>2],c[g+(f<<4)+4>>2]=c[h+28>>2],c[g+(f<<4)+8>>2]=c[h+32>>2],c[v>>2]=f+1,c[h+24>>2]=0,(c[h+20>>2]|0)==0):0){l=l+-1|0;c[o>>2]=l}}while(l>>>0>=m>>>0)}e=c[a>>2]|0;c[e+(m*40|0)+20>>2]=1;c[e+(m*40|0)+12>>2]=n;c[e+(m*40|0)+8>>2]=n;c[e+(m*40|0)+16>>2]=0;c[e+(m*40|0)+24>>2]=0;c[o>>2]=l+1;c[r>>2]=k+1;rc(e,m+1|0);l=c[u>>2]|0;n=((n+1|0)>>>0)%(l>>>0)|0;if((n|0)==(b|0)){g=31;break}}if((g|0)==31){g=c[v>>2]|0;if(!g){g=41;break}e=c[s>>2]|0;h=c[t>>2]|0;j=c[a>>2]|0;l=j+(h*40|0)|0;k=c[l>>2]|0;f=0;while(1){if((c[e+(f<<4)>>2]|0)==(k|0))break;f=f+1|0;if(f>>>0>=g>>>0){g=41;break a}}if(!h){g=41;break}else e=0;while(1){f=j+(e*40|0)|0;e=e+1|0;if((c[f>>2]|0)==(w|0))break;if(e>>>0>=h>>>0){g=41;break a}}c[f>>2]=k;c[l>>2]=w;g=41;break}else if((g|0)==46){i=y;return e|0}}else g=39;while(0);if((g|0)==39)if(d)if(f){b=1;i=y;return b|0}else g=41;do if((g|0)==41){if(!d){e=c[x>>2]|0;break}c[x>>2]=b;b=0;i=y;return b|0}while(0);if((e|0)==(b|0)){b=0;i=y;return b|0}a=c[a+32>>2]|0;c[x>>2]=((b+-1+a|0)>>>0)%(a>>>0)|0;b=0;i=y;return b|0}function pc(a){a=a|0;var b=0,d=0,e=0;e=i;d=a+20|0;b=c[d>>2]|0;if(b>>>0>=(c[a+16>>2]|0)>>>0){b=0;i=e;return b|0}a=c[a+12>>2]|0;c[d>>2]=b+1;b=a+(b<<4)|0;i=e;return b|0}function qc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;k=i;f=c[a>>2]|0;if(!f){i=k;return}c[a+60>>2]=1;if(c[a+56>>2]|0){i=k;return}g=c[a+28>>2]|0;h=a+16|0;j=a+12|0;e=a+44|0;a=0;b=2147483647;d=0;while(1){if(c[f+(a*40|0)+24>>2]|0){m=c[f+(a*40|0)+16>>2]|0;l=(m|0)<(b|0);b=l?m:b;d=l?f+(a*40|0)|0:d}a=a+1|0;if(a>>>0<=g>>>0)continue;if(!d)break;l=c[h>>2]|0;b=c[j>>2]|0;c[b+(l<<4)>>2]=c[d>>2];c[b+(l<<4)+12>>2]=c[d+36>>2];c[b+(l<<4)+4>>2]=c[d+28>>2];c[b+(l<<4)+8>>2]=c[d+32>>2];c[h>>2]=l+1;c[d+24>>2]=0;if(c[d+20>>2]|0){a=0;b=2147483647;d=0;continue}c[e>>2]=(c[e>>2]|0)+-1;a=0;b=2147483647;d=0}i=k;return}function rc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;v=i;i=i+32|0;q=v+16|0;t=v;o=7;do{if(o>>>0<b>>>0){n=o;do{m=a+(n*40|0)|0;l=c[m>>2]|0;m=c[m+4>>2]|0;p=c[a+(n*40|0)+8>>2]|0;k=a+(n*40|0)+12|0;s=c[k+4>>2]|0;r=q;c[r>>2]=c[k>>2];c[r+4>>2]=s;r=c[a+(n*40|0)+20>>2]|0;s=c[a+(n*40|0)+24>>2]|0;k=a+(n*40|0)+28|0;c[t+0>>2]=c[k+0>>2];c[t+4>>2]=c[k+4>>2];c[t+8>>2]=c[k+8>>2];a:do if(n>>>0<o>>>0){d=n;u=8}else{f=(s|0)==0;j=r+-1|0;k=j>>>0<2;b:do if(!r){e=n;while(1){d=e-o|0;if(c[a+(d*40|0)+20>>2]|0){d=e;break b}if((c[a+(d*40|0)+24>>2]|0)!=0|f){d=e;break b}e=a+(e*40|0)+0|0;g=a+(d*40|0)+0|0;h=e+40|0;do{c[e>>2]=c[g>>2];e=e+4|0;g=g+4|0}while((e|0)<(h|0));if(d>>>0<o>>>0){u=8;break a}else e=d}}else{d=n;while(1){f=d-o|0;e=c[a+(f*40|0)+20>>2]|0;do if(e){e=e+-1|0;if((e|j)>>>0<2){e=c[a+(f*40|0)+8>>2]|0;if((e|0)>(p|0))break b;d=a+(d*40|0)|0;if((e|0)<(p|0))break;else break a}if(e>>>0<2)break b;if(!k?(c[a+(f*40|0)+8>>2]|0)<=(p|0):0)break b;else u=16}else u=16;while(0);if((u|0)==16){u=0;d=a+(d*40|0)|0}e=d+0|0;g=a+(f*40|0)+0|0;h=e+40|0;do{c[e>>2]=c[g>>2];e=e+4|0;g=g+4|0}while((e|0)<(h|0));if(f>>>0<o>>>0){d=f;u=8;break a}else d=f}}while(0);d=a+(d*40|0)|0}while(0);if((u|0)==8){u=0;d=a+(d*40|0)|0}k=d;c[k>>2]=l;c[k+4>>2]=m;c[d+8>>2]=p;k=q;l=c[k+4>>2]|0;m=d+12|0;c[m>>2]=c[k>>2];c[m+4>>2]=l;c[d+20>>2]=r;c[d+24>>2]=s;m=d+28|0;c[m+0>>2]=c[t+0>>2];c[m+4>>2]=c[t+4>>2];c[m+8>>2]=c[t+8>>2];n=n+1|0}while((n|0)!=(b|0))}o=o>>>1}while((o|0)!=0);i=v;return}function sc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;l=i;e=c[a+4>>2]|0;f=c[a+16>>2]|0;g=c[a+20>>2]|0;j=e<<2;k=b+256|0;h=16;a=c[a+12>>2]|0;d=b;while(1){m=c[d+4>>2]|0;c[a>>2]=c[d>>2];c[a+4>>2]=m;m=c[d+12>>2]|0;c[a+8>>2]=c[d+8>>2];c[a+12>>2]=m;h=h+-1|0;if(!h)break;else{a=a+(j<<2)|0;d=d+16|0}}j=e<<1&2147483646;h=c[b+260>>2]|0;c[f>>2]=c[k>>2];c[f+4>>2]=h;k=c[b+268>>2]|0;c[f+(j<<2)>>2]=c[b+264>>2];c[f+((j|1)<<2)>>2]=k;k=e<<2;h=c[b+276>>2]|0;c[f+(k<<2)>>2]=c[b+272>>2];c[f+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+284>>2]|0;c[f+(k<<2)>>2]=c[b+280>>2];c[f+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+292>>2]|0;c[f+(k<<2)>>2]=c[b+288>>2];c[f+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+300>>2]|0;c[f+(k<<2)>>2]=c[b+296>>2];c[f+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+308>>2]|0;c[f+(k<<2)>>2]=c[b+304>>2];c[f+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+316>>2]|0;c[f+(k<<2)>>2]=c[b+312>>2];c[f+((k|1)<<2)>>2]=h;k=c[b+324>>2]|0;c[g>>2]=c[b+320>>2];c[g+4>>2]=k;k=c[b+332>>2]|0;c[g+(j<<2)>>2]=c[b+328>>2];c[g+((j|1)<<2)>>2]=k;k=e<<2;h=c[b+340>>2]|0;c[g+(k<<2)>>2]=c[b+336>>2];c[g+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+348>>2]|0;c[g+(k<<2)>>2]=c[b+344>>2];c[g+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+356>>2]|0;c[g+(k<<2)>>2]=c[b+352>>2];c[g+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+364>>2]|0;c[g+(k<<2)>>2]=c[b+360>>2];c[g+((k|1)<<2)>>2]=h;k=k+j|0;h=c[b+372>>2]|0;c[g+(k<<2)>>2]=c[b+368>>2];c[g+((k|1)<<2)>>2]=h;k=k+j|0;j=c[b+380>>2]|0;c[g+(k<<2)>>2]=c[b+376>>2];c[g+((k|1)<<2)>>2]=j;i=l;return}function tc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;y=i;r=c[b+4>>2]|0;s=Z(c[b+8>>2]|0,r)|0;w=(e>>>0)%(r>>>0)|0;x=c[b>>2]|0;u=e-w|0;b=(u<<8)+(w<<4)|0;v=s<<8;w=w<<3;p=r<<4;o=r<<2&1073741820;l=o<<1;m=l+o|0;n=0;do{k=c[3344+(n<<2)>>2]|0;j=c[3408+(n<<2)>>2]|0;e=(j<<4)+k|0;h=f+e|0;j=b+k+(Z(j,p)|0)|0;k=x+j|0;q=c[g+(n<<6)>>2]|0;if((q|0)==16777215){j=c[f+(e+16)>>2]|0;c[k>>2]=c[h>>2];c[k+(o<<2)>>2]=j;j=c[f+(e+48)>>2]|0;c[k+(l<<2)>>2]=c[f+(e+32)>>2];c[k+(m<<2)>>2]=j}else{A=d[f+(e+1)>>0]|0;z=c[g+(n<<6)+4>>2]|0;a[k>>0]=a[3472+(q+512+(d[h>>0]|0))>>0]|0;q=d[f+(e+2)>>0]|0;t=c[g+(n<<6)+8>>2]|0;a[x+(j+1)>>0]=a[3472+((A|512)+z)>>0]|0;k=d[f+(e+3)>>0]|0;h=c[g+(n<<6)+12>>2]|0;a[x+(j+2)>>0]=a[3472+(t+512+q)>>0]|0;a[x+(j+3)>>0]=a[3472+(h+512+k)>>0]|0;k=j+p|0;h=d[f+(e+17)>>0]|0;j=c[g+(n<<6)+20>>2]|0;a[x+k>>0]=a[3472+((c[g+(n<<6)+16>>2]|0)+512+(d[f+(e+16)>>0]|0))>>0]|0;q=d[f+(e+18)>>0]|0;t=c[g+(n<<6)+24>>2]|0;a[x+(k+1)>>0]=a[3472+((h|512)+j)>>0]|0;j=d[f+(e+19)>>0]|0;h=c[g+(n<<6)+28>>2]|0;a[x+(k+2)>>0]=a[3472+(t+512+q)>>0]|0;a[x+(k+3)>>0]=a[3472+(h+512+j)>>0]|0;k=k+p|0;j=d[f+(e+33)>>0]|0;h=c[g+(n<<6)+36>>2]|0;a[x+k>>0]=a[3472+((c[g+(n<<6)+32>>2]|0)+512+(d[f+(e+32)>>0]|0))>>0]|0;q=d[f+(e+34)>>0]|0;t=c[g+(n<<6)+40>>2]|0;a[x+(k+1)>>0]=a[3472+((j|512)+h)>>0]|0;h=d[f+(e+35)>>0]|0;j=c[g+(n<<6)+44>>2]|0;a[x+(k+2)>>0]=a[3472+(t+512+q)>>0]|0;a[x+(k+3)>>0]=a[3472+(j+512+h)>>0]|0;k=k+p|0;h=d[f+(e+49)>>0]|0;j=c[g+(n<<6)+52>>2]|0;a[x+k>>0]=a[3472+((c[g+(n<<6)+48>>2]|0)+512+(d[f+(e+48)>>0]|0))>>0]|0;q=d[f+(e+50)>>0]|0;t=c[g+(n<<6)+56>>2]|0;a[x+(k+1)>>0]=a[3472+((h|512)+j)>>0]|0;j=d[f+(e+51)>>0]|0;h=c[g+(n<<6)+60>>2]|0;a[x+(k+2)>>0]=a[3472+(t+512+q)>>0]|0;a[x+(k+3)>>0]=a[3472+(h+512+j)>>0]|0}n=n+1|0}while((n|0)!=16);t=s<<6;s=r<<3&2147483640;r=f+256|0;f=f+320|0;l=w+v+(u<<6)|0;p=s>>>2;j=s>>>1;k=j+p|0;o=16;do{q=o&3;h=c[3344+(q<<2)>>2]|0;q=c[3408+(q<<2)>>2]|0;e=o>>>0>19;m=e?f:r;n=(q<<3)+h|0;b=m+n|0;q=l+(e?t:0)+h+(Z(q,s)|0)|0;h=x+q|0;e=c[g+(o<<6)>>2]|0;if((e|0)==16777215){z=c[m+(n+8)>>2]|0;c[h>>2]=c[b>>2];c[h+(p<<2)>>2]=z;z=c[m+(n+24)>>2]|0;c[h+(j<<2)>>2]=c[m+(n+16)>>2];c[h+(k<<2)>>2]=z}else{v=d[m+(n+1)>>0]|0;z=c[g+(o<<6)+4>>2]|0;a[h>>0]=a[3472+(e+512+(d[b>>0]|0))>>0]|0;w=d[m+(n+2)>>0]|0;u=c[g+(o<<6)+8>>2]|0;a[x+(q+1)>>0]=a[3472+((v|512)+z)>>0]|0;z=d[m+(n+3)>>0]|0;v=c[g+(o<<6)+12>>2]|0;a[x+(q+2)>>0]=a[3472+(u+512+w)>>0]|0;a[x+(q+3)>>0]=a[3472+(v+512+z)>>0]|0;z=q+s|0;v=d[m+(n+9)>>0]|0;w=c[g+(o<<6)+20>>2]|0;a[x+z>>0]=a[3472+((c[g+(o<<6)+16>>2]|0)+512+(d[m+(n+8)>>0]|0))>>0]|0;u=d[m+(n+10)>>0]|0;q=c[g+(o<<6)+24>>2]|0;a[x+(z+1)>>0]=a[3472+((v|512)+w)>>0]|0;w=d[m+(n+11)>>0]|0;v=c[g+(o<<6)+28>>2]|0;a[x+(z+2)>>0]=a[3472+(q+512+u)>>0]|0;a[x+(z+3)>>0]=a[3472+(v+512+w)>>0]|0;z=z+s|0;w=d[m+(n+17)>>0]|0;v=c[g+(o<<6)+36>>2]|0;a[x+z>>0]=a[3472+((c[g+(o<<6)+32>>2]|0)+512+(d[m+(n+16)>>0]|0))>>0]|0;u=d[m+(n+18)>>0]|0;q=c[g+(o<<6)+40>>2]|0;a[x+(z+1)>>0]=a[3472+((w|512)+v)>>0]|0;v=d[m+(n+19)>>0]|0;w=c[g+(o<<6)+44>>2]|0;a[x+(z+2)>>0]=a[3472+(q+512+u)>>0]|0;a[x+(z+3)>>0]=a[3472+(w+512+v)>>0]|0;z=z+s|0;v=d[m+(n+25)>>0]|0;w=c[g+(o<<6)+52>>2]|0;a[x+z>>0]=a[3472+((c[g+(o<<6)+48>>2]|0)+512+(d[m+(n+24)>>0]|0))>>0]|0;u=d[m+(n+26)>>0]|0;q=c[g+(o<<6)+56>>2]|0;a[x+(z+1)>>0]=a[3472+((v|512)+w)>>0]|0;w=d[m+(n+27)>>0]|0;v=c[g+(o<<6)+60>>2]|0;a[x+(z+2)>>0]=a[3472+(q+512+u)>>0]|0;a[x+(z+3)>>0]=a[3472+(v+512+w)>>0]|0}o=o+1|0}while((o|0)!=24);i=y;return}function uc(e,f){e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0,Ca=0,Da=0,Ea=0,Fa=0,Ga=0,Ha=0,Ia=0,Ja=0,Ka=0,La=0,Ma=0,Na=0,Pa=0,Qa=0,Ra=0,Sa=0,Ta=0,Ua=0,Va=0,Wa=0,Xa=0,Ya=0,Za=0,_a=0,$a=0,ab=0,bb=0;bb=i;i=i+176|0;ia=bb+40|0;La=bb;ea=c[e+4>>2]|0;ka=e+8|0;Wa=c[ka>>2]|0;g=Z(Wa,ea)|0;if(!Wa){i=bb;return}Za=ia+24|0;_a=ia+16|0;$a=ia+8|0;la=ia+100|0;ma=ia+68|0;na=ia+36|0;oa=ia+4|0;Ma=ia+120|0;Na=ia+112|0;Pa=ia+104|0;Qa=ia+96|0;Ra=ia+88|0;Sa=ia+80|0;Ta=ia+72|0;Ua=ia+64|0;Va=ia+56|0;Wa=ia+48|0;Xa=ia+40|0;Ya=ia+32|0;pa=ia+124|0;qa=ia+116|0;ra=ia+108|0;sa=ia+92|0;ta=ia+84|0;ua=ia+76|0;va=ia+60|0;wa=ia+52|0;xa=ia+44|0;ya=ia+28|0;za=ia+20|0;Aa=ia+12|0;ha=La+28|0;ja=La+32|0;Ka=La+24|0;Da=ea<<4;Ja=0-Da|0;Ca=Ja<<1;Ha=Z(ea,-48)|0;Ia=ea<<5;Ea=Ja<<2;Ga=ea*48|0;Ba=ea<<6;ga=La+24|0;fa=La+12|0;Fa=g<<8;ba=g<<6;ca=ea<<3;W=Da|4;Y=La+16|0;$=La+20|0;da=La+12|0;X=La+4|0;_=La+8|0;U=0;aa=0;V=f;while(1){f=c[V+8>>2]|0;do if((f|0)!=1){T=V+200|0;n=c[T>>2]|0;do if(!n)g=1;else{if((f|0)==2?(c[V+4>>2]|0)!=(c[n+4>>2]|0):0){g=1;break}g=5}while(0);S=V+204|0;l=c[S>>2]|0;do if(l){if((f|0)==2?(c[V+4>>2]|0)!=(c[l+4>>2]|0):0)break;g=g|2}while(0);R=(g&2|0)==0;do if(R){c[Za>>2]=0;c[_a>>2]=0;c[$a>>2]=0;c[ia>>2]=0;m=0}else{if((c[V>>2]|0)>>>0<=5?(c[l>>2]|0)>>>0<=5:0){if((b[V+28>>1]|0)==0?(b[l+48>>1]|0)==0:0)if((c[V+116>>2]|0)==(c[l+124>>2]|0)?(B=(b[V+132>>1]|0)-(b[l+172>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){h=(b[V+134>>1]|0)-(b[l+174>>1]|0)|0;h=(((h|0)>-1?h:0-h|0)|0)>3&1}else h=1;else h=2;c[ia>>2]=h;if((b[V+30>>1]|0)==0?(b[l+50>>1]|0)==0:0)if((c[V+116>>2]|0)==(c[l+124>>2]|0)?(B=(b[V+136>>1]|0)-(b[l+176>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){j=(b[V+138>>1]|0)-(b[l+178>>1]|0)|0;j=(((j|0)>-1?j:0-j|0)|0)>3&1}else j=1;else j=2;c[$a>>2]=j;if((b[V+36>>1]|0)==0?(b[l+56>>1]|0)==0:0)if((c[V+120>>2]|0)==(c[l+128>>2]|0)?(B=(b[V+148>>1]|0)-(b[l+188>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){k=(b[V+150>>1]|0)-(b[l+190>>1]|0)|0;k=(((k|0)>-1?k:0-k|0)|0)>3&1}else k=1;else k=2;c[_a>>2]=k;if((b[V+38>>1]|0)==0?(b[l+58>>1]|0)==0:0)if((c[V+120>>2]|0)==(c[l+128>>2]|0)?(B=(b[V+152>>1]|0)-(b[l+192>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){f=(b[V+154>>1]|0)-(b[l+194>>1]|0)|0;f=(((f|0)>-1?f:0-f|0)|0)>3&1}else f=1;else f=2;c[Za>>2]=f;m=(j|h|k|f|0)!=0&1;break}c[Za>>2]=4;c[_a>>2]=4;c[$a>>2]=4;c[ia>>2]=4;m=1}while(0);Q=(g&4|0)==0;do if(Q){c[la>>2]=0;c[ma>>2]=0;c[na>>2]=0;c[oa>>2]=0;k=c[V>>2]|0}else{k=c[V>>2]|0;if(k>>>0<=5?(c[n>>2]|0)>>>0<=5:0){if((b[V+28>>1]|0)==0?(b[n+38>>1]|0)==0:0)if((c[V+116>>2]|0)==(c[n+120>>2]|0)?(B=(b[V+132>>1]|0)-(b[n+152>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){j=(b[V+134>>1]|0)-(b[n+154>>1]|0)|0;j=(((j|0)>-1?j:0-j|0)|0)>3&1}else j=1;else j=2;c[oa>>2]=j;if((b[V+32>>1]|0)==0?(b[n+42>>1]|0)==0:0)if((c[V+116>>2]|0)==(c[n+120>>2]|0)?(B=(b[V+140>>1]|0)-(b[n+160>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){h=(b[V+142>>1]|0)-(b[n+162>>1]|0)|0;h=(((h|0)>-1?h:0-h|0)|0)>3&1}else h=1;else h=2;c[na>>2]=h;if((b[V+44>>1]|0)==0?(b[n+54>>1]|0)==0:0)if((c[V+124>>2]|0)==(c[n+128>>2]|0)?(B=(b[V+164>>1]|0)-(b[n+184>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){f=(b[V+166>>1]|0)-(b[n+186>>1]|0)|0;f=(((f|0)>-1?f:0-f|0)|0)>3&1}else f=1;else f=2;c[ma>>2]=f;if((b[V+48>>1]|0)==0?(b[n+58>>1]|0)==0:0)if((c[V+124>>2]|0)==(c[n+128>>2]|0)?(B=(b[V+172>>1]|0)-(b[n+192>>1]|0)|0,(((B|0)>-1?B:0-B|0)|0)<=3):0){l=(b[V+174>>1]|0)-(b[n+194>>1]|0)|0;l=(((l|0)>-1?l:0-l|0)|0)>3&1}else l=1;else l=2;c[la>>2]=l;if(m)break;m=(h|j|f|l|0)!=0&1;break}c[la>>2]=4;c[ma>>2]=4;c[na>>2]=4;c[oa>>2]=4;m=1}while(0);if(k>>>0<=5){do if((db(k)|0)!=1){f=c[V>>2]|0;if((f|0)==2){w=V+28|0;x=b[V+32>>1]|0;if(!(x<<16>>16))f=(b[w>>1]|0)!=0?2:0;else f=2;c[Ya>>2]=f;q=b[V+34>>1]|0;A=q<<16>>16==0;if(A)f=(b[V+30>>1]|0)!=0?2:0;else f=2;c[Xa>>2]=f;g=b[V+40>>1]|0;z=g<<16>>16==0;if(z)l=(b[V+36>>1]|0)!=0?2:0;else l=2;c[Wa>>2]=l;v=b[V+42>>1]|0;y=v<<16>>16==0;if(y)l=(b[V+38>>1]|0)!=0?2:0;else l=2;c[Va>>2]=l;h=b[V+48>>1]|0;if(!(h<<16>>16))l=(b[V+44>>1]|0)!=0?2:0;else l=2;c[Qa>>2]=l;k=b[V+50>>1]|0;B=k<<16>>16==0;if(B)l=(b[V+46>>1]|0)!=0?2:0;else l=2;c[Pa>>2]=l;p=b[V+56>>1]|0;f=p<<16>>16==0;if(f)n=(b[V+52>>1]|0)!=0?2:0;else n=2;c[Na>>2]=n;j=(b[V+58>>1]|0)==0;if(j)n=(b[V+54>>1]|0)!=0?2:0;else n=2;c[Ma>>2]=n;r=b[V+44>>1]|0;o=b[V+166>>1]|0;n=b[V+142>>1]|0;do if(!((r|x)<<16>>16)){u=(b[V+164>>1]|0)-(b[V+140>>1]|0)|0;if((((u|0)>-1?u:0-u|0)|0)>3){n=1;break}u=o-n|0;if((((u|0)>-1?u:0-u|0)|0)>3){n=1;break;
}n=(c[V+124>>2]|0)!=(c[V+116>>2]|0)&1}else n=2;while(0);c[Ua>>2]=n;s=b[V+46>>1]|0;o=b[V+170>>1]|0;n=b[V+146>>1]|0;do if(!((s|q)<<16>>16)){u=(b[V+168>>1]|0)-(b[V+144>>1]|0)|0;if((((u|0)>-1?u:0-u|0)|0)>3){o=1;break}u=o-n|0;if((((u|0)>-1?u:0-u|0)|0)>3){o=1;break}o=(c[V+124>>2]|0)!=(c[V+116>>2]|0)&1}else o=2;while(0);c[Ta>>2]=o;t=b[V+52>>1]|0;o=b[V+182>>1]|0;n=b[V+158>>1]|0;do if(!((t|g)<<16>>16)){u=(b[V+180>>1]|0)-(b[V+156>>1]|0)|0;if((((u|0)>-1?u:0-u|0)|0)>3){o=1;break}u=o-n|0;if((((u|0)>-1?u:0-u|0)|0)>3){o=1;break}o=(c[V+128>>2]|0)!=(c[V+120>>2]|0)&1}else o=2;while(0);c[Sa>>2]=o;u=b[V+54>>1]|0;o=b[V+186>>1]|0;n=b[V+162>>1]|0;do if(!((u|v)<<16>>16)){v=(b[V+184>>1]|0)-(b[V+160>>1]|0)|0;if((((v|0)>-1?v:0-v|0)|0)>3){o=1;break}v=o-n|0;if((((v|0)>-1?v:0-v|0)|0)>3){o=1;break}o=(c[V+128>>2]|0)!=(c[V+120>>2]|0)&1}else o=2;while(0);c[Ra>>2]=o;l=b[V+30>>1]|0;if(!(l<<16>>16))o=(b[w>>1]|0)!=0?2:0;else o=2;c[Aa>>2]=o;n=b[V+36>>1]|0;if(!(n<<16>>16))o=l<<16>>16!=0?2:0;else o=2;c[za>>2]=o;if(!(b[V+38>>1]|0))o=n<<16>>16!=0?2:0;else o=2;c[ya>>2]=o;if(A)n=x<<16>>16!=0?2:0;else n=2;c[xa>>2]=n;if(z)l=q<<16>>16!=0?2:0;else l=2;c[wa>>2]=l;if(y)l=g<<16>>16!=0?2:0;else l=2;c[va>>2]=l;if(!(s<<16>>16))l=r<<16>>16!=0?2:0;else l=2;c[ua>>2]=l;if(!(t<<16>>16))l=s<<16>>16!=0?2:0;else l=2;c[ta>>2]=l;if(!(u<<16>>16))l=t<<16>>16!=0?2:0;else l=2;c[sa>>2]=l;if(B)h=h<<16>>16!=0?2:0;else h=2;c[ra>>2]=h;if(f)f=k<<16>>16!=0?2:0;else f=2;c[qa>>2]=f;if(j)f=p<<16>>16!=0?2:0;else f=2;c[pa>>2]=f;break}else if((f|0)==3){j=V+28|0;v=b[V+32>>1]|0;if(!(v<<16>>16))f=(b[j>>1]|0)!=0?2:0;else f=2;c[Ya>>2]=f;B=b[V+34>>1]|0;p=B<<16>>16==0;if(p)h=(b[V+30>>1]|0)!=0?2:0;else h=2;c[Xa>>2]=h;z=b[V+40>>1]|0;if(!(z<<16>>16))k=(b[V+36>>1]|0)!=0?2:0;else k=2;c[Wa>>2]=k;o=b[V+42>>1]|0;h=o<<16>>16==0;if(h)l=(b[V+38>>1]|0)!=0?2:0;else l=2;c[Va>>2]=l;f=b[V+44>>1]|0;if(!(f<<16>>16))l=v<<16>>16!=0?2:0;else l=2;c[Ua>>2]=l;A=b[V+46>>1]|0;g=A<<16>>16==0;if(g)l=B<<16>>16!=0?2:0;else l=2;c[Ta>>2]=l;y=b[V+52>>1]|0;if(!(y<<16>>16))l=z<<16>>16!=0?2:0;else l=2;c[Sa>>2]=l;k=b[V+54>>1]|0;q=k<<16>>16==0;if(q)l=o<<16>>16!=0?2:0;else l=2;c[Ra>>2]=l;r=b[V+48>>1]|0;if(!(r<<16>>16))n=f<<16>>16!=0?2:0;else n=2;c[Qa>>2]=n;x=b[V+50>>1]|0;s=x<<16>>16==0;if(s)n=A<<16>>16!=0?2:0;else n=2;c[Pa>>2]=n;w=b[V+56>>1]|0;if(!(w<<16>>16))o=y<<16>>16!=0?2:0;else o=2;c[Na>>2]=o;u=(b[V+58>>1]|0)==0;if(u)o=k<<16>>16!=0?2:0;else o=2;c[Ma>>2]=o;t=b[V+30>>1]|0;if(!(t<<16>>16))o=(b[j>>1]|0)!=0?2:0;else o=2;c[Aa>>2]=o;if(!(b[V+38>>1]|0))o=(b[V+36>>1]|0)!=0?2:0;else o=2;c[ya>>2]=o;if(p)n=v<<16>>16!=0?2:0;else n=2;c[xa>>2]=n;if(h)n=z<<16>>16!=0?2:0;else n=2;c[va>>2]=n;if(g)l=f<<16>>16!=0?2:0;else l=2;c[ua>>2]=l;if(q)l=y<<16>>16!=0?2:0;else l=2;c[sa>>2]=l;if(s)l=r<<16>>16!=0?2:0;else l=2;c[ra>>2]=l;if(u)l=w<<16>>16!=0?2:0;else l=2;c[pa>>2]=l;l=b[V+150>>1]|0;k=b[V+138>>1]|0;do if(!((b[V+36>>1]|t)<<16>>16)){v=(b[V+148>>1]|0)-(b[V+136>>1]|0)|0;if((((v|0)>-1?v:0-v|0)|0)>3){l=1;break}v=l-k|0;if((((v|0)>-1?v:0-v|0)|0)>3){l=1;break}l=(c[V+120>>2]|0)!=(c[V+116>>2]|0)&1}else l=2;while(0);c[za>>2]=l;l=b[V+158>>1]|0;k=b[V+146>>1]|0;do if(!((z|B)<<16>>16)){B=(b[V+156>>1]|0)-(b[V+144>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){k=1;break}B=l-k|0;if((((B|0)>-1?B:0-B|0)|0)>3){k=1;break}k=(c[V+120>>2]|0)!=(c[V+116>>2]|0)&1}else k=2;while(0);c[wa>>2]=k;l=b[V+182>>1]|0;k=b[V+170>>1]|0;do if(!((y|A)<<16>>16)){B=(b[V+180>>1]|0)-(b[V+168>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){f=1;break}B=l-k|0;if((((B|0)>-1?B:0-B|0)|0)>3){f=1;break}f=(c[V+128>>2]|0)!=(c[V+124>>2]|0)&1}else f=2;while(0);c[ta>>2]=f;f=b[V+190>>1]|0;g=b[V+178>>1]|0;do if(!((w|x)<<16>>16)){B=(b[V+188>>1]|0)-(b[V+176>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){f=1;break}B=f-g|0;if((((B|0)>-1?B:0-B|0)|0)>3){f=1;break}f=(c[V+128>>2]|0)!=(c[V+124>>2]|0)&1}else f=2;while(0);c[qa>>2]=f;break}else{K=b[V+32>>1]|0;z=b[V+28>>1]|0;P=b[V+142>>1]|0;q=b[V+134>>1]|0;if(!((z|K)<<16>>16)){B=(b[V+140>>1]|0)-(b[V+132>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3)k=1;else{k=P-q|0;k=(((k|0)>-1?k:0-k|0)|0)>3&1}}else k=2;c[Ya>>2]=k;L=b[V+34>>1]|0;y=b[V+30>>1]|0;O=b[V+146>>1]|0;r=b[V+138>>1]|0;if(!((y|L)<<16>>16)){B=(b[V+144>>1]|0)-(b[V+136>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3)l=1;else{l=O-r|0;l=(((l|0)>-1?l:0-l|0)|0)>3&1}}else l=2;c[Xa>>2]=l;M=b[V+40>>1]|0;x=b[V+36>>1]|0;N=b[V+158>>1]|0;s=b[V+150>>1]|0;if(!((x|M)<<16>>16)){B=(b[V+156>>1]|0)-(b[V+148>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3)n=1;else{n=N-s|0;n=(((n|0)>-1?n:0-n|0)|0)>3&1}}else n=2;c[Wa>>2]=n;n=b[V+42>>1]|0;B=b[V+38>>1]|0;J=b[V+162>>1]|0;A=b[V+154>>1]|0;if(!((B|n)<<16>>16)){w=(b[V+160>>1]|0)-(b[V+152>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3)o=1;else{o=J-A|0;o=(((o|0)>-1?o:0-o|0)|0)>3&1}}else o=2;c[Va>>2]=o;D=b[V+44>>1]|0;I=b[V+166>>1]|0;do if(!((D|K)<<16>>16)){w=(b[V+164>>1]|0)-(b[V+140>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3)o=1;else{w=I-P|0;if((((w|0)>-1?w:0-w|0)|0)>3){o=1;break}o=(c[V+124>>2]|0)!=(c[V+116>>2]|0)&1}}else o=2;while(0);c[Ua>>2]=o;E=b[V+46>>1]|0;H=b[V+170>>1]|0;do if(!((E|L)<<16>>16)){w=(b[V+168>>1]|0)-(b[V+144>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){o=1;break}w=H-O|0;if((((w|0)>-1?w:0-w|0)|0)>3){o=1;break}o=(c[V+124>>2]|0)!=(c[V+116>>2]|0)&1}else o=2;while(0);c[Ta>>2]=o;F=b[V+52>>1]|0;G=b[V+182>>1]|0;do if(!((F|M)<<16>>16)){w=(b[V+180>>1]|0)-(b[V+156>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){o=1;break}w=G-N|0;if((((w|0)>-1?w:0-w|0)|0)>3){o=1;break}o=(c[V+128>>2]|0)!=(c[V+120>>2]|0)&1}else o=2;while(0);c[Sa>>2]=o;g=b[V+54>>1]|0;l=b[V+186>>1]|0;do if(!((g|n)<<16>>16)){w=(b[V+184>>1]|0)-(b[V+160>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){u=1;break}w=l-J|0;if((((w|0)>-1?w:0-w|0)|0)>3){u=1;break}u=(c[V+128>>2]|0)!=(c[V+120>>2]|0)&1}else u=2;while(0);c[Ra>>2]=u;f=b[V+48>>1]|0;C=b[V+174>>1]|0;do if(!((f|D)<<16>>16)){w=(b[V+172>>1]|0)-(b[V+164>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){u=1;break}u=C-I|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}else u=2;while(0);c[Qa>>2]=u;h=b[V+50>>1]|0;k=b[V+178>>1]|0;do if(!((h|E)<<16>>16)){w=(b[V+176>>1]|0)-(b[V+168>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){u=1;break}u=k-H|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}else u=2;while(0);c[Pa>>2]=u;j=b[V+56>>1]|0;p=b[V+190>>1]|0;do if(!((j|F)<<16>>16)){w=(b[V+188>>1]|0)-(b[V+180>>1]|0)|0;if((((w|0)>-1?w:0-w|0)|0)>3){u=1;break}u=p-G|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}else u=2;while(0);c[Na>>2]=u;w=b[V+58>>1]|0;t=b[V+194>>1]|0;do if(!((w|g)<<16>>16)){v=(b[V+192>>1]|0)-(b[V+184>>1]|0)|0;if((((v|0)>-1?v:0-v|0)|0)>3){v=1;break}v=t-l|0;v=(((v|0)>-1?v:0-v|0)|0)>3&1}else v=2;while(0);c[Ma>>2]=v;do if(!((y|z)<<16>>16)){z=(b[V+136>>1]|0)-(b[V+132>>1]|0)|0;if((((z|0)>-1?z:0-z|0)|0)>3){u=1;break}u=r-q|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}else u=2;while(0);c[Aa>>2]=u;do if(!((x|y)<<16>>16)){z=(b[V+148>>1]|0)-(b[V+136>>1]|0)|0;if((((z|0)>-1?z:0-z|0)|0)>3){u=1;break}z=s-r|0;if((((z|0)>-1?z:0-z|0)|0)>3){u=1;break}u=(c[V+120>>2]|0)!=(c[V+116>>2]|0)&1}else u=2;while(0);c[za>>2]=u;do if(!((B|x)<<16>>16)){B=(b[V+152>>1]|0)-(b[V+148>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){u=1;break}u=A-s|0;u=(((u|0)>-1?u:0-u|0)|0)>3&1}else u=2;while(0);c[ya>>2]=u;do if(!((L|K)<<16>>16)){B=(b[V+144>>1]|0)-(b[V+140>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){o=1;break}o=O-P|0;o=(((o|0)>-1?o:0-o|0)|0)>3&1}else o=2;while(0);c[xa>>2]=o;do if(!((M|L)<<16>>16)){B=(b[V+156>>1]|0)-(b[V+144>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){o=1;break}B=N-O|0;if((((B|0)>-1?B:0-B|0)|0)>3){o=1;break}o=(c[V+120>>2]|0)!=(c[V+116>>2]|0)&1}else o=2;while(0);c[wa>>2]=o;do if(!((n|M)<<16>>16)){B=(b[V+160>>1]|0)-(b[V+156>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){o=1;break}o=J-N|0;o=(((o|0)>-1?o:0-o|0)|0)>3&1}else o=2;while(0);c[va>>2]=o;do if(!((E|D)<<16>>16)){B=(b[V+168>>1]|0)-(b[V+164>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){n=1;break}n=H-I|0;n=(((n|0)>-1?n:0-n|0)|0)>3&1}else n=2;while(0);c[ua>>2]=n;do if(!((F|E)<<16>>16)){B=(b[V+180>>1]|0)-(b[V+168>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){n=1;break}B=G-H|0;if((((B|0)>-1?B:0-B|0)|0)>3){n=1;break}n=(c[V+128>>2]|0)!=(c[V+124>>2]|0)&1}else n=2;while(0);c[ta>>2]=n;do if(!((g|F)<<16>>16)){B=(b[V+184>>1]|0)-(b[V+180>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){l=1;break}l=l-G|0;l=(((l|0)>-1?l:0-l|0)|0)>3&1}else l=2;while(0);c[sa>>2]=l;do if(!((h|f)<<16>>16)){B=(b[V+176>>1]|0)-(b[V+172>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){l=1;break}l=k-C|0;l=(((l|0)>-1?l:0-l|0)|0)>3&1}else l=2;while(0);c[ra>>2]=l;do if(!((j|h)<<16>>16)){B=(b[V+188>>1]|0)-(b[V+176>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){k=1;break}B=p-k|0;if((((B|0)>-1?B:0-B|0)|0)>3){k=1;break}k=(c[V+128>>2]|0)!=(c[V+124>>2]|0)&1}else k=2;while(0);c[qa>>2]=k;do if(!((w|j)<<16>>16)){B=(b[V+192>>1]|0)-(b[V+188>>1]|0)|0;if((((B|0)>-1?B:0-B|0)|0)>3){f=1;break}f=t-p|0;f=(((f|0)>-1?f:0-f|0)|0)>3&1}else f=2;while(0);c[pa>>2]=f;break}}else vc(V,ia);while(0);if(!(m|c[Ya>>2]|c[Xa>>2]|c[Wa>>2]|c[Va>>2]|c[Ua>>2]|c[Ta>>2]|c[Sa>>2]|c[Ra>>2]|c[Qa>>2]|c[Pa>>2]|c[Na>>2]|c[Ma>>2]|c[Aa>>2]|c[za>>2]|c[ya>>2]|c[xa>>2]|c[wa>>2]|c[va>>2]|c[ua>>2]|c[ta>>2]|c[sa>>2]|c[ra>>2]|c[qa>>2]|c[pa>>2]))break}else{c[Ma>>2]=3;c[Na>>2]=3;c[Pa>>2]=3;c[Qa>>2]=3;c[Ra>>2]=3;c[Sa>>2]=3;c[Ta>>2]=3;c[Ua>>2]=3;c[Va>>2]=3;c[Wa>>2]=3;c[Xa>>2]=3;c[Ya>>2]=3;c[pa>>2]=3;c[qa>>2]=3;c[ra>>2]=3;c[sa>>2]=3;c[ta>>2]=3;c[ua>>2]=3;c[va>>2]=3;c[wa>>2]=3;c[xa>>2]=3;c[ya>>2]=3;c[za>>2]=3;c[Aa>>2]=3}J=V+20|0;g=c[J>>2]|0;L=V+12|0;k=Oa(0,51,(c[L>>2]|0)+g|0)|0;K=V+16|0;h=Oa(0,51,(c[K>>2]|0)+g|0)|0;j=d[6864+k>>0]|0;c[ha>>2]=j;h=d[6920+h>>0]|0;c[ja>>2]=h;k=6976+(k*3|0)|0;c[Ka>>2]=k;do if(!R){l=c[(c[S>>2]|0)+20>>2]|0;if((l|0)==(g|0)){c[X>>2]=j;c[_>>2]=h;c[La>>2]=k;break}else{A=(g+1+l|0)>>>1;B=Oa(0,51,(c[L>>2]|0)+A|0)|0;A=Oa(0,51,(c[K>>2]|0)+A|0)|0;c[X>>2]=d[6864+B>>0];c[_>>2]=d[6920+A>>0];c[La>>2]=6976+(B*3|0);break}}while(0);do if(!Q){f=c[(c[T>>2]|0)+20>>2]|0;if((f|0)==(g|0)){c[Y>>2]=c[ha>>2];c[$>>2]=c[ja>>2];c[da>>2]=c[Ka>>2];break}else{A=(g+1+f|0)>>>1;B=Oa(0,51,(c[L>>2]|0)+A|0)|0;A=Oa(0,51,(c[K>>2]|0)+A|0)|0;c[Y>>2]=d[6864+B>>0];c[$>>2]=d[6920+A>>0];c[da>>2]=6976+(B*3|0);break}}while(0);M=Z(aa,ea)|0;P=3;o=0;O=(c[e>>2]|0)+((M<<8)+(U<<4))|0;N=ia;while(1){l=c[N+4>>2]|0;if(l)wc(O,l,fa,Da);l=c[N+12>>2]|0;if(l)wc(O+4|0,l,ga,Da);k=N+16|0;m=c[N+20>>2]|0;if(m)wc(O+8|0,m,ga,Da);j=N+24|0;m=c[N+28>>2]|0;if(m)wc(O+12|0,m,ga,Da);n=c[N>>2]|0;l=N+8|0;m=c[l>>2]|0;a:do if(((n|0)==(m|0)?(n|0)==(c[k>>2]|0):0)?(n|0)==(c[j>>2]|0):0){if(!n)break;y=c[La+(o*12|0)+4>>2]|0;x=c[La+(o*12|0)+8>>2]|0;if(n>>>0<4){t=d[(c[La+(o*12|0)>>2]|0)+(n+-1)>>0]|0;k=0-t|0;j=t+1|0;f=O;h=16;while(1){o=f+Ca|0;s=d[o>>0]|0;u=f+Ja|0;r=d[u>>0]|0;q=d[f>>0]|0;m=f+Da|0;g=d[m>>0]|0;B=r-q|0;do if(((B|0)>-1?B:0-B|0)>>>0<y>>>0){B=s-r|0;if(((B|0)>-1?B:0-B|0)>>>0>=x>>>0)break;B=g-q|0;if(((B|0)>-1?B:0-B|0)>>>0>=x>>>0)break;n=d[f+Ha>>0]|0;B=n-r|0;if(((B|0)>-1?B:0-B|0)>>>0<x>>>0){a[o>>0]=(Oa(k,t,((r+1+q|0)>>>1)-(s<<1)+n>>1)|0)+s;o=j}else o=t;n=d[f+Ia>>0]|0;B=n-q|0;if(((B|0)>-1?B:0-B|0)>>>0<x>>>0){a[m>>0]=(Oa(k,t,((r+1+q|0)>>>1)-(g<<1)+n>>1)|0)+g;o=o+1|0}A=Oa(0-o|0,o,s+4-g+(q-r<<2)>>3)|0;B=a[3472+((q|512)-A)>>0]|0;a[u>>0]=a[3472+(A+(r|512))>>0]|0;a[f>>0]=B}while(0);h=h+-1|0;if(!h)break a;else f=f+1|0}}n=(y>>>2)+2|0;t=O;u=16;while(1){m=t+Ca|0;f=d[m>>0]|0;l=t+Ja|0;g=d[l>>0]|0;p=d[t>>0]|0;k=t+Da|0;q=d[k>>0]|0;o=g-p|0;o=(o|0)>-1?o:0-o|0;b:do if(o>>>0<y>>>0){B=f-g|0;if(((B|0)>-1?B:0-B|0)>>>0>=x>>>0)break;B=q-p|0;if(((B|0)>-1?B:0-B|0)>>>0>=x>>>0)break;j=t+Ha|0;r=d[j>>0]|0;h=t+Ia|0;s=d[h>>0]|0;do if(o>>>0<n>>>0){B=r-g|0;if(((B|0)>-1?B:0-B|0)>>>0<x>>>0){B=g+f+p|0;a[l>>0]=(q+4+(B<<1)+r|0)>>>3;a[m>>0]=(B+2+r|0)>>>2;a[j>>0]=(B+4+(r*3|0)+(d[t+Ea>>0]<<1)|0)>>>3}else a[l>>0]=(g+2+(f<<1)+q|0)>>>2;B=s-p|0;if(((B|0)>-1?B:0-B|0)>>>0>=x>>>0)break;B=p+g+q|0;a[t>>0]=(f+4+(B<<1)+s|0)>>>3;a[k>>0]=(B+2+s|0)>>>2;a[h>>0]=(B+4+(s*3|0)+(d[t+Ga>>0]<<1)|0)>>>3;break b}else a[l>>0]=(g+2+(f<<1)+q|0)>>>2;while(0);a[t>>0]=(f+2+p+(q<<1)|0)>>>2}while(0);u=u+-1|0;if(!u)break;else t=t+1|0}}else ab=311;while(0);do if((ab|0)==311){ab=0;if(n){xc(O,n,La+(o*12|0)|0,Da);m=c[l>>2]|0}if(m)xc(O+4|0,m,La+(o*12|0)|0,Da);m=c[k>>2]|0;if(m)xc(O+8|0,m,La+(o*12|0)|0,Da);l=c[j>>2]|0;if(!l)break;xc(O+12|0,l,La+(o*12|0)|0,Da)}while(0);if(!P)break;else{P=P+-1|0;o=2;O=O+Ba|0;N=N+32|0}}h=c[V+24>>2]|0;g=c[192+((Oa(0,51,(c[J>>2]|0)+h|0)|0)<<2)>>2]|0;m=Oa(0,51,(c[L>>2]|0)+g|0)|0;j=Oa(0,51,(c[K>>2]|0)+g|0)|0;k=d[6864+m>>0]|0;c[ha>>2]=k;j=d[6920+j>>0]|0;c[ja>>2]=j;m=6976+(m*3|0)|0;c[Ka>>2]=m;do if(!R){l=c[(c[S>>2]|0)+20>>2]|0;if((l|0)==(c[J>>2]|0)){c[X>>2]=k;c[_>>2]=j;c[La>>2]=m;break}else{A=(g+1+(c[192+((Oa(0,51,l+h|0)|0)<<2)>>2]|0)|0)>>>1;B=Oa(0,51,A+(c[L>>2]|0)|0)|0;A=Oa(0,51,(c[K>>2]|0)+A|0)|0;c[X>>2]=d[6864+B>>0];c[_>>2]=d[6920+A>>0];c[La>>2]=6976+(B*3|0);break}}while(0);do if(!Q){f=c[(c[T>>2]|0)+20>>2]|0;if((f|0)==(c[J>>2]|0)){c[Y>>2]=c[ha>>2];c[$>>2]=c[ja>>2];c[da>>2]=c[Ka>>2];break}else{A=(g+1+(c[192+((Oa(0,51,f+h|0)|0)<<2)>>2]|0)|0)>>>1;B=Oa(0,51,A+(c[L>>2]|0)|0)|0;A=Oa(0,51,(c[K>>2]|0)+A|0)|0;c[Y>>2]=d[6864+B>>0];c[$>>2]=d[6920+A>>0];c[da>>2]=6976+(B*3|0);break}}while(0);j=c[e>>2]|0;l=(U<<3)+Fa+(M<<6)|0;n=j+l|0;l=j+(l+ba)|0;j=0;h=ia;o=0;while(1){g=h+4|0;f=c[g>>2]|0;if(f){yc(n,f,fa,ca);yc(l,c[g>>2]|0,fa,ca)}g=h+36|0;f=c[g>>2]|0;if(f){yc(n+Da|0,f,fa,ca);yc(l+Da|0,c[g>>2]|0,fa,ca)}m=h+16|0;g=h+20|0;f=c[g>>2]|0;if(f){yc(n+4|0,f,ga,ca);yc(l+4|0,c[g>>2]|0,ga,ca)}g=h+52|0;f=c[g>>2]|0;if(f){yc(n+W|0,f,ga,ca);yc(l+W|0,c[g>>2]|0,ga,ca)}g=c[h>>2]|0;k=h+8|0;f=c[k>>2]|0;do if((g|0)==(f|0)){if((g|0)!=(c[m>>2]|0)){ab=342;break}if((g|0)!=(c[h+24>>2]|0)){ab=342;break}if(!g)break;B=La+(j*12|0)|0;zc(n,g,B,ca);zc(l,c[h>>2]|0,B,ca)}else ab=342;while(0);do if((ab|0)==342){ab=0;if(g){f=La+(j*12|0)|0;Ac(n,g,f,ca);Ac(l,c[h>>2]|0,f,ca);f=c[k>>2]|0}if(f){B=La+(j*12|0)|0;Ac(n+2|0,f,B,ca);Ac(l+2|0,c[k>>2]|0,B,ca)}f=c[m>>2]|0;if(f){B=La+(j*12|0)|0;Ac(n+4|0,f,B,ca);Ac(l+4|0,c[m>>2]|0,B,ca)}g=h+24|0;f=c[g>>2]|0;if(!f)break;B=La+(j*12|0)|0;Ac(n+6|0,f,B,ca);Ac(l+6|0,c[g>>2]|0,B,ca)}while(0);o=o+1|0;if((o|0)==2)break;else{n=n+Ia|0;l=l+Ia|0;j=2;h=h+64|0}}}while(0);f=U+1|0;g=(f|0)==(ea|0);aa=(g&1)+aa|0;if(aa>>>0>=(c[ka>>2]|0)>>>0)break;else{U=g?0:f;V=V+216|0}}i=bb;return}function vc(a,d){a=a|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0;B=i;l=a+28|0;y=b[a+32>>1]|0;if(!(y<<16>>16))e=(b[l>>1]|0)!=0?2:0;else e=2;c[d+32>>2]=e;z=b[a+34>>1]|0;x=z<<16>>16==0;if(x)e=(b[a+30>>1]|0)!=0?2:0;else e=2;c[d+40>>2]=e;A=b[a+40>>1]|0;v=A<<16>>16==0;if(v)e=(b[a+36>>1]|0)!=0?2:0;else e=2;c[d+48>>2]=e;f=b[a+42>>1]|0;w=f<<16>>16==0;if(w)e=(b[a+38>>1]|0)!=0?2:0;else e=2;c[d+56>>2]=e;s=b[a+44>>1]|0;if(!(s<<16>>16))e=y<<16>>16!=0?2:0;else e=2;c[d+64>>2]=e;t=b[a+46>>1]|0;p=t<<16>>16==0;if(p)e=z<<16>>16!=0?2:0;else e=2;c[d+72>>2]=e;u=b[a+52>>1]|0;q=u<<16>>16==0;if(q)e=A<<16>>16!=0?2:0;else e=2;c[d+80>>2]=e;g=b[a+54>>1]|0;r=g<<16>>16==0;if(r)e=f<<16>>16!=0?2:0;else e=2;c[d+88>>2]=e;m=b[a+48>>1]|0;if(!(m<<16>>16))e=s<<16>>16!=0?2:0;else e=2;c[d+96>>2]=e;n=b[a+50>>1]|0;h=n<<16>>16==0;if(h)e=t<<16>>16!=0?2:0;else e=2;c[d+104>>2]=e;o=b[a+56>>1]|0;j=o<<16>>16==0;if(j)f=u<<16>>16!=0?2:0;else f=2;c[d+112>>2]=f;k=(b[a+58>>1]|0)==0;if(k)f=g<<16>>16!=0?2:0;else f=2;c[d+120>>2]=f;g=b[a+30>>1]|0;if(!(g<<16>>16))f=(b[l>>1]|0)!=0?2:0;else f=2;c[d+12>>2]=f;e=b[a+36>>1]|0;if(!(e<<16>>16))f=g<<16>>16!=0?2:0;else f=2;c[d+20>>2]=f;if(!(b[a+38>>1]|0))e=e<<16>>16!=0?2:0;else e=2;c[d+28>>2]=e;if(x)e=y<<16>>16!=0?2:0;else e=2;c[d+44>>2]=e;if(v)e=z<<16>>16!=0?2:0;else e=2;c[d+52>>2]=e;if(w)e=A<<16>>16!=0?2:0;else e=2;c[d+60>>2]=e;if(p)e=s<<16>>16!=0?2:0;else e=2;c[d+76>>2]=e;if(q)e=t<<16>>16!=0?2:0;else e=2;c[d+84>>2]=e;if(r)e=u<<16>>16!=0?2:0;else e=2;c[d+92>>2]=e;if(h)e=m<<16>>16!=0?2:0;else e=2;c[d+108>>2]=e;if(j)e=n<<16>>16!=0?2:0;else e=2;c[d+116>>2]=e;if(!k){y=2;z=d+124|0;c[z>>2]=y;i=B;return}y=o<<16>>16!=0?2:0;z=d+124|0;c[z>>2]=y;i=B;return}function wc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;w=i;u=c[f+4>>2]|0;v=c[f+8>>2]|0;if(e>>>0<4){l=d[(c[f>>2]|0)+(e+-1)>>0]|0;n=0-l|0;m=l+1|0;k=4;while(1){f=b+-2|0;s=d[f>>0]|0;t=b+-1|0;r=d[t>>0]|0;q=d[b>>0]|0;j=b+1|0;h=d[j>>0]|0;o=r-q|0;if((((o|0)>-1?o:0-o|0)>>>0<u>>>0?(o=s-r|0,((o|0)>-1?o:0-o|0)>>>0<v>>>0):0)?(o=h-q|0,((o|0)>-1?o:0-o|0)>>>0<v>>>0):0){e=d[b+-3>>0]|0;p=d[b+2>>0]|0;o=e-r|0;if(((o|0)>-1?o:0-o|0)>>>0<v>>>0){a[f>>0]=(Oa(n,l,((r+1+q|0)>>>1)-(s<<1)+e>>1)|0)+s;f=m}else f=l;o=p-q|0;if(((o|0)>-1?o:0-o|0)>>>0<v>>>0){a[j>>0]=(Oa(n,l,((r+1+q|0)>>>1)-(h<<1)+p>>1)|0)+h;f=f+1|0}j=Oa(0-f|0,f,s+4-h+(q-r<<2)>>3)|0;o=a[3472+((q|512)-j)>>0]|0;a[t>>0]=a[3472+((r|512)+j)>>0]|0;a[b>>0]=o}k=k+-1|0;if(!k)break;else b=b+g|0}i=w;return}t=(u>>>2)+2|0;s=4;while(1){k=b+-2|0;q=d[k>>0]|0;l=b+-1|0;r=d[l>>0]|0;m=d[b>>0]|0;e=b+1|0;n=d[e>>0]|0;f=r-m|0;f=(f|0)>-1?f:0-f|0;do if((f>>>0<u>>>0?(o=q-r|0,((o|0)>-1?o:0-o|0)>>>0<v>>>0):0)?(o=n-m|0,((o|0)>-1?o:0-o|0)>>>0<v>>>0):0){h=b+-3|0;o=d[h>>0]|0;j=b+2|0;p=d[j>>0]|0;if(f>>>0<t>>>0){f=o-r|0;if(((f|0)>-1?f:0-f|0)>>>0<v>>>0){f=r+q+m|0;a[l>>0]=(n+4+(f<<1)+o|0)>>>3;a[k>>0]=(f+2+o|0)>>>2;a[h>>0]=(f+4+(o*3|0)+((d[b+-4>>0]|0)<<1)|0)>>>3}else a[l>>0]=(r+2+(q<<1)+n|0)>>>2;o=p-m|0;if(((o|0)>-1?o:0-o|0)>>>0<v>>>0){o=m+r+n|0;a[b>>0]=(q+4+(o<<1)+p|0)>>>3;a[e>>0]=(o+2+p|0)>>>2;a[j>>0]=(o+4+(p*3|0)+((d[b+3>>0]|0)<<1)|0)>>>3;break}}else a[l>>0]=(r+2+(q<<1)+n|0)>>>2;a[b>>0]=(q+2+m+(n<<1)|0)>>>2}while(0);s=s+-1|0;if(!s)break;else b=b+g|0}i=w;return}function xc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0;A=i;u=d[(c[f>>2]|0)+(e+-1)>>0]|0;w=0-g|0;v=w<<1;t=f+4|0;o=f+8|0;q=Z(g,-3)|0;s=0-u|0;p=u+1|0;r=g<<1;n=4;while(1){e=b+v|0;k=b+w|0;j=b+g|0;f=a[j>>0]|0;l=d[k>>0]|0;m=d[b>>0]|0;h=l-m|0;if((((h|0)>-1?h:0-h|0)>>>0<(c[t>>2]|0)>>>0?(y=d[e>>0]|0,h=y-l|0,x=c[o>>2]|0,((h|0)>-1?h:0-h|0)>>>0<x>>>0):0)?(z=f&255,f=z-m|0,((f|0)>-1?f:0-f|0)>>>0<x>>>0):0){f=d[b+q>>0]|0;h=f-l|0;if(((h|0)>-1?h:0-h|0)>>>0<x>>>0){a[e>>0]=(Oa(s,u,((l+1+m|0)>>>1)-(y<<1)+f>>1)|0)+y;e=c[o>>2]|0;f=p}else{e=x;f=u}h=d[b+r>>0]|0;B=h-m|0;if(((B|0)>-1?B:0-B|0)>>>0<e>>>0){a[j>>0]=(Oa(s,u,((l+1+m|0)>>>1)-(z<<1)+h>>1)|0)+z;f=f+1|0}f=Oa(0-f|0,f,4-z+(m-l<<2)+y>>3)|0;e=a[3472+((m|512)-f)>>0]|0;a[k>>0]=a[3472+((l|512)+f)>>0]|0;a[b>>0]=e}n=n+-1|0;if(!n)break;else b=b+1|0}i=A;return}function ya(a){a=a|0;var b=0;b=i;i=i+a|0;i=i+15&-16;return b|0}function za(){return i|0}function Aa(a){a=a|0;i=a}function Ba(a,b){a=a|0;b=b|0;if(!m){m=a;n=b}}function Ca(b){b=b|0;a[k>>0]=a[b>>0];a[k+1>>0]=a[b+1>>0];a[k+2>>0]=a[b+2>>0];a[k+3>>0]=a[b+3>>0]}function Da(b){b=b|0;a[k>>0]=a[b>>0];a[k+1>>0]=a[b+1>>0];a[k+2>>0]=a[b+2>>0];a[k+3>>0]=a[b+3>>0];a[k+4>>0]=a[b+4>>0];a[k+5>>0]=a[b+5>>0];a[k+6>>0]=a[b+6>>0];a[k+7>>0]=a[b+7>>0]}function Ea(a){a=a|0;B=a}function Fa(){return B|0}function Ga(a,b,e,f){a=a|0;b=b|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0;k=i;g=d[8+b>>0]|0;j=d[64+b>>0]|0;b=c[120+(j*12|0)>>2]<<g;h=c[124+(j*12|0)>>2]<<g;g=c[128+(j*12|0)>>2]<<g;if(!e)c[a>>2]=Z(c[a>>2]|0,b)|0;a:do if(!(f&65436)){if(f&98){n=a+4|0;l=Z(c[n>>2]|0,h)|0;j=a+20|0;m=Z(c[j>>2]|0,b)|0;e=a+24|0;g=Z(c[e>>2]|0,h)|0;h=c[a>>2]|0;b=(l>>1)-g|0;g=l+(g>>1)|0;l=m+h+32|0;f=l+g>>6;c[a>>2]=f;m=h-m+32|0;h=m+b>>6;c[n>>2]=h;b=m-b>>6;c[a+8>>2]=b;g=l-g>>6;c[a+12>>2]=g;c[a+48>>2]=f;c[a+32>>2]=f;c[a+16>>2]=f;c[a+52>>2]=h;c[a+36>>2]=h;c[j>>2]=h;c[a+56>>2]=b;c[a+40>>2]=b;c[e>>2]=b;c[a+60>>2]=g;c[a+44>>2]=g;c[a+28>>2]=g;if((f+512|0)>>>0>1023|(h+512|0)>>>0>1023|(b+512|0)>>>0>1023|(g+512|0)>>>0>1023)g=1;else break;i=k;return g|0}g=(c[a>>2]|0)+32>>6;if((g+512|0)>>>0>1023){m=1;i=k;return m|0}else{c[a+60>>2]=g;c[a+56>>2]=g;c[a+52>>2]=g;c[a+48>>2]=g;c[a+44>>2]=g;c[a+40>>2]=g;c[a+36>>2]=g;c[a+32>>2]=g;c[a+28>>2]=g;c[a+24>>2]=g;c[a+20>>2]=g;c[a+16>>2]=g;c[a+12>>2]=g;c[a+8>>2]=g;c[a+4>>2]=g;c[a>>2]=g;break}}else{z=a+4|0;s=a+56|0;w=a+60|0;t=c[w>>2]|0;u=Z(c[z>>2]|0,h)|0;c[s>>2]=Z(c[s>>2]|0,h)|0;c[w>>2]=Z(t,g)|0;w=a+8|0;t=c[w>>2]|0;s=a+16|0;y=Z(c[a+20>>2]|0,b)|0;o=Z(c[s>>2]|0,g)|0;q=a+12|0;p=c[q>>2]|0;f=Z(c[a+32>>2]|0,h)|0;e=Z(c[a+24>>2]|0,h)|0;r=c[a+28>>2]|0;j=Z(c[a+48>>2]|0,g)|0;n=Z(c[a+36>>2]|0,h)|0;l=c[a+44>>2]|0;m=Z(c[a+40>>2]|0,g)|0;g=Z(c[a+52>>2]|0,h)|0;x=c[a>>2]|0;v=y+x|0;y=x-y|0;x=(u>>1)-e|0;u=(e>>1)+u|0;e=u+v|0;c[a>>2]=e;c[z>>2]=x+y;c[w>>2]=y-x;c[q>>2]=v-u;q=Z(h,r+t|0)|0;r=Z(t-r|0,h)|0;h=(o>>1)-j|0;o=(j>>1)+o|0;j=o+q|0;c[s>>2]=j;c[a+20>>2]=h+r;c[a+24>>2]=r-h;c[a+28>>2]=q-o;o=Z(b,l+p|0)|0;b=Z(p-l|0,b)|0;l=(f>>1)-g|0;f=(g>>1)+f|0;h=f+o|0;c[a+32>>2]=h;c[a+36>>2]=l+b;c[a+40>>2]=b-l;c[a+44>>2]=o-f;f=a+56|0;o=c[f>>2]|0;l=o+n|0;o=n-o|0;b=a+60|0;g=c[b>>2]|0;n=(m>>1)-g|0;m=(g>>1)+m|0;g=m+l|0;c[a+48>>2]=g;c[a+52>>2]=n+o;c[f>>2]=o-n;c[b>>2]=l-m;b=j;j=3;while(1){v=(b>>1)-g|0;g=(g>>1)+b|0;w=h+e+32|0;x=w+g>>6;c[a>>2]=x;b=e-h+32|0;y=b+v>>6;c[a+16>>2]=y;b=b-v>>6;c[a+32>>2]=b;g=w-g>>6;c[a+48>>2]=g;if((x+512|0)>>>0>1023|(y+512|0)>>>0>1023){g=1;b=14;break}if((b+512|0)>>>0>1023|(g+512|0)>>>0>1023){g=1;b=14;break}f=a+4|0;if(!j)break a;e=c[f>>2]|0;h=c[a+36>>2]|0;b=c[a+20>>2]|0;g=c[a+52>>2]|0;a=f;j=j+-1|0}if((b|0)==14){i=k;return g|0}}while(0);y=0;i=k;return y|0}function Ha(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0;B=i;e=a[64+d>>0]|0;s=a[8+d>>0]|0;D=b+8|0;u=c[D>>2]|0;j=c[b+20>>2]|0;q=b+16|0;y=c[q>>2]|0;r=b+32|0;z=c[r>>2]|0;E=b+12|0;v=c[E>>2]|0;f=c[b+24>>2]|0;m=c[b+28>>2]|0;o=b+48|0;g=c[o>>2]|0;C=c[b+36>>2]|0;A=c[b+40>>2]|0;F=c[b+44>>2]|0;h=c[b+52>>2]|0;p=c[b>>2]|0;l=j+p|0;j=p-j|0;p=b+4|0;x=c[p>>2]|0;t=x-f|0;x=f+x|0;f=x+l|0;c[b>>2]=f;k=t+j|0;c[p>>2]=k;t=j-t|0;c[D>>2]=t;x=l-x|0;c[E>>2]=x;E=m+u|0;m=u-m|0;u=y-g|0;y=g+y|0;g=y+E|0;c[q>>2]=g;l=u+m|0;c[b+20>>2]=l;u=m-u|0;c[b+24>>2]=u;y=E-y|0;c[b+28>>2]=y;E=F+v|0;F=v-F|0;v=z-h|0;z=h+z|0;h=z+E|0;c[b+32>>2]=h;m=v+F|0;c[b+36>>2]=m;v=F-v|0;c[b+40>>2]=v;z=E-z|0;c[b+44>>2]=z;E=b+56|0;F=c[E>>2]|0;D=F+C|0;F=C-F|0;C=b+60|0;j=c[C>>2]|0;w=A-j|0;A=j+A|0;j=A+D|0;c[b+48>>2]=j;n=w+F|0;c[b+52>>2]=n;w=F-w|0;c[E>>2]=w;A=D-A|0;c[C>>2]=A;s=s&255;e=c[120+((e&255)*12|0)>>2]|0;if(d>>>0>11){d=e<<s+-2;s=h+f|0;h=f-h|0;f=g-j|0;e=j+g|0;c[b>>2]=Z(e+s|0,d)|0;c[q>>2]=Z(f+h|0,d)|0;c[r>>2]=Z(h-f|0,d)|0;c[o>>2]=Z(s-e|0,d)|0;r=m+k|0;e=k-m|0;q=l-n|0;s=n+l|0;c[p>>2]=Z(s+r|0,d)|0;c[b+20>>2]=Z(q+e|0,d)|0;c[b+36>>2]=Z(e-q|0,d)|0;c[b+52>>2]=Z(r-s|0,d)|0;s=v+t|0;t=t-v|0;v=u-w|0;w=w+u|0;c[b+8>>2]=Z(w+s|0,d)|0;c[b+24>>2]=Z(v+t|0,d)|0;c[b+40>>2]=Z(t-v|0,d)|0;c[b+56>>2]=Z(s-w|0,d)|0;w=z+x|0;v=x-z|0;x=y-A|0;y=A+y|0;c[b+12>>2]=Z(y+w|0,d)|0;c[b+28>>2]=Z(x+v|0,d)|0;c[b+44>>2]=Z(v-x|0,d)|0;c[b+60>>2]=Z(w-y|0,d)|0;i=B;return}else{C=(d+-6|0)>>>0<6?1:2;d=2-s|0;s=h+f|0;D=f-h|0;h=g-j|0;f=j+g|0;c[b>>2]=(Z(f+s|0,e)|0)+C>>d;c[q>>2]=(Z(h+D|0,e)|0)+C>>d;c[r>>2]=(Z(D-h|0,e)|0)+C>>d;c[o>>2]=(Z(s-f|0,e)|0)+C>>d;r=m+k|0;f=k-m|0;q=l-n|0;s=n+l|0;c[p>>2]=(Z(s+r|0,e)|0)+C>>d;c[b+20>>2]=(Z(q+f|0,e)|0)+C>>d;c[b+36>>2]=(Z(f-q|0,e)|0)+C>>d;c[b+52>>2]=(Z(r-s|0,e)|0)+C>>d;s=v+t|0;t=t-v|0;v=u-w|0;w=w+u|0;c[b+8>>2]=(Z(w+s|0,e)|0)+C>>d;c[b+24>>2]=(Z(v+t|0,e)|0)+C>>d;c[b+40>>2]=(Z(t-v|0,e)|0)+C>>d;c[b+56>>2]=(Z(s-w|0,e)|0)+C>>d;w=z+x|0;v=x-z|0;x=y-A|0;y=A+y|0;c[b+12>>2]=(Z(y+w|0,e)|0)+C>>d;c[b+28>>2]=(Z(x+v|0,e)|0)+C>>d;c[b+44>>2]=(Z(v-x|0,e)|0)+C>>d;c[b+60>>2]=(Z(w-y|0,e)|0)+C>>d;i=B;return}}function Ia(a,b){a=a|0;b=b|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;e=c[120+((d[64+b>>0]|0)*12|0)>>2]|0;if(b>>>0>5){e=e<<(d[8+b>>0]|0)+-1;b=0}else b=1;k=c[a>>2]|0;g=a+8|0;h=c[g>>2]|0;m=h+k|0;h=k-h|0;k=a+4|0;j=c[k>>2]|0;l=a+12|0;f=c[l>>2]|0;i=j-f|0;j=f+j|0;c[a>>2]=(Z(j+m|0,e)|0)>>b;c[k>>2]=(Z(m-j|0,e)|0)>>b;c[g>>2]=(Z(i+h|0,e)|0)>>b;c[l>>2]=(Z(h-i|0,e)|0)>>b;l=a+16|0;i=c[l>>2]|0;h=a+24|0;g=c[h>>2]|0;k=g+i|0;g=i-g|0;i=a+20|0;j=c[i>>2]|0;a=a+28|0;m=c[a>>2]|0;f=j-m|0;j=m+j|0;c[l>>2]=(Z(j+k|0,e)|0)>>b;c[i>>2]=(Z(k-j|0,e)|0)>>b;c[h>>2]=(Z(f+g|0,e)|0)>>b;c[a>>2]=(Z(g-f|0,e)|0)>>b;return}function Ja(a,b){a=a|0;b=b|0;var c=0,d=0;d=i;b=1<<b+-1;if(!(b&a)){c=b;b=0}else{b=0;i=d;return b|0}do{b=b+1|0;c=c>>>1}while((c|0)!=0&(c&a|0)==0);i=d;return b|0}function Ka(a){a=a|0;var b=0,d=0;d=i;b=8-(c[a+8>>2]|0)|0;a=jb(a,b)|0;if((a|0)==-1){a=1;i=d;return a|0}a=(a|0)!=(c[400+(b+-1<<2)>>2]|0)&1;i=d;return a|0}function La(a){a=a|0;var b=0,d=0,e=0,f=0;d=i;f=c[a+12>>2]<<3;e=c[a+16>>2]|0;b=f-e|0;if((f|0)==(e|0)){a=0;i=d;return a|0}if(b>>>0>8){a=1;i=d;return a|0}else{a=((kb(a)|0)>>>(32-b|0)|0)!=(1<<b+-1|0)&1;i=d;return a|0}return 0}function Ma(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;f=i;e=c[a+(d<<2)>>2]|0;do{d=d+1|0;if(d>>>0>=b>>>0)break}while((c[a+(d<<2)>>2]|0)!=(e|0));i=f;return((d|0)==(b|0)?0:d)|0}function Na(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;e=c[a+4>>2]|0;f=(b>>>0)%(e>>>0)|0;d=b-f|0;b=Z(c[a+8>>2]|0,e)|0;e=c[a>>2]|0;c[a+12>>2]=e+((d<<8)+(f<<4));d=(f<<3)+(b<<8)+(d<<6)|0;c[a+16>>2]=e+d;c[a+20>>2]=e+(d+(b<<6));return}function Oa(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)>=(a|0))a=(c|0)>(b|0)?b:c;return a|0}function Pa(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;s=i;a:do if(((e>>>0>3?(a[b>>0]|0)==0:0)?(a[b+1>>0]|0)==0:0)?(h=a[b+2>>0]|0,(h&255)<2):0){b:do if((e|0)!=3){p=-3;q=3;k=b+3|0;j=2;while(1){if(h<<24>>24)if(h<<24>>24==1&j>>>0>1){o=q;h=0;m=0;l=0;break}else j=0;else j=j+1|0;l=q+1|0;if((l|0)==(e|0))break b;h=a[k>>0]|0;p=~q;q=l;k=k+1|0}while(1){r=a[k>>0]|0;n=o+1|0;j=r<<24>>24!=0;l=(j&1^1)+l|0;h=r<<24>>24==3&(l|0)==2?1:h;if(r<<24>>24==1&l>>>0>1){r=14;break}if(j){m=l>>>0>2?1:m;l=0}if((n|0)==(e|0)){r=18;break}else{o=n;k=k+1|0}}if((r|0)==14){n=p+o-l|0;c[f+12>>2]=n;j=q;l=l-(l>>>0<3?l:3)|0;break a}else if((r|0)==18){n=p+e-l|0;c[f+12>>2]=n;j=q;break a}}while(0);c[g>>2]=e;q=1;i=s;return q|0}else r=19;while(0);if((r|0)==19){c[f+12>>2]=e;n=e;h=1;j=0;m=0;l=0}k=b+j|0;c[f>>2]=k;c[f+4>>2]=k;c[f+8>>2]=0;c[f+16>>2]=0;o=f+12|0;c[g>>2]=l+j+n;if(m){q=1;i=s;return q|0}if(!h){q=0;i=s;return q|0}l=c[o>>2]|0;h=k;m=k;j=0;c:while(1){while(1){q=l;l=l+-1|0;if(!q){r=31;break c}k=a[h>>0]|0;if((j|0)!=2)break;if(k<<24>>24!=3){r=29;break}if(!l){h=1;r=32;break c}h=h+1|0;if((d[h>>0]|0)>3){h=1;r=32;break c}else j=0}if((r|0)==29){r=0;if((k&255)<3){h=1;r=32;break}else j=2}a[m>>0]=k;h=h+1|0;m=m+1|0;j=k<<24>>24==0?j+1|0:0}if((r|0)==31){c[o>>2]=m-h+(c[o>>2]|0);q=0;i=s;return q|0}else if((r|0)==32){i=s;return h|0}return 0}function Qa(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0;o=i;i=i+16|0;n=o;id(b,0,92);f=jb(a,8)|0;a:do if((((f|0)!=-1?(c[b>>2]=f,jb(a,1)|0,jb(a,1)|0,(jb(a,1)|0)!=-1):0)?(jb(a,5)|0)!=-1:0)?(e=jb(a,8)|0,(e|0)!=-1):0){m=b+4|0;c[m>>2]=e;f=b+8|0;d=nb(a,f)|0;if(!d)if((c[f>>2]|0)>>>0<=31){d=nb(a,n)|0;if(!d){f=c[n>>2]|0;if(f>>>0<=12){c[b+12>>2]=1<<f+4;d=nb(a,n)|0;if(!d){f=c[n>>2]|0;if(f>>>0<=2){c[b+16>>2]=f;b:do if(!f){d=nb(a,n)|0;if(d)break a;f=c[n>>2]|0;if(f>>>0>12){d=1;break a}c[b+20>>2]=1<<f+4}else if((f|0)==1){f=jb(a,1)|0;if((f|0)==-1){d=1;break a}c[b+24>>2]=(f|0)==1&1;d=ob(a,b+28|0)|0;if(d)break a;d=ob(a,b+32|0)|0;if(d)break a;h=b+36|0;d=nb(a,h)|0;if(d)break a;f=c[h>>2]|0;if(f>>>0>255){d=1;break a}if(!f){c[b+40>>2]=0;break}f=fd(f<<2)|0;g=b+40|0;c[g>>2]=f;if(!f){d=65535;break a}if(c[h>>2]|0){e=0;while(1){d=ob(a,f+(e<<2)|0)|0;e=e+1|0;if(d)break a;if(e>>>0>=(c[h>>2]|0)>>>0)break b;f=c[g>>2]|0}}}while(0);l=b+44|0;d=nb(a,l)|0;if(!d)if((c[l>>2]|0)>>>0<=16?(k=jb(a,1)|0,(k|0)!=-1):0){c[b+48>>2]=(k|0)==1&1;d=nb(a,n)|0;if(!d){e=b+52|0;c[e>>2]=(c[n>>2]|0)+1;d=nb(a,n)|0;if(!d){k=b+56|0;c[k>>2]=(c[n>>2]|0)+1;h=jb(a,1)|0;if((!((h|0)==0|(h|0)==-1)?(jb(a,1)|0)!=-1:0)?(j=jb(a,1)|0,(j|0)!=-1):0){j=(j|0)==1;c[b+60>>2]=j&1;if(j){j=b+64|0;d=nb(a,j)|0;if(d)break;f=b+68|0;d=nb(a,f)|0;if(d)break;h=b+72|0;d=nb(a,h)|0;if(d)break;g=b+76|0;d=nb(a,g)|0;if(d)break;e=c[e>>2]|0;if((c[j>>2]|0)>((e<<3)+~c[f>>2]|0)){d=1;break}f=c[k>>2]|0;if((c[h>>2]|0)>((f<<3)+~c[g>>2]|0)){d=1;break}}else{e=c[e>>2]|0;f=c[k>>2]|0}d=Z(f,e)|0;do switch(c[m>>2]|0){case 11:{f=396;e=345600;g=58;break}case 12:{f=396;e=912384;g=58;break}case 13:{f=396;e=912384;g=58;break}case 20:{f=396;e=912384;g=58;break}case 21:{f=792;e=1824768;g=58;break}case 22:{f=1620;e=3110400;g=58;break}case 30:{f=1620;e=3110400;g=58;break}case 31:{f=3600;e=6912e3;g=58;break}case 32:{f=5120;e=7864320;g=58;break}case 40:{f=8192;e=12582912;g=58;break}case 41:{f=8192;e=12582912;g=58;break}case 42:{f=8704;e=13369344;g=58;break}case 50:{f=22080;e=42393600;g=58;break}case 51:{f=36864;e=70778880;g=58;break}case 10:{f=99;e=152064;g=58;break}default:g=60}while(0);do if((g|0)==58){if(f>>>0<d>>>0){g=60;break}e=(e>>>0)/((d*384|0)>>>0)|0;e=e>>>0<16?e:16;c[n>>2]=e;f=c[l>>2]|0;if(f>>>0>e>>>0){e=f;g=61}}while(0);if((g|0)==60){c[n>>2]=2147483647;e=c[l>>2]|0;g=61}if((g|0)==61)c[n>>2]=e;g=b+88|0;c[g>>2]=e;e=jb(a,1)|0;if((e|0)==-1){d=1;break}n=(e|0)==1;c[b+80>>2]=n&1;do if(n){e=fd(952)|0;f=b+84|0;c[f>>2]=e;if(!e){d=65535;break a}d=Ec(a,e)|0;if(d)break a;d=c[f>>2]|0;if(!(c[d+920>>2]|0))break;e=c[d+948>>2]|0;if((c[d+944>>2]|0)>>>0>e>>>0){d=1;break a}if(e>>>0<(c[l>>2]|0)>>>0){d=1;break a}if(e>>>0>(c[g>>2]|0)>>>0){d=1;break a}c[g>>2]=(e|0)==0?1:e}while(0);Ka(a)|0;d=0}else d=1}}}else d=1}else d=1}}else d=1}}else d=1}else d=1;while(0);i=o;return d|0}function Ra(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;j=i;if((c[a>>2]|0)!=(c[b>>2]|0)){d=1;i=j;return d|0}if((c[a+4>>2]|0)!=(c[b+4>>2]|0)){d=1;i=j;return d|0}if((c[a+12>>2]|0)!=(c[b+12>>2]|0)){d=1;i=j;return d|0}d=c[a+16>>2]|0;if((d|0)!=(c[b+16>>2]|0)){d=1;i=j;return d|0}if((c[a+44>>2]|0)!=(c[b+44>>2]|0)){d=1;i=j;return d|0}if((c[a+48>>2]|0)!=(c[b+48>>2]|0)){d=1;i=j;return d|0}if((c[a+52>>2]|0)!=(c[b+52>>2]|0)){d=1;i=j;return d|0}if((c[a+56>>2]|0)!=(c[b+56>>2]|0)){d=1;i=j;return d|0}h=c[a+60>>2]|0;if((h|0)!=(c[b+60>>2]|0)){d=1;i=j;return d|0}if((c[a+80>>2]|0)!=(c[b+80>>2]|0)){d=1;i=j;return d|0}a:do if(!d){if((c[a+20>>2]|0)!=(c[b+20>>2]|0)){d=1;i=j;return d|0}}else if((d|0)==1){if((c[a+24>>2]|0)!=(c[b+24>>2]|0)){d=1;i=j;return d|0}if((c[a+28>>2]|0)!=(c[b+28>>2]|0)){d=1;i=j;return d|0}if((c[a+32>>2]|0)!=(c[b+32>>2]|0)){d=1;i=j;return d|0}d=c[a+36>>2]|0;if((d|0)!=(c[b+36>>2]|0)){d=1;i=j;return d|0}if(d){e=c[a+40>>2]|0;f=c[b+40>>2]|0;g=0;while(1){if((c[e+(g<<2)>>2]|0)!=(c[f+(g<<2)>>2]|0)){d=1;break}g=g+1|0;if(g>>>0>=d>>>0)break a}i=j;return d|0}}while(0);if(h){if((c[a+64>>2]|0)!=(c[b+64>>2]|0)){d=1;i=j;return d|0}if((c[a+68>>2]|0)!=(c[b+68>>2]|0)){d=1;i=j;return d|0}if((c[a+72>>2]|0)!=(c[b+72>>2]|0)){d=1;i=j;return d|0}if((c[a+76>>2]|0)!=(c[b+76>>2]|0)){d=1;i=j;return d|0}}d=0;i=j;return d|0}function Sa(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;l=i;i=i+16|0;j=l+4|0;k=l;id(b,0,72);d=nb(a,b)|0;if(d){i=l;return d|0}if((c[b>>2]|0)>>>0>255){d=1;i=l;return d|0}e=b+4|0;d=nb(a,e)|0;if(d){i=l;return d|0}if((c[e>>2]|0)>>>0>31){d=1;i=l;return d|0}if(jb(a,1)|0){d=1;i=l;return d|0}d=jb(a,1)|0;if((d|0)==-1){d=1;i=l;return d|0}c[b+8>>2]=(d|0)==1&1;d=nb(a,j)|0;if(d){i=l;return d|0}d=(c[j>>2]|0)+1|0;h=b+12|0;c[h>>2]=d;if(d>>>0>8){d=1;i=l;return d|0}a:do if(d>>>0>1){d=b+16|0;e=nb(a,d)|0;if(e){d=e;i=l;return d|0}d=c[d>>2]|0;if(d>>>0>6){d=1;i=l;return d|0}switch(d|0){case 5:case 4:case 3:{d=jb(a,1)|0;if((d|0)==-1){d=1;i=l;return d|0}c[b+32>>2]=(d|0)==1&1;d=nb(a,j)|0;if(!d){c[b+36>>2]=(c[j>>2]|0)+1;break a}else{i=l;return d|0}}case 0:{d=fd(c[h>>2]<<2)|0;f=b+20|0;c[f>>2]=d;if(!d){d=65535;i=l;return d|0}if(!(c[h>>2]|0))break a;else e=0;while(1){d=nb(a,j)|0;if(d)break;c[(c[f>>2]|0)+(e<<2)>>2]=(c[j>>2]|0)+1;e=e+1|0;if(e>>>0>=(c[h>>2]|0)>>>0)break a}i=l;return d|0}case 2:{e=b+24|0;c[e>>2]=fd((c[h>>2]<<2)+-4|0)|0;d=fd((c[h>>2]<<2)+-4|0)|0;g=b+28|0;c[g>>2]=d;if((c[e>>2]|0)==0|(d|0)==0){d=65535;i=l;return d|0}if((c[h>>2]|0)==1)break a;else f=0;while(1){d=nb(a,j)|0;if(d){e=46;break}c[(c[e>>2]|0)+(f<<2)>>2]=c[j>>2];d=nb(a,j)|0;if(d){e=46;break}c[(c[g>>2]|0)+(f<<2)>>2]=c[j>>2];f=f+1|0;if(f>>>0>=((c[h>>2]|0)+-1|0)>>>0)break a}if((e|0)==46){i=l;return d|0}break}case 6:{d=nb(a,j)|0;if(d){i=l;return d|0}e=(c[j>>2]|0)+1|0;d=b+40|0;c[d>>2]=e;e=fd(e<<2)|0;g=b+44|0;c[g>>2]=e;if(!e){d=65535;i=l;return d|0}f=c[432+((c[h>>2]|0)+-1<<2)>>2]|0;if(!(c[d>>2]|0))break a;else e=0;while(1){m=jb(a,f)|0;c[(c[g>>2]|0)+(e<<2)>>2]=m;e=e+1|0;if(m>>>0>=(c[h>>2]|0)>>>0){d=1;break}if(e>>>0>=(c[d>>2]|0)>>>0)break a}i=l;return d|0}default:break a}}while(0);d=nb(a,j)|0;if(d){a=d;i=l;return a|0}d=c[j>>2]|0;if(d>>>0>31){a=1;i=l;return a|0}c[b+48>>2]=d+1;d=nb(a,j)|0;if(d){a=d;i=l;return a|0}if((c[j>>2]|0)>>>0>31){a=1;i=l;return a|0}if(jb(a,1)|0){a=1;i=l;return a|0}if((jb(a,2)|0)>>>0>2){a=1;i=l;return a|0}d=ob(a,k)|0;if(d){a=d;i=l;return a|0}d=(c[k>>2]|0)+26|0;if(d>>>0>51){a=1;i=l;return a|0}c[b+52>>2]=d;d=ob(a,k)|0;if(d){a=d;i=l;return a|0;
}if(((c[k>>2]|0)+26|0)>>>0>51){a=1;i=l;return a|0}d=ob(a,k)|0;if(d){a=d;i=l;return a|0}d=c[k>>2]|0;if((d+12|0)>>>0>24){a=1;i=l;return a|0}c[b+56>>2]=d;d=jb(a,1)|0;if((d|0)==-1){a=1;i=l;return a|0}c[b+60>>2]=(d|0)==1&1;d=jb(a,1)|0;if((d|0)==-1){a=1;i=l;return a|0}c[b+64>>2]=(d|0)==1&1;d=jb(a,1)|0;if((d|0)==-1){a=1;i=l;return a|0}c[b+68>>2]=(d|0)==1&1;Ka(a)|0;a=0;i=l;return a|0}function Ta(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;w=i;i=i+32|0;s=w+20|0;q=w+16|0;o=w+12|0;l=w+8|0;v=w+4|0;t=w;id(b,0,988);u=Z(c[d+56>>2]|0,c[d+52>>2]|0)|0;k=nb(a,v)|0;if(k){f=k;i=w;return f|0}n=c[v>>2]|0;c[b>>2]=n;if(n>>>0>=u>>>0){f=1;i=w;return f|0}k=nb(a,v)|0;if(k){f=k;i=w;return f|0}k=c[v>>2]|0;m=b+4|0;c[m>>2]=k;if((k|0)==5|(k|0)==0)j=5;else if(!((k|0)==7|(k|0)==2)){f=1;i=w;return f|0}if((j|0)==5){if((c[f>>2]|0)==5){f=1;i=w;return f|0}if(!(c[d+44>>2]|0)){f=1;i=w;return f|0}}k=nb(a,v)|0;if(k){f=k;i=w;return f|0}n=c[v>>2]|0;c[b+8>>2]=n;if((n|0)!=(c[e>>2]|0)){f=1;i=w;return f|0}n=d+12|0;k=c[n>>2]|0;j=0;while(1)if(!(k>>>j))break;else j=j+1|0;k=jb(a,j+-1|0)|0;if((k|0)==-1){f=1;i=w;return f|0}j=(c[f>>2]|0)==5;if(j&(k|0)!=0){f=1;i=w;return f|0}c[b+12>>2]=k;if(j){k=nb(a,v)|0;if(k){f=k;i=w;return f|0}k=c[v>>2]|0;c[b+16>>2]=k;if(k>>>0>65535){f=1;i=w;return f|0}}g=d+16|0;k=c[g>>2]|0;if(!k){h=d+20|0;k=c[h>>2]|0;j=0;while(1)if(!(k>>>j))break;else j=j+1|0;k=jb(a,j+-1|0)|0;if((k|0)==-1){f=1;i=w;return f|0}j=b+20|0;c[j>>2]=k;do if(c[e+8>>2]|0){k=ob(a,t)|0;if(!k){c[b+24>>2]=c[t>>2];break}else{f=k;i=w;return f|0}}while(0);if((c[f>>2]|0)==5){k=c[j>>2]|0;if(k>>>0>(c[h>>2]|0)>>>1>>>0){f=1;i=w;return f|0}j=c[b+24>>2]|0;if((k|0)!=(((j|0)>0?0:0-j|0)|0)){f=1;i=w;return f|0}}k=c[g>>2]|0}if((k|0)==1?(c[d+24>>2]|0)==0:0){k=ob(a,t)|0;if(k){f=k;i=w;return f|0}k=b+28|0;c[k>>2]=c[t>>2];do if(c[e+8>>2]|0){j=ob(a,t)|0;if(!j){c[b+32>>2]=c[t>>2];break}else{f=j;i=w;return f|0}}while(0);if((c[f>>2]|0)==5?(j=c[k>>2]|0,k=(c[d+32>>2]|0)+j+(c[b+32>>2]|0)|0,(((j|0)<(k|0)?j:k)|0)!=0):0){f=1;i=w;return f|0}}if(c[e+68>>2]|0){k=nb(a,v)|0;if(k){f=k;i=w;return f|0}k=c[v>>2]|0;c[b+36>>2]=k;if(k>>>0>127){f=1;i=w;return f|0}}k=c[m>>2]|0;if((k|0)==5|(k|0)==0){k=jb(a,1)|0;if((k|0)==-1){f=1;i=w;return f|0}c[b+40>>2]=k;do if(!k){k=c[e+48>>2]|0;if(k>>>0>16){f=1;i=w;return f|0}else{c[b+44>>2]=k;break}}else{k=nb(a,v)|0;if(k){f=k;i=w;return f|0}k=c[v>>2]|0;if(k>>>0>15){f=1;i=w;return f|0}else{c[b+44>>2]=k+1;break}}while(0);k=c[m>>2]|0}do if((k|0)==5|(k|0)==0){g=c[b+44>>2]|0;j=c[n>>2]|0;k=jb(a,1)|0;if((k|0)==-1){f=1;i=w;return f|0}c[b+68>>2]=k;if(k){h=0;a:while(1){if(h>>>0>g>>>0){r=1;j=110;break}k=nb(a,l)|0;if(k){r=k;j=110;break}k=c[l>>2]|0;if(k>>>0>3){r=1;j=110;break}c[b+(h*12|0)+72>>2]=k;do if(k>>>0<2){k=nb(a,o)|0;if(k){r=k;j=110;break a}k=c[o>>2]|0;if(k>>>0>=j>>>0){r=1;j=110;break a}c[b+(h*12|0)+76>>2]=k+1}else{if((k|0)!=2)break;k=nb(a,o)|0;if(k){r=k;j=110;break a}c[b+(h*12|0)+80>>2]=c[o>>2]}while(0);if((c[l>>2]|0)==3){j=61;break}else h=h+1|0}if((j|0)==61){if(!h)r=1;else break;i=w;return r|0}else if((j|0)==110){i=w;return r|0}}}while(0);do if(c[f+4>>2]|0){n=c[d+44>>2]|0;f=(c[f>>2]|0)==5;k=jb(a,1)|0;j=(k|0)==-1;if(f){if(j){f=1;i=w;return f|0}c[b+276>>2]=k;g=jb(a,1)|0;if((g|0)==-1){f=1;i=w;return f|0}c[b+280>>2]=g;if((n|0)!=0|(g|0)==0)break;else r=1;i=w;return r|0}if(j){f=1;i=w;return f|0}c[b+284>>2]=k;if(k){j=(n<<1)+2|0;h=0;d=0;g=0;l=0;m=0;while(1){if(h>>>0>j>>>0){r=1;j=110;break}k=nb(a,q)|0;if(k){r=k;j=110;break}k=c[q>>2]|0;if(k>>>0>6){r=1;j=110;break}c[b+(h*20|0)+288>>2]=k;if((k&-3|0)==1){k=nb(a,s)|0;if(k){r=k;j=110;break}c[b+(h*20|0)+292>>2]=(c[s>>2]|0)+1;k=c[q>>2]|0}if((k|0)==2){k=nb(a,s)|0;if(k){r=k;j=110;break}c[b+(h*20|0)+296>>2]=c[s>>2];k=c[q>>2]|0}if((k|0)==3|(k|0)==6){k=nb(a,s)|0;if(k){r=k;j=110;break}c[b+(h*20|0)+300>>2]=c[s>>2];k=c[q>>2]|0}if((k|0)==4){k=nb(a,s)|0;if(k){r=k;j=110;break}k=c[s>>2]|0;if(k>>>0>n>>>0){r=1;j=110;break}if(!k)c[b+(h*20|0)+304>>2]=65535;else c[b+(h*20|0)+304>>2]=k+-1;k=c[q>>2]|0;p=g+1|0}else p=g;l=((k|0)==5&1)+l|0;d=((k|0)!=0&k>>>0<4&1)+d|0;m=((k|0)==6&1)+m|0;if(!k){j=90;break}else{h=h+1|0;g=p}}if((j|0)==90){if(p>>>0>1|l>>>0>1|m>>>0>1){f=1;i=w;return f|0}if((d|0)!=0&(l|0)!=0)r=1;else break;i=w;return r|0}else if((j|0)==110){i=w;return r|0}}}while(0);g=ob(a,t)|0;if(g){f=g;i=w;return f|0}f=c[t>>2]|0;c[b+48>>2]=f;f=f+(c[e+52>>2]|0)|0;c[t>>2]=f;if(f>>>0>51){f=1;i=w;return f|0}do if(c[e+60>>2]|0){g=nb(a,v)|0;if(g){f=g;i=w;return f|0}g=c[v>>2]|0;c[b+52>>2]=g;if(g>>>0>2){f=1;i=w;return f|0}if((g|0)==1)break;g=ob(a,t)|0;if(g){f=g;i=w;return f|0}g=c[t>>2]|0;if((g+6|0)>>>0>12){f=1;i=w;return f|0}c[b+56>>2]=g<<1;g=ob(a,t)|0;if(g){f=g;i=w;return f|0}g=c[t>>2]|0;if((g+6|0)>>>0>12){f=1;i=w;return f|0}else{c[b+60>>2]=g<<1;break}}while(0);do if((c[e+12>>2]|0)>>>0>1?((c[e+16>>2]|0)+-3|0)>>>0<3:0){k=e+36|0;j=c[k>>2]|0;j=(((u>>>0)%(j>>>0)|0|0)==0?1:2)+((u>>>0)/(j>>>0)|0)|0;h=0;while(1){g=h+1|0;if(!(-1<<g&j))break;else h=g}g=jb(a,((1<<h)+-1&j|0)==0?h:g)|0;c[v>>2]=g;if((g|0)==-1){f=1;i=w;return f|0}c[b+64>>2]=g;f=c[k>>2]|0;if(g>>>0>(((u+-1+f|0)>>>0)/(f>>>0)|0)>>>0)r=1;else break;i=w;return r|0}while(0);f=0;i=w;return f|0}function Ua(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;f=i;i=i+32|0;e=f+20|0;d=f;c[d+0>>2]=c[a+0>>2];c[d+4>>2]=c[a+4>>2];c[d+8>>2]=c[a+8>>2];c[d+12>>2]=c[a+12>>2];c[d+16>>2]=c[a+16>>2];a=nb(d,e)|0;if(!a){a=nb(d,e)|0;if(!a){a=nb(d,e)|0;if(!a){a=c[e>>2]|0;if(a>>>0>255)a=1;else{c[b>>2]=a;a=0}}}}i=f;return a|0}function Va(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;g=i;i=i+32|0;e=g+20|0;f=g;c[f+0>>2]=c[a+0>>2];c[f+4>>2]=c[a+4>>2];c[f+8>>2]=c[a+8>>2];c[f+12>>2]=c[a+12>>2];c[f+16>>2]=c[a+16>>2];a=nb(f,e)|0;if(a){i=g;return a|0}a=nb(f,e)|0;if(a){i=g;return a|0}a=nb(f,e)|0;if(!a)a=0;else{i=g;return a|0}while(1)if(!(b>>>a))break;else a=a+1|0;a=jb(f,a+-1|0)|0;if((a|0)==-1){a=1;i=g;return a|0}c[d>>2]=a;a=0;i=g;return a|0}function Wa(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;h=i;i=i+32|0;f=h+20|0;g=h;if((d|0)!=5){d=1;i=h;return d|0}c[g+0>>2]=c[a+0>>2];c[g+4>>2]=c[a+4>>2];c[g+8>>2]=c[a+8>>2];c[g+12>>2]=c[a+12>>2];c[g+16>>2]=c[a+16>>2];d=nb(g,f)|0;if(d){i=h;return d|0}d=nb(g,f)|0;if(d){i=h;return d|0}d=nb(g,f)|0;if(!d)d=0;else{i=h;return d|0}while(1)if(!(b>>>d))break;else d=d+1|0;if((jb(g,d+-1|0)|0)==-1){d=1;i=h;return d|0}d=nb(g,e)|0;i=h;return d|0}function Xa(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0;k=i;i=i+32|0;h=k+20|0;j=k;c[j+0>>2]=c[a+0>>2];c[j+4>>2]=c[a+4>>2];c[j+8>>2]=c[a+8>>2];c[j+12>>2]=c[a+12>>2];c[j+16>>2]=c[a+16>>2];a=nb(j,h)|0;if(a){f=a;i=k;return f|0}a=nb(j,h)|0;if(a){f=a;i=k;return f|0}a=nb(j,h)|0;if(a){f=a;i=k;return f|0}a=c[b+12>>2]|0;f=0;while(1)if(!(a>>>f))break;else f=f+1|0;if((jb(j,f+-1|0)|0)==-1){f=1;i=k;return f|0}if((d|0)==5?(g=nb(j,h)|0,(g|0)!=0):0){f=g;i=k;return f|0}f=c[b+20>>2]|0;a=0;while(1)if(!(f>>>a))break;else a=a+1|0;f=jb(j,a+-1|0)|0;if((f|0)==-1){f=1;i=k;return f|0}c[e>>2]=f;f=0;i=k;return f|0}function Ya(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0;k=i;i=i+32|0;h=k+20|0;j=k;c[j+0>>2]=c[a+0>>2];c[j+4>>2]=c[a+4>>2];c[j+8>>2]=c[a+8>>2];c[j+12>>2]=c[a+12>>2];c[j+16>>2]=c[a+16>>2];a=nb(j,h)|0;if(a){f=a;i=k;return f|0}a=nb(j,h)|0;if(a){f=a;i=k;return f|0}a=nb(j,h)|0;if(a){f=a;i=k;return f|0}a=c[b+12>>2]|0;f=0;while(1)if(!(a>>>f))break;else f=f+1|0;if((jb(j,f+-1|0)|0)==-1){f=1;i=k;return f|0}if((d|0)==5?(g=nb(j,h)|0,(g|0)!=0):0){f=g;i=k;return f|0}f=c[b+20>>2]|0;a=0;while(1)if(!(f>>>a))break;else a=a+1|0;if((jb(j,a+-1|0)|0)==-1){f=1;i=k;return f|0}f=ob(j,e)|0;i=k;return f|0}function Za(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0;m=i;i=i+32|0;j=m+20|0;l=m;c[l+0>>2]=c[a+0>>2];c[l+4>>2]=c[a+4>>2];c[l+8>>2]=c[a+8>>2];c[l+12>>2]=c[a+12>>2];c[l+16>>2]=c[a+16>>2];g=nb(l,j)|0;if(g){l=g;i=m;return l|0}g=nb(l,j)|0;if(g){l=g;i=m;return l|0}g=nb(l,j)|0;if(g){l=g;i=m;return l|0}g=c[b+12>>2]|0;a=0;while(1)if(!(g>>>a))break;else a=a+1|0;if((jb(l,a+-1|0)|0)==-1){l=1;i=m;return l|0}if((d|0)==5?(h=nb(l,j)|0,(h|0)!=0):0){l=h;i=m;return l|0}g=ob(l,f)|0;if(g){l=g;i=m;return l|0}if((e|0)!=0?(k=ob(l,f+4|0)|0,(k|0)!=0):0){l=k;i=m;return l|0}l=0;i=m;return l|0}function _a(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0;m=i;i=i+32|0;l=m+24|0;j=m+20|0;k=m;c[k+0>>2]=c[b+0>>2];c[k+4>>2]=c[b+4>>2];c[k+8>>2]=c[b+8>>2];c[k+12>>2]=c[b+12>>2];c[k+16>>2]=c[b+16>>2];f=nb(k,l)|0;if(f){n=f;i=m;return n|0}f=nb(k,l)|0;if(f){n=f;i=m;return n|0}f=nb(k,l)|0;if(f){n=f;i=m;return n|0}f=c[d+12>>2]|0;b=0;while(1)if(!(f>>>b))break;else b=b+1|0;if((jb(k,b+-1|0)|0)==-1){n=1;i=m;return n|0}f=nb(k,l)|0;if(f){n=f;i=m;return n|0}g=d+16|0;f=c[g>>2]|0;if(!f){b=c[d+20>>2]|0;f=0;while(1)if(!(b>>>f))break;else f=f+1|0;if((jb(k,f+-1|0)|0)==-1){n=1;i=m;return n|0}if((c[e+8>>2]|0)!=0?(h=ob(k,j)|0,(h|0)!=0):0){n=h;i=m;return n|0}f=c[g>>2]|0}if((f|0)==1?(c[d+24>>2]|0)==0:0){f=ob(k,j)|0;if(f){n=f;i=m;return n|0}if((c[e+8>>2]|0)!=0?(n=ob(k,j)|0,(n|0)!=0):0){i=m;return n|0}}if((c[e+68>>2]|0)!=0?(o=nb(k,l)|0,(o|0)!=0):0){n=o;i=m;return n|0}n=jb(k,1)|0;c[a>>2]=n;n=(n|0)==-1&1;i=m;return n|0}function $a(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0;C=i;i=i+448|0;p=C+8|0;x=C+4|0;v=C;p=p+(0-p&15)|0;n=c[b+3376>>2]|0;j=c[e>>2]|0;c[x>>2]=0;y=b+1192|0;c[y>>2]=(c[y>>2]|0)+1;q=b+1200|0;c[q>>2]=0;o=b+12|0;c[v>>2]=(c[e+48>>2]|0)+(c[(c[o>>2]|0)+52>>2]|0);w=e+36|0;r=b+1212|0;s=e+52|0;t=e+56|0;u=e+60|0;z=e+4|0;l=e+44|0;h=b+1220|0;m=b+1172|0;B=b+1176|0;k=n+12|0;A=0;f=0;while(1){e=c[r>>2]|0;if((c[w>>2]|0)==0?(c[e+(j*216|0)+196>>2]|0)!=0:0){f=1;e=22;break}g=c[(c[o>>2]|0)+56>>2]|0;F=c[s>>2]|0;E=c[t>>2]|0;D=c[u>>2]|0;c[e+(j*216|0)+4>>2]=c[y>>2];c[e+(j*216|0)+8>>2]=F;c[e+(j*216|0)+12>>2]=E;c[e+(j*216|0)+16>>2]=D;c[e+(j*216|0)+24>>2]=g;e=c[z>>2]|0;if((e|0)!=2?!((e|0)==7|(f|0)!=0):0){f=nb(a,x)|0;if(f){e=22;break}e=c[x>>2]|0;if(e>>>0>((c[B>>2]|0)-j|0)>>>0){f=1;e=22;break}if(!e)f=0;else{id(k,0,164);c[n>>2]=0;f=1}}e=c[x>>2]|0;if(!e){f=bb(a,n,(c[r>>2]|0)+(j*216|0)|0,c[z>>2]|0,c[l>>2]|0)|0;if(!f)g=0;else{e=22;break}}else{c[x>>2]=e+-1;g=f}f=gb((c[r>>2]|0)+(j*216|0)|0,n,d,h,v,j,c[(c[o>>2]|0)+64>>2]|0,p)|0;if(f){e=22;break}A=((c[(c[r>>2]|0)+(j*216|0)+196>>2]|0)==1&1)+A|0;if(!(La(a)|0))e=(c[x>>2]|0)!=0;else e=1;f=c[z>>2]|0;if((f|0)==7|(f|0)==2)c[q>>2]=j;j=Ma(c[m>>2]|0,c[B>>2]|0,j)|0;if(!((j|0)!=0|e^1)){f=1;e=22;break}if(!e){e=20;break}else f=g}if((e|0)==20){e=b+1196|0;f=(c[e>>2]|0)+A|0;if(f>>>0>(c[B>>2]|0)>>>0){y=1;i=C;return y|0}c[e>>2]=f;y=0;i=C;return y|0}else if((e|0)==22){i=C;return f|0}return 0}function ab(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0;k=i;h=c[a+1192>>2]|0;d=c[a+1200>>2]|0;j=a+1212|0;a:do if(!d)d=b;else{e=a+16|0;f=0;do{do{d=d+-1|0;if(d>>>0<=b>>>0)break a}while((c[(c[j>>2]|0)+(d*216|0)+4>>2]|0)!=(h|0));f=f+1|0;g=c[(c[e>>2]|0)+52>>2]|0}while(f>>>0<(g>>>0>10?g:10)>>>0)}while(0);g=a+1172|0;b=a+1176|0;while(1){e=c[j>>2]|0;if((c[e+(d*216|0)+4>>2]|0)!=(h|0)){d=11;break}f=e+(d*216|0)+196|0;e=c[f>>2]|0;if(!e){d=11;break}c[f>>2]=e+-1;d=Ma(c[g>>2]|0,c[b>>2]|0,d)|0;if(!d){d=11;break}}if((d|0)==11){i=k;return}}function bb(a,d,e,f,g){a=a|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0;B=i;i=i+32|0;u=B+20|0;v=B+16|0;q=B+12|0;p=B+8|0;z=B+4|0;y=B;id(d,0,2088);l=nb(a,z)|0;m=c[z>>2]|0;do if((f|0)==2|(f|0)==7){m=m+6|0;if(m>>>0>31|(l|0)!=0){e=1;i=B;return e|0}else{c[d>>2]=m;o=m;break}}else{m=m+1|0;if(m>>>0>31|(l|0)!=0){e=1;i=B;return e|0}else{c[d>>2]=m;o=m;break}}while(0);a:do if((o|0)!=31){b:do if(o>>>0>=6){o=(o|0)!=6;p=o&1;if((p|0)==1)t=52;else if(!p){c[v>>2]=0;q=0;while(1){f=kb(a)|0;c[u>>2]=f;t=f>>>31;c[d+(q<<2)+12>>2]=t;if(!t){c[d+(q<<2)+76>>2]=f>>>28&7;m=f<<4;n=1}else{m=f<<1;n=0}f=q|1;t=m>>>31;c[d+(f<<2)+12>>2]=t;if(!t){c[d+(f<<2)+76>>2]=m>>>28&7;l=m<<4;n=n+1|0}else l=m<<1;m=f+1|0;t=l>>>31;c[d+(m<<2)+12>>2]=t;if(!t){c[d+(m<<2)+76>>2]=l>>>28&7;m=l<<4;n=n+1|0}else m=l<<1;l=q|3;t=m>>>31;c[d+(l<<2)+12>>2]=t;if(!t){c[d+(l<<2)+76>>2]=m>>>28&7;f=m<<4;n=n+1|0}else f=m<<1;m=l+1|0;t=f>>>31;c[d+(m<<2)+12>>2]=t;if(!t){c[d+(m<<2)+76>>2]=f>>>28&7;f=f<<4;n=n+1|0}else f=f<<1;m=l+2|0;t=f>>>31;c[d+(m<<2)+12>>2]=t;if(!t){c[d+(m<<2)+76>>2]=f>>>28&7;f=f<<4;n=n+1|0}else f=f<<1;m=l+3|0;t=f>>>31;c[d+(m<<2)+12>>2]=t;if(!t){c[d+(m<<2)+76>>2]=f>>>28&7;f=f<<4;n=n+1|0}else f=f<<1;m=q|7;t=f>>>31;c[d+(m<<2)+12>>2]=t;if(!t){c[d+(m<<2)+76>>2]=f>>>28&7;m=f<<4;n=n+1|0}else m=f<<1;c[u>>2]=m;if((lb(a,(n*3|0)+8|0)|0)==-1){w=1;t=68;break b}t=(c[v>>2]|0)+1|0;c[v>>2]=t;if((t|0)<2)q=q+8|0;else{t=52;break}}}if((t|0)==52){v=(nb(a,u)|0)!=0;l=c[u>>2]|0;if(v|l>>>0>3){w=1;t=68;break}c[d+140>>2]=l}if(o){v=c[d>>2]|0;s=v+-7|0;u=s>>>2;c[d+4>>2]=(s>>>0>11?u+268435453|0:u)<<4|(v>>>0>18?15:0)}else{x=p;t=70}}else{if((o|0)==0|(o|0)==1){r=v;s=u}else if(!((o|0)==3|(o|0)==2)){f=0;do{l=(nb(a,q)|0)!=0;m=c[q>>2]|0;if(l|m>>>0>3){n=1;t=96;break}c[d+(f<<2)+176>>2]=m;f=f+1|0}while(f>>>0<4);if((t|0)==96){i=B;return n|0}c:do if(g>>>0>1&(o|0)!=5){m=g>>>0>2&1;f=0;while(1){if(qb(a,q,m)|0){n=1;t=96;break}n=c[q>>2]|0;if(n>>>0>=g>>>0){n=1;t=96;break}c[d+(f<<2)+192>>2]=n;f=f+1|0;if(f>>>0>=4){h=0;break c}}if((t|0)==96){i=B;return n|0}}else h=0;while(0);d:while(1){n=c[d+(h<<2)+176>>2]|0;if((n|0)==2|(n|0)==1)n=1;else if(!n)n=0;else n=3;c[q>>2]=n;m=0;while(1){n=ob(a,p)|0;if(n){t=96;break d}b[d+(h<<4)+(m<<2)+208>>1]=c[p>>2];n=ob(a,p)|0;if(n){t=96;break d}b[d+(h<<4)+(m<<2)+210>>1]=c[p>>2];t=c[q>>2]|0;c[q>>2]=t+-1;if(!t)break;else m=m+1|0}h=h+1|0;if(h>>>0>=4){x=2;t=70;break b}}if((t|0)==96){i=B;return n|0}}else{r=v;s=u}if(g>>>0>1){if((o|0)==3|(o|0)==2)n=1;else if((o|0)==0|(o|0)==1)n=0;else n=3;l=g>>>0>2&1;f=0;while(1){if(qb(a,u,l)|0){w=1;t=68;break b}m=c[u>>2]|0;if(m>>>0>=g>>>0){w=1;t=68;break b}c[d+(f<<2)+144>>2]=m;if(!n)break;else{n=n+-1|0;f=f+1|0}}}if((o|0)==0|(o|0)==1){l=0;m=0}else if((o|0)==3|(o|0)==2){l=1;m=0}else{l=3;m=0}while(1){f=ob(a,v)|0;if(f){w=f;t=68;break b}b[d+(m<<2)+160>>1]=c[v>>2];f=ob(a,v)|0;if(f){w=f;t=68;break b}b[d+(m<<2)+162>>1]=c[v>>2];if(!l){x=2;t=70;break}else{l=l+-1|0;m=m+1|0}}}while(0);if((t|0)==68){e=w;i=B;return e|0}do if((t|0)==70){h=pb(a,z,(x|0)==0&1)|0;if(!h){z=c[z>>2]|0;c[d+4>>2]=z;if(!z)break a;else break}else{e=h;i=B;return e|0}}while(0);z=(ob(a,y)|0)!=0;h=c[y>>2]|0;if(z|(h|0)<-26|(h|0)>25){e=1;i=B;return e|0}c[d+8>>2]=h;l=c[d+4>>2]|0;o=d+272|0;e:do if((c[d>>2]|0)>>>0>=7){h=rb(a,d+1864|0,ib(e,0,o)|0,16)|0;if(!(h&15)){b[d+320>>1]=h>>>4&255;h=0;m=3;while(1){n=l>>>1;if(!(l&1))h=h+4|0;else{f=3;while(1){l=rb(a,d+(h<<6)+332|0,ib(e,h,o)|0,15)|0;c[d+(h<<2)+1992>>2]=l>>>15;if(l&15){j=l;break e}b[d+(h<<1)+272>>1]=l>>>4&255;h=h+1|0;if(!f)break;else f=f+-1|0}}if(!m){k=h;A=n;t=87;break}else{l=n;m=m+-1|0}}}else j=h}else{h=0;m=3;while(1){n=l>>>1;if(!(l&1))h=h+4|0;else{f=3;while(1){l=rb(a,d+(h<<6)+328|0,ib(e,h,o)|0,16)|0;c[d+(h<<2)+1992>>2]=l>>>16;if(l&15){j=l;break e}b[d+(h<<1)+272>>1]=l>>>4&255;h=h+1|0;if(!f)break;else f=f+-1|0}}if(!m){k=h;A=n;t=87;break}else{l=n;m=m+-1|0}}}while(0);f:do if((t|0)==87){if(A&3){j=rb(a,d+1928|0,-1,4)|0;if(j&15)break;b[d+322>>1]=j>>>4&255;j=rb(a,d+1944|0,-1,4)|0;if(j&15)break;b[d+324>>1]=j>>>4&255}if(!(A&2))j=0;else{h=7;while(1){j=rb(a,d+(k<<6)+332|0,ib(e,k,o)|0,15)|0;if(j&15)break f;b[d+(k<<1)+272>>1]=j>>>4&255;c[d+(k<<2)+1992>>2]=j>>>15;if(!h){j=0;break}else{k=k+1|0;h=h+-1|0}}}}while(0);c[a+16>>2]=((c[a+4>>2]|0)-(c[a>>2]|0)<<3)+(c[a+8>>2]|0);if(j){e=j;i=B;return e|0}}else{while(1){if(mb(a)|0)break;if(jb(a,1)|0){n=1;t=96;break}}if((t|0)==96){i=B;return n|0}k=0;j=d+328|0;while(1){h=jb(a,8)|0;c[z>>2]=h;if((h|0)==-1){n=1;break}c[j>>2]=h;k=k+1|0;if(k>>>0>=384)break a;else j=j+4|0}i=B;return n|0}while(0);e=0;i=B;return e|0}function cb(a){a=a|0;if(a>>>0<6)a=2;else a=(a|0)!=6&1;return a|0}function db(a){a=a|0;var b=0;b=i;if((a|0)==0|(a|0)==1)a=1;else if((a|0)==3|(a|0)==2)a=2;else a=4;i=b;return a|0}function eb(a){a=a|0;var b=0;b=i;if((a|0)==2|(a|0)==1)a=2;else if(!a)a=1;else a=4;i=b;return a|0}function fb(a){a=a|0;return a+1&3|0}function gb(d,e,f,g,h,j,k,l){d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;v=i;s=c[e>>2]|0;c[d>>2]=s;o=d+196|0;c[o>>2]=(c[o>>2]|0)+1;Na(f,j);if((s|0)==31){m=d+28|0;c[d+20>>2]=0;if((c[o>>2]|0)>>>0>1){b[m>>1]=16;b[d+30>>1]=16;b[d+32>>1]=16;b[d+34>>1]=16;b[d+36>>1]=16;b[d+38>>1]=16;b[d+40>>1]=16;b[d+42>>1]=16;b[d+44>>1]=16;b[d+46>>1]=16;b[d+48>>1]=16;b[d+50>>1]=16;b[d+52>>1]=16;b[d+54>>1]=16;b[d+56>>1]=16;b[d+58>>1]=16;b[d+60>>1]=16;b[d+62>>1]=16;b[d+64>>1]=16;b[d+66>>1]=16;b[d+68>>1]=16;b[d+70>>1]=16;b[d+72>>1]=16;b[d+74>>1]=16;t=0;i=v;return t|0}o=23;h=e+328|0;n=l;while(1){b[m>>1]=16;a[n>>0]=c[h>>2];a[n+1>>0]=c[h+4>>2];a[n+2>>0]=c[h+8>>2];a[n+3>>0]=c[h+12>>2];a[n+4>>0]=c[h+16>>2];a[n+5>>0]=c[h+20>>2];a[n+6>>0]=c[h+24>>2];a[n+7>>0]=c[h+28>>2];a[n+8>>0]=c[h+32>>2];a[n+9>>0]=c[h+36>>2];a[n+10>>0]=c[h+40>>2];a[n+11>>0]=c[h+44>>2];a[n+12>>0]=c[h+48>>2];a[n+13>>0]=c[h+52>>2];a[n+14>>0]=c[h+56>>2];a[n+15>>0]=c[h+60>>2];if(!o)break;else{o=o+-1|0;h=h+64|0;n=n+16|0;m=m+2|0}}sc(f,l);t=0;i=v;return t|0}m=d+28|0;if(s){hd(m,e+272|0,54);n=c[e+8>>2]|0;o=c[h>>2]|0;do if(n){o=o+n|0;c[h>>2]=o;if((o|0)<0){o=o+52|0;c[h>>2]=o;break}if((o|0)>51){o=o+-52|0;c[h>>2]=o}}while(0);r=d+20|0;c[r>>2]=o;n=e+328|0;h=e+1992|0;a:do if((c[d>>2]|0)>>>0<7){q=15;o=m;while(1){if(b[o>>1]|0){if(Ga(n,c[r>>2]|0,0,c[h>>2]|0)|0){m=1;break}}else c[n>>2]=16777215;n=n+64|0;o=o+2|0;h=h+4|0;if(!q)break a;else q=q+-1|0}i=v;return m|0}else{if(!(b[d+76>>1]|0)){q=464;p=15;o=m}else{Ha(e+1864|0,o);q=464;p=15;o=m}while(1){m=c[e+(c[q>>2]<<2)+1864>>2]|0;q=q+4|0;c[n>>2]=m;if((m|0)==0?(b[o>>1]|0)==0:0)c[n>>2]=16777215;else u=18;if((u|0)==18?(u=0,(Ga(n,c[r>>2]|0,1,c[h>>2]|0)|0)!=0):0){m=1;break}n=n+64|0;o=o+2|0;h=h+4|0;if(!p)break a;else p=p+-1|0}i=v;return m|0}while(0);q=c[192+((Oa(0,51,(c[d+24>>2]|0)+(c[r>>2]|0)|0)|0)<<2)>>2]|0;if((b[d+78>>1]|0)==0?(b[d+80>>1]|0)==0:0){p=e+1928|0;m=7}else{p=e+1928|0;Ia(p,q);m=7}while(1){r=c[p>>2]|0;p=p+4|0;c[n>>2]=r;if((r|0)==0?(b[o>>1]|0)==0:0)c[n>>2]=16777215;else u=31;if((u|0)==31?(u=0,(Ga(n,q,1,c[h>>2]|0)|0)!=0):0){m=1;u=39;break}if(!m)break;else{n=n+64|0;h=h+4|0;m=m+-1|0;o=o+2|0}}if((u|0)==39){i=v;return m|0}if(s>>>0>=6){o=Mb(d,e,f,j,k,l)|0;if(o){t=o;i=v;return t|0}}else u=37}else{id(m,0,54);c[d+20>>2]=c[h>>2];u=37}if((u|0)==37?(t=Sb(d,e,g,j,f,l)|0,(t|0)!=0):0){i=v;return t|0}t=0;i=v;return t|0}function hb(a){a=a|0;return a|0}function ib(d,e,f){d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0;k=i;l=vb(e)|0;g=wb(e)|0;h=a[l+4>>0]|0;j=a[g+4>>0]|0;g=(c[g>>2]|0)==4;if((c[l>>2]|0)==4){e=b[f+((h&255)<<1)>>1]|0;if(g){e=e+1+(b[f+((j&255)<<1)>>1]|0)>>1;i=k;return e|0}g=d+204|0;if(!(zb(d,c[g>>2]|0)|0)){i=k;return e|0}e=e+1+(b[(c[g>>2]|0)+((j&255)<<1)+28>>1]|0)>>1;i=k;return e|0}if(g){e=b[f+((j&255)<<1)>>1]|0;g=d+200|0;if(!(zb(d,c[g>>2]|0)|0)){i=k;return e|0}e=e+1+(b[(c[g>>2]|0)+((h&255)<<1)+28>>1]|0)>>1;i=k;return e|0}g=d+200|0;if(!(zb(d,c[g>>2]|0)|0)){h=0;f=0}else{h=b[(c[g>>2]|0)+((h&255)<<1)+28>>1]|0;f=1}g=d+204|0;if(!(zb(d,c[g>>2]|0)|0)){e=h;i=k;return e|0}e=b[(c[g>>2]|0)+((j&255)<<1)+28>>1]|0;if(!f){i=k;return e|0}e=h+1+e>>1;i=k;return e|0}function jb(a,b){a=a|0;b=b|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;p=i;n=a+4|0;j=c[n>>2]|0;m=c[a+12>>2]<<3;o=a+16|0;l=c[o>>2]|0;g=m-l|0;if((g|0)>31){e=a+8|0;g=c[e>>2]|0;f=(d[j+1>>0]|0)<<16|(d[j>>0]|0)<<24|(d[j+2>>0]|0)<<8|(d[j+3>>0]|0);if(!g)h=e;else{h=e;f=(d[j+4>>0]|0)>>>(8-g|0)|f<<g}}else{h=a+8|0;if((g|0)>0){e=c[h>>2]|0;k=e+24|0;f=(d[j>>0]|0)<<k;g=g+-8+e|0;if((g|0)>0){e=g;g=k;do{j=j+1|0;g=g+-8|0;f=(d[j>>0]|0)<<g|f;e=e+-8|0}while((e|0)>0)}}else f=0}e=l+b|0;c[o>>2]=e;c[h>>2]=e&7;if(e>>>0>m>>>0){n=-1;i=p;return n|0}c[n>>2]=(c[a>>2]|0)+(e>>>3);n=f>>>(32-b|0);i=p;return n|0}function kb(a){a=a|0;var b=0,e=0,f=0,g=0,h=0;g=i;f=c[a+4>>2]|0;e=(c[a+12>>2]<<3)-(c[a+16>>2]|0)|0;if((e|0)>31){b=c[a+8>>2]|0;a=(d[f+1>>0]|0)<<16|(d[f>>0]|0)<<24|(d[f+2>>0]|0)<<8|(d[f+3>>0]|0);if(!b){b=a;i=g;return b|0}b=(d[f+4>>0]|0)>>>(8-b|0)|a<<b;i=g;return b|0}if((e|0)<=0){b=0;i=g;return b|0}h=c[a+8>>2]|0;a=h+24|0;b=(d[f>>0]|0)<<a;e=e+-8+h|0;if((e|0)<=0){i=g;return b|0}do{f=f+1|0;a=a+-8|0;b=(d[f>>0]|0)<<a|b;e=e+-8|0}while((e|0)>0);i=g;return b|0}function lb(a,b){a=a|0;b=b|0;var d=0,e=0;d=i;e=a+16|0;b=(c[e>>2]|0)+b|0;c[e>>2]=b;c[a+8>>2]=b&7;if(b>>>0>c[a+12>>2]<<3>>>0){b=-1;i=d;return b|0}c[a+4>>2]=(c[a>>2]|0)+(b>>>3);b=0;i=d;return b|0}function mb(a){a=a|0;return(c[a+8>>2]|0)==0|0}function nb(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;g=i;d=kb(a)|0;do if((d|0)>=0){if(d>>>0>1073741823){if((lb(a,3)|0)==-1){d=1;break}c[b>>2]=(d>>>29&1)+1;d=0;break}if(d>>>0>536870911){if((lb(a,5)|0)==-1){d=1;break}c[b>>2]=(d>>>27&3)+3;d=0;break}if(d>>>0>268435455){if((lb(a,7)|0)==-1){d=1;break}c[b>>2]=(d>>>25&7)+7;d=0;break}d=Ja(d,28)|0;e=d+4|0;if((e|0)!=32){lb(a,d+5|0)|0;d=jb(a,e)|0;if((d|0)==-1){d=1;break}c[b>>2]=(1<<e)+-1+d;d=0;break}c[b>>2]=0;lb(a,32)|0;if((jb(a,1)|0)==1?(f=kb(a)|0,(lb(a,32)|0)!=-1):0)if((f|0)==1){c[b>>2]=-1;d=1;break}else if(!f){c[b>>2]=-1;d=0;break}else{d=1;break}else d=1}else{lb(a,1)|0;c[b>>2]=0;d=0}while(0);i=g;return d|0}function ob(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;e=i;i=i+16|0;f=e;c[f>>2]=0;d=nb(a,f)|0;a=c[f>>2]|0;d=(d|0)==0;if((a|0)==-1)if(d)a=1;else{c[b>>2]=-2147483648;a=0}else if(d){d=(a+1|0)>>>1;c[b>>2]=(a&1|0)!=0?d:0-d|0;a=0}else a=1;i=e;return a|0}function pb(a,b,e){a=a|0;b=b|0;e=e|0;var f=0,g=0;g=i;i=i+16|0;f=g;if(nb(a,f)|0){f=1;i=g;return f|0}f=c[f>>2]|0;if(f>>>0>47){f=1;i=g;return f|0}c[b>>2]=d[((e|0)==0?576:528)+f>>0];f=0;i=g;return f|0}function qb(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=i;if(!d){d=jb(a,1)|0;c[b>>2]=d;if((d|0)==-1)d=1;else{c[b>>2]=d^1;d=0}}else d=nb(a,b)|0;i=e;return d|0}function rb(a,b,f,g){a=a|0;b=b|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0;O=i;i=i+128|0;M=O+64|0;N=O;n=kb(a)|0;p=n>>>16;do if(f>>>0<2)if((n|0)>=0){if(n>>>0>201326591){o=e[1264+(n>>>26<<1)>>1]|0;k=25;break}if(n>>>0>16777215){o=e[1328+(n>>>22<<1)>>1]|0;k=25;break}if(n>>>0>2097151){o=e[1424+((n>>>18)+-8<<1)>>1]|0;k=25;break}else{o=e[1536+(p<<1)>>1]|0;k=25;break}}else q=1;else if(f>>>0<4){if((n|0)<0){q=(p&16384|0)!=0?2:2082;break}if(n>>>0>268435455){o=e[1600+(n>>>26<<1)>>1]|0;k=25;break}if(n>>>0>33554431){o=e[1664+(n>>>23<<1)>>1]|0;k=25;break}else{o=e[1728+(n>>>18<<1)>>1]|0;k=25;break}}else{if(f>>>0<8){f=n>>>26;if((f+-8|0)>>>0<56){o=e[1984+(f<<1)>>1]|0;k=25;break}o=e[2112+(n>>>22<<1)>>1]|0;k=25;break}if(f>>>0<17){o=e[2368+(n>>>26<<1)>>1]|0;k=25;break}f=n>>>29;if(f){o=e[2496+(f<<1)>>1]|0;k=25;break}o=e[2512+(n>>>24<<1)>>1]|0;k=25;break}while(0);if((k|0)==25)if(!o){C=1;i=O;return C|0}else q=o;o=q&31;f=n<<o;p=32-o|0;I=q>>>11&31;if(I>>>0>g>>>0){C=1;i=O;return C|0}v=q>>>5&63;do if(I){if(!v)o=0;else{do if(p>>>0<v>>>0)if((lb(a,o)|0)==-1){C=1;i=O;return C|0}else{p=32;f=kb(a)|0;break}while(0);n=f>>>(32-v|0);f=f<<v;k=0;o=1<<v+-1;do{c[M+(k<<2)>>2]=(o&n|0)!=0?-1:1;o=o>>>1;k=k+1|0}while((o|0)!=0);p=p-v|0;o=k}u=v>>>0<3;a:do if(o>>>0<I>>>0){t=o;s=I>>>0>10&u&1;b:while(1){if(p>>>0<16){if((lb(a,32-p|0)|0)==-1){J=1;k=127;break}r=32;f=kb(a)|0}else r=p;do if((f|0)>=0)if(f>>>0<=1073741823)if(f>>>0<=536870911)if(f>>>0<=268435455)if(f>>>0<=134217727)if(f>>>0<=67108863)if(f>>>0<=33554431)if(f>>>0<=16777215)if(f>>>0<=8388607)if(f>>>0>4194303){H=9;k=59}else{if(f>>>0>2097151){H=10;k=59;break}if(f>>>0>1048575){H=11;k=59;break}if(f>>>0>524287){H=12;k=59;break}if(f>>>0>262143){H=13;k=59;break}if(f>>>0>131071){p=14;o=f<<15;n=r+-15|0;q=s;k=(s|0)!=0?s:4}else{if(f>>>0<65536){J=1;k=127;break b}p=15;o=f<<16;n=r+-16|0;q=(s|0)!=0?s:1;k=12}G=p<<q;B=o;y=n;z=q;x=k;w=(q|0)==0;k=60}else{H=8;k=59}else{H=7;k=59}else{H=6;k=59}else{H=5;k=59}else{H=4;k=59}else{H=3;k=59}else{H=2;k=59}else{H=1;k=59}else{H=0;k=59}while(0);if((k|0)==59){k=0;p=H+1|0;o=f<<p;p=r-p|0;f=H<<s;if(!s){E=p;F=o;A=f;C=0;D=1}else{G=f;B=o;y=p;z=s;x=s;w=0;k=60}}if((k|0)==60){if(y>>>0<x>>>0){if((lb(a,32-y|0)|0)==-1){J=1;k=127;break}o=32;f=kb(a)|0}else{o=y;f=B}E=o-x|0;F=f<<x;A=(f>>>(32-x|0))+G|0;C=z;D=w}s=(t|0)==(v|0)&u?A+2|0:A;o=(s+2|0)>>>1;n=D?1:C;c[M+(t<<2)>>2]=(s&1|0)==0?o:0-o|0;t=t+1|0;if(t>>>0>=I>>>0){l=E;m=F;break a}else{p=E;f=F;s=((o|0)>(3<<n+-1|0)&n>>>0<6&1)+n|0}}if((k|0)==127){i=O;return J|0}}else{l=p;m=f}while(0);if(I>>>0<g>>>0){do if(l>>>0<9)if((lb(a,32-l|0)|0)==-1){C=1;i=O;return C|0}else{l=32;m=kb(a)|0;break}while(0);k=m>>>23;c:do if((g|0)==4)if((m|0)>=0)if((I|0)!=3)if(m>>>0<=1073741823)if((I|0)==2)k=34;else k=m>>>0>536870911?35:51;else k=18;else k=17;else k=1;else{do switch(I|0){case 12:{k=d[1232+(m>>>28)>>0]|0;break}case 13:{k=d[1248+(m>>>29)>>0]|0;break}case 6:{k=d[928+(m>>>26)>>0]|0;break}case 5:{k=d[896+(m>>>27)>>0]|0;break}case 2:{k=d[736+(m>>>26)>>0]|0;break}case 9:{k=d[1120+(m>>>26)>>0]|0;break}case 10:{k=d[1184+(m>>>27)>>0]|0;break}case 11:{k=d[1216+(m>>>28)>>0]|0;break}case 14:{k=d[1256+(m>>>30)>>0]|0;break}case 7:{k=d[992+(m>>>26)>>0]|0;break}case 8:{k=d[1056+(m>>>26)>>0]|0;break}case 1:{if(m>>>0>268435455)k=d[672+(m>>>27)>>0]|0;else k=d[704+k>>0]|0;break}case 3:{k=d[800+(m>>>26)>>0]|0;break}case 4:{k=d[864+(m>>>27)>>0]|0;break}default:{k=m>>31&16|1;break c}}while(0);if(!k){C=1;i=O;return C|0}}while(0);n=k&15;l=l-n|0;m=m<<n;n=k>>>4&15}else n=0;p=I+-1|0;f=(p|0)==0;if(f){c[b+(n<<2)>>2]=c[M+(p<<2)>>2];K=l;h=1<<n;break}else{k=m;o=0}d:while(1){if(!n){c[N+(o<<2)>>2]=1;L=l;j=0}else{if(l>>>0<11){if((lb(a,32-l|0)|0)==-1){J=1;k=127;break}l=32;k=kb(a)|0}switch(n|0){case 5:{m=d[656+(k>>>29)>>0]|0;break}case 6:{m=d[664+(k>>>29)>>0]|0;break}case 1:{m=d[624+(k>>>31)>>0]|0;break}case 2:{m=d[632+(k>>>30)>>0]|0;break}case 3:{m=d[640+(k>>>30)>>0]|0;break}case 4:{m=d[648+(k>>>29)>>0]|0;break}default:{do if(k>>>0<=536870911)if(k>>>0<=268435455)if(k>>>0<=134217727)if(k>>>0<=67108863)if(k>>>0<=33554431)if(k>>>0>16777215)m=184;else{if(k>>>0>8388607){m=201;break}if(k>>>0>4194303){m=218;break}m=k>>>0<2097152?0:235}else m=167;else m=150;else m=133;else m=116;else m=k>>>29<<4^115;while(0);if((m>>>4&15)>>>0>n>>>0){J=1;k=127;break d}}}if(!m){J=1;k=127;break}C=m&15;j=m>>>4&15;c[N+(o<<2)>>2]=j+1;L=l-C|0;k=k<<C;j=n-j|0}o=o+1|0;if(o>>>0>=p>>>0){k=122;break}else{l=L;n=j}}if((k|0)==122){c[b+(j<<2)>>2]=c[M+(p<<2)>>2];h=1<<j;if(f){K=L;break}k=I+-2|0;while(1){j=(c[N+(k<<2)>>2]|0)+j|0;h=1<<j|h;c[b+(j<<2)>>2]=c[M+(k<<2)>>2];if(!k){K=L;break}else k=k+-1|0}}else if((k|0)==127){i=O;return J|0}}else{K=p;h=0}while(0);if(lb(a,32-K|0)|0){C=1;i=O;return C|0}C=h<<16|I<<4;i=O;return C|0}function sb(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;f=i;a:do if((jb(a,1)|0)!=-1?(e=b+4|0,c[e>>2]=jb(a,2)|0,d=jb(a,5)|0,c[b>>2]=d,(d+-2|0)>>>0>=3):0){switch(d|0){case 5:case 7:case 8:{if(!(c[e>>2]|0)){d=1;break a}switch(d|0){case 6:case 9:case 10:case 11:case 12:{d=1;break a}default:{}}break}case 6:case 9:case 10:case 11:case 12:{if(c[e>>2]|0){d=1;break a}break}default:{}}d=0}else d=1;while(0);i=f;return d|0}function tb(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0;o=i;if(!d){i=o;return}m=b+-1|0;j=1-b|0;k=~b;g=0;h=0;l=0;while(1){f=(g|0)!=0;if(f)c[a+(h*216|0)+200>>2]=a+((h+-1|0)*216|0);else c[a+(h*216|0)+200>>2]=0;e=(l|0)!=0;if(e){c[a+(h*216|0)+204>>2]=a+((h-b|0)*216|0);if(g>>>0<m>>>0)c[a+(h*216|0)+208>>2]=a+((j+h|0)*216|0);else n=10}else{c[a+(h*216|0)+204>>2]=0;n=10}if((n|0)==10){n=0;c[a+(h*216|0)+208>>2]=0}if(e&f)c[a+(h*216|0)+212>>2]=a+((h+k|0)*216|0);else c[a+(h*216|0)+212>>2]=0;e=g+1|0;f=(e|0)==(b|0);h=h+1|0;if((h|0)==(d|0))break;else{g=f?0:e;l=(f&1)+l|0}}i=o;return}function ub(a,b){a=a|0;b=b|0;var d=0;d=i;switch(b|0){case 4:break;case 0:{a=c[a+200>>2]|0;break}case 2:{a=c[a+208>>2]|0;break}case 1:{a=c[a+204>>2]|0;break}case 3:{a=c[a+212>>2]|0;break}default:a=0}i=d;return a|0}function vb(a){a=a|0;return 3152+(a<<3)|0}function wb(a){a=a|0;return 2960+(a<<3)|0}function xb(a){a=a|0;return 2768+(a<<3)|0}function yb(a){a=a|0;return 2576+(a<<3)|0}function zb(a,b){a=a|0;b=b|0;var d=0;d=i;if(!b){i=d;return 0}else{i=d;return(c[a+4>>2]|0)==(c[b+4>>2]|0)|0}return 0}function Ab(a){a=a|0;var b=0;b=i;id(a,0,3388);c[a+8>>2]=32;c[a+4>>2]=256;c[a+1332>>2]=1;i=b;return}function Bb(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0;h=i;f=c[b+8>>2]|0;g=a+(f<<2)+20|0;e=c[g>>2]|0;do if(!e){d=fd(92)|0;c[g>>2]=d;if(!d){d=65535;i=h;return d|0}}else{d=a+8|0;if((f|0)!=(c[d>>2]|0)){gd(c[e+40>>2]|0);c[(c[g>>2]|0)+40>>2]=0;gd(c[(c[g>>2]|0)+84>>2]|0);c[(c[g>>2]|0)+84>>2]=0;break}f=a+16|0;if(Ra(b,c[f>>2]|0)|0){gd(c[(c[g>>2]|0)+40>>2]|0);c[(c[g>>2]|0)+40>>2]=0;gd(c[(c[g>>2]|0)+84>>2]|0);c[(c[g>>2]|0)+84>>2]=0;c[d>>2]=33;c[a+4>>2]=257;c[f>>2]=0;c[a+12>>2]=0;break}d=b+40|0;gd(c[d>>2]|0);c[d>>2]=0;d=b+84|0;gd(c[d>>2]|0);c[d>>2]=0;d=0;i=h;return d|0}while(0);f=(c[g>>2]|0)+0|0;d=b+0|0;e=f+92|0;do{c[f>>2]=c[d>>2];f=f+4|0;d=d+4|0}while((f|0)<(e|0));d=0;i=h;return d|0}function Cb(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0;h=i;f=c[b>>2]|0;g=a+(f<<2)+148|0;d=c[g>>2]|0;do if(!d){d=fd(72)|0;c[g>>2]=d;if(!d){d=65535;i=h;return d|0}}else{e=a+4|0;if((f|0)!=(c[e>>2]|0)){gd(c[d+20>>2]|0);c[(c[g>>2]|0)+20>>2]=0;gd(c[(c[g>>2]|0)+24>>2]|0);c[(c[g>>2]|0)+24>>2]=0;gd(c[(c[g>>2]|0)+28>>2]|0);c[(c[g>>2]|0)+28>>2]=0;gd(c[(c[g>>2]|0)+44>>2]|0);c[(c[g>>2]|0)+44>>2]=0;break}if((c[b+4>>2]|0)!=(c[a+8>>2]|0)){c[e>>2]=257;d=c[g>>2]|0}gd(c[d+20>>2]|0);c[(c[g>>2]|0)+20>>2]=0;gd(c[(c[g>>2]|0)+24>>2]|0);c[(c[g>>2]|0)+24>>2]=0;gd(c[(c[g>>2]|0)+28>>2]|0);c[(c[g>>2]|0)+28>>2]=0;gd(c[(c[g>>2]|0)+44>>2]|0);c[(c[g>>2]|0)+44>>2]=0}while(0);f=(c[g>>2]|0)+0|0;d=b+0|0;e=f+72|0;do{c[f>>2]=c[d>>2];f=f+4|0;d=d+4|0}while((f|0)<(e|0));d=0;i=h;return d|0}function Db(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;q=i;o=a+(b<<2)+148|0;f=c[o>>2]|0;if(!f){o=1;i=q;return o|0}n=c[f+4>>2]|0;g=c[a+(n<<2)+20>>2]|0;if(!g){o=1;i=q;return o|0}l=c[g+52>>2]|0;m=Z(c[g+56>>2]|0,l)|0;h=c[f+12>>2]|0;a:do if(h>>>0>1){g=c[f+16>>2]|0;if(!g){g=c[f+20>>2]|0;f=0;while(1){if((c[g+(f<<2)>>2]|0)>>>0>m>>>0){e=1;break}f=f+1|0;if(f>>>0>=h>>>0)break a}i=q;return e|0}else if((g|0)==2){k=c[f+24>>2]|0;j=c[f+28>>2]|0;h=h+-1|0;e=0;while(1){f=c[k+(e<<2)>>2]|0;g=c[j+(e<<2)>>2]|0;if(!(f>>>0<=g>>>0&g>>>0<m>>>0)){e=1;g=33;break}e=e+1|0;if(((f>>>0)%(l>>>0)|0)>>>0>((g>>>0)%(l>>>0)|0)>>>0){e=1;g=33;break}if(e>>>0>=h>>>0)break a}if((g|0)==33){i=q;return e|0}}else{if((g+-3|0)>>>0<3){if((c[f+36>>2]|0)>>>0>m>>>0)e=1;else break;i=q;return e|0}if((g|0)!=6)break;if((c[f+40>>2]|0)>>>0<m>>>0)e=1;else break;i=q;return e|0}}while(0);f=a+4|0;g=c[f>>2]|0;do if((g|0)!=256){e=a+3380|0;if(!(c[e>>2]|0)){if((g|0)==(b|0))break;g=a+8|0;if((n|0)==(c[g>>2]|0)){c[f>>2]=b;c[a+12>>2]=c[o>>2];break}if(!d){o=1;i=q;return o|0}else{c[f>>2]=b;o=c[o>>2]|0;c[a+12>>2]=o;o=c[o+4>>2]|0;c[g>>2]=o;o=c[a+(o<<2)+20>>2]|0;c[a+16>>2]=o;n=c[o+52>>2]|0;o=c[o+56>>2]|0;c[a+1176>>2]=Z(o,n)|0;c[a+1340>>2]=n;c[a+1344>>2]=o;c[e>>2]=1;break}}c[e>>2]=0;e=a+1212|0;gd(c[e>>2]|0);c[e>>2]=0;f=a+1172|0;gd(c[f>>2]|0);c[f>>2]=0;g=a+1176|0;c[e>>2]=fd((c[g>>2]|0)*216|0)|0;o=fd(c[g>>2]<<2)|0;c[f>>2]=o;f=c[e>>2]|0;if((f|0)==0|(o|0)==0){o=65535;i=q;return o|0}id(f,0,(c[g>>2]|0)*216|0);f=a+16|0;tb(c[e>>2]|0,c[(c[f>>2]|0)+52>>2]|0,c[g>>2]|0);f=c[f>>2]|0;do if((c[a+1216>>2]|0)==0?(c[f+16>>2]|0)!=2:0){if(((c[f+80>>2]|0)!=0?(p=c[f+84>>2]|0,(c[p+920>>2]|0)!=0):0)?(c[p+944>>2]|0)==0:0){e=1;break}e=0}else e=1;while(0);o=Z(c[f+56>>2]|0,c[f+52>>2]|0)|0;e=lc(a+1220|0,o,c[f+88>>2]|0,c[f+44>>2]|0,c[f+12>>2]|0,e)|0;if(e){o=e;i=q;return o|0}}else{c[f>>2]=b;o=c[o>>2]|0;c[a+12>>2]=o;o=c[o+4>>2]|0;c[a+8>>2]=o;o=c[a+(o<<2)+20>>2]|0;c[a+16>>2]=o;n=c[o+52>>2]|0;o=c[o+56>>2]|0;c[a+1176>>2]=Z(o,n)|0;c[a+1340>>2]=n;c[a+1344>>2]=o;c[a+3380>>2]=1}while(0);o=0;i=q;return o|0}function Eb(a){a=a|0;var b=0,d=0,e=0;e=i;c[a+1196>>2]=0;c[a+1192>>2]=0;d=c[a+1176>>2]|0;if(!d){i=e;return}a=c[a+1212>>2]|0;b=0;do{c[a+(b*216|0)+4>>2]=0;c[a+(b*216|0)+196>>2]=0;b=b+1|0}while(b>>>0<d>>>0);i=e;return}function Fb(a){a=a|0;return(c[a+1188>>2]|0)==0|0}function Gb(a){a=a|0;var b=0,d=0,e=0,f=0;f=i;if(!(c[a+1404>>2]|0)){if((c[a+1196>>2]|0)==(c[a+1176>>2]|0)){a=1;i=f;return a|0}}else{e=c[a+1176>>2]|0;if(!e){a=1;i=f;return a|0}a=c[a+1212>>2]|0;b=0;d=0;do{d=((c[a+(b*216|0)+196>>2]|0)!=0&1)+d|0;b=b+1|0}while(b>>>0<e>>>0);if((d|0)==(e|0)){a=1;i=f;return a|0}}a=0;i=f;return a|0}function Hb(a,b){a=a|0;b=b|0;var d=0,e=0;d=i;e=c[a+16>>2]|0;Kb(c[a+1172>>2]|0,c[a+12>>2]|0,b,c[e+52>>2]|0,c[e+56>>2]|0);
i=d;return}function Ib(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;t=i;i=i+32|0;g=t+24|0;j=t+20|0;k=t+16|0;n=t+12|0;r=t+8|0;q=t;c[e>>2]=0;switch(c[b>>2]|0){case 5:case 1:{s=d+1300|0;h=d+1332|0;if(c[h>>2]|0){c[e>>2]=1;c[h>>2]=0}h=Ua(a,g)|0;if(h){o=h;i=t;return o|0}l=c[d+(c[g>>2]<<2)+148>>2]|0;if(!l){o=65520;i=t;return o|0}h=c[l+4>>2]|0;m=c[d+(h<<2)+20>>2]|0;if(!m){o=65520;i=t;return o|0}g=c[d+8>>2]|0;if(!((g|0)==32|(h|0)==(g|0))?(c[b>>2]|0)!=5:0){o=65520;i=t;return o|0}g=c[d+1304>>2]|0;h=c[b+4>>2]|0;if((g|0)!=(h|0)?(g|0)==0|(h|0)==0:0)c[e>>2]=1;h=(c[b>>2]|0)==5;if((c[s>>2]|0)==5){if(!h)f=16}else if(h)f=16;if((f|0)==16)c[e>>2]=1;g=m+12|0;if(Va(a,c[g>>2]|0,j)|0){o=1;i=t;return o|0}f=d+1308|0;h=c[j>>2]|0;if((c[f>>2]|0)!=(h|0)){c[f>>2]=h;c[e>>2]=1}if((c[b>>2]|0)==5){if(Wa(a,c[g>>2]|0,5,k)|0){o=1;i=t;return o|0}if((c[s>>2]|0)==5){h=d+1312|0;f=c[h>>2]|0;g=c[k>>2]|0;if((f|0)==(g|0))g=f;else c[e>>2]=1}else{g=c[k>>2]|0;h=d+1312|0}c[h>>2]=g}g=c[m+16>>2]|0;if(!g){if(Xa(a,m,c[b>>2]|0,n)|0){o=1;i=t;return o|0}f=d+1316|0;g=c[n>>2]|0;if((c[f>>2]|0)!=(g|0)){c[f>>2]=g;c[e>>2]=1}if(c[l+8>>2]|0){f=Ya(a,m,c[b>>2]|0,r)|0;if(f){o=f;i=t;return o|0}g=d+1320|0;f=c[r>>2]|0;if((c[g>>2]|0)!=(f|0)){c[g>>2]=f;c[e>>2]=1}}}else if((g|0)==1?(c[m+24>>2]|0)==0:0){h=l+8|0;g=Za(a,m,c[b>>2]|0,c[h>>2]|0,q)|0;if(g){o=g;i=t;return o|0}f=d+1324|0;g=c[q>>2]|0;if((c[f>>2]|0)!=(g|0)){c[f>>2]=g;c[e>>2]=1}if((c[h>>2]|0)!=0?(p=d+1328|0,o=c[q+4>>2]|0,(c[p>>2]|0)!=(o|0)):0){c[p>>2]=o;c[e>>2]=1}}n=b;a=c[n+4>>2]|0;o=s;c[o>>2]=c[n>>2];c[o+4>>2]=a;o=0;i=t;return o|0}case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:{c[e>>2]=1;o=0;i=t;return o|0}default:{o=0;i=t;return o|0}}return 0}function Jb(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0;n=i;l=0;a:while(1){b=c[a+(l<<2)+148>>2]|0;b:do if((b|0)!=0?(k=c[a+(c[b+4>>2]<<2)+20>>2]|0,(k|0)!=0):0){j=c[k+52>>2]|0;m=Z(c[k+56>>2]|0,j)|0;f=c[b+12>>2]|0;if(f>>>0<=1){b=0;d=18;break a}d=c[b+16>>2]|0;if((d|0)==2){h=c[b+24>>2]|0;g=c[b+28>>2]|0;f=f+-1|0;e=0;while(1){b=c[h+(e<<2)>>2]|0;d=c[g+(e<<2)>>2]|0;if(!(b>>>0<=d>>>0&d>>>0<m>>>0))break b;e=e+1|0;if(((b>>>0)%(j>>>0)|0)>>>0>((d>>>0)%(j>>>0)|0)>>>0)break b;if(e>>>0>=f>>>0){b=0;d=18;break a}}}else if(d){if((d+-3|0)>>>0<3)if((c[b+36>>2]|0)>>>0>m>>>0)break;else{b=0;d=18;break a}if((d|0)!=6){b=0;d=18;break a}if((c[b+40>>2]|0)>>>0<m>>>0)break;else{b=0;d=18;break a}}else{d=c[b+20>>2]|0;b=0;while(1){if((c[d+(b<<2)>>2]|0)>>>0>m>>>0)break b;b=b+1|0;if(b>>>0>=f>>>0){b=0;d=18;break a}}}}while(0);l=l+1|0;if(l>>>0>=256){b=1;d=18;break}}if((d|0)==18){i=n;return b|0}return 0}function Kb(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;v=i;t=Z(f,e)|0;o=c[b+12>>2]|0;if((o|0)==1){id(a,0,t<<2);i=v;return}k=c[b+16>>2]|0;if((k+-3|0)>>>0<3){d=Z(c[b+36>>2]|0,d)|0;d=d>>>0<t>>>0?d:t;if((k&-2|0)==4){n=(c[b+32>>2]|0)==0?d:t-d|0;u=d}else{n=0;u=d}}else{n=0;u=0}switch(k|0){case 1:{if(!t){i=v;return}else h=0;do{c[a+(h<<2)>>2]=((((Z((h>>>0)/(e>>>0)|0,o)|0)>>>1)+((h>>>0)%(e>>>0)|0)|0)>>>0)%(o>>>0)|0;h=h+1|0}while((h|0)!=(t|0));i=v;return}case 5:{d=c[b+32>>2]|0;if(!e){i=v;return}k=1-d|0;if(!f){i=v;return}else{g=0;j=0}while(1){h=0;b=j;while(1){m=a+((Z(h,e)|0)+g<<2)|0;c[m>>2]=b>>>0<n>>>0?d:k;h=h+1|0;if((h|0)==(f|0))break;else b=b+1|0}g=g+1|0;if((g|0)==(e|0))break;else j=j+f|0}i=v;return}case 3:{m=c[b+32>>2]|0;if(t){d=0;do{c[a+(d<<2)>>2]=1;d=d+1|0}while((d|0)!=(t|0))}l=(e-m|0)>>>1;n=(f-m|0)>>>1;if(!u){i=v;return}t=m<<1;r=t+-1|0;s=e+-1|0;t=1-t|0;q=f+-1|0;o=n;p=0;g=l;f=l;k=n;b=l;j=m+-1|0;d=n;while(1){n=a+((Z(d,e)|0)+b<<2)|0;l=(c[n>>2]|0)==1;h=l&1;if(l)c[n>>2]=0;do if(!((j|0)==-1&(b|0)==(g|0))){if((j|0)==1&(b|0)==(f|0)){b=f+1|0;b=(b|0)<(s|0)?b:s;n=o;l=g;f=b;j=0;m=t;break}if((m|0)==-1&(d|0)==(k|0)){d=k+-1|0;d=(d|0)>0?d:0;n=o;l=g;k=d;j=t;m=0;break}if((m|0)==1&(d|0)==(o|0)){d=o+1|0;d=(d|0)<(q|0)?d:q;n=d;l=g;j=r;m=0;break}else{n=o;l=g;b=b+j|0;d=d+m|0;break}}else{b=g+-1|0;b=(b|0)>0?b:0;n=o;l=b;j=0;m=r}while(0);p=h+p|0;if(p>>>0>=u>>>0)break;else{o=n;g=l}}i=v;return}case 4:{h=c[b+32>>2]|0;if(!t){i=v;return}d=1-h|0;g=0;do{c[a+(g<<2)>>2]=g>>>0<n>>>0?h:d;g=g+1|0}while((g|0)!=(t|0));i=v;return}case 2:{n=c[b+24>>2]|0;m=c[b+28>>2]|0;h=o+-1|0;if(t){d=0;do{c[a+(d<<2)>>2]=h;d=d+1|0}while((d|0)!=(t|0))}if(!h){i=v;return}g=o+-2|0;while(1){j=c[n+(g<<2)>>2]|0;d=(j>>>0)/(e>>>0)|0;j=(j>>>0)%(e>>>0)|0;h=c[m+(g<<2)>>2]|0;l=(h>>>0)/(e>>>0)|0;h=(h>>>0)%(e>>>0)|0;a:do if(d>>>0<=l>>>0){if(j>>>0>h>>>0)while(1){d=d+1|0;if(d>>>0>l>>>0)break a}do{k=Z(d,e)|0;b=j;do{c[a+(b+k<<2)>>2]=g;b=b+1|0}while(b>>>0<=h>>>0);d=d+1|0}while(d>>>0<=l>>>0)}while(0);if(!g)break;else g=g+-1|0}i=v;return}case 0:{l=c[b+20>>2]|0;if(!t){i=v;return}else{h=0;j=0}while(1){while(1)if(h>>>0<o>>>0)break;else h=0;b=l+(h<<2)|0;d=c[b>>2]|0;b:do if(!d)d=0;else{k=0;do{g=k+j|0;if(g>>>0>=t>>>0)break b;c[a+(g<<2)>>2]=h;k=k+1|0;d=c[b>>2]|0}while(k>>>0<d>>>0)}while(0);j=d+j|0;if(j>>>0>=t>>>0)break;else h=h+1|0}i=v;return}default:{if(!t){i=v;return}g=c[b+44>>2]|0;h=0;do{c[a+(h<<2)>>2]=c[g+(h<<2)>>2];h=h+1|0}while((h|0)!=(t|0));i=v;return}}}function Lb(){return 3472}function Mb(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0;k=i;i=i+80|0;h=k+32|0;j=k;Nb(d,h,j,e);if((cb(c[a>>2]|0)|0)==1){e=Ob(a,g,b+328|0,h,j,f)|0;if(e){i=k;return e|0}}else{e=Pb(a,g,b,h,j,f)|0;if(e){i=k;return e|0}}e=Qb(a,g+256|0,b+1352|0,h+21|0,j+16|0,c[b+140>>2]|0,f)|0;if(e){i=k;return e|0}if((c[a+196>>2]|0)>>>0>1){e=0;i=k;return e|0}sc(d,g);e=0;i=k;return e|0}function Nb(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;s=i;if(!f){i=s;return}p=c[b+4>>2]|0;q=Z(c[b+8>>2]|0,p)|0;n=(f>>>0)/(p>>>0)|0;g=Z(n,p)|0;o=f-g|0;k=p<<4;h=c[b>>2]|0;j=(o<<4)+(Z(p<<8,n)|0)|0;r=(n|0)!=0;if(r){m=j-(k|1)|0;a[d>>0]=a[h+m>>0]|0;a[d+1>>0]=a[h+(m+1)>>0]|0;a[d+2>>0]=a[h+(m+2)>>0]|0;a[d+3>>0]=a[h+(m+3)>>0]|0;a[d+4>>0]=a[h+(m+4)>>0]|0;a[d+5>>0]=a[h+(m+5)>>0]|0;a[d+6>>0]=a[h+(m+6)>>0]|0;a[d+7>>0]=a[h+(m+7)>>0]|0;a[d+8>>0]=a[h+(m+8)>>0]|0;a[d+9>>0]=a[h+(m+9)>>0]|0;a[d+10>>0]=a[h+(m+10)>>0]|0;a[d+11>>0]=a[h+(m+11)>>0]|0;a[d+12>>0]=a[h+(m+12)>>0]|0;a[d+13>>0]=a[h+(m+13)>>0]|0;a[d+14>>0]=a[h+(m+14)>>0]|0;a[d+15>>0]=a[h+(m+15)>>0]|0;a[d+16>>0]=a[h+(m+16)>>0]|0;a[d+17>>0]=a[h+(m+17)>>0]|0;a[d+18>>0]=a[h+(m+18)>>0]|0;a[d+19>>0]=a[h+(m+19)>>0]|0;a[d+20>>0]=a[h+(m+20)>>0]|0;m=d+21|0}else m=d;l=(g|0)!=(f|0);if(l){j=j+-1|0;a[e>>0]=a[h+j>>0]|0;j=j+k|0;a[e+1>>0]=a[h+j>>0]|0;j=j+k|0;a[e+2>>0]=a[h+j>>0]|0;j=j+k|0;a[e+3>>0]=a[h+j>>0]|0;j=j+k|0;a[e+4>>0]=a[h+j>>0]|0;j=j+k|0;a[e+5>>0]=a[h+j>>0]|0;j=j+k|0;a[e+6>>0]=a[h+j>>0]|0;j=j+k|0;a[e+7>>0]=a[h+j>>0]|0;j=j+k|0;a[e+8>>0]=a[h+j>>0]|0;j=j+k|0;a[e+9>>0]=a[h+j>>0]|0;j=j+k|0;a[e+10>>0]=a[h+j>>0]|0;j=j+k|0;a[e+11>>0]=a[h+j>>0]|0;j=j+k|0;a[e+12>>0]=a[h+j>>0]|0;j=j+k|0;a[e+13>>0]=a[h+j>>0]|0;j=j+k|0;a[e+14>>0]=a[h+j>>0]|0;a[e+15>>0]=a[h+(j+k)>>0]|0;e=e+16|0}d=p<<3&2147483640;f=c[b>>2]|0;g=(Z(n<<3,d)|0)+(q<<8)+(o<<3)|0;if(r){b=g-(d|1)|0;a[m>>0]=a[f+b>>0]|0;a[m+1>>0]=a[f+(b+1)>>0]|0;a[m+2>>0]=a[f+(b+2)>>0]|0;a[m+3>>0]=a[f+(b+3)>>0]|0;a[m+4>>0]=a[f+(b+4)>>0]|0;a[m+5>>0]=a[f+(b+5)>>0]|0;a[m+6>>0]=a[f+(b+6)>>0]|0;a[m+7>>0]=a[f+(b+7)>>0]|0;a[m+8>>0]=a[f+(b+8)>>0]|0;b=b+(q<<6)|0;a[m+9>>0]=a[f+b>>0]|0;a[m+10>>0]=a[f+(b+1)>>0]|0;a[m+11>>0]=a[f+(b+2)>>0]|0;a[m+12>>0]=a[f+(b+3)>>0]|0;a[m+13>>0]=a[f+(b+4)>>0]|0;a[m+14>>0]=a[f+(b+5)>>0]|0;a[m+15>>0]=a[f+(b+6)>>0]|0;a[m+16>>0]=a[f+(b+7)>>0]|0;a[m+17>>0]=a[f+(b+8)>>0]|0}if(!l){i=s;return}m=g+-1|0;a[e>>0]=a[f+m>>0]|0;m=m+d|0;a[e+1>>0]=a[f+m>>0]|0;m=m+d|0;a[e+2>>0]=a[f+m>>0]|0;m=m+d|0;a[e+3>>0]=a[f+m>>0]|0;m=m+d|0;a[e+4>>0]=a[f+m>>0]|0;m=m+d|0;a[e+5>>0]=a[f+m>>0]|0;m=m+d|0;a[e+6>>0]=a[f+m>>0]|0;m=m+d|0;a[e+7>>0]=a[f+m>>0]|0;m=m+(d+((q<<6)-(p<<6)))|0;a[e+8>>0]=a[f+m>>0]|0;m=m+d|0;a[e+9>>0]=a[f+m>>0]|0;m=m+d|0;a[e+10>>0]=a[f+m>>0]|0;m=m+d|0;a[e+11>>0]=a[f+m>>0]|0;m=m+d|0;a[e+12>>0]=a[f+m>>0]|0;m=m+d|0;a[e+13>>0]=a[f+m>>0]|0;m=m+d|0;a[e+14>>0]=a[f+m>>0]|0;a[e+15>>0]=a[f+(m+d)>>0]|0;i=s;return}function Ob(b,e,f,g,h,j){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;var k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0;z=i;k=b+200|0;l=zb(b,c[k>>2]|0)|0;o=(j|0)!=0;if((l|0)!=0&o){n=(cb(c[c[k>>2]>>2]|0)|0)==2;n=n?0:l}else n=l;j=b+204|0;l=zb(b,c[j>>2]|0)|0;if((l|0)!=0&o){p=(cb(c[c[j>>2]>>2]|0)|0)==2;p=p?0:l}else p=l;j=b+212|0;l=zb(b,c[j>>2]|0)|0;if((l|0)!=0&o){r=(cb(c[c[j>>2]>>2]|0)|0)==2;l=r?0:l}j=fb(c[b>>2]|0)|0;if((j|0)==2){l=g+1|0;k=(n|0)!=0;j=(p|0)!=0;do if(!(k&j)){if(k){k=((d[h>>0]|0)+8+(d[h+1>>0]|0)+(d[h+2>>0]|0)+(d[h+3>>0]|0)+(d[h+4>>0]|0)+(d[h+5>>0]|0)+(d[h+6>>0]|0)+(d[h+7>>0]|0)+(d[h+8>>0]|0)+(d[h+9>>0]|0)+(d[h+10>>0]|0)+(d[h+11>>0]|0)+(d[h+12>>0]|0)+(d[h+13>>0]|0)+(d[h+14>>0]|0)+(d[h+15>>0]|0)|0)>>>4;break}if(j)k=((d[l>>0]|0)+8+(d[g+2>>0]|0)+(d[g+3>>0]|0)+(d[g+4>>0]|0)+(d[g+5>>0]|0)+(d[g+6>>0]|0)+(d[g+7>>0]|0)+(d[g+8>>0]|0)+(d[g+9>>0]|0)+(d[g+10>>0]|0)+(d[g+11>>0]|0)+(d[g+12>>0]|0)+(d[g+13>>0]|0)+(d[g+14>>0]|0)+(d[g+15>>0]|0)+(d[g+16>>0]|0)|0)>>>4;else k=128}else{j=0;k=0;do{r=j;j=j+1|0;k=(d[g+j>>0]|0)+k+(d[h+r>>0]|0)|0}while((j|0)!=16);k=(k+16|0)>>>5}while(0);nd(e|0,k&255|0,256)|0}else if((j|0)==1)if(!n){r=1;i=z;return r|0}else{k=e;j=0;while(1){r=h+j|0;a[k>>0]=a[r>>0]|0;a[k+1>>0]=a[r>>0]|0;a[k+2>>0]=a[r>>0]|0;a[k+3>>0]=a[r>>0]|0;a[k+4>>0]=a[r>>0]|0;a[k+5>>0]=a[r>>0]|0;a[k+6>>0]=a[r>>0]|0;a[k+7>>0]=a[r>>0]|0;a[k+8>>0]=a[r>>0]|0;a[k+9>>0]=a[r>>0]|0;a[k+10>>0]=a[r>>0]|0;a[k+11>>0]=a[r>>0]|0;a[k+12>>0]=a[r>>0]|0;a[k+13>>0]=a[r>>0]|0;a[k+14>>0]=a[r>>0]|0;a[k+15>>0]=a[r>>0]|0;j=j+1|0;if((j|0)==16)break;else k=k+16|0}}else if(!j){if(!p){r=1;i=z;return r|0}b=g+1|0;m=g+2|0;s=g+3|0;t=g+4|0;u=g+5|0;v=g+6|0;w=g+7|0;x=g+8|0;y=g+9|0;h=g+10|0;l=g+11|0;j=g+12|0;k=g+13|0;q=g+14|0;r=g+15|0;p=g+16|0;o=e;n=0;while(1){a[o>>0]=a[b>>0]|0;a[o+1>>0]=a[m>>0]|0;a[o+2>>0]=a[s>>0]|0;a[o+3>>0]=a[t>>0]|0;a[o+4>>0]=a[u>>0]|0;a[o+5>>0]=a[v>>0]|0;a[o+6>>0]=a[w>>0]|0;a[o+7>>0]=a[x>>0]|0;a[o+8>>0]=a[y>>0]|0;a[o+9>>0]=a[h>>0]|0;a[o+10>>0]=a[l>>0]|0;a[o+11>>0]=a[j>>0]|0;a[o+12>>0]=a[k>>0]|0;a[o+13>>0]=a[q>>0]|0;a[o+14>>0]=a[r>>0]|0;a[o+15>>0]=a[p>>0]|0;n=n+1|0;if((n|0)==16)break;else o=o+16|0}}else{if(!((n|0)!=0&(p|0)!=0&(l|0)!=0)){r=1;i=z;return r|0}j=d[g+16>>0]|0;m=d[h+15>>0]|0;o=d[g>>0]|0;p=(((d[g+9>>0]|0)-(d[g+7>>0]|0)+((d[g+10>>0]|0)-(d[g+6>>0]|0)<<1)+(((d[g+11>>0]|0)-(d[g+5>>0]|0)|0)*3|0)+((d[g+12>>0]|0)-(d[g+4>>0]|0)<<2)+(((d[g+13>>0]|0)-(d[g+3>>0]|0)|0)*5|0)+(((d[g+14>>0]|0)-(d[g+2>>0]|0)|0)*6|0)+(((d[g+15>>0]|0)-(d[g+1>>0]|0)|0)*7|0)+(j-o<<3)|0)*5|0)+32>>6;o=(((d[h+8>>0]|0)-(d[h+6>>0]|0)+(m-o<<3)+((d[h+9>>0]|0)-(d[h+5>>0]|0)<<1)+(((d[h+10>>0]|0)-(d[h+4>>0]|0)|0)*3|0)+((d[h+11>>0]|0)-(d[h+3>>0]|0)<<2)+(((d[h+12>>0]|0)-(d[h+2>>0]|0)|0)*5|0)+(((d[h+13>>0]|0)-(d[h+1>>0]|0)|0)*6|0)+(((d[h+14>>0]|0)-(d[h>>0]|0)|0)*7|0)|0)*5|0)+32>>6;j=(m+j<<4)+16|0;m=0;do{k=j+(Z(m+-7|0,o)|0)|0;n=m<<4;b=0;do{l=k+(Z(b+-7|0,p)|0)>>5;if((l|0)<0)l=0;else l=(l|0)>255?-1:l&255;a[e+(b+n)>>0]=l;b=b+1|0}while((b|0)!=16);m=m+1|0}while((m|0)!=16)}Rb(e,f,0);Rb(e,f+64|0,1);Rb(e,f+128|0,2);Rb(e,f+192|0,3);Rb(e,f+256|0,4);Rb(e,f+320|0,5);Rb(e,f+384|0,6);Rb(e,f+448|0,7);Rb(e,f+512|0,8);Rb(e,f+576|0,9);Rb(e,f+640|0,10);Rb(e,f+704|0,11);Rb(e,f+768|0,12);Rb(e,f+832|0,13);Rb(e,f+896|0,14);Rb(e,f+960|0,15);r=0;i=z;return r|0}function Pb(b,e,f,g,h,j){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;var k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0;N=i;M=(j|0)!=0;L=0;a:while(1){l=vb(L)|0;n=c[l+4>>2]|0;l=ub(b,c[l>>2]|0)|0;j=zb(b,l)|0;if((j|0)!=0&M){E=(cb(c[l>>2]|0)|0)==2;j=E?0:j}o=wb(L)|0;m=c[o+4>>2]|0;o=ub(b,c[o>>2]|0)|0;k=zb(b,o)|0;if((k|0)!=0&M){E=(cb(c[o>>2]|0)|0)==2;k=E?0:k}G=(j|0)!=0;H=(k|0)!=0;I=G&H;if(I){if(!(cb(c[l>>2]|0)|0))n=d[l+(n&255)+82>>0]|0;else n=2;if(!(cb(c[o>>2]|0)|0))j=d[o+(m&255)+82>>0]|0;else j=2;j=n>>>0<j>>>0?n:j}else j=2;if(!(c[f+(L<<2)+12>>2]|0)){E=c[f+(L<<2)+76>>2]|0;j=(E>>>0>=j>>>0&1)+E|0}a[b+L+82>>0]=j;l=c[(xb(L)|0)>>2]|0;l=ub(b,l)|0;m=zb(b,l)|0;if((m|0)!=0&M){E=(cb(c[l>>2]|0)|0)==2;m=E?0:m}l=c[(yb(L)|0)>>2]|0;l=ub(b,l)|0;n=zb(b,l)|0;if((n|0)!=0&M){E=(cb(c[l>>2]|0)|0)==2;n=E?0:n}J=c[3344+(L<<2)>>2]|0;K=c[3408+(L<<2)>>2]|0;r=(1285>>>L&1|0)!=0;if(r){o=h+K|0;l=h+(K+1)|0;p=h+(K+2)|0;q=h+(K+3)|0}else{q=(K<<4)+J|0;o=e+(q+-1)|0;l=e+(q+15)|0;p=e+(q+31)|0;q=e+(q+47)|0}A=a[o>>0]|0;y=a[l>>0]|0;F=a[p>>0]|0;E=a[q>>0]|0;do if(!(51>>>L&1)){x=K+-1|0;w=(x<<4)+J|0;o=a[e+w>>0]|0;q=a[e+(w+1)>>0]|0;s=a[e+(w+2)>>0]|0;u=a[e+(w+3)>>0]|0;t=a[e+(w+4)>>0]|0;l=a[e+(w+5)>>0]|0;v=a[e+(w+6)>>0]|0;p=a[e+(w+7)>>0]|0;if(r){D=v;C=u;u=p;B=q;z=s;v=h+x|0;break}else{D=v;C=u;u=p;B=q;z=s;v=e+(w+-1)|0;break}}else{D=a[g+(J+7)>>0]|0;C=a[g+(J+4)>>0]|0;t=a[g+(J+5)>>0]|0;l=a[g+(J+6)>>0]|0;o=a[g+(J+1)>>0]|0;u=a[g+(J+8)>>0]|0;B=a[g+(J+2)>>0]|0;z=a[g+(J+3)>>0]|0;v=g+J|0}while(0);v=a[v>>0]|0;switch(j|0){case 1:{if(!G){k=1;j=51;break a}j=Z(A&255,16843009)|0;s=Z(y&255,16843009)|0;v=Z(F&255,16843009)|0;q=j&255;p=s&255;n=v&255;m=j>>>8&255;l=j>>>16&255;j=j>>>24&255;k=s>>>8&255;r=s>>>16&255;s=s>>>24&255;t=v>>>8&255;u=v>>>16&255;v=v>>>24&255;o=Z(E&255,16843009)|0;break}case 5:{if(!(I&(n|0)!=0)){k=1;j=51;break a}n=v&255;u=o&255;t=(u+1+n|0)>>>1&255;x=B&255;E=(x+2+(u<<1)+n|0)>>>2;B=A&255;A=u+2|0;o=(A+B+(n<<1)|0)>>>2;u=(x+1+u|0)>>>1&255;s=z&255;A=((x<<1)+s+A|0)>>>2;v=(s+1+x|0)>>>1&255;C=C&255;D=y&255;q=t;p=o&255;n=(D+2+(B<<1)+n|0)>>>2&255;m=u;l=v;j=(C+1+s|0)>>>1&255;k=E&255;r=A&255;s=(C+2+x+(s<<1)|0)>>>2&255;o=A<<24|(B+2+(F&255)+(D<<1)|0)>>>2&255|E<<16&16711680|o<<8&65280;break}case 6:{if(!(I&(n|0)!=0)){k=1;j=51;break a}l=v&255;s=A&255;u=s+1|0;r=(u+l|0)>>>1&255;C=y&255;v=((s<<1)+2+C+l|0)>>>2&255;u=(u+C|0)>>>1&255;D=F&255;s=s+2|0;y=(s+(C<<1)+D|0)>>>2;A=(C+1+D|0)>>>1;E=E&255;j=o&255;s=(s+j+(l<<1)|0)>>>2&255;k=B&255;q=r;p=u;n=A&255;m=s;l=(k+2+(j<<1)+l|0)>>>2&255;j=((z&255)+2+(k<<1)+j|0)>>>2&255;k=v;t=y&255;o=y<<24|A<<16&16711680|(D+1+E|0)>>>1&255|C+2+(D<<1)+E<<6&65280;break}case 2:{do if(!I){if(G){j=((A&255)+2+(y&255)+(F&255)+(E&255)|0)>>>2;break}if(H)j=((C&255)+2+(z&255)+(B&255)+(o&255)|0)>>>2;else j=128}else j=((A&255)+4+(y&255)+(F&255)+(E&255)+(C&255)+(z&255)+(B&255)+(o&255)|0)>>>3;while(0);o=Z(j&255,16843009)|0;n=o&255;t=o>>>8&255;u=o>>>16&255;v=o>>>24&255;q=n;p=n;m=t;l=u;j=v;k=t;r=u;s=v;break}case 3:{if(!k){k=1;j=51;break a}n=(m|0)==0;q=B&255;m=z&255;p=m+2|0;k=C&255;B=k+2|0;m=(B+q+(m<<1)|0)>>>2&255;v=(n?C:t)&255;k=(p+(k<<1)+v|0)>>>2&255;E=(n?C:l)&255;B=(B+E+(v<<1)|0)>>>2;t=B&255;A=(n?C:D)&255;D=(v+2+A+(E<<1)|0)>>>2;v=D&255;C=(n?C:u)&255;E=(E+2+C+(A<<1)|0)>>>2;q=(p+(o&255)+(q<<1)|0)>>>2&255;p=m;n=k;l=k;j=t;r=t;s=v;u=v;v=E&255;o=(A+2+(C*3|0)|0)>>>2<<24|B&255|D<<8&65280|E<<16&16711680;break}case 4:{if(!(I&(n|0)!=0)){k=1;j=51;break a}j=o&255;o=v&255;q=A&255;s=j+2|0;D=(s+q+(o<<1)|0)>>>2;u=D&255;k=B&255;o=o+2|0;v=((j<<1)+k+o|0)>>>2&255;j=z&255;s=((k<<1)+j+s|0)>>>2&255;z=y&255;o=(z+(q<<1)+o|0)>>>2;t=o&255;A=F&255;B=(q+2+(z<<1)+A|0)>>>2;q=u;p=t;n=B&255;m=v;l=s;j=((C&255)+2+k+(j<<1)|0)>>>2&255;k=u;r=v;o=(z+2+(A<<1)+(E&255)|0)>>>2&255|B<<8&65280|D<<24|o<<16&16711680;break}case 7:{if(!k){k=1;j=51;break a}A=(m|0)==0;n=o&255;p=B&255;z=z&255;m=(z+1+p|0)>>>1&255;o=C&255;u=o+1|0;v=(u+z|0)>>>1&255;B=(A?C:t)&255;u=(u+B|0)>>>1&255;j=z+2|0;y=o+2|0;z=(y+p+(z<<1)|0)>>>2;o=(j+(o<<1)+B|0)>>>2;E=(A?C:l)&255;y=(y+E+(B<<1)|0)>>>2;q=(p+1+n|0)>>>1&255;p=(j+n+(p<<1)|0)>>>2&255;n=m;l=v;j=u;k=z&255;r=o&255;s=y&255;t=v;v=(B+1+E|0)>>>1&255;o=y<<16&16711680|z&255|(B+2+((A?C:D)&255)+(E<<1)|0)>>>2<<24|o<<8&65280;break}case 0:{if(!k){k=1;j=51;break a}q=o;p=o;n=o;m=B;l=z;j=C;k=B;r=z;s=C;t=B;u=z;v=C;o=(z&255)<<16|(C&255)<<24|(B&255)<<8|o&255;break}default:{if(!G){k=1;j=51;break a}s=A&255;j=y&255;m=F&255;l=(j+1+m|0)>>>1&255;o=E&255;k=(j+2+(m<<1)+o|0)>>>2&255;r=(m+1+o|0)>>>1&255;t=(m+2+(o*3|0)|0)>>>2&255;q=(s+1+j|0)>>>1&255;p=l;n=r;m=(s+2+(j<<1)+m|0)>>>2&255;j=k;s=t;u=E;v=E;o=o<<8|o|o<<16|o<<24}}E=(K<<4)+J|0;c[e+E>>2]=(l&255)<<16|(j&255)<<24|(m&255)<<8|q&255;c[e+(E+16)>>2]=(r&255)<<16|(s&255)<<24|(k&255)<<8|p&255;c[e+(E+32)>>2]=(u&255)<<16|(v&255)<<24|(t&255)<<8|n&255;c[e+(E+48)>>2]=o;Rb(e,f+(L<<6)+328|0,L);L=L+1|0;if(L>>>0>=16){k=0;j=51;break}}if((j|0)==51){i=N;return k|0}return 0}function Qb(b,e,f,g,h,j,k){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;k=k|0;var l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0;y=i;m=b+200|0;l=zb(b,c[m>>2]|0)|0;n=(k|0)!=0;if((l|0)!=0&n){o=(cb(c[c[m>>2]>>2]|0)|0)==2;l=o?0:l}m=b+204|0;k=zb(b,c[m>>2]|0)|0;if((k|0)!=0&n){o=(cb(c[c[m>>2]>>2]|0)|0)==2;o=o?0:k}else o=k;m=b+212|0;k=zb(b,c[m>>2]|0)|0;if((k|0)!=0&n){n=(cb(c[c[m>>2]>>2]|0)|0)==2;k=n?0:k}w=(l|0)!=0;x=(o|0)!=0;v=w&x;u=v&(k|0)!=0;t=(l|0)==0;s=(o|0)==0;p=g;q=16;r=0;while(1){if((j|0)==2){if(s){l=1;k=29;break}else{n=p;b=e;m=8}while(1){n=n+1|0;m=m+-1|0;a[b>>0]=a[n>>0]|0;a[b+8>>0]=a[n>>0]|0;a[b+16>>0]=a[n>>0]|0;a[b+24>>0]=a[n>>0]|0;a[b+32>>0]=a[n>>0]|0;a[b+40>>0]=a[n>>0]|0;a[b+48>>0]=a[n>>0]|0;a[b+56>>0]=a[n>>0]|0;if(!m)break;else b=b+1|0}}else if(!j){m=p+1|0;do if(!v){if(x){n=((d[m>>0]|0)+2+(d[p+2>>0]|0)+(d[p+3>>0]|0)+(d[p+4>>0]|0)|0)>>>2;b=((d[p+5>>0]|0)+2+(d[p+6>>0]|0)+(d[p+7>>0]|0)+(d[p+8>>0]|0)|0)>>>2;break}if(w){b=((d[h>>0]|0)+2+(d[h+1>>0]|0)+(d[h+2>>0]|0)+(d[h+3>>0]|0)|0)>>>2;n=b}else{n=128;b=128}}else{n=((d[m>>0]|0)+4+(d[p+2>>0]|0)+(d[p+3>>0]|0)+(d[p+4>>0]|0)+(d[h>>0]|0)+(d[h+1>>0]|0)+(d[h+2>>0]|0)+(d[h+3>>0]|0)|0)>>>3;b=((d[p+5>>0]|0)+2+(d[p+6>>0]|0)+(d[p+7>>0]|0)+(d[p+8>>0]|0)|0)>>>2}while(0);n=n&255;o=b&255;nd(e|0,n|0,4)|0;nd(e+4|0,o|0,4)|0;nd(e+8|0,n|0,4)|0;nd(e+12|0,o|0,4)|0;nd(e+16|0,n|0,4)|0;nd(e+20|0,o|0,4)|0;g=e+32|0;nd(e+24|0,n|0,4)|0;nd(e+28|0,o|0,4)|0;if(w){o=d[h+4>>0]|0;n=d[h+5>>0]|0;b=d[h+6>>0]|0;m=d[h+7>>0]|0;k=(o+2+n+b+m|0)>>>2;if(x){l=k;n=(o+4+n+b+m+(d[p+5>>0]|0)+(d[p+6>>0]|0)+(d[p+7>>0]|0)+(d[p+8>>0]|0)|0)>>>3}else{l=k;n=k}}else if(x){l=((d[m>>0]|0)+2+(d[p+2>>0]|0)+(d[p+3>>0]|0)+(d[p+4>>0]|0)|0)>>>2;n=((d[p+5>>0]|0)+2+(d[p+6>>0]|0)+(d[p+7>>0]|0)+(d[p+8>>0]|0)|0)>>>2}else{l=128;n=128}b=l&255;o=n&255;nd(g|0,b|0,4)|0;nd(e+36|0,o|0,4)|0;nd(e+40|0,b|0,4)|0;nd(e+44|0,o|0,4)|0;nd(e+48|0,b|0,4)|0;nd(e+52|0,o|0,4)|0;nd(e+56|0,b|0,4)|0;nd(e+60|0,o|0,4)|0}else if((j|0)==1){if(t){l=1;k=29;break}else{n=e;b=8;m=h}while(1){b=b+-1|0;a[n>>0]=a[m>>0]|0;a[n+1>>0]=a[m>>0]|0;a[n+2>>0]=a[m>>0]|0;a[n+3>>0]=a[m>>0]|0;a[n+4>>0]=a[m>>0]|0;a[n+5>>0]=a[m>>0]|0;a[n+6>>0]=a[m>>0]|0;a[n+7>>0]=a[m>>0]|0;if(!b)break;else{n=n+8|0;m=m+1|0}}}else{if(!u){l=1;k=29;break}n=d[p+8>>0]|0;b=d[h+7>>0]|0;l=d[p>>0]|0;k=(((d[p+5>>0]|0)-(d[p+3>>0]|0)+((d[p+6>>0]|0)-(d[p+2>>0]|0)<<1)+(((d[p+7>>0]|0)-(d[p+1>>0]|0)|0)*3|0)+(n-l<<2)|0)*17|0)+16>>5;l=(((d[h+4>>0]|0)-(d[h+2>>0]|0)+(b-l<<2)+((d[h+5>>0]|0)-(d[h+1>>0]|0)<<1)+(((d[h+6>>0]|0)-(d[h>>0]|0)|0)*3|0)|0)*17|0)+16>>5;o=Z(k,-3)|0;n=(b+n<<4)+16+(Z(l,-3)|0)|0;b=e;m=8;while(1){m=m+-1|0;g=n+o|0;a[b>>0]=a[(g>>5)+3984>>0]|0;g=g+k|0;a[b+1>>0]=a[(g>>5)+3984>>0]|0;g=g+k|0;a[b+2>>0]=a[(g>>5)+3984>>0]|0;g=g+k|0;a[b+3>>0]=a[(g>>5)+3984>>0]|0;g=g+k|0;a[b+4>>0]=a[(g>>5)+3984>>0]|0;g=g+k|0;a[b+5>>0]=a[(g>>5)+3984>>0]|0;g=g+k|0;a[b+6>>0]=a[(g>>5)+3984>>0]|0;a[b+7>>0]=a[(g+k>>5)+3984>>0]|0;if(!m)break;else{n=n+l|0;b=b+8|0}}}Rb(e,f,q);g=q|1;Rb(e,f+64|0,g);Rb(e,f+128|0,g+1|0);Rb(e,f+192|0,q|3);r=r+1|0;if(r>>>0>=2){l=0;k=29;break}else{p=p+9|0;q=q+4|0;e=e+64|0;h=h+8|0;f=f+256|0}}if((k|0)==29){i=y;return l|0}return 0}function Rb(b,e,f){b=b|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;h=i;g=c[e>>2]|0;if((g|0)==16777215){i=h;return}m=f>>>0<16;l=m?16:8;m=m?f:f&3;m=(Z(c[3408+(m<<2)>>2]|0,l)|0)+(c[3344+(m<<2)>>2]|0)|0;n=b+m|0;p=c[e+4>>2]|0;j=b+(m+1)|0;f=d[j>>0]|0;a[n>>0]=a[3472+(g+512+(d[n>>0]|0))>>0]|0;n=c[e+8>>2]|0;k=b+(m+2)|0;o=d[k>>0]|0;a[j>>0]=a[3472+(p+512+f)>>0]|0;g=b+(m+3)|0;j=a[3472+((c[e+12>>2]|0)+512+(d[g>>0]|0))>>0]|0;a[k>>0]=a[3472+(n+512+o)>>0]|0;a[g>>0]=j;g=m+l|0;m=b+g|0;j=c[e+20>>2]|0;k=b+(g+1)|0;o=d[k>>0]|0;a[m>>0]=a[3472+((c[e+16>>2]|0)+512+(d[m>>0]|0))>>0]|0;m=c[e+24>>2]|0;n=b+(g+2)|0;f=d[n>>0]|0;a[k>>0]=a[3472+(j+512+o)>>0]|0;k=b+(g+3)|0;o=a[3472+((c[e+28>>2]|0)+512+(d[k>>0]|0))>>0]|0;a[n>>0]=a[3472+(m+512+f)>>0]|0;a[k>>0]=o;g=g+l|0;k=b+g|0;o=c[e+36>>2]|0;n=b+(g+1)|0;f=d[n>>0]|0;a[k>>0]=a[3472+((c[e+32>>2]|0)+512+(d[k>>0]|0))>>0]|0;k=c[e+40>>2]|0;m=b+(g+2)|0;j=d[m>>0]|0;a[n>>0]=a[3472+(o+512+f)>>0]|0;n=b+(g+3)|0;f=a[3472+((c[e+44>>2]|0)+512+(d[n>>0]|0))>>0]|0;a[m>>0]=a[3472+(k+512+j)>>0]|0;a[n>>0]=f;g=g+l|0;l=b+g|0;n=c[e+52>>2]|0;f=b+(g+1)|0;m=d[f>>0]|0;a[l>>0]=a[3472+((c[e+48>>2]|0)+512+(d[l>>0]|0))>>0]|0;l=c[e+56>>2]|0;j=b+(g+2)|0;k=d[j>>0]|0;a[f>>0]=a[3472+(n+512+m)>>0]|0;g=b+(g+3)|0;f=a[3472+((c[e+60>>2]|0)+512+(d[g>>0]|0))>>0]|0;a[j>>0]=a[3472+(l+512+k)>>0]|0;a[g>>0]=f;i=h;return}function yc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;q=i;l=b+-1|0;k=a[b+1>>0]|0;m=d[l>>0]|0;n=d[b>>0]|0;r=m-n|0;p=f+4|0;do if((((r|0)>-1?r:0-r|0)>>>0<(c[p>>2]|0)>>>0?(o=d[b+-2>>0]|0,r=o-m|0,j=c[f+8>>2]|0,((r|0)>-1?r:0-r|0)>>>0<j>>>0):0)?(h=k&255,k=h-n|0,((k|0)>-1?k:0-k|0)>>>0<j>>>0):0)if(e>>>0<4){k=d[(c[f>>2]|0)+(e+-1)>>0]|0;k=Oa(~k,k+1|0,4-h+(n-m<<2)+o>>3)|0;o=a[3472+((n|512)-k)>>0]|0;a[l>>0]=a[3472+((m|512)+k)>>0]|0;a[b>>0]=o;break}else{a[l>>0]=(m+2+h+(o<<1)|0)>>>2;a[b>>0]=(n+2+(h<<1)+o|0)>>>2;break}while(0);l=b+g|0;m=b+(g+-1)|0;o=d[m>>0]|0;n=d[l>>0]|0;k=o-n|0;if(((k|0)>-1?k:0-k|0)>>>0>=(c[p>>2]|0)>>>0){i=q;return}k=d[b+(g+-2)>>0]|0;p=k-o|0;j=c[f+8>>2]|0;if(((p|0)>-1?p:0-p|0)>>>0>=j>>>0){i=q;return}h=d[b+(g+1)>>0]|0;g=h-n|0;if(((g|0)>-1?g:0-g|0)>>>0>=j>>>0){i=q;return}if(e>>>0<4){b=d[(c[f>>2]|0)+(e+-1)>>0]|0;b=Oa(~b,b+1|0,4-h+(n-o<<2)+k>>3)|0;g=a[3472+((n|512)-b)>>0]|0;a[m>>0]=a[3472+((o|512)+b)>>0]|0;a[l>>0]=g;i=q;return}else{a[m>>0]=(o+2+h+(k<<1)|0)>>>2;a[l>>0]=(n+2+(h<<1)+k|0)>>>2;i=q;return}}function zc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;v=i;if(e>>>0<4){n=d[(c[f>>2]|0)+(e+-1)>>0]|0;h=n+1|0;q=0-g|0;e=f+4|0;p=q<<1;o=f+8|0;n=~n;j=8;while(1){m=b+q|0;f=a[b+g>>0]|0;l=d[m>>0]|0;k=d[b>>0]|0;r=l-k|0;if((((r|0)>-1?r:0-r|0)>>>0<(c[e>>2]|0)>>>0?(t=d[b+p>>0]|0,r=t-l|0,s=c[o>>2]|0,((r|0)>-1?r:0-r|0)>>>0<s>>>0):0)?(u=f&255,f=u-k|0,((f|0)>-1?f:0-f|0)>>>0<s>>>0):0){r=Oa(n,h,4-u+(k-l<<2)+t>>3)|0;f=a[3472+((k|512)-r)>>0]|0;a[m>>0]=a[3472+((l|512)+r)>>0]|0;a[b>>0]=f}j=j+-1|0;if(!j)break;else b=b+1|0}i=v;return}else{o=0-g|0;m=f+4|0;n=o<<1;f=f+8|0;l=8;while(1){h=b+o|0;e=a[b+g>>0]|0;j=d[h>>0]|0;k=d[b>>0]|0;s=j-k|0;if((((s|0)>-1?s:0-s|0)>>>0<(c[m>>2]|0)>>>0?(p=d[b+n>>0]|0,s=p-j|0,q=c[f>>2]|0,((s|0)>-1?s:0-s|0)>>>0<q>>>0):0)?(r=e&255,e=r-k|0,((e|0)>-1?e:0-e|0)>>>0<q>>>0):0){a[h>>0]=(j+2+r+(p<<1)|0)>>>2;a[b>>0]=(k+2+(r<<1)+p|0)>>>2}l=l+-1|0;if(!l)break;else b=b+1|0}i=v;return}}function Ac(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;t=i;r=d[(c[f>>2]|0)+(e+-1)>>0]|0;s=r+1|0;l=0-g|0;h=f+4|0;q=l<<1;e=f+8|0;r=~r;l=b+l|0;m=a[b+g>>0]|0;k=d[l>>0]|0;j=d[b>>0]|0;u=k-j|0;f=c[h>>2]|0;if((((u|0)>-1?u:0-u|0)>>>0<f>>>0?(o=d[b+q>>0]|0,u=o-k|0,n=c[e>>2]|0,((u|0)>-1?u:0-u|0)>>>0<n>>>0):0)?(p=m&255,m=p-j|0,((m|0)>-1?m:0-m|0)>>>0<n>>>0):0){p=Oa(r,s,4-p+(j-k<<2)+o>>3)|0;f=a[3472+((j|512)-p)>>0]|0;a[l>>0]=a[3472+((k|512)+p)>>0]|0;a[b>>0]=f;f=c[h>>2]|0}m=b+1|0;j=b+(1-g)|0;k=d[j>>0]|0;l=d[m>>0]|0;p=k-l|0;if(((p|0)>-1?p:0-p|0)>>>0>=f>>>0){i=t;return}h=d[b+(q|1)>>0]|0;p=h-k|0;f=c[e>>2]|0;if(((p|0)>-1?p:0-p|0)>>>0>=f>>>0){i=t;return}e=d[b+(g+1)>>0]|0;p=e-l|0;if(((p|0)>-1?p:0-p|0)>>>0>=f>>>0){i=t;return}o=Oa(r,s,4-e+(l-k<<2)+h>>3)|0;p=a[3472+((l|512)-o)>>0]|0;a[j>>0]=a[3472+((k|512)+o)>>0]|0;a[m>>0]=p;i=t;return}function Bc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;r=i;p=c[b+4>>2]|0;q=c[b+8>>2]|0;if(!((d|0)==0|(d|0)==5)?(c[a+3384>>2]|0)==0:0)f=0;else{g=a+1220|0;e=0;do{f=ic(g,e)|0;e=e+1|0}while(e>>>0<16&(f|0)==0)}l=a+1176|0;n=c[l>>2]|0;if(n){m=c[a+1212>>2]|0;e=0;j=0;g=0;do{if(c[m+(j*216|0)+196>>2]|0)break;j=j+1|0;e=e+1|0;o=(e|0)==(p|0);g=(o&1)+g|0;e=o?0:e}while(j>>>0<n>>>0);if((j|0)!=(n|0)){o=a+1212|0;n=c[o>>2]|0;j=Z(g,p)|0;if(e){l=a+1204|0;h=e;do{h=h+-1|0;m=h+j|0;Cc(n+(m*216|0)|0,b,g,h,d,f);c[n+(m*216|0)+196>>2]=1;c[l>>2]=(c[l>>2]|0)+1}while((h|0)!=0)}e=e+1|0;if(e>>>0<p>>>0){m=a+1204|0;do{l=e+j|0;k=n+(l*216|0)+196|0;if(!(c[k>>2]|0)){Cc(n+(l*216|0)|0,b,g,e,d,f);c[k>>2]=1;c[m>>2]=(c[m>>2]|0)+1}e=e+1|0}while((e|0)!=(p|0))}if(g){if(p){n=g+-1|0;h=Z(n,p)|0;e=a+1204|0;l=0-p|0;k=0;do{m=n;j=(c[o>>2]|0)+((k+h|0)*216|0)|0;while(1){Cc(j,b,m,k,d,f);c[j+196>>2]=1;c[e>>2]=(c[e>>2]|0)+1;if(!m)break;else{m=m+-1|0;j=j+(l*216|0)|0}}k=k+1|0}while((k|0)!=(p|0))}}else g=0;g=g+1|0;if(g>>>0>=q>>>0){i=r;return 0}m=a+1204|0;if(!p){i=r;return 0}do{e=c[o>>2]|0;l=Z(g,p)|0;k=0;do{h=k+l|0;j=e+(h*216|0)+196|0;if(!(c[j>>2]|0)){Cc(e+(h*216|0)|0,b,g,k,d,f);c[j>>2]=1;c[m>>2]=(c[m>>2]|0)+1}k=k+1|0}while((k|0)!=(p|0));g=g+1|0}while((g|0)!=(q|0));i=r;return 0}}if((d|0)==2|(d|0)==7)if((c[a+3384>>2]|0)==0|(f|0)==0)g=13;else g=14;else if(!f)g=13;else g=14;if((g|0)==13)id(c[b>>2]|0,128,Z(p*384|0,q)|0);else if((g|0)==14)hd(c[b>>2]|0,f,Z(p*384|0,q)|0);g=c[l>>2]|0;c[a+1204>>2]=g;if(!g){i=r;return 0}e=c[a+1212>>2]|0;f=0;do{c[e+(f*216|0)+8>>2]=1;f=f+1|0}while(f>>>0<g>>>0);i=r;return 0}function Cc(b,e,f,g,h,j){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;j=j|0;var k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=0,sa=0,ta=0;sa=i;i=i+480|0;qa=sa+96|0;ra=sa+32|0;m=sa+24|0;n=sa;na=c[e+4>>2]|0;u=c[e+8>>2]|0;Na(e,(Z(na,f)|0)+g|0);p=c[e>>2]|0;k=f<<4;l=g<<4;o=(Z(f<<8,na)|0)+l|0;c[b+20>>2]=40;c[b+8>>2]=0;c[b>>2]=6;c[b+12>>2]=0;c[b+16>>2]=0;c[b+24>>2]=0;do if((h|0)==2|(h|0)==7)id(qa,0,384);else{c[m>>2]=0;c[n+4>>2]=na;c[n+8>>2]=u;c[n>>2]=j;if(!j){id(qa,0,384);break}dc(qa,m,n,l,k,0,0,16,16);sc(e,qa);i=sa;return}while(0);id(ra,0,64);if((f|0)!=0?(c[b+((0-na|0)*216|0)+196>>2]|0)!=0:0){v=o-(na<<4)|0;E=v|1;D=v|3;E=(d[p+E>>0]|0)+(d[p+v>>0]|0)+(d[p+(E+1)>>0]|0)+(d[p+D>>0]|0)|0;$=v|7;D=(d[p+(D+2)>>0]|0)+(d[p+(D+1)>>0]|0)+(d[p+(D+3)>>0]|0)+(d[p+$>>0]|0)|0;F=(d[p+($+2)>>0]|0)+(d[p+($+1)>>0]|0)+(d[p+($+3)>>0]|0)+(d[p+($+4)>>0]|0)|0;v=(d[p+($+6)>>0]|0)+(d[p+($+5)>>0]|0)+(d[p+($+7)>>0]|0)+(d[p+(v|15)>>0]|0)|0;$=D+E|0;c[ra>>2]=F+$+(c[ra>>2]|0)+v;s=ra+4|0;c[s>>2]=$-F-v+(c[s>>2]|0);s=1}else{E=0;D=0;F=0;v=0;s=0}if((u+-1|0)!=(f|0)?(c[b+(na*216|0)+196>>2]|0)!=0:0){z=o+(na<<8)|0;w=z|1;x=z|3;w=(d[p+w>>0]|0)+(d[p+z>>0]|0)+(d[p+(w+1)>>0]|0)+(d[p+x>>0]|0)|0;r=z|7;x=(d[p+(x+2)>>0]|0)+(d[p+(x+1)>>0]|0)+(d[p+(x+3)>>0]|0)+(d[p+r>>0]|0)|0;y=(d[p+(r+2)>>0]|0)+(d[p+(r+1)>>0]|0)+(d[p+(r+3)>>0]|0)+(d[p+(r+4)>>0]|0)|0;z=(d[p+(r+6)>>0]|0)+(d[p+(r+5)>>0]|0)+(d[p+(r+7)>>0]|0)+(d[p+(z|15)>>0]|0)|0;r=x+w|0;c[ra>>2]=y+r+(c[ra>>2]|0)+z;t=ra+4|0;c[t>>2]=r-y-z+(c[t>>2]|0);t=1;r=s+1|0}else{t=0;w=0;x=0;y=0;z=0;r=s}if((g|0)!=0?(c[b+-20>>2]|0)!=0:0){_=o+-1|0;$=na<<4;j=na<<5;ma=na*48|0;C=(d[p+(_+$)>>0]|0)+(d[p+_>>0]|0)+(d[p+(_+j)>>0]|0)+(d[p+(_+ma)>>0]|0)|0;h=na<<6;_=_+h|0;B=(d[p+(_+$)>>0]|0)+(d[p+_>>0]|0)+(d[p+(_+j)>>0]|0)+(d[p+(_+ma)>>0]|0)|0;_=_+h|0;A=(d[p+(_+$)>>0]|0)+(d[p+_>>0]|0)+(d[p+(_+j)>>0]|0)+(d[p+(_+ma)>>0]|0)|0;h=_+h|0;ma=(d[p+(h+$)>>0]|0)+(d[p+h>>0]|0)+(d[p+(h+j)>>0]|0)+(d[p+(h+ma)>>0]|0)|0;h=B+C|0;c[ra>>2]=A+h+(c[ra>>2]|0)+ma;j=ra+16|0;c[j>>2]=h-A-ma+(c[j>>2]|0);j=r+1|0;h=1}else{j=r;C=0;B=0;A=0;ma=0;h=0}do if((na+-1|0)!=(g|0)?(c[b+412>>2]|0)!=0:0){$=o+16|0;n=na<<4;m=na<<5;o=na*48|0;b=(d[p+($+n)>>0]|0)+(d[p+$>>0]|0)+(d[p+($+m)>>0]|0)+(d[p+($+o)>>0]|0)|0;q=na<<6;$=$+q|0;l=(d[p+($+n)>>0]|0)+(d[p+$>>0]|0)+(d[p+($+m)>>0]|0)+(d[p+($+o)>>0]|0)|0;$=$+q|0;k=(d[p+($+n)>>0]|0)+(d[p+$>>0]|0)+(d[p+($+m)>>0]|0)+(d[p+($+o)>>0]|0)|0;q=$+q|0;o=(d[p+(q+n)>>0]|0)+(d[p+q>>0]|0)+(d[p+(q+m)>>0]|0)+(d[p+(q+o)>>0]|0)|0;p=j+1|0;q=h+1|0;j=l+b|0;c[ra>>2]=k+j+(c[ra>>2]|0)+o;m=ra+16|0;j=j-k-o+(c[m>>2]|0)|0;c[m>>2]=j;m=(r|0)==0;n=(h|0)!=0;if(!(m&n)){if(!m){m=1;j=p;h=q;l=21;break}}else c[ra+4>>2]=A+ma+B+C-b-l-k-o>>5;m=1;o=(s|0)!=0;b=(t|0)!=0;h=q;l=27}else l=17;while(0);if((l|0)==17){n=(h|0)!=0;if(!r){m=0;p=j;l=23}else{m=0;l=21}}if((l|0)==21){p=ra+4|0;c[p>>2]=c[p>>2]>>r+3;p=j;l=23}do if((l|0)==23){j=(h|0)==0;o=(s|0)!=0;b=(t|0)!=0;if(j&o&b){c[ra+16>>2]=F+v+D+E-z-y-x-w>>5;pa=m;h=p;oa=n;o=1;b=1;break}if(j){pa=m;h=p;oa=n}else{j=c[ra+16>>2]|0;l=27}}while(0);if((l|0)==27){c[ra+16>>2]=j>>h+3;pa=m;h=p;oa=n}if((h|0)==1)c[ra>>2]=c[ra>>2]>>4;else if((h|0)==2)c[ra>>2]=c[ra>>2]>>5;else if((h|0)==3)c[ra>>2]=(c[ra>>2]|0)*21>>10;else c[ra>>2]=c[ra>>2]>>6;Dc(ra);n=0;j=qa;m=ra;while(1){h=c[m+((n>>>2&3)<<2)>>2]|0;if((h|0)<0)h=0;else h=(h|0)>255?-1:h&255;a[j>>0]=h;h=n+1|0;if((h|0)==256)break;else{n=h;j=j+1|0;m=(h&63|0)==0?m+16|0:m}}ta=Z(u,na)|0;V=na<<3;Y=0-V|0;G=Y|1;_=G+1|0;$=Y|3;aa=$+1|0;ba=$+2|0;ca=$+3|0;da=Y|7;W=ra+4|0;ka=na<<6;H=ka|1;ea=H+1|0;fa=ka|3;ga=fa+1|0;ha=fa+2|0;ia=fa+3|0;ja=ka|7;I=V+-1|0;U=na<<4;J=U+-1|0;K=J+V|0;L=J+U|0;M=L+V|0;N=L+U|0;O=N+V|0;X=ra+16|0;P=V+8|0;Q=U|8;R=Q+V|0;S=Q+U|0;T=S+V|0;U=S+U|0;V=U+V|0;la=ta<<6;q=E;p=D;h=F;t=v;n=w;j=x;l=y;u=z;F=0;m=C;k=B;r=A;s=ma;E=(c[e>>2]|0)+((Z(f<<6,na)|0)+(g<<3)+(ta<<8))|0;while(1){id(ra,0,64);if(o){q=(d[E+G>>0]|0)+(d[E+Y>>0]|0)|0;p=(d[E+$>>0]|0)+(d[E+_>>0]|0)|0;z=(d[E+ba>>0]|0)+(d[E+aa>>0]|0)|0;A=(d[E+da>>0]|0)+(d[E+ca>>0]|0)|0;t=p+q|0;c[ra>>2]=z+t+(c[ra>>2]|0)+A;c[W>>2]=t-z-A+(c[W>>2]|0);t=1}else{z=h;A=t;t=0}if(b){B=(d[E+H>>0]|0)+(d[E+ka>>0]|0)|0;C=(d[E+fa>>0]|0)+(d[E+ea>>0]|0)|0;D=(d[E+ha>>0]|0)+(d[E+ga>>0]|0)|0;u=(d[E+ja>>0]|0)+(d[E+ia>>0]|0)|0;h=C+B|0;c[ra>>2]=D+h+(c[ra>>2]|0)+u;c[W>>2]=h-D-u+(c[W>>2]|0);h=t+1|0}else{B=n;C=j;D=l;h=t}if(oa){v=(d[E+I>>0]|0)+(d[E+-1>>0]|0)|0;w=(d[E+K>>0]|0)+(d[E+J>>0]|0)|0;x=(d[E+M>>0]|0)+(d[E+L>>0]|0)|0;y=(d[E+O>>0]|0)+(d[E+N>>0]|0)|0;t=w+v|0;c[ra>>2]=x+t+(c[ra>>2]|0)+y;c[X>>2]=t-x-y+(c[X>>2]|0);t=h+1|0;s=1}else{t=h;v=m;w=k;x=r;y=s;s=0}do if(pa){l=(d[E+P>>0]|0)+(d[E+8>>0]|0)|0;m=(d[E+R>>0]|0)+(d[E+Q>>0]|0)|0;j=(d[E+T>>0]|0)+(d[E+S>>0]|0)|0;n=(d[E+V>>0]|0)+(d[E+U>>0]|0)|0;t=t+1|0;s=s+1|0;k=m+l|0;c[ra>>2]=j+k+(c[ra>>2]|0)+n;k=k-j-n+(c[X>>2]|0)|0;c[X>>2]=k;r=(h|0)==0;if(!(r&oa))if(r){l=54;break}else{l=49;break}else{c[W>>2]=x+y+w+v-l-m-j-n>>4;l=54;break}}else if(!h){r=s;l=50}else l=49;while(0);if((l|0)==49){c[W>>2]=c[W>>2]>>h+2;r=s;l=50}do if((l|0)==50){l=0;s=(r|0)==0;if(s&o&b){c[X>>2]=z+A+p+q-u-D-C-B>>4;break}if(!s){k=c[X>>2]|0;s=r;l=54}}while(0);if((l|0)==54)c[X>>2]=k>>s+2;if((t|0)==1)c[ra>>2]=c[ra>>2]>>3;else if((t|0)==2)c[ra>>2]=c[ra>>2]>>4;else if((t|0)==3)c[ra>>2]=(c[ra>>2]|0)*21>>9;else c[ra>>2]=c[ra>>2]>>5;Dc(ra);s=0;r=qa+((F<<6)+256)|0;k=ra;while(1){t=c[k+((s>>>1&3)<<2)>>2]|0;if((t|0)<0)t=0;else t=(t|0)>255?-1:t&255;a[r>>0]=t;t=s+1|0;if((t|0)==64)break;else{s=t;r=r+1|0;k=(t&15|0)==0?k+16|0:k}}F=F+1|0;if((F|0)==2)break;else{h=z;t=A;n=B;j=C;l=D;m=v;k=w;r=x;s=y;E=E+la|0}}sc(e,qa);i=sa;return}function Dc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0;h=i;f=a+4|0;b=c[f>>2]|0;g=a+16|0;d=c[g>>2]|0;e=c[a>>2]|0;if(!(b|d)){c[a+60>>2]=e;c[a+56>>2]=e;c[a+52>>2]=e;c[a+48>>2]=e;c[a+44>>2]=e;c[a+40>>2]=e;c[a+36>>2]=e;c[a+32>>2]=e;c[a+28>>2]=e;c[a+24>>2]=e;c[a+20>>2]=e;c[g>>2]=e;c[a+12>>2]=e;c[a+8>>2]=e;c[f>>2]=e;i=h;return}else{k=b+e|0;g=b>>1;j=g+e|0;g=e-g|0;b=e-b|0;c[a>>2]=d+k;e=d>>1;c[a+16>>2]=e+k;c[a+32>>2]=k-e;c[a+48>>2]=k-d;c[f>>2]=d+j;c[a+20>>2]=e+j;c[a+36>>2]=j-e;c[a+52>>2]=j-d;c[a+8>>2]=d+g;c[a+24>>2]=e+g;c[a+40>>2]=g-e;c[a+56>>2]=g-d;c[a+12>>2]=d+b;c[a+28>>2]=e+b;c[a+44>>2]=b-e;c[a+60>>2]=b-d;i=h;return}}function Ec(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0;h=i;id(b,0,952);d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b>>2]=d&1;do if(d){d=jb(a,8)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+4>>2]=d;if((d|0)==255){d=jb(a,16)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+8>>2]=d;d=jb(a,16)|0;if((d|0)==-1){d=1;i=h;return d|0}else{c[b+12>>2]=d;break}}}while(0);d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b+16>>2]=d&1;do if(d){d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}else{c[b+20>>2]=(d|0)==1&1;break}}while(0);d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b+24>>2]=d&1;do if(d){d=jb(a,3)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+28>>2]=d;d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+32>>2]=(d|0)==1&1;d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b+36>>2]=d&1;if(!d){c[b+40>>2]=2;c[b+44>>2]=2;c[b+48>>2]=2;break}d=jb(a,8)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+40>>2]=d;
d=jb(a,8)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+44>>2]=d;d=jb(a,8)|0;if((d|0)==-1){d=1;i=h;return d|0}else{c[b+48>>2]=d;break}}else{c[b+28>>2]=5;c[b+40>>2]=2;c[b+44>>2]=2;c[b+48>>2]=2}while(0);d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b+52>>2]=d&1;if(d){d=b+56|0;e=nb(a,d)|0;if(e){d=e;i=h;return d|0}if((c[d>>2]|0)>>>0>5){d=1;i=h;return d|0}d=b+60|0;e=nb(a,d)|0;if(e){d=e;i=h;return d|0}if((c[d>>2]|0)>>>0>5){d=1;i=h;return d|0}}d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b+64>>2]=d&1;do if(d){d=kb(a)|0;if((lb(a,32)|0)==-1|(d|0)==0){d=1;i=h;return d|0}c[b+68>>2]=d;d=kb(a)|0;if((lb(a,32)|0)==-1|(d|0)==0){d=1;i=h;return d|0}c[b+72>>2]=d;d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}else{c[b+76>>2]=(d|0)==1&1;break}}while(0);d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;f=b+80|0;c[f>>2]=d&1;if(d){e=Fc(a,b+84|0)|0;if(e){d=e;i=h;return d|0}}else{c[b+84>>2]=1;c[b+96>>2]=288000001;c[b+224>>2]=288000001;c[b+480>>2]=24;c[b+484>>2]=24;c[b+488>>2]=24;c[b+492>>2]=24}e=jb(a,1)|0;if((e|0)==-1){d=1;i=h;return d|0}e=(e|0)==1;d=b+496|0;c[d>>2]=e&1;if(e){e=Fc(a,b+500|0)|0;if(e){d=e;i=h;return d|0}}else{c[b+500>>2]=1;c[b+512>>2]=240000001;c[b+640>>2]=240000001;c[b+896>>2]=24;c[b+900>>2]=24;c[b+904>>2]=24;c[b+908>>2]=24}if(!((c[f>>2]|0)==0?(c[d>>2]|0)==0:0))g=46;do if((g|0)==46){d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}else{c[b+912>>2]=(d|0)==1&1;break}}while(0);d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+916>>2]=(d|0)==1&1;d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}d=(d|0)==1;c[b+920>>2]=d&1;do if(d){d=jb(a,1)|0;if((d|0)==-1){d=1;i=h;return d|0}c[b+924>>2]=(d|0)==1&1;e=b+928|0;d=nb(a,e)|0;if(d){i=h;return d|0}if((c[e>>2]|0)>>>0>16){d=1;i=h;return d|0}e=b+932|0;d=nb(a,e)|0;if(d){i=h;return d|0}if((c[e>>2]|0)>>>0>16){d=1;i=h;return d|0}e=b+936|0;d=nb(a,e)|0;if(d){i=h;return d|0}if((c[e>>2]|0)>>>0>16){d=1;i=h;return d|0}e=b+940|0;d=nb(a,e)|0;if(d){i=h;return d|0}if((c[e>>2]|0)>>>0>16){d=1;i=h;return d|0}d=nb(a,b+944|0)|0;if(d){i=h;return d|0}d=nb(a,b+948|0)|0;if(!d)break;i=h;return d|0}else{c[b+924>>2]=1;c[b+928>>2]=2;c[b+932>>2]=1;c[b+936>>2]=16;c[b+940>>2]=16;c[b+944>>2]=16;c[b+948>>2]=16}while(0);d=0;i=h;return d|0}function Fc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0;k=i;d=nb(a,b)|0;if(d){i=k;return d|0}d=(c[b>>2]|0)+1|0;c[b>>2]=d;if(d>>>0>32){d=1;i=k;return d|0}d=jb(a,4)|0;if((d|0)==-1){d=1;i=k;return d|0}j=b+4|0;c[j>>2]=d;e=jb(a,4)|0;if((e|0)==-1){d=1;i=k;return d|0}h=b+8|0;c[h>>2]=e;a:do if(c[b>>2]|0){g=0;while(1){f=b+(g<<2)+12|0;d=nb(a,f)|0;if(d){e=17;break}e=c[f>>2]|0;if((e|0)==-1){d=1;e=17;break}d=e+1|0;c[f>>2]=d;c[f>>2]=d<<(c[j>>2]|0)+6;f=b+(g<<2)+140|0;d=nb(a,f)|0;if(d){e=17;break}e=c[f>>2]|0;if((e|0)==-1){d=1;e=17;break}e=e+1|0;c[f>>2]=e;c[f>>2]=e<<(c[h>>2]|0)+4;e=jb(a,1)|0;if((e|0)==-1){d=1;e=17;break}c[b+(g<<2)+268>>2]=(e|0)==1&1;g=g+1|0;if(g>>>0>=(c[b>>2]|0)>>>0)break a}if((e|0)==17){i=k;return d|0}}while(0);d=jb(a,5)|0;if((d|0)==-1){d=1;i=k;return d|0}c[b+396>>2]=d+1;d=jb(a,5)|0;if((d|0)==-1){d=1;i=k;return d|0}c[b+400>>2]=d+1;d=jb(a,5)|0;if((d|0)==-1){d=1;i=k;return d|0}c[b+404>>2]=d+1;d=jb(a,5)|0;if((d|0)==-1){d=1;i=k;return d|0}c[b+408>>2]=d;d=0;i=k;return d|0}function Gc(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;p=i;a:do if(!(c[d+284>>2]|0))o=0;else{h=0;while(1){j=c[d+(h*20|0)+288>>2]|0;if((j|0)==5){o=1;break a}else if(!j)break;h=h+1|0}o=0}while(0);j=c[b+16>>2]|0;if((j|0)==1){if((c[e>>2]|0)!=5){f=c[a+12>>2]|0;if((c[a+8>>2]|0)>>>0>(c[d+12>>2]|0)>>>0)f=(c[b+12>>2]|0)+f|0}else f=0;m=c[b+36>>2]|0;h=(m|0)==0;if(h)j=0;else j=(c[d+12>>2]|0)+f|0;e=(c[e+4>>2]|0)==0;k=((e&(j|0)!=0)<<31>>31)+j|0;l=(k|0)!=0;if(l){g=k+-1|0;n=(g>>>0)%(m>>>0)|0;g=(g>>>0)/(m>>>0)|0}else{n=0;g=0}if(h)j=0;else{k=c[b+40>>2]|0;j=0;h=0;do{j=(c[k+(h<<2)>>2]|0)+j|0;h=h+1|0}while(h>>>0<m>>>0)}if(l){g=Z(j,g)|0;k=c[b+40>>2]|0;j=0;do{g=(c[k+(j<<2)>>2]|0)+g|0;j=j+1|0}while(j>>>0<=n>>>0)}else g=0;if(e)j=(c[b+28>>2]|0)+g|0;else j=g;g=(c[d+32>>2]|0)+(c[b+32>>2]|0)|0;h=a+12|0;if(!o){b=((g|0)<0?g:0)+j+(c[d+28>>2]|0)|0;c[h>>2]=f;c[a+8>>2]=c[d+12>>2];i=p;return b|0}else{c[h>>2]=0;c[a+8>>2]=0;b=0;i=p;return b|0}}else if(!j){if((c[e>>2]|0)!=5){h=c[a>>2]|0;j=c[d+20>>2]|0;if(h>>>0>j>>>0?(k=c[b+20>>2]|0,(h-j|0)>>>0>=k>>>1>>>0):0){h=(c[a+4>>2]|0)+k|0;k=a}else{k=a;m=11}}else{c[a+4>>2]=0;c[a>>2]=0;j=c[d+20>>2]|0;h=0;k=a;m=11}do if((m|0)==11){if(j>>>0>h>>>0?(g=c[b+20>>2]|0,(j-h|0)>>>0>g>>>1>>>0):0){h=(c[a+4>>2]|0)-g|0;break}h=c[a+4>>2]|0}while(0);if(!(c[e+4>>2]|0)){b=c[d+24>>2]|0;b=j+h+((b|0)<0?b:0)|0;i=p;return b|0}c[a+4>>2]=h;f=c[d+24>>2]|0;g=(f|0)<0;if(!o){c[k>>2]=j;b=j+h+(g?f:0)|0;i=p;return b|0}else{c[a+4>>2]=0;c[k>>2]=g?0-f|0:0;b=0;i=p;return b|0}}else{if((c[e>>2]|0)==5){k=0;g=0;f=a+12|0}else{j=c[d+12>>2]|0;f=a+12|0;h=c[f>>2]|0;if((c[a+8>>2]|0)>>>0>j>>>0)h=(c[b+12>>2]|0)+h|0;k=h;g=(j+h<<1)+(((c[e+4>>2]|0)==0)<<31>>31)|0}if(!o){c[f>>2]=k;c[a+8>>2]=c[d+12>>2];b=g;i=p;return b|0}else{c[f>>2]=0;c[a+8>>2]=0;b=0;i=p;return b|0}}return 0}function Hc(a,b){a=a|0;b=b|0;var d=0,e=0;d=i;Ab(a);e=fd(2112)|0;c[a+3376>>2]=e;if(e)if(!b)b=0;else{c[a+1216>>2]=1;b=0}else b=1;i=d;return b|0}function Ic(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;r=i;i=i+208|0;l=r+204|0;p=r;g=r+112|0;h=r+40|0;q=r+16|0;j=r+12|0;n=r+8|0;c[j>>2]=0;o=a+3344|0;if((c[o>>2]|0)!=0?(c[a+3348>>2]|0)==(b|0):0){b=a+3356|0;c[q+0>>2]=c[b+0>>2];c[q+4>>2]=c[b+4>>2];c[q+8>>2]=c[b+8>>2];c[q+12>>2]=c[b+12>>2];c[q+4>>2]=c[q>>2];c[q+8>>2]=0;c[q+16>>2]=0;c[f>>2]=c[a+3352>>2]}else k=4;do if((k|0)==4)if(!(Pa(b,d,q,f)|0)){d=a+3356|0;c[d+0>>2]=c[q+0>>2];c[d+4>>2]=c[q+4>>2];c[d+8>>2]=c[q+8>>2];c[d+12>>2]=c[q+12>>2];c[d+16>>2]=c[q+16>>2];c[a+3352>>2]=c[f>>2];c[a+3348>>2]=b;break}else{n=3;i=r;return n|0}while(0);c[o>>2]=0;if(sb(q,p)|0){n=3;i=r;return n|0}if(((c[p>>2]|0)+-1|0)>>>0>11){n=0;i=r;return n|0}b=Ib(q,p,a,j)|0;if(!b){do if(!(c[j>>2]|0))k=19;else{if((c[a+1184>>2]|0)!=0?(c[a+16>>2]|0)!=0:0){if(c[a+3380>>2]|0){n=3;i=r;return n|0}if(!(c[a+1188>>2]|0)){m=a+1220|0;n=a+1336|0;c[n>>2]=jc(m)|0;nc(m);Bc(a,n,0)|0}else Bc(a,a+1336|0,c[a+1372>>2]|0)|0;c[f>>2]=0;c[o>>2]=1;c[a+1180>>2]=0;g=a+1336|0;b=a+1360|0;break}c[a+1188>>2]=0;c[a+1180>>2]=0;k=19}while(0);do if((k|0)==19){b=c[p>>2]|0;if((b|0)==8)if(!(Sa(q,h)|0)){Cb(a,h)|0;n=0;i=r;return n|0}else{n=h+20|0;gd(c[n>>2]|0);c[n>>2]=0;n=h+24|0;gd(c[n>>2]|0);c[n>>2]=0;n=h+28|0;gd(c[n>>2]|0);c[n>>2]=0;n=h+44|0;gd(c[n>>2]|0);c[n>>2]=0;n=3;i=r;return n|0}else if((b|0)==7)if(!(Qa(q,g)|0)){Bb(a,g)|0;n=0;i=r;return n|0}else{n=g+40|0;gd(c[n>>2]|0);c[n>>2]=0;n=g+84|0;gd(c[n>>2]|0);c[n>>2]=0;n=3;i=r;return n|0}else if((b|0)==1|(b|0)==5){k=a+1180|0;if(c[a+1180>>2]|0){n=0;i=r;return n|0}c[a+1184>>2]=1;if(Fb(a)|0){c[a+1204>>2]=0;c[a+1208>>2]=e;Ua(q,l)|0;j=a+8|0;d=c[j>>2]|0;b=Db(a,c[l>>2]|0,(c[p>>2]|0)==5&1)|0;if(b){c[a+4>>2]=256;c[a+12>>2]=0;c[j>>2]=32;c[a+16>>2]=0;c[a+3380>>2]=0;n=(b|0)==65535?5:4;i=r;return n|0}if((d|0)!=(c[j>>2]|0)){d=c[a+16>>2]|0;c[n>>2]=1;b=c[a>>2]|0;if(b>>>0<32)b=c[a+(b<<2)+20>>2]|0;else b=0;c[f>>2]=0;c[o>>2]=1;if((((((c[p>>2]|0)==5?(l=_a(n,q,d,c[a+12>>2]|0,5)|0,(c[n>>2]|l|0)==0):0)?(m=a+1220|0,!((c[a+1276>>2]|0)!=0|(b|0)==0)):0)?(c[b+52>>2]|0)==(c[d+52>>2]|0):0)?(c[b+56>>2]|0)==(c[d+56>>2]|0):0)?(c[b+88>>2]|0)==(c[d+88>>2]|0):0)qc(m);else c[a+1280>>2]=0;c[a>>2]=c[j>>2];n=2;i=r;return n|0}}if(c[a+3380>>2]|0){n=3;i=r;return n|0}h=a+1368|0;j=a+2356|0;b=a+16|0;if(Ta(q,j,c[b>>2]|0,c[a+12>>2]|0,p)|0){n=3;i=r;return n|0}if(!(Fb(a)|0))d=a+1220|0;else{d=a+1220|0;if((c[p>>2]|0)!=5?(oc(d,c[a+2368>>2]|0,(c[p+4>>2]|0)!=0&1,c[(c[b>>2]|0)+48>>2]|0)|0)!=0:0){n=3;i=r;return n|0}c[a+1336>>2]=jc(d)|0}od(h|0,j|0,988)|0;c[a+1188>>2]=1;b=a+1360|0;l=p;m=c[l+4>>2]|0;n=b;c[n>>2]=c[l>>2];c[n+4>>2]=m;Hb(a,c[a+1432>>2]|0);nc(d);if(gc(d,a+1436|0,c[a+1380>>2]|0,c[a+1412>>2]|0)|0){n=3;i=r;return n|0}g=a+1336|0;if($a(q,a,g,h)|0){ab(a,c[h>>2]|0);n=3;i=r;return n|0}if(Gb(a)|0){c[k>>2]=1;break}else{n=0;i=r;return n|0}}else{n=0;i=r;return n|0}}while(0);uc(g,c[a+1212>>2]|0);Eb(a);j=Gc(a+1284|0,c[a+16>>2]|0,a+1368|0,b)|0;d=a+1188|0;do if(c[d>>2]|0){h=a+1220|0;if(!(c[a+1364>>2]|0)){hc(h,0,g,c[a+1380>>2]|0,j,(c[b>>2]|0)==5&1,c[a+1208>>2]|0,c[a+1204>>2]|0)|0;break}else{hc(h,a+1644|0,g,c[a+1380>>2]|0,j,(c[b>>2]|0)==5&1,c[a+1208>>2]|0,c[a+1204>>2]|0)|0;break}}while(0);c[a+1184>>2]=0;c[d>>2]=0;n=1;i=r;return n|0}else if((b|0)==65520){n=4;i=r;return n|0}else{n=3;i=r;return n|0}return 0}function Jc(a){a=a|0;var b=0,d=0,e=0,f=0;f=i;e=0;do{d=a+(e<<2)+20|0;b=c[d>>2]|0;if(b){gd(c[b+40>>2]|0);c[(c[d>>2]|0)+40>>2]=0;gd(c[(c[d>>2]|0)+84>>2]|0);c[(c[d>>2]|0)+84>>2]=0;gd(c[d>>2]|0);c[d>>2]=0}e=e+1|0}while((e|0)!=32);e=0;do{d=a+(e<<2)+148|0;b=c[d>>2]|0;if(b){gd(c[b+20>>2]|0);c[(c[d>>2]|0)+20>>2]=0;gd(c[(c[d>>2]|0)+24>>2]|0);c[(c[d>>2]|0)+24>>2]=0;gd(c[(c[d>>2]|0)+28>>2]|0);c[(c[d>>2]|0)+28>>2]=0;gd(c[(c[d>>2]|0)+44>>2]|0);c[(c[d>>2]|0)+44>>2]=0;gd(c[d>>2]|0);c[d>>2]=0}e=e+1|0}while((e|0)!=256);b=a+3376|0;gd(c[b>>2]|0);c[b>>2]=0;b=a+1212|0;gd(c[b>>2]|0);c[b>>2]=0;b=a+1172|0;gd(c[b>>2]|0);c[b>>2]=0;mc(a+1220|0);i=f;return}function Kc(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=i;a=pc(a+1220|0)|0;if(!a){a=0;i=f;return a|0}c[b>>2]=c[a+4>>2];c[d>>2]=c[a+12>>2];c[e>>2]=c[a+8>>2];a=c[a>>2]|0;i=f;return a|0}function Lc(a){a=a|0;var b=0;b=i;a=c[a+16>>2]|0;if(!a){a=0;i=b;return a|0}a=c[a+52>>2]|0;i=b;return a|0}function Mc(a){a=a|0;var b=0;b=i;a=c[a+16>>2]|0;if(!a){a=0;i=b;return a|0}a=c[a+56>>2]|0;i=b;return a|0}function Nc(a){a=a|0;var b=0;b=i;qc(a+1220|0);i=b;return}function Oc(a){a=a|0;var b=0;b=i;a=(Jb(a)|0)==0&1;i=b;return a|0}function Pc(a){a=a|0;var b=0,d=0;d=i;a=c[a+16>>2]|0;if(((((a|0)!=0?(c[a+80>>2]|0)!=0:0)?(b=c[a+84>>2]|0,(b|0)!=0):0)?(c[b+24>>2]|0)!=0:0)?(c[b+32>>2]|0)!=0:0){a=1;i=d;return a|0}a=0;i=d;return a|0}function Qc(a){a=a|0;var b=0,d=0;d=i;a=c[a+16>>2]|0;if(((((a|0)!=0?(c[a+80>>2]|0)!=0:0)?(b=c[a+84>>2]|0,(b|0)!=0):0)?(c[b+24>>2]|0)!=0:0)?(c[b+36>>2]|0)!=0:0)a=c[b+48>>2]|0;else a=2;i=d;return a|0}function Rc(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;h=i;a=c[a+16>>2]|0;if((a|0)!=0?(c[a+60>>2]|0)!=0:0){c[b>>2]=1;b=a+64|0;c[d>>2]=c[b>>2]<<1;c[e>>2]=(c[a+52>>2]<<4)-((c[a+68>>2]|0)+(c[b>>2]|0)<<1);b=a+72|0;c[f>>2]=c[b>>2]<<1;a=(c[a+56>>2]<<4)-((c[a+76>>2]|0)+(c[b>>2]|0)<<1)|0;c[g>>2]=a;i=h;return}c[b>>2]=0;c[d>>2]=0;c[e>>2]=0;c[f>>2]=0;a=0;c[g>>2]=a;i=h;return}function Sc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;f=i;a=c[a+16>>2]|0;a:do if((((a|0)!=0?(c[a+80>>2]|0)!=0:0)?(e=c[a+84>>2]|0,(e|0)!=0):0)?(c[e>>2]|0)!=0:0){a=c[e+4>>2]|0;do switch(a|0){case 11:{e=11;a=15;break a}case 255:{a=c[e+8>>2]|0;e=c[e+12>>2]|0;g=(a|0)==0|(e|0)==0;e=g?0:e;a=g?0:a;break a}case 2:{e=11;a=12;break a}case 12:{e=33;a=64;break a}case 13:{e=99;a=160;break a}case 3:{e=11;a=10;break a}case 5:{e=33;a=40;break a}case 6:{e=11;a=24;break a}case 7:{e=11;a=20;break a}case 4:{e=11;a=16;break a}case 10:{e=11;a=18;break a}case 9:{e=33;a=80;break a}case 8:{e=11;a=32;break a}case 1:case 0:{e=a;break a}default:{e=0;a=0;break a}}while(0)}else{e=1;a=1}while(0);c[b>>2]=a;c[d>>2]=e;i=f;return}function Tc(a){a=a|0;a=c[a+16>>2]|0;if(!a)a=0;else a=c[a>>2]|0;return a|0}function Uc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;f=i;do if(a){d=fd(3396)|0;if(d){e=d+8|0;if(!(Hc(e,b)|0)){c[d>>2]=1;c[d+4>>2]=0;c[a>>2]=d;d=0;break}else{Jc(e);gd(d);d=-4;break}}else d=-4}else d=-1;while(0);i=f;return d|0}function Vc(a,b){a=a|0;b=b|0;var d=0,e=0;e=i;if((a|0)==0|(b|0)==0){a=-1;i=e;return a|0}d=a+8|0;if(!(c[a+24>>2]|0)){a=-6;i=e;return a|0}if(!(c[a+20>>2]|0)){a=-6;i=e;return a|0}c[b+4>>2]=(Lc(d)|0)<<4;c[b+8>>2]=(Mc(d)|0)<<4;c[b+12>>2]=Pc(d)|0;c[b+16>>2]=Qc(d)|0;Rc(d,b+28|0,b+32|0,b+36|0,b+40|0,b+44|0);Sc(d,b+20|0,b+24|0);c[b>>2]=Tc(d)|0;a=0;i=e;return a|0}function Wc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0;m=i;i=i+16|0;j=m;a:do if((!((b|0)==0|(d|0)==0)?(f=c[b>>2]|0,(f|0)!=0):0)?(g=c[b+4>>2]|0,(g|0)!=0):0)if((a|0)!=0?(e=c[a>>2]|0,(e|0)!=0):0){c[d>>2]=0;c[j>>2]=0;k=a+8|0;c[a+3392>>2]=c[b+12>>2];h=b+8|0;b=1;while(1){if((e|0)==2){l=8;break}e=Ic(k,f,g,c[h>>2]|0,j)|0;n=c[j>>2]|0;f=f+n|0;g=g-n|0;g=(g|0)<0?0:g;c[d>>2]=f;if((e|0)==4){e=(Oc(k)|0|g|0)==0;b=e?-2:b}else if((e|0)==5){b=-4;break a}else if((e|0)==2)break;else if((e|0)==1){l=13;break}if(!g)break a;e=c[a>>2]|0}if((l|0)==8){c[a>>2]=1;c[d>>2]=f+(c[j>>2]|0)}else if((l|0)==13){b=a+4|0;c[b>>2]=(c[b>>2]|0)+1;b=(g|0)==0?2:3;break}b=a+1288|0;if((c[b>>2]|0)!=0?(c[a+1244>>2]|0)!=(c[a+1248>>2]|0):0){c[b>>2]=0;c[a>>2]=2;b=3}else b=4}else b=-3;else b=-1;while(0);i=m;return b|0}function Xc(a){a=a|0;c[a>>2]=2;c[a+4>>2]=3;return}function Yc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0;h=i;i=i+16|0;f=h+8|0;e=h+4|0;g=h;if((a|0)==0|(b|0)==0){a=-1;i=h;return a|0}a=a+8|0;if(d)Nc(a);a=Kc(a,g,e,f)|0;if(!a){a=0;i=h;return a|0}c[b>>2]=a;c[b+4>>2]=c[g>>2];c[b+8>>2]=c[e>>2];c[b+12>>2]=c[f>>2];a=2;i=h;return a|0}function Zc(a){a=a|0;var b=0,d=0;d=i;b=jd(a)|0;c[1792]=b;c[1791]=b;c[1790]=a;c[1793]=b+a;i=d;return b|0}function _c(a){a=a|0;c[1790]=a;return}function $c(){var a=0;a=i;c[1786]=c[1791];c[1787]=c[1790];do bd()|0;while((c[1787]|0)!=0);i=a;return}function ad(){var a=0,b=0;b=i;if(Uc(7176,0)|0){da(7280)|0;a=c[1784]|0;if(a)kd(a)}else{c[1796]=1;c[1798]=1}i=b;return-1}function bd(){var a=0,b=0,d=0;b=i;c[1788]=c[1798];a=Wc(c[1794]|0,7144,7200)|0;switch(a|0){case 4:{if(Vc(c[1794]|0,7208)|0){a=-1;i=b;return a|0}c[1814]=(Z((c[1803]|0)*3|0,c[1804]|0)|0)>>>1;ra();a=c[1800]|0;c[1787]=(c[1786]|0)-a+(c[1787]|0);c[1786]=a;a=0;i=b;return a|0}case 2:{c[1787]=0;break}case 1:case-2:{c[1787]=0;i=b;return a|0}case 3:{d=c[1800]|0;c[1787]=(c[1786]|0)-d+(c[1787]|0);c[1786]=d;break}default:{i=b;return a|0}}c[1798]=(c[1798]|0)+1;if((Yc(c[1794]|0,7264,0)|0)!=2){i=b;return a|0}do{c[1796]=(c[1796]|0)+1;ca(c[1816]|0,c[1803]|0,c[1804]|0)}while((Yc(c[1794]|0,7264,0)|0)==2);i=b;return a|0}function cd(){var a=0,b=0;b=i;a=c[1784]|0;if(a)kd(a);i=b;return}function dd(){var a=0,b=0;b=i;i=i+16|0;a=b;Xc(a);i=b;return c[a>>2]|0}function ed(){var a=0,b=0;b=i;i=i+16|0;a=b;Xc(a);i=b;return c[a+4>>2]|0}function fd(a){a=a|0;var b=0;b=i;a=jd(a)|0;i=b;return a|0}function gd(a){a=a|0;var b=0;b=i;kd(a);i=b;return}function hd(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=i;od(a|0,b|0,c|0)|0;i=d;return}function id(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=i;nd(a|0,b&255|0,c|0)|0;i=d;return}function jd(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0;L=i;do if(a>>>0<245){if(a>>>0<11)p=16;else p=a+11&-8;a=p>>>3;l=c[1828]|0;k=l>>>a;if(k&3){g=(k&1^1)+a|0;b=g<<1;h=7352+(b<<2)|0;b=7352+(b+2<<2)|0;e=c[b>>2]|0;j=e+8|0;f=c[j>>2]|0;do if((h|0)!=(f|0)){if(f>>>0<(c[1832]|0)>>>0)ka();d=f+12|0;if((c[d>>2]|0)==(e|0)){c[d>>2]=h;c[b>>2]=f;break}else ka()}else c[1828]=l&~(1<<g);while(0);x=g<<3;c[e+4>>2]=x|3;x=e+(x|4)|0;c[x>>2]=c[x>>2]|1;x=j;i=L;return x|0}j=c[1830]|0;if(p>>>0>j>>>0){if(k){g=2<<a;g=k<<a&(g|0-g);g=(g&0-g)+-1|0;a=g>>>12&16;g=g>>>a;h=g>>>5&8;g=g>>>h;d=g>>>2&4;g=g>>>d;e=g>>>1&2;g=g>>>e;f=g>>>1&1;f=(h|a|d|e|f)+(g>>>f)|0;g=f<<1;e=7352+(g<<2)|0;g=7352+(g+2<<2)|0;d=c[g>>2]|0;a=d+8|0;h=c[a>>2]|0;do if((e|0)!=(h|0)){if(h>>>0<(c[1832]|0)>>>0)ka();j=h+12|0;if((c[j>>2]|0)==(d|0)){c[j>>2]=e;c[g>>2]=h;m=c[1830]|0;break}else ka()}else{c[1828]=l&~(1<<f);m=j}while(0);x=f<<3;k=x-p|0;c[d+4>>2]=p|3;b=d+p|0;c[d+(p|4)>>2]=k|1;c[d+x>>2]=k;if(m){e=c[1833]|0;g=m>>>3;h=g<<1;f=7352+(h<<2)|0;j=c[1828]|0;g=1<<g;if(j&g){j=7352+(h+2<<2)|0;h=c[j>>2]|0;if(h>>>0<(c[1832]|0)>>>0)ka();else{n=j;o=h}}else{c[1828]=j|g;n=7352+(h+2<<2)|0;o=f}c[n>>2]=e;c[o+12>>2]=e;c[e+8>>2]=o;c[e+12>>2]=f}c[1830]=k;c[1833]=b;x=a;i=L;return x|0}k=c[1829]|0;if(k){l=(k&0-k)+-1|0;w=l>>>12&16;l=l>>>w;v=l>>>5&8;l=l>>>v;x=l>>>2&4;l=l>>>x;j=l>>>1&2;l=l>>>j;m=l>>>1&1;m=c[7616+((v|w|x|j|m)+(l>>>m)<<2)>>2]|0;l=(c[m+4>>2]&-8)-p|0;j=m;while(1){d=c[j+16>>2]|0;if(!d){d=c[j+20>>2]|0;if(!d)break}j=(c[d+4>>2]&-8)-p|0;x=j>>>0<l>>>0;l=x?j:l;j=d;m=x?d:m}k=c[1832]|0;if(m>>>0<k>>>0)ka();b=m+p|0;if(m>>>0>=b>>>0)ka();a=c[m+24>>2]|0;g=c[m+12>>2]|0;do if((g|0)==(m|0)){h=m+20|0;j=c[h>>2]|0;if(!j){h=m+16|0;j=c[h>>2]|0;if(!j){e=0;break}}while(1){f=j+20|0;g=c[f>>2]|0;if(g){j=g;h=f;continue}f=j+16|0;g=c[f>>2]|0;if(!g)break;else{j=g;h=f}}if(h>>>0<k>>>0)ka();else{c[h>>2]=0;e=j;break}}else{f=c[m+8>>2]|0;if(f>>>0<k>>>0)ka();j=f+12|0;if((c[j>>2]|0)!=(m|0))ka();h=g+8|0;if((c[h>>2]|0)==(m|0)){c[j>>2]=g;c[h>>2]=f;e=g;break}else ka()}while(0);do if(a){j=c[m+28>>2]|0;h=7616+(j<<2)|0;if((m|0)==(c[h>>2]|0)){c[h>>2]=e;if(!e){c[1829]=c[1829]&~(1<<j);break}}else{if(a>>>0<(c[1832]|0)>>>0)ka();j=a+16|0;if((c[j>>2]|0)==(m|0))c[j>>2]=e;else c[a+20>>2]=e;if(!e)break}h=c[1832]|0;if(e>>>0<h>>>0)ka();c[e+24>>2]=a;j=c[m+16>>2]|0;do if(j)if(j>>>0<h>>>0)ka();else{c[e+16>>2]=j;c[j+24>>2]=e;break}while(0);f=c[m+20>>2]|0;if(f)if(f>>>0<(c[1832]|0)>>>0)ka();else{c[e+20>>2]=f;c[f+24>>2]=e;break}}while(0);if(l>>>0<16){x=l+p|0;c[m+4>>2]=x|3;x=m+(x+4)|0;c[x>>2]=c[x>>2]|1}else{c[m+4>>2]=p|3;c[m+(p|4)>>2]=l|1;c[m+(l+p)>>2]=l;d=c[1830]|0;if(d){e=c[1833]|0;g=d>>>3;h=g<<1;f=7352+(h<<2)|0;j=c[1828]|0;g=1<<g;if(j&g){j=7352+(h+2<<2)|0;h=c[j>>2]|0;if(h>>>0<(c[1832]|0)>>>0)ka();else{r=j;q=h}}else{c[1828]=j|g;r=7352+(h+2<<2)|0;q=f}c[r>>2]=e;c[q+12>>2]=e;c[e+8>>2]=q;c[e+12>>2]=f}c[1830]=l;c[1833]=b}x=m+8|0;i=L;return x|0}}}else if(a>>>0<=4294967231){a=a+11|0;p=a&-8;m=c[1829]|0;if(m){h=0-p|0;a=a>>>8;if(a)if(p>>>0>16777215)l=31;else{q=(a+1048320|0)>>>16&8;r=a<<q;o=(r+520192|0)>>>16&4;r=r<<o;l=(r+245760|0)>>>16&2;l=14-(o|q|l)+(r<<l>>>15)|0;l=p>>>(l+7|0)&1|l<<1}else l=0;j=c[7616+(l<<2)>>2]|0;a:do if(!j){a=0;k=0}else{if((l|0)==31)k=0;else k=25-(l>>>1)|0;f=h;a=0;e=p<<k;k=0;while(1){g=c[j+4>>2]&-8;h=g-p|0;if(h>>>0<f>>>0)if((g|0)==(p|0)){a=j;k=j;break a}else k=j;else h=f;r=c[j+20>>2]|0;j=c[j+(e>>>31<<2)+16>>2]|0;a=(r|0)==0|(r|0)==(j|0)?a:r;if(!j)break;else{f=h;e=e<<1}}}while(0);if((a|0)==0&(k|0)==0){a=2<<l;a=m&(a|0-a);if(!a)break;r=(a&0-a)+-1|0;n=r>>>12&16;r=r>>>n;m=r>>>5&8;r=r>>>m;o=r>>>2&4;r=r>>>o;q=r>>>1&2;r=r>>>q;a=r>>>1&1;a=c[7616+((m|n|o|q|a)+(r>>>a)<<2)>>2]|0}if(!a){n=h;m=k}else while(1){r=(c[a+4>>2]&-8)-p|0;j=r>>>0<h>>>0;h=j?r:h;k=j?a:k;j=c[a+16>>2]|0;if(j){a=j;continue}a=c[a+20>>2]|0;if(!a){n=h;m=k;break}}if((m|0)!=0?n>>>0<((c[1830]|0)-p|0)>>>0:0){k=c[1832]|0;if(m>>>0<k>>>0)ka();o=m+p|0;if(m>>>0>=o>>>0)ka();a=c[m+24>>2]|0;g=c[m+12>>2]|0;do if((g|0)==(m|0)){h=m+20|0;j=c[h>>2]|0;if(!j){h=m+16|0;j=c[h>>2]|0;if(!j){b=0;break}}while(1){f=j+20|0;g=c[f>>2]|0;if(g){j=g;h=f;continue}f=j+16|0;g=c[f>>2]|0;if(!g)break;else{j=g;h=f}}if(h>>>0<k>>>0)ka();else{c[h>>2]=0;b=j;break}}else{f=c[m+8>>2]|0;if(f>>>0<k>>>0)ka();j=f+12|0;if((c[j>>2]|0)!=(m|0))ka();h=g+8|0;if((c[h>>2]|0)==(m|0)){c[j>>2]=g;c[h>>2]=f;b=g;break}else ka()}while(0);do if(a){j=c[m+28>>2]|0;h=7616+(j<<2)|0;if((m|0)==(c[h>>2]|0)){c[h>>2]=b;if(!b){c[1829]=c[1829]&~(1<<j);break}}else{if(a>>>0<(c[1832]|0)>>>0)ka();j=a+16|0;if((c[j>>2]|0)==(m|0))c[j>>2]=b;else c[a+20>>2]=b;if(!b)break}h=c[1832]|0;if(b>>>0<h>>>0)ka();c[b+24>>2]=a;j=c[m+16>>2]|0;do if(j)if(j>>>0<h>>>0)ka();else{c[b+16>>2]=j;c[j+24>>2]=b;break}while(0);j=c[m+20>>2]|0;if(j)if(j>>>0<(c[1832]|0)>>>0)ka();else{c[b+20>>2]=j;c[j+24>>2]=b;break}}while(0);b:do if(n>>>0>=16){c[m+4>>2]=p|3;c[m+(p|4)>>2]=n|1;c[m+(n+p)>>2]=n;j=n>>>3;if(n>>>0<256){g=j<<1;d=7352+(g<<2)|0;h=c[1828]|0;j=1<<j;do if(!(h&j)){c[1828]=h|j;t=7352+(g+2<<2)|0;u=d}else{f=7352+(g+2<<2)|0;e=c[f>>2]|0;if(e>>>0>=(c[1832]|0)>>>0){t=f;u=e;break}ka()}while(0);c[t>>2]=o;c[u+12>>2]=o;c[m+(p+8)>>2]=u;c[m+(p+12)>>2]=d;break}d=n>>>8;if(d)if(n>>>0>16777215)f=31;else{w=(d+1048320|0)>>>16&8;x=d<<w;u=(x+520192|0)>>>16&4;x=x<<u;f=(x+245760|0)>>>16&2;f=14-(u|w|f)+(x<<f>>>15)|0;f=n>>>(f+7|0)&1|f<<1}else f=0;h=7616+(f<<2)|0;c[m+(p+28)>>2]=f;c[m+(p+20)>>2]=0;c[m+(p+16)>>2]=0;j=c[1829]|0;g=1<<f;if(!(j&g)){c[1829]=j|g;c[h>>2]=o;c[m+(p+24)>>2]=h;c[m+(p+12)>>2]=o;c[m+(p+8)>>2]=o;break}j=c[h>>2]|0;if((f|0)==31)d=0;else d=25-(f>>>1)|0;c:do if((c[j+4>>2]&-8|0)!=(n|0)){f=n<<d;while(1){g=j+(f>>>31<<2)+16|0;h=c[g>>2]|0;if(!h)break;if((c[h+4>>2]&-8|0)==(n|0)){v=h;break c}else{f=f<<1;j=h}}if(g>>>0<(c[1832]|0)>>>0)ka();else{c[g>>2]=o;c[m+(p+24)>>2]=j;c[m+(p+12)>>2]=o;c[m+(p+8)>>2]=o;break b}}else v=j;while(0);b=v+8|0;d=c[b>>2]|0;x=c[1832]|0;if(v>>>0>=x>>>0&d>>>0>=x>>>0){c[d+12>>2]=o;c[b>>2]=o;c[m+(p+8)>>2]=d;c[m+(p+12)>>2]=v;c[m+(p+24)>>2]=0;break}else ka()}else{x=n+p|0;c[m+4>>2]=x|3;x=m+(x+4)|0;c[x>>2]=c[x>>2]|1}while(0);x=m+8|0;i=L;return x|0}}}else p=-1;while(0);k=c[1830]|0;if(k>>>0>=p>>>0){d=k-p|0;b=c[1833]|0;if(d>>>0>15){c[1833]=b+p;c[1830]=d;c[b+(p+4)>>2]=d|1;c[b+k>>2]=d;c[b+4>>2]=p|3}else{c[1830]=0;c[1833]=0;c[b+4>>2]=k|3;x=b+(k+4)|0;c[x>>2]=c[x>>2]|1}x=b+8|0;i=L;return x|0}k=c[1831]|0;if(k>>>0>p>>>0){w=k-p|0;c[1831]=w;x=c[1834]|0;c[1834]=x+p;c[x+(p+4)>>2]=w|1;c[x+4>>2]=p|3;x=x+8|0;i=L;return x|0}do if(!(c[1946]|0)){k=ua(30)|0;if(!(k+-1&k)){c[1948]=k;c[1947]=k;c[1949]=-1;c[1950]=-1;c[1951]=0;c[1939]=0;c[1946]=(ta(0)|0)&-16^1431655768;break}else ka()}while(0);l=p+48|0;g=c[1948]|0;f=p+47|0;h=g+f|0;g=0-g|0;m=h&g;if(m>>>0<=p>>>0){x=0;i=L;return x|0}a=c[1938]|0;if((a|0)!=0?(u=c[1936]|0,v=u+m|0,v>>>0<=u>>>0|v>>>0>a>>>0):0){x=0;i=L;return x|0}d:do if(!(c[1939]&4)){j=c[1834]|0;e:do if(j){a=7760|0;while(1){k=c[a>>2]|0;if(k>>>0<=j>>>0?(s=a+4|0,(k+(c[s>>2]|0)|0)>>>0>j>>>0):0)break;a=c[a+8>>2]|0;if(!a){A=181;break e}}if(a){k=h-(c[1831]|0)&g;if(k>>>0<2147483647){j=ma(k|0)|0;if((j|0)==((c[a>>2]|0)+(c[s>>2]|0)|0))A=190;else A=191}else k=0}else A=181}else A=181;while(0);do if((A|0)==181){j=ma(0)|0;if((j|0)!=(-1|0)){a=j;k=c[1947]|0;h=k+-1|0;if(!(h&a))k=m;else k=m-a+(h+a&0-k)|0;a=c[1936]|0;h=a+k|0;if(k>>>0>p>>>0&k>>>0<2147483647){v=c[1938]|0;if((v|0)!=0?h>>>0<=a>>>0|h>>>0>v>>>0:0){k=0;break}h=ma(k|0)|0;if((h|0)==(j|0))A=190;else{j=h;A=191}}else k=0}else k=0}while(0);f:do if((A|0)==190){if((j|0)!=(-1|0)){w=j;s=k;A=201;break d}}else if((A|0)==191){a=0-k|0;do if((j|0)!=(-1|0)&k>>>0<2147483647&l>>>0>k>>>0?(d=c[1948]|0,d=f-k+d&0-d,d>>>0<2147483647):0)if((ma(d|0)|0)==(-1|0)){ma(a|0)|0;k=0;break f}else{k=d+k|0;break}while(0);if((j|0)==(-1|0))k=0;else{w=j;s=k;A=201;break d}}while(0);c[1939]=c[1939]|4;A=198}else{k=0;A=198}while(0);if((((A|0)==198?m>>>0<2147483647:0)?(w=ma(m|0)|0,x=ma(0)|0,(w|0)!=(-1|0)&(x|0)!=(-1|0)&w>>>0<x>>>0):0)?(z=x-w|0,y=z>>>0>(p+40|0)>>>0,y):0){s=y?z:k;A=201}if((A|0)==201){j=(c[1936]|0)+s|0;c[1936]=j;if(j>>>0>(c[1937]|0)>>>0)c[1937]=j;o=c[1834]|0;g:do if(o){f=7760|0;while(1){k=c[f>>2]|0;g=f+4|0;j=c[g>>2]|0;if((w|0)==(k+j|0)){A=213;break}h=c[f+8>>2]|0;if(!h)break;else f=h}if(((A|0)==213?(c[f+12>>2]&8|0)==0:0)?o>>>0>=k>>>0&o>>>0<w>>>0:0){c[g>>2]=j+s;d=(c[1831]|0)+s|0;b=o+8|0;if(!(b&7))b=0;else b=0-b&7;x=d-b|0;c[1834]=o+b;c[1831]=x;c[o+(b+4)>>2]=x|1;c[o+(d+4)>>2]=40;c[1835]=c[1950];break}k=c[1832]|0;if(w>>>0<k>>>0){c[1832]=w;k=w}h=w+s|0;g=7760|0;while(1){if((c[g>>2]|0)==(h|0)){A=223;break}j=c[g+8>>2]|0;if(!j)break;else g=j}if((A|0)==223?(c[g+12>>2]&8|0)==0:0){c[g>>2]=w;j=g+4|0;c[j>>2]=(c[j>>2]|0)+s;j=w+8|0;if(!(j&7))r=0;else r=0-j&7;j=w+(s+8)|0;if(!(j&7))b=0;else b=0-j&7;j=w+(b+s)|0;q=r+p|0;n=w+q|0;d=j-(w+r)-p|0;c[w+(r+4)>>2]=p|3;h:do if((j|0)!=(o|0)){if((j|0)==(c[1833]|0)){x=(c[1830]|0)+d|0;c[1830]=x;c[1833]=n;c[w+(q+4)>>2]=x|1;c[w+(x+q)>>2]=x;break}l=s+4|0;h=c[w+(l+b)>>2]|0;if((h&3|0)==1){m=h&-8;e=h>>>3;i:do if(h>>>0>=256){a=c[w+((b|24)+s)>>2]|0;g=c[w+(s+12+b)>>2]|0;do if((g|0)==(j|0)){g=b|16;f=w+(l+g)|0;h=c[f>>2]|0;if(!h){g=w+(g+s)|0;h=c[g>>2]|0;if(!h){H=0;break}}else g=f;while(1){e=h+20|0;f=c[e>>2]|0;if(f){h=f;g=e;continue}e=h+16|0;f=c[e>>2]|0;if(!f)break;else{h=f;g=e}}if(g>>>0<k>>>0)ka();else{c[g>>2]=0;H=h;break}}else{f=c[w+((b|8)+s)>>2]|0;if(f>>>0<k>>>0)ka();k=f+12|0;if((c[k>>2]|0)!=(j|0))ka();h=g+8|0;if((c[h>>2]|0)==(j|0)){c[k>>2]=g;c[h>>2]=f;H=g;break}else ka()}while(0);if(!a)break;k=c[w+(s+28+b)>>2]|0;h=7616+(k<<2)|0;do if((j|0)!=(c[h>>2]|0)){if(a>>>0<(c[1832]|0)>>>0)ka();k=a+16|0;if((c[k>>2]|0)==(j|0))c[k>>2]=H;else c[a+20>>2]=H;if(!H)break i}else{c[h>>2]=H;if(H)break;c[1829]=c[1829]&~(1<<k);break i}while(0);h=c[1832]|0;if(H>>>0<h>>>0)ka();c[H+24>>2]=a;j=b|16;k=c[w+(j+s)>>2]|0;do if(k)if(k>>>0<h>>>0)ka();else{c[H+16>>2]=k;c[k+24>>2]=H;break}while(0);j=c[w+(l+j)>>2]|0;if(!j)break;if(j>>>0<(c[1832]|0)>>>0)ka();else{c[H+20>>2]=j;c[j+24>>2]=H;break}}else{g=c[w+((b|8)+s)>>2]|0;f=c[w+(s+12+b)>>2]|0;h=7352+(e<<1<<2)|0;do if((g|0)!=(h|0)){if(g>>>0<k>>>0)ka();if((c[g+12>>2]|0)==(j|0))break;ka()}while(0);if((f|0)==(g|0)){c[1828]=c[1828]&~(1<<e);break}do if((f|0)==(h|0))D=f+8|0;else{if(f>>>0<k>>>0)ka();k=f+8|0;if((c[k>>2]|0)==(j|0)){D=k;break}ka()}while(0);c[g+12>>2]=f;c[D>>2]=g}while(0);j=w+((m|b)+s)|0;k=m+d|0}else k=d;j=j+4|0;c[j>>2]=c[j>>2]&-2;c[w+(q+4)>>2]=k|1;c[w+(k+q)>>2]=k;j=k>>>3;if(k>>>0<256){g=j<<1;f=7352+(g<<2)|0;h=c[1828]|0;j=1<<j;do if(!(h&j)){c[1828]=h|j;I=7352+(g+2<<2)|0;J=f}else{j=7352+(g+2<<2)|0;h=c[j>>2]|0;if(h>>>0>=(c[1832]|0)>>>0){I=j;J=h;break}ka()}while(0);c[I>>2]=n;c[J+12>>2]=n;c[w+(q+8)>>2]=J;c[w+(q+12)>>2]=f;break}d=k>>>8;do if(!d)f=0;else{if(k>>>0>16777215){f=31;break}v=(d+1048320|0)>>>16&8;x=d<<v;u=(x+520192|0)>>>16&4;x=x<<u;f=(x+245760|0)>>>16&2;f=14-(u|v|f)+(x<<f>>>15)|0;f=k>>>(f+7|0)&1|f<<1}while(0);h=7616+(f<<2)|0;c[w+(q+28)>>2]=f;c[w+(q+20)>>2]=0;c[w+(q+16)>>2]=0;j=c[1829]|0;g=1<<f;if(!(j&g)){c[1829]=j|g;c[h>>2]=n;c[w+(q+24)>>2]=h;c[w+(q+12)>>2]=n;c[w+(q+8)>>2]=n;break}j=c[h>>2]|0;if((f|0)==31)h=0;else h=25-(f>>>1)|0;j:do if((c[j+4>>2]&-8|0)!=(k|0)){f=k<<h;while(1){g=j+(f>>>31<<2)+16|0;h=c[g>>2]|0;if(!h)break;if((c[h+4>>2]&-8|0)==(k|0)){K=h;break j}else{f=f<<1;j=h}}if(g>>>0<(c[1832]|0)>>>0)ka();else{c[g>>2]=n;c[w+(q+24)>>2]=j;c[w+(q+12)>>2]=n;c[w+(q+8)>>2]=n;break h}}else K=j;while(0);b=K+8|0;d=c[b>>2]|0;x=c[1832]|0;if(K>>>0>=x>>>0&d>>>0>=x>>>0){c[d+12>>2]=n;c[b>>2]=n;c[w+(q+8)>>2]=d;c[w+(q+12)>>2]=K;c[w+(q+24)>>2]=0;break}else ka()}else{x=(c[1831]|0)+d|0;c[1831]=x;c[1834]=n;c[w+(q+4)>>2]=x|1}while(0);x=w+(r|8)|0;i=L;return x|0}j=7760|0;while(1){h=c[j>>2]|0;if(h>>>0<=o>>>0?(B=c[j+4>>2]|0,C=h+B|0,C>>>0>o>>>0):0)break;j=c[j+8>>2]|0}j=h+(B+-39)|0;if(!(j&7))j=0;else j=0-j&7;g=h+(B+-47+j)|0;g=g>>>0<(o+16|0)>>>0?o:g;h=g+8|0;j=w+8|0;if(!(j&7))j=0;else j=0-j&7;f=s+-40-j|0;c[1834]=w+j;c[1831]=f;c[w+(j+4)>>2]=f|1;c[w+(s+-36)>>2]=40;c[1835]=c[1950];c[g+4>>2]=27;c[h+0>>2]=c[1940];c[h+4>>2]=c[1941];c[h+8>>2]=c[1942];c[h+12>>2]=c[1943];c[1940]=w;c[1941]=s;c[1943]=0;c[1942]=h;f=g+28|0;c[f>>2]=7;if((g+32|0)>>>0<C>>>0)do{x=f;f=f+4|0;c[f>>2]=7}while((x+8|0)>>>0<C>>>0);if((g|0)!=(o|0)){k=g-o|0;j=o+(k+4)|0;c[j>>2]=c[j>>2]&-2;c[o+4>>2]=k|1;c[o+k>>2]=k;j=k>>>3;if(k>>>0<256){g=j<<1;f=7352+(g<<2)|0;h=c[1828]|0;j=1<<j;do if(!(h&j)){c[1828]=h|j;E=7352+(g+2<<2)|0;F=f}else{d=7352+(g+2<<2)|0;b=c[d>>2]|0;if(b>>>0>=(c[1832]|0)>>>0){E=d;F=b;break}ka()}while(0);c[E>>2]=o;c[F+12>>2]=o;c[o+8>>2]=F;c[o+12>>2]=f;break}d=k>>>8;if(d)if(k>>>0>16777215)g=31;else{w=(d+1048320|0)>>>16&8;x=d<<w;v=(x+520192|0)>>>16&4;x=x<<v;g=(x+245760|0)>>>16&2;g=14-(v|w|g)+(x<<g>>>15)|0;g=k>>>(g+7|0)&1|g<<1}else g=0;h=7616+(g<<2)|0;c[o+28>>2]=g;c[o+20>>2]=0;c[o+16>>2]=0;e=c[1829]|0;j=1<<g;if(!(e&j)){c[1829]=e|j;c[h>>2]=o;c[o+24>>2]=h;c[o+12>>2]=o;c[o+8>>2]=o;break}e=c[h>>2]|0;if((g|0)==31)d=0;else d=25-(g>>>1)|0;k:do if((c[e+4>>2]&-8|0)!=(k|0)){j=k<<d;while(1){h=e+(j>>>31<<2)+16|0;d=c[h>>2]|0;if(!d)break;if((c[d+4>>2]&-8|0)==(k|0)){G=d;break k}else{j=j<<1;e=d}}if(h>>>0<(c[1832]|0)>>>0)ka();else{c[h>>2]=o;c[o+24>>2]=e;c[o+12>>2]=o;c[o+8>>2]=o;break g}}else G=e;while(0);b=G+8|0;d=c[b>>2]|0;x=c[1832]|0;if(G>>>0>=x>>>0&d>>>0>=x>>>0){c[d+12>>2]=o;c[b>>2]=o;c[o+8>>2]=d;c[o+12>>2]=G;c[o+24>>2]=0;break}else ka()}}else{x=c[1832]|0;if((x|0)==0|w>>>0<x>>>0)c[1832]=w;c[1940]=w;c[1941]=s;c[1943]=0;c[1837]=c[1946];c[1836]=-1;b=0;do{x=b<<1;v=7352+(x<<2)|0;c[7352+(x+3<<2)>>2]=v;c[7352+(x+2<<2)>>2]=v;b=b+1|0}while((b|0)!=32);b=w+8|0;if(!(b&7))b=0;else b=0-b&7;x=s+-40-b|0;c[1834]=w+b;c[1831]=x;c[w+(b+4)>>2]=x|1;c[w+(s+-36)>>2]=40;c[1835]=c[1950]}while(0);b=c[1831]|0;if(b>>>0>p>>>0){w=b-p|0;c[1831]=w;x=c[1834]|0;c[1834]=x+p;c[x+(p+4)>>2]=w|1;c[x+4>>2]=p|3;x=x+8|0;i=L;return x|0}}c[(va()|0)>>2]=12;x=0;i=L;return x|0}function kd(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;w=i;if(!a){i=w;return}f=a+-8|0;h=c[1832]|0;if(f>>>0<h>>>0)ka();g=c[a+-4>>2]|0;e=g&3;if((e|0)==1)ka();q=g&-8;r=a+(q+-8)|0;do if(!(g&1)){g=c[f>>2]|0;if(!e){i=w;return}j=-8-g|0;m=a+j|0;n=g+q|0;if(m>>>0<h>>>0)ka();if((m|0)==(c[1833]|0)){f=a+(q+-4)|0;g=c[f>>2]|0;if((g&3|0)!=3){v=m;l=n;break}c[1830]=n;c[f>>2]=g&-2;c[a+(j+4)>>2]=n|1;c[r>>2]=n;i=w;return}d=g>>>3;if(g>>>0<256){e=c[a+(j+8)>>2]|0;f=c[a+(j+12)>>2]|0;g=7352+(d<<1<<2)|0;if((e|0)!=(g|0)){if(e>>>0<h>>>0)ka();if((c[e+12>>2]|0)!=(m|0))ka()}if((f|0)==(e|0)){c[1828]=c[1828]&~(1<<d);v=m;l=n;break}if((f|0)!=(g|0)){if(f>>>0<h>>>0)ka();g=f+8|0;if((c[g>>2]|0)==(m|0))b=g;else ka()}else b=f+8|0;c[e+12>>2]=f;c[b>>2]=e;v=m;l=n;break}b=c[a+(j+24)>>2]|0;e=c[a+(j+12)>>2]|0;do if((e|0)==(m|0)){f=a+(j+20)|0;g=c[f>>2]|0;if(!g){f=a+(j+16)|0;g=c[f>>2]|0;if(!g){k=0;break}}while(1){d=g+20|0;e=c[d>>2]|0;if(e){g=e;f=d;continue}d=g+16|0;e=c[d>>2]|0;if(!e)break;else{g=e;f=d}}if(f>>>0<h>>>0)ka();else{c[f>>2]=0;k=g;break}}else{d=c[a+(j+8)>>2]|0;if(d>>>0<h>>>0)ka();g=d+12|0;if((c[g>>2]|0)!=(m|0))ka();f=e+8|0;if((c[f>>2]|0)==(m|0)){c[g>>2]=e;c[f>>2]=d;k=e;break}else ka()}while(0);if(b){g=c[a+(j+28)>>2]|0;f=7616+(g<<2)|0;if((m|0)==(c[f>>2]|0)){c[f>>2]=k;if(!k){c[1829]=c[1829]&~(1<<g);v=m;l=n;break}}else{if(b>>>0<(c[1832]|0)>>>0)ka();g=b+16|0;if((c[g>>2]|0)==(m|0))c[g>>2]=k;else c[b+20>>2]=k;if(!k){v=m;l=n;break}}f=c[1832]|0;if(k>>>0<f>>>0)ka();c[k+24>>2]=b;g=c[a+(j+16)>>2]|0;do if(g)if(g>>>0<f>>>0)ka();else{c[k+16>>2]=g;c[g+24>>2]=k;break}while(0);g=c[a+(j+20)>>2]|0;if(g)if(g>>>0<(c[1832]|0)>>>0)ka();else{c[k+20>>2]=g;c[g+24>>2]=k;v=m;l=n;break}else{v=m;l=n}}else{v=m;l=n}}else{v=f;l=q}while(0);if(v>>>0>=r>>>0)ka();g=a+(q+-4)|0;f=c[g>>2]|0;if(!(f&1))ka();if(!(f&2)){if((r|0)==(c[1834]|0)){m=(c[1831]|0)+l|0;c[1831]=m;c[1834]=v;c[v+4>>2]=m|1;if((v|0)!=(c[1833]|0)){i=w;return}c[1833]=0;c[1830]=0;i=w;return}if((r|0)==(c[1833]|0)){m=(c[1830]|0)+l|0;c[1830]=m;c[1833]=v;c[v+4>>2]=m|1;c[v+m>>2]=m;i=w;return}h=(f&-8)+l|0;d=f>>>3;do if(f>>>0>=256){b=c[a+(q+16)>>2]|0;g=c[a+(q|4)>>2]|0;do if((g|0)==(r|0)){f=a+(q+12)|0;g=c[f>>2]|0;if(!g){f=a+(q+8)|0;g=c[f>>2]|0;if(!g){p=0;break}}while(1){d=g+20|0;e=c[d>>2]|0;if(e){g=e;f=d;continue}d=g+16|0;e=c[d>>2]|0;if(!e)break;else{g=e;f=d}}if(f>>>0<(c[1832]|0)>>>0)ka();else{c[f>>2]=0;p=g;break}}else{f=c[a+q>>2]|0;if(f>>>0<(c[1832]|0)>>>0)ka();e=f+12|0;if((c[e>>2]|0)!=(r|0))ka();d=g+8|0;if((c[d>>2]|0)==(r|0)){c[e>>2]=g;c[d>>2]=f;p=g;break}else ka()}while(0);if(b){g=c[a+(q+20)>>2]|0;f=7616+(g<<2)|0;if((r|0)==(c[f>>2]|0)){c[f>>2]=p;if(!p){c[1829]=c[1829]&~(1<<g);break}}else{if(b>>>0<(c[1832]|0)>>>0)ka();g=b+16|0;if((c[g>>2]|0)==(r|0))c[g>>2]=p;else c[b+20>>2]=p;if(!p)break}g=c[1832]|0;if(p>>>0<g>>>0)ka();c[p+24>>2]=b;f=c[a+(q+8)>>2]|0;do if(f)if(f>>>0<g>>>0)ka();else{c[p+16>>2]=f;c[f+24>>2]=p;break}while(0);d=c[a+(q+12)>>2]|0;if(d)if(d>>>0<(c[1832]|0)>>>0)ka();else{c[p+20>>2]=d;c[d+24>>2]=p;break}}}else{e=c[a+q>>2]|0;f=c[a+(q|4)>>2]|0;g=7352+(d<<1<<2)|0;if((e|0)!=(g|0)){if(e>>>0<(c[1832]|0)>>>0)ka();if((c[e+12>>2]|0)!=(r|0))ka()}if((f|0)==(e|0)){c[1828]=c[1828]&~(1<<d);break}if((f|0)!=(g|0)){if(f>>>0<(c[1832]|0)>>>0)ka();g=f+8|0;if((c[g>>2]|0)==(r|0))o=g;else ka()}else o=f+8|0;c[e+12>>2]=f;c[o>>2]=e}while(0);c[v+4>>2]=h|1;c[v+h>>2]=h;if((v|0)==(c[1833]|0)){c[1830]=h;i=w;return}else g=h}else{c[g>>2]=f&-2;c[v+4>>2]=l|1;c[v+l>>2]=l;g=l}e=g>>>3;if(g>>>0<256){f=e<<1;g=7352+(f<<2)|0;d=c[1828]|0;e=1<<e;if(d&e){d=7352+(f+2<<2)|0;b=c[d>>2]|0;if(b>>>0<(c[1832]|0)>>>0)ka();else{s=d;t=b}}else{c[1828]=d|e;s=7352+(f+2<<2)|0;t=g}c[s>>2]=v;c[t+12>>2]=v;c[v+8>>2]=t;c[v+12>>2]=g;i=w;return}d=g>>>8;if(d)if(g>>>0>16777215)f=31;else{l=(d+1048320|0)>>>16&8;m=d<<l;k=(m+520192|0)>>>16&4;m=m<<k;f=(m+245760|0)>>>16&2;f=14-(k|l|f)+(m<<f>>>15)|0;f=g>>>(f+7|0)&1|f<<1}else f=0;b=7616+(f<<2)|0;c[v+28>>2]=f;c[v+20>>2]=0;c[v+16>>2]=0;d=c[1829]|0;e=1<<f;a:do if(d&e){b=c[b>>2]|0;if((f|0)==31)d=0;else d=25-(f>>>1)|0;b:do if((c[b+4>>2]&-8|0)!=(g|0)){f=g<<d;while(1){e=b+(f>>>31<<2)+16|0;d=c[e>>2]|0;if(!d)break;if((c[d+4>>2]&-8|0)==(g|0)){u=d;break b}else{f=f<<1;b=d}}if(e>>>0<(c[1832]|0)>>>0)ka();else{
c[e>>2]=v;c[v+24>>2]=b;c[v+12>>2]=v;c[v+8>>2]=v;break a}}else u=b;while(0);d=u+8|0;b=c[d>>2]|0;m=c[1832]|0;if(u>>>0>=m>>>0&b>>>0>=m>>>0){c[b+12>>2]=v;c[d>>2]=v;c[v+8>>2]=b;c[v+12>>2]=u;c[v+24>>2]=0;break}else ka()}else{c[1829]=d|e;c[b>>2]=v;c[v+24>>2]=b;c[v+12>>2]=v;c[v+8>>2]=v}while(0);m=(c[1836]|0)+-1|0;c[1836]=m;if(!m)b=7768|0;else{i=w;return}while(1){b=c[b>>2]|0;if(!b)break;else b=b+8|0}c[1836]=-1;i=w;return}function ld(){}function md(b){b=b|0;var c=0;c=b;while(a[c>>0]|0)c=c+1|0;return c-b|0}function nd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=b+e|0;if((e|0)>=20){d=d&255;h=b&3;i=d|d<<8|d<<16|d<<24;g=f&~3;if(h){h=b+4-h|0;while((b|0)<(h|0)){a[b>>0]=d;b=b+1|0}}while((b|0)<(g|0)){c[b>>2]=i;b=b+4|0}}while((b|0)<(f|0)){a[b>>0]=d;b=b+1|0}return b-e|0}function od(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;if((e|0)>=4096)return pa(b|0,d|0,e|0)|0;f=b|0;if((b&3)==(d&3)){while(b&3){if(!e)return f|0;a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}while((e|0)>=4){c[b>>2]=c[d>>2];b=b+4|0;d=d+4|0;e=e-4|0}}while((e|0)>0){a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}return f|0}function pd(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;xa[a&3](b|0,c|0,d|0,e|0,f|0)}function qd(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;_(0)}var xa=[qd,fc,ec,qd];return{_strlen:md,_free:kd,_broadwayGetMajorVersion:dd,_get_h264bsdClip:Lb,_broadwayExit:cd,_memset:nd,_broadwayCreateStream:Zc,_malloc:jd,_memcpy:od,_broadwayGetMinorVersion:ed,_broadwayPlayStream:$c,_broadwaySetStreamLength:_c,_broadwayInit:ad,runPostSets:ld,stackAlloc:ya,stackSave:za,stackRestore:Aa,setThrew:Ba,setTempRet0:Ea,getTempRet0:Fa,dynCall_viiiii:pd}}(p.Xc,p.Yc,Q),Bb=p._strlen=$._strlen,Ea=p._free=$._free;p._broadwayGetMajorVersion=$._broadwayGetMajorVersion,p._get_h264bsdClip=$._get_h264bsdClip,p._broadwayExit=$._broadwayExit;var Gb=p._memset=$._memset;p._broadwayCreateStream=$._broadwayCreateStream;var Ca=p._malloc=$._malloc,gc=p._memcpy=$._memcpy;if(p._broadwayGetMinorVersion=$._broadwayGetMinorVersion,p._broadwayPlayStream=$._broadwayPlayStream,p._broadwaySetStreamLength=$._broadwaySetStreamLength,p._broadwayInit=$._broadwayInit,p.runPostSets=$.runPostSets,p.dynCall_viiiii=$.dynCall_viiiii,z.pb=$.stackAlloc,z.Tb=$.stackSave,z.Sb=$.stackRestore,z.Yd=$.setTempRet0,z.xd=$.getTempRet0,T)if("function"==typeof p.locateFile?T=p.locateFile(T):p.memoryInitializerPrefixURL&&(T=p.memoryInitializerPrefixURL+T),t||da){var hc=p.readBinary(T);N.set(hc,Ia)}else Ya(),yb(T,function(a){N.set(a,Ia),Za()},function(){d("could not load memory initializer "+T)});ia.prototype=Error();var ic,jc=k,Xa=function kc(){!p.calledRun&&lc&&mc(),p.calledRun||(Xa=kc)};if(p.callMain=p.ag=function(a){function b(){for(var a=0;3>a;a++)e.push(0)}w(0==S,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),w(0==Oa.length,"cannot call main when preRun functions remain to be called"),a=a||[],Sa||(Sa=i,Na(R));var c=a.length+1,e=[M(Va(p.thisProgram),"i8",0)];b();for(var f=0;f<c-1;f+=1)e.push(M(Va(a[f]),"i8",0)),b();e.push(0),e=M(e,"i32",0),ic=y;try{var h=p._main(c,e,0);nc(h)}catch(j){j instanceof ia||("SimulateInfiniteLoop"==j?p.noExitRuntime=i:(j&&"object"==typeof j&&j.stack&&p.fa("exception thrown: "+[j,j.stack]),d(j)))}finally{}},p.run=p.Ng=mc,p.exit=p.hg=nc,p.abort=p.abort=A,p.preInit)for("function"==typeof p.preInit&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();var lc=m;p.noInitialRun&&(lc=m),mc();var resultModule=window.Module||this.Module;return resultModule},nowValue=function(){return(new Date).getTime()};"undefined"!=typeof performance&&performance.now&&(nowValue=function(){return performance.now()});var Broadway=function(parOptions){function toU8Array(ptr,length){return HEAPU8.subarray(ptr,ptr+length)}this.options=parOptions||{},this.now=nowValue;var asmInstance,Module=getModule(function(){},function($buffer,width,height){var buffer=this.pictureBuffers[$buffer];if(buffer||(buffer=this.pictureBuffers[$buffer]=toU8Array($buffer,width*height*3/2)),this.options.rgb){asmInstance||(asmInstance=getAsm(width,height)),asmInstance.inp.set(buffer),asmInstance.doit();var copyU8=new Uint8Array(asmInstance.outSize);return copyU8.set(asmInstance.out),void this.onPictureDecoded(copyU8,width,height,this._getEndTime(),this._startedTime)}this.onPictureDecoded(buffer,width,height,this._getEndTime(),this._startedTime)}.bind(this)),HEAPU8=(Module.HEAP8,Module.HEAPU8),MAX_STREAM_BUFFER_LENGTH=(Module.HEAP16,Module.HEAP32,Module._get_h264bsdClip(),1048576);Module._broadwayInit(),this.streamBuffer=toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH),MAX_STREAM_BUFFER_LENGTH),this.pictureBuffers={},this.onPictureDecoded=function(buffer,width,height,time,cnt){},this._takeStartTime=function(time){this._started||(this._started=!0,this._startedTime=time||nowValue())},this._getTime=function(){return nowValue()-this._startedTime},this._getEndTime=function(){return this._started=!1,this._getTime()},this.decode=function(buffer,time){this._takeStartTime(time),this.streamBuffer.set(buffer),Module._broadwaySetStreamLength(buffer.length),Module._broadwayPlayStream()}};Broadway.prototype={configure:function(config){console.info("Broadway Configured: "+JSON.stringify(config))}};var asmInstances={},getAsm=function(parWidth,parHeight){var idStr=""+parWidth+"x"+parHeight;if(asmInstances[idStr])return asmInstances[idStr];for(var lumaSize=parWidth*parHeight,chromaSize=(0|lumaSize)>>2,inpSize=lumaSize+chromaSize+chromaSize,outSize=parWidth*parHeight*4,cacheSize=4*Math.pow(2,24),size=inpSize+outSize+cacheSize,chunkSize=Math.pow(2,24),heapSize=chunkSize;heapSize<size;)heapSize+=chunkSize;var heap=new ArrayBuffer(heapSize),res=asmFactory(global,{},heap);return res.init(parWidth,parHeight),asmInstances[idStr]=res,res.heap=heap,res.out=new Uint8Array(heap,0,outSize),res.inp=new Uint8Array(heap,outSize,inpSize),res.outSize=outSize,res};if("undefined"!=typeof self){var isWorker=!1,decoder;self.addEventListener("message",function(e){isWorker?decoder.decode(new Uint8Array(e.data.buf),e.data.time):e.data&&"Broadway.js - Worker init"===e.data.type&&(isWorker=!0,decoder=new Broadway(e.data.options),decoder.onPictureDecoded=function(buffer,width,height,time,timeStarted){buffer&&(buffer=new Uint8Array(buffer));var copyU8=new Uint8Array(buffer.length);copyU8.set(buffer,0,buffer.length),postMessage({buf:copyU8.buffer,width:width,height:height,time:time,timeStarted:timeStarted},[copyU8.buffer])},postMessage({consoleLog:"initialized"}))},!1)}return Broadway.nowValue=nowValue,Broadway}),require=_require}).call(exports,__webpack_require__(4),"/")},function(module,exports,__webpack_require__){function MovDasher(){}var _mp4box=__webpack_require__(8),DataStream=_mp4box.DataStream,BoxParser=_mp4box.BoxParser,MP4Box=(_mp4box.ISOFile,_mp4box.MP4Box);MovDasher.MIN_FRAMES_PER_SEGMENT=200,MovDasher.dashify=function(inputMp4Box,trackId,log){var isVideo,orig_trak=MovDasher._getTrack(inputMp4Box.inputIsoFile.moov,trackId),orig_sampleDesc=orig_trak.mdia.minf.stbl.stsd.entries[0],samplesInfo=inputMp4Box.getTrackSamplesInfo(trackId);if(orig_sampleDesc.isVideo())isVideo=!0;else{if(!orig_sampleDesc.isAudio())return void log.warn("unknown track type",orig_sampleDesc);isVideo=!1}var orig_stts=orig_trak.mdia.minf.stbl.stts,orig_stsz=orig_trak.mdia.minf.stbl.stsz,orig_stss=orig_trak.mdia.minf.stbl.stss,orig_stsd=orig_trak.mdia.minf.stbl.stsd,timescale=orig_trak.mdia.mdhd.timescale,duration=orig_trak.mdia.mdhd.duration,sampleDuration=orig_stts.sample_deltas[0],constantFrameRate=1==orig_stts.sample_counts.length;constantFrameRate||log.info("Variable frame rate detected");var sampleCount=orig_stsz.sample_sizes.length,sampleSizes=orig_stsz.sample_sizes,iframesOnly=!orig_stss;if(!iframesOnly)var sampleFlags=MovDasher.getSampleFlags(sampleCount,orig_stss.sample_numbers),syncSamples=orig_stss.sample_numbers;var ftyp=new BoxParser.ftypBox;ftyp.major_brand="dash",ftyp.minor_version=0,ftyp.compatible_brands=["iso6","mp41"];var moov=new BoxParser.moovBox,matrix=[65536,0,0,0,65536,0,0,0,1073741824],mvhd=new BoxParser.mvhdBox;mvhd.timescale=timescale,mvhd.duration=0,mvhd.rate=65536,mvhd.volume=1,mvhd.matrix=matrix,mvhd.next_track_id=2,moov.boxes.push(mvhd);var mvex=new BoxParser.mvexBox,mehd=new BoxParser.mehdBox;mehd.fragment_duration=duration,mvex.boxes.push(mehd);var trex=new BoxParser.trexBox;trex.track_id=1,trex.default_sample_description_index=1,trex.default_sample_duration=sampleDuration,trex.default_sample_flags=iframesOnly?33554432:65536,mvex.boxes.push(trex),moov.boxes.push(mvex);var trak=new BoxParser.trakBox,tkhd=new BoxParser.tkhdBox;tkhd.track_id=1,tkhd.flags=BoxParser.TKHD_FLAG_ENABLED|BoxParser.TKHD_FLAG_IN_MOVIE|BoxParser.TKHD_FLAG_IN_PREVIEW|BoxParser.TKHD_FLAG_IN_POSTER,tkhd.matrix=matrix,tkhd.width=orig_trak.tkhd.width,tkhd.height=orig_trak.tkhd.height,trak.boxes.push(tkhd);var mdia=new BoxParser.mdiaBox,mdhd=new BoxParser.mdhdBox;mdhd.timescale=timescale,mdia.boxes.push(mdhd);var mdiaHdlr=new BoxParser.hdlrBox;mdiaHdlr.componentType="mhlr",mdiaHdlr.componentSubType=isVideo?"vide":"soun",mdiaHdlr.name="",mdia.boxes.push(mdiaHdlr);var minf=new BoxParser.minfBox,dinf=new BoxParser.dinfBox,dref=new BoxParser.drefBox,url=new BoxParser["url Box"];if(dref.entries=[url],dinf.boxes.push(dref),minf.boxes.push(dinf),isVideo){var vmhd=new BoxParser.vmhdBox;vmhd.graphicsmode=0,vmhd.opcolor=[0,0,0],minf.boxes.push(vmhd)}else{var smhd=new BoxParser.smhdBox;smhd.data=[0,0,0,0],minf.boxes.push(smhd)}var minfHdlr=new BoxParser.hdlrBox;minfHdlr.componentType="dhlr",minfHdlr.componentSubType="url ",minfHdlr.name="",minf.boxes.push(minfHdlr);var stbl=new BoxParser.stblBox,stsd=orig_stsd;if(!isVideo){stsd=new BoxParser.stsdBox,stsd.entries=[];for(var i=0;i<orig_stsd.entries.length;i++){var audioSampleEntry=orig_stsd.entries[i];if("mp4a"==audioSampleEntry.type){var newAse=new BoxParser.AudioSampleEntry("mp4a");newAse.data_reference_index=audioSampleEntry.data_reference_index,newAse.version=0,newAse.revision=0,newAse.vendor=0,newAse.channel_count=audioSampleEntry.channel_count,newAse.samplesize=audioSampleEntry.samplesize,newAse.samplerate=audioSampleEntry.samplerate,newAse.esds=audioSampleEntry.esds||(audioSampleEntry.wave||{}).esds,newAse.boxes=[newAse.esds],stsd.entries.push(newAse)}else stsd.entries.push(audioSampleEntry)}}stbl.boxes.push(stsd);var stsz=new BoxParser.stszBox;stsz.sample_sizes=[],stbl.boxes.push(stsz);var stts=new BoxParser.sttsBox;stts.sample_counts=[],stbl.boxes.push(stts);var stco=new BoxParser.stcoBox;stco.chunk_offsets=[],stbl.boxes.push(stco);var stsc=new BoxParser.stscBox;stsc.first_chunk=[],stbl.boxes.push(stsc),minf.boxes.push(stbl),mdia.boxes.push(minf),trak.boxes.push(mdia),moov.boxes.push(trak);for(var moofs=[],segmentDataIntervals=[],syncIdx=0,fn=0,sequenceNumber=1;fn<sampleCount;sequenceNumber++){var segSampleCount=Math.min(MovDasher.MIN_FRAMES_PER_SEGMENT,sampleCount-fn);if(!iframesOnly){for(var segEndFn=fn+segSampleCount;syncIdx<syncSamples.length&&syncSamples[syncIdx]-1<segEndFn;)syncIdx++;segEndFn=syncIdx<syncSamples.length?syncSamples[syncIdx]-1:sampleCount,segSampleCount=segEndFn-fn}var moof=new BoxParser.moofBox,mfhd=new BoxParser.mfhdBox;mfhd.sequence_number=sequenceNumber,moof.boxes.push(mfhd);var traf=new BoxParser.trafBox,tfhd=new BoxParser.tfhdBox;tfhd.track_id=1,tfhd.flags|=BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF,tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_DUR,tfhd.default_sample_duration=sampleDuration,isVideo||(tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_FLAGS,tfhd.default_sample_flags=33554432),traf.boxes.push(tfhd);var tfdt=new BoxParser.tfdtBox;tfdt.baseMediaDecodeTime=samplesInfo[fn].dts,traf.tfdt=tfdt,traf.boxes.push(tfdt);var trun=new BoxParser.trunBox;trun.sample_count=segSampleCount,trun.flags|=BoxParser.TRUN_FLAGS_DATA_OFFSET,trun.flags|=BoxParser.TRUN_FLAGS_SIZE,trun.data_offset=-42;var segSampleSizes=sampleSizes.subarray(fn,fn+segSampleCount);if(trun.sample_size=segSampleSizes,sampleFlags&&(trun.flags|=BoxParser.TRUN_FLAGS_FLAGS,trun.sample_flags=sampleFlags.subarray(fn,fn+segSampleCount)),!constantFrameRate){for(var segSampleDurations=[],s=fn;s<fn+segSampleCount;s++)segSampleDurations.push(samplesInfo[s].duration);trun.flags|=BoxParser.TRUN_FLAGS_DURATION,trun.sample_duration=segSampleDurations}traf.trun=trun,traf.boxes.push(trun),moof.traf=traf,moof.boxes.push(traf),moofs.push(moof);for(var addSample=function(acc,curr){if(0==acc.length)acc.push({chunk:curr.chunk_index,dataFrom:curr.offset,dataTo:curr.offset+curr.size});else{var last=acc[acc.length-1];last.chunk!=curr.chunk_index?acc.push({chunk:curr.chunk_index,dataFrom:curr.offset,dataTo:curr.offset+curr.size}):last.dataTo+=curr.size}},sampleDataIntervals=[],s=fn;s<fn+segSampleCount;s++){var sampleInfo=samplesInfo[s];addSample(sampleDataIntervals,sampleInfo)}segmentDataIntervals.push(sampleDataIntervals),fn+=segSampleCount}var segmentStartTv=[];for(i=0;i<moofs.length;i++)segmentStartTv[i]=moofs[i].traf.tfdt.baseMediaDecodeTime;var segments=[];for(i=0;i<moofs.length;i++){moof=moofs[i],trun=moof.traf.trun;for(var samplesSize=0,j=0;j<trun.sample_size.length;j++)samplesSize+=trun.sample_size[j];var mdat=new BoxParser.mdatBox;mdat.data=new Uint8Array(0);var out=new DataStream((void 0),0,DataStream.BIG_ENDIAN);moof.write(out),mdat.write(out);var moofDataOffset=out.getPosition();out.adjustUint32(trun.data_offset_position,moofDataOffset),out.adjustUint32(mdat.sizePosition,samplesSize+8),segments[i]={dataIntervals:segmentDataIntervals[i],header:out.buffer}}out=new DataStream((void 0),0,DataStream.BIG_ENDIAN),ftyp.write(out),moov.write(out);var dashified={};dashified.moovbuf=out.buffer,dashified.segments=segments,dashified.timescale=timescale,dashified.segmentStartTv=segmentStartTv,dashified.duration=duration,dashified.sampleDuration=sampleDuration,dashified.mimeType=isVideo?"video/mp4":"audio/mp4",dashified.codecs=orig_sampleDesc.getCodec(),dashified.startTimecodeOffset=-1,dashified.dropFrame=!1,isVideo||(dashified.channelConfig=MovDasher.parseEsdsChannelConfig(orig_sampleDesc.esds,log)||orig_sampleDesc.channel_count);var timecodeTrak=inputMp4Box.inputIsoFile.moov.traks[1];return timecodeTrak&&"tmcd"==timecodeTrak.samples[0].description.type&&(dashified.startTimecodeOffset=timecodeTrak.samples[0].offset),dashified},MovDasher._getTrack=function(moov,id){for(var i=0;i<moov.traks.length;i++){var trak=moov.traks[i];if(id==trak.tkhd.track_id)return trak}return null},MovDasher.parseEsdsChannelConfig=function(esds,log){if(null==esds||null==esds.esd)return null;var decoderConfigDescr=esds.esd.findDescriptor(4);if(!decoderConfigDescr)return null;var decSpecificInfo=decoderConfigDescr.findDescriptor(5);return decSpecificInfo&&decSpecificInfo.data?2==decSpecificInfo.data.length?decSpecificInfo.data[1]>>3&15:(log.warn("unsupported Decoder Specific Info",decSpecificInfo.data),null):null},MovDasher.loadMov=function(dataSrc,onDone,onError){function loadChunk(chunkStart,chunkEnd){dataSrc.fetch(chunkStart,chunkEnd,function(buffer){buffer.fileStart=chunkStart,buffer.fileStart!==chunkStart&&(buffer=buffer.slice(0),buffer.fileStart=chunkStart);var nextStart=inputMp4Box.appendBuffer(buffer);moovParsed||loadChunk(nextStart,nextStart+1048576)},onError)}var moovParsed=!1,inputMp4Box=new MP4Box((!1));inputMp4Box.onReady=function(){moovParsed=!0,inputMp4Box.flush(),onDone(inputMp4Box)},loadChunk(0,1e4)},MovDasher.getSampleFlags=function(sampleCount,syncSamples){for(var sampleFlags=new Uint32Array(sampleCount),i=0;i<sampleCount;i++)sampleFlags[i]=65536;for(i=0;i<syncSamples.length;i++){var idx=syncSamples[i]-1;sampleFlags[idx]=33554432}return sampleFlags},MovDasher.rescale=function(srcTv,srcTs,dstTs){return srcTv/srcTs*dstTs},MovDasher.mediaToEdited=function(trak,mediaTv,movieTimescale){if(!(trak&&trak.edts&&trak.edts.elst&&trak.edts.elst.entries&&trak.edts.elst.entries.length))return mediaTv;for(var accum=0,i=0;i<trak.edts.elst.entries.length;i++){var edit=trak.edts.elst.entries[i];if(mediaTv<edit.media_time)return accum;var duration=MovDasher.rescale(edit.segment_duration,movieTimescale,trak.mdia.mdhd.timescale);if(edit.media_time!=-1&&(0==duration||mediaTv>=edit.media_time&&mediaTv<edit.media_time+duration)){accum+=mediaTv-edit.media_time;break}accum+=duration}return accum},MovDasher.parseTimePackets=function(mp4box,dataSrc,onDone,onError){var moov=mp4box.inputIsoFile.moov;window.MOOV=moov,moov||onError("moov not found");var videotracks=moov.traks.filter(function(t){return"vide"==t.mdia.hdlr.componentSubType}),audiotracks=moov.traks.filter(function(t){return"soun"==t.mdia.hdlr.componentSubType});if(!(videotracks&&videotracks.length||audiotracks&&audiotracks.length))return void onError("neither video nor audio track found");for(var vtrak=videotracks[0]||audiotracks[0],movieTimescale=moov.mvhd.timescale,sizes=vtrak.mdia.minf.stbl.stsz,timeToSamples=vtrak.mdia.minf.stbl.stts,syncSamples=vtrak.mdia.minf.stbl.stss,compOffsets=vtrak.mdia.minf.stbl.ctts,timescale=vtrak.mdia.mdhd.timescale,sttsInd=0,ssOff=0,pts=0,cttsSubInd=0,cttsInd=0,sttsSubInd=0,pkts=[],i=0;i<sizes.sample_sizes.length;i++){var curFrame=i,duration=timeToSamples.sample_deltas[sttsInd],sync=!syncSamples;syncSamples&&ssOff<syncSamples.sample_numbers.length&&curFrame+1==syncSamples.sample_numbers[ssOff]&&(sync=!0,ssOff++);var realPts=pts;compOffsets&&(realPts=pts+compOffsets.sample_offsets[cttsInd],cttsSubInd++,cttsInd<compOffsets.sample_offsets.length-1&&cttsSubInd==compOffsets.sample_counts[cttsInd]&&(cttsInd++,cttsSubInd=0));var _pts=MovDasher.mediaToEdited(vtrak,realPts,movieTimescale),pkt={pts:_pts,mediaPts:realPts,timescale:timescale,duration:duration,frame:curFrame,sync:sync,timecode:0};for(pkts.push(pkt),pts-=sttsSubInd*timeToSamples.sample_deltas[sttsInd],sttsSubInd+=1;sttsInd<timeToSamples.sample_deltas.length-1&&sttsSubInd>=timeToSamples.sample_counts[sttsInd];)pts+=timeToSamples.sample_counts[sttsInd]*timeToSamples.sample_deltas[sttsInd],sttsSubInd-=timeToSamples.sample_counts[sttsInd],sttsInd++;pts+=sttsSubInd*timeToSamples.sample_deltas[sttsInd]}var tmcdtracks=moov.traks.filter(function(t){return"tmcd"==t.mdia.hdlr.componentSubType});if(tmcdtracks&&tmcdtracks.length){var timecodeTrak=tmcdtracks[0],startTimecodeOffset=timecodeTrak.samples[0].offset;dataSrc.fetch(startTimecodeOffset,startTimecodeOffset+4,function(buf){for(var dv=new DataView(buf),tc=dv.getUint32(0,!1),i=0;i<pkts.length;i++)pkts[i].timecode=i+tc;onDone(pkts)})}else onDone(pkts)},MovDasher.parseTimePacketsInM4s=function(movieMp4box,segmentMp4Box){for(var moov=movieMp4box.inputIsoFile.moov,videotracks=moov.traks.filter(function(t){return"vide"==t.mdia.hdlr.componentSubType}),vtrak=videotracks[0],moof=segmentMp4Box.inputIsoFile.moofs[0],trun=moof.trafs[0].truns[0],movieTimescale=moov.mvhd.timescale,sampleCount=trun.sample_count,timescale=vtrak.mdia.mdhd.timescale,pts=moof.trafs[0].tfdt.baseMediaDecodeTime,pkts=[],i=0;i<sampleCount;i++){var duration=trun.sample_duration[i]||moof.trafs[0].tfhd.default_sample_duration,realPts=pts;trun.flags&BoxParser.TRUN_FLAGS_CTS_OFFSET&&(realPts=pts+trun.sample_composition_time_offset[i]);var _pts=MovDasher.mediaToEdited(vtrak,realPts,movieTimescale),pkt={pts:_pts,mediaPts:realPts,timescale:timescale,duration:duration,frame:-1,sync:!1,timecode:0};pkts.push(pkt),pts+=duration}return pkts},MovDasher.wrapMp3Segment=function(idx,FRAMES_PER_SEGMENT,_totalSamples,_frameSize,mp3Arr){var moof=new BoxParser.moofBox,mfhd=new BoxParser.mfhdBox;mfhd.sequence_number=idx+1,moof.boxes.push(mfhd);var traf=new BoxParser.trafBox,tfhd=new BoxParser.tfhdBox;tfhd.track_id=1,tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_DUR,tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_FLAGS,tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_SIZE,tfhd.default_sample_duration=1152,tfhd.default_sample_flags=0,tfhd.default_sample_size=_frameSize,traf.boxes.push(tfhd);var tfdt=new BoxParser.tfdtBox,frameNum=idx*FRAMES_PER_SEGMENT;tfdt.baseMediaDecodeTime=1152*frameNum,traf.boxes.push(tfdt);var trun=new BoxParser.trunBox;trun.sample_count=mp3Arr.length/_frameSize,trun.flags|=BoxParser.TRUN_FLAGS_DATA_OFFSET,trun.data_offset=-42,traf.boxes.push(trun),moof.boxes.push(traf);var mdat=new BoxParser.mdatBox;mdat.data=mp3Arr;var out=new DataStream((void 0),0,DataStream.BIG_ENDIAN);moof.write(out);var dataOffset=out.byteLength+8;return out.adjustUint32(trun.data_offset_position,dataOffset),mdat.write(out),out.buffer},MovDasher.mp3InitSegment=function(_sampleRate,_totalSamples,_frameSize,onDone){var ftyp=new BoxParser.ftypBox;ftyp.major_brand="dash",ftyp.minor_version=0,ftyp.compatible_brands=["iso6","mp41"];var moov=new BoxParser.moovBox,matrix=[65536,0,0,0,65536,0,0,0,1073741824],mvhd=new BoxParser.mvhdBox;mvhd.timescale=_sampleRate,mvhd.duration=0,mvhd.rate=65536,mvhd.volume=1,mvhd.matrix=matrix,mvhd.next_track_id=2,moov.boxes.push(mvhd);var mvex=new BoxParser.mvexBox,mehd=new BoxParser.mehdBox;mehd.fragment_duration=_totalSamples,mvex.boxes.push(mehd);var trex=new BoxParser.trexBox;trex.track_id=1,trex.default_sample_description_index=1,trex.default_sample_duration=1152,trex.default_sample_size=_frameSize,trex.default_sample_flags=0,mvex.boxes.push(trex),moov.boxes.push(mvex);var trak=new BoxParser.trakBox,tkhd=new BoxParser.tkhdBox;tkhd.track_id=1,tkhd.matrix=matrix,trak.boxes.push(tkhd);var mdia=new BoxParser.mdiaBox,mdhd=new BoxParser.mdhdBox;mdhd.timescale=_sampleRate,mdia.boxes.push(mdhd);var mdiaHdlr=new BoxParser.hdlrBox;mdiaHdlr.componentType="mhlr",mdiaHdlr.componentSubType="soun",mdiaHdlr.name="",mdia.boxes.push(mdiaHdlr);var minf=new BoxParser.minfBox,dinf=new BoxParser.dinfBox,dref=new BoxParser.drefBox,url=new BoxParser["url Box"];dref.entries=[url],dinf.boxes.push(dref),minf.boxes.push(dinf);var smhd=new BoxParser.smhdBox;smhd.data=[0,0,0,0],minf.boxes.push(smhd);var minfHdlr=new BoxParser.hdlrBox;minfHdlr.componentType="dhlr",minfHdlr.componentSubType="url ",minfHdlr.name="",minf.boxes.push(minfHdlr);var stbl=new BoxParser.stblBox,stsd=new BoxParser.stsdBox,audioSampleEntry=new BoxParser.AudioSampleEntry(".mp3");audioSampleEntry.data_reference_index=1,audioSampleEntry.version=1,audioSampleEntry.revision=0,audioSampleEntry.vendor=0,audioSampleEntry.channel_count=2,audioSampleEntry.samplerate=_sampleRate,audioSampleEntry.samplesize=16,audioSampleEntry.compressionId=-2,audioSampleEntry.packetSize=0,audioSampleEntry.samplesPerPacket=1152,audioSampleEntry.bytesPerPacket=_frameSize,audioSampleEntry.bytesPerFrame=_frameSize,audioSampleEntry.bytesPerSample=2,stsd.entries.push(audioSampleEntry),stbl.boxes.push(stsd);var stsz=new BoxParser.stszBox;stsz.sample_sizes=[],stbl.boxes.push(stsz);var stts=new BoxParser.sttsBox;stts.sample_counts=[],stbl.boxes.push(stts);var stco=new BoxParser.stcoBox;stco.chunk_offsets=[],stbl.boxes.push(stco);var stsc=new BoxParser.stscBox;stsc.first_chunk=[],stbl.boxes.push(stsc),minf.boxes.push(stbl),mdia.boxes.push(minf),trak.boxes.push(mdia),moov.boxes.push(trak);var out=new DataStream((void 0),0,DataStream.BIG_ENDIAN);ftyp.write(out),moov.write(out),onDone(out.buffer)},MovDasher.getTrunSamplesInfo=function(segmentMp4Box){for(var moof=segmentMp4Box.inputIsoFile.moofs[0],trun=moof.trafs[0].truns[0],samples=[],i=0,offset=moof.start+trun.data_offset;i<trun.sample_count;i++){var sample={offset:offset,size:trun.sample_size[i]};samples.push(sample),offset+=sample.size}return samples},MovDasher.getAvcC=function(mp4box){var video=mp4box.inputIsoFile.moov.traks[0];return video.mdia.minf.stbl.stsd.entries[0].avcC},MovDasher.createSilenceMoof=function(templateMp4Box,idx,baseMediaDecodeTime,duration,log){var sampleDuration=1024;if(duration%sampleDuration!=0)throw new RuntimeException("silence segment duration "+duration+" is not a multiple of sample duration "+sampleDuration);var moof=new BoxParser.moofBox,mfhd=new BoxParser.mfhdBox;mfhd.sequence_number=idx+1,moof.boxes.push(mfhd);var traf=new BoxParser.trafBox,tfhd=new BoxParser.tfhdBox;tfhd.track_id=1,tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_DUR,tfhd.flags|=BoxParser.TFHD_FLAG_SAMPLE_FLAGS,tfhd.flags|=BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF,tfhd.default_sample_duration=sampleDuration,tfhd.default_sample_flags=33554432,traf.boxes.push(tfhd);var tfdt=new BoxParser.tfdtBox;tfdt.baseMediaDecodeTime=baseMediaDecodeTime,traf.boxes.push(tfdt);var segSampleSizes=[],data=new DataStream((void 0),0,DataStream.BIG_ENDIAN),sampleCount=duration/sampleDuration,sampleDesc=templateMp4Box.inputIsoFile.moov.traks[0].mdia.minf.stbl.stsd.entries[0],channelConfig=MovDasher.parseEsdsChannelConfig(sampleDesc.esds,log)||sampleDesc.channel_count,silenceFrame=THE_SOUND_OF_SILENCE[channelConfig];silenceFrame||(silenceFrame=THE_SOUND_OF_SILENCE[2]);for(var i=0;i<sampleCount;i++)segSampleSizes.push(silenceFrame.length),data.writeUint8Array(silenceFrame);var trun=new BoxParser.trunBox;trun.flags|=BoxParser.TRUN_FLAGS_DATA_OFFSET,trun.flags|=BoxParser.TRUN_FLAGS_SIZE,trun.data_offset=-42,trun.sample_count=sampleCount,trun.sample_size=segSampleSizes,traf.boxes.push(trun),moof.boxes.push(traf);var mdat=new BoxParser.mdatBox;mdat.data=new Uint8Array(data.buffer);var out=new DataStream((void 0),0,DataStream.BIG_ENDIAN);moof.write(out);var dataOffset=out.byteLength+8;return out.adjustUint32(trun.data_offset_position,dataOffset),mdat.write(out),out.buffer},MovDasher.conformMoof=function(segmentBuf,idx,decodeTime){var segmentMp4Box=new MP4Box((!1));segmentBuf.fileStart=0,segmentMp4Box.appendBuffer(segmentBuf),delete segmentMp4Box.inputIsoFile.styp,delete segmentMp4Box.inputIsoFile.sidx,segmentMp4Box.inputIsoFile.boxes=segmentMp4Box.inputIsoFile.boxes.filter(function(box){return"styp"!=box.type&&"sidx"!=box.type});var moof=segmentMp4Box.inputIsoFile.moofs[0],traf=moof.trafs[0];moof.mfhd.sequence_number=idx+1,traf.tfdt.baseMediaDecodeTime=decodeTime,traf.tfhd.flags|=BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF;var mdat=segmentMp4Box.inputIsoFile.mdats[0];mdat.data=new Uint8Array(segmentBuf.slice(mdat.start+8,mdat.start+mdat.size));var out=new DataStream((void 0),0,DataStream.BIG_ENDIAN);moof.write(out);var dataOffset=out.byteLength+8;return out.adjustUint32(traf.truns[0].data_offset_position,dataOffset),mdat.write(out),out.buffer};var THE_SOUND_OF_SILENCE={1:[0,200,0,128,35,128],2:[33,0,73,144,2,25,0,35,128],6:[0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,24,50,0,32,8,224]};MovDasher.hasBFrames=function(mp4Box,trackId){var trak=MovDasher._getTrack(mp4Box.inputIsoFile.moov,trackId);return null!=trak.mdia.minf.stbl.ctts},module.exports=MovDasher},function(module,exports,__webpack_require__){var Log=function(){var start=new Date,LOG_LEVEL_ERROR=4,LOG_LEVEL_WARNING=3,LOG_LEVEL_INFO=2,LOG_LEVEL_DEBUG=1,log_level=LOG_LEVEL_ERROR,logObject={setLogLevel:function(level){log_level=level==this.debug?LOG_LEVEL_DEBUG:level==this.info?LOG_LEVEL_INFO:level==this.warn?LOG_LEVEL_WARNING:level==this.error?LOG_LEVEL_ERROR:LOG_LEVEL_ERROR},debug:function(module,msg){LOG_LEVEL_DEBUG>=log_level&&console.debug("["+Log.getDurationString(new Date-start,1e3)+"]","["+module+"]",msg)},info:function(module,msg){LOG_LEVEL_INFO>=log_level&&console.info("["+Log.getDurationString(new Date-start,1e3)+"]","["+module+"]",msg)},warn:function(module,msg){LOG_LEVEL_WARNING>=log_level&&console.warn("["+Log.getDurationString(new Date-start,1e3)+"]","["+module+"]",msg)},error:function(module,msg){LOG_LEVEL_ERROR>=log_level&&console.error("["+Log.getDurationString(new Date-start,1e3)+"]","["+module+"]",msg)}};return logObject}();Log.getDurationString=function(duration,_timescale){function pad(number,length){for(var str=""+number,a=str.split(".");a[0].length<length;)a[0]="0"+a[0];return a.join(".")}var neg;duration<0?(neg=!0,duration=-duration):neg=!1;var timescale=_timescale||1,duration_sec=duration/timescale,hours=Math.floor(duration_sec/3600);duration_sec-=3600*hours;var minutes=Math.floor(duration_sec/60);duration_sec-=60*minutes;var msec=1e3*duration_sec;return duration_sec=Math.floor(duration_sec),msec-=1e3*duration_sec,msec=Math.floor(msec),(neg?"-":"")+hours+":"+pad(minutes,2)+":"+pad(duration_sec,2)+"."+pad(msec,3)},Log.printRanges=function(ranges){var length=ranges.length;if(length>0){for(var str="",i=0;i<length;i++)i>0&&(str+=","),str+="["+Log.getDurationString(ranges.start(i))+","+Log.getDurationString(ranges.end(i))+"]";return str}return"(empty)"};var MP4BoxStream=function(arrayBuffer){if(!(arrayBuffer instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=arrayBuffer,this.uint8=new Uint8Array(arrayBuffer),this.position=0};MP4BoxStream.prototype.getPosition=function(){return this.position},MP4BoxStream.prototype.getEndPosition=function(){return this.buffer.byteLength},MP4BoxStream.prototype.getLength=function(){return this.buffer.byteLength},MP4BoxStream.prototype.seek=function(pos){var npos=Math.max(0,Math.min(this.uint8.length,pos));return this.position=isNaN(npos)||!isFinite(npos)?0:npos,!0},MP4BoxStream.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},MP4BoxStream.prototype.readUint8=function(){var u8;if(this.position+1<=this.uint8.length)return u8=this.uint8[this.position],this.position++,u8;throw"Not enough bytes in buffer"},MP4BoxStream.prototype.readUint16=function(){var u8_1,u8_2,u16;if(this.position+2<=this.uint8.length)return u8_1=this.uint8[this.position],this.position++,u8_2=this.uint8[this.position],this.position++,u16=u8_1<<8|u8_2;throw"Not enough bytes in buffer"},MP4BoxStream.prototype.readUint24=function(){var u24;if(this.position+3<=this.uint8.length)return u24=this.uint8[this.position]<<16,this.position++,u24|=this.uint8[this.position]<<8,this.position++,u24|=this.uint8[this.position],this.position++,u24;throw"Not enough bytes in buffer"},MP4BoxStream.prototype.readUint32=function(){var u32;if(this.position+4<=this.uint8.length)return u32=this.uint8[this.position]<<24,this.position++,u32|=this.uint8[this.position]<<16,this.position++,u32|=this.uint8[this.position]<<8,this.position++,u32|=this.uint8[this.position],this.position++,u32;throw"Not enough bytes in buffer"},MP4BoxStream.prototype.readUint64=function(){var u64;if(this.position+8<=this.uint8.length)return u64=this.readUint32()<<32,u64|=this.readUint32();throw"Not enough bytes in buffer"},MP4BoxStream.prototype.readString=function(length){if(this.position+length<=this.uint8.length){for(var s="",i=0;i<length;i++)s+=String.fromCharCode(this.readUint8());return s}throw"Not enough bytes in buffer"},MP4BoxStream.prototype.readCString=function(){for(var arr=[];;){var b=this.readUint8();if(0===b)break;arr.push(b)}return String.fromCharCode.apply(null,arr)},MP4BoxStream.prototype.readInt8=function(){return this.readUint8()},MP4BoxStream.prototype.readInt16=function(){return this.readUint16()},MP4BoxStream.prototype.readInt32=function(){return this.readUint32()},MP4BoxStream.prototype.readUint8Array=function(length){for(var arr=[],i=0;i<length;i++)arr[i]=this.readUint8();return arr},MP4BoxStream.prototype.readInt16Array=function(length){for(var arr=[],i=0;i<length;i++)arr[i]=this.readUint16();return arr},MP4BoxStream.prototype.readUint32Array=function(length){for(var arr=[],i=0;i<length;i++)arr[i]=this.readUint32();return arr},MP4BoxStream.prototype.readInt32Array=function(length){for(var arr=[],i=0;i<length;i++)arr[i]=this.readInt32();return arr};var DataStream=function(arrayBuffer,byteOffset,endianness){this._byteOffset=byteOffset||0,arrayBuffer instanceof ArrayBuffer?this.buffer=arrayBuffer:"object"==typeof arrayBuffer?(this.dataView=arrayBuffer,byteOffset&&(this._byteOffset+=byteOffset)):this.buffer=new ArrayBuffer(arrayBuffer||0),this.position=0,this.endianness=null==endianness?DataStream.LITTLE_ENDIAN:endianness};DataStream.prototype={},DataStream.prototype.getPosition=function(){return this.position},DataStream.prototype._realloc=function(extra){if(this._dynamicSize){var req=this._byteOffset+this.position+extra,blen=this._buffer.byteLength;if(req<=blen)return void(req>this._byteLength&&(this._byteLength=req));for(blen<1&&(blen=1);req>blen;)blen*=2;var buf=new ArrayBuffer(blen),src=new Uint8Array(this._buffer),dst=new Uint8Array(buf,0,src.length);dst.set(src),
this.buffer=buf,this._byteLength=req}},DataStream.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var buf=new ArrayBuffer(this._byteLength),dst=new Uint8Array(buf),src=new Uint8Array(this._buffer,0,dst.length);dst.set(src),this.buffer=buf}},DataStream.BIG_ENDIAN=!1,DataStream.LITTLE_ENDIAN=!0,DataStream.prototype._byteLength=0,Object.defineProperty(DataStream.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(DataStream.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(v){this._buffer=v,0!==this._buffer.byteLength||this._byteOffset?this._dataView=new DataView(this._buffer,this._byteOffset):this._dataView=new DataView(this._buffer),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(DataStream.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(v){this._byteOffset=v,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(DataStream.prototype,"dataView",{get:function(){return this._dataView},set:function(v){this._byteOffset=v.byteOffset,this._buffer=v.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+v.byteLength}}),DataStream.prototype.seek=function(pos){var npos=Math.max(0,Math.min(this.byteLength,pos));this.position=isNaN(npos)||!isFinite(npos)?0:npos},DataStream.prototype.isEof=function(){return this.position>=this._byteLength},DataStream.prototype.mapUint8Array=function(length){this._realloc(1*length);var arr=new Uint8Array(this._buffer,this.byteOffset+this.position,length);return this.position+=1*length,arr},DataStream.prototype.readInt32Array=function(length,e){length=null==length?this.byteLength-this.position/4:length;var arr=new Int32Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=arr.byteLength,arr},DataStream.prototype.readInt16Array=function(length,e){length=null==length?this.byteLength-this.position/2:length;var arr=new Int16Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=arr.byteLength,arr},DataStream.prototype.readInt8Array=function(length){length=null==length?this.byteLength-this.position:length;var arr=new Int8Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),this.position+=arr.byteLength,arr},DataStream.prototype.readUint32Array=function(length,e){length=null==length?this.byteLength-this.position/4:length;var arr=new Uint32Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=arr.byteLength,arr},DataStream.prototype.readUint16Array=function(length,e){length=null==length?this.byteLength-this.position/2:length;var arr=new Uint16Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=arr.byteLength,arr},DataStream.prototype.readUint8Array=function(length){length=null==length?this.byteLength-this.position:length;var arr=new Uint8Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),this.position+=arr.byteLength,arr},DataStream.prototype.readFloat64Array=function(length,e){length=null==length?this.byteLength-this.position/8:length;var arr=new Float64Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=arr.byteLength,arr},DataStream.prototype.readFloat32Array=function(length,e){length=null==length?this.byteLength-this.position/4:length;var arr=new Float32Array(length);return DataStream.memcpy(arr.buffer,0,this.buffer,this.byteOffset+this.position,length*arr.BYTES_PER_ELEMENT),DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=arr.byteLength,arr},DataStream.prototype.readInt32=function(e){var v=this._dataView.getInt32(this.position,null==e?this.endianness:e);return this.position+=4,v},DataStream.prototype.readInt16=function(e){var v=this._dataView.getInt16(this.position,null==e?this.endianness:e);return this.position+=2,v},DataStream.prototype.readInt8=function(){var v=this._dataView.getInt8(this.position);return this.position+=1,v},DataStream.prototype.readUint32=function(e){var v=this._dataView.getUint32(this.position,null==e?this.endianness:e);return this.position+=4,v},DataStream.prototype.readUint16=function(e){var v=this._dataView.getUint16(this.position,null==e?this.endianness:e);return this.position+=2,v},DataStream.prototype.readUint8=function(){var v=this._dataView.getUint8(this.position);return this.position+=1,v},DataStream.prototype.readFloat32=function(e){var v=this._dataView.getFloat32(this.position,null==e?this.endianness:e);return this.position+=4,v},DataStream.prototype.readFloat64=function(e){var v=this._dataView.getFloat64(this.position,null==e?this.endianness:e);return this.position+=8,v},DataStream.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,DataStream.memcpy=function(dst,dstOffset,src,srcOffset,byteLength){var dstU8=new Uint8Array(dst,dstOffset,byteLength),srcU8=new Uint8Array(src,srcOffset,byteLength);dstU8.set(srcU8)},DataStream.arrayToNative=function(array,arrayIsLittleEndian){return arrayIsLittleEndian==this.endianness?array:this.flipArrayEndianness(array)},DataStream.nativeToEndian=function(array,littleEndian){return this.endianness==littleEndian?array:this.flipArrayEndianness(array)},DataStream.flipArrayEndianness=function(array){for(var u8=new Uint8Array(array.buffer,array.byteOffset,array.byteLength),i=0;i<array.byteLength;i+=array.BYTES_PER_ELEMENT)for(var j=i+array.BYTES_PER_ELEMENT-1,k=i;j>k;j--,k++){var tmp=u8[k];u8[k]=u8[j],u8[j]=tmp}return array},DataStream.prototype.failurePosition=0,String.fromCharCodeUint8=function(uint8arr){for(var arr=[],i=0;i<uint8arr.length;i++)arr[i]=uint8arr[i];return String.fromCharCode.apply(null,arr)},DataStream.prototype.readString=function(length,encoding){return null==encoding||"ASCII"==encoding?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==length?this.byteLength-this.position:length)]):new TextDecoder(encoding).decode(this.mapUint8Array(length))},DataStream.prototype.readCString=function(length){var blen=this.byteLength-this.position,u8=new Uint8Array(this._buffer,this._byteOffset+this.position),len=blen;null!=length&&(len=Math.min(length,blen));for(var i=0;i<len&&0!==u8[i];i++);var s=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(i)]);return null!=length?this.position+=len-i:i!=blen&&(this.position+=1),s};var MAX_SIZE=Math.pow(2,32);DataStream.prototype.readUint64=function(){return this.readUint32()*MAX_SIZE+this.readUint32()},DataStream.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},exports.DataStream=DataStream,DataStream.prototype.save=function(filename){var blob=new Blob([this.buffer]),URL=window.webkitURL||window.URL;if(!URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";var url=URL.createObjectURL(blob),a=document.createElement("a");a.setAttribute("href",url),a.setAttribute("download",filename),a.click(),URL.revokeObjectURL(url)},DataStream.prototype._dynamicSize=!0,Object.defineProperty(DataStream.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(v){v||this._trimAlloc(),this._dynamicSize=v}}),DataStream.prototype.shift=function(offset){var buf=new ArrayBuffer(this._byteLength-offset),dst=new Uint8Array(buf),src=new Uint8Array(this._buffer,offset,dst.length);dst.set(src),this.buffer=buf,this.position-=offset},DataStream.prototype.writeInt32Array=function(arr,e){if(this._realloc(4*arr.length),arr instanceof Int32Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapInt32Array(arr.length,e);else for(var i=0;i<arr.length;i++)this.writeInt32(arr[i],e)},DataStream.prototype.writeInt16Array=function(arr,e){if(this._realloc(2*arr.length),arr instanceof Int16Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapInt16Array(arr.length,e);else for(var i=0;i<arr.length;i++)this.writeInt16(arr[i],e)},DataStream.prototype.writeInt8Array=function(arr){if(this._realloc(1*arr.length),arr instanceof Int8Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapInt8Array(arr.length);else for(var i=0;i<arr.length;i++)this.writeInt8(arr[i])},DataStream.prototype.writeUint32Array=function(arr,e){if(this._realloc(4*arr.length),arr instanceof Uint32Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapUint32Array(arr.length,e);else for(var i=0;i<arr.length;i++)this.writeUint32(arr[i],e)},DataStream.prototype.writeUint16Array=function(arr,e){if(this._realloc(2*arr.length),arr instanceof Uint16Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapUint16Array(arr.length,e);else for(var i=0;i<arr.length;i++)this.writeUint16(arr[i],e)},DataStream.prototype.writeUint8Array=function(arr){if(this._realloc(1*arr.length),arr instanceof Uint8Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapUint8Array(arr.length);else for(var i=0;i<arr.length;i++)this.writeUint8(arr[i])},DataStream.prototype.writeFloat64Array=function(arr,e){if(this._realloc(8*arr.length),arr instanceof Float64Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapFloat64Array(arr.length,e);else for(var i=0;i<arr.length;i++)this.writeFloat64(arr[i],e)},DataStream.prototype.writeFloat32Array=function(arr,e){if(this._realloc(4*arr.length),arr instanceof Float32Array&&this.byteOffset+this.position%arr.BYTES_PER_ELEMENT===0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,arr.buffer,0,arr.byteLength),this.mapFloat32Array(arr.length,e);else for(var i=0;i<arr.length;i++)this.writeFloat32(arr[i],e)},DataStream.prototype.writeInt32=function(v,e){this._realloc(4),this._dataView.setInt32(this.position,v,null==e?this.endianness:e),this.position+=4},DataStream.prototype.writeInt16=function(v,e){this._realloc(2),this._dataView.setInt16(this.position,v,null==e?this.endianness:e),this.position+=2},DataStream.prototype.writeInt8=function(v){this._realloc(1),this._dataView.setInt8(this.position,v),this.position+=1},DataStream.prototype.writeUint32=function(v,e){this._realloc(4),this._dataView.setUint32(this.position,v,null==e?this.endianness:e),this.position+=4},DataStream.prototype.writeUint16=function(v,e){this._realloc(2),this._dataView.setUint16(this.position,v,null==e?this.endianness:e),this.position+=2},DataStream.prototype.writeUint8=function(v){this._realloc(1),this._dataView.setUint8(this.position,v),this.position+=1},DataStream.prototype.writeFloat32=function(v,e){this._realloc(4),this._dataView.setFloat32(this.position,v,null==e?this.endianness:e),this.position+=4},DataStream.prototype.writeFloat64=function(v,e){this._realloc(8),this._dataView.setFloat64(this.position,v,null==e?this.endianness:e),this.position+=8},DataStream.prototype.writeUCS2String=function(str,endianness,lengthOverride){null==lengthOverride&&(lengthOverride=str.length);for(var i=0;i<str.length&&i<lengthOverride;i++)this.writeUint16(str.charCodeAt(i),endianness);for(;i<lengthOverride;i++)this.writeUint16(0)},DataStream.prototype.writeString=function(s,encoding,length){var i=0;if(null==encoding||"ASCII"==encoding)if(null!=length){var len=Math.min(s.length,length);for(i=0;i<len;i++)this.writeUint8(s.charCodeAt(i));for(;i<length;i++)this.writeUint8(0)}else for(i=0;i<s.length;i++)this.writeUint8(s.charCodeAt(i));else this.writeUint8Array(new TextEncoder(encoding).encode(s.substring(0,length)))},DataStream.prototype.writeCString=function(s,length){var i=0;if(null!=length){var len=Math.min(s.length,length);for(i=0;i<len;i++)this.writeUint8(s.charCodeAt(i));for(;i<length;i++)this.writeUint8(0)}else{for(i=0;i<s.length;i++)this.writeUint8(s.charCodeAt(i));this.writeUint8(0)}},DataStream.prototype.writeStruct=function(structDefinition,struct){for(var i=0;i<structDefinition.length;i+=2){var t=structDefinition[i+1];this.writeType(t,struct[structDefinition[i]],struct)}},DataStream.prototype.writeType=function(t,v,struct){var tp;if("function"==typeof t)return t(this,v);if("object"==typeof t&&!(t instanceof Array))return t.set(this,v,struct);var lengthOverride=null,charset="ASCII",pos=this.position;switch("string"==typeof t&&/:/.test(t)&&(tp=t.split(":"),t=tp[0],lengthOverride=parseInt(tp[1])),"string"==typeof t&&/,/.test(t)&&(tp=t.split(","),t=tp[0],charset=parseInt(tp[1])),t){case"uint8":this.writeUint8(v);break;case"int8":this.writeInt8(v);break;case"uint16":this.writeUint16(v,this.endianness);break;case"int16":this.writeInt16(v,this.endianness);break;case"uint32":this.writeUint32(v,this.endianness);break;case"int32":this.writeInt32(v,this.endianness);break;case"float32":this.writeFloat32(v,this.endianness);break;case"float64":this.writeFloat64(v,this.endianness);break;case"uint16be":this.writeUint16(v,DataStream.BIG_ENDIAN);break;case"int16be":this.writeInt16(v,DataStream.BIG_ENDIAN);break;case"uint32be":this.writeUint32(v,DataStream.BIG_ENDIAN);break;case"int32be":this.writeInt32(v,DataStream.BIG_ENDIAN);break;case"float32be":this.writeFloat32(v,DataStream.BIG_ENDIAN);break;case"float64be":this.writeFloat64(v,DataStream.BIG_ENDIAN);break;case"uint16le":this.writeUint16(v,DataStream.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(v,DataStream.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(v,DataStream.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(v,DataStream.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(v,DataStream.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(v,DataStream.LITTLE_ENDIAN);break;case"cstring":this.writeCString(v,lengthOverride);break;case"string":this.writeString(v,charset,lengthOverride);break;case"u16string":this.writeUCS2String(v,this.endianness,lengthOverride);break;case"u16stringle":this.writeUCS2String(v,DataStream.LITTLE_ENDIAN,lengthOverride);break;case"u16stringbe":this.writeUCS2String(v,DataStream.BIG_ENDIAN,lengthOverride);break;default:if(3==t.length){for(var ta=t[1],i=0;i<v.length;i++)this.writeType(ta,v[i]);break}this.writeStruct(t,v)}null!=lengthOverride&&(this.position=pos,this._realloc(lengthOverride),this.position=pos+lengthOverride)},DataStream.prototype.writeUint64=function(v){var h=Math.floor(v/MAX_SIZE);this.writeUint32(h),this.writeUint32(4294967295&v)},DataStream.prototype.writeUint24=function(v){this.writeUint8((16711680&v)>>16),this.writeUint8((65280&v)>>8),this.writeUint8(255&v)},DataStream.prototype.adjustUint32=function(position,value){var pos=this.position;this.seek(position),this.writeUint32(value),this.seek(pos)},DataStream.prototype.mapInt32Array=function(length,e){this._realloc(4*length);var arr=new Int32Array(this._buffer,this.byteOffset+this.position,length);return DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=4*length,arr},DataStream.prototype.mapInt16Array=function(length,e){this._realloc(2*length);var arr=new Int16Array(this._buffer,this.byteOffset+this.position,length);return DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=2*length,arr},DataStream.prototype.mapInt8Array=function(length){this._realloc(1*length);var arr=new Int8Array(this._buffer,this.byteOffset+this.position,length);return this.position+=1*length,arr},DataStream.prototype.mapUint32Array=function(length,e){this._realloc(4*length);var arr=new Uint32Array(this._buffer,this.byteOffset+this.position,length);return DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=4*length,arr},DataStream.prototype.mapUint16Array=function(length,e){this._realloc(2*length);var arr=new Uint16Array(this._buffer,this.byteOffset+this.position,length);return DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=2*length,arr},DataStream.prototype.mapFloat64Array=function(length,e){this._realloc(8*length);var arr=new Float64Array(this._buffer,this.byteOffset+this.position,length);return DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=8*length,arr},DataStream.prototype.mapFloat32Array=function(length,e){this._realloc(4*length);var arr=new Float32Array(this._buffer,this.byteOffset+this.position,length);return DataStream.arrayToNative(arr,null==e?this.endianness:e),this.position+=4*length,arr};var MultiBufferStream=function(buffer){this.buffers=[],this.bufferIndex=-1,buffer&&(this.insertBuffer(buffer),this.bufferIndex=0)};MultiBufferStream.prototype=new DataStream(new ArrayBuffer,0,DataStream.BIG_ENDIAN),MultiBufferStream.prototype.initialized=function(){var firstBuffer;return this.bufferIndex>-1||(this.buffers.length>0?(firstBuffer=this.buffers[0],0===firstBuffer.fileStart?(this.buffer=firstBuffer,this.bufferIndex=0,Log.debug("MultiBufferStream","Stream ready for parsing"),!0):(Log.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(Log.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(buffer1,buffer2){Log.debug("ArrayBuffer","Trying to create a new buffer of size: "+(buffer1.byteLength+buffer2.byteLength));var tmp=new Uint8Array(buffer1.byteLength+buffer2.byteLength);return tmp.set(new Uint8Array(buffer1),0),tmp.set(new Uint8Array(buffer2),buffer1.byteLength),tmp.buffer},MultiBufferStream.prototype.reduceBuffer=function(buffer,offset,newLength){var smallB;return smallB=new Uint8Array(newLength),smallB.set(new Uint8Array(buffer,offset,newLength)),smallB.buffer.fileStart=buffer.fileStart+offset,smallB.buffer.usedBytes=0,smallB.buffer},MultiBufferStream.prototype.insertBuffer=function(ab){for(var to_add=!0,i=0;i<this.buffers.length;i++){var b=this.buffers[i];if(ab.fileStart<=b.fileStart){if(ab.fileStart===b.fileStart){if(ab.byteLength>b.byteLength){this.buffers.splice(i,1),i--;continue}Log.warn("MultiBufferStream","Buffer (fileStart: "+ab.fileStart+" - Length: "+ab.byteLength+") already appended, ignoring")}else ab.fileStart+ab.byteLength<=b.fileStart||(ab=this.reduceBuffer(ab,0,b.fileStart-ab.fileStart)),Log.debug("MultiBufferStream","Appending new buffer (fileStart: "+ab.fileStart+" - Length: "+ab.byteLength+")"),this.buffers.splice(i,0,ab),0===i&&(this.buffer=ab);to_add=!1;break}if(ab.fileStart<b.fileStart+b.byteLength){var offset=b.fileStart+b.byteLength-ab.fileStart,newLength=ab.byteLength-offset;if(!(newLength>0)){to_add=!1;break}ab=this.reduceBuffer(ab,offset,newLength)}}to_add&&(Log.debug("MultiBufferStream","Appending new buffer (fileStart: "+ab.fileStart+" - Length: "+ab.byteLength+")"),this.buffers.push(ab),0===i&&(this.buffer=ab))},MultiBufferStream.prototype.logBufferLevel=function(info){var i,buffer,used,total,range,ranges=[],bufferedString="";for(used=0,total=0,i=0;i<this.buffers.length;i++)buffer=this.buffers[i],0===i?(range={},ranges.push(range),range.start=buffer.fileStart,range.end=buffer.fileStart+buffer.byteLength,bufferedString+="["+range.start+"-"):range.end===buffer.fileStart?range.end=buffer.fileStart+buffer.byteLength:(range={},range.start=buffer.fileStart,bufferedString+=ranges[ranges.length-1].end-1+"], ["+range.start+"-",range.end=buffer.fileStart+buffer.byteLength,ranges.push(range)),used+=buffer.usedBytes,total+=buffer.byteLength;ranges.length>0&&(bufferedString+=range.end-1+"]");var log=info?Log.info:Log.debug;0===this.buffers.length?log("MultiBufferStream","No more buffer in memory"):log("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+used+"/"+total+" bytes): "+bufferedString)},MultiBufferStream.prototype.cleanBuffers=function(){var i,buffer;for(i=0;i<this.buffers.length;i++)buffer=this.buffers[i],buffer.usedBytes===buffer.byteLength&&(Log.debug("MultiBufferStream","Removing buffer #"+i),this.buffers.splice(i,1),i--)},MultiBufferStream.prototype.mergeNextBuffer=function(){var next_buffer;if(this.bufferIndex+1<this.buffers.length){if(next_buffer=this.buffers[this.bufferIndex+1],next_buffer.fileStart===this.buffer.fileStart+this.buffer.byteLength){var oldLength=this.buffer.byteLength,oldUsedBytes=this.buffer.usedBytes,oldFileStart=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,next_buffer),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=oldUsedBytes,this.buffer.fileStart=oldFileStart,Log.debug("ISOFile","Concatenating buffer for box parsing (length: "+oldLength+"->"+this.buffer.byteLength+")"),!0}return!1}return!1},MultiBufferStream.prototype.findPosition=function(fromStart,filePosition,markAsUsed){var i,abuffer=null,index=-1;for(i=fromStart===!0?0:this.bufferIndex;i<this.buffers.length&&(abuffer=this.buffers[i],abuffer.fileStart<=filePosition);)index=i,markAsUsed&&(abuffer.fileStart+abuffer.byteLength<=filePosition?abuffer.usedBytes=abuffer.byteLength:abuffer.usedBytes=filePosition-abuffer.fileStart,this.logBufferLevel()),i++;return index!==-1?(abuffer=this.buffers[index],abuffer.fileStart+abuffer.byteLength>=filePosition?(Log.debug("MultiBufferStream","Found position in existing buffer #"+index),index):-1):-1},MultiBufferStream.prototype.findEndContiguousBuf=function(inputindex){var i,currentBuf,nextBuf,index=void 0!==inputindex?inputindex:this.bufferIndex;if(currentBuf=this.buffers[index],this.buffers.length>index+1)for(i=index+1;i<this.buffers.length&&(nextBuf=this.buffers[i],nextBuf.fileStart===currentBuf.fileStart+currentBuf.byteLength);i++)currentBuf=nextBuf;return currentBuf.fileStart+currentBuf.byteLength},MultiBufferStream.prototype.getEndFilePositionAfter=function(pos){var index=this.findPosition(!0,pos,!1);return index!==-1?this.findEndContiguousBuf(index):pos},MultiBufferStream.prototype.addUsedBytes=function(nbBytes){this.buffer.usedBytes+=nbBytes,this.logBufferLevel()},MultiBufferStream.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},MultiBufferStream.prototype.seek=function(filePosition,fromStart,markAsUsed){var index;return index=this.findPosition(fromStart,filePosition,markAsUsed),index!==-1?(this.buffer=this.buffers[index],this.bufferIndex=index,this.position=filePosition-this.buffer.fileStart,Log.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(Log.debug("MultiBufferStream","Position "+filePosition+" not found in buffered data"),!1)},MultiBufferStream.prototype.getPosition=function(){if(this.bufferIndex===-1||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},MultiBufferStream.prototype.getLength=function(){return this.byteLength},MultiBufferStream.prototype.getEndPosition=function(){if(this.bufferIndex===-1||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength};var MPEG4DescriptorParser=function(){var ES_DescrTag=3,DecoderConfigDescrTag=4,DecSpecificInfoTag=5,SLConfigDescrTag=6,descTagToName=[];descTagToName[ES_DescrTag]="ES_Descriptor",descTagToName[DecoderConfigDescrTag]="DecoderConfigDescriptor",descTagToName[DecSpecificInfoTag]="DecoderSpecificInfo",descTagToName[SLConfigDescrTag]="SLConfigDescriptor";var that=this,classes={};return this.parseOneDescriptor=function(stream){var tag,desc,byteRead,hdrSize=0,size=0;for(tag=stream.readUint8(),hdrSize++,byteRead=stream.readUint8(),hdrSize++;128&byteRead;)size=(127&byteRead)<<7,byteRead=stream.readUint8(),hdrSize++;return size+=127&byteRead,Log.debug("MPEG4DescriptorParser","Found "+(descTagToName[tag]||"Descriptor "+tag)+", size "+size+" at position "+stream.getPosition()),desc=descTagToName[tag]?new classes[descTagToName[tag]](size):new classes.Descriptor(size),desc.parse(stream),desc},classes.Descriptor=function(_tag,_size){this.tag=_tag,this.size=_size,this.descs=[]},classes.Descriptor.prototype.parse=function(stream){this.data=stream.readUint8Array(this.size)},classes.Descriptor.prototype.findDescriptor=function(tag){for(var i=0;i<this.descs.length;i++)if(this.descs[i].tag==tag)return this.descs[i];return null},classes.Descriptor.prototype.parseRemainingDescriptors=function(stream){for(var start=stream.position;stream.position<start+this.size;){var desc=that.parseOneDescriptor(stream);this.descs.push(desc)}},classes.ES_Descriptor=function(size){classes.Descriptor.call(this,ES_DescrTag,size)},classes.ES_Descriptor.prototype=new classes.Descriptor,classes.ES_Descriptor.prototype.parse=function(stream){if(this.ES_ID=stream.readUint16(),this.flags=stream.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=stream.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags){var l=stream.readUint8();this.URL=stream.readString(l),this.size-=l+1}else this.URL=null;32&this.flags?(this.OCR_ES_ID=stream.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(stream)},classes.ES_Descriptor.prototype.getOTI=function(stream){var dcd=this.findDescriptor(DecoderConfigDescrTag);return dcd?dcd.oti:0},classes.ES_Descriptor.prototype.getAudioConfig=function(stream){var dcd=this.findDescriptor(DecoderConfigDescrTag);if(!dcd)return null;var dsi=dcd.findDescriptor(DecSpecificInfoTag);return dsi&&dsi.data?(248&dsi.data[0])>>3:null},classes.DecoderConfigDescriptor=function(size){classes.Descriptor.call(this,DecoderConfigDescrTag,size)},classes.DecoderConfigDescriptor.prototype=new classes.Descriptor,classes.DecoderConfigDescriptor.prototype.parse=function(stream){this.oti=stream.readUint8(),this.streamType=stream.readUint8(),this.bufferSize=stream.readUint24(),this.maxBitrate=stream.readUint32(),this.avgBitrate=stream.readUint32(),this.size-=13,this.parseRemainingDescriptors(stream)},classes.DecoderSpecificInfo=function(size){classes.Descriptor.call(this,DecSpecificInfoTag,size)},classes.DecoderSpecificInfo.prototype=new classes.Descriptor,classes.SLConfigDescriptor=function(size){classes.Descriptor.call(this,SLConfigDescrTag,size)},classes.SLConfigDescriptor.prototype=new classes.Descriptor,this},BoxParser={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,boxCodes:["mdat","idat","free","skip","avcC","hvcC","ftyp","styp","payl","vttC","rtp ","sdp ","btrt","frma","trpy","tpyl","totl","tpay","dmed","dimm","drep","nump","npck","maxr","tmin","tmax","dmax","pmax","payt","vmhd","smhd","hmhd","idat","meco","udta","strk","free","skip"],fullBoxCodes:["mvhd","tkhd","mdhd","hdlr","vmhd","smhd","hmhd","nmhd","url ","urn ","ctts","cslg","stco","co64","stsc","stss","stsz","stz2","stts","stsh","mehd","trex","mfhd","tfhd","trun","tfdt","esds","subs","txtC","sidx","emsg","prft","pssh","elst","dref","url ","urn ","sbgp","sgpd","cprt","iods","ssix","tfra","mfro","pdin","tsel","trep","leva","stri","stsg","schm","stvi","padb","stdp","sdtp","saio","saiz","meta","xml ","bxml","iloc","pitm","ipro","iinf","infe","iref","mere","kind","elng"],containerBoxCodes:[["moov",["trak","sidx"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["udta"],["mfra"],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp"],["wave"]],sampleEntryCodes:[{prefix:"Visual",types:["mp4v","avc1","avc2","avc3","avc4","avcp","drac","encv","mjp2","mvc1","mvc2","resv","s263","svc1","vc-1","hvc1","hev1"]},{prefix:"Audio",types:["mp4a","ac-3","alac","dra1","dtsc","dtse",,"dtsh","dtsl","ec-3","enca","g719","g726","m4ae","mlpa","raw ","samr","sawb","sawp","sevc","sqcp","ssmv","twos",".mp3"]},{prefix:"Hint",types:["fdp ","m2ts","pm2t","prtp","rm2t","rrtp","rsrp","rtp ","sm2t","srtp"]},{prefix:"Metadata",types:["metx","mett","urim"]},{prefix:"Subtitle",types:["stpp","wvtt","sbtt","tx3g","stxt"]},{prefix:"System",types:["mp4s"]}],sampleGroupEntryCodes:["roll","prol","alst","rap ","tele","avss","avll","sync","tscl","tsas","stsa","scif","mvif","scnm","dtrt","vipr","tele","rash"],trackGroupTypes:["msrc"],initialize:function(){var i,j,length;for(BoxParser.FullBox.prototype=new BoxParser.Box,BoxParser.ContainerBox.prototype=new BoxParser.Box,BoxParser.SampleEntry.prototype=new BoxParser.FullBox,BoxParser.TrackGroupTypeBox.prototype=new BoxParser.FullBox,length=BoxParser.boxCodes.length,i=0;i<length;i++)BoxParser[BoxParser.boxCodes[i]+"Box"]=function(j){return function(size){BoxParser.Box.call(this,BoxParser.boxCodes[j],size)}}(i),BoxParser[BoxParser.boxCodes[i]+"Box"].prototype=new BoxParser.Box;for(length=BoxParser.fullBoxCodes.length,i=0;i<length;i++)BoxParser[BoxParser.fullBoxCodes[i]+"Box"]=function(j){return function(size){BoxParser.FullBox.call(this,BoxParser.fullBoxCodes[j],size)}}(i),BoxParser[BoxParser.fullBoxCodes[i]+"Box"].prototype=new BoxParser.FullBox;for(length=BoxParser.containerBoxCodes.length,i=0;i<length;i++)BoxParser[BoxParser.containerBoxCodes[i][0]+"Box"]=function(j,subBoxNames){return function(size){if(BoxParser.ContainerBox.call(this,BoxParser.containerBoxCodes[j][0],size),subBoxNames){this.subBoxNames=subBoxNames;for(var nbSubBoxes=subBoxNames.length,k=0;k<nbSubBoxes;k++)this[subBoxNames[k]+"s"]=[]}}}(i,BoxParser.containerBoxCodes[i][1]),BoxParser[BoxParser.containerBoxCodes[i][0]+"Box"].prototype=new BoxParser.ContainerBox;for(length=BoxParser.sampleEntryCodes.length,j=0;j<length;j++){var prefix=BoxParser.sampleEntryCodes[j].prefix,types=BoxParser.sampleEntryCodes[j].types,nb_types=types.length;for(BoxParser[prefix+"SampleEntry"]=function(type,size){BoxParser.SampleEntry.call(this,type,size)},BoxParser[prefix+"SampleEntry"].prototype=new BoxParser.SampleEntry,i=0;i<nb_types;i++)BoxParser[types[i]+"SampleEntry"]=function(k,l){return function(size){BoxParser[BoxParser.sampleEntryCodes[k].prefix+"SampleEntry"].call(this,BoxParser.sampleEntryCodes[k].types[l],size)}}(j,i),BoxParser[types[i]+"SampleEntry"].prototype=new BoxParser[prefix+"SampleEntry"]}for(length=BoxParser.sampleGroupEntryCodes.length,i=0;i<length;i++)BoxParser[BoxParser.sampleGroupEntryCodes[i]+"SampleGroupEntry"]=function(j){return function(size){BoxParser.SampleGroupEntry.call(this,BoxParser.sampleGroupEntryCodes[j],size)}}(i),BoxParser[BoxParser.sampleGroupEntryCodes[i]+"SampleGroupEntry"].prototype=new BoxParser.SampleGroupEntry;for(length=BoxParser.trackGroupTypes.length,i=0;i<length;i++)BoxParser[BoxParser.trackGroupTypes[i]+"Box"]=function(j){return function(size){BoxParser.TrackGroupTypeBox.call(this,BoxParser.trackGroupTypes[j],size)}}(i),BoxParser[BoxParser.trackGroupTypes[i]+"Box"].prototype=new BoxParser.TrackGroupTypeBox},Box:function(_type,_size){this.type=_type,this.size=_size},FullBox:function(type,size){BoxParser.Box.call(this,type,size),this.flags=0,this.version=0},ContainerBox:function(type,size){BoxParser.Box.call(this,type,size),this.boxes=[]},SampleEntry:function(type,size,hdr_size,start){BoxParser.Box.call(this,type,size),
this.hdr_size=hdr_size,this.start=start,this.boxes=[]},SampleGroupEntry:function(type){this.grouping_type=type},TrackGroupTypeBox:function(type,size){BoxParser.FullBox.call(this,type,size)}};BoxParser.initialize(),BoxParser.TKHD_FLAG_ENABLED=1,BoxParser.TKHD_FLAG_IN_MOVIE=2,BoxParser.TKHD_FLAG_IN_PREVIEW=4,BoxParser.TKHD_FLAG_IN_POSTER=8,BoxParser.TFHD_FLAG_BASE_DATA_OFFSET=1,BoxParser.TFHD_FLAG_SAMPLE_DESC=2,BoxParser.TFHD_FLAG_SAMPLE_DUR=8,BoxParser.TFHD_FLAG_SAMPLE_SIZE=16,BoxParser.TFHD_FLAG_SAMPLE_FLAGS=32,BoxParser.TFHD_FLAG_DUR_EMPTY=65536,BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,BoxParser.TRUN_FLAGS_DATA_OFFSET=1,BoxParser.TRUN_FLAGS_FIRST_FLAG=4,BoxParser.TRUN_FLAGS_DURATION=256,BoxParser.TRUN_FLAGS_SIZE=512,BoxParser.TRUN_FLAGS_FLAGS=1024,BoxParser.TRUN_FLAGS_CTS_OFFSET=2048,BoxParser.Box.prototype.add=function(name){var box=new BoxParser[name+"Box"];return this.boxes.push(box),this[name+"s"]?this[name+"s"].push(box):this[name]=box,box},BoxParser.Box.prototype.set=function(prop,value){return this[prop]=value,this},BoxParser.Box.prototype.addEntry=function(value,_prop){var prop=_prop||"entries";return this[prop]||(this[prop]=[]),this[prop].push(value),this},exports.BoxParser=BoxParser,BoxParser.SampleEntry.prototype.isVideo=function(){return!1},BoxParser.SampleEntry.prototype.isAudio=function(){return!1},BoxParser.SampleEntry.prototype.isSubtitle=function(){return!1},BoxParser.SampleEntry.prototype.isMetadata=function(){return!1},BoxParser.SampleEntry.prototype.isHint=function(){return!1},BoxParser.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},BoxParser.SampleEntry.prototype.getWidth=function(){return""},BoxParser.SampleEntry.prototype.getHeight=function(){return""},BoxParser.SampleEntry.prototype.getChannelCount=function(){return""},BoxParser.SampleEntry.prototype.getSampleRate=function(){return""},BoxParser.SampleEntry.prototype.getSampleSize=function(){return""},BoxParser.VisualSampleEntry.prototype.isVideo=function(){return!0},BoxParser.VisualSampleEntry.prototype.getWidth=function(){return this.width},BoxParser.VisualSampleEntry.prototype.getHeight=function(){return this.height},BoxParser.AudioSampleEntry.prototype.isAudio=function(){return!0},BoxParser.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},BoxParser.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},BoxParser.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},BoxParser.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},BoxParser.MetadataSampleEntry.prototype.isMetadata=function(){return!0},BoxParser.decimalToHex=function(d,padding){var hex=Number(d).toString(16);for(padding="undefined"==typeof padding||null===padding?padding=2:padding;hex.length<padding;)hex="0"+hex;return hex},BoxParser.avc1SampleEntry.prototype.getCodec=function(){var baseCodec=BoxParser.SampleEntry.prototype.getCodec.call(this);return this.avcC?baseCodec+"."+BoxParser.decimalToHex(this.avcC.AVCProfileIndication)+BoxParser.decimalToHex(this.avcC.profile_compatibility)+BoxParser.decimalToHex(this.avcC.AVCLevelIndication):baseCodec},BoxParser.hvc1SampleEntry.prototype.getCodec=function(){var i,baseCodec=BoxParser.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(baseCodec+=".",this.hvcC.general_profile_space){case 0:baseCodec+="";break;case 1:baseCodec+="A";break;case 2:baseCodec+="B";break;case 3:baseCodec+="C"}baseCodec+=this.hvcC.general_profile_idc,baseCodec+=".";var val=this.hvcC.general_profile_compatibility,reversed=0;for(i=0;i<32&&(reversed|=1&val,31!=i);i++)reversed<<=1,val>>=1;baseCodec+=BoxParser.decimalToHex(reversed,0),baseCodec+=".",baseCodec+=0===this.hvcC.general_tier_flag?"L":"H",baseCodec+=this.hvcC.general_level_idc;var hasByte=!1,constraint_string="";for(i=5;i>=0;i--)(this.hvcC.general_constraint_indicator[i]||hasByte)&&(constraint_string="."+BoxParser.decimalToHex(this.hvcC.general_constraint_indicator[i],0)+constraint_string,hasByte=!0);baseCodec+=constraint_string}return baseCodec},BoxParser.mp4aSampleEntry.prototype.getCodec=function(){var baseCodec=BoxParser.SampleEntry.prototype.getCodec.call(this),esds=this.esds||(this.wave||{}).esds;if(esds&&esds.esd){var oti=esds.esd.getOTI(),dsi=esds.esd.getAudioConfig();return baseCodec+"."+BoxParser.decimalToHex(oti)+(dsi?"."+dsi:"")}return baseCodec},BoxParser.stxtSampleEntry.prototype.getCodec=function(){var baseCodec=BoxParser.SampleEntry.prototype.getCodec.call(this);return this.mime_format?baseCodec+"."+this.mime_format:baseCodec},BoxParser.parseOneBox=function(stream,headerOnly,parentSize){var box,diff,uuid,start=stream.getPosition(),hdr_size=0;if(stream.getEndPosition()-start<8)return Log.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:BoxParser.ERR_NOT_ENOUGH_DATA};var size=stream.readUint32();if(0===size)return Log.debug("BoxParser","Found terminator box at "+start),{code:BoxParser.OK};var type=stream.readString(4);if(Log.debug("BoxParser","Found box of type "+type+" and size "+size+" at position "+start),hdr_size=8,"uuid"==type&&(uuid=stream.readUint8Array(16),hdr_size+=16),1==size){if(stream.getEndPosition()-stream.getPosition()<8)return stream.seek(start),Log.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+type+'" box'),{code:BoxParser.ERR_NOT_ENOUGH_DATA};size=stream.readUint64(),hdr_size+=8}else if(0===size&&"mdat"!==type)throw"Unlimited box size not supported";return parentSize&&size>parentSize?(Log.error("BoxParser","Box of type "+type+" has a size "+size+" greater than its container size "+parentSize),{code:BoxParser.ERR_NOT_ENOUGH_DATA,type:type,size:size,hdr_size:hdr_size,start:start}):start+size>stream.getEndPosition()?(stream.seek(start),Log.warn("BoxParser",'Not enough data in stream to parse the entire "'+type+'" box'),{code:BoxParser.ERR_NOT_ENOUGH_DATA,type:type,size:size,hdr_size:hdr_size,start:start}):headerOnly?{code:BoxParser.OK,type:type,size:size,hdr_size:hdr_size,start:start}:(BoxParser[type+"Box"]?box=new BoxParser[type+"Box"](size):("uuid"!==type&&Log.warn("BoxParser","Unknown box type: "+type),box=new BoxParser.Box(type,size),uuid&&(box.uuid=uuid)),box.hdr_size=hdr_size,box.start=start,box.write===BoxParser.Box.prototype.write&&"mdat"!==box.type&&(Log.warn("BoxParser",box.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),box.parseDataAndRewind(stream)),box.parse(stream),diff=stream.getPosition()-(box.start+box.size),diff<0?(Log.warn("BoxParser","Parsing of box "+box.type+" did not read the entire indicated box data size (missing "+-diff+" bytes), seeking forward"),stream.seek(box.start+box.size)):diff>0&&(Log.error("BoxParser","Parsing of box "+box.type+" read "+diff+" more bytes than the indicated box data size, seeking backwards"),stream.seek(box.start+box.size)),{code:BoxParser.OK,box:box,size:box.size})},BoxParser.Box.prototype.parse=function(stream){"mdat"!=this.type?this.data=stream.readUint8Array(this.size-this.hdr_size):0===this.size?stream.seek(stream.getEndPosition()):stream.seek(this.start+this.size)},BoxParser.Box.prototype.parseDataAndRewind=function(stream){this.data=stream.readUint8Array(this.size-this.hdr_size),stream.position-=this.size-this.hdr_size},BoxParser.FullBox.prototype.parseDataAndRewind=function(stream){this.parseFullHeader(stream),this.data=stream.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,stream.position-=this.size-this.hdr_size},BoxParser.FullBox.prototype.parseFullHeader=function(stream){this.version=stream.readUint8(),this.flags=stream.readUint24(),this.hdr_size+=4},BoxParser.FullBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.data=stream.readUint8Array(this.size-this.hdr_size)},BoxParser.ContainerBox.prototype.parse=function(stream){for(var ret,box;stream.getPosition()<this.start+this.size;){if(ret=BoxParser.parseOneBox(stream,!1,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=ret.box,this.boxes.push(box),this.subBoxNames&&this.subBoxNames.indexOf(box.type)!=-1?this[this.subBoxNames[this.subBoxNames.indexOf(box.type)]+"s"].push(box):this[box.type]=box}},BoxParser.Box.prototype.parseLanguage=function(stream){this.language=stream.readUint16();var chars=[];chars[0]=this.language>>10&31,chars[1]=this.language>>5&31,chars[2]=31&this.language,this.languageString=String.fromCharCode(chars[0]+96,chars[1]+96,chars[2]+96)},BoxParser.TrackGroupTypeBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.track_group_id=stream.readUint32()},BoxParser.TrackReferenceTypeBox=function(type,size,hdr_size,start){BoxParser.Box.call(this,type,size),this.hdr_size=hdr_size,this.start=start},BoxParser.TrackReferenceTypeBox.prototype=new BoxParser.Box,BoxParser.TrackReferenceTypeBox.prototype.parse=function(stream){this.track_ids=stream.readUint32Array((this.size-this.hdr_size)/4)},BoxParser.avcCBox.prototype.parse=function(stream){var i,nb_nalus,length,toparse;for(this.configurationVersion=stream.readUint8(),this.AVCProfileIndication=stream.readUint8(),this.profile_compatibility=stream.readUint8(),this.AVCLevelIndication=stream.readUint8(),this.lengthSizeMinusOne=3&stream.readUint8(),nb_nalus=31&stream.readUint8(),toparse=this.size-this.hdr_size-6,this.SPS=new Array(nb_nalus),i=0;i<nb_nalus;i++)length=stream.readUint16(),this.SPS[i]=stream.readUint8Array(length),toparse-=2+length;for(nb_nalus=stream.readUint8(),toparse--,this.PPS=new Array(nb_nalus),i=0;i<nb_nalus;i++)length=stream.readUint16(),this.PPS[i]=stream.readUint8Array(length),toparse-=2+length;toparse>0&&(this.ext=stream.readUint8Array(toparse))},BoxParser.btrtBox.prototype.parse=function(stream){this.bufferSizeDB=stream.readUint32(),this.maxBitrate=stream.readUint32(),this.avgBitrate=stream.readUint32()},BoxParser.co64Box.prototype.parse=function(stream){var entry_count,i;if(this.parseFullHeader(stream),entry_count=stream.readUint32(),this.chunk_offsets=[],0===this.version)for(i=0;i<entry_count;i++)this.chunk_offsets.push(stream.readUint64())},BoxParser.cprtBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.parseLanguage(stream),this.notice=stream.readCString()},BoxParser.cslgBox.prototype.parse=function(stream){this.parseFullHeader(stream),0===this.version&&(this.compositionToDTSShift=stream.readInt32(),this.leastDecodeToDisplayDelta=stream.readInt32(),this.greatestDecodeToDisplayDelta=stream.readInt32(),this.compositionStartTime=stream.readInt32(),this.compositionEndTime=stream.readInt32())},BoxParser.cttsBox.prototype.parse=function(stream){var entry_count,i;if(this.parseFullHeader(stream),entry_count=stream.readUint32(),this.sample_counts=[],this.sample_offsets=[],0===this.version)for(i=0;i<entry_count;i++)this.sample_counts.push(stream.readUint32()),this.sample_offsets.push(stream.readInt32());else if(1==this.version)for(i=0;i<entry_count;i++)this.sample_counts.push(stream.readUint32()),this.sample_offsets.push(stream.readInt32())},BoxParser.dimmBox.prototype.parse=function(stream){this.bytessent=stream.readUint64()},BoxParser.dmaxBox.prototype.parse=function(stream){this.time=stream.readUint32()},BoxParser.dmedBox.prototype.parse=function(stream){this.bytessent=stream.readUint64()},BoxParser.drefBox.prototype.parse=function(stream){var ret,box;this.parseFullHeader(stream),this.entries=[];for(var entry_count=stream.readUint32(),i=0;i<entry_count;i++){if(ret=BoxParser.parseOneBox(stream,!1,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=ret.box,this.entries.push(box)}},BoxParser.drepBox.prototype.parse=function(stream){this.bytessent=stream.readUint64()},BoxParser.elngBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.extended_language=stream.readString(this.size-this.hdr_size)},BoxParser.elstBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.entries=[];for(var entry_count=stream.readUint32(),i=0;i<entry_count;i++){var entry={};this.entries.push(entry),1===this.version?(entry.segment_duration=stream.readUint64(),entry.media_time=stream.readInt64()):(entry.segment_duration=stream.readUint32(),entry.media_time=stream.readInt32()),entry.media_rate_integer=stream.readInt16(),entry.media_rate_fraction=stream.readInt16()}},BoxParser.emsgBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.scheme_id_uri=stream.readCString(),this.value=stream.readCString(),this.timescale=stream.readUint32(),this.presentation_time_delta=stream.readUint32(),this.event_duration=stream.readUint32(),this.id=stream.readUint32();var message_size=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));this.message_data=stream.readUint8Array(message_size)},BoxParser.esdsBox.prototype.parse=function(stream){this.parseFullHeader(stream);var esd_data=stream.readUint8Array(this.size-this.hdr_size);if("undefined"!=typeof MPEG4DescriptorParser){var esd_parser=new MPEG4DescriptorParser;this.esd=esd_parser.parseOneDescriptor(new DataStream(esd_data.buffer,0,DataStream.BIG_ENDIAN))}},BoxParser.frmaBox.prototype.parse=function(stream){this.data_format=stream.readString(4)},BoxParser.ftypBox.prototype.parse=function(stream){var toparse=this.size-this.hdr_size;this.major_brand=stream.readString(4),this.minor_version=stream.readUint32(),toparse-=8,this.compatible_brands=[];for(var i=0;toparse>=4;)this.compatible_brands[i]=stream.readString(4),toparse-=4,i++},BoxParser.hdlrBox.prototype.parse=function(stream){this.parseFullHeader(stream),0===this.version?(this.componentType=stream.readString(4),this.componentSubType=stream.readString(4),stream.readUint32Array(3),this.name=stream.readCString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1]&&(this.name=this.name.slice(0,-1))):this.data=stream.readUint8Array(this.size-this.hdr_size)},BoxParser.hvcCBox.prototype.parse=function(stream){var i,j,length,tmp_byte;this.configurationVersion=stream.readUint8(),tmp_byte=stream.readUint8(),this.general_profile_space=tmp_byte>>6,this.general_tier_flag=(32&tmp_byte)>>5,this.general_profile_idc=31&tmp_byte,this.general_profile_compatibility=stream.readUint32(),this.general_constraint_indicator=stream.readUint8Array(6),this.general_level_idc=stream.readUint8(),this.min_spatial_segmentation_idc=4095&stream.readUint16(),this.parallelismType=3&stream.readUint8(),this.chromaFormat=3&stream.readUint8(),this.bitDepthLumaMinus8=7&stream.readUint8(),this.bitDepthChromaMinus8=7&stream.readUint8(),this.avgFrameRate=stream.readUint16(),tmp_byte=stream.readUint8(),this.constantFrameRate=tmp_byte>>6,this.numTemporalLayers=(13&tmp_byte)>>3,this.temporalIdNested=(4&tmp_byte)>>2,this.lengthSizeMinusOne=3&tmp_byte,this.nalu_arrays=[];var numOfArrays=stream.readUint8();for(i=0;i<numOfArrays;i++){var nalu_array=[];this.nalu_arrays.push(nalu_array),tmp_byte=stream.readUint8(),nalu_array.completeness=(128&tmp_byte)>>7,nalu_array.nalu_type=63&tmp_byte;var numNalus=stream.readUint16();for(j=0;j<numNalus;j++){var nalu={};nalu_array.push(nalu),length=stream.readUint16(),nalu.data=stream.readUint8Array(length)}}},BoxParser.iinfBox.prototype.parse=function(stream){var ret;this.parseFullHeader(stream),0===this.version?this.entry_count=stream.readUint16():this.entry_count=stream.readUint32(),this.item_infos=[];for(var i=0;i<this.entry_count;i++){if(ret=BoxParser.parseOneBox(stream,!1,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;"infe"!==ret.box.type&&Log.error("BoxParser","Expected 'infe' box, got "+ret.box.type),this.item_infos[i]=ret.box}},BoxParser.ilocBox.prototype.parse=function(stream){var byte;this.parseFullHeader(stream),byte=stream.readUint8(),this.offset_size=byte>>4&15,this.length_size=15&byte,byte=stream.readUint8(),this.base_offset_size=byte>>4&15,1===this.version||2===this.version?this.index_size=15&byte:this.index_size=0,this.items=[];var item_count=0;if(this.version<2)item_count=stream.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";item_count=stream.readUint32()}for(var i=0;i<item_count;i++){var item={};if(this.items.push(item),this.version<2)item.item_ID=stream.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";item.item_ID=stream.readUint16()}switch(1!==this.version&&2!==this.version||(item.construction_method=15&stream.readUint16()),item.data_reference_index=stream.readUint16(),this.base_offset_size){case 0:item.base_offset=0;break;case 4:item.base_offset=stream.readUint32();break;case 8:item.base_offset=stream.readUint64();break;default:throw"Error reading base offset size"}var extent_count=stream.readUint16();item.extents=[];for(var j=0;j<extent_count;j++){var extent={};if(item.extents.push(extent),1===this.version||2===this.version)switch(this.index_size){case 0:extent.extent_index=0;break;case 4:extent.extent_index=stream.readUint32();break;case 8:extent.extent_index=stream.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:extent.extent_offset=0;break;case 4:extent.extent_offset=stream.readUint32();break;case 8:extent.extent_offset=stream.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:extent.extent_length=0;break;case 4:extent.extent_length=stream.readUint32();break;case 8:extent.extent_length=stream.readUint64();break;default:throw"Error reading extent index"}}}},BoxParser.infeBox.prototype.parse=function(stream){return this.parseFullHeader(stream),0!==this.version&&1!==this.version||(this.item_ID=stream.readUint16(),this.item_protection_index=stream.readUint16(),this.item_name=stream.readCString(),this.content_type=stream.readCString(),this.content_encoding=stream.readCString()),1===this.version?(this.extension_type=stream.readString(4),Log.warn("BoxParser","Cannot parse extension type"),void stream.seek(this.start+this.size)):void(this.version>=2&&(2===this.version?this.item_ID=stream.readUint16():3===this.version&&(this.item_ID=stream.readUint32()),this.item_protection_index=stream.readUint16(),this.item_type=stream.readString(4),this.name=stream.readCString(),"mime"===this.item_type?(this.content_type=stream.readCString(),this.content_encoding=stream.readCString()):"uri "===this.item_type&&(this.item_uri_type=stream.readCString())))},BoxParser.irefBox=function(size){BoxParser.FullBox.call(this,"iref",size),this.references=[]},BoxParser.irefBox.prototype=new BoxParser.FullBox,BoxParser.irefBox.prototype.parse=function(stream){var ret,box;for(this.parseFullHeader(stream);stream.getPosition()<this.start+this.size;){if(ret=BoxParser.parseOneBox(stream,!0,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=0===this.version?new BoxParser.SingleItemTypeReferenceBox(ret.type,ret.size,ret.hdr_size,ret.start):new BoxParser.SingleItemTypeReferenceBoxLarge(ret.type,ret.size,ret.hdr_size,ret.start),box.write===BoxParser.Box.prototype.write&&"mdat"!==box.type&&(Log.warn("BoxParser",box.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),box.parseDataAndRewind(stream)),box.parse(stream),this.references.push(box)}},BoxParser.kindBox=function(size){BoxParser.FullBox.call(this,"kind",size),this.schemeURI="",this.value=""},BoxParser.kindBox.prototype=new BoxParser.FullBox,BoxParser.kindBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.schemeURI=stream.readCString(),this.value=stream.readCString()},BoxParser.levaBox.prototype.parse=function(stream){this.parseFullHeader(stream);var count=stream.readUint8();this.levels=[];for(var i=0;i<count;i++){var level={};this.levels[i]=level,level.track_ID=stream.readUint32();var tmp_byte=stream.readUint8();switch(level.padding_flag=tmp_byte>>7,level.assignment_type=127&tmp_byte,level.assignment_type){case 0:level.grouping_type=stream.readUint32();break;case 1:level.grouping_type=stream.readUint32(),level.grouping_type_parameter=stream.readUint32();break;case 2:break;case 3:break;case 4:level.sub_track_id=stream.readUint32();break;default:Log.warn("BoxParser","Unknown leva assignement type")}}},BoxParser.maxrBox.prototype.parse=function(stream){this.period=stream.readUint32(),this.bytes=stream.readUint32()},BoxParser.mdhdBox.prototype.parse=function(stream){this.parseFullHeader(stream),1==this.version?(this.creation_time=stream.readUint64(),this.modification_time=stream.readUint64(),this.timescale=stream.readUint32(),this.duration=stream.readUint64()):(this.creation_time=stream.readUint32(),this.modification_time=stream.readUint32(),this.timescale=stream.readUint32(),this.duration=stream.readUint32()),this.parseLanguage(stream),stream.readUint16()},BoxParser.mehdBox.prototype.parse=function(stream){this.parseFullHeader(stream),1|this.flags&&(Log.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=stream.readUint64():this.fragment_duration=stream.readUint32()},BoxParser.metaBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.boxes=[],BoxParser.ContainerBox.prototype.parse.call(this,stream)},BoxParser.mfhdBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.sequence_number=stream.readUint32()},BoxParser.mfroBox.prototype.parse=function(stream){this.parseFullHeader(stream),this._size=stream.readUint32()},BoxParser.mvhdBox.prototype.parse=function(stream){this.flags=0,this.parseFullHeader(stream),1==this.version?(this.creation_time=stream.readUint64(),this.modification_time=stream.readUint64(),this.timescale=stream.readUint32(),this.duration=stream.readUint64()):(this.creation_time=stream.readUint32(),this.modification_time=stream.readUint32(),this.timescale=stream.readUint32(),this.duration=stream.readUint32()),this.rate=stream.readUint32(),this.volume=stream.readUint16()>>8,stream.readUint16(),stream.readUint32Array(2),this.matrix=stream.readUint32Array(9),stream.readUint32Array(6),this.next_track_id=stream.readUint32()},BoxParser.npckBox.prototype.parse=function(stream){this.packetssent=stream.readUint32()},BoxParser.numpBox.prototype.parse=function(stream){this.packetssent=stream.readUint64()},BoxParser.padbBox.prototype.parse=function(stream){this.parseFullHeader(stream);var sample_count=stream.readUint32();this.padbits=[];for(var i=0;i<Math.floor((sample_count+1)/2);i++)this.padbits=stream.readUint8()},BoxParser.paylBox.prototype.parse=function(stream){this.text=stream.readString(this.size-this.hdr_size)},BoxParser.paytBox.prototype.parse=function(stream){this.payloadID=stream.readUint32();var count=stream.readUint8();this.rtpmap_string=stream.readString(count)},BoxParser.pdinBox.prototype.parse=function(stream){this.parseFullHeader(stream);var count=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var i=0;i<count;i++)this.rate[i]=stream.readUint32(),this.initial_delay[i]=stream.readUint32()},BoxParser.pitmBox.prototype.parse=function(stream){this.parseFullHeader(stream),0===this.version?this.item_id=stream.readUint16():this.item_id=stream.readUint32()},BoxParser.pmaxBox.prototype.parse=function(stream){this.bytes=stream.readUint32()},BoxParser.prftBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.ref_track_id=stream.readUint32(),this.ntp_timestamp=stream.readUint64(),0===this.version?this.media_time=stream.readUint32():this.media_time=stream.readUint64()},BoxParser.psshBox.prototype.parse=function(stream){if(this.parseFullHeader(stream),this.system_id=stream.readUint8Array(16),this.version>0){var count=stream.readUint32();this.kid=[];for(var i=0;i<count;i++)this.kid[i]=stream.readUint8Array(16)}var datasize=stream.readUint32();datasize>0&&(this.data=stream.readUint8Array(datasize))},BoxParser["rtp Box"].prototype.parse=function(stream){this.descriptionformat=stream.readString(4),this.sdptext=stream.readString(this.size-this.hdr_size-4)},BoxParser.saioBox.prototype.parse=function(stream){this.parseFullHeader(stream),1&this.flags&&(this.aux_info_type=stream.readUint32(),this.aux_info_type_parameter=stream.readUint32());var count=stream.readUint32();this.offset=[];for(var i=0;i<count;i++)0===this.version?this.offset[i]=stream.readUint32():this.offset[i]=stream.readUint64()},BoxParser.saizBox.prototype.parse=function(stream){this.parseFullHeader(stream),1&this.flags&&(this.aux_info_type=stream.readUint32(),this.aux_info_type_parameter=stream.readUint32()),this.default_sample_info_size=stream.readUint8();var count=stream.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var i=0;i<count;i++)this.sample_info_size[i]=stream.readUint8()},BoxParser.mettSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.content_encoding=stream.readCString(),this.mime_format=stream.readCString(),this.parseFooter(stream)},BoxParser.metxSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.content_encoding=stream.readCString(),this.namespace=stream.readCString(),this.schema_location=stream.readCString(),this.parseFooter(stream)},BoxParser.SampleEntry.prototype.parseHeader=function(stream){stream.readUint8Array(6),this.data_reference_index=stream.readUint16(),this.hdr_size+=8},BoxParser.SampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.data=stream.readUint8Array(this.size-this.hdr_size)},BoxParser.SampleEntry.prototype.parseDataAndRewind=function(stream){this.parseHeader(stream),this.data=stream.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,stream.position-=this.size-this.hdr_size},BoxParser.SampleEntry.prototype.parseFooter=function(stream){for(var ret,box;stream.getPosition()<this.start+this.size;){if(ret=BoxParser.parseOneBox(stream,!1,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=ret.box,box?(this.boxes.push(box),this[box.type]=box):stream.position=this.start+this.size}},BoxParser.VisualSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),stream.readUint16(),stream.readUint16(),stream.readUint32Array(3),this.width=stream.readUint16(),this.height=stream.readUint16(),this.horizresolution=stream.readUint32(),this.vertresolution=stream.readUint32(),stream.readUint32(),this.frame_count=stream.readUint16(),this.compressorname=stream.readString(32),this.depth=stream.readUint16(),stream.readUint16(),this.parseFooter(stream)},BoxParser.AudioSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.version=stream.readUint16(),this.revision=stream.readUint16(),this.vendor=stream.readUint32(),this.channel_count=stream.readUint16(),this.samplesize=stream.readUint16(),this.compressionId=stream.readInt16(),this.packetSize=stream.readUint16(),this.samplerate=stream.readUint32()/65536,1==this.version&&(this.samplesPerPacket=stream.readUint32(),this.bytesPerPacket=stream.readUint32(),this.bytesPerFrame=stream.readUint32(),this.bytesPerSample=stream.readUint32()),this.parseFooter(stream)},BoxParser.sbttSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.content_encoding=stream.readCString(),this.mime_format=stream.readCString(),this.parseFooter(stream)},BoxParser.stppSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.namespace=stream.readCString(),this.schema_location=stream.readCString(),this.auxiliary_mime_types=stream.readCString(),this.parseFooter(stream)},BoxParser.stxtSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.content_encoding=stream.readCString(),this.mime_format=stream.readCString(),this.parseFooter(stream)},BoxParser.tx3gSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.displayFlags=stream.readUint32(),this.horizontal_justification=stream.readInt8(),this.vertical_justification=stream.readInt8(),this.bg_color_rgba=stream.readUint8Array(4),this.box_record=stream.readInt16Array(4),this.style_record=stream.readUint8Array(12),this.parseFooter(stream)},BoxParser.wvttSampleEntry.prototype.parse=function(stream){this.parseHeader(stream),this.parseFooter(stream)},BoxParser.alstSampleGroupEntry.prototype.parse=function(stream){var i,roll_count=stream.readUint16();for(this.first_output_sample=stream.readUint16(),this.sample_offset=[],i=0;i<roll_count;i++)this.sample_offset[i]=stream.readUint32();var remaining=this.description_length-4-4*roll_count;for(this.num_output_samples=[],this.num_total_samples=[],i=0;i<remaining/4;i++)this.num_output_samples[i]=stream.readUint16(),this.num_total_samples[i]=stream.readUint16()},BoxParser.avllSampleGroupEntry.prototype.parse=function(stream){this.layerNumber=stream.readUint8(),this.accurateStatisticsFlag=stream.readUint8(),this.avgBitRate=stream.readUint16(),this.avgFrameRate=stream.readUint16()},BoxParser.avssSampleGroupEntry.prototype.parse=function(stream){this.subSequenceIdentifier=stream.readUint16(),this.layerNumber=stream.readUint8();var tmp_byte=stream.readUint8();this.durationFlag=tmp_byte>>7,this.avgRateFlag=tmp_byte>>6&1,this.durationFlag&&(this.duration=stream.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=stream.readUint8(),this.avgBitRate=stream.readUint16(),this.avgFrameRate=stream.readUint16()),this.dependency=[];for(var numReferences=stream.readUint8(),i=0;i<numReferences;i++){var dependencyInfo={};this.dependency.push(dependencyInfo),dependencyInfo.subSeqDirectionFlag=stream.readUint8(),dependencyInfo.layerNumber=stream.readUint8(),dependencyInfo.subSequenceIdentifier=stream.readUint16()}},BoxParser.dtrtSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.mvifSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.prolSampleGroupEntry.prototype.parse=function(stream){this.roll_distance=stream.readInt16()},BoxParser["rap SampleGroupEntry"].prototype.parse=function(stream){var tmp_byte=stream.readUint8();this.num_leading_samples_known=tmp_byte>>7,this.num_leading_samples=127&tmp_byte},BoxParser.rashSampleGroupEntry.prototype.parse=function(stream){if(this.operation_point_count=stream.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)Log.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=stream.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=stream.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var i=0;i<this.operation_point_count;i++)this.available_bitrate[i]=stream.readUint32(),this.target_rate_share[i]=stream.readUint16()}this.maximum_bitrate=stream.readUint32(),this.minimum_bitrate=stream.readUint32(),this.discard_priority=stream.readUint8()}},BoxParser.rollSampleGroupEntry.prototype.parse=function(stream){this.roll_distance=stream.readInt16()},BoxParser.SampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=stream.readUint8Array(this.description_length)},BoxParser.scifSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.scnmSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.stsaSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.syncSampleGroupEntry.prototype.parse=function(stream){var tmp_byte=stream.readUint8();this.NAL_unit_type=63&tmp_byte},BoxParser.teleSampleGroupEntry.prototype.parse=function(stream){var tmp_byte=stream.readUint8();this.level_independently_decodable=tmp_byte>>7},BoxParser.tsasSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.tsclSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed");
},BoxParser.viprSampleGroupEntry.prototype.parse=function(stream){Log.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},BoxParser.sbgpBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.grouping_type=stream.readString(4),1===this.version?this.grouping_type_parameter=stream.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var entry_count=stream.readUint32(),i=0;i<entry_count;i++){var entry={};this.entries.push(entry),entry.sample_count=stream.readInt32(),entry.group_description_index=stream.readInt32()}},BoxParser.schmBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.scheme_type=stream.readString(4),this.scheme_version=stream.readUint32(),1&this.flags&&(this.scheme_uri=stream.readString(this.size-this.hdr_size-8))},BoxParser["sdp Box"].prototype.parse=function(stream){this.sdptext=stream.readString(this.size-this.hdr_size)},BoxParser.sdtpBox.prototype.parse=function(stream){var tmp_byte;this.parseFullHeader(stream);var count=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var i=0;i<count;i++)tmp_byte=stream.readUint8(),this.is_leading[i]=tmp_byte>>6,this.sample_depends_on[i]=tmp_byte>>4&3,this.sample_is_depended_on[i]=tmp_byte>>2&3,this.sample_has_redundancy[i]=3&tmp_byte},BoxParser.sgpdBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.grouping_type=stream.readString(4),Log.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=stream.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=stream.readUint32()),this.entries=[];for(var entry_count=stream.readUint32(),i=0;i<entry_count;i++){var entry;entry=BoxParser[this.grouping_type+"SampleGroupEntry"]?new BoxParser[this.grouping_type+"SampleGroupEntry"](this.grouping_type):new BoxParser.SampleGroupEntry(this.grouping_type),this.entries.push(entry),1===this.version&&0===this.default_length?entry.description_length=stream.readUint32():entry.description_length=this.default_length,entry.write===BoxParser.SampleGroupEntry.prototype.write&&(Log.warn("BoxParser"," SampleEntry for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),entry.data=stream.readUint8Array(entry.description_length),stream.position-=entry.description_length),entry.parse(stream)}},BoxParser.sidxBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.reference_ID=stream.readUint32(),this.timescale=stream.readUint32(),0===this.version?(this.earliest_presentation_time=stream.readUint32(),this.first_offset=stream.readUint32()):(this.earliest_presentation_time=stream.readUint64(),this.first_offset=stream.readUint64()),stream.readUint16(),this.references=[];for(var count=stream.readUint16(),i=0;i<count;i++){var ref={};this.references.push(ref);var tmp_32=stream.readUint32();ref.reference_type=tmp_32>>31&1,ref.referenced_size=2147483647&tmp_32,ref.subsegment_duration=stream.readUint32(),tmp_32=stream.readUint32(),ref.starts_with_SAP=tmp_32>>31&1,ref.SAP_type=tmp_32>>28&7,ref.SAP_delta_time=268435455&tmp_32}},BoxParser.SingleItemTypeReferenceBox=function(type,size,hdr_size,start){BoxParser.Box.call(this,type,size),this.hdr_size=hdr_size,this.start=start},BoxParser.SingleItemTypeReferenceBox.prototype=new BoxParser.Box,BoxParser.SingleItemTypeReferenceBox.prototype.parse=function(stream){this.from_item_ID=stream.readUint16();var count=stream.readUint16();this.references=[];for(var i=0;i<count;i++)this.references[i]=stream.readUint16()},BoxParser.SingleItemTypeReferenceBoxLarge=function(type,size,hdr_size,start){BoxParser.Box.call(this,type,size),this.hdr_size=hdr_size,this.start=start},BoxParser.SingleItemTypeReferenceBoxLarge.prototype=new BoxParser.Box,BoxParser.SingleItemTypeReferenceBoxLarge.prototype.parse=function(stream){this.from_item_ID=stream.readUint32();var count=stream.readUint16();this.references=[];for(var i=0;i<count;i++)this.references[i]=stream.readUint32()},BoxParser.ssixBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.subsegments=[];for(var subsegment_count=stream.readUint32(),i=0;i<subsegment_count;i++){var subsegment={};this.subsegments.push(subsegment),subsegment.ranges=[];for(var range_count=stream.readUint32(),j=0;j<range_count;j++){var range={};subsegment.ranges.push(range),range.level=stream.readUint8(),range.range_size=stream.readUint24()}}},BoxParser.stcoBox.prototype.parse=function(stream){var entry_count;this.parseFullHeader(stream),entry_count=stream.readUint32(),0===this.version&&(this.chunk_offsets=stream.readUint32Array(entry_count))},BoxParser.stdpBox.prototype.parse=function(stream){this.parseFullHeader(stream);var count=(this.size-this.hdr_size)/2;this.priority=[];for(var i=0;i<count;i++)this.priority[i]=stream.readUint16()},BoxParser.striBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.switch_group=stream.readUint16(),this.alternate_group=stream.readUint16(),this.sub_track_id=stream.readUint32();var count=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var i=0;i<count;i++)this.attribute_list[i]=stream.readUint32()},BoxParser.stscBox.prototype.parse=function(stream){var entry_count,i;if(this.parseFullHeader(stream),entry_count=stream.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(i=0;i<entry_count;i++)this.first_chunk.push(stream.readUint32()),this.samples_per_chunk.push(stream.readUint32()),this.sample_description_index.push(stream.readUint32())},BoxParser.stsdBox=function(size){BoxParser.FullBox.call(this,"stsd",size),this.entries=[]},BoxParser.stsdBox.prototype=new BoxParser.FullBox,BoxParser.stsdBox.prototype.parse=function(stream){var i,ret,entryCount,box;for(this.parseFullHeader(stream),entryCount=stream.readUint32(),i=1;i<=entryCount;i++){if(ret=BoxParser.parseOneBox(stream,!0,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;BoxParser[ret.type+"SampleEntry"]?(box=new BoxParser[ret.type+"SampleEntry"](ret.size),box.hdr_size=ret.hdr_size,box.start=ret.start):(Log.warn("BoxParser","Unknown sample entry type: "+ret.type),box=new BoxParser.SampleEntry(ret.type,ret.size,ret.hdr_size,ret.start)),box.write===BoxParser.SampleEntry.prototype.write&&(Log.warn("BoxParser",box.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),box.parseDataAndRewind(stream)),box.parse(stream),this.entries.push(box)}},BoxParser.stsgBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.grouping_type=stream.readUint32();var count=stream.readUint16();this.group_description_index=[];for(var i=0;i<count;i++)this.group_description_index[i]=stream.readUint32()},BoxParser.stshBox.prototype.parse=function(stream){var entry_count,i;if(this.parseFullHeader(stream),entry_count=stream.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(i=0;i<entry_count;i++)this.shadowed_sample_numbers.push(stream.readUint32()),this.sync_sample_numbers.push(stream.readUint32())},BoxParser.stssBox.prototype.parse=function(stream){var i,entry_count;if(this.parseFullHeader(stream),entry_count=stream.readUint32(),0===this.version)for(this.sample_numbers=[],i=0;i<entry_count;i++)this.sample_numbers.push(stream.readUint32())},BoxParser.stszBox.prototype.parse=function(stream){var i;if(this.parseFullHeader(stream),this.sample_sizes=[],0===this.version)if(this.sample_size=stream.readUint32(),this.sample_count=stream.readUint32(),0===this.sample_size)this.sample_sizes=stream.readUint32Array(this.sample_count);else for(i=0;i<this.sample_count;i++)this.sample_sizes[i]=this.sample_size},BoxParser.sttsBox.prototype.parse=function(stream){var entry_count,i,delta;if(this.parseFullHeader(stream),entry_count=stream.readUint32(),this.sample_counts=[],this.sample_deltas=[],0===this.version)for(i=0;i<entry_count;i++)this.sample_counts.push(stream.readUint32()),delta=stream.readInt32(),delta<0&&(Log.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),delta=1),this.sample_deltas.push(delta)},BoxParser.stviBox.prototype.parse=function(stream){this.parseFullHeader(stream);var tmp32=stream.readUint32();this.single_view_allowed=3&tmp32,this.stereo_scheme=stream.readUint32();var length=stream.readUint32();this.stereo_indication_type=stream.readString(length);var ret,box;for(this.boxes=[];stream.getPosition()<this.start+this.size;){if(ret=BoxParser.parseOneBox(stream,!1,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=ret.box,this.boxes.push(box),this[box.type]=box}},BoxParser.stypBox.prototype.parse=function(stream){BoxParser.ftypBox.prototype.parse.call(this,stream)},BoxParser.stz2Box.prototype.parse=function(stream){var i,sample_count;if(this.parseFullHeader(stream),this.sample_sizes=[],0===this.version)if(this.reserved=stream.readUint24(),this.field_size=stream.readUint8(),sample_count=stream.readUint32(),4===this.field_size)for(i=0;i<sample_count;i+=2){var tmp=stream.readUint8();this.sample_sizes[i]=tmp>>4&15,this.sample_sizes[i+1]=15&tmp}else if(8===this.field_size)for(i=0;i<sample_count;i++)this.sample_sizes[i]=stream.readUint8();else if(16===this.field_size)for(i=0;i<sample_count;i++)this.sample_sizes[i]=stream.readUint16();else Log.error("BoxParser","Error in length field in stz2 box")},BoxParser.subsBox.prototype.parse=function(stream){var i,j,entry_count,subsample_count;for(this.parseFullHeader(stream),entry_count=stream.readUint32(),this.entries=[],i=0;i<entry_count;i++){var sampleInfo={};if(this.entries[i]=sampleInfo,sampleInfo.sample_delta=stream.readUint32(),sampleInfo.subsamples=[],subsample_count=stream.readUint16(),subsample_count>0)for(j=0;j<subsample_count;j++){var subsample={};sampleInfo.subsamples.push(subsample),1==this.version?subsample.size=stream.readUint32():subsample.size=stream.readUint16(),subsample.priority=stream.readUint8(),subsample.discardable=stream.readUint8(),subsample.codec_specific_parameters=stream.readUint32()}}},BoxParser.tfdtBox.prototype.parse=function(stream){this.parseFullHeader(stream),1==this.version?this.baseMediaDecodeTime=stream.readUint64():this.baseMediaDecodeTime=stream.readUint32()},BoxParser.tfhdBox.prototype.parse=function(stream){var readBytes=0;this.parseFullHeader(stream),this.track_id=stream.readUint32(),this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=stream.readUint64(),readBytes+=8):this.base_data_offset=0,this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=stream.readUint32(),readBytes+=4):this.default_sample_description_index=0,this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=stream.readUint32(),readBytes+=4):this.default_sample_duration=0,this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=stream.readUint32(),readBytes+=4):this.default_sample_size=0,this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=stream.readUint32(),readBytes+=4):this.default_sample_flags=0},BoxParser.tfraBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.track_ID=stream.readUint32(),stream.readUint24();var tmp_byte=stream.readUint8();this.length_size_of_traf_num=tmp_byte>>4&3,this.length_size_of_trun_num=tmp_byte>>2&3,this.length_size_of_sample_num=3&tmp_byte,this.entries=[];for(var number_of_entries=stream.readUint32(),i=0;i<number_of_entries;i++)1===this.version?(this.time=stream.readUint64(),this.moof_offset=stream.readUint64()):(this.time=stream.readUint32(),this.moof_offset=stream.readUint32()),this.traf_number=stream["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=stream["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=stream["readUint"+8*(this.length_size_of_sample_num+1)]()},BoxParser.tkhdBox.prototype.parse=function(stream){this.parseFullHeader(stream),1==this.version?(this.creation_time=stream.readUint64(),this.modification_time=stream.readUint64(),this.track_id=stream.readUint32(),stream.readUint32(),this.duration=stream.readUint64()):(this.creation_time=stream.readUint32(),this.modification_time=stream.readUint32(),this.track_id=stream.readUint32(),stream.readUint32(),this.duration=stream.readUint32()),stream.readUint32Array(2),this.layer=stream.readInt16(),this.alternate_group=stream.readInt16(),this.volume=stream.readInt16()>>8,stream.readUint16(),this.matrix=stream.readInt32Array(9),this.width=stream.readUint32(),this.height=stream.readUint32()},BoxParser.tmaxBox.prototype.parse=function(stream){this.time=stream.readUint32()},BoxParser.tminBox.prototype.parse=function(stream){this.time=stream.readUint32()},BoxParser.totlBox.prototype.parse=function(stream){this.bytessent=stream.readUint32()},BoxParser.tpayBox.prototype.parse=function(stream){this.bytessent=stream.readUint32()},BoxParser.tpylBox.prototype.parse=function(stream){this.bytessent=stream.readUint64()},BoxParser.trefBox.prototype.parse=function(stream){for(var ret,box;stream.getPosition()<this.start+this.size;){if(ret=BoxParser.parseOneBox(stream,!0,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=new BoxParser.TrackReferenceTypeBox(ret.type,ret.size,ret.hdr_size,ret.start),box.write===BoxParser.Box.prototype.write&&"mdat"!==box.type&&(Log.warn("BoxParser",box.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),box.parseDataAndRewind(stream)),box.parse(stream),this.boxes.push(box)}},BoxParser.trepBox.prototype.parse=function(stream){for(this.parseFullHeader(stream),this.track_ID=stream.readUint32(),this.boxes=[];stream.getPosition()<this.start+this.size;){if(ret=BoxParser.parseOneBox(stream,!1,this.size-(stream.getPosition()-this.start)),ret.code!==BoxParser.OK)return;box=ret.box,this.boxes.push(box)}},BoxParser.trexBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.track_id=stream.readUint32(),this.default_sample_description_index=stream.readUint32(),this.default_sample_duration=stream.readUint32(),this.default_sample_size=stream.readUint32(),this.default_sample_flags=stream.readUint32()},BoxParser.trpyBox.prototype.parse=function(stream){this.bytessent=stream.readUint64()},BoxParser.trunBox.prototype.parse=function(stream){var readBytes=0;if(this.parseFullHeader(stream),this.sample_count=stream.readUint32(),readBytes+=4,this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=stream.readInt32(),readBytes+=4):this.data_offset=0,this.size-this.hdr_size>readBytes&&this.flags&BoxParser.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=stream.readUint32(),readBytes+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>readBytes)for(var i=0;i<this.sample_count;i++)this.flags&BoxParser.TRUN_FLAGS_DURATION&&(this.sample_duration[i]=stream.readUint32()),this.flags&BoxParser.TRUN_FLAGS_SIZE&&(this.sample_size[i]=stream.readUint32()),this.flags&BoxParser.TRUN_FLAGS_FLAGS&&(this.sample_flags[i]=stream.readUint32()),this.flags&BoxParser.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[i]=stream.readUint32():this.sample_composition_time_offset[i]=stream.readInt32())},BoxParser.tselBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.switch_group=stream.readUint32();var count=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var i=0;i<count;i++)this.attribute_list[i]=stream.readUint32()},BoxParser.txtCBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.config=stream.readCString()},BoxParser["url Box"].prototype.parse=function(stream){this.parseFullHeader(stream),1!==this.flags&&(this.location=stream.readCString())},BoxParser["urn Box"].prototype.parse=function(stream){this.parseFullHeader(stream),this.name=stream.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=stream.readCString())},BoxParser.vmhdBox.prototype.parse=function(stream){this.parseFullHeader(stream),this.graphicsmode=stream.readUint16(),this.opcolor=stream.readUint16Array(3)},BoxParser.vttCBox.prototype.parse=function(stream){this.text=stream.readString(this.size-this.hdr_size)},BoxParser.Box.prototype.writeHeader=function(stream,msg){this.size+=8,this.size>MAX_SIZE&&(this.size+=8),"uuid"===this.type&&(this.size+=16),Log.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+stream.getPosition()+(msg||"")),this.size>MAX_SIZE?stream.writeUint32(1):(this.sizePosition=stream.getPosition(),stream.writeUint32(this.size)),stream.writeString(this.type,null,4),"uuid"===this.type&&stream.writeUint8Array(this.uuid),this.size>MAX_SIZE&&stream.writeUint64(this.size)},BoxParser.FullBox.prototype.writeHeader=function(stream){this.size+=4,BoxParser.Box.prototype.writeHeader.call(this,stream," v="+this.version+" f="+this.flags),stream.writeUint8(this.version),stream.writeUint24(this.flags)},BoxParser.Box.prototype.write=function(stream){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(stream),stream.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(stream),this.data&&stream.writeUint8Array(this.data))},BoxParser.ContainerBox.prototype.write=function(stream){this.size=0,this.writeHeader(stream);for(var i=0;i<this.boxes.length;i++)this.boxes[i]&&(this.boxes[i].write(stream),this.size+=this.boxes[i].size);Log.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),stream.adjustUint32(this.sizePosition,this.size)},BoxParser.TrackReferenceTypeBox.prototype.write=function(stream){this.size=4*this.track_ids.length,this.writeHeader(stream),stream.writeUint32Array(this.track_ids)},BoxParser.avcCBox.prototype.write=function(stream){var i;for(this.size=7,i=0;i<this.SPS.length;i++)this.size+=2+this.SPS[i].length;for(i=0;i<this.PPS.length;i++)this.size+=2+this.PPS[i].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(stream),stream.writeUint8(this.configurationVersion),stream.writeUint8(this.AVCProfileIndication),stream.writeUint8(this.profile_compatibility),stream.writeUint8(this.AVCLevelIndication),stream.writeUint8(this.lengthSizeMinusOne+252),stream.writeUint8(this.SPS.length+224),i=0;i<this.SPS.length;i++)stream.writeUint16(this.SPS[i].length),stream.writeUint8Array(this.SPS[i]);for(stream.writeUint8(this.PPS.length),i=0;i<this.PPS.length;i++)stream.writeUint16(this.PPS[i].length),stream.writeUint8Array(this.PPS[i]);this.ext&&stream.writeUint8Array(this.ext)},BoxParser.co64Box.prototype.write=function(stream){var i;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(stream),stream.writeUint32(this.chunk_offsets.length),i=0;i<this.chunk_offsets.length;i++)stream.writeUint64(this.chunk_offsets[i])},BoxParser.cslgBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=20,this.writeHeader(stream),stream.writeInt32(this.compositionToDTSShift),stream.writeInt32(this.leastDecodeToDisplayDelta),stream.writeInt32(this.greatestDecodeToDisplayDelta),stream.writeInt32(this.compositionStartTime),stream.writeInt32(this.compositionEndTime)},BoxParser.cttsBox.prototype.write=function(stream){var i;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(stream),stream.writeUint32(this.sample_counts.length),i=0;i<this.sample_counts.length;i++)stream.writeUint32(this.sample_counts[i]),1===this.version?stream.writeInt32(this.sample_offsets[i]):stream.writeUint32(this.sample_offsets[i])},BoxParser.drefBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=4,this.writeHeader(stream),stream.writeUint32(this.entries.length);for(var i=0;i<this.entries.length;i++)this.entries[i].write(stream),this.size+=this.entries[i].size;Log.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),stream.adjustUint32(this.sizePosition,this.size)},BoxParser.elngBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(stream),stream.writeString(this.extended_language)},BoxParser.elstBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(stream),stream.writeUint32(this.entries.length);for(var i=0;i<this.entries.length;i++){var entry=this.entries[i];stream.writeUint32(entry.segment_duration),stream.writeInt32(entry.media_time),stream.writeInt16(entry.media_rate_integer),stream.writeInt16(entry.media_rate_fraction)}},BoxParser.emsgBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(stream),stream.writeCString(this.scheme_id_uri),stream.writeCString(this.value),stream.writeUint32(this.timescale),stream.writeUint32(this.presentation_time_delta),stream.writeUint32(this.event_duration),stream.writeUint32(this.id),stream.writeUint8Array(this.message_data)},BoxParser.ftypBox.prototype.write=function(stream){this.size=8+4*this.compatible_brands.length,this.writeHeader(stream),stream.writeString(this.major_brand,null,4),stream.writeUint32(this.minor_version);for(var i=0;i<this.compatible_brands.length;i++)stream.writeString(this.compatible_brands[i],null,4)},BoxParser.hdlrBox.prototype.write=function(stream){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(stream),stream.writeString(this.componentType,null,4),stream.writeString(this.componentSubType,null,4),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeCString(this.name)},BoxParser.kindBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(stream),stream.writeCString(this.schemeURI),stream.writeCString(this.value)},BoxParser.mdhdBox.prototype.write=function(stream){this.size=20,this.flags=0,this.version=0,this.writeHeader(stream),stream.writeUint32(this.creation_time),stream.writeUint32(this.modification_time),stream.writeUint32(this.timescale),stream.writeUint32(this.duration),stream.writeUint16(this.language),stream.writeUint16(0)},BoxParser.mehdBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=4,this.writeHeader(stream),stream.writeUint32(this.fragment_duration)},BoxParser.mfhdBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=4,this.writeHeader(stream),stream.writeUint32(this.sequence_number)},BoxParser.mvhdBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=96,this.writeHeader(stream),stream.writeUint32(this.creation_time),stream.writeUint32(this.modification_time),stream.writeUint32(this.timescale),stream.writeUint32(this.duration),stream.writeUint32(this.rate),stream.writeUint16(this.volume<<8),stream.writeUint16(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32Array(this.matrix),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(this.next_track_id)},BoxParser.SampleEntry.prototype.writeHeader=function(stream){this.size=8,BoxParser.Box.prototype.writeHeader.call(this,stream),stream.writeUint8(0),stream.writeUint8(0),stream.writeUint8(0),stream.writeUint8(0),stream.writeUint8(0),stream.writeUint8(0),stream.writeUint16(this.data_reference_index)},BoxParser.SampleEntry.prototype.writeFooter=function(stream){for(var i=0;i<this.boxes.length;i++)this.boxes[i].write(stream),this.size+=this.boxes[i].size;Log.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),stream.adjustUint32(this.sizePosition,this.size)},BoxParser.SampleEntry.prototype.write=function(stream){this.writeHeader(stream),stream.writeUint8Array(this.data),this.size+=this.data.length,Log.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),stream.adjustUint32(this.sizePosition,this.size)},BoxParser.VisualSampleEntry.prototype.write=function(stream){this.writeHeader(stream),this.size+=70,stream.writeUint16(0),stream.writeUint16(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint32(0),stream.writeUint16(this.width),stream.writeUint16(this.height),stream.writeUint32(this.horizresolution),stream.writeUint32(this.vertresolution),stream.writeUint32(0),stream.writeUint16(this.frame_count),stream.writeString(this.compressorname,null,32),stream.writeUint16(this.depth),stream.writeInt16(-1),this.writeFooter(stream)},BoxParser.AudioSampleEntry.prototype.write=function(stream){this.writeHeader(stream),this.size+=8,stream.writeUint16(this.version),stream.writeUint16(this.revision),stream.writeUint32(this.vendor),this.version?1==this.version&&(this.size+=28,stream.writeUint16(this.channel_count),stream.writeUint16(this.samplesize),stream.writeInt16(this.compressionId),stream.writeUint16(this.packetSize),stream.writeUint32(this.samplerate<<16),stream.writeUint32(this.samplesPerPacket),stream.writeUint32(this.bytesPerPacket),stream.writeUint32(this.bytesPerFrame),stream.writeUint32(this.bytesPerSample)):(this.size+=12,stream.writeUint16(this.channel_count),stream.writeUint16(this.samplesize),stream.writeUint16(0),stream.writeUint16(0),stream.writeUint32(this.samplerate<<16)),this.writeFooter(stream)},BoxParser.SampleGroupEntry.prototype.write=function(stream){stream.writeUint8Array(this.data)},BoxParser.sbgpBox.prototype.write=function(stream){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(stream),stream.writeString(this.grouping_type,null,4),stream.writeUint32(this.grouping_type_parameter),stream.writeUint32(this.entries.length);for(var i=0;i<this.entries.length;i++){var entry=this.entries[i];stream.writeInt32(entry.sample_count),stream.writeInt32(entry.group_description_index)}},BoxParser.sgpdBox.prototype.write=function(stream){var i,entry;for(this.flags=0,this.size=12,i=0;i<this.entries.length;i++)entry=this.entries[i],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=entry.data.length);for(this.writeHeader(stream),stream.writeString(this.grouping_type,null,4),1===this.version&&stream.writeUint32(this.default_length),this.version>=2&&stream.writeUint32(this.default_sample_description_index),stream.writeUint32(this.entries.length),i=0;i<this.entries.length;i++)entry=this.entries[i],1===this.version&&0===this.default_length&&stream.writeUint32(entry.description_length),entry.write(stream)},BoxParser.sidxBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(stream),stream.writeUint32(this.reference_ID),stream.writeUint32(this.timescale),stream.writeUint32(this.earliest_presentation_time),stream.writeUint32(this.first_offset),stream.writeUint16(0),stream.writeUint16(this.references.length);for(var i=0;i<this.references.length;i++){var ref=this.references[i];stream.writeUint32(ref.reference_type<<31|ref.referenced_size),stream.writeUint32(ref.subsegment_duration),stream.writeUint32(ref.starts_with_SAP<<31|ref.SAP_type<<28|ref.SAP_delta_time)}},BoxParser.stcoBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(stream),stream.writeUint32(this.chunk_offsets.length),stream.writeUint32Array(this.chunk_offsets)},BoxParser.stscBox.prototype.write=function(stream){var i;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(stream),stream.writeUint32(this.first_chunk.length),i=0;i<this.first_chunk.length;i++)stream.writeUint32(this.first_chunk[i]),stream.writeUint32(this.samples_per_chunk[i]),stream.writeUint32(this.sample_description_index[i])},BoxParser.stsdBox.prototype.write=function(stream){var i;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(stream),stream.writeUint32(this.entries.length),this.size+=4,i=0;i<this.entries.length;i++)this.entries[i].write(stream),this.size+=this.entries[i].size;Log.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),stream.adjustUint32(this.sizePosition,this.size)},BoxParser.stshBox.prototype.write=function(stream){var i;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(stream),stream.writeUint32(this.shadowed_sample_numbers.length),i=0;i<this.shadowed_sample_numbers.length;i++)stream.writeUint32(this.shadowed_sample_numbers[i]),stream.writeUint32(this.sync_sample_numbers[i])},BoxParser.stssBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(stream),stream.writeUint32(this.sample_numbers.length),stream.writeUint32Array(this.sample_numbers)},BoxParser.stszBox.prototype.write=function(stream){var i,constant=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(i=0;i+1<this.sample_sizes.length;){if(this.sample_sizes[i+1]!==this.sample_sizes[0]){constant=!1;break}i++}else constant=!1;this.size=8,constant||(this.size+=4*this.sample_sizes.length),this.writeHeader(stream),constant?stream.writeUint32(this.sample_sizes[0]):stream.writeUint32(0),stream.writeUint32(this.sample_sizes.length),constant||stream.writeUint32Array(this.sample_sizes)},BoxParser.sttsBox.prototype.write=function(stream){var i;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(stream),stream.writeUint32(this.sample_counts.length),i=0;i<this.sample_counts.length;i++)stream.writeUint32(this.sample_counts[i]),stream.writeUint32(this.sample_deltas[i])},BoxParser.tfdtBox.prototype.write=function(stream){this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(stream),1===this.version?stream.writeUint64(this.baseMediaDecodeTime):stream.writeUint32(this.baseMediaDecodeTime)},BoxParser.tfhdBox.prototype.write=function(stream){this.version=0,this.size=4,this.flags&BoxParser.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&BoxParser.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&BoxParser.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&BoxParser.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&BoxParser.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(stream),stream.writeUint32(this.track_id),this.flags&BoxParser.TFHD_FLAG_BASE_DATA_OFFSET&&stream.writeUint64(this.base_data_offset),this.flags&BoxParser.TFHD_FLAG_SAMPLE_DESC&&stream.writeUint32(this.default_sample_description_index),this.flags&BoxParser.TFHD_FLAG_SAMPLE_DUR&&stream.writeUint32(this.default_sample_duration),this.flags&BoxParser.TFHD_FLAG_SAMPLE_SIZE&&stream.writeUint32(this.default_sample_size),this.flags&BoxParser.TFHD_FLAG_SAMPLE_FLAGS&&stream.writeUint32(this.default_sample_flags)},BoxParser.tkhdBox.prototype.write=function(stream){this.version=0,this.size=80,this.writeHeader(stream),stream.writeUint32(this.creation_time),stream.writeUint32(this.modification_time),stream.writeUint32(this.track_id),stream.writeUint32(0),stream.writeUint32(this.duration),stream.writeUint32(0),stream.writeUint32(0),stream.writeInt16(this.layer),stream.writeInt16(this.alternate_group),stream.writeInt16(this.volume<<8),stream.writeUint16(0),stream.writeInt32Array(this.matrix),stream.writeUint32(this.width),stream.writeUint32(this.height)},BoxParser.trexBox.prototype.write=function(stream){this.version=0,this.flags=0,this.size=20,this.writeHeader(stream),stream.writeUint32(this.track_id),stream.writeUint32(this.default_sample_description_index),stream.writeUint32(this.default_sample_duration),stream.writeUint32(this.default_sample_size),stream.writeUint32(this.default_sample_flags)},BoxParser.trunBox.prototype.write=function(stream){this.version=0,this.size=4,this.flags&BoxParser.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),
this.flags&BoxParser.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&BoxParser.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&BoxParser.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&BoxParser.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&BoxParser.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(stream),stream.writeUint32(this.sample_count),this.flags&BoxParser.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=stream.getPosition(),stream.writeInt32(this.data_offset)),this.flags&BoxParser.TRUN_FLAGS_FIRST_FLAG&&stream.writeUint32(this.first_sample_flags);for(var i=0;i<this.sample_count;i++)this.flags&BoxParser.TRUN_FLAGS_DURATION&&stream.writeUint32(this.sample_duration[i]),this.flags&BoxParser.TRUN_FLAGS_SIZE&&stream.writeUint32(this.sample_size[i]),this.flags&BoxParser.TRUN_FLAGS_FLAGS&&stream.writeUint32(this.sample_flags[i]),this.flags&BoxParser.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?stream.writeUint32(this.sample_composition_time_offset[i]):stream.writeInt32(this.sample_composition_time_offset[i]))},BoxParser["url Box"].prototype.write=function(stream){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(stream),this.location&&stream.writeCString(this.location)},BoxParser["urn Box"].prototype.write=function(stream){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(stream),stream.writeCString(this.name),this.location&&stream.writeCString(this.location)},BoxParser.vmhdBox.prototype.write=function(stream){this.version=0,this.flags=1,this.size=8,this.writeHeader(stream),stream.writeUint16(this.graphicsmode),stream.writeUint16Array(this.opcolor)},BoxParser.cttsBox.prototype.unpack=function(samples){var i,j,k;for(k=0,i=0;i<this.sample_counts.length;i++)for(j=0;j<this.sample_counts[i];j++)samples[k].pts=samples[k].dts+this.sample_offsets[i],k++},BoxParser.sttsBox.prototype.unpack=function(samples){var i,j,k;for(k=0,i=0;i<this.sample_counts.length;i++)for(j=0;j<this.sample_counts[i];j++)0===k?samples[k].dts=0:samples[k].dts=samples[k-1].dts+this.sample_deltas[i],k++},BoxParser.stcoBox.prototype.unpack=function(samples){var i;for(i=0;i<this.chunk_offsets.length;i++)samples[i].offset=this.chunk_offsets[i]},BoxParser.stscBox.prototype.unpack=function(samples){var i,j,k,l,m;for(l=0,m=0,i=0;i<this.first_chunk.length;i++)for(j=0;j<(i+1<this.first_chunk.length?this.first_chunk[i+1]:1/0);j++)for(m++,k=0;k<this.samples_per_chunk[i];k++){if(!samples[l])return;samples[l].description_index=this.sample_description_index[i],samples[l].chunk_index=m,l++}},BoxParser.stszBox.prototype.unpack=function(samples){var i;for(i=0;i<this.sample_sizes.length;i++)samples[i].size=this.sample_sizes[i]};var VTTin4Parser=function(){};VTTin4Parser.prototype.parseSample=function(data){var cues,cue,stream=new MP4BoxStream(data.buffer);for(cues=[];!stream.isEos();)cue=BoxParser.parseOneBox(stream,!1),cue.code===BoxParser.OK&&"vttc"===cue.box.type&&cues.push(cue.box);return cues},VTTin4Parser.prototype.getText=function(startTime,endTime,data){function pad(n,width,z){return z=z||"0",n+="",n.length>=width?n:new Array(width-n.length+1).join(z)+n}function secToTimestamp(insec){var h=Math.floor(insec/3600),m=Math.floor((insec-3600*h)/60),s=Math.floor(insec-3600*h-60*m),ms=Math.floor(1e3*(insec-3600*h-60*m-s));return""+pad(h,2)+":"+pad(m,2)+":"+pad(s,2)+"."+pad(ms,3)}for(var cues=this.parseSample(data),string="",i=0;i<cues.length;i++){var cueIn4=cues[i];string+=secToTimestamp(startTime)+" --> "+secToTimestamp(endTime)+"\r\n",string+=cueIn4.payl.text}return string};var XMLSubtitlein4Parser=function(){};XMLSubtitlein4Parser.prototype.parseSample=function(sample){var i,res={};res.resources=[];var stream=new MP4BoxStream(sample.data.buffer);if(sample.subsamples&&0!==sample.subsamples.length){if(res.documentString=stream.readString(sample.subsamples[0].size),sample.subsamples.length>1)for(i=1;i<sample.subsamples.length;i++)res.resources[i]=stream.readUint8Array(sample.subsamples[i].size)}else res.documentString=stream.readString(sample.data.length);return res.document=(new DOMParser).parseFromString(res.documentString,"application/xml"),res};var Textin4Parser=function(){};Textin4Parser.prototype.parseSample=function(sample){var textString,stream=new MP4BoxStream(sample.data.buffer);return textString=stream.readString(sample.data.length)},Textin4Parser.prototype.parseConfig=function(data){var textString,stream=new MP4BoxStream(data.buffer);return stream.readUint32(),textString=stream.readCString()};var ISOFile=function(stream){this.stream=stream,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1};ISOFile.prototype.parse=function(){var ret,box,parseBoxHeadersOnly=!1;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;){if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}if(this.saveParsePosition&&this.saveParsePosition(),ret=BoxParser.parseOneBox(this.stream,parseBoxHeadersOnly),ret.code===BoxParser.ERR_NOT_ENOUGH_DATA){if(this.processIncompleteBox){if(this.processIncompleteBox(ret))continue;return}return}switch(box=ret.box,this.boxes.push(box),box.type){case"mdat":this.mdats.push(box);break;case"moof":this.moofs.push(box);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[box.type]&&Log.warn("ISOFile","Duplicate Box of type: "+box.type+", overriding previous occurrence"),this[box.type]=box}this.updateUsedBytes&&this.updateUsedBytes(box,ret)}},ISOFile.prototype.getBox=function(type){var result=this.getBoxes(type,!0);return result.length?result[0]:null},ISOFile.prototype.getBoxes=function(type,returnEarly){var result=[];return ISOFile._sweep.call(this,type,result,returnEarly),result},ISOFile._sweep=function(type,result,returnEarly){this.type&&this.type==type&&result.push(this);for(var box in this.boxes){if(result.length&&returnEarly)return;ISOFile._sweep.call(this.boxes[box],type,result,returnEarly)}},exports.ISOFile=ISOFile,ISOFile.prototype.lastBoxStartPosition=0,ISOFile.prototype.parsingMdat=null,ISOFile.prototype.nextParsePosition=0,ISOFile.prototype.discardMdatData=!1,ISOFile.prototype.processIncompleteBox=function(ret){var box,merged,found;return"mdat"===ret.type?(box=new BoxParser[ret.type+"Box"](ret.size),this.parsingMdat=box,this.boxes.push(box),this.mdats.push(box),box.start=ret.start,box.hdr_size=ret.hdr_size,this.stream.addUsedBytes(box.hdr_size),this.lastBoxStartPosition=box.start+box.size,found=this.stream.seek(box.start+box.size,!1,this.discardMdatData),found?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=box.start+box.size,!1)):("moov"===ret.type&&(this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0)),merged=!!this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer(),merged?(this.nextParsePosition=this.stream.getEndPosition(),!0):(ret.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+ret.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},ISOFile.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},ISOFile.prototype.processIncompleteMdat=function(){var box,found;return box=this.parsingMdat,found=this.stream.seek(box.start+box.size,!1,this.discardMdatData),found?(Log.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},ISOFile.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},ISOFile.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},ISOFile.prototype.updateUsedBytes=function(box,ret){this.stream.addUsedBytes&&("mdat"===box.type?(this.stream.addUsedBytes(box.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(box.size-box.hdr_size)):this.stream.addUsedBytes(box.size))},ISOFile.prototype.add=BoxParser.Box.prototype.add,ISOFile.prototype.init=function(){var moov=this.add("moov");return moov.add("mvhd").set("timescale",600).set("rate",1).set("creation_time",0).set("modification_time",0).set("duration",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("next_track_id",1),moov.add("mvex"),this},ISOFile.prototype.addTrack=function(_options){this.moov||this.init();var options=_options||{};options.width=options.width||320,options.height=options.height||320,options.id=options.id||this.moov.mvhd.next_track_id,options.type=options.type||"avc1";var trak=this.moov.add("trak");this.moov.mvhd.next_track_id=options.id+1,trak.add("tkhd").set("creation_time",0).set("modification_time",0).set("track_id",options.id).set("duration",0).set("layer",0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",options.width).set("height",options.height);var mdia=trak.add("mdia");mdia.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",options.timescale||1).set("duration",0).set("language",options.language||0),mdia.add("hdlr").set("handler",options.hdlr||"vide").set("name",options.name||"Track created with MP4Box.js"),mdia.add("elng").set("extended_language",options.language||"fr-FR");for(var minf=mdia.add("minf"),sample_entry=new BoxParser[options.type+"SampleEntry"],media_type="",i=0;i<BoxParser.sampleEntryCodes.length;i++){var code=BoxParser.sampleEntryCodes[i];if(code.types.indexOf(options.type)>-1){media_type=code.prefix;break}}switch(media_type){case"Visual":minf.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),sample_entry.set("width",options.width).set("height",options.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",options.type+" Compressor").set("depth",24),sample_entry.add("avcC").set("SPS",[]).set("PPS",[]).set("configurationVersion",0).set("AVCProfileIndication",0).set("profile_compatibility",0).set("AVCLevelIndication",0).set("lengthSizeMinusOne",0);break;case"Audio":minf.add("smhd");break;case"Hint":minf.add("hmhd");break;case"Subtitle":minf.add("sthd");break;case"Metadata":minf.add("nmhd");break;case"System":minf.add("nmhd");break;default:minf.add("nmhd")}minf.add("dinf").add("dref").addEntry((new BoxParser["url Box"]).set("flags",1));var stbl=mdia.add("stbl");return stbl.add("stsd").addEntry(sample_entry),stbl.add("stts").set("sample_counts",[]).set("sample_deltas",[]),stbl.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),this.moov.mvex.add("trex").set("track_id",options.id).set("default_sample_description_index",options.default_sample_description_index||0).set("default_sample_duration",options.default_sample_duration||0).set("default_sample_size",options.default_sample_size||0).set("default_sample_flags",options.default_sample_flags||0),trak},ISOFile.prototype.getBuffer=function(){var stream=new DataStream;return stream.endianness=DataStream.BIG_ENDIAN,this.write(stream),stream.buffer},ISOFile.prototype.addSample=function(trak,data,options){},ISOFile.prototype.lastMoofIndex=0,ISOFile.prototype.samplesDataSize=0,ISOFile.prototype.resetTables=function(){var i,trak,stco,stsc,stsz,stts,ctts,stss;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,i=0;i<this.moov.traks.length;i++){trak=this.moov.traks[i],trak.tkhd.duration=0,trak.mdia.mdhd.duration=0,stco=trak.mdia.minf.stbl.stco||trak.mdia.minf.stbl.co64,stco.chunk_offsets=[],stsc=trak.mdia.minf.stbl.stsc,stsc.first_chunk=[],stsc.samples_per_chunk=[],stsc.sample_description_index=[],stsz=trak.mdia.minf.stbl.stsz||trak.mdia.minf.stbl.stz2,stsz.sample_sizes=[],stts=trak.mdia.minf.stbl.stts,stts.sample_counts=[],stts.sample_deltas=[],ctts=trak.mdia.minf.stbl.ctts,ctts&&(ctts.sample_counts=[],ctts.sample_offsets=[]),stss=trak.mdia.minf.stbl.stss;var k=trak.mdia.minf.stbl.boxes.indexOf(stss);k!=-1&&(trak.mdia.minf.stbl.boxes[k]=null)}},ISOFile.initSampleGroups=function(trak,traf,sbgps,trak_sgpds,traf_sgpds){function SampleGroupInfo(_type,_parameter,_sbgp){this.grouping_type=_type,this.grouping_type_parameter=_parameter,this.sbgp=_sbgp,this.last_sample_in_run=-1,this.entry_index=-1}var l,k,sample_group_info,sample_group_key;for(traf&&(traf.sample_groups_info=[]),trak.sample_groups_info||(trak.sample_groups_info=[]),k=0;k<sbgps.length;k++){for(sample_group_key=sbgps[k].grouping_type+"/"+sbgps[k].grouping_type_parameter,sample_group_info=new SampleGroupInfo(sbgps[k].grouping_type,sbgps[k].grouping_type_parameter,sbgps[k]),traf&&(traf.sample_groups_info[sample_group_key]=sample_group_info),trak.sample_groups_info[sample_group_key]||(trak.sample_groups_info[sample_group_key]=sample_group_info),l=0;l<trak_sgpds.length;l++)trak_sgpds[l].grouping_type===sbgps[k].grouping_type&&(sample_group_info.description=trak_sgpds[l],sample_group_info.description.used=!0);if(traf_sgpds)for(l=0;l<traf_sgpds.length;l++)traf_sgpds[l].grouping_type===sbgps[k].grouping_type&&(sample_group_info.fragment_description=traf_sgpds[l],sample_group_info.fragment_description.used=!0,sample_group_info.is_fragment=!0)}if(traf){if(traf_sgpds)for(k=0;k<traf_sgpds.length;k++)!traf_sgpds[k].used&&traf_sgpds[k].version>=2&&(sample_group_key=traf_sgpds[k].grouping_type+"/0",sample_group_info=new SampleGroupInfo(traf_sgpds[k].grouping_type,0),sample_group_info.is_fragment=!0,traf.sample_groups_info[sample_group_key]||(traf.sample_groups_info[sample_group_key]=sample_group_info))}else for(k=0;k<trak_sgpds.length;k++)!trak_sgpds[k].used&&trak_sgpds[k].version>=2&&(sample_group_key=trak_sgpds[k].grouping_type+"/0",sample_group_info=new SampleGroupInfo(trak_sgpds[k].grouping_type,0),trak.sample_groups_info[sample_group_key]||(trak.sample_groups_info[sample_group_key]=sample_group_info))},ISOFile.setSampleGroupProperties=function(trak,sample,sample_number,sample_groups_info){var k,index;sample.sample_groups=[];for(k in sample_groups_info)if(sample.sample_groups[k]={},sample.sample_groups[k].grouping_type=sample_groups_info[k].grouping_type,sample.sample_groups[k].grouping_type_parameter=sample_groups_info[k].grouping_type_parameter,sample_number>=sample_groups_info[k].last_sample_in_run&&(sample_groups_info[k].last_sample_in_run<0&&(sample_groups_info[k].last_sample_in_run=0),sample_groups_info[k].entry_index++,sample_groups_info[k].entry_index<=sample_groups_info[k].sbgp.entries.length-1&&(sample_groups_info[k].last_sample_in_run+=sample_groups_info[k].sbgp.entries[sample_groups_info[k].entry_index].sample_count)),sample_groups_info[k].entry_index<=sample_groups_info[k].sbgp.entries.length-1?sample.sample_groups[k].group_description_index=sample_groups_info[k].sbgp.entries[sample_groups_info[k].entry_index].group_description_index:sample.sample_groups[k].group_description_index=-1,0!==sample.sample_groups[k].group_description_index){var description;description=sample_groups_info[k].fragment_description?sample_groups_info[k].fragment_description:sample_groups_info[k].description,sample.sample_groups[k].group_description_index>0?(index=sample.sample_groups[k].group_description_index>65535?(sample.sample_groups[k].group_description_index>>16)-1:sample.sample_groups[k].group_description_index-1,description&&index>=0&&(sample.sample_groups[k].description=description.entries[index])):description&&description.version>=2&&description.default_group_description_index>0&&(sample.sample_groups[k].description=description.entries[description.default_group_description_index-1])}},ISOFile.process_sdtp=function(sdtp,sample,number){sample&&(sdtp?(sample.is_leading=sdtp.is_leading[number],sample.depends_on=sdtp.sample_depends_on[number],sample.is_depended_on=sdtp.sample_is_depended_on[number],sample.has_redundancy=sdtp.sample_has_redundancy[number]):(sample.is_leading=0,sample.depends_on=0,sample.is_depended_on=0,sample.has_redundancy=0))},ISOFile.prototype.buildSampleLists=function(){var i,j,trak,stco,stsc,stsz,stts,ctts,stss,stsd,subs,sbgps,sgpds,stdp,chunk_run_index,chunk_index,last_chunk_in_run,offset_in_chunk,last_sample_in_chunk,last_sample_in_stts_run,stts_run_index,last_sample_in_ctts_run,ctts_run_index,last_stss_index,subs_entry_index,last_subs_sample_index;for(i=0;i<this.moov.traks.length;i++)if(trak=this.moov.traks[i],trak.samples=[],trak.samples_duration=0,trak.samples_size=0,stco=trak.mdia.minf.stbl.stco||trak.mdia.minf.stbl.co64,stsc=trak.mdia.minf.stbl.stsc,stsz=trak.mdia.minf.stbl.stsz||trak.mdia.minf.stbl.stz2,stts=trak.mdia.minf.stbl.stts,ctts=trak.mdia.minf.stbl.ctts,stss=trak.mdia.minf.stbl.stss,stsd=trak.mdia.minf.stbl.stsd,subs=trak.mdia.minf.stbl.subs,stdp=trak.mdia.minf.stbl.stdp,sbgps=trak.mdia.minf.stbl.sbgps,sgpds=trak.mdia.minf.stbl.sgpds,last_sample_in_stts_run=-1,stts_run_index=-1,last_sample_in_ctts_run=-1,ctts_run_index=-1,last_stss_index=0,subs_entry_index=0,last_subs_sample_index=0,ISOFile.initSampleGroups(trak,null,sbgps,sgpds),"undefined"!=typeof stsz){for(j=0;j<stsz.sample_sizes.length;j++){var sample={};sample.number=j,sample.track_id=trak.tkhd.track_id,sample.timescale=trak.mdia.mdhd.timescale,sample.alreadyRead=0,trak.samples[j]=sample,sample.size=stsz.sample_sizes[j],trak.samples_size+=sample.size,0===j?(chunk_index=1,chunk_run_index=0,sample.chunk_index=chunk_index,sample.chunk_run_index=chunk_run_index,last_sample_in_chunk=stsc.samples_per_chunk[chunk_run_index],offset_in_chunk=0,last_chunk_in_run=chunk_run_index+1<stsc.first_chunk.length?stsc.first_chunk[chunk_run_index+1]-1:1/0):j<last_sample_in_chunk?(sample.chunk_index=chunk_index,sample.chunk_run_index=chunk_run_index):(chunk_index++,sample.chunk_index=chunk_index,offset_in_chunk=0,chunk_index<=last_chunk_in_run||(chunk_run_index++,last_chunk_in_run=chunk_run_index+1<stsc.first_chunk.length?stsc.first_chunk[chunk_run_index+1]-1:1/0),sample.chunk_run_index=chunk_run_index,last_sample_in_chunk+=stsc.samples_per_chunk[chunk_run_index]),sample.description_index=stsc.sample_description_index[sample.chunk_run_index]-1,sample.description=stsd.entries[sample.description_index],sample.offset=stco.chunk_offsets[sample.chunk_index-1]+offset_in_chunk,offset_in_chunk+=sample.size,j>last_sample_in_stts_run&&(stts_run_index++,last_sample_in_stts_run<0&&(last_sample_in_stts_run=0),last_sample_in_stts_run+=stts.sample_counts[stts_run_index]),j>0?(trak.samples[j-1].duration=stts.sample_deltas[stts_run_index],trak.samples_duration+=trak.samples[j-1].duration,sample.dts=trak.samples[j-1].dts+trak.samples[j-1].duration):sample.dts=0,ctts?(j>=last_sample_in_ctts_run&&(ctts_run_index++,last_sample_in_ctts_run<0&&(last_sample_in_ctts_run=0),last_sample_in_ctts_run+=ctts.sample_counts[ctts_run_index]),sample.cts=trak.samples[j].dts+ctts.sample_offsets[ctts_run_index]):sample.cts=sample.dts,stss?j==stss.sample_numbers[last_stss_index]-1?(sample.is_sync=!0,last_stss_index++):sample.is_sync=!1:sample.is_sync=!0,ISOFile.process_sdtp(trak.mdia.minf.stbl.sdtp,sample,sample.number),stdp?sample.degradation_priority=stdp.priority[j]:sample.degradation_priority=0,subs&&subs.entries[subs_entry_index].sample_delta+last_subs_sample_index==j&&(sample.subsamples=subs.entries[subs_entry_index].subsamples,last_subs_sample_index+=subs.entries[subs_entry_index].sample_delta),(sbgps.length>0||sgpds.length>0)&&ISOFile.setSampleGroupProperties(trak,sample,j,trak.sample_groups_info)}j>0&&(trak.samples[j-1].duration=Math.max(trak.mdia.mdhd.duration-trak.samples[j-1].dts,0),trak.samples_duration+=trak.samples[j-1].duration)}},ISOFile.prototype.updateSampleLists=function(){var i,j,k,default_sample_description_index,default_sample_duration,default_sample_size,default_sample_flags,last_run_position,box,moof,traf,trak,trex,sample,sample_flags;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(box=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==box.type)for(moof=box,i=0;i<moof.trafs.length;i++){for(traf=moof.trafs[i],trak=this.getTrackById(traf.tfhd.track_id),trex=this.getTrexById(traf.tfhd.track_id),default_sample_description_index=traf.tfhd.flags&BoxParser.TFHD_FLAG_SAMPLE_DESC?traf.tfhd.default_sample_description_index:trex?trex.default_sample_description_index:1,default_sample_duration=traf.tfhd.flags&BoxParser.TFHD_FLAG_SAMPLE_DUR?traf.tfhd.default_sample_duration:trex?trex.default_sample_duration:0,default_sample_size=traf.tfhd.flags&BoxParser.TFHD_FLAG_SAMPLE_SIZE?traf.tfhd.default_sample_size:trex?trex.default_sample_size:0,default_sample_flags=traf.tfhd.flags&BoxParser.TFHD_FLAG_SAMPLE_FLAGS?traf.tfhd.default_sample_flags:trex?trex.default_sample_flags:0,traf.sample_number=0,traf.sbgps.length>0&&ISOFile.initSampleGroups(trak,traf,traf.sbgps,trak.mdia.minf.stbl.sgpds,traf.sgpds),j=0;j<traf.truns.length;j++){var trun=traf.truns[j];for(k=0;k<trun.sample_count;k++){sample={},sample.number_in_traf=traf.sample_number,traf.sample_number++,sample.number=trak.samples.length,traf.first_sample_index=trak.samples.length,trak.samples.push(sample),sample.track_id=trak.tkhd.track_id,sample.timescale=trak.mdia.mdhd.timescale,sample.description_index=default_sample_description_index-1,sample.description=trak.mdia.minf.stbl.stsd.entries[sample.description_index],sample.size=default_sample_size,trun.flags&BoxParser.TRUN_FLAGS_SIZE&&(sample.size=trun.sample_size[k]),trak.samples_size+=sample.size,sample.duration=default_sample_duration,trun.flags&BoxParser.TRUN_FLAGS_DURATION&&(sample.duration=trun.sample_duration[k]),trak.samples_duration+=sample.duration,trak.first_traf_merged||k>0?sample.dts=trak.samples[trak.samples.length-2].dts+trak.samples[trak.samples.length-2].duration:(traf.tfdt?sample.dts=traf.tfdt.baseMediaDecodeTime:sample.dts=0,trak.first_traf_merged=!0),sample.cts=sample.dts,trun.flags&BoxParser.TRUN_FLAGS_CTS_OFFSET&&(sample.cts=sample.dts+trun.sample_composition_time_offset[k]),sample_flags=default_sample_flags,trun.flags&BoxParser.TRUN_FLAGS_FLAGS?sample_flags=trun.sample_flags[k]:0===k&&trun.flags&BoxParser.TRUN_FLAGS_FIRST_FLAG&&(sample_flags=trun.first_sample_flags),sample.is_sync=!(sample_flags>>16&1),sample.is_leading=sample_flags>>26&3,sample.depends_on=sample_flags>>24&3,sample.is_depended_on=sample_flags>>22&3,sample.has_redundancy=sample_flags>>20&3,sample.degradation_priority=65535&sample_flags,ISOFile.process_sdtp(traf.sdtp,sample,sample.number_in_traf);var bdop=!!(traf.tfhd.flags&BoxParser.TFHD_FLAG_BASE_DATA_OFFSET),dbim=!!(traf.tfhd.flags&BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),dop=!!(trun.flags&BoxParser.TRUN_FLAGS_DATA_OFFSET),bdo=0;bdo=bdop?traf.tfhd.base_data_offset:dbim?moof.start:0===j?moof.start:last_run_position,0===j&&0===k?dop?sample.offset=bdo+trun.data_offset:sample.offset=bdo:sample.offset=last_run_position,last_run_position=sample.offset+sample.size,(traf.sbgps.length>0||traf.sgpds.length>0||trak.mdia.minf.stbl.sbgps.length>0||trak.mdia.minf.stbl.sgpds.length>0)&&ISOFile.setSampleGroupProperties(trak,sample,sample.number_in_traf,traf.sample_groups_info)}}if(traf.subs){trak.has_fragment_subsamples=!0;var sample_index=traf.first_sample_index;for(j=0;j<traf.subs.entries.length;j++)sample_index+=traf.subs.entries[j].sample_delta,sample=trak.samples[sample_index-1],sample.subsamples=traf.subs.entries[j].subsamples}}},ISOFile.prototype.getSample=function(trak,sampleNum){var buffer,sample=trak.samples[sampleNum];if(!this.moov)return null;if(sample.data){if(sample.alreadyRead==sample.size)return sample}else sample.data=new Uint8Array(sample.size),sample.alreadyRead=0,this.samplesDataSize+=sample.size,Log.debug("ISOFile","Allocating sample #"+sampleNum+" on track #"+trak.tkhd.track_id+" of size "+sample.size+" (total: "+this.samplesDataSize+")");var index=this.stream.findPosition(!0,sample.offset+sample.alreadyRead,!1);if(index>-1){buffer=this.stream.buffers[index];var lengthAfterStart=buffer.byteLength-(sample.offset+sample.alreadyRead-buffer.fileStart);return sample.size-sample.alreadyRead<=lengthAfterStart?(Log.debug("ISOFile","Getting sample #"+sampleNum+" data (alreadyRead: "+sample.alreadyRead+" offset: "+(sample.offset+sample.alreadyRead-buffer.fileStart)+" read size: "+(sample.size-sample.alreadyRead)+" full size: "+sample.size+")"),DataStream.memcpy(sample.data.buffer,sample.alreadyRead,buffer,sample.offset+sample.alreadyRead-buffer.fileStart,sample.size-sample.alreadyRead),buffer.usedBytes+=sample.size-sample.alreadyRead,this.stream.logBufferLevel(),sample.alreadyRead=sample.size,sample):(Log.debug("ISOFile","Getting sample #"+sampleNum+" partial data (alreadyRead: "+sample.alreadyRead+" offset: "+(sample.offset+sample.alreadyRead-buffer.fileStart)+" read size: "+lengthAfterStart+" full size: "+sample.size+")"),DataStream.memcpy(sample.data.buffer,sample.alreadyRead,buffer,sample.offset+sample.alreadyRead-buffer.fileStart,lengthAfterStart),sample.alreadyRead+=lengthAfterStart,buffer.usedBytes+=lengthAfterStart,this.stream.logBufferLevel(),null)}return null},ISOFile.prototype.releaseSample=function(trak,sampleNum){var sample=trak.samples[sampleNum];return sample.data?(this.samplesDataSize-=sample.size,sample.data=null,sample.alreadyRead=0,sample.size):0},ISOFile.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},ISOFile.prototype.getCodecs=function(){var i,codecs="";for(i=0;i<this.moov.traks.length;i++){var trak=this.moov.traks[i];i>0&&(codecs+=","),codecs+=trak.mdia.minf.stbl.stsd.entries[0].getCodec()}return codecs},ISOFile.prototype.getTrexById=function(id){var i;if(!this.moov||!this.moov.mvex)return null;for(i=0;i<this.moov.mvex.trexs.length;i++){var trex=this.moov.mvex.trexs[i];if(trex.track_id==id)return trex}return null},ISOFile.prototype.getTrackById=function(id){if(void 0===this.moov)return null;for(var j=0;j<this.moov.traks.length;j++){var trak=this.moov.traks[j];if(trak.tkhd.track_id==id)return trak}return null},ISOFile.prototype.items=[],ISOFile.prototype.itemsDataSize=0,ISOFile.prototype.flattenItemInfo=function(){var i,j,item,items=this.items,meta=this.meta;if(null!==meta&&void 0!==meta&&void 0!==meta.hdlr&&void 0!==meta.iinf){for(i=0;i<meta.iinf.item_infos.length;i++)item={},item.id=meta.iinf.item_infos[i].item_ID,items[item.id]=item,item.ref_to=[],item.name=meta.iinf.item_infos[i].item_name,meta.iinf.item_infos[i].protection_index>0&&(item.protection=meta.ipro.protections[meta.iinf.item_infos[i].protection_index-1]),meta.iinf.item_infos[i].item_type?item.type=meta.iinf.item_infos[i].item_type:item.type="mime",item.content_type=meta.iinf.item_infos[i].content_type,item.content_encoding=meta.iinf.item_infos[i].content_encoding;if(meta.iloc)for(i=0;i<meta.iloc.items.length;i++){var itemloc=meta.iloc.items[i];if(item=items[itemloc.item_ID],0!==itemloc.data_reference_index&&(Log.warn("Item storage with reference to other files: not supported"),item.source=meta.dinf.boxes[itemloc.data_reference_index-1]),void 0!==itemloc.construction_method)switch(Log.warn("Item storage with construction_method : not supported"),itemloc.construction_method){case 0:break;case 1:break;case 2:}else for(item.extents=[],item.size=0,j=0;j<itemloc.extents.length;j++)item.extents[j]={},item.extents[j].offset=itemloc.extents[j].extent_offset+itemloc.base_offset,item.extents[j].length=itemloc.extents[j].extent_length,item.extents[j].alreadyRead=0,item.size+=item.extents[j].length}if(meta.pitm&&(items[meta.pitm.item_id].primary=!0),meta.iref)for(i=0;i<meta.iref.references.length;i++){var ref=meta.iref.references[i];for(j=0;j<ref.references.length;j++)items[ref.from_item_ID].ref_to.push({type:ref.type,id:ref.references[j]})}}},ISOFile.prototype.getItem=function(item_id){var buffer,item;if(!this.meta)return null;if(item=this.items[item_id],!item.data&&item.size)item.data=new Uint8Array(item.size),item.alreadyRead=0,this.itemsDataSize+=item.size,Log.debug("ISOFile","Allocating item #"+item_id+" of size "+item.size+" (total: "+this.itemsDataSize+")");else if(item.alreadyRead===item.size)return item;for(var i=0;i<item.extents.length;i++){var extent=item.extents[i];if(extent.alreadyRead!==extent.length){var index=this.stream.findPosition(!0,extent.offset+extent.alreadyRead,!1);if(!(index>-1))return null;buffer=this.stream.buffers[index];var lengthAfterStart=buffer.byteLength-(extent.offset+extent.alreadyRead-buffer.fileStart);if(!(extent.length-extent.alreadyRead<=lengthAfterStart))return Log.debug("ISOFile","Getting item #"+item_id+" extent #"+i+" partial data (alreadyRead: "+extent.alreadyRead+" offset: "+(extent.offset+extent.alreadyRead-buffer.fileStart)+" read size: "+lengthAfterStart+" full extent size: "+extent.length+" full item size: "+item.size+")"),DataStream.memcpy(item.data.buffer,item.alreadyRead,buffer,extent.offset+extent.alreadyRead-buffer.fileStart,lengthAfterStart),extent.alreadyRead+=lengthAfterStart,item.alreadyRead+=lengthAfterStart,buffer.usedBytes+=lengthAfterStart,this.stream.logBufferLevel(),null;Log.debug("ISOFile","Getting item #"+item_id+" extent #"+i+" data (alreadyRead: "+extent.alreadyRead+" offset: "+(extent.offset+extent.alreadyRead-buffer.fileStart)+" read size: "+(extent.length-extent.alreadyRead)+" full extent size: "+extent.length+" full item size: "+item.size+")"),DataStream.memcpy(item.data.buffer,item.alreadyRead,buffer,extent.offset+extent.alreadyRead-buffer.fileStart,extent.length-extent.alreadyRead),buffer.usedBytes+=extent.length-extent.alreadyRead,this.stream.logBufferLevel(),extent.alreadyRead=extent.length,item.alreadyRead+=extent.length}}return item.alreadyRead===item.size?item:null},ISOFile.prototype.releaseItem=function(item_id){var item=this.items[item_id];if(item.data){this.itemsDataSize-=item.size,item.data=null,item.alreadyRead=0;for(var i=0;i<item.extents.length;i++){var extent=item.extents[i];extent.alreadyRead=0}return item.size}return 0},ISOFile.prototype.processItems=function(callback){for(var i in this.items){var item=this.items[i];this.getItem(item.id),callback&&!item.sent&&(callback(item),item.sent=!0,item.data=null)}},ISOFile.prototype.hasItem=function(name){for(var i in this.items){var item=this.items[i];if(item.name===name)return item.id}return-1},ISOFile.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.componentSubType:null},ISOFile.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},ISOFile.prototype.write=function(outstream){for(var i=0;i<this.boxes.length;i++)this.boxes[i].write(outstream)},ISOFile.writeInitializationSegment=function(ftyp,moov,total_duration,sample_duration){var i;Log.debug("ISOFile","Generating initialization segment");var stream=new DataStream;stream.endianness=DataStream.BIG_ENDIAN,ftyp.write(stream);var mvex=moov.add("mvex");for(total_duration&&mvex.add("mehd").set("fragment_duration",total_duration),i=0;i<moov.traks.length;i++)mvex.add("trex").set("track_id",moov.traks[i].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",sample_duration).set("default_sample_size",0).set("default_sample_flags",65536);return moov.write(stream),stream.buffer};var MP4Box=function(_keepMdatData){this.inputStream=new MultiBufferStream,this.keepMdatData=void 0===_keepMdatData||_keepMdatData,this.inputIsoFile=new ISOFile(this.inputStream),this.inputIsoFile.discardMdatData=!this.keepMdatData,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1};MP4Box.prototype.setSegmentOptions=function(id,user,options){var trak=this.inputIsoFile.getTrackById(id);if(trak){var fragTrack={};this.fragmentedTracks.push(fragTrack),fragTrack.id=id,fragTrack.user=user,fragTrack.trak=trak,trak.nextSample=0,fragTrack.segmentStream=null,
fragTrack.nb_samples=1e3,fragTrack.rapAlignement=!0,options&&(options.nbSamples&&(fragTrack.nb_samples=options.nbSamples),options.rapAlignement&&(fragTrack.rapAlignement=options.rapAlignement))}},MP4Box.prototype.unsetSegmentOptions=function(id){for(var index=-1,i=0;i<this.fragmentedTracks.length;i++){var fragTrack=this.fragmentedTracks[i];fragTrack.id==id&&(index=i)}index>-1&&this.fragmentedTracks.splice(index,1)},MP4Box.prototype.setExtractionOptions=function(id,user,options){var trak=this.inputIsoFile.getTrackById(id);if(trak){var extractTrack={};this.extractedTracks.push(extractTrack),extractTrack.id=id,extractTrack.user=user,extractTrack.trak=trak,trak.nextSample=0,extractTrack.nb_samples=1e3,extractTrack.samples=[],options&&options.nbSamples&&(extractTrack.nb_samples=options.nbSamples)}},MP4Box.prototype.unsetExtractionOptions=function(id){for(var index=-1,i=0;i<this.extractedTracks.length;i++){var extractTrack=this.extractedTracks[i];extractTrack.id==id&&(index=i)}index>-1&&this.extractedTracks.splice(index,1)},MP4Box.prototype.createSingleSampleMoof=function(sample){var moof=new BoxParser.moofBox;moof.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var traf=moof.add("traf");return traf.add("tfhd").set("track_id",sample.track_id).set("flags",BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),traf.add("tfdt").set("baseMediaDecodeTime",sample.dts),traf.add("trun").set("flags",BoxParser.TRUN_FLAGS_DATA_OFFSET|BoxParser.TRUN_FLAGS_DURATION|BoxParser.TRUN_FLAGS_SIZE|BoxParser.TRUN_FLAGS_FLAGS|BoxParser.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[sample.duration]).set("sample_size",[sample.size]).set("sample_flags",[0]).set("sample_composition_time_offset",[sample.cts-sample.dts]),moof},MP4Box.prototype.createFragment=function(input,track_id,sampleNumber,stream_){var trak=this.inputIsoFile.getTrackById(track_id),sample=this.inputIsoFile.getSample(trak,sampleNumber);if(null==sample)return sample=trak.samples[sampleNumber],this.nextSeekPosition?this.nextSeekPosition=Math.min(sample.offset+sample.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=trak.samples[sampleNumber].offset+sample.alreadyRead,null;var stream=stream_||new DataStream;stream.endianness=DataStream.BIG_ENDIAN;var moof=this.createSingleSampleMoof(sample);moof.write(stream),moof.trafs[0].truns[0].data_offset=moof.size+8,Log.debug("MP4Box","Adjusting data_offset with new value "+moof.trafs[0].truns[0].data_offset),stream.adjustUint32(moof.trafs[0].truns[0].data_offset_position,moof.trafs[0].truns[0].data_offset);var mdat=new BoxParser.mdatBox;return mdat.data=sample.data,mdat.write(stream),stream},MP4Box.prototype.processSamples=function(){var i,trak;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(i=0;i<this.fragmentedTracks.length;i++){var fragTrak=this.fragmentedTracks[i];for(trak=fragTrak.trak;trak.nextSample<trak.samples.length&&this.sampleProcessingStarted;){Log.debug("MP4Box","Creating media fragment on track #"+fragTrak.id+" for sample "+trak.nextSample);var result=this.createFragment(this.inputIsoFile,fragTrak.id,trak.nextSample,fragTrak.segmentStream);if(!result)break;if(fragTrak.segmentStream=result,trak.nextSample++,(trak.nextSample%fragTrak.nb_samples===0||trak.nextSample>=trak.samples.length)&&(Log.info("MP4Box","Sending fragmented data on track #"+fragTrak.id+" for samples ["+Math.max(0,trak.nextSample-fragTrak.nb_samples)+","+(trak.nextSample-1)+"]"),Log.info("MP4Box","Sample data size in memory: "+this.inputIsoFile.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(fragTrak.id,fragTrak.user,fragTrak.segmentStream.buffer,trak.nextSample),fragTrak.segmentStream=null,fragTrak!==this.fragmentedTracks[i]))break}}if(null!==this.onSamples)for(i=0;i<this.extractedTracks.length;i++){var extractTrak=this.extractedTracks[i];for(trak=extractTrak.trak;trak.nextSample<trak.samples.length&&this.sampleProcessingStarted;){Log.debug("MP4Box","Exporting on track #"+extractTrak.id+" sample #"+trak.nextSample);var sample=this.inputIsoFile.getSample(trak,trak.nextSample);if(!sample)break;if(trak.nextSample++,extractTrak.samples.push(sample),(trak.nextSample%extractTrak.nb_samples===0||trak.nextSample>=trak.samples.length)&&(Log.debug("MP4Box","Sending samples on track #"+extractTrak.id+" for sample "+trak.nextSample),this.onSamples&&this.onSamples(extractTrak.id,extractTrak.user,extractTrak.samples),extractTrak.samples=[],extractTrak!==this.extractedTracks[i]))break}}}},MP4Box.prototype.checkBuffer=function(ab){if(null===ab||void 0===ab)throw"Buffer must be defined and non empty";if(void 0===ab.fileStart)throw"Buffer must have a fileStart property";return 0===ab.byteLength?(Log.warn("MP4Box","Ignoring empty buffer (fileStart: "+ab.fileStart+")"),this.inputStream.logBufferLevel(),!1):(Log.info("MP4Box","Processing buffer (fileStart: "+ab.fileStart+")"),ab.usedBytes=0,this.inputStream.insertBuffer(ab),this.inputStream.logBufferLevel(),!!this.inputStream.initialized()||(Log.warn("MP4Box","Not ready to start parsing"),!1))},MP4Box.prototype.appendBuffer=function(ab){var nextFileStart;if(!this.checkBuffer||this.checkBuffer(ab))return this.inputIsoFile.parse(),this.inputIsoFile.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.inputIsoFile.moov?(this.processSamples&&(this.sampleListBuilt||(this.inputIsoFile.buildSampleLists(),this.sampleListBuilt=!0),this.inputIsoFile.updateSampleLists()),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples&&this.processSamples(),this.nextSeekPosition?(nextFileStart=this.nextSeekPosition,this.nextSeekPosition=void 0):nextFileStart=this.inputIsoFile.nextParsePosition,this.inputStream.getEndFilePositionAfter&&(nextFileStart=this.inputStream.getEndFilePositionAfter(nextFileStart))):nextFileStart=null!==this.inputIsoFile?this.inputIsoFile.nextParsePosition:0,this.inputIsoFile.meta&&(this.inputIsoFile.flattenItemInfo&&!this.itemListBuilt&&(this.inputIsoFile.flattenItemInfo(),this.itemListBuilt=!0),this.inputIsoFile.processItems&&this.inputIsoFile.processItems(this.onItem)),this.inputStream.cleanBuffers&&(Log.info("MP4Box","Done processing buffer (fileStart: "+ab.fileStart+") - next buffer to fetch should have a fileStart position of "+nextFileStart),this.inputStream.logBufferLevel(),this.inputStream.cleanBuffers(),this.inputStream.logBufferLevel(!0),Log.info("MP4Box","Sample data size in memory: "+this.inputIsoFile.getAllocatedSampleDataSize())),nextFileStart},MP4Box.prototype.getInfo=function(){var i,j,trak,track,sample_desc,movie={},_1904=new Date(4,0,1,0,0,0,0).getTime();if(this.inputIsoFile.moov)for(movie.hasMoov=!0,movie.duration=this.inputIsoFile.moov.mvhd.duration,movie.timescale=this.inputIsoFile.moov.mvhd.timescale,movie.isFragmented=null!=this.inputIsoFile.moov.mvex,movie.isFragmented&&this.inputIsoFile.moov.mvex.mehd&&(movie.fragment_duration=this.inputIsoFile.moov.mvex.mehd.fragment_duration),movie.isProgressive=this.inputIsoFile.isProgressive,movie.hasIOD=null!=this.inputIsoFile.moov.iods,movie.brands=[],movie.brands.push(this.inputIsoFile.ftyp.major_brand),movie.brands=movie.brands.concat(this.inputIsoFile.ftyp.compatible_brands),movie.created=new Date(_1904+1e3*this.inputIsoFile.moov.mvhd.creation_time),movie.modified=new Date(_1904+1e3*this.inputIsoFile.moov.mvhd.modification_time),movie.tracks=[],movie.audioTracks=[],movie.videoTracks=[],movie.subtitleTracks=[],movie.metadataTracks=[],movie.hintTracks=[],movie.otherTracks=[],i=0;i<this.inputIsoFile.moov.traks.length;i++){if(trak=this.inputIsoFile.moov.traks[i],sample_desc=trak.mdia.minf.stbl.stsd.entries[0],track={},movie.tracks.push(track),track.id=trak.tkhd.track_id,track.name=trak.mdia.hdlr.name,track.references=[],trak.tref)for(j=0;j<trak.tref.boxes.length;j++)ref={},track.references.push(ref),ref.type=trak.tref.boxes[j].type,ref.track_ids=trak.tref.boxes[j].track_ids;trak.edts&&(track.edits=trak.edts.elst.entries),track.created=new Date(_1904+1e3*trak.tkhd.creation_time),track.modified=new Date(_1904+1e3*trak.tkhd.modification_time),track.movie_duration=trak.tkhd.duration,track.movie_timescale=movie.timescale,track.layer=trak.tkhd.layer,track.alternate_group=trak.tkhd.alternate_group,track.volume=trak.tkhd.volume,track.matrix=trak.tkhd.matrix,track.track_width=trak.tkhd.width/65536,track.track_height=trak.tkhd.height/65536,track.timescale=trak.mdia.mdhd.timescale,track.cts_shift=trak.mdia.minf.stbl.cslg,track.duration=trak.mdia.mdhd.duration,track.samples_duration=trak.samples_duration,track.codec=sample_desc.getCodec(),track.kind=trak.udta&&trak.udta.kinds.length?trak.udta.kinds[0]:{schemeURI:"",value:""},track.language=trak.mdia.elng?trak.mdia.elng.extended_language:trak.mdia.mdhd.languageString,track.nb_samples=trak.samples.length,track.size=trak.samples_size,track.bitrate=8*track.size*track.timescale/track.samples_duration,sample_desc.isAudio()?(track.type="audio",movie.audioTracks.push(track),track.audio={},track.audio.sample_rate=sample_desc.getSampleRate(),track.audio.channel_count=sample_desc.getChannelCount(),track.audio.sample_size=sample_desc.getSampleSize()):sample_desc.isVideo()?(track.type="video",movie.videoTracks.push(track),track.video={},track.video.width=sample_desc.getWidth(),track.video.height=sample_desc.getHeight()):sample_desc.isSubtitle()?(track.type="subtitles",movie.subtitleTracks.push(track)):sample_desc.isHint()?(track.type="metadata",movie.hintTracks.push(track)):sample_desc.isMetadata()?(track.type="metadata",movie.metadataTracks.push(track)):(track.type="metadata",movie.otherTracks.push(track))}else movie.hasMoov=!1;for(movie.mime="",movie.videoTracks.length>0?movie.mime+='video/mp4; codecs="':movie.audioTracks.length>0?movie.mime+='audio/mp4; codecs="':movie.mime+='application/mp4; codecs="',i=0;i<movie.tracks.length;i++)0!==i&&(movie.mime+=","),movie.mime+=movie.tracks[i].codec;return movie.mime+='"; profiles="',movie.mime+=this.inputIsoFile.ftyp.compatible_brands.join(),movie.mime+='"',movie},MP4Box.prototype.writeFile=function(){var stream=new DataStream;return stream.endianness=DataStream.BIG_ENDIAN,this.inputIsoFile.write(stream),stream.buffer},MP4Box.prototype.initializeSegmentation=function(){var i,initSegs,trak,seg;for(null===this.onSegment&&Log.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.inputIsoFile.resetTables()),initSegs=[],i=0;i<this.fragmentedTracks.length;i++){var moov=new BoxParser.moovBox;moov.mvhd=this.inputIsoFile.moov.mvhd,moov.boxes.push(moov.mvhd),trak=this.inputIsoFile.getTrackById(this.fragmentedTracks[i].id),moov.boxes.push(trak),moov.traks.push(trak),seg={},seg.id=trak.tkhd.track_id,seg.user=this.fragmentedTracks[i].user,seg.buffer=ISOFile.writeInitializationSegment(this.inputIsoFile.ftyp,moov,this.inputIsoFile.moov.mvex&&this.inputIsoFile.moov.mvex.mehd?this.inputIsoFile.moov.mvex.mehd.fragment_duration:void 0,this.inputIsoFile.moov.traks[i].samples.length>0?this.inputIsoFile.moov.traks[i].samples[0].duration:0),initSegs.push(seg)}return initSegs},MP4Box.prototype.releaseUsedSamples=function(id,sampleNum){var size=0,trak=this.inputIsoFile.getTrackById(id);trak.lastValidSample||(trak.lastValidSample=0);for(var i=trak.lastValidSample;i<sampleNum;i++)size+=this.inputIsoFile.releaseSample(trak,i);Log.info("MP4Box","Track #"+id+" released samples up to "+sampleNum+" (released size: "+size+", remaining: "+this.inputIsoFile.samplesDataSize+")"),trak.lastValidSample=sampleNum},MP4Box.prototype.flush=function(){Log.info("MP4Box","Flushing remaining samples"),this.inputIsoFile.updateSampleLists(),this.processSamples(),this.inputStream.cleanBuffers(),this.inputStream.logBufferLevel(!0)},MP4Box.prototype.seekTrack=function(time,useRap,trak){var j,sample,timescale,seek_offset=1/0,rap_seek_sample_num=0,seek_sample_num=0;if(0===trak.samples.length)return Log.info("MP4Box","No sample in track, cannot seek! Using time "+Log.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(j=0;j<trak.samples.length;j++){if(sample=trak.samples[j],0===j)seek_sample_num=0,timescale=sample.timescale;else if(sample.cts>time*sample.timescale){seek_sample_num=j-1;break}useRap&&sample.is_sync&&(rap_seek_sample_num=j)}for(useRap&&(seek_sample_num=rap_seek_sample_num),time=trak.samples[seek_sample_num].cts,trak.nextSample=seek_sample_num;trak.samples[seek_sample_num].alreadyRead===trak.samples[seek_sample_num].size;)seek_sample_num++;return seek_offset=trak.samples[seek_sample_num].offset+trak.samples[seek_sample_num].alreadyRead,Log.info("MP4Box","Seeking to "+(useRap?"RAP":"")+" sample #"+trak.nextSample+" on track "+trak.tkhd.track_id+", time "+Log.getDurationString(time,timescale)+" and offset: "+seek_offset),{offset:seek_offset,time:time/timescale}},MP4Box.prototype.seek=function(time,useRap){var trak,trak_seek_info,i,moov=this.inputIsoFile.moov,seek_info={offset:1/0,time:1/0};if(this.inputIsoFile.moov){for(i=0;i<moov.traks.length;i++)trak=moov.traks[i],trak_seek_info=this.seekTrack(time,useRap,trak),trak_seek_info.offset<seek_info.offset&&(seek_info.offset=trak_seek_info.offset),trak_seek_info.time<seek_info.time&&(seek_info.time=trak_seek_info.time);return Log.info("MP4Box","Seeking at time "+Log.getDurationString(seek_info.time,1)+" needs a buffer with a fileStart position of "+seek_info.offset),seek_info.offset===1/0?seek_info={offset:this.inputIsoFile.nextParsePosition,time:0}:seek_info.offset=this.inputStream.getEndFilePositionAfter(seek_info.offset),Log.info("MP4Box","Adjusted seek position (after checking data already in buffer): "+seek_info.offset),seek_info}throw"Cannot seek: moov not received!"},MP4Box.prototype.getTrackSamplesInfo=function(track_id){var track=this.inputIsoFile.getTrackById(track_id);return track?track.samples:void 0},MP4Box.prototype.getTrackSample=function(track_id,number){var track=this.inputIsoFile.getTrackById(track_id),sample=this.inputIsoFile.getSample(track,number);return sample},MP4Box.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples()},MP4Box.prototype.stop=function(){this.sampleProcessingStarted=!1},exports.MP4Box=MP4Box},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(10)},function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(11),ReactChildren=__webpack_require__(12),ReactComponent=__webpack_require__(24),ReactPureComponent=__webpack_require__(27),ReactClass=__webpack_require__(28),ReactDOMFactories=__webpack_require__(33),ReactElement=__webpack_require__(16),ReactPropTypes=__webpack_require__(34),ReactVersion=__webpack_require__(36),onlyChild=__webpack_require__(37),createElement=(__webpack_require__(18),ReactElement.createElement),createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,__spread=_assign,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,PureComponent:ReactPureComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(mixin){return mixin},DOM:ReactDOMFactories,version:ReactVersion,__spread:__spread};module.exports=React},function(module,exports){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if("0123456789"!==order2.join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"$&/")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction,this.context=forEachContext,this.count=0}function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(null==children)return children;var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext),ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult,this.keyPrefix=keyPrefix,this.func=mapFunction,this.context=mapContext,this.count=0}function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context,mappedChild=func.call(context,child,bookKeeping.count++);Array.isArray(mappedChild)?mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument):null!=mappedChild&&(ReactElement.isValidElement(mappedChild)&&(mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(!mappedChild.key||child&&child.key===mappedChild.key?"":escapeUserProvidedKey(mappedChild.key)+"/")+childKey)),result.push(mappedChild))}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";null!=prefix&&(escapedPrefix=escapeUserProvidedKey(prefix)+"/");var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext),MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(null==children)return children;var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,func,context),result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument),result}var PooledClass=__webpack_require__(13),ReactElement=__webpack_require__(16),emptyFunction=__webpack_require__(19),traverseAllChildren=__webpack_require__(21),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/+/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),oneArgumentPooler=(__webpack_require__(15),function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,copyFieldsFrom),instance}return new Klass(copyFieldsFrom)}),twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2),instance}return new Klass(a1,a2)},threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3),instance}return new Klass(a1,a2,a3)},fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4),instance}return new Klass(a1,a2,a3,a4)},fiveArgumentPooler=function(a1,a2,a3,a4,a5){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4,a5),instance}return new Klass(a1,a2,a3,a4,a5)},standardReleaser=function(instance){var Klass=this;instance instanceof Klass?void 0:_prodInvariant("25"),instance.destructor(),Klass.instancePool.length<Klass.poolSize&&Klass.instancePool.push(instance)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;return NewKlass.instancePool=[],NewKlass.getPooled=pooler||DEFAULT_POOLER,NewKlass.poolSize||(NewKlass.poolSize=DEFAULT_POOL_SIZE),NewKlass.release=standardReleaser,NewKlass},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass},function(module,exports){"use strict";function reactProdInvariant(code){for(var argCount=arguments.length-1,message="Minified React error #"+code+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+code,argIdx=0;argIdx<argCount;argIdx++)message+="&args[]="+encodeURIComponent(arguments[argIdx+1]);message+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var error=new Error(message);throw error.name="Invariant Violation",error.framesToPop=1,error}module.exports=reactProdInvariant},function(module,exports,__webpack_require__){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(validateFormat(format),!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}var validateFormat=function(format){};module.exports=invariant},function(module,exports,__webpack_require__){"use strict";function hasValidRef(config){return void 0!==config.ref}function hasValidKey(config){return void 0!==config.key}var _assign=__webpack_require__(11),ReactCurrentOwner=__webpack_require__(17),hasOwnProperty=(__webpack_require__(18),__webpack_require__(20),Object.prototype.hasOwnProperty),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};return element};ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null,self=null,source=null;if(null!=config){hasValidRef(config)&&(ref=config.ref),hasValidKey(config)&&(key=""+config.key),self=void 0===config.__self?null:config.__self,source=void 0===config.__source?null:config.__source;for(propName in config)hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)void 0===props[propName]&&(props[propName]=defaultProps[propName])}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement},ReactElement.cloneElement=function(element,config,children){var propName,props=_assign({},element.props),key=element.key,ref=element.ref,self=element._self,source=element._source,owner=element._owner;if(null!=config){hasValidRef(config)&&(ref=config.ref,owner=ReactCurrentOwner.current),hasValidKey(config)&&(key=""+config.key);var defaultProps;element.type&&element.type.defaultProps&&(defaultProps=element.type.defaultProps);for(propName in config)hasOwnProperty.call(config,propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(void 0===config[propName]&&void 0!==defaultProps?props[propName]=defaultProps[propName]:props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)},ReactElement.isValidElement=function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE},ReactElement.REACT_ELEMENT_TYPE=REACT_ELEMENT_TYPE,module.exports=ReactElement},function(module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(19),warning=emptyFunction;module.exports=warning},function(module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},function(module,exports,__webpack_require__){"use strict";var canDefineProperty=!1;module.exports=canDefineProperty},function(module,exports,__webpack_require__){"use strict";function getComponentKey(component,index){return component&&"object"==typeof component&&null!=component.key?KeyEscapeUtils.escape(component.key):index.toString(36)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if("undefined"!==type&&"boolean"!==type||(children=null),null===children||"string"===type||"number"===type||ReactElement.isValidElement(children))return callback(traverseContext,children,""===nameSoFar?SEPARATOR+getComponentKey(children,0):nameSoFar),1;var child,nextName,subtreeCount=0,nextNamePrefix=""===nameSoFar?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children))for(var i=0;i<children.length;i++)child=children[i],nextName=nextNamePrefix+getComponentKey(child,i),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var step,iterator=iteratorFn.call(children);if(iteratorFn!==children.entries)for(var ii=0;!(step=iterator.next()).done;)child=step.value,nextName=nextNamePrefix+getComponentKey(child,ii++),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else for(;!(step=iterator.next()).done;){var entry=step.value;entry&&(child=entry[1],nextName=nextNamePrefix+KeyEscapeUtils.escape(entry[0])+SUBSEPARATOR+getComponentKey(child,0),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext))}}else if("object"===type){var addendum="",childrenString=String(children);_prodInvariant("31","[object Object]"===childrenString?"object with keys {"+Object.keys(children).join(", ")+"}":childrenString,addendum)}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){return null==children?0:traverseAllChildrenImpl(children,"",callback,traverseContext)}var _prodInvariant=__webpack_require__(14),ReactElement=(__webpack_require__(17),__webpack_require__(16)),getIteratorFn=__webpack_require__(22),KeyEscapeUtils=(__webpack_require__(15),__webpack_require__(23)),SEPARATOR=(__webpack_require__(18),"."),SUBSEPARATOR=":";module.exports=traverseAllChildren},function(module,exports){"use strict";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn},function(module,exports){"use strict";function escape(key){var escapeRegex=/[=:]/g,escaperLookup={"=":"=0",":":"=2"},escapedString=(""+key).replace(escapeRegex,function(match){return escaperLookup[match]});return"$"+escapedString}function unescape(key){var unescapeRegex=/(=0|=2)/g,unescaperLookup={"=0":"=","=2":":"},keySubstring="."===key[0]&&"$"===key[1]?key.substring(2):key.substring(1);return(""+keySubstring).replace(unescapeRegex,function(match){return unescaperLookup[match]})}var KeyEscapeUtils={escape:escape,unescape:unescape};module.exports=KeyEscapeUtils},function(module,exports,__webpack_require__){"use strict";function ReactComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}var _prodInvariant=__webpack_require__(14),ReactNoopUpdateQueue=__webpack_require__(25),emptyObject=(__webpack_require__(20),__webpack_require__(26));__webpack_require__(15),__webpack_require__(18);ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(partialState,callback){"object"!=typeof partialState&&"function"!=typeof partialState&&null!=partialState?_prodInvariant("85"):void 0,this.updater.enqueueSetState(this,partialState),callback&&this.updater.enqueueCallback(this,callback,"setState")},ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this),callback&&this.updater.enqueueCallback(this,callback,"forceUpdate")};module.exports=ReactComponent},function(module,exports,__webpack_require__){"use strict";function warnNoop(publicInstance,callerName){}var ReactNoopUpdateQueue=(__webpack_require__(18),{isMounted:function(publicInstance){return!1},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnNoop(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnNoop(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnNoop(publicInstance,"setState")}});module.exports=ReactNoopUpdateQueue},function(module,exports,__webpack_require__){"use strict";var emptyObject={};module.exports=emptyObject},function(module,exports,__webpack_require__){"use strict";function ReactPureComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}function ComponentDummy(){}var _assign=__webpack_require__(11),ReactComponent=__webpack_require__(24),ReactNoopUpdateQueue=__webpack_require__(25),emptyObject=__webpack_require__(26);ComponentDummy.prototype=ReactComponent.prototype,ReactPureComponent.prototype=new ComponentDummy,ReactPureComponent.prototype.constructor=ReactPureComponent,_assign(ReactPureComponent.prototype,ReactComponent.prototype),ReactPureComponent.prototype.isPureReactComponent=!0,module.exports=ReactPureComponent},function(module,exports,__webpack_require__){"use strict";function validateMethodOverride(isAlreadyDefined,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;ReactClassMixin.hasOwnProperty(name)&&(specPolicy!==SpecPolicy.OVERRIDE_BASE?_prodInvariant("73",name):void 0),isAlreadyDefined&&(specPolicy!==SpecPolicy.DEFINE_MANY&&specPolicy!==SpecPolicy.DEFINE_MANY_MERGED?_prodInvariant("74",name):void 0)}function mixSpecIntoComponent(Constructor,spec){if(spec){"function"==typeof spec?_prodInvariant("75"):void 0,ReactElement.isValidElement(spec)?_prodInvariant("76"):void 0;var proto=Constructor.prototype,autoBindPairs=proto.__reactAutoBindPairs;spec.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins);for(var name in spec)if(spec.hasOwnProperty(name)&&name!==MIXINS_KEY){var property=spec[name],isAlreadyDefined=proto.hasOwnProperty(name);if(validateMethodOverride(isAlreadyDefined,name),RESERVED_SPEC_KEYS.hasOwnProperty(name))RESERVED_SPEC_KEYS[name](Constructor,property);else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name),isFunction="function"==typeof property,shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==!1;if(shouldAutoBind)autoBindPairs.push(name,property),proto[name]=property;else if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];!isReactClassMethod||specPolicy!==SpecPolicy.DEFINE_MANY_MERGED&&specPolicy!==SpecPolicy.DEFINE_MANY?_prodInvariant("77",specPolicy,name):void 0,specPolicy===SpecPolicy.DEFINE_MANY_MERGED?proto[name]=createMergedResultFunction(proto[name],property):specPolicy===SpecPolicy.DEFINE_MANY&&(proto[name]=createChainedFunction(proto[name],property))}else proto[name]=property}}}else;}function mixStaticSpecIntoComponent(Constructor,statics){if(statics)for(var name in statics){var property=statics[name];if(statics.hasOwnProperty(name)){var isReserved=name in RESERVED_SPEC_KEYS;isReserved?_prodInvariant("78",name):void 0;var isInherited=name in Constructor;isInherited?_prodInvariant("79",name):void 0,Constructor[name]=property}}}function mergeIntoWithNoDuplicateKeys(one,two){one&&two&&"object"==typeof one&&"object"==typeof two?void 0:_prodInvariant("80");for(var key in two)two.hasOwnProperty(key)&&(void 0!==one[key]?_prodInvariant("81",key):void 0,one[key]=two[key]);return one}function createMergedResultFunction(one,two){return function(){var a=one.apply(this,arguments),b=two.apply(this,arguments);if(null==a)return b;if(null==b)return a;var c={};return mergeIntoWithNoDuplicateKeys(c,a),mergeIntoWithNoDuplicateKeys(c,b),c}}function createChainedFunction(one,two){return function(){one.apply(this,arguments),two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);return boundMethod}function bindAutoBindMethods(component){for(var pairs=component.__reactAutoBindPairs,i=0;i<pairs.length;i+=2){var autoBindKey=pairs[i],method=pairs[i+1];component[autoBindKey]=bindAutoBindMethod(component,method)}}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),ReactComponent=__webpack_require__(24),ReactElement=__webpack_require__(16),ReactNoopUpdateQueue=(__webpack_require__(29),__webpack_require__(31),__webpack_require__(25)),emptyObject=__webpack_require__(26),keyMirror=(__webpack_require__(15),__webpack_require__(30)),keyOf=__webpack_require__(32),MIXINS_KEY=(__webpack_require__(18),keyOf({mixins:null})),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins)for(var i=0;i<mixins.length;i++)mixSpecIntoComponent(Constructor,mixins[i])},childContextTypes:function(Constructor,childContextTypes){Constructor.childContextTypes=_assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){Constructor.contextTypes=_assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){Constructor.getDefaultProps?Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps):Constructor.getDefaultProps=getDefaultProps},propTypes:function(Constructor,propTypes){Constructor.propTypes=_assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}},ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState),callback&&this.updater.enqueueCallback(this,callback,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},ReactClassComponent=function(){};_assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(spec){var Constructor=function(props,context,updater){this.__reactAutoBindPairs.length&&bindAutoBindMethods(this),this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue,this.state=null;var initialState=this.getInitialState?this.getInitialState():null;"object"!=typeof initialState||Array.isArray(initialState)?_prodInvariant("82",Constructor.displayName||"ReactCompositeComponent"):void 0,this.state=initialState};Constructor.prototype=new ReactClassComponent,Constructor.prototype.constructor=Constructor,Constructor.prototype.__reactAutoBindPairs=[],injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor)),mixSpecIntoComponent(Constructor,spec),Constructor.getDefaultProps&&(Constructor.defaultProps=Constructor.getDefaultProps()),Constructor.prototype.render?void 0:_prodInvariant("83");for(var methodName in ReactClassInterface)Constructor.prototype[methodName]||(Constructor.prototype[methodName]=null);return Constructor},injection:{injectMixin:function(mixin){injectedMixins.push(mixin)}}};module.exports=ReactClass},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(30),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(15),keyMirror=function(obj){var key,ret={};obj instanceof Object&&!Array.isArray(obj)?void 0:invariant(!1);for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=key);return ret};module.exports=keyMirror},function(module,exports,__webpack_require__){"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames},function(module,exports){"use strict";var keyOf=function(oneKeyObj){var key;for(key in oneKeyObj)if(oneKeyObj.hasOwnProperty(key))return key;return null};module.exports=keyOf},function(module,exports,__webpack_require__){"use strict";var ReactElement=__webpack_require__(16),createDOMFactory=ReactElement.createFactory,ReactDOMFactories={a:createDOMFactory("a"),abbr:createDOMFactory("abbr"),address:createDOMFactory("address"),area:createDOMFactory("area"),article:createDOMFactory("article"),aside:createDOMFactory("aside"),audio:createDOMFactory("audio"),b:createDOMFactory("b"),base:createDOMFactory("base"),bdi:createDOMFactory("bdi"),bdo:createDOMFactory("bdo"),big:createDOMFactory("big"),blockquote:createDOMFactory("blockquote"),body:createDOMFactory("body"),br:createDOMFactory("br"),button:createDOMFactory("button"),canvas:createDOMFactory("canvas"),caption:createDOMFactory("caption"),cite:createDOMFactory("cite"),code:createDOMFactory("code"),col:createDOMFactory("col"),colgroup:createDOMFactory("colgroup"),data:createDOMFactory("data"),datalist:createDOMFactory("datalist"),dd:createDOMFactory("dd"),del:createDOMFactory("del"),details:createDOMFactory("details"),dfn:createDOMFactory("dfn"),dialog:createDOMFactory("dialog"),div:createDOMFactory("div"),dl:createDOMFactory("dl"),dt:createDOMFactory("dt"),em:createDOMFactory("em"),embed:createDOMFactory("embed"),fieldset:createDOMFactory("fieldset"),figcaption:createDOMFactory("figcaption"),figure:createDOMFactory("figure"),footer:createDOMFactory("footer"),form:createDOMFactory("form"),h1:createDOMFactory("h1"),h2:createDOMFactory("h2"),h3:createDOMFactory("h3"),h4:createDOMFactory("h4"),h5:createDOMFactory("h5"),h6:createDOMFactory("h6"),head:createDOMFactory("head"),header:createDOMFactory("header"),hgroup:createDOMFactory("hgroup"),hr:createDOMFactory("hr"),html:createDOMFactory("html"),i:createDOMFactory("i"),iframe:createDOMFactory("iframe"),img:createDOMFactory("img"),input:createDOMFactory("input"),ins:createDOMFactory("ins"),kbd:createDOMFactory("kbd"),keygen:createDOMFactory("keygen"),label:createDOMFactory("label"),legend:createDOMFactory("legend"),li:createDOMFactory("li"),link:createDOMFactory("link"),main:createDOMFactory("main"),map:createDOMFactory("map"),mark:createDOMFactory("mark"),menu:createDOMFactory("menu"),menuitem:createDOMFactory("menuitem"),meta:createDOMFactory("meta"),meter:createDOMFactory("meter"),nav:createDOMFactory("nav"),noscript:createDOMFactory("noscript"),object:createDOMFactory("object"),ol:createDOMFactory("ol"),optgroup:createDOMFactory("optgroup"),option:createDOMFactory("option"),output:createDOMFactory("output"),p:createDOMFactory("p"),param:createDOMFactory("param"),picture:createDOMFactory("picture"),pre:createDOMFactory("pre"),progress:createDOMFactory("progress"),q:createDOMFactory("q"),rp:createDOMFactory("rp"),rt:createDOMFactory("rt"),ruby:createDOMFactory("ruby"),s:createDOMFactory("s"),samp:createDOMFactory("samp"),script:createDOMFactory("script"),section:createDOMFactory("section"),select:createDOMFactory("select"),small:createDOMFactory("small"),source:createDOMFactory("source"),span:createDOMFactory("span"),strong:createDOMFactory("strong"),style:createDOMFactory("style"),sub:createDOMFactory("sub"),summary:createDOMFactory("summary"),sup:createDOMFactory("sup"),table:createDOMFactory("table"),tbody:createDOMFactory("tbody"),td:createDOMFactory("td"),textarea:createDOMFactory("textarea"),tfoot:createDOMFactory("tfoot"),th:createDOMFactory("th"),thead:createDOMFactory("thead"),time:createDOMFactory("time"),title:createDOMFactory("title"),tr:createDOMFactory("tr"),track:createDOMFactory("track"),u:createDOMFactory("u"),ul:createDOMFactory("ul"),"var":createDOMFactory("var"),video:createDOMFactory("video"),wbr:createDOMFactory("wbr"),circle:createDOMFactory("circle"),clipPath:createDOMFactory("clipPath"),defs:createDOMFactory("defs"),ellipse:createDOMFactory("ellipse"),g:createDOMFactory("g"),image:createDOMFactory("image"),line:createDOMFactory("line"),linearGradient:createDOMFactory("linearGradient"),mask:createDOMFactory("mask"),path:createDOMFactory("path"),pattern:createDOMFactory("pattern"),polygon:createDOMFactory("polygon"),polyline:createDOMFactory("polyline"),radialGradient:createDOMFactory("radialGradient"),rect:createDOMFactory("rect"),stop:createDOMFactory("stop"),svg:createDOMFactory("svg"),text:createDOMFactory("text"),tspan:createDOMFactory("tspan")};module.exports=ReactDOMFactories},function(module,exports,__webpack_require__){"use strict";function is(x,y){return x===y?0!==x||1/x===1/y:x!==x&&y!==y}function PropTypeError(message){this.message=message,this.stack=""}function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS,propFullName=propFullName||propName;if(null==props[propName]){var locationName=ReactPropTypeLocationNames[location];return isRequired?new PropTypeError("Required "+locationName+" `"+propFullName+"` was not specified in "+("`"+componentName+"`.")):null}return validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName],propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location],preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.");var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!ReactElement.isValidElement(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location],expectedClassName=expectedClass.name||ANONYMOUS,actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){
function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(is(propValue,expectedValues[i]))return null;var locationName=ReactPropTypeLocationNames[location],valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return Array.isArray(expectedValues)?createChainableTypeChecker(validate):emptyFunction.thatReturnsNull}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.");var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(null==checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret))return null}var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return Array.isArray(arrayOfTypeCheckers)?createChainableTypeChecker(validate):emptyFunction.thatReturnsNull}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new PropTypeError("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||ReactElement.isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function isSymbol(propType,propValue){return"symbol"===propType||("Symbol"===propValue["@@toStringTag"]||"function"==typeof Symbol&&propValue instanceof Symbol)}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":isSymbol(propType,propValue)?"symbol":propType}function getPreciseType(propValue){var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:ANONYMOUS}var ReactElement=__webpack_require__(16),ReactPropTypeLocationNames=__webpack_require__(31),ReactPropTypesSecret=__webpack_require__(35),emptyFunction=__webpack_require__(19),getIteratorFn=__webpack_require__(22),ANONYMOUS=(__webpack_require__(18),"<<anonymous>>"),ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};PropTypeError.prototype=Error.prototype,module.exports=ReactPropTypes},function(module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},function(module,exports){"use strict";module.exports="15.3.1"},function(module,exports,__webpack_require__){"use strict";function onlyChild(children){return ReactElement.isValidElement(children)?void 0:_prodInvariant("143"),children}var _prodInvariant=__webpack_require__(14),ReactElement=__webpack_require__(16);__webpack_require__(15);module.exports=onlyChild},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(39)},function(module,exports,__webpack_require__){"use strict";var ReactDOMComponentTree=__webpack_require__(40),ReactDefaultInjection=__webpack_require__(43),ReactMount=__webpack_require__(162),ReactReconciler=__webpack_require__(63),ReactUpdates=__webpack_require__(60),ReactVersion=__webpack_require__(36),findDOMNode=__webpack_require__(167),getHostComponentFromComposite=__webpack_require__(168),renderSubtreeIntoContainer=__webpack_require__(169);__webpack_require__(18);ReactDefaultInjection.inject();var ReactDOM={findDOMNode:findDOMNode,render:ReactMount.render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:ReactDOMComponentTree.getClosestInstanceFromNode,getNodeFromInstance:function(inst){return inst._renderedComponent&&(inst=getHostComponentFromComposite(inst)),inst?ReactDOMComponentTree.getNodeFromInstance(inst):null}},Mount:ReactMount,Reconciler:ReactReconciler});module.exports=ReactDOM},function(module,exports,__webpack_require__){"use strict";function getRenderedHostOrTextFromComponent(component){for(var rendered;rendered=component._renderedComponent;)component=rendered;return component}function precacheNode(inst,node){var hostInst=getRenderedHostOrTextFromComponent(inst);hostInst._hostNode=node,node[internalInstanceKey]=hostInst}function uncacheNode(inst){var node=inst._hostNode;node&&(delete node[internalInstanceKey],inst._hostNode=null)}function precacheChildNodes(inst,node){if(!(inst._flags&Flags.hasCachedChildNodes)){var children=inst._renderedChildren,childNode=node.firstChild;outer:for(var name in children)if(children.hasOwnProperty(name)){var childInst=children[name],childID=getRenderedHostOrTextFromComponent(childInst)._domID;if(0!==childID){for(;null!==childNode;childNode=childNode.nextSibling)if(1===childNode.nodeType&&childNode.getAttribute(ATTR_NAME)===String(childID)||8===childNode.nodeType&&childNode.nodeValue===" react-text: "+childID+" "||8===childNode.nodeType&&childNode.nodeValue===" react-empty: "+childID+" "){precacheNode(childInst,childNode);continue outer}_prodInvariant("32",childID)}}inst._flags|=Flags.hasCachedChildNodes}}function getClosestInstanceFromNode(node){if(node[internalInstanceKey])return node[internalInstanceKey];for(var parents=[];!node[internalInstanceKey];){if(parents.push(node),!node.parentNode)return null;node=node.parentNode}for(var closest,inst;node&&(inst=node[internalInstanceKey]);node=parents.pop())closest=inst,parents.length&&precacheChildNodes(inst,node);return closest}function getInstanceFromNode(node){var inst=getClosestInstanceFromNode(node);return null!=inst&&inst._hostNode===node?inst:null}function getNodeFromInstance(inst){if(void 0===inst._hostNode?_prodInvariant("33"):void 0,inst._hostNode)return inst._hostNode;for(var parents=[];!inst._hostNode;)parents.push(inst),inst._hostParent?void 0:_prodInvariant("34"),inst=inst._hostParent;for(;parents.length;inst=parents.pop())precacheChildNodes(inst,inst._hostNode);return inst._hostNode}var _prodInvariant=__webpack_require__(14),DOMProperty=__webpack_require__(41),ReactDOMComponentFlags=__webpack_require__(42),ATTR_NAME=(__webpack_require__(15),DOMProperty.ID_ATTRIBUTE_NAME),Flags=ReactDOMComponentFlags,internalInstanceKey="__reactInternalInstance$"+Math.random().toString(36).slice(2),ReactDOMComponentTree={getClosestInstanceFromNode:getClosestInstanceFromNode,getInstanceFromNode:getInstanceFromNode,getNodeFromInstance:getNodeFromInstance,precacheChildNodes:precacheChildNodes,precacheNode:precacheNode,uncacheNode:uncacheNode};module.exports=ReactDOMComponentTree},function(module,exports,__webpack_require__){"use strict";function checkMask(value,bitmask){return(value&bitmask)===bitmask}var _prodInvariant=__webpack_require__(14),DOMPropertyInjection=(__webpack_require__(15),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(domPropertyConfig){var Injection=DOMPropertyInjection,Properties=domPropertyConfig.Properties||{},DOMAttributeNamespaces=domPropertyConfig.DOMAttributeNamespaces||{},DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{},DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{},DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};domPropertyConfig.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute);for(var propName in Properties){DOMProperty.properties.hasOwnProperty(propName)?_prodInvariant("48",propName):void 0;var lowerCased=propName.toLowerCase(),propConfig=Properties[propName],propertyInfo={attributeName:lowerCased,attributeNamespace:null,propertyName:propName,mutationMethod:null,mustUseProperty:checkMask(propConfig,Injection.MUST_USE_PROPERTY),hasBooleanValue:checkMask(propConfig,Injection.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(propConfig,Injection.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(propConfig,Injection.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(propConfig,Injection.HAS_OVERLOADED_BOOLEAN_VALUE)};if(propertyInfo.hasBooleanValue+propertyInfo.hasNumericValue+propertyInfo.hasOverloadedBooleanValue<=1?void 0:_prodInvariant("50",propName),DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];propertyInfo.attributeName=attributeName}DOMAttributeNamespaces.hasOwnProperty(propName)&&(propertyInfo.attributeNamespace=DOMAttributeNamespaces[propName]),DOMPropertyNames.hasOwnProperty(propName)&&(propertyInfo.propertyName=DOMPropertyNames[propName]),DOMMutationMethods.hasOwnProperty(propName)&&(propertyInfo.mutationMethod=DOMMutationMethods[propName]),DOMProperty.properties[propName]=propertyInfo}}}),ATTRIBUTE_NAME_START_CHAR=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:ATTRIBUTE_NAME_START_CHAR,ATTRIBUTE_NAME_CHAR:ATTRIBUTE_NAME_START_CHAR+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName))return!0}return!1},injection:DOMPropertyInjection};module.exports=DOMProperty},function(module,exports){"use strict";var ReactDOMComponentFlags={hasCachedChildNodes:1};module.exports=ReactDOMComponentFlags},function(module,exports,__webpack_require__){"use strict";function inject(){alreadyInjected||(alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginUtils.injectComponentTree(ReactDOMComponentTree),ReactInjection.EventPluginUtils.injectTreeTraversal(ReactDOMTreeTraversal),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.HostComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.HostComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponentFactory(function(instantiate){return new ReactDOMEmptyComponent(instantiate)}),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment))}var BeforeInputEventPlugin=__webpack_require__(44),ChangeEventPlugin=__webpack_require__(59),DefaultEventPluginOrder=__webpack_require__(71),EnterLeaveEventPlugin=__webpack_require__(72),HTMLDOMPropertyConfig=__webpack_require__(77),ReactComponentBrowserEnvironment=__webpack_require__(78),ReactDOMComponent=__webpack_require__(92),ReactDOMComponentTree=__webpack_require__(40),ReactDOMEmptyComponent=__webpack_require__(133),ReactDOMTreeTraversal=__webpack_require__(134),ReactDOMTextComponent=__webpack_require__(135),ReactDefaultBatchingStrategy=__webpack_require__(136),ReactEventListener=__webpack_require__(137),ReactInjection=__webpack_require__(140),ReactReconcileTransaction=__webpack_require__(141),SVGDOMPropertyConfig=__webpack_require__(149),SelectEventPlugin=__webpack_require__(150),SimpleEventPlugin=__webpack_require__(151),alreadyInjected=!1;module.exports={inject:inject}},function(module,exports,__webpack_require__){"use strict";function isPresto(){var opera=window.opera;return"object"==typeof opera&&"function"==typeof opera.version&&parseInt(opera.version(),10)<=12}function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType===topLevelTypes.topKeyDown&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topKeyUp:return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case topLevelTypes.topKeyDown:return nativeEvent.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;return"object"==typeof detail&&"data"in detail?detail.data:null}function extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var eventType,fallbackData;if(canUseCompositionEvent?eventType=getCompositionEventType(topLevelType):currentComposition?isFallbackCompositionEnd(topLevelType,nativeEvent)&&(eventType=eventTypes.compositionEnd):isFallbackCompositionStart(topLevelType,nativeEvent)&&(eventType=eventTypes.compositionStart),!eventType)return null;useFallbackCompositionData&&(currentComposition||eventType!==eventTypes.compositionStart?eventType===eventTypes.compositionEnd&&currentComposition&&(fallbackData=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(nativeEventTarget));var event=SyntheticCompositionEvent.getPooled(eventType,targetInst,nativeEvent,nativeEventTarget);if(fallbackData)event.data=fallbackData;else{var customData=getDataFromCustomEvent(nativeEvent);null!==customData&&(event.data=customData)}return EventPropagators.accumulateTwoPhaseDispatches(event),event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(nativeEvent);case topLevelTypes.topKeyPress:var which=nativeEvent.which;return which!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var chars=nativeEvent.data;return chars===SPACEBAR_CHAR&&hasSpaceKeypress?null:chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,chars}return null}switch(topLevelType){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return nativeEvent.which&&!isKeypressCommand(nativeEvent)?String.fromCharCode(nativeEvent.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget){var chars;if(chars=canUseTextInputEvent?getNativeBeforeInputChars(topLevelType,nativeEvent):getFallbackBeforeInputChars(topLevelType,nativeEvent),!chars)return null;var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,targetInst,nativeEvent,nativeEventTarget);return event.data=chars,EventPropagators.accumulateTwoPhaseDispatches(event),event}var EventConstants=__webpack_require__(45),EventPropagators=__webpack_require__(46),ExecutionEnvironment=__webpack_require__(53),FallbackCompositionState=__webpack_require__(54),SyntheticCompositionEvent=__webpack_require__(56),SyntheticInputEvent=__webpack_require__(58),keyOf=__webpack_require__(32),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){return[extractCompositionEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget),extractBeforeInputEvent(topLevelType,targetInst,nativeEvent,nativeEventTarget)]}};module.exports=BeforeInputEventPlugin},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(30),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants},function(module,exports,__webpack_require__){"use strict";function listenerAtPhase(inst,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(inst,registrationName)}function accumulateDirectionalDispatches(inst,upwards,event){var phase=upwards?PropagationPhases.bubbled:PropagationPhases.captured,listener=listenerAtPhase(inst,event,phase);listener&&(event._dispatchListeners=accumulateInto(event._dispatchListeners,listener),event._dispatchInstances=accumulateInto(event._dispatchInstances,inst))}function accumulateTwoPhaseDispatchesSingle(event){event&&event.dispatchConfig.phasedRegistrationNames&&EventPluginUtils.traverseTwoPhase(event._targetInst,accumulateDirectionalDispatches,event)}function accumulateTwoPhaseDispatchesSingleSkipTarget(event){if(event&&event.dispatchConfig.phasedRegistrationNames){var targetInst=event._targetInst,parentInst=targetInst?EventPluginUtils.getParentInstance(targetInst):null;EventPluginUtils.traverseTwoPhase(parentInst,accumulateDirectionalDispatches,event)}}function accumulateDispatches(inst,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName,listener=getListener(inst,registrationName);listener&&(event._dispatchListeners=accumulateInto(event._dispatchListeners,listener),event._dispatchInstances=accumulateInto(event._dispatchInstances,inst))}}function accumulateDirectDispatchesSingle(event){event&&event.dispatchConfig.registrationName&&accumulateDispatches(event._targetInst,null,event)}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(leave,enter,from,to){EventPluginUtils.traverseEnterLeave(from,to,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventConstants=__webpack_require__(45),EventPluginHub=__webpack_require__(47),EventPluginUtils=__webpack_require__(49),accumulateInto=__webpack_require__(51),forEachAccumulated=__webpack_require__(52),PropagationPhases=(__webpack_require__(18),EventConstants.PropagationPhases),getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),EventPluginRegistry=__webpack_require__(48),EventPluginUtils=__webpack_require__(49),ReactErrorUtils=__webpack_require__(50),accumulateInto=__webpack_require__(51),forEachAccumulated=__webpack_require__(52),listenerBank=(__webpack_require__(15),{}),eventQueue=null,executeDispatchesAndRelease=function(event,simulated){event&&(EventPluginUtils.executeDispatchesInOrder(event,simulated),event.isPersistent()||event.constructor.release(event))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},getDictionaryKey=function(inst){return"."+inst._rootNodeID},EventPluginHub={injection:{injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},putListener:function(inst,registrationName,listener){"function"!=typeof listener?_prodInvariant("94",registrationName,typeof listener):void 0;var key=getDictionaryKey(inst),bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[key]=listener;var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.didPutListener&&PluginModule.didPutListener(inst,registrationName,listener)},getListener:function(inst,registrationName){var bankForRegistrationName=listenerBank[registrationName],key=getDictionaryKey(inst);return bankForRegistrationName&&bankForRegistrationName[key]},deleteListener:function(inst,registrationName){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.willDeleteListener&&PluginModule.willDeleteListener(inst,registrationName);var bankForRegistrationName=listenerBank[registrationName];if(bankForRegistrationName){var key=getDictionaryKey(inst);delete bankForRegistrationName[key]}},deleteAllListeners:function(inst){var key=getDictionaryKey(inst);for(var registrationName in listenerBank)if(listenerBank.hasOwnProperty(registrationName)&&listenerBank[registrationName][key]){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.willDeleteListener&&PluginModule.willDeleteListener(inst,registrationName),delete listenerBank[registrationName][key]}},extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){for(var events,plugins=EventPluginRegistry.plugins,i=0;i<plugins.length;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);extractedEvents&&(events=accumulateInto(events,extractedEvents))}}return events},enqueueEvents:function(events){events&&(eventQueue=accumulateInto(eventQueue,events))},processEventQueue:function(simulated){var processingEventQueue=eventQueue;eventQueue=null,simulated?forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseSimulated):forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseTopLevel),eventQueue?_prodInvariant("95"):void 0,ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub},function(module,exports,__webpack_require__){"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var pluginName in namesToPlugins){var PluginModule=namesToPlugins[pluginName],pluginIndex=EventPluginOrder.indexOf(pluginName);if(pluginIndex>-1?void 0:_prodInvariant("96",pluginName),!EventPluginRegistry.plugins[pluginIndex]){PluginModule.extractEvents?void 0:_prodInvariant("97",pluginName),EventPluginRegistry.plugins[pluginIndex]=PluginModule;var publishedEvents=PluginModule.eventTypes;for(var eventName in publishedEvents)publishEventForPlugin(publishedEvents[eventName],PluginModule,eventName)?void 0:_prodInvariant("98",eventName,pluginName)}}}function publishEventForPlugin(dispatchConfig,PluginModule,eventName){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName)?_prodInvariant("99",eventName):void 0,EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames)if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,PluginModule,eventName)}return!0}return!!dispatchConfig.registrationName&&(publishRegistrationName(dispatchConfig.registrationName,PluginModule,eventName),!0)}function publishRegistrationName(registrationName,PluginModule,eventName){EventPluginRegistry.registrationNameModules[registrationName]?_prodInvariant("100",registrationName):void 0,EventPluginRegistry.registrationNameModules[registrationName]=PluginModule,EventPluginRegistry.registrationNameDependencies[registrationName]=PluginModule.eventTypes[eventName].dependencies}var _prodInvariant=__webpack_require__(14),EventPluginOrder=(__webpack_require__(15),null),namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(InjectedEventPluginOrder){EventPluginOrder?_prodInvariant("101"):void 0,EventPluginOrder=Array.prototype.slice.call(InjectedEventPluginOrder),recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=!1;for(var pluginName in injectedNamesToPlugins)if(injectedNamesToPlugins.hasOwnProperty(pluginName)){var PluginModule=injectedNamesToPlugins[pluginName];namesToPlugins.hasOwnProperty(pluginName)&&namesToPlugins[pluginName]===PluginModule||(namesToPlugins[pluginName]?_prodInvariant("102",pluginName):void 0,namesToPlugins[pluginName]=PluginModule,isOrderingDirty=!0)}isOrderingDirty&&recomputePluginOrdering()},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName)return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null;for(var phase in dispatchConfig.phasedRegistrationNames)if(dispatchConfig.phasedRegistrationNames.hasOwnProperty(phase)){var PluginModule=EventPluginRegistry.registrationNameModules[dispatchConfig.phasedRegistrationNames[phase]];if(PluginModule)return PluginModule}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var pluginName in namesToPlugins)namesToPlugins.hasOwnProperty(pluginName)&&delete namesToPlugins[pluginName];
EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs)eventNameDispatchConfigs.hasOwnProperty(eventName)&&delete eventNameDispatchConfigs[eventName];var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules)registrationNameModules.hasOwnProperty(registrationName)&&delete registrationNameModules[registrationName]}};module.exports=EventPluginRegistry},function(module,exports,__webpack_require__){"use strict";function isEndish(topLevelType){return topLevelType===topLevelTypes.topMouseUp||topLevelType===topLevelTypes.topTouchEnd||topLevelType===topLevelTypes.topTouchCancel}function isMoveish(topLevelType){return topLevelType===topLevelTypes.topMouseMove||topLevelType===topLevelTypes.topTouchMove}function isStartish(topLevelType){return topLevelType===topLevelTypes.topMouseDown||topLevelType===topLevelTypes.topTouchStart}function executeDispatch(event,simulated,listener,inst){var type=event.type||"unknown-event";event.currentTarget=EventPluginUtils.getNodeFromInstance(inst),simulated?ReactErrorUtils.invokeGuardedCallbackWithCatch(type,listener,event):ReactErrorUtils.invokeGuardedCallback(type,listener,event),event.currentTarget=null}function executeDispatchesInOrder(event,simulated){var dispatchListeners=event._dispatchListeners,dispatchInstances=event._dispatchInstances;if(Array.isArray(dispatchListeners))for(var i=0;i<dispatchListeners.length&&!event.isPropagationStopped();i++)executeDispatch(event,simulated,dispatchListeners[i],dispatchInstances[i]);else dispatchListeners&&executeDispatch(event,simulated,dispatchListeners,dispatchInstances);event._dispatchListeners=null,event._dispatchInstances=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners,dispatchInstances=event._dispatchInstances;if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length&&!event.isPropagationStopped();i++)if(dispatchListeners[i](event,dispatchInstances[i]))return dispatchInstances[i]}else if(dispatchListeners&&dispatchListeners(event,dispatchInstances))return dispatchInstances;return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);return event._dispatchInstances=null,event._dispatchListeners=null,ret}function executeDirectDispatch(event){var dispatchListener=event._dispatchListeners,dispatchInstance=event._dispatchInstances;Array.isArray(dispatchListener)?_prodInvariant("103"):void 0,event.currentTarget=dispatchListener?EventPluginUtils.getNodeFromInstance(dispatchInstance):null;var res=dispatchListener?dispatchListener(event):null;return event.currentTarget=null,event._dispatchListeners=null,event._dispatchInstances=null,res}function hasDispatches(event){return!!event._dispatchListeners}var ComponentTree,TreeTraversal,_prodInvariant=__webpack_require__(14),EventConstants=__webpack_require__(45),ReactErrorUtils=__webpack_require__(50),injection=(__webpack_require__(15),__webpack_require__(18),{injectComponentTree:function(Injected){ComponentTree=Injected},injectTreeTraversal:function(Injected){TreeTraversal=Injected}}),topLevelTypes=EventConstants.topLevelTypes,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getInstanceFromNode:function(node){return ComponentTree.getInstanceFromNode(node)},getNodeFromInstance:function(node){return ComponentTree.getNodeFromInstance(node)},isAncestor:function(a,b){return TreeTraversal.isAncestor(a,b)},getLowestCommonAncestor:function(a,b){return TreeTraversal.getLowestCommonAncestor(a,b)},getParentInstance:function(inst){return TreeTraversal.getParentInstance(inst)},traverseTwoPhase:function(target,fn,arg){return TreeTraversal.traverseTwoPhase(target,fn,arg)},traverseEnterLeave:function(from,to,fn,argFrom,argTo){return TreeTraversal.traverseEnterLeave(from,to,fn,argFrom,argTo)},injection:injection};module.exports=EventPluginUtils},function(module,exports,__webpack_require__){"use strict";function invokeGuardedCallback(name,func,a,b){try{return func(a,b)}catch(x){return void(null===caughtError&&(caughtError=x))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var error=caughtError;throw caughtError=null,error}}};module.exports=ReactErrorUtils},function(module,exports,__webpack_require__){"use strict";function accumulateInto(current,next){return null==next?_prodInvariant("30"):void 0,null==current?next:Array.isArray(current)?Array.isArray(next)?(current.push.apply(current,next),current):(current.push(next),current):Array.isArray(next)?[current].concat(next):[current,next]}var _prodInvariant=__webpack_require__(14);__webpack_require__(15);module.exports=accumulateInto},function(module,exports){"use strict";function forEachAccumulated(arr,cb,scope){Array.isArray(arr)?arr.forEach(cb,scope):arr&&cb.call(scope,arr)}module.exports=forEachAccumulated},function(module,exports){"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},function(module,exports,__webpack_require__){"use strict";function FallbackCompositionState(root){this._root=root,this._startText=this.getText(),this._fallbackText=null}var _assign=__webpack_require__(11),PooledClass=__webpack_require__(13),getTextContentAccessor=__webpack_require__(55);_assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var start,end,startValue=this._startText,startLength=startValue.length,endValue=this.getText(),endLength=endValue.length;for(start=0;start<startLength&&startValue[start]===endValue[start];start++);var minEnd=startLength-start;for(end=1;end<=minEnd&&startValue[startLength-end]===endValue[endLength-end];end++);var sliceTail=end>1?1-end:void 0;return this._fallbackText=endValue.slice(start,sliceTail),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState},function(module,exports,__webpack_require__){"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=__webpack_require__(53),contentKey=null;module.exports=getTextContentAccessor},function(module,exports,__webpack_require__){"use strict";function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(57),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticEvent(dispatchConfig,targetInst,nativeEvent,nativeEventTarget){this.dispatchConfig=dispatchConfig,this._targetInst=targetInst,this.nativeEvent=nativeEvent;var Interface=this.constructor.Interface;for(var propName in Interface)if(Interface.hasOwnProperty(propName)){var normalize=Interface[propName];normalize?this[propName]=normalize(nativeEvent):"target"===propName?this.target=nativeEventTarget:this[propName]=nativeEvent[propName]}var defaultPrevented=null!=nativeEvent.defaultPrevented?nativeEvent.defaultPrevented:nativeEvent.returnValue===!1;return defaultPrevented?this.isDefaultPrevented=emptyFunction.thatReturnsTrue:this.isDefaultPrevented=emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse,this}var _assign=__webpack_require__(11),PooledClass=__webpack_require__(13),emptyFunction=__webpack_require__(19),shouldBeReleasedProperties=(__webpack_require__(18),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};_assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var event=this.nativeEvent;event&&(event.preventDefault?event.preventDefault():event.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var event=this.nativeEvent;event&&(event.stopPropagation?event.stopPropagation():"unknown"!=typeof event.cancelBubble&&(event.cancelBubble=!0),this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface)this[propName]=null;for(var i=0;i<shouldBeReleasedProperties.length;i++)this[shouldBeReleasedProperties[i]]=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(Class,Interface){var Super=this,E=function(){};E.prototype=Super.prototype;var prototype=new E;_assign(prototype,Class.prototype),Class.prototype=prototype,Class.prototype.constructor=Class,Class.Interface=_assign({},Super.Interface,Interface),Class.augmentClass=Super.augmentClass,PooledClass.addPoolingTo(Class,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(57),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent},function(module,exports,__webpack_require__){"use strict";function shouldUseChangeEvent(elem){var nodeName=elem.nodeName&&elem.nodeName.toLowerCase();return"select"===nodeName||"input"===nodeName&&"file"===elem.type}function manualDispatchChangeEvent(nativeEvent){var event=SyntheticEvent.getPooled(eventTypes.change,activeElementInst,nativeEvent,getEventTarget(nativeEvent));EventPropagators.accumulateTwoPhaseDispatches(event),ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(target,targetInst){activeElement=target,activeElementInst=targetInst,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementInst=null)}function getTargetInstForChangeEvent(topLevelType,targetInst){if(topLevelType===topLevelTypes.topChange)return targetInst}function handleEventsForChangeEventIE8(topLevelType,target,targetInst){topLevelType===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(target,targetInst)):topLevelType===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(target,targetInst){activeElement=target,activeElementInst=targetInst,activeElementValue=target.value,activeElementValueProp=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent?activeElement.attachEvent("onpropertychange",handlePropertyChange):activeElement.addEventListener("propertychange",handlePropertyChange,!1)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent?activeElement.detachEvent("onpropertychange",handlePropertyChange):activeElement.removeEventListener("propertychange",handlePropertyChange,!1),activeElement=null,activeElementInst=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(nativeEvent){if("value"===nativeEvent.propertyName){var value=nativeEvent.srcElement.value;value!==activeElementValue&&(activeElementValue=value,manualDispatchChangeEvent(nativeEvent))}}function getTargetInstForInputEvent(topLevelType,targetInst){if(topLevelType===topLevelTypes.topInput)return targetInst}function handleEventsForInputEventIE(topLevelType,target,targetInst){topLevelType===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(target,targetInst)):topLevelType===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetInstForInputEventIE(topLevelType,targetInst){if((topLevelType===topLevelTypes.topSelectionChange||topLevelType===topLevelTypes.topKeyUp||topLevelType===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementInst}function shouldUseClickEvent(elem){return elem.nodeName&&"input"===elem.nodeName.toLowerCase()&&("checkbox"===elem.type||"radio"===elem.type)}function getTargetInstForClickEvent(topLevelType,targetInst){if(topLevelType===topLevelTypes.topClick)return targetInst}var EventConstants=__webpack_require__(45),EventPluginHub=__webpack_require__(47),EventPropagators=__webpack_require__(46),ExecutionEnvironment=__webpack_require__(53),ReactDOMComponentTree=__webpack_require__(40),ReactUpdates=__webpack_require__(60),SyntheticEvent=__webpack_require__(57),getEventTarget=__webpack_require__(68),isEventSupported=__webpack_require__(69),isTextInputElement=__webpack_require__(70),keyOf=__webpack_require__(32),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementInst=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>11));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(val){activeElementValue=""+val,activeElementValueProp.set.call(this,val)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var getTargetInstFunc,handleEventFunc,targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;if(shouldUseChangeEvent(targetNode)?doesChangeEventBubble?getTargetInstFunc=getTargetInstForChangeEvent:handleEventFunc=handleEventsForChangeEventIE8:isTextInputElement(targetNode)?isInputEventSupported?getTargetInstFunc=getTargetInstForInputEvent:(getTargetInstFunc=getTargetInstForInputEventIE,handleEventFunc=handleEventsForInputEventIE):shouldUseClickEvent(targetNode)&&(getTargetInstFunc=getTargetInstForClickEvent),getTargetInstFunc){var inst=getTargetInstFunc(topLevelType,targetInst);if(inst){var event=SyntheticEvent.getPooled(eventTypes.change,inst,nativeEvent,nativeEventTarget);return event.type="change",EventPropagators.accumulateTwoPhaseDispatches(event),event}}handleEventFunc&&handleEventFunc(topLevelType,targetNode,targetInst)}};module.exports=ChangeEventPlugin},function(module,exports,__webpack_require__){"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy?void 0:_prodInvariant("123")}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!0)}function batchedUpdates(callback,a,b,c,d,e){ensureInjected(),batchingStrategy.batchedUpdates(callback,a,b,c,d,e)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;len!==dirtyComponents.length?_prodInvariant("124",len,dirtyComponents.length):void 0,dirtyComponents.sort(mountOrderComparator),updateBatchNumber++;for(var i=0;i<len;i++){var component=dirtyComponents[i],callbacks=component._pendingCallbacks;component._pendingCallbacks=null;var markerName;if(ReactFeatureFlags.logTopLevelRenders){var namedComponent=component;component._currentElement.props===component._renderedComponent._currentElement&&(namedComponent=component._renderedComponent),markerName="React update: "+namedComponent.getName(),console.time(markerName)}if(ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction,updateBatchNumber),markerName&&console.timeEnd(markerName),callbacks)for(var j=0;j<callbacks.length;j++)transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}function enqueueUpdate(component){return ensureInjected(),batchingStrategy.isBatchingUpdates?(dirtyComponents.push(component),void(null==component._updateBatchNumber&&(component._updateBatchNumber=updateBatchNumber+1))):void batchingStrategy.batchedUpdates(enqueueUpdate,component)}function asap(callback,context){batchingStrategy.isBatchingUpdates?void 0:_prodInvariant("125"),asapCallbackQueue.enqueue(callback,context),asapEnqueued=!0}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),CallbackQueue=__webpack_require__(61),PooledClass=__webpack_require__(13),ReactFeatureFlags=__webpack_require__(62),ReactReconciler=__webpack_require__(63),Transaction=__webpack_require__(67),dirtyComponents=(__webpack_require__(15),[]),updateBatchNumber=0,asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];_assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction),ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=!1;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),queue.notifyAll(),CallbackQueue.release(queue)}}},ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){ReconcileTransaction?void 0:_prodInvariant("126"),ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){_batchingStrategy?void 0:_prodInvariant("127"),"function"!=typeof _batchingStrategy.batchedUpdates?_prodInvariant("128"):void 0,"boolean"!=typeof _batchingStrategy.isBatchingUpdates?_prodInvariant("129"):void 0,batchingStrategy=_batchingStrategy}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates},function(module,exports,__webpack_require__){"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),PooledClass=__webpack_require__(13);__webpack_require__(15);_assign(CallbackQueue.prototype,{enqueue:function(callback,context){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(callback),this._contexts.push(context)},notifyAll:function(){var callbacks=this._callbacks,contexts=this._contexts;if(callbacks){callbacks.length!==contexts.length?_prodInvariant("24"):void 0,this._callbacks=null,this._contexts=null;for(var i=0;i<callbacks.length;i++)callbacks[i].call(contexts[i]);callbacks.length=0,contexts.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(len){this._callbacks&&(this._callbacks.length=len,this._contexts.length=len)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue},function(module,exports){"use strict";var ReactFeatureFlags={logTopLevelRenders:!1};module.exports=ReactFeatureFlags},function(module,exports,__webpack_require__){"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=__webpack_require__(64),ReactReconciler=(__webpack_require__(66),__webpack_require__(18),{mountComponent:function(internalInstance,transaction,hostParent,hostContainerInfo,context,parentDebugID){var markup=internalInstance.mountComponent(transaction,hostParent,hostContainerInfo,context,parentDebugID);return internalInstance._currentElement&&null!=internalInstance._currentElement.ref&&transaction.getReactMountReady().enqueue(attachRefs,internalInstance),markup},getHostNode:function(internalInstance){return internalInstance.getHostNode()},unmountComponent:function(internalInstance,safely){ReactRef.detachRefs(internalInstance,internalInstance._currentElement),internalInstance.unmountComponent(safely)},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement!==prevElement||context!==internalInstance._context){var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);refsChanged&&ReactRef.detachRefs(internalInstance,prevElement),internalInstance.receiveComponent(nextElement,transaction,context),refsChanged&&internalInstance._currentElement&&null!=internalInstance._currentElement.ref&&transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}},performUpdateIfNecessary:function(internalInstance,transaction,updateBatchNumber){internalInstance._updateBatchNumber===updateBatchNumber&&internalInstance.performUpdateIfNecessary(transaction)}});module.exports=ReactReconciler},function(module,exports,__webpack_require__){"use strict";function attachRef(ref,component,owner){"function"==typeof ref?ref(component.getPublicInstance()):ReactOwner.addComponentAsRefTo(component,ref,owner)}function detachRef(ref,component,owner){"function"==typeof ref?ref(null):ReactOwner.removeComponentAsRefFrom(component,ref,owner)}var ReactOwner=__webpack_require__(65),ReactRef={};ReactRef.attachRefs=function(instance,element){if(null!==element&&element!==!1){var ref=element.ref;null!=ref&&attachRef(ref,instance,element._owner)}},ReactRef.shouldUpdateRefs=function(prevElement,nextElement){var prevEmpty=null===prevElement||prevElement===!1,nextEmpty=null===nextElement||nextElement===!1;return prevEmpty||nextEmpty||nextElement.ref!==prevElement.ref||"string"==typeof nextElement.ref&&nextElement._owner!==prevElement._owner},ReactRef.detachRefs=function(instance,element){if(null!==element&&element!==!1){var ref=element.ref;null!=ref&&detachRef(ref,instance,element._owner)}},module.exports=ReactRef},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),ReactOwner=(__webpack_require__(15),{isValidOwner:function(object){return!(!object||"function"!=typeof object.attachRef||"function"!=typeof object.detachRef)},addComponentAsRefTo:function(component,ref,owner){ReactOwner.isValidOwner(owner)?void 0:_prodInvariant("119"),owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){ReactOwner.isValidOwner(owner)?void 0:_prodInvariant("120");var ownerPublicInstance=owner.getPublicInstance();ownerPublicInstance&&ownerPublicInstance.refs[ref]===component.getPublicInstance()&&owner.detachRef(ref)}});module.exports=ReactOwner},function(module,exports,__webpack_require__){"use strict";var debugTool=null;module.exports={debugTool:debugTool}},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),Mixin=(__webpack_require__(15),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){this.isInTransaction()?_prodInvariant("27"):void 0;var errorThrown,ret;try{this._isInTransaction=!0,errorThrown=!0,this.initializeAll(0),ret=method.call(scope,a,b,c,d,e,f),errorThrown=!1}finally{try{if(errorThrown)try{this.closeAll(0)}catch(err){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return ret},initializeAll:function(startIndex){for(var transactionWrappers=this.transactionWrappers,i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=Transaction.OBSERVED_ERROR,this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===Transaction.OBSERVED_ERROR)try{this.initializeAll(i+1)}catch(err){}}}},closeAll:function(startIndex){this.isInTransaction()?void 0:_prodInvariant("28");for(var transactionWrappers=this.transactionWrappers,i=startIndex;i<transactionWrappers.length;i++){var errorThrown,wrapper=transactionWrappers[i],initData=this.wrapperInitData[i];try{errorThrown=!0,initData!==Transaction.OBSERVED_ERROR&&wrapper.close&&wrapper.close.call(this,initData),errorThrown=!1}finally{if(errorThrown)try{this.closeAll(i+1)}catch(e){}}}this.wrapperInitData.length=0}}),Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction},function(module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;return target.correspondingUseElement&&(target=target.correspondingUseElement),3===target.nodeType?target.parentNode:target}module.exports=getEventTarget},function(module,exports,__webpack_require__){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document))return!1;var eventName="on"+eventNameSuffix,isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;"),isSupported="function"==typeof element[eventName]}return!isSupported&&useHasFeature&&"wheel"===eventNameSuffix&&(isSupported=document.implementation.hasFeature("Events.wheel","3.0")),isSupported}var useHasFeature,ExecutionEnvironment=__webpack_require__(53);ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),module.exports=isEventSupported},function(module,exports){"use strict";function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return"input"===nodeName?!!supportedInputTypes[elem.type]:"textarea"===nodeName}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement},function(module,exports,__webpack_require__){"use strict";var keyOf=__webpack_require__(32),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder},function(module,exports,__webpack_require__){"use strict";var EventConstants=__webpack_require__(45),EventPropagators=__webpack_require__(46),ReactDOMComponentTree=__webpack_require__(40),SyntheticMouseEvent=__webpack_require__(73),keyOf=__webpack_require__(32),topLevelTypes=EventConstants.topLevelTypes,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(topLevelType===topLevelTypes.topMouseOver&&(nativeEvent.relatedTarget||nativeEvent.fromElement))return null;if(topLevelType!==topLevelTypes.topMouseOut&&topLevelType!==topLevelTypes.topMouseOver)return null;var win;if(nativeEventTarget.window===nativeEventTarget)win=nativeEventTarget;else{var doc=nativeEventTarget.ownerDocument;win=doc?doc.defaultView||doc.parentWindow:window}var from,to;if(topLevelType===topLevelTypes.topMouseOut){from=targetInst;var related=nativeEvent.relatedTarget||nativeEvent.toElement;to=related?ReactDOMComponentTree.getClosestInstanceFromNode(related):null}else from=null,to=targetInst;if(from===to)return null;var fromNode=null==from?win:ReactDOMComponentTree.getNodeFromInstance(from),toNode=null==to?win:ReactDOMComponentTree.getNodeFromInstance(to),leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,from,nativeEvent,nativeEventTarget);leave.type="mouseleave",leave.target=fromNode,leave.relatedTarget=toNode;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,to,nativeEvent,nativeEventTarget);return enter.type="mouseenter",enter.target=toNode,enter.relatedTarget=fromNode,EventPropagators.accumulateEnterLeaveDispatches(leave,enter,from,to),[leave,enter]}};module.exports=EnterLeaveEventPlugin},function(module,exports,__webpack_require__){"use strict";function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(74),ViewportMetrics=__webpack_require__(75),getEventModifierState=__webpack_require__(76),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;return"which"in event?button:2===button?2:4===button?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(57),getEventTarget=__webpack_require__(68),UIEventInterface={view:function(event){if(event.view)return event.view;var target=getEventTarget(event);if(target.window===target)return target;var doc=target.ownerDocument;return doc?doc.defaultView||doc.parentWindow:window},detail:function(event){return event.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent},function(module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x,ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},function(module,exports){"use strict";function modifierStateGetter(keyArg){var syntheticEvent=this,nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState)return nativeEvent.getModifierState(keyArg);var keyProp=modifierKeyToProp[keyArg];return!!keyProp&&!!nativeEvent[keyProp]}function getEventModifierState(nativeEvent){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState},function(module,exports,__webpack_require__){"use strict";var DOMProperty=__webpack_require__(41),MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE,HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:HAS_BOOLEAN_VALUE,allowTransparency:0,alt:0,async:HAS_BOOLEAN_VALUE,autoComplete:0,autoPlay:HAS_BOOLEAN_VALUE,capture:HAS_BOOLEAN_VALUE,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,cite:0,classID:0,className:0,cols:HAS_POSITIVE_NUMERIC_VALUE,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:HAS_BOOLEAN_VALUE,coords:0,crossOrigin:0,data:0,dateTime:0,"default":HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:0,disabled:HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:0,frameBorder:0,headers:0,height:0,hidden:HAS_BOOLEAN_VALUE,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:HAS_BOOLEAN_VALUE,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:0,nonce:0,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:HAS_BOOLEAN_VALUE,referrerPolicy:0,rel:0,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:0,rows:HAS_POSITIVE_NUMERIC_VALUE,rowSpan:HAS_NUMERIC_VALUE,sandbox:0,scope:0,scoped:HAS_BOOLEAN_VALUE,scrolling:0,seamless:HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:0,size:HAS_POSITIVE_NUMERIC_VALUE,sizes:0,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:HAS_NUMERIC_VALUE,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:HAS_BOOLEAN_VALUE,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};module.exports=HTMLDOMPropertyConfig},function(module,exports,__webpack_require__){"use strict";var DOMChildrenOperations=__webpack_require__(79),ReactDOMIDOperations=__webpack_require__(91),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup};module.exports=ReactComponentBrowserEnvironment},function(module,exports,__webpack_require__){"use strict";function getNodeAfter(parentNode,node){return Array.isArray(node)&&(node=node[1]),node?node.nextSibling:parentNode.firstChild}function insertLazyTreeChildAt(parentNode,childTree,referenceNode){DOMLazyTree.insertTreeBefore(parentNode,childTree,referenceNode)}function moveChild(parentNode,childNode,referenceNode){Array.isArray(childNode)?moveDelimitedText(parentNode,childNode[0],childNode[1],referenceNode):insertChildAt(parentNode,childNode,referenceNode)}function removeChild(parentNode,childNode){if(Array.isArray(childNode)){var closingComment=childNode[1];childNode=childNode[0],removeDelimitedText(parentNode,childNode,closingComment),parentNode.removeChild(closingComment)}parentNode.removeChild(childNode)}function moveDelimitedText(parentNode,openingComment,closingComment,referenceNode){for(var node=openingComment;;){var nextNode=node.nextSibling;if(insertChildAt(parentNode,node,referenceNode),node===closingComment)break;node=nextNode}}function removeDelimitedText(parentNode,startNode,closingComment){for(;;){var node=startNode.nextSibling;if(node===closingComment)break;parentNode.removeChild(node)}}function replaceDelimitedText(openingComment,closingComment,stringText){var parentNode=openingComment.parentNode,nodeAfterComment=openingComment.nextSibling;nodeAfterComment===closingComment?stringText&&insertChildAt(parentNode,document.createTextNode(stringText),nodeAfterComment):stringText?(setTextContent(nodeAfterComment,stringText),removeDelimitedText(parentNode,nodeAfterComment,closingComment)):removeDelimitedText(parentNode,openingComment,closingComment)}var DOMLazyTree=__webpack_require__(80),Danger=__webpack_require__(86),ReactMultiChildUpdateTypes=__webpack_require__(90),createMicrosoftUnsafeLocalFunction=(__webpack_require__(40),__webpack_require__(66),__webpack_require__(83)),setInnerHTML=__webpack_require__(82),setTextContent=__webpack_require__(84),insertChildAt=createMicrosoftUnsafeLocalFunction(function(parentNode,childNode,referenceNode){parentNode.insertBefore(childNode,referenceNode)}),dangerouslyReplaceNodeWithMarkup=Danger.dangerouslyReplaceNodeWithMarkup,DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:replaceDelimitedText,processUpdates:function(parentNode,updates){for(var k=0;k<updates.length;k++){var update=updates[k];switch(update.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertLazyTreeChildAt(parentNode,update.content,getNodeAfter(parentNode,update.afterNode));break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:moveChild(parentNode,update.fromNode,getNodeAfter(parentNode,update.afterNode));break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(parentNode,update.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(parentNode,update.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:removeChild(parentNode,update.fromNode)}}}};module.exports=DOMChildrenOperations},function(module,exports,__webpack_require__){"use strict";function insertTreeChildren(tree){if(enableLazy){var node=tree.node,children=tree.children;if(children.length)for(var i=0;i<children.length;i++)insertTreeBefore(node,children[i],null);else null!=tree.html?setInnerHTML(node,tree.html):null!=tree.text&&setTextContent(node,tree.text)}}function replaceChildWithTree(oldNode,newTree){oldNode.parentNode.replaceChild(newTree.node,oldNode),insertTreeChildren(newTree)}function queueChild(parentTree,childTree){enableLazy?parentTree.children.push(childTree):parentTree.node.appendChild(childTree.node)}function queueHTML(tree,html){enableLazy?tree.html=html:setInnerHTML(tree.node,html)}function queueText(tree,text){enableLazy?tree.text=text:setTextContent(tree.node,text)}function toString(){return this.node.nodeName}function DOMLazyTree(node){return{node:node,children:[],html:null,text:null,toString:toString}}var DOMNamespaces=__webpack_require__(81),setInnerHTML=__webpack_require__(82),createMicrosoftUnsafeLocalFunction=__webpack_require__(83),setTextContent=__webpack_require__(84),ELEMENT_NODE_TYPE=1,DOCUMENT_FRAGMENT_NODE_TYPE=11,enableLazy="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),insertTreeBefore=createMicrosoftUnsafeLocalFunction(function(parentNode,tree,referenceNode){tree.node.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE||tree.node.nodeType===ELEMENT_NODE_TYPE&&"object"===tree.node.nodeName.toLowerCase()&&(null==tree.node.namespaceURI||tree.node.namespaceURI===DOMNamespaces.html)?(insertTreeChildren(tree),parentNode.insertBefore(tree.node,referenceNode)):(parentNode.insertBefore(tree.node,referenceNode),insertTreeChildren(tree))});DOMLazyTree.insertTreeBefore=insertTreeBefore,DOMLazyTree.replaceChildWithTree=replaceChildWithTree,DOMLazyTree.queueChild=queueChild,DOMLazyTree.queueHTML=queueHTML,DOMLazyTree.queueText=queueText,module.exports=DOMLazyTree},function(module,exports){"use strict";var DOMNamespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};module.exports=DOMNamespaces},function(module,exports,__webpack_require__){"use strict";var reusableSVGContainer,ExecutionEnvironment=__webpack_require__(53),DOMNamespaces=__webpack_require__(81),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,createMicrosoftUnsafeLocalFunction=__webpack_require__(83),setInnerHTML=createMicrosoftUnsafeLocalFunction(function(node,html){if(node.namespaceURI!==DOMNamespaces.svg||"innerHTML"in node)node.innerHTML=html;else{reusableSVGContainer=reusableSVGContainer||document.createElement("div"),reusableSVGContainer.innerHTML="<svg>"+html+"</svg>";for(var newNodes=reusableSVGContainer.firstChild.childNodes,i=0;i<newNodes.length;i++)node.appendChild(newNodes[i])}});if(ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(node,html){if(node.parentNode&&node.parentNode.replaceChild(node,node),WHITESPACE_TEST.test(html)||"<"===html[0]&&NONVISIBLE_TEST.test(html)){node.innerHTML=String.fromCharCode(65279)+html;var textNode=node.firstChild;1===textNode.data.length?node.removeChild(textNode):textNode.deleteData(0,1)}else node.innerHTML=html}),testElement=null}module.exports=setInnerHTML},function(module,exports){"use strict";var createMicrosoftUnsafeLocalFunction=function(func){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(arg0,arg1,arg2,arg3){MSApp.execUnsafeLocalFunction(function(){return func(arg0,arg1,arg2,arg3)})}:func};module.exports=createMicrosoftUnsafeLocalFunction},function(module,exports,__webpack_require__){"use strict";var ExecutionEnvironment=__webpack_require__(53),escapeTextContentForBrowser=__webpack_require__(85),setInnerHTML=__webpack_require__(82),setTextContent=function(node,text){if(text){var firstChild=node.firstChild;if(firstChild&&firstChild===node.lastChild&&3===firstChild.nodeType)return void(firstChild.nodeValue=text)}node.textContent=text};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(node,text){setInnerHTML(node,escapeTextContentForBrowser(text))})),module.exports=setTextContent},function(module,exports){"use strict";function escapeHtml(string){var str=""+string,match=matchHtmlRegExp.exec(str);if(!match)return str;var escape,html="",index=0,lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#x27;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}lastIndex!==index&&(html+=str.substring(lastIndex,index)),lastIndex=index+1,html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}function escapeTextContentForBrowser(text){return"boolean"==typeof text||"number"==typeof text?""+text:escapeHtml(text)}var matchHtmlRegExp=/["'&<>]/;module.exports=escapeTextContentForBrowser},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),DOMLazyTree=__webpack_require__(80),ExecutionEnvironment=__webpack_require__(53),createNodesFromMarkup=__webpack_require__(87),emptyFunction=__webpack_require__(19),Danger=(__webpack_require__(15),{dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){if(ExecutionEnvironment.canUseDOM?void 0:_prodInvariant("56"),markup?void 0:_prodInvariant("57"),"HTML"===oldChild.nodeName?_prodInvariant("58"):void 0,"string"==typeof markup){var newChild=createNodesFromMarkup(markup,emptyFunction)[0];oldChild.parentNode.replaceChild(newChild,oldChild)}else DOMLazyTree.replaceChildWithTree(oldChild,markup)}});module.exports=Danger},function(module,exports,__webpack_require__){"use strict";function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;dummyNode?void 0:invariant(!1);var nodeName=getNodeName(markup),wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];for(var wrapDepth=wrap[0];wrapDepth--;)node=node.lastChild}else node.innerHTML=markup;var scripts=node.getElementsByTagName("script");scripts.length&&(handleScript?void 0:invariant(!1),createArrayFromMixed(scripts).forEach(handleScript));for(var nodes=Array.from(node.childNodes);node.lastChild;)node.removeChild(node.lastChild);return nodes}var ExecutionEnvironment=__webpack_require__(53),createArrayFromMixed=__webpack_require__(88),getMarkupWrap=__webpack_require__(89),invariant=__webpack_require__(15),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup},function(module,exports,__webpack_require__){"use strict";function toArray(obj){var length=obj.length;if(Array.isArray(obj)||"object"!=typeof obj&&"function"!=typeof obj?invariant(!1):void 0,"number"!=typeof length?invariant(!1):void 0,0===length||length-1 in obj?void 0:invariant(!1),"function"==typeof obj.callee?invariant(!1):void 0,obj.hasOwnProperty)try{return Array.prototype.slice.call(obj)}catch(e){}for(var ret=Array(length),ii=0;ii<length;ii++)ret[ii]=obj[ii];return ret}function hasArrayNature(obj){return!!obj&&("object"==typeof obj||"function"==typeof obj)&&"length"in obj&&!("setInterval"in obj)&&"number"!=typeof obj.nodeType&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){return hasArrayNature(obj)?Array.isArray(obj)?obj.slice():toArray(obj):[obj]}var invariant=__webpack_require__(15);module.exports=createArrayFromMixed},function(module,exports,__webpack_require__){"use strict";function getMarkupWrap(nodeName){return dummyNode?void 0:invariant(!1),markupWrap.hasOwnProperty(nodeName)||(nodeName="*"),shouldWrap.hasOwnProperty(nodeName)||("*"===nodeName?dummyNode.innerHTML="<link />":dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">",shouldWrap[nodeName]=!dummyNode.firstChild),shouldWrap[nodeName]?markupWrap[nodeName]:null}var ExecutionEnvironment=__webpack_require__(53),invariant=__webpack_require__(15),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(nodeName){markupWrap[nodeName]=svgWrap,shouldWrap[nodeName]=!0}),module.exports=getMarkupWrap},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(30),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes},function(module,exports,__webpack_require__){"use strict";var DOMChildrenOperations=__webpack_require__(79),ReactDOMComponentTree=__webpack_require__(40),ReactDOMIDOperations={dangerouslyProcessChildrenUpdates:function(parentInst,updates){var node=ReactDOMComponentTree.getNodeFromInstance(parentInst);DOMChildrenOperations.processUpdates(node,updates)}};module.exports=ReactDOMIDOperations},function(module,exports,__webpack_require__){"use strict";function getDeclarationErrorAddendum(internalInstance){if(internalInstance){var owner=internalInstance._currentElement._owner||null;if(owner){var name=owner.getName();if(name)return" This DOM node was rendered by `"+name+"`."}}return""}function assertValidProps(component,props){props&&(voidElementTags[component._tag]&&(null!=props.children||null!=props.dangerouslySetInnerHTML?_prodInvariant("137",component._tag,component._currentElement._owner?" Check the render method of "+component._currentElement._owner.getName()+".":""):void 0),null!=props.dangerouslySetInnerHTML&&(null!=props.children?_prodInvariant("60"):void 0,"object"==typeof props.dangerouslySetInnerHTML&&HTML in props.dangerouslySetInnerHTML?void 0:_prodInvariant("61")),null!=props.style&&"object"!=typeof props.style?_prodInvariant("62",getDeclarationErrorAddendum(component)):void 0)}function enqueuePutListener(inst,registrationName,listener,transaction){if(!(transaction instanceof ReactServerRenderingTransaction)){var containerInfo=inst._hostContainerInfo,isDocumentFragment=containerInfo._node&&containerInfo._node.nodeType===DOC_FRAGMENT_TYPE,doc=isDocumentFragment?containerInfo._node:containerInfo._ownerDocument;listenTo(registrationName,doc),transaction.getReactMountReady().enqueue(putListener,{inst:inst,registrationName:registrationName,listener:listener})}}function putListener(){var listenerToPut=this;EventPluginHub.putListener(listenerToPut.inst,listenerToPut.registrationName,listenerToPut.listener)}function inputPostMount(){var inst=this;ReactDOMInput.postMountWrapper(inst)}function textareaPostMount(){var inst=this;ReactDOMTextarea.postMountWrapper(inst)}function optionPostMount(){var inst=this;ReactDOMOption.postMountWrapper(inst)}function trapBubbledEventsLocal(){var inst=this;inst._rootNodeID?void 0:_prodInvariant("63");var node=getNode(inst);switch(node?void 0:_prodInvariant("64"),inst._tag){case"iframe":case"object":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",node)];break;case"video":case"audio":inst._wrapperState.listeners=[];for(var event in mediaEvents)mediaEvents.hasOwnProperty(event)&&inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[event],mediaEvents[event],node));break;case"source":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",node)];break;case"img":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",node),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",node)];break;case"form":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",node),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",node)];break;case"input":case"select":case"textarea":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topInvalid,"invalid",node)]}}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(tag){hasOwnProperty.call(validatedTagCache,tag)||(VALID_TAG_REGEX.test(tag)?void 0:_prodInvariant("65",tag),validatedTagCache[tag]=!0)}function isCustomComponent(tagName,props){return tagName.indexOf("-")>=0||null!=props.is}function ReactDOMComponent(element){var tag=element.type;validateDangerousTag(tag),this._currentElement=element,this._tag=tag.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),AutoFocusUtils=__webpack_require__(93),CSSPropertyOperations=__webpack_require__(95),DOMLazyTree=__webpack_require__(80),DOMNamespaces=__webpack_require__(81),DOMProperty=__webpack_require__(41),DOMPropertyOperations=__webpack_require__(103),EventConstants=__webpack_require__(45),EventPluginHub=__webpack_require__(47),EventPluginRegistry=__webpack_require__(48),ReactBrowserEventEmitter=__webpack_require__(105),ReactDOMButton=__webpack_require__(108),ReactDOMComponentFlags=__webpack_require__(42),ReactDOMComponentTree=__webpack_require__(40),ReactDOMInput=__webpack_require__(110),ReactDOMOption=__webpack_require__(112),ReactDOMSelect=__webpack_require__(113),ReactDOMTextarea=__webpack_require__(114),ReactMultiChild=(__webpack_require__(66),__webpack_require__(115)),ReactServerRenderingTransaction=__webpack_require__(129),escapeTextContentForBrowser=(__webpack_require__(19),__webpack_require__(85)),keyOf=(__webpack_require__(15),__webpack_require__(69),__webpack_require__(32)),Flags=(__webpack_require__(124),__webpack_require__(132),__webpack_require__(18),ReactDOMComponentFlags),deleteListener=EventPluginHub.deleteListener,getNode=ReactDOMComponentTree.getNodeFromInstance,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=EventPluginRegistry.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),RESERVED_PROPS={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},DOC_FRAGMENT_TYPE=11,mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=_assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty,globalIdCounter=1;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={mountComponent:function(transaction,hostParent,hostContainerInfo,context){this._rootNodeID=globalIdCounter++,this._domID=hostContainerInfo._idCounter++,this._hostParent=hostParent,this._hostContainerInfo=hostContainerInfo;var props=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":props=ReactDOMButton.getHostProps(this,props,hostParent);break;case"input":ReactDOMInput.mountWrapper(this,props,hostParent),props=ReactDOMInput.getHostProps(this,props),transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"option":ReactDOMOption.mountWrapper(this,props,hostParent),props=ReactDOMOption.getHostProps(this,props);break;case"select":ReactDOMSelect.mountWrapper(this,props,hostParent),props=ReactDOMSelect.getHostProps(this,props),transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"textarea":ReactDOMTextarea.mountWrapper(this,props,hostParent),props=ReactDOMTextarea.getHostProps(this,props),transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this)}assertValidProps(this,props);var namespaceURI,parentTag;null!=hostParent?(namespaceURI=hostParent._namespaceURI,parentTag=hostParent._tag):hostContainerInfo._tag&&(namespaceURI=hostContainerInfo._namespaceURI,parentTag=hostContainerInfo._tag),(null==namespaceURI||namespaceURI===DOMNamespaces.svg&&"foreignobject"===parentTag)&&(namespaceURI=DOMNamespaces.html),namespaceURI===DOMNamespaces.html&&("svg"===this._tag?namespaceURI=DOMNamespaces.svg:"math"===this._tag&&(namespaceURI=DOMNamespaces.mathml)),this._namespaceURI=namespaceURI;var mountImage;if(transaction.useCreateElement){var el,ownerDocument=hostContainerInfo._ownerDocument;if(namespaceURI===DOMNamespaces.html)if("script"===this._tag){var div=ownerDocument.createElement("div"),type=this._currentElement.type;div.innerHTML="<"+type+"></"+type+">",el=div.removeChild(div.firstChild)}else el=props.is?ownerDocument.createElement(this._currentElement.type,props.is):ownerDocument.createElement(this._currentElement.type);else el=ownerDocument.createElementNS(namespaceURI,this._currentElement.type);ReactDOMComponentTree.precacheNode(this,el),this._flags|=Flags.hasCachedChildNodes,this._hostParent||DOMPropertyOperations.setAttributeForRoot(el),this._updateDOMProperties(null,props,transaction);var lazyTree=DOMLazyTree(el);this._createInitialChildren(transaction,props,context,lazyTree),mountImage=lazyTree}else{var tagOpen=this._createOpenTagMarkupAndPutListeners(transaction,props),tagContent=this._createContentMarkup(transaction,props,context);mountImage=!tagContent&&omittedCloseTags[this._tag]?tagOpen+"/>":tagOpen+">"+tagContent+"</"+this._currentElement.type+">"}switch(this._tag){case"input":transaction.getReactMountReady().enqueue(inputPostMount,this),props.autoFocus&&transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"textarea":transaction.getReactMountReady().enqueue(textareaPostMount,this),props.autoFocus&&transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"select":props.autoFocus&&transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);
break;case"button":props.autoFocus&&transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"option":transaction.getReactMountReady().enqueue(optionPostMount,this)}return mountImage},_createOpenTagMarkupAndPutListeners:function(transaction,props){var ret="<"+this._currentElement.type;for(var propKey in props)if(props.hasOwnProperty(propKey)){var propValue=props[propKey];if(null!=propValue)if(registrationNameModules.hasOwnProperty(propKey))propValue&&enqueuePutListener(this,propKey,propValue,transaction);else{propKey===STYLE&&(propValue&&(propValue=this._previousStyleCopy=_assign({},props.style)),propValue=CSSPropertyOperations.createMarkupForStyles(propValue,this));var markup=null;null!=this._tag&&isCustomComponent(this._tag,props)?RESERVED_PROPS.hasOwnProperty(propKey)||(markup=DOMPropertyOperations.createMarkupForCustomAttribute(propKey,propValue)):markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue),markup&&(ret+=" "+markup)}}return transaction.renderToStaticMarkup?ret:(this._hostParent||(ret+=" "+DOMPropertyOperations.createMarkupForRoot()),ret+=" "+DOMPropertyOperations.createMarkupForID(this._domID))},_createContentMarkup:function(transaction,props,context){var ret="",innerHTML=props.dangerouslySetInnerHTML;if(null!=innerHTML)null!=innerHTML.__html&&(ret=innerHTML.__html);else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null,childrenToUse=null!=contentToUse?null:props.children;if(null!=contentToUse)ret=escapeTextContentForBrowser(contentToUse);else if(null!=childrenToUse){var mountImages=this.mountChildren(childrenToUse,transaction,context);ret=mountImages.join("")}}return newlineEatingTags[this._tag]&&"\n"===ret.charAt(0)?"\n"+ret:ret},_createInitialChildren:function(transaction,props,context,lazyTree){var innerHTML=props.dangerouslySetInnerHTML;if(null!=innerHTML)null!=innerHTML.__html&&DOMLazyTree.queueHTML(lazyTree,innerHTML.__html);else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null,childrenToUse=null!=contentToUse?null:props.children;if(null!=contentToUse)DOMLazyTree.queueText(lazyTree,contentToUse);else if(null!=childrenToUse)for(var mountImages=this.mountChildren(childrenToUse,transaction,context),i=0;i<mountImages.length;i++)DOMLazyTree.queueChild(lazyTree,mountImages[i])}},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement,this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){var lastProps=prevElement.props,nextProps=this._currentElement.props;switch(this._tag){case"button":lastProps=ReactDOMButton.getHostProps(this,lastProps),nextProps=ReactDOMButton.getHostProps(this,nextProps);break;case"input":lastProps=ReactDOMInput.getHostProps(this,lastProps),nextProps=ReactDOMInput.getHostProps(this,nextProps);break;case"option":lastProps=ReactDOMOption.getHostProps(this,lastProps),nextProps=ReactDOMOption.getHostProps(this,nextProps);break;case"select":lastProps=ReactDOMSelect.getHostProps(this,lastProps),nextProps=ReactDOMSelect.getHostProps(this,nextProps);break;case"textarea":lastProps=ReactDOMTextarea.getHostProps(this,lastProps),nextProps=ReactDOMTextarea.getHostProps(this,nextProps)}switch(assertValidProps(this,nextProps),this._updateDOMProperties(lastProps,nextProps,transaction),this._updateDOMChildren(lastProps,nextProps,transaction,context),this._tag){case"input":ReactDOMInput.updateWrapper(this);break;case"textarea":ReactDOMTextarea.updateWrapper(this);break;case"select":transaction.getReactMountReady().enqueue(postUpdateSelectWrapper,this)}},_updateDOMProperties:function(lastProps,nextProps,transaction){var propKey,styleName,styleUpdates;for(propKey in lastProps)if(!nextProps.hasOwnProperty(propKey)&&lastProps.hasOwnProperty(propKey)&&null!=lastProps[propKey])if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle)lastStyle.hasOwnProperty(styleName)&&(styleUpdates=styleUpdates||{},styleUpdates[styleName]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(propKey)?lastProps[propKey]&&deleteListener(this,propKey):isCustomComponent(this._tag,lastProps)?RESERVED_PROPS.hasOwnProperty(propKey)||DOMPropertyOperations.deleteValueForAttribute(getNode(this),propKey):(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey))&&DOMPropertyOperations.deleteValueForProperty(getNode(this),propKey);for(propKey in nextProps){var nextProp=nextProps[propKey],lastProp=propKey===STYLE?this._previousStyleCopy:null!=lastProps?lastProps[propKey]:void 0;if(nextProps.hasOwnProperty(propKey)&&nextProp!==lastProp&&(null!=nextProp||null!=lastProp))if(propKey===STYLE)if(nextProp?nextProp=this._previousStyleCopy=_assign({},nextProp):this._previousStyleCopy=null,lastProp){for(styleName in lastProp)!lastProp.hasOwnProperty(styleName)||nextProp&&nextProp.hasOwnProperty(styleName)||(styleUpdates=styleUpdates||{},styleUpdates[styleName]="");for(styleName in nextProp)nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]&&(styleUpdates=styleUpdates||{},styleUpdates[styleName]=nextProp[styleName])}else styleUpdates=nextProp;else if(registrationNameModules.hasOwnProperty(propKey))nextProp?enqueuePutListener(this,propKey,nextProp,transaction):lastProp&&deleteListener(this,propKey);else if(isCustomComponent(this._tag,nextProps))RESERVED_PROPS.hasOwnProperty(propKey)||DOMPropertyOperations.setValueForAttribute(getNode(this),propKey,nextProp);else if(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey)){var node=getNode(this);null!=nextProp?DOMPropertyOperations.setValueForProperty(node,propKey,nextProp):DOMPropertyOperations.deleteValueForProperty(node,propKey)}}styleUpdates&&CSSPropertyOperations.setValueForStyles(getNode(this),styleUpdates,this)},_updateDOMChildren:function(lastProps,nextProps,transaction,context){var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null,nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null,lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html,nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html,lastChildren=null!=lastContent?null:lastProps.children,nextChildren=null!=nextContent?null:nextProps.children,lastHasContentOrHtml=null!=lastContent||null!=lastHtml,nextHasContentOrHtml=null!=nextContent||null!=nextHtml;null!=lastChildren&&null==nextChildren?this.updateChildren(null,transaction,context):lastHasContentOrHtml&&!nextHasContentOrHtml&&this.updateTextContent(""),null!=nextContent?lastContent!==nextContent&&this.updateTextContent(""+nextContent):null!=nextHtml?lastHtml!==nextHtml&&this.updateMarkup(""+nextHtml):null!=nextChildren&&this.updateChildren(nextChildren,transaction,context)},getHostNode:function(){return getNode(this)},unmountComponent:function(safely){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var listeners=this._wrapperState.listeners;if(listeners)for(var i=0;i<listeners.length;i++)listeners[i].remove();break;case"html":case"head":case"body":_prodInvariant("66",this._tag)}this.unmountChildren(safely),ReactDOMComponentTree.uncacheNode(this),EventPluginHub.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return getNode(this)}},_assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent},function(module,exports,__webpack_require__){"use strict";var ReactDOMComponentTree=__webpack_require__(40),focusNode=__webpack_require__(94),AutoFocusUtils={focusDOMComponent:function(){focusNode(ReactDOMComponentTree.getNodeFromInstance(this))}};module.exports=AutoFocusUtils},function(module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},function(module,exports,__webpack_require__){"use strict";var CSSProperty=__webpack_require__(96),ExecutionEnvironment=__webpack_require__(53),dangerousStyleValue=(__webpack_require__(66),__webpack_require__(97),__webpack_require__(99)),hyphenateStyleName=__webpack_require__(100),memoizeStringOnly=__webpack_require__(102),processStyleName=(__webpack_require__(18),memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)})),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var CSSPropertyOperations={createMarkupForStyles:function(styles,component){var serialized="";for(var styleName in styles)if(styles.hasOwnProperty(styleName)){var styleValue=styles[styleName];null!=styleValue&&(serialized+=processStyleName(styleName)+":",serialized+=dangerousStyleValue(styleName,styleValue,component)+";")}return serialized||null},setValueForStyles:function(node,styles,component){var style=node.style;for(var styleName in styles)if(styles.hasOwnProperty(styleName)){var styleValue=dangerousStyleValue(styleName,styles[styleName],component);if("float"!==styleName&&"cssFloat"!==styleName||(styleName=styleFloatAccessor),styleValue)style[styleName]=styleValue;else{var expansion=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[styleName];if(expansion)for(var individualStyleName in expansion)style[individualStyleName]="";else style[styleName]=""}}}};module.exports=CSSPropertyOperations},function(module,exports){"use strict";function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},function(module,exports,__webpack_require__){"use strict";function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}var camelize=__webpack_require__(98),msPattern=/^-ms-/;module.exports=camelizeStyleName},function(module,exports){"use strict";function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize},function(module,exports,__webpack_require__){"use strict";function dangerousStyleValue(name,value,component){var isEmpty=null==value||"boolean"==typeof value||""===value;if(isEmpty)return"";var isNonNumeric=isNaN(value);if(isNonNumeric||0===value||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name])return""+value;if("string"==typeof value){value=value.trim()}return value+"px"}var CSSProperty=__webpack_require__(96),isUnitlessNumber=(__webpack_require__(18),CSSProperty.isUnitlessNumber);module.exports=dangerousStyleValue},function(module,exports,__webpack_require__){"use strict";function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}var hyphenate=__webpack_require__(101),msPattern=/^ms-/;module.exports=hyphenateStyleName},function(module,exports){"use strict";function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate},function(module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){return cache.hasOwnProperty(string)||(cache[string]=callback.call(this,string)),cache[string]}}module.exports=memoizeStringOnly},function(module,exports,__webpack_require__){"use strict";function isAttributeNameSafe(attributeName){return!!validatedAttributeNameCache.hasOwnProperty(attributeName)||!illegalAttributeNameCache.hasOwnProperty(attributeName)&&(VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)?(validatedAttributeNameCache[attributeName]=!0,!0):(illegalAttributeNameCache[attributeName]=!0,!1))}function shouldIgnoreValue(propertyInfo,value){return null==value||propertyInfo.hasBooleanValue&&!value||propertyInfo.hasNumericValue&&isNaN(value)||propertyInfo.hasPositiveNumericValue&&value<1||propertyInfo.hasOverloadedBooleanValue&&value===!1}var DOMProperty=__webpack_require__(41),quoteAttributeValueForBrowser=(__webpack_require__(40),__webpack_require__(66),__webpack_require__(104)),VALID_ATTRIBUTE_NAME_REGEX=(__webpack_require__(18),new RegExp("^["+DOMProperty.ATTRIBUTE_NAME_START_CHAR+"]["+DOMProperty.ATTRIBUTE_NAME_CHAR+"]*$")),illegalAttributeNameCache={},validatedAttributeNameCache={},DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},setAttributeForID:function(node,id){node.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,id)},createMarkupForRoot:function(){return DOMProperty.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(node){node.setAttribute(DOMProperty.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){if(shouldIgnoreValue(propertyInfo,value))return"";var attributeName=propertyInfo.attributeName;return propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===!0?attributeName+'=""':attributeName+"="+quoteAttributeValueForBrowser(value)}return DOMProperty.isCustomAttribute(name)?null==value?"":name+"="+quoteAttributeValueForBrowser(value):null},createMarkupForCustomAttribute:function(name,value){return isAttributeNameSafe(name)&&null!=value?name+"="+quoteAttributeValueForBrowser(value):""},setValueForProperty:function(node,name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod)mutationMethod(node,value);else{if(shouldIgnoreValue(propertyInfo,value))return void this.deleteValueForProperty(node,name);if(propertyInfo.mustUseProperty)node[propertyInfo.propertyName]=value;else{var attributeName=propertyInfo.attributeName,namespace=propertyInfo.attributeNamespace;namespace?node.setAttributeNS(namespace,attributeName,""+value):propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===!0?node.setAttribute(attributeName,""):node.setAttribute(attributeName,""+value)}}}else if(DOMProperty.isCustomAttribute(name))return void DOMPropertyOperations.setValueForAttribute(node,name,value)},setValueForAttribute:function(node,name,value){if(isAttributeNameSafe(name)){null==value?node.removeAttribute(name):node.setAttribute(name,""+value)}},deleteValueForAttribute:function(node,name){node.removeAttribute(name)},deleteValueForProperty:function(node,name){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod)mutationMethod(node,void 0);else if(propertyInfo.mustUseProperty){var propName=propertyInfo.propertyName;propertyInfo.hasBooleanValue?node[propName]=!1:node[propName]=""}else node.removeAttribute(propertyInfo.attributeName)}else DOMProperty.isCustomAttribute(name)&&node.removeAttribute(name)}};module.exports=DOMPropertyOperations},function(module,exports,__webpack_require__){"use strict";function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}var escapeTextContentForBrowser=__webpack_require__(85);module.exports=quoteAttributeValueForBrowser},function(module,exports,__webpack_require__){"use strict";function getListeningForDocument(mountAt){return Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)||(mountAt[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[mountAt[topListenersIDKey]]={}),alreadyListeningTo[mountAt[topListenersIDKey]]}var hasEventPageXY,_assign=__webpack_require__(11),EventConstants=__webpack_require__(45),EventPluginRegistry=__webpack_require__(48),ReactEventEmitterMixin=__webpack_require__(106),ViewportMetrics=__webpack_require__(75),getVendorPrefixedEventName=__webpack_require__(107),isEventSupported=__webpack_require__(69),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topAnimationEnd:getVendorPrefixedEventName("animationend")||"animationend",topAnimationIteration:getVendorPrefixedEventName("animationiteration")||"animationiteration",topAnimationStart:getVendorPrefixedEventName("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:getVendorPrefixedEventName("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=_assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){for(var mountAt=contentDocumentHandle,isListening=getListeningForDocument(mountAt),dependencies=EventPluginRegistry.registrationNameDependencies[registrationName],topLevelTypes=EventConstants.topLevelTypes,i=0;i<dependencies.length;i++){var dependency=dependencies[i];isListening.hasOwnProperty(dependency)&&isListening[dependency]||(dependency===topLevelTypes.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"wheel",mountAt):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"mousewheel",mountAt):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"DOMMouseScroll",mountAt):dependency===topLevelTypes.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topScroll,"scroll",mountAt):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):dependency===topLevelTypes.topFocus||dependency===topLevelTypes.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topFocus,"focus",mountAt),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topBlur,"blur",mountAt)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topFocus,"focusin",mountAt),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topBlur,"focusout",mountAt)),isListening[topLevelTypes.topBlur]=!0,isListening[topLevelTypes.topFocus]=!0):topEventMapping.hasOwnProperty(dependency)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt),isListening[dependency]=!0)}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},ensureScrollValueMonitoring:function(){if(void 0===hasEventPageXY&&(hasEventPageXY=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!hasEventPageXY&&!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh),isMonitoringScrollValue=!0}}});module.exports=ReactBrowserEventEmitter},function(module,exports,__webpack_require__){"use strict";function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events),EventPluginHub.processEventQueue(!1)}var EventPluginHub=__webpack_require__(47),ReactEventEmitterMixin={handleTopLevel:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var events=EventPluginHub.extractEvents(topLevelType,targetInst,nativeEvent,nativeEventTarget);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},function(module,exports,__webpack_require__){"use strict";function makePrefixMap(styleProp,eventName){var prefixes={};return prefixes[styleProp.toLowerCase()]=eventName.toLowerCase(),prefixes["Webkit"+styleProp]="webkit"+eventName,prefixes["Moz"+styleProp]="moz"+eventName,prefixes["ms"+styleProp]="MS"+eventName,prefixes["O"+styleProp]="o"+eventName.toLowerCase(),prefixes}function getVendorPrefixedEventName(eventName){if(prefixedEventNames[eventName])return prefixedEventNames[eventName];if(!vendorPrefixes[eventName])return eventName;var prefixMap=vendorPrefixes[eventName];for(var styleProp in prefixMap)if(prefixMap.hasOwnProperty(styleProp)&&styleProp in style)return prefixedEventNames[eventName]=prefixMap[styleProp];return""}var ExecutionEnvironment=__webpack_require__(53),vendorPrefixes={animationend:makePrefixMap("Animation","AnimationEnd"),animationiteration:makePrefixMap("Animation","AnimationIteration"),animationstart:makePrefixMap("Animation","AnimationStart"),transitionend:makePrefixMap("Transition","TransitionEnd")},prefixedEventNames={},style={};ExecutionEnvironment.canUseDOM&&(style=document.createElement("div").style,"AnimationEvent"in window||(delete vendorPrefixes.animationend.animation,delete vendorPrefixes.animationiteration.animation,delete vendorPrefixes.animationstart.animation),"TransitionEvent"in window||delete vendorPrefixes.transitionend.transition),module.exports=getVendorPrefixedEventName},function(module,exports,__webpack_require__){"use strict";var DisabledInputUtils=__webpack_require__(109),ReactDOMButton={getHostProps:DisabledInputUtils.getHostProps};module.exports=ReactDOMButton},function(module,exports){"use strict";var disableableMouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},DisabledInputUtils={getHostProps:function(inst,props){if(!props.disabled)return props;var hostProps={};for(var key in props)!disableableMouseListenerNames[key]&&props.hasOwnProperty(key)&&(hostProps[key]=props[key]);return hostProps}};module.exports=DisabledInputUtils},function(module,exports,__webpack_require__){"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);var name=props.name;if("radio"===props.type&&null!=name){for(var rootNode=ReactDOMComponentTree.getNodeFromInstance(this),queryRoot=rootNode;queryRoot.parentNode;)queryRoot=queryRoot.parentNode;for(var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]'),i=0;i<group.length;i++){var otherNode=group[i];if(otherNode!==rootNode&&otherNode.form===rootNode.form){var otherInstance=ReactDOMComponentTree.getInstanceFromNode(otherNode);otherInstance?void 0:_prodInvariant("90"),ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}}return returnValue}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),DisabledInputUtils=__webpack_require__(109),DOMPropertyOperations=__webpack_require__(103),LinkedValueUtils=__webpack_require__(111),ReactDOMComponentTree=__webpack_require__(40),ReactUpdates=__webpack_require__(60),ReactDOMInput=(__webpack_require__(15),__webpack_require__(18),{getHostProps:function(inst,props){var value=LinkedValueUtils.getValue(props),checked=LinkedValueUtils.getChecked(props),hostProps=_assign({type:void 0,step:void 0,min:void 0,max:void 0},DisabledInputUtils.getHostProps(inst,props),{defaultChecked:void 0,defaultValue:void 0,value:null!=value?value:inst._wrapperState.initialValue,checked:null!=checked?checked:inst._wrapperState.initialChecked,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){var defaultValue=props.defaultValue;inst._wrapperState={initialChecked:null!=props.checked?props.checked:props.defaultChecked,initialValue:null!=props.value?props.value:defaultValue,listeners:null,onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props,checked=props.checked;null!=checked&&DOMPropertyOperations.setValueForProperty(ReactDOMComponentTree.getNodeFromInstance(inst),"checked",checked||!1);var node=ReactDOMComponentTree.getNodeFromInstance(inst),value=LinkedValueUtils.getValue(props);if(null!=value){var newValue=""+value;newValue!==node.value&&(node.value=newValue)}else null==props.value&&null!=props.defaultValue&&(node.defaultValue=""+props.defaultValue),null==props.checked&&null!=props.defaultChecked&&(node.defaultChecked=!!props.defaultChecked)},postMountWrapper:function(inst){var props=inst._currentElement.props,node=ReactDOMComponentTree.getNodeFromInstance(inst);switch(props.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":node.value="",node.value=node.defaultValue;break;default:node.value=node.value}var name=node.name;""!==name&&(node.name=""),node.defaultChecked=!node.defaultChecked,node.defaultChecked=!node.defaultChecked,""!==name&&(node.name=name)}});module.exports=ReactDOMInput},function(module,exports,__webpack_require__){"use strict";function _assertSingleLink(inputProps){null!=inputProps.checkedLink&&null!=inputProps.valueLink?_prodInvariant("87"):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.value||null!=inputProps.onChange?_prodInvariant("88"):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.checked||null!=inputProps.onChange?_prodInvariant("89"):void 0}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}var _prodInvariant=__webpack_require__(14),ReactPropTypes=__webpack_require__(34),ReactPropTypeLocations=__webpack_require__(29),ReactPropTypesSecret=__webpack_require__(35),hasReadOnlyValue=(__webpack_require__(15),__webpack_require__(18),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),propTypes={value:function(props,propName,componentName){return!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){return!props[propName]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName))var error=propTypes[propName](props,propName,tagName,ReactPropTypeLocations.prop,null,ReactPropTypesSecret);if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;getDeclarationErrorAddendum(owner)}}},getValue:function(inputProps){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.value):inputProps.value},getChecked:function(inputProps){return inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.value):inputProps.checked},executeOnChange:function(inputProps,event){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.requestChange(event.target.value)):inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.requestChange(event.target.checked)):inputProps.onChange?inputProps.onChange.call(void 0,event):void 0}};module.exports=LinkedValueUtils},function(module,exports,__webpack_require__){"use strict";function flattenChildren(children){var content="";return ReactChildren.forEach(children,function(child){null!=child&&("string"==typeof child||"number"==typeof child?content+=child:didWarnInvalidOptionChildren||(didWarnInvalidOptionChildren=!0))}),content}var _assign=__webpack_require__(11),ReactChildren=__webpack_require__(12),ReactDOMComponentTree=__webpack_require__(40),ReactDOMSelect=__webpack_require__(113),didWarnInvalidOptionChildren=(__webpack_require__(18),!1),ReactDOMOption={mountWrapper:function(inst,props,hostParent){var selectValue=null;if(null!=hostParent){var selectParent=hostParent;"optgroup"===selectParent._tag&&(selectParent=selectParent._hostParent),null!=selectParent&&"select"===selectParent._tag&&(selectValue=ReactDOMSelect.getSelectValueContext(selectParent))}var selected=null;
if(null!=selectValue){var value;if(value=null!=props.value?props.value+"":flattenChildren(props.children),selected=!1,Array.isArray(selectValue)){for(var i=0;i<selectValue.length;i++)if(""+selectValue[i]===value){selected=!0;break}}else selected=""+selectValue===value}inst._wrapperState={selected:selected}},postMountWrapper:function(inst){var props=inst._currentElement.props;if(null!=props.value){var node=ReactDOMComponentTree.getNodeFromInstance(inst);node.setAttribute("value",props.value)}},getHostProps:function(inst,props){var hostProps=_assign({selected:void 0,children:void 0},props);null!=inst._wrapperState.selected&&(hostProps.selected=inst._wrapperState.selected);var content=flattenChildren(props.children);return content&&(hostProps.children=content),hostProps}};module.exports=ReactDOMOption},function(module,exports,__webpack_require__){"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var props=this._currentElement.props,value=LinkedValueUtils.getValue(props);null!=value&&updateOptions(this,Boolean(props.multiple),value)}}function updateOptions(inst,multiple,propValue){var selectedValue,i,options=ReactDOMComponentTree.getNodeFromInstance(inst).options;if(multiple){for(selectedValue={},i=0;i<propValue.length;i++)selectedValue[""+propValue[i]]=!0;for(i=0;i<options.length;i++){var selected=selectedValue.hasOwnProperty(options[i].value);options[i].selected!==selected&&(options[i].selected=selected)}}else{for(selectedValue=""+propValue,i=0;i<options.length;i++)if(options[i].value===selectedValue)return void(options[i].selected=!0);options.length&&(options[0].selected=!0)}}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),returnValue}var _assign=__webpack_require__(11),DisabledInputUtils=__webpack_require__(109),LinkedValueUtils=__webpack_require__(111),ReactDOMComponentTree=__webpack_require__(40),ReactUpdates=__webpack_require__(60),didWarnValueDefaultValue=(__webpack_require__(18),!1),ReactDOMSelect={getHostProps:function(inst,props){return _assign({},DisabledInputUtils.getHostProps(inst,props),{onChange:inst._wrapperState.onChange,value:void 0})},mountWrapper:function(inst,props){var value=LinkedValueUtils.getValue(props);inst._wrapperState={pendingUpdate:!1,initialValue:null!=value?value:props.defaultValue,listeners:null,onChange:_handleChange.bind(inst),wasMultiple:Boolean(props.multiple)},void 0===props.value||void 0===props.defaultValue||didWarnValueDefaultValue||(didWarnValueDefaultValue=!0)},getSelectValueContext:function(inst){return inst._wrapperState.initialValue},postUpdateWrapper:function(inst){var props=inst._currentElement.props;inst._wrapperState.initialValue=void 0;var wasMultiple=inst._wrapperState.wasMultiple;inst._wrapperState.wasMultiple=Boolean(props.multiple);var value=LinkedValueUtils.getValue(props);null!=value?(inst._wrapperState.pendingUpdate=!1,updateOptions(inst,Boolean(props.multiple),value)):wasMultiple!==Boolean(props.multiple)&&(null!=props.defaultValue?updateOptions(inst,Boolean(props.multiple),props.defaultValue):updateOptions(inst,Boolean(props.multiple),props.multiple?[]:""))}};module.exports=ReactDOMSelect},function(module,exports,__webpack_require__){"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);return ReactUpdates.asap(forceUpdateIfMounted,this),returnValue}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),DisabledInputUtils=__webpack_require__(109),LinkedValueUtils=__webpack_require__(111),ReactDOMComponentTree=__webpack_require__(40),ReactUpdates=__webpack_require__(60),ReactDOMTextarea=(__webpack_require__(15),__webpack_require__(18),{getHostProps:function(inst,props){null!=props.dangerouslySetInnerHTML?_prodInvariant("91"):void 0;var hostProps=_assign({},DisabledInputUtils.getHostProps(inst,props),{value:void 0,defaultValue:void 0,children:""+inst._wrapperState.initialValue,onChange:inst._wrapperState.onChange});return hostProps},mountWrapper:function(inst,props){var value=LinkedValueUtils.getValue(props),initialValue=value;if(null==value){var defaultValue=props.defaultValue,children=props.children;null!=children&&(null!=defaultValue?_prodInvariant("92"):void 0,Array.isArray(children)&&(children.length<=1?void 0:_prodInvariant("93"),children=children[0]),defaultValue=""+children),null==defaultValue&&(defaultValue=""),initialValue=defaultValue}inst._wrapperState={initialValue:""+initialValue,listeners:null,onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props,node=ReactDOMComponentTree.getNodeFromInstance(inst),value=LinkedValueUtils.getValue(props);if(null!=value){var newValue=""+value;newValue!==node.value&&(node.value=newValue),null==props.defaultValue&&(node.defaultValue=newValue)}null!=props.defaultValue&&(node.defaultValue=props.defaultValue)},postMountWrapper:function(inst){var node=ReactDOMComponentTree.getNodeFromInstance(inst);node.value=node.textContent}});module.exports=ReactDOMTextarea},function(module,exports,__webpack_require__){"use strict";function makeInsertMarkup(markup,afterNode,toIndex){return{type:ReactMultiChildUpdateTypes.INSERT_MARKUP,content:markup,fromIndex:null,fromNode:null,toIndex:toIndex,afterNode:afterNode}}function makeMove(child,afterNode,toIndex){return{type:ReactMultiChildUpdateTypes.MOVE_EXISTING,content:null,fromIndex:child._mountIndex,fromNode:ReactReconciler.getHostNode(child),toIndex:toIndex,afterNode:afterNode}}function makeRemove(child,node){return{type:ReactMultiChildUpdateTypes.REMOVE_NODE,content:null,fromIndex:child._mountIndex,fromNode:node,toIndex:null,afterNode:null}}function makeSetMarkup(markup){return{type:ReactMultiChildUpdateTypes.SET_MARKUP,content:markup,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function makeTextContent(textContent){return{type:ReactMultiChildUpdateTypes.TEXT_CONTENT,content:textContent,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function enqueue(queue,update){return update&&(queue=queue||[],queue.push(update)),queue}function processQueue(inst,updateQueue){ReactComponentEnvironment.processChildrenUpdates(inst,updateQueue)}var _prodInvariant=__webpack_require__(14),ReactComponentEnvironment=__webpack_require__(116),ReactMultiChildUpdateTypes=(__webpack_require__(117),__webpack_require__(66),__webpack_require__(90)),ReactReconciler=(__webpack_require__(17),__webpack_require__(63)),ReactChildReconciler=__webpack_require__(118),flattenChildren=(__webpack_require__(19),__webpack_require__(128)),ReactMultiChild=(__webpack_require__(15),{Mixin:{_reconcilerInstantiateChildren:function(nestedChildren,transaction,context){return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)},_reconcilerUpdateChildren:function(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context){var nextChildren,selfDebugID=0;return nextChildren=flattenChildren(nextNestedChildrenElements,selfDebugID),ReactChildReconciler.updateChildren(prevChildren,nextChildren,mountImages,removedNodes,transaction,this,this._hostContainerInfo,context,selfDebugID),nextChildren},mountChildren:function(nestedChildren,transaction,context){var children=this._reconcilerInstantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[],index=0;for(var name in children)if(children.hasOwnProperty(name)){var child=children[name],selfDebugID=0,mountImage=ReactReconciler.mountComponent(child,transaction,this,this._hostContainerInfo,context,selfDebugID);child._mountIndex=index++,mountImages.push(mountImage)}return mountImages},updateTextContent:function(nextContent){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,!1);for(var name in prevChildren)prevChildren.hasOwnProperty(name)&&_prodInvariant("118");var updates=[makeTextContent(nextContent)];processQueue(this,updates)},updateMarkup:function(nextMarkup){var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren,!1);for(var name in prevChildren)prevChildren.hasOwnProperty(name)&&_prodInvariant("118");var updates=[makeSetMarkup(nextMarkup)];processQueue(this,updates)},updateChildren:function(nextNestedChildrenElements,transaction,context){this._updateChildren(nextNestedChildrenElements,transaction,context)},_updateChildren:function(nextNestedChildrenElements,transaction,context){var prevChildren=this._renderedChildren,removedNodes={},mountImages=[],nextChildren=this._reconcilerUpdateChildren(prevChildren,nextNestedChildrenElements,mountImages,removedNodes,transaction,context);if(nextChildren||prevChildren){var name,updates=null,nextIndex=0,lastIndex=0,nextMountIndex=0,lastPlacedNode=null;for(name in nextChildren)if(nextChildren.hasOwnProperty(name)){var prevChild=prevChildren&&prevChildren[name],nextChild=nextChildren[name];prevChild===nextChild?(updates=enqueue(updates,this.moveChild(prevChild,lastPlacedNode,nextIndex,lastIndex)),lastIndex=Math.max(prevChild._mountIndex,lastIndex),prevChild._mountIndex=nextIndex):(prevChild&&(lastIndex=Math.max(prevChild._mountIndex,lastIndex)),updates=enqueue(updates,this._mountChildAtIndex(nextChild,mountImages[nextMountIndex],lastPlacedNode,nextIndex,transaction,context)),nextMountIndex++),nextIndex++,lastPlacedNode=ReactReconciler.getHostNode(nextChild)}for(name in removedNodes)removedNodes.hasOwnProperty(name)&&(updates=enqueue(updates,this._unmountChild(prevChildren[name],removedNodes[name])));updates&&processQueue(this,updates),this._renderedChildren=nextChildren}},unmountChildren:function(safely){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren,safely),this._renderedChildren=null},moveChild:function(child,afterNode,toIndex,lastIndex){if(child._mountIndex<lastIndex)return makeMove(child,afterNode,toIndex)},createChild:function(child,afterNode,mountImage){return makeInsertMarkup(mountImage,afterNode,child._mountIndex)},removeChild:function(child,node){return makeRemove(child,node)},_mountChildAtIndex:function(child,mountImage,afterNode,index,transaction,context){return child._mountIndex=index,this.createChild(child,afterNode,mountImage)},_unmountChild:function(child,node){var update=this.removeChild(child,node);return child._mountIndex=null,update}}});module.exports=ReactMultiChild},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),injected=(__webpack_require__(15),!1),ReactComponentEnvironment={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){injected?_prodInvariant("104"):void 0,ReactComponentEnvironment.replaceNodeWithMarkup=environment.replaceNodeWithMarkup,ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment},function(module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=void 0},get:function(key){return key._reactInternalInstance},has:function(key){return void 0!==key._reactInternalInstance},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},function(module,exports,__webpack_require__){(function(process){"use strict";function instantiateChild(childInstances,child,name,selfDebugID){var keyUnique=void 0===childInstances[name];null!=child&&keyUnique&&(childInstances[name]=instantiateReactComponent(child,!0))}var ReactReconciler=__webpack_require__(63),instantiateReactComponent=__webpack_require__(119),shouldUpdateReactComponent=(__webpack_require__(23),__webpack_require__(125)),traverseAllChildren=__webpack_require__(21),ReactChildReconciler=(__webpack_require__(18),{instantiateChildren:function(nestedChildNodes,transaction,context,selfDebugID){if(null==nestedChildNodes)return null;var childInstances={};return traverseAllChildren(nestedChildNodes,instantiateChild,childInstances),childInstances},updateChildren:function(prevChildren,nextChildren,mountImages,removedNodes,transaction,hostParent,hostContainerInfo,context,selfDebugID){if(nextChildren||prevChildren){var name,prevChild;for(name in nextChildren)if(nextChildren.hasOwnProperty(name)){prevChild=prevChildren&&prevChildren[name];var prevElement=prevChild&&prevChild._currentElement,nextElement=nextChildren[name];if(null!=prevChild&&shouldUpdateReactComponent(prevElement,nextElement))ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context),nextChildren[name]=prevChild;else{prevChild&&(removedNodes[name]=ReactReconciler.getHostNode(prevChild),ReactReconciler.unmountComponent(prevChild,!1));var nextChildInstance=instantiateReactComponent(nextElement,!0);nextChildren[name]=nextChildInstance;var nextChildMountImage=ReactReconciler.mountComponent(nextChildInstance,transaction,hostParent,hostContainerInfo,context,selfDebugID);mountImages.push(nextChildMountImage)}}for(name in prevChildren)!prevChildren.hasOwnProperty(name)||nextChildren&&nextChildren.hasOwnProperty(name)||(prevChild=prevChildren[name],removedNodes[name]=ReactReconciler.getHostNode(prevChild),ReactReconciler.unmountComponent(prevChild,!1))}},unmountChildren:function(renderedChildren,safely){for(var name in renderedChildren)if(renderedChildren.hasOwnProperty(name)){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild,safely)}}});module.exports=ReactChildReconciler}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}function isInternalComponentType(type){return"function"==typeof type&&"undefined"!=typeof type.prototype&&"function"==typeof type.prototype.mountComponent&&"function"==typeof type.prototype.receiveComponent}function instantiateReactComponent(node,shouldHaveDebugID){var instance;if(null===node||node===!1)instance=ReactEmptyComponent.create(instantiateReactComponent);else if("object"==typeof node){var element=node;!element||"function"!=typeof element.type&&"string"!=typeof element.type?_prodInvariant("130",null==element.type?element.type:typeof element.type,getDeclarationErrorAddendum(element._owner)):void 0,"string"==typeof element.type?instance=ReactHostComponent.createInternalComponent(element):isInternalComponentType(element.type)?(instance=new element.type(element),instance.getHostNode||(instance.getHostNode=instance.getNativeNode)):instance=new ReactCompositeComponentWrapper(element)}else"string"==typeof node||"number"==typeof node?instance=ReactHostComponent.createInstanceForText(node):_prodInvariant("131",typeof node);return instance._mountIndex=0,instance._mountImage=null,instance}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),ReactCompositeComponent=__webpack_require__(120),ReactEmptyComponent=__webpack_require__(126),ReactHostComponent=__webpack_require__(127),ReactCompositeComponentWrapper=(__webpack_require__(15),__webpack_require__(18),function(element){this.construct(element)});_assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent});module.exports=instantiateReactComponent},function(module,exports,__webpack_require__){"use strict";function StatelessComponent(Component){}function warnIfInvalidElement(Component,element){}function shouldConstruct(Component){return!(!Component.prototype||!Component.prototype.isReactComponent)}function isPureComponent(Component){return!(!Component.prototype||!Component.prototype.isPureReactComponent)}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),ReactComponentEnvironment=__webpack_require__(116),ReactCurrentOwner=__webpack_require__(17),ReactElement=__webpack_require__(16),ReactErrorUtils=__webpack_require__(50),ReactInstanceMap=__webpack_require__(117),ReactNodeTypes=(__webpack_require__(66),__webpack_require__(121)),ReactReconciler=(__webpack_require__(29),__webpack_require__(63)),checkReactTypeSpec=__webpack_require__(122),emptyObject=__webpack_require__(26),shallowEqual=(__webpack_require__(15),__webpack_require__(124)),shouldUpdateReactComponent=__webpack_require__(125),CompositeTypes=(__webpack_require__(18),{ImpureClass:0,PureClass:1,StatelessFunctional:2});StatelessComponent.prototype.render=function(){var Component=ReactInstanceMap.get(this)._currentElement.type,element=Component(this.props,this.context,this.updater);return warnIfInvalidElement(Component,element),element};var nextMountID=1,ReactCompositeComponentMixin={construct:function(element){this._currentElement=element,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(transaction,hostParent,hostContainerInfo,context){this._context=context,this._mountOrder=nextMountID++,this._hostParent=hostParent,this._hostContainerInfo=hostContainerInfo;var renderedElement,publicProps=this._currentElement.props,publicContext=this._processContext(context),Component=this._currentElement.type,updateQueue=transaction.getUpdateQueue(),doConstruct=shouldConstruct(Component),inst=this._constructComponent(doConstruct,publicProps,publicContext,updateQueue);doConstruct||null!=inst&&null!=inst.render?isPureComponent(Component)?this._compositeType=CompositeTypes.PureClass:this._compositeType=CompositeTypes.ImpureClass:(renderedElement=inst,warnIfInvalidElement(Component,renderedElement),null===inst||inst===!1||ReactElement.isValidElement(inst)?void 0:_prodInvariant("105",Component.displayName||Component.name||"Component"),inst=new StatelessComponent(Component),this._compositeType=CompositeTypes.StatelessFunctional);inst.props=publicProps,inst.context=publicContext,inst.refs=emptyObject,inst.updater=updateQueue,this._instance=inst,ReactInstanceMap.set(inst,this);var initialState=inst.state;void 0===initialState&&(inst.state=initialState=null),"object"!=typeof initialState||Array.isArray(initialState)?_prodInvariant("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var markup;return markup=inst.unstable_handleError?this.performInitialMountWithErrorHandling(renderedElement,hostParent,hostContainerInfo,transaction,context):this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context),inst.componentDidMount&&transaction.getReactMountReady().enqueue(inst.componentDidMount,inst),markup},_constructComponent:function(doConstruct,publicProps,publicContext,updateQueue){return this._constructComponentWithoutOwner(doConstruct,publicProps,publicContext,updateQueue)},_constructComponentWithoutOwner:function(doConstruct,publicProps,publicContext,updateQueue){var instanceOrElement,Component=this._currentElement.type;return instanceOrElement=doConstruct?new Component(publicProps,publicContext,updateQueue):Component(publicProps,publicContext,updateQueue)},performInitialMountWithErrorHandling:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var markup,checkpoint=transaction.checkpoint();try{markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}catch(e){transaction.rollback(checkpoint),this._instance.unstable_handleError(e),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),checkpoint=transaction.checkpoint(),this._renderedComponent.unmountComponent(!0),transaction.rollback(checkpoint),markup=this.performInitialMount(renderedElement,hostParent,hostContainerInfo,transaction,context)}return markup},performInitialMount:function(renderedElement,hostParent,hostContainerInfo,transaction,context){var inst=this._instance;inst.componentWillMount&&(inst.componentWillMount(),this._pendingStateQueue&&(inst.state=this._processPendingState(inst.props,inst.context))),void 0===renderedElement&&(renderedElement=this._renderValidatedComponent());var nodeType=ReactNodeTypes.getType(renderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(renderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var selfDebugID=0,markup=ReactReconciler.mountComponent(child,transaction,hostParent,hostContainerInfo,this._processChildContext(context),selfDebugID);return markup},getHostNode:function(){return ReactReconciler.getHostNode(this._renderedComponent)},unmountComponent:function(safely){if(this._renderedComponent){var inst=this._instance;if(inst.componentWillUnmount&&!inst._calledComponentWillUnmount)if(inst._calledComponentWillUnmount=!0,safely){var name=this.getName()+".componentWillUnmount()";ReactErrorUtils.invokeGuardedCallback(name,inst.componentWillUnmount.bind(inst))}else inst.componentWillUnmount();this._renderedComponent&&(ReactReconciler.unmountComponent(this._renderedComponent,safely),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,ReactInstanceMap.remove(inst)}},_maskContext:function(context){var Component=this._currentElement.type,contextTypes=Component.contextTypes;if(!contextTypes)return emptyObject;var maskedContext={};for(var contextName in contextTypes)maskedContext[contextName]=context[contextName];return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context);return maskedContext},_processChildContext:function(currentContext){var Component=this._currentElement.type,inst=this._instance,childContext=inst.getChildContext&&inst.getChildContext();if(childContext){"object"!=typeof Component.childContextTypes?_prodInvariant("107",this.getName()||"ReactCompositeComponent"):void 0;for(var name in childContext)name in Component.childContextTypes?void 0:_prodInvariant("108",this.getName()||"ReactCompositeComponent",name);return _assign({},currentContext,childContext)}return currentContext},_checkContextTypes:function(typeSpecs,values,location){checkReactTypeSpec(typeSpecs,values,location,this.getName(),null,this._debugID)},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement,prevContext=this._context;this._pendingElement=null,this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){null!=this._pendingElement?ReactReconciler.receiveComponent(this,this._pendingElement,transaction,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){var inst=this._instance;null==inst?_prodInvariant("136",this.getName()||"ReactCompositeComponent"):void 0;var nextContext,willReceive=!1;this._context===nextUnmaskedContext?nextContext=inst.context:(nextContext=this._processContext(nextUnmaskedContext),willReceive=!0);var prevProps=prevParentElement.props,nextProps=nextParentElement.props;prevParentElement!==nextParentElement&&(willReceive=!0),willReceive&&inst.componentWillReceiveProps&&inst.componentWillReceiveProps(nextProps,nextContext);var nextState=this._processPendingState(nextProps,nextContext),shouldUpdate=!0;this._pendingForceUpdate||(inst.shouldComponentUpdate?shouldUpdate=inst.shouldComponentUpdate(nextProps,nextState,nextContext):this._compositeType===CompositeTypes.PureClass&&(shouldUpdate=!shallowEqual(prevProps,nextProps)||!shallowEqual(inst.state,nextState))),this._updateBatchNumber=null,shouldUpdate?(this._pendingForceUpdate=!1,this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)):(this._currentElement=nextParentElement,this._context=nextUnmaskedContext,inst.props=nextProps,inst.state=nextState,inst.context=nextContext)},_processPendingState:function(props,context){var inst=this._instance,queue=this._pendingStateQueue,replace=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!queue)return inst.state;if(replace&&1===queue.length)return queue[0];for(var nextState=_assign({},replace?queue[0]:inst.state),i=replace?1:0;i<queue.length;i++){var partial=queue[i];_assign(nextState,"function"==typeof partial?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var prevProps,prevState,prevContext,inst=this._instance,hasComponentDidUpdate=Boolean(inst.componentDidUpdate);hasComponentDidUpdate&&(prevProps=inst.props,prevState=inst.state,prevContext=inst.context),inst.componentWillUpdate&&inst.componentWillUpdate(nextProps,nextState,nextContext),this._currentElement=nextElement,this._context=unmaskedContext,inst.props=nextProps,inst.state=nextState,inst.context=nextContext,this._updateRenderedComponent(transaction,unmaskedContext),hasComponentDidUpdate&&transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent,prevRenderedElement=prevComponentInstance._currentElement,nextRenderedElement=this._renderValidatedComponent();if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement))ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._processChildContext(context));else{var oldHostNode=ReactReconciler.getHostNode(prevComponentInstance);ReactReconciler.unmountComponent(prevComponentInstance,!1);var nodeType=ReactNodeTypes.getType(nextRenderedElement);this._renderedNodeType=nodeType;var child=this._instantiateReactComponent(nextRenderedElement,nodeType!==ReactNodeTypes.EMPTY);this._renderedComponent=child;var selfDebugID=0,nextMarkup=ReactReconciler.mountComponent(child,transaction,this._hostParent,this._hostContainerInfo,this._processChildContext(context),selfDebugID);this._replaceNodeWithMarkup(oldHostNode,nextMarkup,prevComponentInstance)}},_replaceNodeWithMarkup:function(oldHostNode,nextMarkup,prevInstance){ReactComponentEnvironment.replaceNodeWithMarkup(oldHostNode,nextMarkup,prevInstance)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance,renderedComponent=inst.render();return renderedComponent},_renderValidatedComponent:function(){var renderedComponent;if(this._compositeType!==CompositeTypes.StatelessFunctional){ReactCurrentOwner.current=this;try{renderedComponent=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}}else renderedComponent=this._renderValidatedComponentWithoutOwnerOrContext();return null===renderedComponent||renderedComponent===!1||ReactElement.isValidElement(renderedComponent)?void 0:_prodInvariant("109",this.getName()||"ReactCompositeComponent"),renderedComponent},attachRef:function(ref,component){var inst=this.getPublicInstance();null==inst?_prodInvariant("110"):void 0;var publicComponentInstance=component.getPublicInstance(),refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=publicComponentInstance},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type,constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){var inst=this._instance;return this._compositeType===CompositeTypes.StatelessFunctional?null:inst},_instantiateReactComponent:null},ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),ReactElement=__webpack_require__(16),ReactNodeTypes=(__webpack_require__(15),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(node){return null===node||node===!1?ReactNodeTypes.EMPTY:ReactElement.isValidElement(node)?"function"==typeof node.type?ReactNodeTypes.COMPOSITE:ReactNodeTypes.HOST:void _prodInvariant("26",node)}});module.exports=ReactNodeTypes},function(module,exports,__webpack_require__){(function(process){"use strict";function checkReactTypeSpec(typeSpecs,values,location,componentName,element,debugID){for(var typeSpecName in typeSpecs)if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{"function"!=typeof typeSpecs[typeSpecName]?_prodInvariant("84",componentName||"React class",ReactPropTypeLocationNames[location],typeSpecName):void 0,error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0}}}var _prodInvariant=__webpack_require__(14),ReactPropTypeLocationNames=__webpack_require__(31),ReactPropTypesSecret=__webpack_require__(35),loggedTypeFailures=(__webpack_require__(15),__webpack_require__(18),{});module.exports=checkReactTypeSpec}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";function isNative(fn){var funcToString=Function.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var source=funcToString.call(fn);return reIsNative.test(source)}catch(err){return!1}}function getKeyFromID(id){return"."+id}function getIDFromKey(key){return parseInt(key.substr(1),10)}function get(id){if(canUseCollections)return itemMap.get(id);var key=getKeyFromID(id);return itemByKey[key]}function remove(id){if(canUseCollections)itemMap["delete"](id);else{var key=getKeyFromID(id);delete itemByKey[key]}}function create(id,element,parentID){var item={element:element,parentID:parentID,text:null,childIDs:[],isMounted:!1,updateCount:0};if(canUseCollections)itemMap.set(id,item);else{var key=getKeyFromID(id);itemByKey[key]=item}}function addRoot(id){if(canUseCollections)rootIDSet.add(id);else{var key=getKeyFromID(id);rootByKey[key]=!0}}function removeRoot(id){if(canUseCollections)rootIDSet["delete"](id);else{var key=getKeyFromID(id);delete rootByKey[key]}}function getRegisteredIDs(){return canUseCollections?Array.from(itemMap.keys()):Object.keys(itemByKey).map(getIDFromKey)}function getRootIDs(){return canUseCollections?Array.from(rootIDSet.keys()):Object.keys(rootByKey).map(getIDFromKey)}function purgeDeep(id){var item=get(id);if(item){var childIDs=item.childIDs;remove(id),childIDs.forEach(purgeDeep)}}function describeComponentFrame(name,source,ownerName){return"\n    in "+name+(source?" (at "+source.fileName.replace(/^.*[\\\/]/,"")+":"+source.lineNumber+")":ownerName?" (created by "+ownerName+")":"")}function getDisplayName(element){return null==element?"#empty":"string"==typeof element||"number"==typeof element?"#text":"string"==typeof element.type?element.type:element.type.displayName||element.type.name||"Unknown";
}function describeID(id){var ownerName,name=ReactComponentTreeHook.getDisplayName(id),element=ReactComponentTreeHook.getElement(id),ownerID=ReactComponentTreeHook.getOwnerID(id);return ownerID&&(ownerName=ReactComponentTreeHook.getDisplayName(ownerID)),describeComponentFrame(name,element&&element._source,ownerName)}var itemMap,rootIDSet,itemByKey,rootByKey,_prodInvariant=__webpack_require__(14),ReactCurrentOwner=__webpack_require__(17),canUseCollections=(__webpack_require__(15),__webpack_require__(18),"function"==typeof Array.from&&"function"==typeof Map&&isNative(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&isNative(Map.prototype.keys)&&"function"==typeof Set&&isNative(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&isNative(Set.prototype.keys));canUseCollections?(itemMap=new Map,rootIDSet=new Set):(itemByKey={},rootByKey={});var unmountedIDs=[],ReactComponentTreeHook={onSetChildren:function(id,nextChildIDs){var item=get(id);item.childIDs=nextChildIDs;for(var i=0;i<nextChildIDs.length;i++){var nextChildID=nextChildIDs[i],nextChild=get(nextChildID);nextChild?void 0:_prodInvariant("140"),null==nextChild.childIDs&&"object"==typeof nextChild.element&&null!=nextChild.element?_prodInvariant("141"):void 0,nextChild.isMounted?void 0:_prodInvariant("71"),null==nextChild.parentID&&(nextChild.parentID=id),nextChild.parentID!==id?_prodInvariant("142",nextChildID,nextChild.parentID,id):void 0}},onBeforeMountComponent:function(id,element,parentID){create(id,element,parentID)},onBeforeUpdateComponent:function(id,element){var item=get(id);item&&item.isMounted&&(item.element=element)},onMountComponent:function(id){var item=get(id);item.isMounted=!0;var isRoot=0===item.parentID;isRoot&&addRoot(id)},onUpdateComponent:function(id){var item=get(id);item&&item.isMounted&&item.updateCount++},onUnmountComponent:function(id){var item=get(id);if(item){item.isMounted=!1;var isRoot=0===item.parentID;isRoot&&removeRoot(id)}unmountedIDs.push(id)},purgeUnmountedComponents:function(){if(!ReactComponentTreeHook._preventPurging){for(var i=0;i<unmountedIDs.length;i++){var id=unmountedIDs[i];purgeDeep(id)}unmountedIDs.length=0}},isMounted:function(id){var item=get(id);return!!item&&item.isMounted},getCurrentStackAddendum:function(topElement){var info="";if(topElement){var type=topElement.type,name="function"==typeof type?type.displayName||type.name:type,owner=topElement._owner;info+=describeComponentFrame(name||"Unknown",topElement._source,owner&&owner.getName())}var currentOwner=ReactCurrentOwner.current,id=currentOwner&&currentOwner._debugID;return info+=ReactComponentTreeHook.getStackAddendumByID(id)},getStackAddendumByID:function(id){for(var info="";id;)info+=describeID(id),id=ReactComponentTreeHook.getParentID(id);return info},getChildIDs:function(id){var item=get(id);return item?item.childIDs:[]},getDisplayName:function(id){var element=ReactComponentTreeHook.getElement(id);return element?getDisplayName(element):null},getElement:function(id){var item=get(id);return item?item.element:null},getOwnerID:function(id){var element=ReactComponentTreeHook.getElement(id);return element&&element._owner?element._owner._debugID:null},getParentID:function(id){var item=get(id);return item?item.parentID:null},getSource:function(id){var item=get(id),element=item?item.element:null,source=null!=element?element._source:null;return source},getText:function(id){var element=ReactComponentTreeHook.getElement(id);return"string"==typeof element?element:"number"==typeof element?""+element:null},getUpdateCount:function(id){var item=get(id);return item?item.updateCount:0},getRegisteredIDs:getRegisteredIDs,getRootIDs:getRootIDs};module.exports=ReactComponentTreeHook},function(module,exports){"use strict";function is(x,y){return x===y?0!==x||0!==y||1/x===1/y:x!==x&&y!==y}function shallowEqual(objA,objB){if(is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual},function(module,exports){"use strict";function shouldUpdateReactComponent(prevElement,nextElement){var prevEmpty=null===prevElement||prevElement===!1,nextEmpty=null===nextElement||nextElement===!1;if(prevEmpty||nextEmpty)return prevEmpty===nextEmpty;var prevType=typeof prevElement,nextType=typeof nextElement;return"string"===prevType||"number"===prevType?"string"===nextType||"number"===nextType:"object"===nextType&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key}module.exports=shouldUpdateReactComponent},function(module,exports){"use strict";var emptyComponentFactory,ReactEmptyComponentInjection={injectEmptyComponentFactory:function(factory){emptyComponentFactory=factory}},ReactEmptyComponent={create:function(instantiate){return emptyComponentFactory(instantiate)}};ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent},function(module,exports,__webpack_require__){"use strict";function createInternalComponent(element){return genericComponentClass?void 0:_prodInvariant("111",element.type),new genericComponentClass(element)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),genericComponentClass=(__webpack_require__(15),null),tagToComponentClass={},textComponentClass=null,ReactHostComponentInjection={injectGenericComponentClass:function(componentClass){genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass},injectComponentClasses:function(componentClasses){_assign(tagToComponentClass,componentClasses)}},ReactHostComponent={createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactHostComponentInjection};module.exports=ReactHostComponent},function(module,exports,__webpack_require__){(function(process){"use strict";function flattenSingleChildIntoContext(traverseContext,child,name,selfDebugID){if(traverseContext&&"object"==typeof traverseContext){var result=traverseContext,keyUnique=void 0===result[name];keyUnique&&null!=child&&(result[name]=child)}}function flattenChildren(children,selfDebugID){if(null==children)return children;var result={};return traverseAllChildren(children,flattenSingleChildIntoContext,result),result}var traverseAllChildren=(__webpack_require__(23),__webpack_require__(21));__webpack_require__(18);module.exports=flattenChildren}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction(),this.renderToStaticMarkup=renderToStaticMarkup,this.useCreateElement=!1,this.updateQueue=new ReactServerUpdateQueue(this)}var _assign=__webpack_require__(11),PooledClass=__webpack_require__(13),Transaction=__webpack_require__(67),ReactServerUpdateQueue=(__webpack_require__(66),__webpack_require__(130)),TRANSACTION_WRAPPERS=[],noopCallbackQueue={enqueue:function(){}},Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return noopCallbackQueue},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};_assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function warnNoop(publicInstance,callerName){}var ReactUpdateQueue=__webpack_require__(131),ReactServerUpdateQueue=(__webpack_require__(67),__webpack_require__(18),function(){function ReactServerUpdateQueue(transaction){_classCallCheck(this,ReactServerUpdateQueue),this.transaction=transaction}return ReactServerUpdateQueue.prototype.isMounted=function(publicInstance){return!1},ReactServerUpdateQueue.prototype.enqueueCallback=function(publicInstance,callback,callerName){this.transaction.isInTransaction()&&ReactUpdateQueue.enqueueCallback(publicInstance,callback,callerName)},ReactServerUpdateQueue.prototype.enqueueForceUpdate=function(publicInstance){this.transaction.isInTransaction()?ReactUpdateQueue.enqueueForceUpdate(publicInstance):warnNoop(publicInstance,"forceUpdate")},ReactServerUpdateQueue.prototype.enqueueReplaceState=function(publicInstance,completeState){this.transaction.isInTransaction()?ReactUpdateQueue.enqueueReplaceState(publicInstance,completeState):warnNoop(publicInstance,"replaceState")},ReactServerUpdateQueue.prototype.enqueueSetState=function(publicInstance,partialState){this.transaction.isInTransaction()?ReactUpdateQueue.enqueueSetState(publicInstance,partialState):warnNoop(publicInstance,"setState")},ReactServerUpdateQueue}());module.exports=ReactServerUpdateQueue},function(module,exports,__webpack_require__){"use strict";function enqueueUpdate(internalInstance){ReactUpdates.enqueueUpdate(internalInstance)}function formatUnexpectedArgument(arg){var type=typeof arg;if("object"!==type)return type;var displayName=arg.constructor&&arg.constructor.name||type,keys=Object.keys(arg);return keys.length>0&&keys.length<20?displayName+" (keys: "+keys.join(", ")+")":displayName}function getInternalInstanceReadyForUpdate(publicInstance,callerName){var internalInstance=ReactInstanceMap.get(publicInstance);if(!internalInstance){return null}return internalInstance}var _prodInvariant=__webpack_require__(14),ReactInstanceMap=(__webpack_require__(17),__webpack_require__(117)),ReactUpdates=(__webpack_require__(66),__webpack_require__(60)),ReactUpdateQueue=(__webpack_require__(15),__webpack_require__(18),{isMounted:function(publicInstance){var internalInstance=ReactInstanceMap.get(publicInstance);return!!internalInstance&&!!internalInstance._renderedComponent},enqueueCallback:function(publicInstance,callback,callerName){ReactUpdateQueue.validateCallback(callback,callerName);var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);return internalInstance?(internalInstance._pendingCallbacks?internalInstance._pendingCallbacks.push(callback):internalInstance._pendingCallbacks=[callback],void enqueueUpdate(internalInstance)):null},enqueueCallbackInternal:function(internalInstance,callback){internalInstance._pendingCallbacks?internalInstance._pendingCallbacks.push(callback):internalInstance._pendingCallbacks=[callback],enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");internalInstance&&(internalInstance._pendingForceUpdate=!0,enqueueUpdate(internalInstance))},enqueueReplaceState:function(publicInstance,completeState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");internalInstance&&(internalInstance._pendingStateQueue=[completeState],internalInstance._pendingReplaceState=!0,enqueueUpdate(internalInstance))},enqueueSetState:function(publicInstance,partialState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(internalInstance){var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState),enqueueUpdate(internalInstance)}},enqueueElementInternal:function(internalInstance,nextElement,nextContext){internalInstance._pendingElement=nextElement,internalInstance._context=nextContext,enqueueUpdate(internalInstance)},validateCallback:function(callback,callerName){callback&&"function"!=typeof callback?_prodInvariant("122",callerName,formatUnexpectedArgument(callback)):void 0}});module.exports=ReactUpdateQueue},function(module,exports,__webpack_require__){"use strict";var emptyFunction=(__webpack_require__(11),__webpack_require__(19)),validateDOMNesting=(__webpack_require__(18),emptyFunction);module.exports=validateDOMNesting},function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(11),DOMLazyTree=__webpack_require__(80),ReactDOMComponentTree=__webpack_require__(40),ReactDOMEmptyComponent=function(instantiate){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};_assign(ReactDOMEmptyComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){var domID=hostContainerInfo._idCounter++;this._domID=domID,this._hostParent=hostParent,this._hostContainerInfo=hostContainerInfo;var nodeValue=" react-empty: "+this._domID+" ";if(transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument,node=ownerDocument.createComment(nodeValue);return ReactDOMComponentTree.precacheNode(this,node),DOMLazyTree(node)}return transaction.renderToStaticMarkup?"":"<!--"+nodeValue+"-->"},receiveComponent:function(){},getHostNode:function(){return ReactDOMComponentTree.getNodeFromInstance(this)},unmountComponent:function(){ReactDOMComponentTree.uncacheNode(this)}}),module.exports=ReactDOMEmptyComponent},function(module,exports,__webpack_require__){"use strict";function getLowestCommonAncestor(instA,instB){"_hostNode"in instA?void 0:_prodInvariant("33"),"_hostNode"in instB?void 0:_prodInvariant("33");for(var depthA=0,tempA=instA;tempA;tempA=tempA._hostParent)depthA++;for(var depthB=0,tempB=instB;tempB;tempB=tempB._hostParent)depthB++;for(;depthA-depthB>0;)instA=instA._hostParent,depthA--;for(;depthB-depthA>0;)instB=instB._hostParent,depthB--;for(var depth=depthA;depth--;){if(instA===instB)return instA;instA=instA._hostParent,instB=instB._hostParent}return null}function isAncestor(instA,instB){"_hostNode"in instA?void 0:_prodInvariant("35"),"_hostNode"in instB?void 0:_prodInvariant("35");for(;instB;){if(instB===instA)return!0;instB=instB._hostParent}return!1}function getParentInstance(inst){return"_hostNode"in inst?void 0:_prodInvariant("36"),inst._hostParent}function traverseTwoPhase(inst,fn,arg){for(var path=[];inst;)path.push(inst),inst=inst._hostParent;var i;for(i=path.length;i-- >0;)fn(path[i],!1,arg);for(i=0;i<path.length;i++)fn(path[i],!0,arg)}function traverseEnterLeave(from,to,fn,argFrom,argTo){for(var common=from&&to?getLowestCommonAncestor(from,to):null,pathFrom=[];from&&from!==common;)pathFrom.push(from),from=from._hostParent;for(var pathTo=[];to&&to!==common;)pathTo.push(to),to=to._hostParent;var i;for(i=0;i<pathFrom.length;i++)fn(pathFrom[i],!0,argFrom);for(i=pathTo.length;i-- >0;)fn(pathTo[i],!1,argTo)}var _prodInvariant=__webpack_require__(14);__webpack_require__(15);module.exports={isAncestor:isAncestor,getLowestCommonAncestor:getLowestCommonAncestor,getParentInstance:getParentInstance,traverseTwoPhase:traverseTwoPhase,traverseEnterLeave:traverseEnterLeave}},function(module,exports,__webpack_require__){"use strict";var _prodInvariant=__webpack_require__(14),_assign=__webpack_require__(11),DOMChildrenOperations=__webpack_require__(79),DOMLazyTree=__webpack_require__(80),ReactDOMComponentTree=__webpack_require__(40),escapeTextContentForBrowser=__webpack_require__(85),ReactDOMTextComponent=(__webpack_require__(15),__webpack_require__(132),function(text){this._currentElement=text,this._stringText=""+text,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});_assign(ReactDOMTextComponent.prototype,{mountComponent:function(transaction,hostParent,hostContainerInfo,context){var domID=hostContainerInfo._idCounter++,openingValue=" react-text: "+domID+" ",closingValue=" /react-text ";if(this._domID=domID,this._hostParent=hostParent,transaction.useCreateElement){var ownerDocument=hostContainerInfo._ownerDocument,openingComment=ownerDocument.createComment(openingValue),closingComment=ownerDocument.createComment(closingValue),lazyTree=DOMLazyTree(ownerDocument.createDocumentFragment());return DOMLazyTree.queueChild(lazyTree,DOMLazyTree(openingComment)),this._stringText&&DOMLazyTree.queueChild(lazyTree,DOMLazyTree(ownerDocument.createTextNode(this._stringText))),DOMLazyTree.queueChild(lazyTree,DOMLazyTree(closingComment)),ReactDOMComponentTree.precacheNode(this,openingComment),this._closingComment=closingComment,lazyTree}var escapedText=escapeTextContentForBrowser(this._stringText);return transaction.renderToStaticMarkup?escapedText:"<!--"+openingValue+"-->"+escapedText+"<!--"+closingValue+"-->"},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;var commentNodes=this.getHostNode();DOMChildrenOperations.replaceDelimitedText(commentNodes[0],commentNodes[1],nextStringText)}}},getHostNode:function(){var hostNode=this._commentNodes;if(hostNode)return hostNode;if(!this._closingComment)for(var openingComment=ReactDOMComponentTree.getNodeFromInstance(this),node=openingComment.nextSibling;;){if(null==node?_prodInvariant("67",this._domID):void 0,8===node.nodeType&&" /react-text "===node.nodeValue){this._closingComment=node;break}node=node.nextSibling}return hostNode=[this._hostNode,this._closingComment],this._commentNodes=hostNode,hostNode},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,ReactDOMComponentTree.uncacheNode(this)}}),module.exports=ReactDOMTextComponent},function(module,exports,__webpack_require__){"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var _assign=__webpack_require__(11),ReactUpdates=__webpack_require__(60),Transaction=__webpack_require__(67),emptyFunction=__webpack_require__(19),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];_assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(callback,a,b,c,d,e){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,alreadyBatchingUpdates?callback(a,b,c,d,e):transaction.perform(callback,null,a,b,c,d,e)}};module.exports=ReactDefaultBatchingStrategy},function(module,exports,__webpack_require__){"use strict";function findParent(inst){for(;inst._hostParent;)inst=inst._hostParent;var rootNode=ReactDOMComponentTree.getNodeFromInstance(inst),container=rootNode.parentNode;return ReactDOMComponentTree.getClosestInstanceFromNode(container)}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType,this.nativeEvent=nativeEvent,this.ancestors=[]}function handleTopLevelImpl(bookKeeping){var nativeEventTarget=getEventTarget(bookKeeping.nativeEvent),targetInst=ReactDOMComponentTree.getClosestInstanceFromNode(nativeEventTarget),ancestor=targetInst;do bookKeeping.ancestors.push(ancestor),ancestor=ancestor&&findParent(ancestor);while(ancestor);for(var i=0;i<bookKeeping.ancestors.length;i++)targetInst=bookKeeping.ancestors[i],ReactEventListener._handleTopLevel(bookKeeping.topLevelType,targetInst,bookKeeping.nativeEvent,getEventTarget(bookKeeping.nativeEvent))}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var _assign=__webpack_require__(11),EventListener=__webpack_require__(138),ExecutionEnvironment=__webpack_require__(53),PooledClass=__webpack_require__(13),ReactDOMComponentTree=__webpack_require__(40),ReactUpdates=__webpack_require__(60),getEventTarget=__webpack_require__(68),getUnboundedScrollPosition=__webpack_require__(139);_assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){var element=handle;return element?EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType)):null},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){var element=handle;return element?EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType)):null},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(ReactEventListener._enabled){var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}}};module.exports=ReactEventListener},function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(19),EventListener={listen:function(target,eventType,callback){return target.addEventListener?(target.addEventListener(eventType,callback,!1),{remove:function(){target.removeEventListener(eventType,callback,!1)}}):target.attachEvent?(target.attachEvent("on"+eventType,callback),{remove:function(){target.detachEvent("on"+eventType,callback)}}):void 0},capture:function(target,eventType,callback){return target.addEventListener?(target.addEventListener(eventType,callback,!0),{remove:function(){target.removeEventListener(eventType,callback,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener},function(module,exports){"use strict";function getUnboundedScrollPosition(scrollable){return scrollable.Window&&scrollable instanceof scrollable.Window?{x:scrollable.pageXOffset||scrollable.document.documentElement.scrollLeft,y:scrollable.pageYOffset||scrollable.document.documentElement.scrollTop}:{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},function(module,exports,__webpack_require__){"use strict";var DOMProperty=__webpack_require__(41),EventPluginHub=__webpack_require__(47),EventPluginUtils=__webpack_require__(49),ReactComponentEnvironment=__webpack_require__(116),ReactClass=__webpack_require__(28),ReactEmptyComponent=__webpack_require__(126),ReactBrowserEventEmitter=__webpack_require__(105),ReactHostComponent=__webpack_require__(127),ReactUpdates=__webpack_require__(60),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventPluginUtils:EventPluginUtils.injection,EventEmitter:ReactBrowserEventEmitter.injection,HostComponent:ReactHostComponent.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},function(module,exports,__webpack_require__){"use strict";function ReactReconcileTransaction(useCreateElement){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=useCreateElement}var _assign=__webpack_require__(11),CallbackQueue=__webpack_require__(61),PooledClass=__webpack_require__(13),ReactBrowserEventEmitter=__webpack_require__(105),ReactInputSelection=__webpack_require__(142),Transaction=(__webpack_require__(66),__webpack_require__(67)),ReactUpdateQueue=__webpack_require__(131),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return ReactUpdateQueue},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(checkpoint){this.reactMountReady.rollback(checkpoint)},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};_assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction},function(module,exports,__webpack_require__){"use strict";function isInDocument(node){return containsNode(document.documentElement,node)}var ReactDOMSelection=__webpack_require__(143),containsNode=__webpack_require__(145),focusNode=__webpack_require__(94),getActiveElement=__webpack_require__(148),ReactInputSelection={hasSelectionCapabilities:function(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&("input"===nodeName&&"text"===elem.type||"textarea"===nodeName||"true"===elem.contentEditable)},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement(),priorFocusedElem=priorSelectionInformation.focusedElem,priorSelectionRange=priorSelectionInformation.selectionRange;curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)&&(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)&&ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange),focusNode(priorFocusedElem))},getSelection:function(input){var selection;if("selectionStart"in input)selection={start:input.selectionStart,end:input.selectionEnd};else if(document.selection&&input.nodeName&&"input"===input.nodeName.toLowerCase()){var range=document.selection.createRange();range.parentElement()===input&&(selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)})}else selection=ReactDOMSelection.getOffsets(input);return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start,end=offsets.end;if(void 0===end&&(end=start),"selectionStart"in input)input.selectionStart=start,input.selectionEnd=Math.min(end,input.value.length);else if(document.selection&&input.nodeName&&"input"===input.nodeName.toLowerCase()){var range=input.createTextRange();range.collapse(!0),range.moveStart("character",start),range.moveEnd("character",end-start),range.select()}else ReactDOMSelection.setOffsets(input,offsets)}};module.exports=ReactInputSelection},function(module,exports,__webpack_require__){"use strict";function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection,selectedRange=selection.createRange(),selectedLength=selectedRange.text.length,fromStart=selectedRange.duplicate();fromStart.moveToElementText(node),fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length,endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||0===selection.rangeCount)return null;var anchorNode=selection.anchorNode,anchorOffset=selection.anchorOffset,focusNode=selection.focusNode,focusOffset=selection.focusOffset,currentRange=selection.getRangeAt(0);try{currentRange.startContainer.nodeType,currentRange.endContainer.nodeType}catch(e){return null}var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset),rangeLength=isSelectionCollapsed?0:currentRange.toString().length,tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node),tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset),start=isTempRangeCollapsed?0:tempRange.toString().length,end=start+rangeLength,detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset),detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var start,end,range=document.selection.createRange().duplicate();void 0===offsets.end?(start=offsets.start,end=start):offsets.start>offsets.end?(start=offsets.end,end=offsets.start):(start=offsets.start,end=offsets.end),range.moveToElementText(node),range.moveStart("character",start),range.setEndPoint("EndToStart",range),range.moveEnd("character",end-start),range.select()}function setModernOffsets(node,offsets){if(window.getSelection){var selection=window.getSelection(),length=node[getTextContentAccessor()].length,start=Math.min(offsets.start,length),end=void 0===offsets.end?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start,start=temp}var startMarker=getNodeForCharacterOffset(node,start),endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset),selection.removeAllRanges(),start>end?(selection.addRange(range),selection.extend(endMarker.node,endMarker.offset)):(range.setEnd(endMarker.node,endMarker.offset),selection.addRange(range))}}}var ExecutionEnvironment=__webpack_require__(53),getNodeForCharacterOffset=__webpack_require__(144),getTextContentAccessor=__webpack_require__(55),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},function(module,exports){"use strict";function getLeafNode(node){for(;node&&node.firstChild;)node=node.firstChild;return node}function getSiblingNode(node){for(;node;){if(node.nextSibling)return node.nextSibling;node=node.parentNode}}function getNodeForCharacterOffset(root,offset){for(var node=getLeafNode(root),nodeStart=0,nodeEnd=0;node;){if(3===node.nodeType){if(nodeEnd=nodeStart+node.textContent.length,nodeStart<=offset&&nodeEnd>=offset)return{node:node,offset:offset-nodeStart};nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},function(module,exports,__webpack_require__){"use strict";function containsNode(outerNode,innerNode){return!(!outerNode||!innerNode)&&(outerNode===innerNode||!isTextNode(outerNode)&&(isTextNode(innerNode)?containsNode(outerNode,innerNode.parentNode):"contains"in outerNode?outerNode.contains(innerNode):!!outerNode.compareDocumentPosition&&!!(16&outerNode.compareDocumentPosition(innerNode))))}var isTextNode=__webpack_require__(146);module.exports=containsNode},function(module,exports,__webpack_require__){"use strict";function isTextNode(object){
return isNode(object)&&3==object.nodeType}var isNode=__webpack_require__(147);module.exports=isTextNode},function(module,exports){"use strict";function isNode(object){var doc=object?object.ownerDocument||object:document,defaultView=doc.defaultView||window;return!(!object||!("function"==typeof defaultView.Node?object instanceof defaultView.Node:"object"==typeof object&&"number"==typeof object.nodeType&&"string"==typeof object.nodeName))}module.exports=isNode},function(module,exports){"use strict";function getActiveElement(doc){if(doc=doc||("undefined"!=typeof document?document:void 0),"undefined"==typeof doc)return null;try{return doc.activeElement||doc.body}catch(e){return doc.body}}module.exports=getActiveElement},function(module,exports){"use strict";var NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},ATTRS={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},SVGDOMPropertyConfig={Properties:{},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{}};Object.keys(ATTRS).forEach(function(key){SVGDOMPropertyConfig.Properties[key]=0,ATTRS[key]&&(SVGDOMPropertyConfig.DOMAttributeNames[key]=ATTRS[key])}),module.exports=SVGDOMPropertyConfig},function(module,exports,__webpack_require__){"use strict";function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node))return{start:node.selectionStart,end:node.selectionEnd};if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent,nativeEventTarget){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementInst,nativeEvent,nativeEventTarget);return syntheticEvent.type="select",syntheticEvent.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent),syntheticEvent}return null}var EventConstants=__webpack_require__(45),EventPropagators=__webpack_require__(46),ExecutionEnvironment=__webpack_require__(53),ReactDOMComponentTree=__webpack_require__(40),ReactInputSelection=__webpack_require__(142),SyntheticEvent=__webpack_require__(57),getActiveElement=__webpack_require__(148),isTextInputElement=__webpack_require__(70),keyOf=__webpack_require__(32),shallowEqual=__webpack_require__(124),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementInst=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){if(!hasListener)return null;var targetNode=targetInst?ReactDOMComponentTree.getNodeFromInstance(targetInst):window;switch(topLevelType){case topLevelTypes.topFocus:(isTextInputElement(targetNode)||"true"===targetNode.contentEditable)&&(activeElement=targetNode,activeElementInst=targetInst,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementInst=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(nativeEvent,nativeEventTarget);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(nativeEvent,nativeEventTarget)}return null},didPutListener:function(inst,registrationName,listener){registrationName===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin},function(module,exports,__webpack_require__){"use strict";function getDictionaryKey(inst){return"."+inst._rootNodeID}var _prodInvariant=__webpack_require__(14),EventConstants=__webpack_require__(45),EventListener=__webpack_require__(138),EventPropagators=__webpack_require__(46),ReactDOMComponentTree=__webpack_require__(40),SyntheticAnimationEvent=__webpack_require__(152),SyntheticClipboardEvent=__webpack_require__(153),SyntheticEvent=__webpack_require__(57),SyntheticFocusEvent=__webpack_require__(154),SyntheticKeyboardEvent=__webpack_require__(155),SyntheticMouseEvent=__webpack_require__(73),SyntheticDragEvent=__webpack_require__(158),SyntheticTouchEvent=__webpack_require__(159),SyntheticTransitionEvent=__webpack_require__(160),SyntheticUIEvent=__webpack_require__(74),SyntheticWheelEvent=__webpack_require__(161),emptyFunction=__webpack_require__(19),getEventCharCode=__webpack_require__(156),keyOf=(__webpack_require__(15),__webpack_require__(32)),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:keyOf({onAnimationEnd:!0}),captured:keyOf({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:keyOf({onAnimationIteration:!0}),captured:keyOf({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:keyOf({onAnimationStart:!0}),captured:keyOf({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:keyOf({onInvalid:!0}),captured:keyOf({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:keyOf({onTransitionEnd:!0}),captured:keyOf({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topAnimationEnd:eventTypes.animationEnd,topAnimationIteration:eventTypes.animationIteration,topAnimationStart:eventTypes.animationStart,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topInvalid:eventTypes.invalid,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topTransitionEnd:eventTypes.transitionEnd,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,targetInst,nativeEvent,nativeEventTarget){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig)return null;var EventConstructor;switch(topLevelType){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topInvalid:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:EventConstructor=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(nativeEvent))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:EventConstructor=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:EventConstructor=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===nativeEvent.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:EventConstructor=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:EventConstructor=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:EventConstructor=SyntheticTouchEvent;break;case topLevelTypes.topAnimationEnd:case topLevelTypes.topAnimationIteration:case topLevelTypes.topAnimationStart:EventConstructor=SyntheticAnimationEvent;break;case topLevelTypes.topTransitionEnd:EventConstructor=SyntheticTransitionEvent;break;case topLevelTypes.topScroll:EventConstructor=SyntheticUIEvent;break;case topLevelTypes.topWheel:EventConstructor=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:EventConstructor=SyntheticClipboardEvent}EventConstructor?void 0:_prodInvariant("86",topLevelType);var event=EventConstructor.getPooled(dispatchConfig,targetInst,nativeEvent,nativeEventTarget);return EventPropagators.accumulateTwoPhaseDispatches(event),event},didPutListener:function(inst,registrationName,listener){if(registrationName===ON_CLICK_KEY){var key=getDictionaryKey(inst),node=ReactDOMComponentTree.getNodeFromInstance(inst);onClickListeners[key]||(onClickListeners[key]=EventListener.listen(node,"click",emptyFunction))}},willDeleteListener:function(inst,registrationName){if(registrationName===ON_CLICK_KEY){var key=getDictionaryKey(inst);onClickListeners[key].remove(),delete onClickListeners[key]}}};module.exports=SimpleEventPlugin},function(module,exports,__webpack_require__){"use strict";function SyntheticAnimationEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(57),AnimationEventInterface={animationName:null,elapsedTime:null,pseudoElement:null};SyntheticEvent.augmentClass(SyntheticAnimationEvent,AnimationEventInterface),module.exports=SyntheticAnimationEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(57),ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(74),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(74),getEventCharCode=__webpack_require__(156),getEventKey=__webpack_require__(157),getEventModifierState=__webpack_require__(76),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){return"keypress"===event.type?getEventCharCode(event):0},keyCode:function(event){return"keydown"===event.type||"keyup"===event.type?event.keyCode:0},which:function(event){return"keypress"===event.type?getEventCharCode(event):"keydown"===event.type||"keyup"===event.type?event.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent},function(module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode,keyCode=nativeEvent.keyCode;return"charCode"in nativeEvent?(charCode=nativeEvent.charCode,0===charCode&&13===keyCode&&(charCode=13)):charCode=keyCode,charCode>=32||13===charCode?charCode:0}module.exports=getEventCharCode},function(module,exports,__webpack_require__){"use strict";function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if("Unidentified"!==key)return key}if("keypress"===nativeEvent.type){var charCode=getEventCharCode(nativeEvent);return 13===charCode?"Enter":String.fromCharCode(charCode)}return"keydown"===nativeEvent.type||"keyup"===nativeEvent.type?translateToKey[nativeEvent.keyCode]||"Unidentified":""}var getEventCharCode=__webpack_require__(156),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey},function(module,exports,__webpack_require__){"use strict";function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticMouseEvent=__webpack_require__(73),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(74),getEventModifierState=__webpack_require__(76),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticTransitionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(57),TransitionEventInterface={propertyName:null,elapsedTime:null,pseudoElement:null};SyntheticEvent.augmentClass(SyntheticTransitionEvent,TransitionEventInterface),module.exports=SyntheticTransitionEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){return SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticMouseEvent=__webpack_require__(73),WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent},function(module,exports,__webpack_require__){"use strict";function firstDifferenceIndex(string1,string2){for(var minLen=Math.min(string1.length,string2.length),i=0;i<minLen;i++)if(string1.charAt(i)!==string2.charAt(i))return i;return string1.length===string2.length?-1:minLen}function getReactRootElementInContainer(container){return container?container.nodeType===DOC_NODE_TYPE?container.documentElement:container.firstChild:null}function internalGetID(node){return node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function mountComponentIntoNode(wrapperInstance,container,transaction,shouldReuseMarkup,context){var markerName;if(ReactFeatureFlags.logTopLevelRenders){var wrappedElement=wrapperInstance._currentElement.props,type=wrappedElement.type;markerName="React mount: "+("string"==typeof type?type:type.displayName||type.name),console.time(markerName)}var markup=ReactReconciler.mountComponent(wrapperInstance,transaction,null,ReactDOMContainerInfo(wrapperInstance,container),context,0);markerName&&console.timeEnd(markerName),wrapperInstance._renderedComponent._topLevelWrapper=wrapperInstance,ReactMount._mountImageIntoNode(markup,container,wrapperInstance,shouldReuseMarkup,transaction)}function batchedMountComponentIntoNode(componentInstance,container,shouldReuseMarkup,context){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled(!shouldReuseMarkup&&ReactDOMFeatureFlags.useCreateElement);transaction.perform(mountComponentIntoNode,null,componentInstance,container,transaction,shouldReuseMarkup,context),ReactUpdates.ReactReconcileTransaction.release(transaction)}function unmountComponentFromNode(instance,container,safely){for(ReactReconciler.unmountComponent(instance,safely),container.nodeType===DOC_NODE_TYPE&&(container=container.documentElement);container.lastChild;)container.removeChild(container.lastChild)}function hasNonRootReactChild(container){var rootEl=getReactRootElementInContainer(container);if(rootEl){var inst=ReactDOMComponentTree.getInstanceFromNode(rootEl);return!(!inst||!inst._hostParent)}}function isValidContainer(node){return!(!node||node.nodeType!==ELEMENT_NODE_TYPE&&node.nodeType!==DOC_NODE_TYPE&&node.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)}function getHostRootInstanceInContainer(container){var rootEl=getReactRootElementInContainer(container),prevHostInstance=rootEl&&ReactDOMComponentTree.getInstanceFromNode(rootEl);return prevHostInstance&&!prevHostInstance._hostParent?prevHostInstance:null}function getTopLevelWrapperInContainer(container){var root=getHostRootInstanceInContainer(container);return root?root._hostContainerInfo._topLevelWrapper:null}var _prodInvariant=__webpack_require__(14),DOMLazyTree=__webpack_require__(80),DOMProperty=__webpack_require__(41),ReactBrowserEventEmitter=__webpack_require__(105),ReactDOMComponentTree=(__webpack_require__(17),__webpack_require__(40)),ReactDOMContainerInfo=__webpack_require__(163),ReactDOMFeatureFlags=__webpack_require__(164),ReactElement=__webpack_require__(16),ReactFeatureFlags=__webpack_require__(62),ReactInstanceMap=__webpack_require__(117),ReactMarkupChecksum=(__webpack_require__(66),
__webpack_require__(165)),ReactReconciler=__webpack_require__(63),ReactUpdateQueue=__webpack_require__(131),ReactUpdates=__webpack_require__(60),emptyObject=__webpack_require__(26),instantiateReactComponent=__webpack_require__(119),setInnerHTML=(__webpack_require__(15),__webpack_require__(82)),shouldUpdateReactComponent=__webpack_require__(125),ATTR_NAME=(__webpack_require__(18),DOMProperty.ID_ATTRIBUTE_NAME),ROOT_ATTR_NAME=DOMProperty.ROOT_ATTRIBUTE_NAME,ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,instancesByReactRootID={},topLevelRootCounter=1,TopLevelWrapper=function(){this.rootID=topLevelRootCounter++};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,nextContext,container,callback){return ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement,nextContext),callback&&ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}),prevComponent},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup,context){isValidContainer(container)?void 0:_prodInvariant("37"),ReactBrowserEventEmitter.ensureScrollValueMonitoring();var componentInstance=instantiateReactComponent(nextElement,!1);ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,container,shouldReuseMarkup,context);var wrapperID=componentInstance._instance.rootID;return instancesByReactRootID[wrapperID]=componentInstance,componentInstance},renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){return null!=parentComponent&&ReactInstanceMap.has(parentComponent)?void 0:_prodInvariant("38"),ReactMount._renderSubtreeIntoContainer(parentComponent,nextElement,container,callback)},_renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){ReactUpdateQueue.validateCallback(callback,"ReactDOM.render"),ReactElement.isValidElement(nextElement)?void 0:_prodInvariant("39","string"==typeof nextElement?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof nextElement?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=nextElement&&void 0!==nextElement.props?" This may be caused by unintentionally loading two independent copies of React.":"");var nextContext,nextWrappedElement=ReactElement(TopLevelWrapper,null,null,null,null,null,nextElement);if(parentComponent){var parentInst=ReactInstanceMap.get(parentComponent);nextContext=parentInst._processChildContext(parentInst._context)}else nextContext=emptyObject;var prevComponent=getTopLevelWrapperInContainer(container);if(prevComponent){var prevWrappedElement=prevComponent._currentElement,prevElement=prevWrappedElement.props;if(shouldUpdateReactComponent(prevElement,nextElement)){var publicInst=prevComponent._renderedComponent.getPublicInstance(),updatedCallback=callback&&function(){callback.call(publicInst)};return ReactMount._updateRootComponent(prevComponent,nextWrappedElement,nextContext,container,updatedCallback),publicInst}ReactMount.unmountComponentAtNode(container)}var reactRootElement=getReactRootElementInContainer(container),containerHasReactMarkup=reactRootElement&&!!internalGetID(reactRootElement),containerHasNonRootReactChild=hasNonRootReactChild(container),shouldReuseMarkup=containerHasReactMarkup&&!prevComponent&&!containerHasNonRootReactChild,component=ReactMount._renderNewRootComponent(nextWrappedElement,container,shouldReuseMarkup,nextContext)._renderedComponent.getPublicInstance();return callback&&callback.call(component),component},render:function(nextElement,container,callback){return ReactMount._renderSubtreeIntoContainer(null,nextElement,container,callback)},unmountComponentAtNode:function(container){isValidContainer(container)?void 0:_prodInvariant("40");var prevComponent=getTopLevelWrapperInContainer(container);if(!prevComponent){hasNonRootReactChild(container),1===container.nodeType&&container.hasAttribute(ROOT_ATTR_NAME);return!1}return delete instancesByReactRootID[prevComponent._instance.rootID],ReactUpdates.batchedUpdates(unmountComponentFromNode,prevComponent,container,!1),!0},_mountImageIntoNode:function(markup,container,instance,shouldReuseMarkup,transaction){if(isValidContainer(container)?void 0:_prodInvariant("41"),shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement))return void ReactDOMComponentTree.precacheNode(instance,rootElement);var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var normalizedMarkup=markup,diffIndex=firstDifferenceIndex(normalizedMarkup,rootMarkup),difference=" (client) "+normalizedMarkup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);container.nodeType===DOC_NODE_TYPE?_prodInvariant("42",difference):void 0}if(container.nodeType===DOC_NODE_TYPE?_prodInvariant("43"):void 0,transaction.useCreateElement){for(;container.lastChild;)container.removeChild(container.lastChild);DOMLazyTree.insertTreeBefore(container,markup,null)}else setInnerHTML(container,markup),ReactDOMComponentTree.precacheNode(instance,container.firstChild)}};module.exports=ReactMount},function(module,exports,__webpack_require__){"use strict";function ReactDOMContainerInfo(topLevelWrapper,node){var info={_topLevelWrapper:topLevelWrapper,_idCounter:1,_ownerDocument:node?node.nodeType===DOC_NODE_TYPE?node:node.ownerDocument:null,_node:node,_tag:node?node.nodeName.toLowerCase():null,_namespaceURI:node?node.namespaceURI:null};return info}var DOC_NODE_TYPE=(__webpack_require__(132),9);module.exports=ReactDOMContainerInfo},function(module,exports){"use strict";var ReactDOMFeatureFlags={useCreateElement:!0};module.exports=ReactDOMFeatureFlags},function(module,exports,__webpack_require__){"use strict";var adler32=__webpack_require__(166),TAG_END=/\/?>/,COMMENT_START=/^<\!\-\-/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);return COMMENT_START.test(markup)?markup:markup.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'"$&')},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},function(module,exports){"use strict";function adler32(data){for(var a=1,b=0,i=0,l=data.length,m=l&-4;i<m;){for(var n=Math.min(i+4096,m);i<n;i+=4)b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3));a%=MOD,b%=MOD}for(;i<l;i++)b+=a+=data.charCodeAt(i);return a%=MOD,b%=MOD,a|b<<16}var MOD=65521;module.exports=adler32},function(module,exports,__webpack_require__){"use strict";function findDOMNode(componentOrElement){if(null==componentOrElement)return null;if(1===componentOrElement.nodeType)return componentOrElement;var inst=ReactInstanceMap.get(componentOrElement);return inst?(inst=getHostComponentFromComposite(inst),inst?ReactDOMComponentTree.getNodeFromInstance(inst):null):void("function"==typeof componentOrElement.render?_prodInvariant("44"):_prodInvariant("45",Object.keys(componentOrElement)))}var _prodInvariant=__webpack_require__(14),ReactDOMComponentTree=(__webpack_require__(17),__webpack_require__(40)),ReactInstanceMap=__webpack_require__(117),getHostComponentFromComposite=__webpack_require__(168);__webpack_require__(15),__webpack_require__(18);module.exports=findDOMNode},function(module,exports,__webpack_require__){"use strict";function getHostComponentFromComposite(inst){for(var type;(type=inst._renderedNodeType)===ReactNodeTypes.COMPOSITE;)inst=inst._renderedComponent;return type===ReactNodeTypes.HOST?inst._renderedComponent:type===ReactNodeTypes.EMPTY?null:void 0}var ReactNodeTypes=__webpack_require__(121);module.exports=getHostComponentFromComposite},function(module,exports,__webpack_require__){"use strict";var ReactMount=__webpack_require__(162);module.exports=ReactMount.renderSubtreeIntoContainer},function(module,exports,__webpack_require__){function Rainbow(){"use strict";function setColours(spectrum){if(spectrum.length<2)throw new Error("Rainbow must have two or more colours.");var increment=(maxNum-minNum)/(spectrum.length-1),firstGradient=new ColourGradient;firstGradient.setGradient(spectrum[0],spectrum[1]),firstGradient.setNumberRange(minNum,minNum+increment),gradients=[firstGradient];for(var i=1;i<spectrum.length-1;i++){var colourGradient=new ColourGradient;colourGradient.setGradient(spectrum[i],spectrum[i+1]),colourGradient.setNumberRange(minNum+increment*i,minNum+increment*(i+1)),gradients[i]=colourGradient}colours=spectrum}var gradients=null,minNum=0,maxNum=100,colours=["ff0000","ffff00","00ff00","0000ff"];setColours(colours),this.setSpectrum=function(){return setColours(arguments),this},this.setSpectrumByArray=function(array){return setColours(array),this},this.colourAt=function(number){if(isNaN(number))throw new TypeError(number+" is not a number");if(1===gradients.length)return gradients[0].colourAt(number);var segment=(maxNum-minNum)/gradients.length,index=Math.min(Math.floor((Math.max(number,minNum)-minNum)/segment),gradients.length-1);return gradients[index].colourAt(number)},this.colorAt=this.colourAt,this.setNumberRange=function(minNumber,maxNumber){if(!(maxNumber>minNumber))throw new RangeError("maxNumber ("+maxNumber+") is not greater than minNumber ("+minNumber+")");return minNum=minNumber,maxNum=maxNumber,setColours(colours),this}}function ColourGradient(){"use strict";function calcHex(number,channelStart_Base16,channelEnd_Base16){var num=number;num<minNum&&(num=minNum),num>maxNum&&(num=maxNum);var numRange=maxNum-minNum,cStart_Base10=parseInt(channelStart_Base16,16),cEnd_Base10=parseInt(channelEnd_Base16,16),cPerUnit=(cEnd_Base10-cStart_Base10)/numRange,c_Base10=Math.round(cPerUnit*(num-minNum)+cStart_Base10);return formatHex(c_Base10.toString(16))}function formatHex(hex){return 1===hex.length?"0"+hex:hex}function isHexColour(string){var regex=/^#?[0-9a-fA-F]{6}$/i;return regex.test(string)}function getHexColour(string){if(isHexColour(string))return string.substring(string.length-6,string.length);var name=string.toLowerCase();if(colourNames.hasOwnProperty(name))return colourNames[name];throw new Error(string+" is not a valid colour.")}var startColour="ff0000",endColour="0000ff",minNum=0,maxNum=100;this.setGradient=function(colourStart,colourEnd){startColour=getHexColour(colourStart),endColour=getHexColour(colourEnd)},this.setNumberRange=function(minNumber,maxNumber){if(!(maxNumber>minNumber))throw new RangeError("maxNumber ("+maxNumber+") is not greater than minNumber ("+minNumber+")");minNum=minNumber,maxNum=maxNumber},this.colourAt=function(number){return calcHex(number,startColour.substring(0,2),endColour.substring(0,2))+calcHex(number,startColour.substring(2,4),endColour.substring(2,4))+calcHex(number,startColour.substring(4,6),endColour.substring(4,6))};var colourNames={aliceblue:"F0F8FF",antiquewhite:"FAEBD7",aqua:"00FFFF",aquamarine:"7FFFD4",azure:"F0FFFF",beige:"F5F5DC",bisque:"FFE4C4",black:"000000",blanchedalmond:"FFEBCD",blue:"0000FF",blueviolet:"8A2BE2",brown:"A52A2A",burlywood:"DEB887",cadetblue:"5F9EA0",chartreuse:"7FFF00",chocolate:"D2691E",coral:"FF7F50",cornflowerblue:"6495ED",cornsilk:"FFF8DC",crimson:"DC143C",cyan:"00FFFF",darkblue:"00008B",darkcyan:"008B8B",darkgoldenrod:"B8860B",darkgray:"A9A9A9",darkgreen:"006400",darkgrey:"A9A9A9",darkkhaki:"BDB76B",darkmagenta:"8B008B",darkolivegreen:"556B2F",darkorange:"FF8C00",darkorchid:"9932CC",darkred:"8B0000",darksalmon:"E9967A",darkseagreen:"8FBC8F",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkslategrey:"2F4F4F",darkturquoise:"00CED1",darkviolet:"9400D3",deeppink:"FF1493",deepskyblue:"00BFFF",dimgray:"696969",dimgrey:"696969",dodgerblue:"1E90FF",firebrick:"B22222",floralwhite:"FFFAF0",forestgreen:"228B22",fuchsia:"FF00FF",gainsboro:"DCDCDC",ghostwhite:"F8F8FF",gold:"FFD700",goldenrod:"DAA520",gray:"808080",green:"008000",greenyellow:"ADFF2F",grey:"808080",honeydew:"F0FFF0",hotpink:"FF69B4",indianred:"CD5C5C",indigo:"4B0082",ivory:"FFFFF0",khaki:"F0E68C",lavender:"E6E6FA",lavenderblush:"FFF0F5",lawngreen:"7CFC00",lemonchiffon:"FFFACD",lightblue:"ADD8E6",lightcoral:"F08080",lightcyan:"E0FFFF",lightgoldenrodyellow:"FAFAD2",lightgray:"D3D3D3",lightgreen:"90EE90",lightgrey:"D3D3D3",lightpink:"FFB6C1",lightsalmon:"FFA07A",lightseagreen:"20B2AA",lightskyblue:"87CEFA",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"B0C4DE",lightyellow:"FFFFE0",lime:"00FF00",limegreen:"32CD32",linen:"FAF0E6",magenta:"FF00FF",maroon:"800000",mediumaquamarine:"66CDAA",mediumblue:"0000CD",mediumorchid:"BA55D3",mediumpurple:"9370DB",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumspringgreen:"00FA9A",mediumturquoise:"48D1CC",mediumvioletred:"C71585",midnightblue:"191970",mintcream:"F5FFFA",mistyrose:"FFE4E1",moccasin:"FFE4B5",navajowhite:"FFDEAD",navy:"000080",oldlace:"FDF5E6",olive:"808000",olivedrab:"6B8E23",orange:"FFA500",orangered:"FF4500",orchid:"DA70D6",palegoldenrod:"EEE8AA",palegreen:"98FB98",paleturquoise:"AFEEEE",palevioletred:"DB7093",papayawhip:"FFEFD5",peachpuff:"FFDAB9",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",powderblue:"B0E0E6",purple:"800080",red:"FF0000",rosybrown:"BC8F8F",royalblue:"4169E1",saddlebrown:"8B4513",salmon:"FA8072",sandybrown:"F4A460",seagreen:"2E8B57",seashell:"FFF5EE",sienna:"A0522D",silver:"C0C0C0",skyblue:"87CEEB",slateblue:"6A5ACD",slategray:"708090",slategrey:"708090",snow:"FFFAFA",springgreen:"00FF7F",steelblue:"4682B4",tan:"D2B48C",teal:"008080",thistle:"D8BFD8",tomato:"FF6347",turquoise:"40E0D0",violet:"EE82EE",wheat:"F5DEB3",white:"FFFFFF",whitesmoke:"F5F5F5",yellow:"FFFF00",yellowgreen:"9ACD32"}}module.exports=Rainbow},function(module,exports,__webpack_require__){(function(global){"use strict";function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}var React=global.React||__webpack_require__(172),ReactDOM=global.ReactDOM||__webpack_require__(324);__webpack_require__(325);var scaleEnum=__webpack_require__(328),infiniteHelpers=__webpack_require__(329),_isFinite=__webpack_require__(334),preloadType=__webpack_require__(335).preloadType,checkProps=checkProps=__webpack_require__(336),Infinite=React.createClass({displayName:"Infinite",propTypes:{children:React.PropTypes.any,handleScroll:React.PropTypes.func,preloadBatchSize:preloadType,preloadAdditionalHeight:preloadType,elementHeight:React.PropTypes.oneOfType([React.PropTypes.number,React.PropTypes.arrayOf(React.PropTypes.number)]).isRequired,containerHeight:React.PropTypes.number,useWindowAsScrollContainer:React.PropTypes.bool,displayBottomUpwards:React.PropTypes.bool.isRequired,infiniteLoadBeginEdgeOffset:React.PropTypes.number,onInfiniteLoad:React.PropTypes.func,loadingSpinnerDelegate:React.PropTypes.node,isInfiniteLoading:React.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:React.PropTypes.number,className:React.PropTypes.string},statics:{containerHeightScaleFactor:function(factor){if(!_isFinite(factor))throw new Error("The scale factor must be a number.");return{type:scaleEnum.CONTAINER_HEIGHT_SCALE_FACTOR,amount:factor}}},computedProps:{},utils:{},shouldAttachToBottom:!1,preservedScrollState:0,loadingSpinnerHeight:0,deprecationWarned:!1,getDefaultProps:function(){return{handleScroll:function(){},useWindowAsScrollContainer:!1,onInfiniteLoad:function(){},loadingSpinnerDelegate:React.createElement("div",null),displayBottomUpwards:!1,isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150,className:""}},getInitialState:function(){var nextInternalState=this.recomputeInternalStateFromProps(this.props);this.computedProps=nextInternalState.computedProps,this.utils=nextInternalState.utils,this.shouldAttachToBottom=this.props.displayBottomUpwards;var state=nextInternalState.newState;return state.scrollTimeout=void 0,state.isScrolling=!1,state},generateComputedProps:function(props){var containerHeight=props.containerHeight,preloadBatchSize=props.preloadBatchSize,preloadAdditionalHeight=props.preloadAdditionalHeight,oldProps=_objectWithoutProperties(props,["containerHeight","preloadBatchSize","preloadAdditionalHeight"]),newProps={};containerHeight="number"==typeof containerHeight?containerHeight:0,newProps.containerHeight=props.useWindowAsScrollContainer?window.innerHeight:containerHeight,void 0!==oldProps.infiniteLoadBeginBottomOffset&&(newProps.infiniteLoadBeginEdgeOffset=oldProps.infiniteLoadBeginBottomOffset,this.deprecationWarned||(console.error("Warning: React Infinite's infiniteLoadBeginBottomOffset prop\n        has been deprecated as of 0.6.0. Please use infiniteLoadBeginEdgeOffset.\n        Because this is a rather descriptive name, a simple find and replace\n        should suffice."),this.deprecationWarned=!0));var defaultPreloadBatchSizeScaling={type:scaleEnum.CONTAINER_HEIGHT_SCALE_FACTOR,amount:.5},batchSize=preloadBatchSize&&preloadBatchSize.type?preloadBatchSize:defaultPreloadBatchSizeScaling;"number"==typeof preloadBatchSize?newProps.preloadBatchSize=preloadBatchSize:batchSize.type===scaleEnum.CONTAINER_HEIGHT_SCALE_FACTOR?newProps.preloadBatchSize=newProps.containerHeight*batchSize.amount:newProps.preloadBatchSize=0;var defaultPreloadAdditionalHeightScaling={type:scaleEnum.CONTAINER_HEIGHT_SCALE_FACTOR,amount:1},additionalHeight=preloadAdditionalHeight&&preloadAdditionalHeight.type?preloadAdditionalHeight:defaultPreloadAdditionalHeightScaling;return"number"==typeof preloadAdditionalHeight?newProps.preloadAdditionalHeight=preloadAdditionalHeight:additionalHeight.type===scaleEnum.CONTAINER_HEIGHT_SCALE_FACTOR?newProps.preloadAdditionalHeight=newProps.containerHeight*additionalHeight.amount:newProps.preloadAdditionalHeight=0,Object.assign(oldProps,newProps)},generateComputedUtilityFunctions:function(props){var _this=this,utilities={};return utilities.getLoadingSpinnerHeight=function(){var loadingSpinnerHeight=0;if(_this.refs&&_this.refs.loadingSpinner){var loadingSpinnerNode=ReactDOM.findDOMNode(_this.refs.loadingSpinner);loadingSpinnerHeight=loadingSpinnerNode.offsetHeight||0}return loadingSpinnerHeight},props.useWindowAsScrollContainer?(utilities.subscribeToScrollListener=function(){window.addEventListener("scroll",_this.infiniteHandleScroll)},utilities.unsubscribeFromScrollListener=function(){window.removeEventListener("scroll",_this.infiniteHandleScroll)},utilities.nodeScrollListener=function(){},utilities.getScrollTop=function(){return window.scrollY},utilities.setScrollTop=function(top){window.scroll(window.scrollX,top)},utilities.scrollShouldBeIgnored=function(){return!1},utilities.buildScrollableStyle=function(){return{}}):(utilities.subscribeToScrollListener=function(){},utilities.unsubscribeFromScrollListener=function(){},utilities.nodeScrollListener=this.infiniteHandleScroll,utilities.getScrollTop=function(){var scrollable;return _this.refs&&_this.refs.scrollable&&(scrollable=ReactDOM.findDOMNode(_this.refs.scrollable)),scrollable?scrollable.scrollTop:0},utilities.setScrollTop=function(top){var scrollable;_this.refs&&_this.refs.scrollable&&(scrollable=ReactDOM.findDOMNode(_this.refs.scrollable)),scrollable&&(scrollable.scrollTop=top)},utilities.scrollShouldBeIgnored=function(event){return event.target!==ReactDOM.findDOMNode(_this.refs.scrollable)},utilities.buildScrollableStyle=function(){return{height:_this.computedProps.containerHeight,overflowX:"hidden",overflowY:"scroll",WebkitOverflowScrolling:"touch"}}),utilities},recomputeInternalStateFromProps:function(props){checkProps(props);var computedProps=this.generateComputedProps(props),utils=this.generateComputedUtilityFunctions(props),newState={};return newState.numberOfChildren=React.Children.count(computedProps.children),newState.infiniteComputer=infiniteHelpers.createInfiniteComputer(computedProps.elementHeight,computedProps.children,computedProps.displayBottomUpwards),void 0!==computedProps.isInfiniteLoading&&(newState.isInfiniteLoading=computedProps.isInfiniteLoading),newState.preloadBatchSize=computedProps.preloadBatchSize,newState.preloadAdditionalHeight=computedProps.preloadAdditionalHeight,newState=Object.assign(newState,infiniteHelpers.recomputeApertureStateFromOptionsAndScrollTop(newState,utils.getScrollTop())),{computedProps:computedProps,utils:utils,newState:newState}},componentWillReceiveProps:function(nextProps){var nextInternalState=this.recomputeInternalStateFromProps(nextProps);this.computedProps=nextInternalState.computedProps,this.utils=nextInternalState.utils,this.setState(nextInternalState.newState)},componentWillUpdate:function(){this.props.displayBottomUpwards&&(this.preservedScrollState=this.utils.getScrollTop()-this.loadingSpinnerHeight)},componentDidUpdate:function(prevProps,prevState){if(this.loadingSpinnerHeight=this.utils.getLoadingSpinnerHeight(),this.props.displayBottomUpwards){var lowestScrollTop=this.getLowestPossibleScrollTop();this.shouldAttachToBottom&&this.utils.getScrollTop()<lowestScrollTop?this.utils.setScrollTop(lowestScrollTop):prevProps.isInfiniteLoading&&!this.props.isInfiniteLoading&&this.utils.setScrollTop(this.state.infiniteComputer.getTotalScrollableHeight()-prevState.infiniteComputer.getTotalScrollableHeight()+this.preservedScrollState)}if(React.Children.count(this.props.children)!==React.Children.count(prevProps.children)){var newApertureState=infiniteHelpers.recomputeApertureStateFromOptionsAndScrollTop(this.state,this.utils.getScrollTop());this.setState(newApertureState)}},componentDidMount:function(){if(this.utils.subscribeToScrollListener(),_isFinite(this.computedProps.infiniteLoadBeginEdgeOffset)&&this.state.infiniteComputer.getTotalScrollableHeight()<this.computedProps.containerHeight&&(this.setState({isInfiniteLoading:!0}),this.computedProps.onInfiniteLoad()),this.props.displayBottomUpwards){var lowestScrollTop=this.getLowestPossibleScrollTop();this.shouldAttachToBottom&&this.utils.getScrollTop()<lowestScrollTop&&this.utils.setScrollTop(lowestScrollTop)}},componentWillUnmount:function(){this.utils.unsubscribeFromScrollListener()},infiniteHandleScroll:function(e){this.utils.scrollShouldBeIgnored(e)||(this.computedProps.handleScroll(ReactDOM.findDOMNode(this.refs.scrollable)),this.handleScroll(this.utils.getScrollTop()))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var that=this,scrollTimeout=setTimeout(function(){that.setState({isScrolling:!1,scrollTimeout:void 0})},this.computedProps.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:scrollTimeout})},getLowestPossibleScrollTop:function(){return this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight},passedEdgeForInfiniteScroll:function(scrollTop){return this.computedProps.displayBottomUpwards?!this.shouldAttachToBottom&&scrollTop<this.computedProps.infiniteLoadBeginEdgeOffset:scrollTop>this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight-this.computedProps.infiniteLoadBeginEdgeOffset},handleScroll:function(scrollTop){this.shouldAttachToBottom=this.computedProps.displayBottomUpwards&&scrollTop>=this.getLowestPossibleScrollTop(),this.manageScrollTimeouts();var newApertureState=infiniteHelpers.recomputeApertureStateFromOptionsAndScrollTop(this.state,scrollTop);this.passedEdgeForInfiniteScroll(scrollTop)&&!this.state.isInfiniteLoading?(this.setState(Object.assign({},newApertureState,{isInfiniteLoading:!0})),this.computedProps.onInfiniteLoad()):this.setState(newApertureState)},buildHeightStyle:function(height){return{width:"100%",height:Math.ceil(height)}},render:function(){var displayables;displayables=React.Children.count(this.computedProps.children)>1?this.computedProps.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1):this.computedProps.children;var infiniteScrollStyles={};this.state.isScrolling&&(infiniteScrollStyles.pointerEvents="none");var topSpacerHeight=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),bottomSpacerHeight=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);if(this.computedProps.displayBottomUpwards){var heightDifference=this.computedProps.containerHeight-this.state.infiniteComputer.getTotalScrollableHeight();heightDifference>0&&(topSpacerHeight=heightDifference-this.loadingSpinnerHeight)}var loadingSpinner=void 0===this.computedProps.infiniteLoadBeginEdgeOffset?null:React.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.computedProps.loadingSpinnerDelegate:null);return React.createElement("div",{className:this.computedProps.className,ref:"scrollable",style:this.utils.buildScrollableStyle(),onScroll:this.utils.nodeScrollListener},React.createElement("div",{ref:"smoothScrollingWrapper",style:infiniteScrollStyles},React.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(topSpacerHeight)}),this.computedProps.displayBottomUpwards&&loadingSpinner,displayables,!this.computedProps.displayBottomUpwards&&loadingSpinner,React.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(bottomSpacerHeight)})))}});module.exports=Infinite,global.Infinite=Infinite}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(173)},function(module,exports,__webpack_require__){"use strict";var ReactDOM=__webpack_require__(174),ReactDOMServer=__webpack_require__(314),ReactIsomorphic=__webpack_require__(318),assign=__webpack_require__(209),deprecated=__webpack_require__(323),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React},function(module,exports,__webpack_require__){"use strict";var ReactCurrentOwner=__webpack_require__(175),ReactDOMTextComponent=__webpack_require__(176),ReactDefaultInjection=__webpack_require__(241),ReactInstanceHandles=__webpack_require__(215),ReactMount=__webpack_require__(198),ReactPerf=__webpack_require__(188),ReactReconciler=__webpack_require__(220),ReactUpdates=__webpack_require__(224),ReactVersion=__webpack_require__(312),findDOMNode=__webpack_require__(261),renderSubtreeIntoContainer=__webpack_require__(313);__webpack_require__(195);ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});module.exports=React},function(module,exports){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},function(module,exports,__webpack_require__){"use strict";var DOMChildrenOperations=__webpack_require__(177),DOMPropertyOperations=__webpack_require__(192),ReactComponentBrowserEnvironment=__webpack_require__(196),ReactMount=__webpack_require__(198),assign=__webpack_require__(209),escapeTextContentForBrowser=__webpack_require__(191),setTextContent=__webpack_require__(190),ReactDOMTextComponent=(__webpack_require__(240),function(props){});assign(ReactDOMTextComponent.prototype,{construct:function(text){this._currentElement=text,this._stringText=""+text,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(rootID,transaction,context){if(this._rootNodeID=rootID,transaction.useCreateElement){var ownerDocument=context[ReactMount.ownerDocumentContextKey],el=ownerDocument.createElement("span");return DOMPropertyOperations.setAttributeForID(el,rootID),ReactMount.getID(el),setTextContent(el,this._stringText),el}var escapedText=escapeTextContentForBrowser(this._stringText);return transaction.renderToStaticMarkup?escapedText:"<span "+DOMPropertyOperations.createMarkupForID(rootID)+">"+escapedText+"</span>"},receiveComponent:function(nextText,transaction){if(nextText!==this._currentElement){this._currentElement=nextText;var nextStringText=""+nextText;if(nextStringText!==this._stringText){this._stringText=nextStringText;var node=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(node,nextStringText)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent},function(module,exports,__webpack_require__){"use strict";function insertChildAt(parentNode,childNode,index){var beforeChild=index>=parentNode.childNodes.length?null:parentNode.childNodes.item(index);parentNode.insertBefore(childNode,beforeChild)}var Danger=__webpack_require__(178),ReactMultiChildUpdateTypes=__webpack_require__(186),ReactPerf=__webpack_require__(188),setInnerHTML=__webpack_require__(189),setTextContent=__webpack_require__(190),invariant=__webpack_require__(183),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(updates,markupList){for(var update,initialChildren=null,updatedChildren=null,i=0;i<updates.length;i++)if(update=updates[i],update.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||update.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var updatedIndex=update.fromIndex,updatedChild=update.parentNode.childNodes[updatedIndex],parentID=update.parentID;updatedChild?void 0:invariant(!1),initialChildren=initialChildren||{},initialChildren[parentID]=initialChildren[parentID]||[],initialChildren[parentID][updatedIndex]=updatedChild,updatedChildren=updatedChildren||[],updatedChildren.push(updatedChild)}var renderedMarkup;if(renderedMarkup=markupList.length&&"string"==typeof markupList[0]?Danger.dangerouslyRenderMarkup(markupList):markupList,updatedChildren)for(var j=0;j<updatedChildren.length;j++)updatedChildren[j].parentNode.removeChild(updatedChildren[j]);for(var k=0;k<updates.length;k++)switch(update=updates[k],update.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(update.parentNode,renderedMarkup[update.markupIndex],update.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(update.parentNode,initialChildren[update.parentID][update.fromIndex],update.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(update.parentNode,update.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(update.parentNode,update.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}
}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations},function(module,exports,__webpack_require__){"use strict";function getNodeName(markup){return markup.substring(1,markup.indexOf(" "))}var ExecutionEnvironment=__webpack_require__(179),createNodesFromMarkup=__webpack_require__(180),emptyFunction=__webpack_require__(185),getMarkupWrap=__webpack_require__(184),invariant=__webpack_require__(183),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(markupList){ExecutionEnvironment.canUseDOM?void 0:invariant(!1);for(var nodeName,markupByNodeName={},i=0;i<markupList.length;i++)markupList[i]?void 0:invariant(!1),nodeName=getNodeName(markupList[i]),nodeName=getMarkupWrap(nodeName)?nodeName:"*",markupByNodeName[nodeName]=markupByNodeName[nodeName]||[],markupByNodeName[nodeName][i]=markupList[i];var resultList=[],resultListAssignmentCount=0;for(nodeName in markupByNodeName)if(markupByNodeName.hasOwnProperty(nodeName)){var resultIndex,markupListByNodeName=markupByNodeName[nodeName];for(resultIndex in markupListByNodeName)if(markupListByNodeName.hasOwnProperty(resultIndex)){var markup=markupListByNodeName[resultIndex];markupListByNodeName[resultIndex]=markup.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+resultIndex+'" ')}for(var renderNodes=createNodesFromMarkup(markupListByNodeName.join(""),emptyFunction),j=0;j<renderNodes.length;++j){var renderNode=renderNodes[j];renderNode.hasAttribute&&renderNode.hasAttribute(RESULT_INDEX_ATTR)&&(resultIndex=+renderNode.getAttribute(RESULT_INDEX_ATTR),renderNode.removeAttribute(RESULT_INDEX_ATTR),resultList.hasOwnProperty(resultIndex)?invariant(!1):void 0,resultList[resultIndex]=renderNode,resultListAssignmentCount+=1)}}return resultListAssignmentCount!==resultList.length?invariant(!1):void 0,resultList.length!==markupList.length?invariant(!1):void 0,resultList},dangerouslyReplaceNodeWithMarkup:function(oldChild,markup){ExecutionEnvironment.canUseDOM?void 0:invariant(!1),markup?void 0:invariant(!1),"html"===oldChild.tagName.toLowerCase()?invariant(!1):void 0;var newChild;newChild="string"==typeof markup?createNodesFromMarkup(markup,emptyFunction)[0]:markup,oldChild.parentNode.replaceChild(newChild,oldChild)}};module.exports=Danger},function(module,exports){"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},function(module,exports,__webpack_require__){"use strict";function getNodeName(markup){var nodeNameMatch=markup.match(nodeNamePattern);return nodeNameMatch&&nodeNameMatch[1].toLowerCase()}function createNodesFromMarkup(markup,handleScript){var node=dummyNode;dummyNode?void 0:invariant(!1);var nodeName=getNodeName(markup),wrap=nodeName&&getMarkupWrap(nodeName);if(wrap){node.innerHTML=wrap[1]+markup+wrap[2];for(var wrapDepth=wrap[0];wrapDepth--;)node=node.lastChild}else node.innerHTML=markup;var scripts=node.getElementsByTagName("script");scripts.length&&(handleScript?void 0:invariant(!1),createArrayFromMixed(scripts).forEach(handleScript));for(var nodes=createArrayFromMixed(node.childNodes);node.lastChild;)node.removeChild(node.lastChild);return nodes}var ExecutionEnvironment=__webpack_require__(179),createArrayFromMixed=__webpack_require__(181),getMarkupWrap=__webpack_require__(184),invariant=__webpack_require__(183),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup},function(module,exports,__webpack_require__){"use strict";function hasArrayNature(obj){return!!obj&&("object"==typeof obj||"function"==typeof obj)&&"length"in obj&&!("setInterval"in obj)&&"number"!=typeof obj.nodeType&&(Array.isArray(obj)||"callee"in obj||"item"in obj)}function createArrayFromMixed(obj){return hasArrayNature(obj)?Array.isArray(obj)?obj.slice():toArray(obj):[obj]}var toArray=__webpack_require__(182);module.exports=createArrayFromMixed},function(module,exports,__webpack_require__){"use strict";function toArray(obj){var length=obj.length;if(Array.isArray(obj)||"object"!=typeof obj&&"function"!=typeof obj?invariant(!1):void 0,"number"!=typeof length?invariant(!1):void 0,0===length||length-1 in obj?void 0:invariant(!1),obj.hasOwnProperty)try{return Array.prototype.slice.call(obj)}catch(e){}for(var ret=Array(length),ii=0;ii<length;ii++)ret[ii]=obj[ii];return ret}var invariant=__webpack_require__(183);module.exports=toArray},function(module,exports,__webpack_require__){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}module.exports=invariant},function(module,exports,__webpack_require__){"use strict";function getMarkupWrap(nodeName){return dummyNode?void 0:invariant(!1),markupWrap.hasOwnProperty(nodeName)||(nodeName="*"),shouldWrap.hasOwnProperty(nodeName)||("*"===nodeName?dummyNode.innerHTML="<link />":dummyNode.innerHTML="<"+nodeName+"></"+nodeName+">",shouldWrap[nodeName]=!dummyNode.firstChild),shouldWrap[nodeName]?markupWrap[nodeName]:null}var ExecutionEnvironment=__webpack_require__(179),invariant=__webpack_require__(183),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(nodeName){markupWrap[nodeName]=svgWrap,shouldWrap[nodeName]=!0}),module.exports=getMarkupWrap},function(module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(187),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(183),keyMirror=function(obj){var key,ret={};obj instanceof Object&&!Array.isArray(obj)?void 0:invariant(!1);for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=key);return ret};module.exports=keyMirror},function(module,exports,__webpack_require__){"use strict";function _noMeasure(objName,fnName,func){return func}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(object,objectName,methodNames){},measure:function(objName,fnName,func){return func},injection:{injectMeasure:function(measure){ReactPerf.storedMeasure=measure}}};module.exports=ReactPerf},function(module,exports,__webpack_require__){"use strict";var ExecutionEnvironment=__webpack_require__(179),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(node,html){node.innerHTML=html};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(node,html){MSApp.execUnsafeLocalFunction(function(){node.innerHTML=html})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(node,html){if(node.parentNode&&node.parentNode.replaceChild(node,node),WHITESPACE_TEST.test(html)||"<"===html[0]&&NONVISIBLE_TEST.test(html)){node.innerHTML=String.fromCharCode(65279)+html;var textNode=node.firstChild;1===textNode.data.length?node.removeChild(textNode):textNode.deleteData(0,1)}else node.innerHTML=html})}module.exports=setInnerHTML},function(module,exports,__webpack_require__){"use strict";var ExecutionEnvironment=__webpack_require__(179),escapeTextContentForBrowser=__webpack_require__(191),setInnerHTML=__webpack_require__(189),setTextContent=function(node,text){node.textContent=text};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(node,text){setInnerHTML(node,escapeTextContentForBrowser(text))})),module.exports=setTextContent},function(module,exports){"use strict";function escaper(match){return ESCAPE_LOOKUP[match]}function escapeTextContentForBrowser(text){return(""+text).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser},function(module,exports,__webpack_require__){"use strict";function isAttributeNameSafe(attributeName){return!!validatedAttributeNameCache.hasOwnProperty(attributeName)||!illegalAttributeNameCache.hasOwnProperty(attributeName)&&(VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)?(validatedAttributeNameCache[attributeName]=!0,!0):(illegalAttributeNameCache[attributeName]=!0,!1))}function shouldIgnoreValue(propertyInfo,value){return null==value||propertyInfo.hasBooleanValue&&!value||propertyInfo.hasNumericValue&&isNaN(value)||propertyInfo.hasPositiveNumericValue&&value<1||propertyInfo.hasOverloadedBooleanValue&&value===!1}var DOMProperty=__webpack_require__(193),ReactPerf=__webpack_require__(188),quoteAttributeValueForBrowser=__webpack_require__(194),VALID_ATTRIBUTE_NAME_REGEX=(__webpack_require__(195),/^[a-zA-Z_][\w\.\-]*$/),illegalAttributeNameCache={},validatedAttributeNameCache={},DOMPropertyOperations={createMarkupForID:function(id){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(id)},setAttributeForID:function(node,id){node.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,id)},createMarkupForProperty:function(name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){if(shouldIgnoreValue(propertyInfo,value))return"";var attributeName=propertyInfo.attributeName;return propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===!0?attributeName+'=""':attributeName+"="+quoteAttributeValueForBrowser(value)}return DOMProperty.isCustomAttribute(name)?null==value?"":name+"="+quoteAttributeValueForBrowser(value):null},createMarkupForCustomAttribute:function(name,value){return isAttributeNameSafe(name)&&null!=value?name+"="+quoteAttributeValueForBrowser(value):""},setValueForProperty:function(node,name,value){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod)mutationMethod(node,value);else if(shouldIgnoreValue(propertyInfo,value))this.deleteValueForProperty(node,name);else if(propertyInfo.mustUseAttribute){var attributeName=propertyInfo.attributeName,namespace=propertyInfo.attributeNamespace;namespace?node.setAttributeNS(namespace,attributeName,""+value):propertyInfo.hasBooleanValue||propertyInfo.hasOverloadedBooleanValue&&value===!0?node.setAttribute(attributeName,""):node.setAttribute(attributeName,""+value)}else{var propName=propertyInfo.propertyName;propertyInfo.hasSideEffects&&""+node[propName]==""+value||(node[propName]=value)}}else DOMProperty.isCustomAttribute(name)&&DOMPropertyOperations.setValueForAttribute(node,name,value)},setValueForAttribute:function(node,name,value){isAttributeNameSafe(name)&&(null==value?node.removeAttribute(name):node.setAttribute(name,""+value))},deleteValueForProperty:function(node,name){var propertyInfo=DOMProperty.properties.hasOwnProperty(name)?DOMProperty.properties[name]:null;if(propertyInfo){var mutationMethod=propertyInfo.mutationMethod;if(mutationMethod)mutationMethod(node,void 0);else if(propertyInfo.mustUseAttribute)node.removeAttribute(propertyInfo.attributeName);else{var propName=propertyInfo.propertyName,defaultValue=DOMProperty.getDefaultValueForProperty(node.nodeName,propName);propertyInfo.hasSideEffects&&""+node[propName]===defaultValue||(node[propName]=defaultValue)}}else DOMProperty.isCustomAttribute(name)&&node.removeAttribute(name)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations},function(module,exports,__webpack_require__){"use strict";function checkMask(value,bitmask){return(value&bitmask)===bitmask}var invariant=__webpack_require__(183),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(domPropertyConfig){var Injection=DOMPropertyInjection,Properties=domPropertyConfig.Properties||{},DOMAttributeNamespaces=domPropertyConfig.DOMAttributeNamespaces||{},DOMAttributeNames=domPropertyConfig.DOMAttributeNames||{},DOMPropertyNames=domPropertyConfig.DOMPropertyNames||{},DOMMutationMethods=domPropertyConfig.DOMMutationMethods||{};domPropertyConfig.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(domPropertyConfig.isCustomAttribute);for(var propName in Properties){DOMProperty.properties.hasOwnProperty(propName)?invariant(!1):void 0;var lowerCased=propName.toLowerCase(),propConfig=Properties[propName],propertyInfo={attributeName:lowerCased,attributeNamespace:null,propertyName:propName,mutationMethod:null,mustUseAttribute:checkMask(propConfig,Injection.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(propConfig,Injection.MUST_USE_PROPERTY),hasSideEffects:checkMask(propConfig,Injection.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(propConfig,Injection.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(propConfig,Injection.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(propConfig,Injection.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(propConfig,Injection.HAS_OVERLOADED_BOOLEAN_VALUE)};if(propertyInfo.mustUseAttribute&&propertyInfo.mustUseProperty?invariant(!1):void 0,!propertyInfo.mustUseProperty&&propertyInfo.hasSideEffects?invariant(!1):void 0,propertyInfo.hasBooleanValue+propertyInfo.hasNumericValue+propertyInfo.hasOverloadedBooleanValue<=1?void 0:invariant(!1),DOMAttributeNames.hasOwnProperty(propName)){var attributeName=DOMAttributeNames[propName];propertyInfo.attributeName=attributeName}DOMAttributeNamespaces.hasOwnProperty(propName)&&(propertyInfo.attributeNamespace=DOMAttributeNamespaces[propName]),DOMPropertyNames.hasOwnProperty(propName)&&(propertyInfo.propertyName=DOMPropertyNames[propName]),DOMMutationMethods.hasOwnProperty(propName)&&(propertyInfo.mutationMethod=DOMMutationMethods[propName]),DOMProperty.properties[propName]=propertyInfo}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(attributeName){for(var i=0;i<DOMProperty._isCustomAttributeFunctions.length;i++){var isCustomAttributeFn=DOMProperty._isCustomAttributeFunctions[i];if(isCustomAttributeFn(attributeName))return!0}return!1},getDefaultValueForProperty:function(nodeName,prop){var testElement,nodeDefaults=defaultValueCache[nodeName];return nodeDefaults||(defaultValueCache[nodeName]=nodeDefaults={}),prop in nodeDefaults||(testElement=document.createElement(nodeName),nodeDefaults[prop]=testElement[prop]),nodeDefaults[prop]},injection:DOMPropertyInjection};module.exports=DOMProperty},function(module,exports,__webpack_require__){"use strict";function quoteAttributeValueForBrowser(value){return'"'+escapeTextContentForBrowser(value)+'"'}var escapeTextContentForBrowser=__webpack_require__(191);module.exports=quoteAttributeValueForBrowser},function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(185),warning=emptyFunction;module.exports=warning},function(module,exports,__webpack_require__){"use strict";var ReactDOMIDOperations=__webpack_require__(197),ReactMount=__webpack_require__(198),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(rootNodeID){ReactMount.purgeID(rootNodeID)}};module.exports=ReactComponentBrowserEnvironment},function(module,exports,__webpack_require__){"use strict";var DOMChildrenOperations=__webpack_require__(177),DOMPropertyOperations=__webpack_require__(192),ReactMount=__webpack_require__(198),ReactPerf=__webpack_require__(188),invariant=__webpack_require__(183),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(id,name,value){var node=ReactMount.getNode(id);INVALID_PROPERTY_ERRORS.hasOwnProperty(name)?invariant(!1):void 0,null!=value?DOMPropertyOperations.setValueForProperty(node,name,value):DOMPropertyOperations.deleteValueForProperty(node,name)},dangerouslyReplaceNodeWithMarkupByID:function(id,markup){var node=ReactMount.getNode(id);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(node,markup)},dangerouslyProcessChildrenUpdates:function(updates,markup){for(var i=0;i<updates.length;i++)updates[i].parentNode=ReactMount.getNode(updates[i].parentID);DOMChildrenOperations.processUpdates(updates,markup)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations},function(module,exports,__webpack_require__){"use strict";function firstDifferenceIndex(string1,string2){for(var minLen=Math.min(string1.length,string2.length),i=0;i<minLen;i++)if(string1.charAt(i)!==string2.charAt(i))return i;return string1.length===string2.length?-1:minLen}function getReactRootElementInContainer(container){return container?container.nodeType===DOC_NODE_TYPE?container.documentElement:container.firstChild:null}function getReactRootID(container){var rootElement=getReactRootElementInContainer(container);return rootElement&&ReactMount.getID(rootElement)}function getID(node){var id=internalGetID(node);if(id)if(nodeCache.hasOwnProperty(id)){var cached=nodeCache[id];cached!==node&&(isValid(cached,id)?invariant(!1):void 0,nodeCache[id]=node)}else nodeCache[id]=node;return id}function internalGetID(node){return node&&node.getAttribute&&node.getAttribute(ATTR_NAME)||""}function setID(node,id){var oldID=internalGetID(node);oldID!==id&&delete nodeCache[oldID],node.setAttribute(ATTR_NAME,id),nodeCache[id]=node}function getNode(id){return nodeCache.hasOwnProperty(id)&&isValid(nodeCache[id],id)||(nodeCache[id]=ReactMount.findReactNodeByID(id)),nodeCache[id]}function getNodeFromInstance(instance){var id=ReactInstanceMap.get(instance)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(id)?null:(nodeCache.hasOwnProperty(id)&&isValid(nodeCache[id],id)||(nodeCache[id]=ReactMount.findReactNodeByID(id)),nodeCache[id])}function isValid(node,id){if(node){internalGetID(node)!==id?invariant(!1):void 0;var container=ReactMount.findReactContainerForID(id);if(container&&containsNode(container,node))return!0}return!1}function purgeID(id){delete nodeCache[id]}function findDeepestCachedAncestorImpl(ancestorID){var ancestor=nodeCache[ancestorID];return!(!ancestor||!isValid(ancestor,ancestorID))&&void(deepestNodeSoFar=ancestor)}function findDeepestCachedAncestor(targetID){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(targetID,findDeepestCachedAncestorImpl);var foundNode=deepestNodeSoFar;return deepestNodeSoFar=null,foundNode}function mountComponentIntoNode(componentInstance,rootID,container,transaction,shouldReuseMarkup,context){ReactDOMFeatureFlags.useCreateElement&&(context=assign({},context),container.nodeType===DOC_NODE_TYPE?context[ownerDocumentContextKey]=container:context[ownerDocumentContextKey]=container.ownerDocument);var markup=ReactReconciler.mountComponent(componentInstance,rootID,transaction,context);componentInstance._renderedComponent._topLevelWrapper=componentInstance,ReactMount._mountImageIntoNode(markup,container,shouldReuseMarkup,transaction)}function batchedMountComponentIntoNode(componentInstance,rootID,container,shouldReuseMarkup,context){var transaction=ReactUpdates.ReactReconcileTransaction.getPooled(shouldReuseMarkup);transaction.perform(mountComponentIntoNode,null,componentInstance,rootID,container,transaction,shouldReuseMarkup,context),ReactUpdates.ReactReconcileTransaction.release(transaction)}function unmountComponentFromNode(instance,container){for(ReactReconciler.unmountComponent(instance),container.nodeType===DOC_NODE_TYPE&&(container=container.documentElement);container.lastChild;)container.removeChild(container.lastChild)}function hasNonRootReactChild(node){var reactRootID=getReactRootID(node);return!!reactRootID&&reactRootID!==ReactInstanceHandles.getReactRootIDFromNodeID(reactRootID)}function findFirstReactDOMImpl(node){for(;node&&node.parentNode!==node;node=node.parentNode)if(1===node.nodeType){var nodeID=internalGetID(node);if(nodeID){var lastID,reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(nodeID),current=node;do if(lastID=internalGetID(current),current=current.parentNode,null==current)return null;while(lastID!==reactRootID);if(current===containersByReactRootID[reactRootID])return node}}return null}var DOMProperty=__webpack_require__(193),ReactBrowserEventEmitter=__webpack_require__(199),ReactDOMFeatureFlags=(__webpack_require__(175),__webpack_require__(211)),ReactElement=__webpack_require__(212),ReactEmptyComponentRegistry=__webpack_require__(214),ReactInstanceHandles=__webpack_require__(215),ReactInstanceMap=__webpack_require__(217),ReactMarkupChecksum=__webpack_require__(218),ReactPerf=__webpack_require__(188),ReactReconciler=__webpack_require__(220),ReactUpdateQueue=__webpack_require__(223),ReactUpdates=__webpack_require__(224),assign=__webpack_require__(209),emptyObject=__webpack_require__(228),containsNode=__webpack_require__(229),instantiateReactComponent=__webpack_require__(232),invariant=__webpack_require__(183),setInnerHTML=__webpack_require__(189),shouldUpdateReactComponent=__webpack_require__(237),ATTR_NAME=(__webpack_require__(240),__webpack_require__(195),DOMProperty.ID_ATTRIBUTE_NAME),nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(container,renderCallback){renderCallback()},_updateRootComponent:function(prevComponent,nextElement,container,callback){return ReactMount.scrollMonitor(container,function(){ReactUpdateQueue.enqueueElementInternal(prevComponent,nextElement),callback&&ReactUpdateQueue.enqueueCallbackInternal(prevComponent,callback)}),prevComponent},_registerComponent:function(nextComponent,container){!container||container.nodeType!==ELEMENT_NODE_TYPE&&container.nodeType!==DOC_NODE_TYPE&&container.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0,ReactBrowserEventEmitter.ensureScrollValueMonitoring();var reactRootID=ReactMount.registerContainer(container);return instancesByReactRootID[reactRootID]=nextComponent,reactRootID},_renderNewRootComponent:function(nextElement,container,shouldReuseMarkup,context){var componentInstance=instantiateReactComponent(nextElement,null),reactRootID=ReactMount._registerComponent(componentInstance,container);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,componentInstance,reactRootID,container,shouldReuseMarkup,context),componentInstance},renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){return null==parentComponent||null==parentComponent._reactInternalInstance?invariant(!1):void 0,ReactMount._renderSubtreeIntoContainer(parentComponent,nextElement,container,callback)},_renderSubtreeIntoContainer:function(parentComponent,nextElement,container,callback){ReactElement.isValidElement(nextElement)?void 0:invariant(!1);var nextWrappedElement=new ReactElement(TopLevelWrapper,null,null,null,null,null,nextElement),prevComponent=instancesByReactRootID[getReactRootID(container)];if(prevComponent){var prevWrappedElement=prevComponent._currentElement,prevElement=prevWrappedElement.props;if(shouldUpdateReactComponent(prevElement,nextElement)){var publicInst=prevComponent._renderedComponent.getPublicInstance(),updatedCallback=callback&&function(){callback.call(publicInst)};return ReactMount._updateRootComponent(prevComponent,nextWrappedElement,container,updatedCallback),publicInst}ReactMount.unmountComponentAtNode(container)}var reactRootElement=getReactRootElementInContainer(container),containerHasReactMarkup=reactRootElement&&!!internalGetID(reactRootElement),containerHasNonRootReactChild=hasNonRootReactChild(container),shouldReuseMarkup=containerHasReactMarkup&&!prevComponent&&!containerHasNonRootReactChild,component=ReactMount._renderNewRootComponent(nextWrappedElement,container,shouldReuseMarkup,null!=parentComponent?parentComponent._reactInternalInstance._processChildContext(parentComponent._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return callback&&callback.call(component),component},render:function(nextElement,container,callback){return ReactMount._renderSubtreeIntoContainer(null,nextElement,container,callback)},registerContainer:function(container){var reactRootID=getReactRootID(container);return reactRootID&&(reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(reactRootID)),reactRootID||(reactRootID=ReactInstanceHandles.createReactRootID()),containersByReactRootID[reactRootID]=container,reactRootID},unmountComponentAtNode:function(container){!container||container.nodeType!==ELEMENT_NODE_TYPE&&container.nodeType!==DOC_NODE_TYPE&&container.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0;var reactRootID=getReactRootID(container),component=instancesByReactRootID[reactRootID];if(!component){var containerID=(hasNonRootReactChild(container),internalGetID(container));containerID&&containerID===ReactInstanceHandles.getReactRootIDFromNodeID(containerID);return!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,component,container),delete instancesByReactRootID[reactRootID],delete containersByReactRootID[reactRootID],!0},findReactContainerForID:function(id){var reactRootID=ReactInstanceHandles.getReactRootIDFromNodeID(id),container=containersByReactRootID[reactRootID];return container},findReactNodeByID:function(id){var reactRoot=ReactMount.findReactContainerForID(id);return ReactMount.findComponentRoot(reactRoot,id)},getFirstReactDOM:function(node){return findFirstReactDOMImpl(node)},findComponentRoot:function(ancestorNode,targetID){var firstChildren=findComponentRootReusableArray,childIndex=0,deepestAncestor=findDeepestCachedAncestor(targetID)||ancestorNode;for(firstChildren[0]=deepestAncestor.firstChild,firstChildren.length=1;childIndex<firstChildren.length;){for(var targetChild,child=firstChildren[childIndex++];child;){var childID=ReactMount.getID(child);childID?targetID===childID?targetChild=child:ReactInstanceHandles.isAncestorIDOf(childID,targetID)&&(firstChildren.length=childIndex=0,firstChildren.push(child.firstChild)):firstChildren.push(child.firstChild),child=child.nextSibling}if(targetChild)return firstChildren.length=0,targetChild}firstChildren.length=0,invariant(!1)},_mountImageIntoNode:function(markup,container,shouldReuseMarkup,transaction){if(!container||container.nodeType!==ELEMENT_NODE_TYPE&&container.nodeType!==DOC_NODE_TYPE&&container.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0,shouldReuseMarkup){var rootElement=getReactRootElementInContainer(container);if(ReactMarkupChecksum.canReuseMarkup(markup,rootElement))return;var checksum=rootElement.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);rootElement.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var rootMarkup=rootElement.outerHTML;rootElement.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,checksum);var normalizedMarkup=markup,diffIndex=firstDifferenceIndex(normalizedMarkup,rootMarkup);" (client) "+normalizedMarkup.substring(diffIndex-20,diffIndex+20)+"\n (server) "+rootMarkup.substring(diffIndex-20,diffIndex+20);container.nodeType===DOC_NODE_TYPE?invariant(!1):void 0}if(container.nodeType===DOC_NODE_TYPE?invariant(!1):void 0,transaction.useCreateElement){for(;container.lastChild;)container.removeChild(container.lastChild);container.appendChild(markup)}else setInnerHTML(container,markup)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount},function(module,exports,__webpack_require__){"use strict";function getListeningForDocument(mountAt){return Object.prototype.hasOwnProperty.call(mountAt,topListenersIDKey)||(mountAt[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[mountAt[topListenersIDKey]]={}),alreadyListeningTo[mountAt[topListenersIDKey]]}var EventConstants=__webpack_require__(200),EventPluginHub=__webpack_require__(201),EventPluginRegistry=__webpack_require__(202),ReactEventEmitterMixin=__webpack_require__(207),ReactPerf=__webpack_require__(188),ViewportMetrics=__webpack_require__(208),assign=__webpack_require__(209),isEventSupported=__webpack_require__(210),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",
topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(ReactEventListener){ReactEventListener.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=ReactEventListener}},setEnabled:function(enabled){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(enabled)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(registrationName,contentDocumentHandle){for(var mountAt=contentDocumentHandle,isListening=getListeningForDocument(mountAt),dependencies=EventPluginRegistry.registrationNameDependencies[registrationName],topLevelTypes=EventConstants.topLevelTypes,i=0;i<dependencies.length;i++){var dependency=dependencies[i];isListening.hasOwnProperty(dependency)&&isListening[dependency]||(dependency===topLevelTypes.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"wheel",mountAt):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"mousewheel",mountAt):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topWheel,"DOMMouseScroll",mountAt):dependency===topLevelTypes.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topScroll,"scroll",mountAt):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):dependency===topLevelTypes.topFocus||dependency===topLevelTypes.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topFocus,"focus",mountAt),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelTypes.topBlur,"blur",mountAt)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topFocus,"focusin",mountAt),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelTypes.topBlur,"focusout",mountAt)),isListening[topLevelTypes.topBlur]=!0,isListening[topLevelTypes.topFocus]=!0):topEventMapping.hasOwnProperty(dependency)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(dependency,topEventMapping[dependency],mountAt),isListening[dependency]=!0)}},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(topLevelType,handlerBaseName,handle)},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(topLevelType,handlerBaseName,handle)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var refresh=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(refresh),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(187),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants},function(module,exports,__webpack_require__){"use strict";var EventPluginRegistry=__webpack_require__(202),EventPluginUtils=__webpack_require__(203),ReactErrorUtils=__webpack_require__(204),accumulateInto=__webpack_require__(205),forEachAccumulated=__webpack_require__(206),invariant=__webpack_require__(183),listenerBank=(__webpack_require__(195),{}),eventQueue=null,executeDispatchesAndRelease=function(event,simulated){event&&(EventPluginUtils.executeDispatchesInOrder(event,simulated),event.isPersistent()||event.constructor.release(event))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(InjectedInstanceHandle){InstanceHandle=InjectedInstanceHandle},getInstanceHandle:function(){return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(id,registrationName,listener){"function"!=typeof listener?invariant(!1):void 0;var bankForRegistrationName=listenerBank[registrationName]||(listenerBank[registrationName]={});bankForRegistrationName[id]=listener;var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.didPutListener&&PluginModule.didPutListener(id,registrationName,listener)},getListener:function(id,registrationName){var bankForRegistrationName=listenerBank[registrationName];return bankForRegistrationName&&bankForRegistrationName[id]},deleteListener:function(id,registrationName){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.willDeleteListener&&PluginModule.willDeleteListener(id,registrationName);var bankForRegistrationName=listenerBank[registrationName];bankForRegistrationName&&delete bankForRegistrationName[id]},deleteAllListeners:function(id){for(var registrationName in listenerBank)if(listenerBank[registrationName][id]){var PluginModule=EventPluginRegistry.registrationNameModules[registrationName];PluginModule&&PluginModule.willDeleteListener&&PluginModule.willDeleteListener(id,registrationName),delete listenerBank[registrationName][id]}},extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){for(var events,plugins=EventPluginRegistry.plugins,i=0;i<plugins.length;i++){var possiblePlugin=plugins[i];if(possiblePlugin){var extractedEvents=possiblePlugin.extractEvents(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget);extractedEvents&&(events=accumulateInto(events,extractedEvents))}}return events},enqueueEvents:function(events){events&&(eventQueue=accumulateInto(eventQueue,events))},processEventQueue:function(simulated){var processingEventQueue=eventQueue;eventQueue=null,simulated?forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseSimulated):forEachAccumulated(processingEventQueue,executeDispatchesAndReleaseTopLevel),eventQueue?invariant(!1):void 0,ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub},function(module,exports,__webpack_require__){"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var pluginName in namesToPlugins){var PluginModule=namesToPlugins[pluginName],pluginIndex=EventPluginOrder.indexOf(pluginName);if(pluginIndex>-1?void 0:invariant(!1),!EventPluginRegistry.plugins[pluginIndex]){PluginModule.extractEvents?void 0:invariant(!1),EventPluginRegistry.plugins[pluginIndex]=PluginModule;var publishedEvents=PluginModule.eventTypes;for(var eventName in publishedEvents)publishEventForPlugin(publishedEvents[eventName],PluginModule,eventName)?void 0:invariant(!1)}}}function publishEventForPlugin(dispatchConfig,PluginModule,eventName){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(eventName)?invariant(!1):void 0,EventPluginRegistry.eventNameDispatchConfigs[eventName]=dispatchConfig;var phasedRegistrationNames=dispatchConfig.phasedRegistrationNames;if(phasedRegistrationNames){for(var phaseName in phasedRegistrationNames)if(phasedRegistrationNames.hasOwnProperty(phaseName)){var phasedRegistrationName=phasedRegistrationNames[phaseName];publishRegistrationName(phasedRegistrationName,PluginModule,eventName)}return!0}return!!dispatchConfig.registrationName&&(publishRegistrationName(dispatchConfig.registrationName,PluginModule,eventName),!0)}function publishRegistrationName(registrationName,PluginModule,eventName){EventPluginRegistry.registrationNameModules[registrationName]?invariant(!1):void 0,EventPluginRegistry.registrationNameModules[registrationName]=PluginModule,EventPluginRegistry.registrationNameDependencies[registrationName]=PluginModule.eventTypes[eventName].dependencies}var invariant=__webpack_require__(183),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(InjectedEventPluginOrder){EventPluginOrder?invariant(!1):void 0,EventPluginOrder=Array.prototype.slice.call(InjectedEventPluginOrder),recomputePluginOrdering()},injectEventPluginsByName:function(injectedNamesToPlugins){var isOrderingDirty=!1;for(var pluginName in injectedNamesToPlugins)if(injectedNamesToPlugins.hasOwnProperty(pluginName)){var PluginModule=injectedNamesToPlugins[pluginName];namesToPlugins.hasOwnProperty(pluginName)&&namesToPlugins[pluginName]===PluginModule||(namesToPlugins[pluginName]?invariant(!1):void 0,namesToPlugins[pluginName]=PluginModule,isOrderingDirty=!0)}isOrderingDirty&&recomputePluginOrdering()},getPluginModuleForEvent:function(event){var dispatchConfig=event.dispatchConfig;if(dispatchConfig.registrationName)return EventPluginRegistry.registrationNameModules[dispatchConfig.registrationName]||null;for(var phase in dispatchConfig.phasedRegistrationNames)if(dispatchConfig.phasedRegistrationNames.hasOwnProperty(phase)){var PluginModule=EventPluginRegistry.registrationNameModules[dispatchConfig.phasedRegistrationNames[phase]];if(PluginModule)return PluginModule}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var pluginName in namesToPlugins)namesToPlugins.hasOwnProperty(pluginName)&&delete namesToPlugins[pluginName];EventPluginRegistry.plugins.length=0;var eventNameDispatchConfigs=EventPluginRegistry.eventNameDispatchConfigs;for(var eventName in eventNameDispatchConfigs)eventNameDispatchConfigs.hasOwnProperty(eventName)&&delete eventNameDispatchConfigs[eventName];var registrationNameModules=EventPluginRegistry.registrationNameModules;for(var registrationName in registrationNameModules)registrationNameModules.hasOwnProperty(registrationName)&&delete registrationNameModules[registrationName]}};module.exports=EventPluginRegistry},function(module,exports,__webpack_require__){"use strict";function isEndish(topLevelType){return topLevelType===topLevelTypes.topMouseUp||topLevelType===topLevelTypes.topTouchEnd||topLevelType===topLevelTypes.topTouchCancel}function isMoveish(topLevelType){return topLevelType===topLevelTypes.topMouseMove||topLevelType===topLevelTypes.topTouchMove}function isStartish(topLevelType){return topLevelType===topLevelTypes.topMouseDown||topLevelType===topLevelTypes.topTouchStart}function executeDispatch(event,simulated,listener,domID){var type=event.type||"unknown-event";event.currentTarget=injection.Mount.getNode(domID),simulated?ReactErrorUtils.invokeGuardedCallbackWithCatch(type,listener,event,domID):ReactErrorUtils.invokeGuardedCallback(type,listener,event,domID),event.currentTarget=null}function executeDispatchesInOrder(event,simulated){var dispatchListeners=event._dispatchListeners,dispatchIDs=event._dispatchIDs;if(Array.isArray(dispatchListeners))for(var i=0;i<dispatchListeners.length&&!event.isPropagationStopped();i++)executeDispatch(event,simulated,dispatchListeners[i],dispatchIDs[i]);else dispatchListeners&&executeDispatch(event,simulated,dispatchListeners,dispatchIDs);event._dispatchListeners=null,event._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(event){var dispatchListeners=event._dispatchListeners,dispatchIDs=event._dispatchIDs;if(Array.isArray(dispatchListeners)){for(var i=0;i<dispatchListeners.length&&!event.isPropagationStopped();i++)if(dispatchListeners[i](event,dispatchIDs[i]))return dispatchIDs[i]}else if(dispatchListeners&&dispatchListeners(event,dispatchIDs))return dispatchIDs;return null}function executeDispatchesInOrderStopAtTrue(event){var ret=executeDispatchesInOrderStopAtTrueImpl(event);return event._dispatchIDs=null,event._dispatchListeners=null,ret}function executeDirectDispatch(event){var dispatchListener=event._dispatchListeners,dispatchID=event._dispatchIDs;Array.isArray(dispatchListener)?invariant(!1):void 0;var res=dispatchListener?dispatchListener(event,dispatchID):null;return event._dispatchListeners=null,event._dispatchIDs=null,res}function hasDispatches(event){return!!event._dispatchListeners}var EventConstants=__webpack_require__(200),ReactErrorUtils=__webpack_require__(204),invariant=__webpack_require__(183),injection=(__webpack_require__(195),{Mount:null,injectMount:function(InjectedMount){injection.Mount=InjectedMount}}),topLevelTypes=EventConstants.topLevelTypes,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(id){return injection.Mount.getNode(id)},getID:function(node){return injection.Mount.getID(node)},injection:injection};module.exports=EventPluginUtils},function(module,exports,__webpack_require__){"use strict";function invokeGuardedCallback(name,func,a,b){try{return func(a,b)}catch(x){return void(null===caughtError&&(caughtError=x))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var error=caughtError;throw caughtError=null,error}}};module.exports=ReactErrorUtils},function(module,exports,__webpack_require__){"use strict";function accumulateInto(current,next){if(null==next?invariant(!1):void 0,null==current)return next;var currentIsArray=Array.isArray(current),nextIsArray=Array.isArray(next);return currentIsArray&&nextIsArray?(current.push.apply(current,next),current):currentIsArray?(current.push(next),current):nextIsArray?[current].concat(next):[current,next]}var invariant=__webpack_require__(183);module.exports=accumulateInto},function(module,exports){"use strict";var forEachAccumulated=function(arr,cb,scope){Array.isArray(arr)?arr.forEach(cb,scope):arr&&cb.call(scope,arr)};module.exports=forEachAccumulated},function(module,exports,__webpack_require__){"use strict";function runEventQueueInBatch(events){EventPluginHub.enqueueEvents(events),EventPluginHub.processEventQueue(!1)}var EventPluginHub=__webpack_require__(201),ReactEventEmitterMixin={handleTopLevel:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var events=EventPluginHub.extractEvents(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget);runEventQueueInBatch(events)}};module.exports=ReactEventEmitterMixin},function(module,exports){"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(scrollPosition){ViewportMetrics.currentScrollLeft=scrollPosition.x,ViewportMetrics.currentScrollTop=scrollPosition.y}};module.exports=ViewportMetrics},function(module,exports){"use strict";function assign(target,sources){if(null==target)throw new TypeError("Object.assign target cannot be null or undefined");for(var to=Object(target),hasOwnProperty=Object.prototype.hasOwnProperty,nextIndex=1;nextIndex<arguments.length;nextIndex++){var nextSource=arguments[nextIndex];if(null!=nextSource){var from=Object(nextSource);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key])}}return to}module.exports=assign},function(module,exports,__webpack_require__){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function isEventSupported(eventNameSuffix,capture){if(!ExecutionEnvironment.canUseDOM||capture&&!("addEventListener"in document))return!1;var eventName="on"+eventNameSuffix,isSupported=eventName in document;if(!isSupported){var element=document.createElement("div");element.setAttribute(eventName,"return;"),isSupported="function"==typeof element[eventName]}return!isSupported&&useHasFeature&&"wheel"===eventNameSuffix&&(isSupported=document.implementation.hasFeature("Events.wheel","3.0")),isSupported}var useHasFeature,ExecutionEnvironment=__webpack_require__(179);ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),module.exports=isEventSupported},function(module,exports){"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags},function(module,exports,__webpack_require__){"use strict";var ReactCurrentOwner=__webpack_require__(175),assign=__webpack_require__(209),REACT_ELEMENT_TYPE=(__webpack_require__(213),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};return element};ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null,self=null,source=null;if(null!=config){ref=void 0===config.ref?null:config.ref,key=void 0===config.key?null:""+config.key,self=void 0===config.__self?null:config.__self,source=void 0===config.__source?null:config.__source;for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)"undefined"==typeof props[propName]&&(props[propName]=defaultProps[propName])}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement},ReactElement.cloneAndReplaceProps=function(oldElement,newProps){var newElement=ReactElement(oldElement.type,oldElement.key,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,newProps);return newElement},ReactElement.cloneElement=function(element,config,children){var propName,props=assign({},element.props),key=element.key,ref=element.ref,self=element._self,source=element._source,owner=element._owner;if(null!=config){void 0!==config.ref&&(ref=config.ref,owner=ReactCurrentOwner.current),void 0!==config.key&&(key=""+config.key);for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)},ReactElement.isValidElement=function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement},function(module,exports,__webpack_require__){"use strict";var canDefineProperty=!1;module.exports=canDefineProperty},function(module,exports){"use strict";function isNullComponentID(id){return!!nullComponentIDsRegistry[id]}function registerNullComponentID(id){nullComponentIDsRegistry[id]=!0}function deregisterNullComponentID(id){delete nullComponentIDsRegistry[id]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry},function(module,exports,__webpack_require__){"use strict";function getReactRootIDString(index){return SEPARATOR+index.toString(36)}function isBoundary(id,index){return id.charAt(index)===SEPARATOR||index===id.length}function isValidID(id){return""===id||id.charAt(0)===SEPARATOR&&id.charAt(id.length-1)!==SEPARATOR}function isAncestorIDOf(ancestorID,descendantID){return 0===descendantID.indexOf(ancestorID)&&isBoundary(descendantID,ancestorID.length)}function getParentID(id){return id?id.substr(0,id.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(ancestorID,destinationID){if(isValidID(ancestorID)&&isValidID(destinationID)?void 0:invariant(!1),isAncestorIDOf(ancestorID,destinationID)?void 0:invariant(!1),ancestorID===destinationID)return ancestorID;var i,start=ancestorID.length+SEPARATOR_LENGTH;for(i=start;i<destinationID.length&&!isBoundary(destinationID,i);i++);return destinationID.substr(0,i)}function getFirstCommonAncestorID(oneID,twoID){var minLength=Math.min(oneID.length,twoID.length);if(0===minLength)return"";for(var lastCommonMarkerIndex=0,i=0;i<=minLength;i++)if(isBoundary(oneID,i)&&isBoundary(twoID,i))lastCommonMarkerIndex=i;else if(oneID.charAt(i)!==twoID.charAt(i))break;var longestCommonID=oneID.substr(0,lastCommonMarkerIndex);return isValidID(longestCommonID)?void 0:invariant(!1),longestCommonID}function traverseParentPath(start,stop,cb,arg,skipFirst,skipLast){start=start||"",stop=stop||"",start===stop?invariant(!1):void 0;var traverseUp=isAncestorIDOf(stop,start);traverseUp||isAncestorIDOf(start,stop)?void 0:invariant(!1);for(var depth=0,traverse=traverseUp?getParentID:getNextDescendantID,id=start;;id=traverse(id,stop)){var ret;if(skipFirst&&id===start||skipLast&&id===stop||(ret=cb(id,traverseUp,arg)),ret===!1||id===stop)break;depth++<MAX_TREE_DEPTH?void 0:invariant(!1)}}var ReactRootIndex=__webpack_require__(216),invariant=__webpack_require__(183),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(rootID,name){return rootID+name},getReactRootIDFromNodeID:function(id){if(id&&id.charAt(0)===SEPARATOR&&id.length>1){var index=id.indexOf(SEPARATOR,1);return index>-1?id.substr(0,index):id}return null},traverseEnterLeave:function(leaveID,enterID,cb,upArg,downArg){var ancestorID=getFirstCommonAncestorID(leaveID,enterID);ancestorID!==leaveID&&traverseParentPath(leaveID,ancestorID,cb,upArg,!1,!0),ancestorID!==enterID&&traverseParentPath(ancestorID,enterID,cb,downArg,!0,!1)},traverseTwoPhase:function(targetID,cb,arg){targetID&&(traverseParentPath("",targetID,cb,arg,!0,!1),traverseParentPath(targetID,"",cb,arg,!1,!0))},traverseTwoPhaseSkipTarget:function(targetID,cb,arg){targetID&&(traverseParentPath("",targetID,cb,arg,!0,!0),traverseParentPath(targetID,"",cb,arg,!0,!0))},traverseAncestors:function(targetID,cb,arg){traverseParentPath("",targetID,cb,arg,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles},function(module,exports){"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(_createReactRootIndex){ReactRootIndex.createReactRootIndex=_createReactRootIndex}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex},function(module,exports){"use strict";var ReactInstanceMap={remove:function(key){key._reactInternalInstance=void 0},get:function(key){return key._reactInternalInstance},has:function(key){return void 0!==key._reactInternalInstance},set:function(key,value){key._reactInternalInstance=value}};module.exports=ReactInstanceMap},function(module,exports,__webpack_require__){"use strict";var adler32=__webpack_require__(219),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(markup){var checksum=adler32(markup);return markup.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+checksum+'"$&')},canReuseMarkup:function(markup,element){var existingChecksum=element.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);existingChecksum=existingChecksum&&parseInt(existingChecksum,10);var markupChecksum=adler32(markup);return markupChecksum===existingChecksum}};module.exports=ReactMarkupChecksum},function(module,exports){"use strict";function adler32(data){for(var a=1,b=0,i=0,l=data.length,m=l&-4;i<m;){for(;i<Math.min(i+4096,m);i+=4)b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3));a%=MOD,b%=MOD}for(;i<l;i++)b+=a+=data.charCodeAt(i);return a%=MOD,b%=MOD,a|b<<16}var MOD=65521;module.exports=adler32},function(module,exports,__webpack_require__){"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=__webpack_require__(221),ReactReconciler={mountComponent:function(internalInstance,rootID,transaction,context){var markup=internalInstance.mountComponent(rootID,transaction,context);return internalInstance._currentElement&&null!=internalInstance._currentElement.ref&&transaction.getReactMountReady().enqueue(attachRefs,internalInstance),markup},unmountComponent:function(internalInstance){ReactRef.detachRefs(internalInstance,internalInstance._currentElement),internalInstance.unmountComponent()},receiveComponent:function(internalInstance,nextElement,transaction,context){var prevElement=internalInstance._currentElement;if(nextElement!==prevElement||context!==internalInstance._context){var refsChanged=ReactRef.shouldUpdateRefs(prevElement,nextElement);refsChanged&&ReactRef.detachRefs(internalInstance,prevElement),internalInstance.receiveComponent(nextElement,transaction,context),refsChanged&&internalInstance._currentElement&&null!=internalInstance._currentElement.ref&&transaction.getReactMountReady().enqueue(attachRefs,internalInstance)}},performUpdateIfNecessary:function(internalInstance,transaction){internalInstance.performUpdateIfNecessary(transaction)}};module.exports=ReactReconciler},function(module,exports,__webpack_require__){"use strict";function attachRef(ref,component,owner){"function"==typeof ref?ref(component.getPublicInstance()):ReactOwner.addComponentAsRefTo(component,ref,owner)}function detachRef(ref,component,owner){"function"==typeof ref?ref(null):ReactOwner.removeComponentAsRefFrom(component,ref,owner)}var ReactOwner=__webpack_require__(222),ReactRef={};ReactRef.attachRefs=function(instance,element){if(null!==element&&element!==!1){var ref=element.ref;null!=ref&&attachRef(ref,instance,element._owner)}},ReactRef.shouldUpdateRefs=function(prevElement,nextElement){var prevEmpty=null===prevElement||prevElement===!1,nextEmpty=null===nextElement||nextElement===!1;return prevEmpty||nextEmpty||nextElement._owner!==prevElement._owner||nextElement.ref!==prevElement.ref},ReactRef.detachRefs=function(instance,element){if(null!==element&&element!==!1){var ref=element.ref;null!=ref&&detachRef(ref,instance,element._owner)}},module.exports=ReactRef},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(183),ReactOwner={isValidOwner:function(object){return!(!object||"function"!=typeof object.attachRef||"function"!=typeof object.detachRef)},addComponentAsRefTo:function(component,ref,owner){ReactOwner.isValidOwner(owner)?void 0:invariant(!1),owner.attachRef(ref,component)},removeComponentAsRefFrom:function(component,ref,owner){ReactOwner.isValidOwner(owner)?void 0:invariant(!1),owner.getPublicInstance().refs[ref]===component.getPublicInstance()&&owner.detachRef(ref)}};module.exports=ReactOwner},function(module,exports,__webpack_require__){"use strict";function enqueueUpdate(internalInstance){ReactUpdates.enqueueUpdate(internalInstance)}function getInternalInstanceReadyForUpdate(publicInstance,callerName){var internalInstance=ReactInstanceMap.get(publicInstance);return internalInstance?internalInstance:null}var ReactElement=(__webpack_require__(175),__webpack_require__(212)),ReactInstanceMap=__webpack_require__(217),ReactUpdates=__webpack_require__(224),assign=__webpack_require__(209),invariant=__webpack_require__(183),ReactUpdateQueue=(__webpack_require__(195),{isMounted:function(publicInstance){var internalInstance=ReactInstanceMap.get(publicInstance);return!!internalInstance&&!!internalInstance._renderedComponent},enqueueCallback:function(publicInstance,callback){"function"!=typeof callback?invariant(!1):void 0;var internalInstance=getInternalInstanceReadyForUpdate(publicInstance);return internalInstance?(internalInstance._pendingCallbacks?internalInstance._pendingCallbacks.push(callback):internalInstance._pendingCallbacks=[callback],void enqueueUpdate(internalInstance)):null},enqueueCallbackInternal:function(internalInstance,callback){"function"!=typeof callback?invariant(!1):void 0,internalInstance._pendingCallbacks?internalInstance._pendingCallbacks.push(callback):internalInstance._pendingCallbacks=[callback],enqueueUpdate(internalInstance)},enqueueForceUpdate:function(publicInstance){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"forceUpdate");internalInstance&&(internalInstance._pendingForceUpdate=!0,enqueueUpdate(internalInstance))},enqueueReplaceState:function(publicInstance,completeState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceState");internalInstance&&(internalInstance._pendingStateQueue=[completeState],internalInstance._pendingReplaceState=!0,enqueueUpdate(internalInstance))},enqueueSetState:function(publicInstance,partialState){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setState");if(internalInstance){var queue=internalInstance._pendingStateQueue||(internalInstance._pendingStateQueue=[]);queue.push(partialState),enqueueUpdate(internalInstance)}},enqueueSetProps:function(publicInstance,partialProps){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"setProps");internalInstance&&ReactUpdateQueue.enqueueSetPropsInternal(internalInstance,partialProps)},enqueueSetPropsInternal:function(internalInstance,partialProps){var topLevelWrapper=internalInstance._topLevelWrapper;topLevelWrapper?void 0:invariant(!1);var wrapElement=topLevelWrapper._pendingElement||topLevelWrapper._currentElement,element=wrapElement.props,props=assign({},element.props,partialProps);topLevelWrapper._pendingElement=ReactElement.cloneAndReplaceProps(wrapElement,ReactElement.cloneAndReplaceProps(element,props)),enqueueUpdate(topLevelWrapper)},enqueueReplaceProps:function(publicInstance,props){var internalInstance=getInternalInstanceReadyForUpdate(publicInstance,"replaceProps");internalInstance&&ReactUpdateQueue.enqueueReplacePropsInternal(internalInstance,props)},enqueueReplacePropsInternal:function(internalInstance,props){var topLevelWrapper=internalInstance._topLevelWrapper;topLevelWrapper?void 0:invariant(!1);var wrapElement=topLevelWrapper._pendingElement||topLevelWrapper._currentElement,element=wrapElement.props;topLevelWrapper._pendingElement=ReactElement.cloneAndReplaceProps(wrapElement,ReactElement.cloneAndReplaceProps(element,props)),enqueueUpdate(topLevelWrapper)},enqueueElementInternal:function(internalInstance,newElement){internalInstance._pendingElement=newElement,enqueueUpdate(internalInstance)}});module.exports=ReactUpdateQueue},function(module,exports,__webpack_require__){"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy?void 0:invariant(!1)}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(callback,a,b,c,d,e){ensureInjected(),batchingStrategy.batchedUpdates(callback,a,b,c,d,e)}function mountOrderComparator(c1,c2){return c1._mountOrder-c2._mountOrder}function runBatchedUpdates(transaction){var len=transaction.dirtyComponentsLength;len!==dirtyComponents.length?invariant(!1):void 0,dirtyComponents.sort(mountOrderComparator);for(var i=0;i<len;i++){var component=dirtyComponents[i],callbacks=component._pendingCallbacks;if(component._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(component,transaction.reconcileTransaction),callbacks)for(var j=0;j<callbacks.length;j++)transaction.callbackQueue.enqueue(callbacks[j],component.getPublicInstance())}}function enqueueUpdate(component){return ensureInjected(),batchingStrategy.isBatchingUpdates?void dirtyComponents.push(component):void batchingStrategy.batchedUpdates(enqueueUpdate,component)}function asap(callback,context){batchingStrategy.isBatchingUpdates?void 0:invariant(!1),asapCallbackQueue.enqueue(callback,context),asapEnqueued=!0}var CallbackQueue=__webpack_require__(225),PooledClass=__webpack_require__(226),ReactPerf=__webpack_require__(188),ReactReconciler=__webpack_require__(220),Transaction=__webpack_require__(227),assign=__webpack_require__(209),invariant=__webpack_require__(183),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(method,scope,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,method,scope,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var transaction=ReactUpdatesFlushTransaction.getPooled();transaction.perform(runBatchedUpdates,null,transaction),ReactUpdatesFlushTransaction.release(transaction)}if(asapEnqueued){asapEnqueued=!1;var queue=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),queue.notifyAll(),CallbackQueue.release(queue)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(ReconcileTransaction){ReconcileTransaction?void 0:invariant(!1),ReactUpdates.ReactReconcileTransaction=ReconcileTransaction},injectBatchingStrategy:function(_batchingStrategy){_batchingStrategy?void 0:invariant(!1),"function"!=typeof _batchingStrategy.batchedUpdates?invariant(!1):void 0,"boolean"!=typeof _batchingStrategy.isBatchingUpdates?invariant(!1):void 0,batchingStrategy=_batchingStrategy}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates},function(module,exports,__webpack_require__){"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=__webpack_require__(226),assign=__webpack_require__(209),invariant=__webpack_require__(183);assign(CallbackQueue.prototype,{enqueue:function(callback,context){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(callback),this._contexts.push(context)},notifyAll:function(){var callbacks=this._callbacks,contexts=this._contexts;if(callbacks){callbacks.length!==contexts.length?invariant(!1):void 0,this._callbacks=null,this._contexts=null;for(var i=0;i<callbacks.length;i++)callbacks[i].call(contexts[i]);callbacks.length=0,contexts.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(183),oneArgumentPooler=function(copyFieldsFrom){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,copyFieldsFrom),instance}return new Klass(copyFieldsFrom)},twoArgumentPooler=function(a1,a2){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2),instance}return new Klass(a1,a2)},threeArgumentPooler=function(a1,a2,a3){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3),instance}return new Klass(a1,a2,a3)},fourArgumentPooler=function(a1,a2,a3,a4){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4),instance}return new Klass(a1,a2,a3,a4)},fiveArgumentPooler=function(a1,a2,a3,a4,a5){var Klass=this;if(Klass.instancePool.length){var instance=Klass.instancePool.pop();return Klass.call(instance,a1,a2,a3,a4,a5),instance}return new Klass(a1,a2,a3,a4,a5)},standardReleaser=function(instance){var Klass=this;instance instanceof Klass?void 0:invariant(!1),instance.destructor(),Klass.instancePool.length<Klass.poolSize&&Klass.instancePool.push(instance)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(CopyConstructor,pooler){var NewKlass=CopyConstructor;return NewKlass.instancePool=[],NewKlass.getPooled=pooler||DEFAULT_POOLER,NewKlass.poolSize||(NewKlass.poolSize=DEFAULT_POOL_SIZE),NewKlass.release=standardReleaser,NewKlass},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(183),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(method,scope,a,b,c,d,e,f){this.isInTransaction()?invariant(!1):void 0;var errorThrown,ret;try{this._isInTransaction=!0,errorThrown=!0,this.initializeAll(0),ret=method.call(scope,a,b,c,d,e,f),errorThrown=!1}finally{try{if(errorThrown)try{this.closeAll(0)}catch(err){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return ret},initializeAll:function(startIndex){for(var transactionWrappers=this.transactionWrappers,i=startIndex;i<transactionWrappers.length;i++){var wrapper=transactionWrappers[i];try{this.wrapperInitData[i]=Transaction.OBSERVED_ERROR,this.wrapperInitData[i]=wrapper.initialize?wrapper.initialize.call(this):null}finally{if(this.wrapperInitData[i]===Transaction.OBSERVED_ERROR)try{this.initializeAll(i+1)}catch(err){}}}},closeAll:function(startIndex){this.isInTransaction()?void 0:invariant(!1);for(var transactionWrappers=this.transactionWrappers,i=startIndex;i<transactionWrappers.length;i++){var errorThrown,wrapper=transactionWrappers[i],initData=this.wrapperInitData[i];try{errorThrown=!0,initData!==Transaction.OBSERVED_ERROR&&wrapper.close&&wrapper.close.call(this,initData),errorThrown=!1}finally{if(errorThrown)try{this.closeAll(i+1)}catch(e){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction},function(module,exports,__webpack_require__){"use strict";var emptyObject={};module.exports=emptyObject},function(module,exports,__webpack_require__){"use strict";function containsNode(_x,_x2){var _again=!0;_function:for(;_again;){var outerNode=_x,innerNode=_x2;if(_again=!1,outerNode&&innerNode){if(outerNode===innerNode)return!0;if(isTextNode(outerNode))return!1;if(isTextNode(innerNode)){_x=outerNode,_x2=innerNode.parentNode,_again=!0;continue _function}return outerNode.contains?outerNode.contains(innerNode):!!outerNode.compareDocumentPosition&&!!(16&outerNode.compareDocumentPosition(innerNode))}return!1}}var isTextNode=__webpack_require__(230);module.exports=containsNode},function(module,exports,__webpack_require__){"use strict";function isTextNode(object){return isNode(object)&&3==object.nodeType}var isNode=__webpack_require__(231);module.exports=isTextNode},function(module,exports){"use strict";function isNode(object){return!(!object||!("function"==typeof Node?object instanceof Node:"object"==typeof object&&"number"==typeof object.nodeType&&"string"==typeof object.nodeName))}module.exports=isNode},function(module,exports,__webpack_require__){"use strict";function isInternalComponentType(type){return"function"==typeof type&&"undefined"!=typeof type.prototype&&"function"==typeof type.prototype.mountComponent&&"function"==typeof type.prototype.receiveComponent}function instantiateReactComponent(node){var instance;if(null===node||node===!1)instance=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof node){var element=node;!element||"function"!=typeof element.type&&"string"!=typeof element.type?invariant(!1):void 0,instance="string"==typeof element.type?ReactNativeComponent.createInternalComponent(element):isInternalComponentType(element.type)?new element.type(element):new ReactCompositeComponentWrapper}else"string"==typeof node||"number"==typeof node?instance=ReactNativeComponent.createInstanceForText(node):invariant(!1);return instance.construct(node),instance._mountIndex=0,instance._mountImage=null,instance}var ReactCompositeComponent=__webpack_require__(233),ReactEmptyComponent=__webpack_require__(238),ReactNativeComponent=__webpack_require__(239),assign=__webpack_require__(209),invariant=__webpack_require__(183),ReactCompositeComponentWrapper=(__webpack_require__(195),function(){});assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent},function(module,exports,__webpack_require__){"use strict";function getDeclarationErrorAddendum(component){var owner=component._currentElement._owner||null;if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}function StatelessComponent(Component){}var ReactComponentEnvironment=__webpack_require__(234),ReactCurrentOwner=__webpack_require__(175),ReactElement=__webpack_require__(212),ReactInstanceMap=__webpack_require__(217),ReactPerf=__webpack_require__(188),ReactPropTypeLocations=__webpack_require__(235),ReactReconciler=(__webpack_require__(236),__webpack_require__(220)),ReactUpdateQueue=__webpack_require__(223),assign=__webpack_require__(209),emptyObject=__webpack_require__(228),invariant=__webpack_require__(183),shouldUpdateReactComponent=__webpack_require__(237);__webpack_require__(195);StatelessComponent.prototype.render=function(){var Component=ReactInstanceMap.get(this)._currentElement.type;return Component(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(element){this._currentElement=element,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(rootID,transaction,context){this._context=context,this._mountOrder=nextMountID++,this._rootNodeID=rootID;var inst,renderedElement,publicProps=this._processProps(this._currentElement.props),publicContext=this._processContext(context),Component=this._currentElement.type,canInstantiate="prototype"in Component;canInstantiate&&(inst=new Component(publicProps,publicContext,ReactUpdateQueue)),canInstantiate&&null!==inst&&inst!==!1&&!ReactElement.isValidElement(inst)||(renderedElement=inst,inst=new StatelessComponent(Component)),inst.props=publicProps,inst.context=publicContext,inst.refs=emptyObject,inst.updater=ReactUpdateQueue,this._instance=inst,ReactInstanceMap.set(inst,this);var initialState=inst.state;void 0===initialState&&(inst.state=initialState=null),"object"!=typeof initialState||Array.isArray(initialState)?invariant(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,inst.componentWillMount&&(inst.componentWillMount(),this._pendingStateQueue&&(inst.state=this._processPendingState(inst.props,inst.context))),void 0===renderedElement&&(renderedElement=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(renderedElement);var markup=ReactReconciler.mountComponent(this._renderedComponent,rootID,transaction,this._processChildContext(context));return inst.componentDidMount&&transaction.getReactMountReady().enqueue(inst.componentDidMount,inst),markup},unmountComponent:function(){var inst=this._instance;inst.componentWillUnmount&&inst.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(inst)},_maskContext:function(context){var maskedContext=null,Component=this._currentElement.type,contextTypes=Component.contextTypes;if(!contextTypes)return emptyObject;maskedContext={};for(var contextName in contextTypes)maskedContext[contextName]=context[contextName];return maskedContext},_processContext:function(context){var maskedContext=this._maskContext(context);return maskedContext},_processChildContext:function(currentContext){var Component=this._currentElement.type,inst=this._instance,childContext=inst.getChildContext&&inst.getChildContext();if(childContext){"object"!=typeof Component.childContextTypes?invariant(!1):void 0;for(var name in childContext)name in Component.childContextTypes?void 0:invariant(!1);return assign({},currentContext,childContext)}return currentContext},_processProps:function(newProps){return newProps},_checkPropTypes:function(propTypes,props,location){var componentName=this.getName();for(var propName in propTypes)if(propTypes.hasOwnProperty(propName)){var error;try{"function"!=typeof propTypes[propName]?invariant(!1):void 0,error=propTypes[propName](props,propName,componentName,location,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ex){error=ex}if(error instanceof Error){getDeclarationErrorAddendum(this);location===ReactPropTypeLocations.prop}}},receiveComponent:function(nextElement,transaction,nextContext){var prevElement=this._currentElement,prevContext=this._context;this._pendingElement=null,this.updateComponent(transaction,prevElement,nextElement,prevContext,nextContext)},performUpdateIfNecessary:function(transaction){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,transaction,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(transaction,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(transaction,prevParentElement,nextParentElement,prevUnmaskedContext,nextUnmaskedContext){
var nextProps,inst=this._instance,nextContext=this._context===nextUnmaskedContext?inst.context:this._processContext(nextUnmaskedContext);prevParentElement===nextParentElement?nextProps=nextParentElement.props:(nextProps=this._processProps(nextParentElement.props),inst.componentWillReceiveProps&&inst.componentWillReceiveProps(nextProps,nextContext));var nextState=this._processPendingState(nextProps,nextContext),shouldUpdate=this._pendingForceUpdate||!inst.shouldComponentUpdate||inst.shouldComponentUpdate(nextProps,nextState,nextContext);shouldUpdate?(this._pendingForceUpdate=!1,this._performComponentUpdate(nextParentElement,nextProps,nextState,nextContext,transaction,nextUnmaskedContext)):(this._currentElement=nextParentElement,this._context=nextUnmaskedContext,inst.props=nextProps,inst.state=nextState,inst.context=nextContext)},_processPendingState:function(props,context){var inst=this._instance,queue=this._pendingStateQueue,replace=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!queue)return inst.state;if(replace&&1===queue.length)return queue[0];for(var nextState=assign({},replace?queue[0]:inst.state),i=replace?1:0;i<queue.length;i++){var partial=queue[i];assign(nextState,"function"==typeof partial?partial.call(inst,nextState,props,context):partial)}return nextState},_performComponentUpdate:function(nextElement,nextProps,nextState,nextContext,transaction,unmaskedContext){var prevProps,prevState,prevContext,inst=this._instance,hasComponentDidUpdate=Boolean(inst.componentDidUpdate);hasComponentDidUpdate&&(prevProps=inst.props,prevState=inst.state,prevContext=inst.context),inst.componentWillUpdate&&inst.componentWillUpdate(nextProps,nextState,nextContext),this._currentElement=nextElement,this._context=unmaskedContext,inst.props=nextProps,inst.state=nextState,inst.context=nextContext,this._updateRenderedComponent(transaction,unmaskedContext),hasComponentDidUpdate&&transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst,prevProps,prevState,prevContext),inst)},_updateRenderedComponent:function(transaction,context){var prevComponentInstance=this._renderedComponent,prevRenderedElement=prevComponentInstance._currentElement,nextRenderedElement=this._renderValidatedComponent();if(shouldUpdateReactComponent(prevRenderedElement,nextRenderedElement))ReactReconciler.receiveComponent(prevComponentInstance,nextRenderedElement,transaction,this._processChildContext(context));else{var thisID=this._rootNodeID,prevComponentID=prevComponentInstance._rootNodeID;ReactReconciler.unmountComponent(prevComponentInstance),this._renderedComponent=this._instantiateReactComponent(nextRenderedElement);var nextMarkup=ReactReconciler.mountComponent(this._renderedComponent,thisID,transaction,this._processChildContext(context));this._replaceNodeWithMarkupByID(prevComponentID,nextMarkup)}},_replaceNodeWithMarkupByID:function(prevComponentID,nextMarkup){ReactComponentEnvironment.replaceNodeWithMarkupByID(prevComponentID,nextMarkup)},_renderValidatedComponentWithoutOwnerOrContext:function(){var inst=this._instance,renderedComponent=inst.render();return renderedComponent},_renderValidatedComponent:function(){var renderedComponent;ReactCurrentOwner.current=this;try{renderedComponent=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===renderedComponent||renderedComponent===!1||ReactElement.isValidElement(renderedComponent)?void 0:invariant(!1),renderedComponent},attachRef:function(ref,component){var inst=this.getPublicInstance();null==inst?invariant(!1):void 0;var publicComponentInstance=component.getPublicInstance(),refs=inst.refs===emptyObject?inst.refs={}:inst.refs;refs[ref]=publicComponentInstance},detachRef:function(ref){var refs=this.getPublicInstance().refs;delete refs[ref]},getName:function(){var type=this._currentElement.type,constructor=this._instance&&this._instance.constructor;return type.displayName||constructor&&constructor.displayName||type.name||constructor&&constructor.name||null},getPublicInstance:function(){var inst=this._instance;return inst instanceof StatelessComponent?null:inst},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent},function(module,exports,__webpack_require__){"use strict";var invariant=__webpack_require__(183),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(environment){injected?invariant(!1):void 0,ReactComponentEnvironment.unmountIDFromEnvironment=environment.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=environment.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=environment.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment},function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(187),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations},function(module,exports,__webpack_require__){"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames},function(module,exports){"use strict";function shouldUpdateReactComponent(prevElement,nextElement){var prevEmpty=null===prevElement||prevElement===!1,nextEmpty=null===nextElement||nextElement===!1;if(prevEmpty||nextEmpty)return prevEmpty===nextEmpty;var prevType=typeof prevElement,nextType=typeof nextElement;return"string"===prevType||"number"===prevType?"string"===nextType||"number"===nextType:"object"===nextType&&prevElement.type===nextElement.type&&prevElement.key===nextElement.key}module.exports=shouldUpdateReactComponent},function(module,exports,__webpack_require__){"use strict";function registerNullComponentID(){ReactEmptyComponentRegistry.registerNullComponentID(this._rootNodeID)}var placeholderElement,ReactElement=__webpack_require__(212),ReactEmptyComponentRegistry=__webpack_require__(214),ReactReconciler=__webpack_require__(220),assign=__webpack_require__(209),ReactEmptyComponentInjection={injectEmptyComponent:function(component){placeholderElement=ReactElement.createElement(component)}},ReactEmptyComponent=function(instantiate){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=instantiate(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(element){},mountComponent:function(rootID,transaction,context){return transaction.getReactMountReady().enqueue(registerNullComponentID,this),this._rootNodeID=rootID,ReactReconciler.mountComponent(this._renderedComponent,rootID,transaction,context)},receiveComponent:function(){},unmountComponent:function(rootID,transaction,context){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent},function(module,exports,__webpack_require__){"use strict";function getComponentClassForElement(element){if("function"==typeof element.type)return element.type;var tag=element.type,componentClass=tagToComponentClass[tag];return null==componentClass&&(tagToComponentClass[tag]=componentClass=autoGenerateWrapperClass(tag)),componentClass}function createInternalComponent(element){return genericComponentClass?void 0:invariant(!1),new genericComponentClass(element.type,element.props)}function createInstanceForText(text){return new textComponentClass(text)}function isTextComponent(component){return component instanceof textComponentClass}var assign=__webpack_require__(209),invariant=__webpack_require__(183),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(componentClass){genericComponentClass=componentClass},injectTextComponentClass:function(componentClass){textComponentClass=componentClass},injectComponentClasses:function(componentClasses){assign(tagToComponentClass,componentClasses)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent},function(module,exports,__webpack_require__){"use strict";var emptyFunction=(__webpack_require__(209),__webpack_require__(185)),validateDOMNesting=(__webpack_require__(195),emptyFunction);module.exports=validateDOMNesting},function(module,exports,__webpack_require__){"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}}var BeforeInputEventPlugin=__webpack_require__(242),ChangeEventPlugin=__webpack_require__(250),ClientReactRootIndex=__webpack_require__(253),DefaultEventPluginOrder=__webpack_require__(254),EnterLeaveEventPlugin=__webpack_require__(255),ExecutionEnvironment=__webpack_require__(179),HTMLDOMPropertyConfig=__webpack_require__(259),ReactBrowserComponentMixin=__webpack_require__(260),ReactComponentBrowserEnvironment=__webpack_require__(196),ReactDefaultBatchingStrategy=__webpack_require__(262),ReactDOMComponent=__webpack_require__(263),ReactDOMTextComponent=__webpack_require__(176),ReactEventListener=__webpack_require__(288),ReactInjection=__webpack_require__(291),ReactInstanceHandles=__webpack_require__(215),ReactMount=__webpack_require__(198),ReactReconcileTransaction=__webpack_require__(295),SelectEventPlugin=__webpack_require__(300),ServerReactRootIndex=__webpack_require__(301),SimpleEventPlugin=__webpack_require__(302),SVGDOMPropertyConfig=__webpack_require__(311),alreadyInjected=!1;module.exports={inject:inject}},function(module,exports,__webpack_require__){"use strict";function isPresto(){var opera=window.opera;return"object"==typeof opera&&"function"==typeof opera.version&&parseInt(opera.version(),10)<=12}function isKeypressCommand(nativeEvent){return(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)&&!(nativeEvent.ctrlKey&&nativeEvent.altKey)}function getCompositionEventType(topLevelType){switch(topLevelType){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(topLevelType,nativeEvent){return topLevelType===topLevelTypes.topKeyDown&&nativeEvent.keyCode===START_KEYCODE}function isFallbackCompositionEnd(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topKeyUp:return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case topLevelTypes.topKeyDown:return nativeEvent.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(nativeEvent){var detail=nativeEvent.detail;return"object"==typeof detail&&"data"in detail?detail.data:null}function extractCompositionEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var eventType,fallbackData;if(canUseCompositionEvent?eventType=getCompositionEventType(topLevelType):currentComposition?isFallbackCompositionEnd(topLevelType,nativeEvent)&&(eventType=eventTypes.compositionEnd):isFallbackCompositionStart(topLevelType,nativeEvent)&&(eventType=eventTypes.compositionStart),!eventType)return null;useFallbackCompositionData&&(currentComposition||eventType!==eventTypes.compositionStart?eventType===eventTypes.compositionEnd&&currentComposition&&(fallbackData=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(topLevelTarget));var event=SyntheticCompositionEvent.getPooled(eventType,topLevelTargetID,nativeEvent,nativeEventTarget);if(fallbackData)event.data=fallbackData;else{var customData=getDataFromCustomEvent(nativeEvent);null!==customData&&(event.data=customData)}return EventPropagators.accumulateTwoPhaseDispatches(event),event}function getNativeBeforeInputChars(topLevelType,nativeEvent){switch(topLevelType){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(nativeEvent);case topLevelTypes.topKeyPress:var which=nativeEvent.which;return which!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var chars=nativeEvent.data;return chars===SPACEBAR_CHAR&&hasSpaceKeypress?null:chars;default:return null}}function getFallbackBeforeInputChars(topLevelType,nativeEvent){if(currentComposition){if(topLevelType===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(topLevelType,nativeEvent)){var chars=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,chars}return null}switch(topLevelType){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return nativeEvent.which&&!isKeypressCommand(nativeEvent)?String.fromCharCode(nativeEvent.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:nativeEvent.data;default:return null}}function extractBeforeInputEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var chars;if(chars=canUseTextInputEvent?getNativeBeforeInputChars(topLevelType,nativeEvent):getFallbackBeforeInputChars(topLevelType,nativeEvent),!chars)return null;var event=SyntheticInputEvent.getPooled(eventTypes.beforeInput,topLevelTargetID,nativeEvent,nativeEventTarget);return event.data=chars,EventPropagators.accumulateTwoPhaseDispatches(event),event}var EventConstants=__webpack_require__(200),EventPropagators=__webpack_require__(243),ExecutionEnvironment=__webpack_require__(179),FallbackCompositionState=__webpack_require__(244),SyntheticCompositionEvent=__webpack_require__(246),SyntheticInputEvent=__webpack_require__(248),keyOf=__webpack_require__(249),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){return[extractCompositionEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget),extractBeforeInputEvent(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget)]}};module.exports=BeforeInputEventPlugin},function(module,exports,__webpack_require__){"use strict";function listenerAtPhase(id,event,propagationPhase){var registrationName=event.dispatchConfig.phasedRegistrationNames[propagationPhase];return getListener(id,registrationName)}function accumulateDirectionalDispatches(domID,upwards,event){var phase=upwards?PropagationPhases.bubbled:PropagationPhases.captured,listener=listenerAtPhase(domID,event,phase);listener&&(event._dispatchListeners=accumulateInto(event._dispatchListeners,listener),event._dispatchIDs=accumulateInto(event._dispatchIDs,domID))}function accumulateTwoPhaseDispatchesSingle(event){event&&event.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(event.dispatchMarker,accumulateDirectionalDispatches,event)}function accumulateTwoPhaseDispatchesSingleSkipTarget(event){event&&event.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(event.dispatchMarker,accumulateDirectionalDispatches,event)}function accumulateDispatches(id,ignoredDirection,event){if(event&&event.dispatchConfig.registrationName){var registrationName=event.dispatchConfig.registrationName,listener=getListener(id,registrationName);listener&&(event._dispatchListeners=accumulateInto(event._dispatchListeners,listener),event._dispatchIDs=accumulateInto(event._dispatchIDs,id))}}function accumulateDirectDispatchesSingle(event){event&&event.dispatchConfig.registrationName&&accumulateDispatches(event.dispatchMarker,null,event)}function accumulateTwoPhaseDispatches(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(events){forEachAccumulated(events,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(leave,enter,fromID,toID){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(fromID,toID,accumulateDispatches,leave,enter)}function accumulateDirectDispatches(events){forEachAccumulated(events,accumulateDirectDispatchesSingle)}var EventConstants=__webpack_require__(200),EventPluginHub=__webpack_require__(201),accumulateInto=(__webpack_require__(195),__webpack_require__(205)),forEachAccumulated=__webpack_require__(206),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators},function(module,exports,__webpack_require__){"use strict";function FallbackCompositionState(root){this._root=root,this._startText=this.getText(),this._fallbackText=null}var PooledClass=__webpack_require__(226),assign=__webpack_require__(209),getTextContentAccessor=__webpack_require__(245);assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var start,end,startValue=this._startText,startLength=startValue.length,endValue=this.getText(),endLength=endValue.length;for(start=0;start<startLength&&startValue[start]===endValue[start];start++);var minEnd=startLength-start;for(end=1;end<=minEnd&&startValue[startLength-end]===endValue[endLength-end];end++);var sliceTail=end>1?1-end:void 0;return this._fallbackText=endValue.slice(start,sliceTail),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState},function(module,exports,__webpack_require__){"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=__webpack_require__(179),contentKey=null;module.exports=getTextContentAccessor},function(module,exports,__webpack_require__){"use strict";function SyntheticCompositionEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(247),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){this.dispatchConfig=dispatchConfig,this.dispatchMarker=dispatchMarker,this.nativeEvent=nativeEvent;var Interface=this.constructor.Interface;for(var propName in Interface)if(Interface.hasOwnProperty(propName)){var normalize=Interface[propName];normalize?this[propName]=normalize(nativeEvent):"target"===propName?this.target=nativeEventTarget:this[propName]=nativeEvent[propName]}var defaultPrevented=null!=nativeEvent.defaultPrevented?nativeEvent.defaultPrevented:nativeEvent.returnValue===!1;defaultPrevented?this.isDefaultPrevented=emptyFunction.thatReturnsTrue:this.isDefaultPrevented=emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=__webpack_require__(226),assign=__webpack_require__(209),emptyFunction=__webpack_require__(185),EventInterface=(__webpack_require__(195),{type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null});assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var event=this.nativeEvent;event&&(event.preventDefault?event.preventDefault():event.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var event=this.nativeEvent;event&&(event.stopPropagation?event.stopPropagation():event.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var Interface=this.constructor.Interface;for(var propName in Interface)this[propName]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(Class,Interface){var Super=this,prototype=Object.create(Super.prototype);assign(prototype,Class.prototype),Class.prototype=prototype,Class.prototype.constructor=Class,Class.Interface=assign({},Super.Interface,Interface),Class.augmentClass=Super.augmentClass,PooledClass.addPoolingTo(Class,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticInputEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(247),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent},function(module,exports){"use strict";var keyOf=function(oneKeyObj){var key;for(key in oneKeyObj)if(oneKeyObj.hasOwnProperty(key))return key;return null};module.exports=keyOf},function(module,exports,__webpack_require__){"use strict";function shouldUseChangeEvent(elem){var nodeName=elem.nodeName&&elem.nodeName.toLowerCase();return"select"===nodeName||"input"===nodeName&&"file"===elem.type}function manualDispatchChangeEvent(nativeEvent){var event=SyntheticEvent.getPooled(eventTypes.change,activeElementID,nativeEvent,getEventTarget(nativeEvent));EventPropagators.accumulateTwoPhaseDispatches(event),ReactUpdates.batchedUpdates(runEventInBatch,event)}function runEventInBatch(event){EventPluginHub.enqueueEvents(event),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(target,targetID){activeElement=target,activeElementID=targetID,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topChange)return topLevelTargetID}function handleEventsForChangeEventIE8(topLevelType,topLevelTarget,topLevelTargetID){topLevelType===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(topLevelTarget,topLevelTargetID)):topLevelType===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(target,targetID){activeElement=target,activeElementID=targetID,activeElementValue=target.value,activeElementValueProp=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(nativeEvent){if("value"===nativeEvent.propertyName){var value=nativeEvent.srcElement.value;value!==activeElementValue&&(activeElementValue=value,manualDispatchChangeEvent(nativeEvent))}}function getTargetIDForInputEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topInput)return topLevelTargetID}function handleEventsForInputEventIE(topLevelType,topLevelTarget,topLevelTargetID){topLevelType===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(topLevelTarget,topLevelTargetID)):topLevelType===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(topLevelType,topLevelTarget,topLevelTargetID){if((topLevelType===topLevelTypes.topSelectionChange||topLevelType===topLevelTypes.topKeyUp||topLevelType===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(elem){return elem.nodeName&&"input"===elem.nodeName.toLowerCase()&&("checkbox"===elem.type||"radio"===elem.type)}function getTargetIDForClickEvent(topLevelType,topLevelTarget,topLevelTargetID){if(topLevelType===topLevelTypes.topClick)return topLevelTargetID}var EventConstants=__webpack_require__(200),EventPluginHub=__webpack_require__(201),EventPropagators=__webpack_require__(243),ExecutionEnvironment=__webpack_require__(179),ReactUpdates=__webpack_require__(224),SyntheticEvent=__webpack_require__(247),getEventTarget=__webpack_require__(251),isEventSupported=__webpack_require__(210),isTextInputElement=__webpack_require__(252),keyOf=__webpack_require__(249),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(val){activeElementValue=""+val,activeElementValueProp.set.call(this,val)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var getTargetIDFunc,handleEventFunc;if(shouldUseChangeEvent(topLevelTarget)?doesChangeEventBubble?getTargetIDFunc=getTargetIDForChangeEvent:handleEventFunc=handleEventsForChangeEventIE8:isTextInputElement(topLevelTarget)?isInputEventSupported?getTargetIDFunc=getTargetIDForInputEvent:(getTargetIDFunc=getTargetIDForInputEventIE,handleEventFunc=handleEventsForInputEventIE):shouldUseClickEvent(topLevelTarget)&&(getTargetIDFunc=getTargetIDForClickEvent),getTargetIDFunc){var targetID=getTargetIDFunc(topLevelType,topLevelTarget,topLevelTargetID);if(targetID){var event=SyntheticEvent.getPooled(eventTypes.change,targetID,nativeEvent,nativeEventTarget);return event.type="change",EventPropagators.accumulateTwoPhaseDispatches(event),event}}handleEventFunc&&handleEventFunc(topLevelType,topLevelTarget,topLevelTargetID)}};module.exports=ChangeEventPlugin},function(module,exports){"use strict";function getEventTarget(nativeEvent){var target=nativeEvent.target||nativeEvent.srcElement||window;return 3===target.nodeType?target.parentNode:target}module.exports=getEventTarget},function(module,exports){"use strict";function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&("input"===nodeName&&supportedInputTypes[elem.type]||"textarea"===nodeName)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement},function(module,exports){"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex},function(module,exports,__webpack_require__){"use strict";var keyOf=__webpack_require__(249),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null
})];module.exports=DefaultEventPluginOrder},function(module,exports,__webpack_require__){"use strict";var EventConstants=__webpack_require__(200),EventPropagators=__webpack_require__(243),SyntheticMouseEvent=__webpack_require__(256),ReactMount=__webpack_require__(198),keyOf=__webpack_require__(249),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){if(topLevelType===topLevelTypes.topMouseOver&&(nativeEvent.relatedTarget||nativeEvent.fromElement))return null;if(topLevelType!==topLevelTypes.topMouseOut&&topLevelType!==topLevelTypes.topMouseOver)return null;var win;if(topLevelTarget.window===topLevelTarget)win=topLevelTarget;else{var doc=topLevelTarget.ownerDocument;win=doc?doc.defaultView||doc.parentWindow:window}var from,to,fromID="",toID="";if(topLevelType===topLevelTypes.topMouseOut?(from=topLevelTarget,fromID=topLevelTargetID,to=getFirstReactDOM(nativeEvent.relatedTarget||nativeEvent.toElement),to?toID=ReactMount.getID(to):to=win,to=to||win):(from=win,to=topLevelTarget,toID=topLevelTargetID),from===to)return null;var leave=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,fromID,nativeEvent,nativeEventTarget);leave.type="mouseleave",leave.target=from,leave.relatedTarget=to;var enter=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,toID,nativeEvent,nativeEventTarget);return enter.type="mouseenter",enter.target=to,enter.relatedTarget=from,EventPropagators.accumulateEnterLeaveDispatches(leave,enter,fromID,toID),extractedEvents[0]=leave,extractedEvents[1]=enter,extractedEvents}};module.exports=EnterLeaveEventPlugin},function(module,exports,__webpack_require__){"use strict";function SyntheticMouseEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(257),ViewportMetrics=__webpack_require__(208),getEventModifierState=__webpack_require__(258),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(event){var button=event.button;return"which"in event?button:2===button?2:4===button?1:0},buttons:null,relatedTarget:function(event){return event.relatedTarget||(event.fromElement===event.srcElement?event.toElement:event.fromElement)},pageX:function(event){return"pageX"in event?event.pageX:event.clientX+ViewportMetrics.currentScrollLeft},pageY:function(event){return"pageY"in event?event.pageY:event.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticUIEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(247),getEventTarget=__webpack_require__(251),UIEventInterface={view:function(event){if(event.view)return event.view;var target=getEventTarget(event);if(null!=target&&target.window===target)return target;var doc=target.ownerDocument;return doc?doc.defaultView||doc.parentWindow:window},detail:function(event){return event.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent},function(module,exports){"use strict";function modifierStateGetter(keyArg){var syntheticEvent=this,nativeEvent=syntheticEvent.nativeEvent;if(nativeEvent.getModifierState)return nativeEvent.getModifierState(keyArg);var keyProp=modifierKeyToProp[keyArg];return!!keyProp&&!!nativeEvent[keyProp]}function getEventModifierState(nativeEvent){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState},function(module,exports,__webpack_require__){"use strict";var hasSVG,DOMProperty=__webpack_require__(193),ExecutionEnvironment=__webpack_require__(179),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,"default":HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,"typeof":MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:MUST_USE_ATTRIBUTE,autoCorrect:MUST_USE_ATTRIBUTE,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig},function(module,exports,__webpack_require__){"use strict";var findDOMNode=(__webpack_require__(217),__webpack_require__(261)),didWarnKey=(__webpack_require__(195),"_getDOMNodeDidWarn"),ReactBrowserComponentMixin={getDOMNode:function(){return this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin},function(module,exports,__webpack_require__){"use strict";function findDOMNode(componentOrElement){return null==componentOrElement?null:1===componentOrElement.nodeType?componentOrElement:ReactInstanceMap.has(componentOrElement)?ReactMount.getNodeFromInstance(componentOrElement):(null!=componentOrElement.render&&"function"==typeof componentOrElement.render?invariant(!1):void 0,void invariant(!1))}var ReactInstanceMap=(__webpack_require__(175),__webpack_require__(217)),ReactMount=__webpack_require__(198),invariant=__webpack_require__(183);__webpack_require__(195);module.exports=findDOMNode},function(module,exports,__webpack_require__){"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=__webpack_require__(224),Transaction=__webpack_require__(227),assign=__webpack_require__(209),emptyFunction=__webpack_require__(185),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(callback,a,b,c,d,e){var alreadyBatchingUpdates=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,alreadyBatchingUpdates?callback(a,b,c,d,e):transaction.perform(callback,null,a,b,c,d,e)}};module.exports=ReactDefaultBatchingStrategy},function(module,exports,__webpack_require__){"use strict";function legacyGetDOMNode(){return this}function legacyIsMounted(){var component=this._reactInternalComponent;return!!component}function legacySetStateEtc(){}function legacySetProps(partialProps,callback){var component=this._reactInternalComponent;component&&(ReactUpdateQueue.enqueueSetPropsInternal(component,partialProps),callback&&ReactUpdateQueue.enqueueCallbackInternal(component,callback))}function legacyReplaceProps(partialProps,callback){var component=this._reactInternalComponent;component&&(ReactUpdateQueue.enqueueReplacePropsInternal(component,partialProps),callback&&ReactUpdateQueue.enqueueCallbackInternal(component,callback))}function assertValidProps(component,props){props&&(null!=props.dangerouslySetInnerHTML&&(null!=props.children?invariant(!1):void 0,"object"==typeof props.dangerouslySetInnerHTML&&HTML in props.dangerouslySetInnerHTML?void 0:invariant(!1)),null!=props.style&&"object"!=typeof props.style?invariant(!1):void 0)}function enqueuePutListener(id,registrationName,listener,transaction){var container=ReactMount.findReactContainerForID(id);if(container){var doc=container.nodeType===ELEMENT_NODE_TYPE?container.ownerDocument:container;listenTo(registrationName,doc)}transaction.getReactMountReady().enqueue(putListener,{id:id,registrationName:registrationName,listener:listener})}function putListener(){var listenerToPut=this;ReactBrowserEventEmitter.putListener(listenerToPut.id,listenerToPut.registrationName,listenerToPut.listener)}function trapBubbledEventsLocal(){var inst=this;inst._rootNodeID?void 0:invariant(!1);var node=ReactMount.getNode(inst._rootNodeID);switch(node?void 0:invariant(!1),inst._tag){case"iframe":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",node)];break;case"video":case"audio":inst._wrapperState.listeners=[];for(var event in mediaEvents)mediaEvents.hasOwnProperty(event)&&inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[event],mediaEvents[event],node));break;case"img":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",node),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",node)];break;case"form":inst._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",node),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",node)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(tag){hasOwnProperty.call(validatedTagCache,tag)||(VALID_TAG_REGEX.test(tag)?void 0:invariant(!1),validatedTagCache[tag]=!0)}function isCustomComponent(tagName,props){return tagName.indexOf("-")>=0||null!=props.is}function ReactDOMComponent(tag){validateDangerousTag(tag),this._tag=tag.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var AutoFocusUtils=__webpack_require__(264),CSSPropertyOperations=__webpack_require__(266),DOMProperty=__webpack_require__(193),DOMPropertyOperations=__webpack_require__(192),EventConstants=__webpack_require__(200),ReactBrowserEventEmitter=__webpack_require__(199),ReactComponentBrowserEnvironment=__webpack_require__(196),ReactDOMButton=__webpack_require__(274),ReactDOMInput=__webpack_require__(275),ReactDOMOption=__webpack_require__(279),ReactDOMSelect=__webpack_require__(282),ReactDOMTextarea=__webpack_require__(283),ReactMount=__webpack_require__(198),ReactMultiChild=__webpack_require__(284),ReactPerf=__webpack_require__(188),ReactUpdateQueue=__webpack_require__(223),assign=__webpack_require__(209),canDefineProperty=__webpack_require__(213),escapeTextContentForBrowser=__webpack_require__(191),invariant=__webpack_require__(183),keyOf=(__webpack_require__(210),__webpack_require__(249)),setInnerHTML=__webpack_require__(189),setTextContent=__webpack_require__(190),deleteListener=(__webpack_require__(287),__webpack_require__(240),__webpack_require__(195),ReactBrowserEventEmitter.deleteListener),listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1,mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},VALID_TAG_REGEX=(assign({menuitem:!0},omittedCloseTags),/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/),validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(element){this._currentElement=element},mountComponent:function(rootID,transaction,context){this._rootNodeID=rootID;var props=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},transaction.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":props=ReactDOMButton.getNativeProps(this,props,context);break;case"input":ReactDOMInput.mountWrapper(this,props,context),props=ReactDOMInput.getNativeProps(this,props,context);break;case"option":ReactDOMOption.mountWrapper(this,props,context),props=ReactDOMOption.getNativeProps(this,props,context);break;case"select":ReactDOMSelect.mountWrapper(this,props,context),props=ReactDOMSelect.getNativeProps(this,props,context),context=ReactDOMSelect.processChildContext(this,props,context);break;case"textarea":ReactDOMTextarea.mountWrapper(this,props,context),props=ReactDOMTextarea.getNativeProps(this,props,context)}assertValidProps(this,props);var mountImage;if(transaction.useCreateElement){var ownerDocument=context[ReactMount.ownerDocumentContextKey],el=ownerDocument.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(el,this._rootNodeID),ReactMount.getID(el),this._updateDOMProperties({},props,transaction,el),this._createInitialChildren(transaction,props,context,el),mountImage=el}else{var tagOpen=this._createOpenTagMarkupAndPutListeners(transaction,props),tagContent=this._createContentMarkup(transaction,props,context);mountImage=!tagContent&&omittedCloseTags[this._tag]?tagOpen+"/>":tagOpen+">"+tagContent+"</"+this._currentElement.type+">"}switch(this._tag){case"input":transaction.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":props.autoFocus&&transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return mountImage},_createOpenTagMarkupAndPutListeners:function(transaction,props){var ret="<"+this._currentElement.type;for(var propKey in props)if(props.hasOwnProperty(propKey)){var propValue=props[propKey];if(null!=propValue)if(registrationNameModules.hasOwnProperty(propKey))propValue&&enqueuePutListener(this._rootNodeID,propKey,propValue,transaction);else{propKey===STYLE&&(propValue&&(propValue=this._previousStyleCopy=assign({},props.style)),propValue=CSSPropertyOperations.createMarkupForStyles(propValue));var markup=null;null!=this._tag&&isCustomComponent(this._tag,props)?propKey!==CHILDREN&&(markup=DOMPropertyOperations.createMarkupForCustomAttribute(propKey,propValue)):markup=DOMPropertyOperations.createMarkupForProperty(propKey,propValue),markup&&(ret+=" "+markup)}}if(transaction.renderToStaticMarkup)return ret;var markupForID=DOMPropertyOperations.createMarkupForID(this._rootNodeID);return ret+" "+markupForID},_createContentMarkup:function(transaction,props,context){var ret="",innerHTML=props.dangerouslySetInnerHTML;if(null!=innerHTML)null!=innerHTML.__html&&(ret=innerHTML.__html);else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null,childrenToUse=null!=contentToUse?null:props.children;if(null!=contentToUse)ret=escapeTextContentForBrowser(contentToUse);else if(null!=childrenToUse){var mountImages=this.mountChildren(childrenToUse,transaction,context);ret=mountImages.join("")}}return newlineEatingTags[this._tag]&&"\n"===ret.charAt(0)?"\n"+ret:ret},_createInitialChildren:function(transaction,props,context,el){var innerHTML=props.dangerouslySetInnerHTML;if(null!=innerHTML)null!=innerHTML.__html&&setInnerHTML(el,innerHTML.__html);else{var contentToUse=CONTENT_TYPES[typeof props.children]?props.children:null,childrenToUse=null!=contentToUse?null:props.children;if(null!=contentToUse)setTextContent(el,contentToUse);else if(null!=childrenToUse)for(var mountImages=this.mountChildren(childrenToUse,transaction,context),i=0;i<mountImages.length;i++)el.appendChild(mountImages[i])}},receiveComponent:function(nextElement,transaction,context){var prevElement=this._currentElement;this._currentElement=nextElement,this.updateComponent(transaction,prevElement,nextElement,context)},updateComponent:function(transaction,prevElement,nextElement,context){var lastProps=prevElement.props,nextProps=this._currentElement.props;switch(this._tag){case"button":lastProps=ReactDOMButton.getNativeProps(this,lastProps),nextProps=ReactDOMButton.getNativeProps(this,nextProps);break;case"input":ReactDOMInput.updateWrapper(this),lastProps=ReactDOMInput.getNativeProps(this,lastProps),nextProps=ReactDOMInput.getNativeProps(this,nextProps);break;case"option":lastProps=ReactDOMOption.getNativeProps(this,lastProps),nextProps=ReactDOMOption.getNativeProps(this,nextProps);break;case"select":lastProps=ReactDOMSelect.getNativeProps(this,lastProps),nextProps=ReactDOMSelect.getNativeProps(this,nextProps);break;case"textarea":ReactDOMTextarea.updateWrapper(this),lastProps=ReactDOMTextarea.getNativeProps(this,lastProps),nextProps=ReactDOMTextarea.getNativeProps(this,nextProps)}assertValidProps(this,nextProps),this._updateDOMProperties(lastProps,nextProps,transaction,null),this._updateDOMChildren(lastProps,nextProps,transaction,context),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=nextProps),"select"===this._tag&&transaction.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(lastProps,nextProps,transaction,node){var propKey,styleName,styleUpdates;for(propKey in lastProps)if(!nextProps.hasOwnProperty(propKey)&&lastProps.hasOwnProperty(propKey))if(propKey===STYLE){var lastStyle=this._previousStyleCopy;for(styleName in lastStyle)lastStyle.hasOwnProperty(styleName)&&(styleUpdates=styleUpdates||{},styleUpdates[styleName]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(propKey)?lastProps[propKey]&&deleteListener(this._rootNodeID,propKey):(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey))&&(node||(node=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(node,propKey));for(propKey in nextProps){var nextProp=nextProps[propKey],lastProp=propKey===STYLE?this._previousStyleCopy:lastProps[propKey];if(nextProps.hasOwnProperty(propKey)&&nextProp!==lastProp)if(propKey===STYLE)if(nextProp?nextProp=this._previousStyleCopy=assign({},nextProp):this._previousStyleCopy=null,lastProp){for(styleName in lastProp)!lastProp.hasOwnProperty(styleName)||nextProp&&nextProp.hasOwnProperty(styleName)||(styleUpdates=styleUpdates||{},styleUpdates[styleName]="");for(styleName in nextProp)nextProp.hasOwnProperty(styleName)&&lastProp[styleName]!==nextProp[styleName]&&(styleUpdates=styleUpdates||{},styleUpdates[styleName]=nextProp[styleName])}else styleUpdates=nextProp;else registrationNameModules.hasOwnProperty(propKey)?nextProp?enqueuePutListener(this._rootNodeID,propKey,nextProp,transaction):lastProp&&deleteListener(this._rootNodeID,propKey):isCustomComponent(this._tag,nextProps)?(node||(node=ReactMount.getNode(this._rootNodeID)),propKey===CHILDREN&&(nextProp=null),DOMPropertyOperations.setValueForAttribute(node,propKey,nextProp)):(DOMProperty.properties[propKey]||DOMProperty.isCustomAttribute(propKey))&&(node||(node=ReactMount.getNode(this._rootNodeID)),null!=nextProp?DOMPropertyOperations.setValueForProperty(node,propKey,nextProp):DOMPropertyOperations.deleteValueForProperty(node,propKey))}styleUpdates&&(node||(node=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(node,styleUpdates))},_updateDOMChildren:function(lastProps,nextProps,transaction,context){var lastContent=CONTENT_TYPES[typeof lastProps.children]?lastProps.children:null,nextContent=CONTENT_TYPES[typeof nextProps.children]?nextProps.children:null,lastHtml=lastProps.dangerouslySetInnerHTML&&lastProps.dangerouslySetInnerHTML.__html,nextHtml=nextProps.dangerouslySetInnerHTML&&nextProps.dangerouslySetInnerHTML.__html,lastChildren=null!=lastContent?null:lastProps.children,nextChildren=null!=nextContent?null:nextProps.children,lastHasContentOrHtml=null!=lastContent||null!=lastHtml,nextHasContentOrHtml=null!=nextContent||null!=nextHtml;null!=lastChildren&&null==nextChildren?this.updateChildren(null,transaction,context):lastHasContentOrHtml&&!nextHasContentOrHtml&&this.updateTextContent(""),null!=nextContent?lastContent!==nextContent&&this.updateTextContent(""+nextContent):null!=nextHtml?lastHtml!==nextHtml&&this.updateMarkup(""+nextHtml):null!=nextChildren&&this.updateChildren(nextChildren,transaction,context)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var listeners=this._wrapperState.listeners;if(listeners)for(var i=0;i<listeners.length;i++)listeners[i].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var node=this._nodeWithLegacyProperties;node._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var node=ReactMount.getNode(this._rootNodeID);node._reactInternalComponent=this,node.getDOMNode=legacyGetDOMNode,node.isMounted=legacyIsMounted,node.setState=legacySetStateEtc,node.replaceState=legacySetStateEtc,node.forceUpdate=legacySetStateEtc,node.setProps=legacySetProps,node.replaceProps=legacyReplaceProps,node.props=this._currentElement.props,this._nodeWithLegacyProperties=node}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent},function(module,exports,__webpack_require__){"use strict";var ReactMount=__webpack_require__(198),findDOMNode=__webpack_require__(261),focusNode=__webpack_require__(265),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils},function(module,exports){"use strict";function focusNode(node){try{node.focus()}catch(e){}}module.exports=focusNode},function(module,exports,__webpack_require__){"use strict";var CSSProperty=__webpack_require__(267),ExecutionEnvironment=__webpack_require__(179),ReactPerf=__webpack_require__(188),dangerousStyleValue=(__webpack_require__(268),__webpack_require__(270)),hyphenateStyleName=__webpack_require__(271),memoizeStringOnly=__webpack_require__(273),processStyleName=(__webpack_require__(195),memoizeStringOnly(function(styleName){return hyphenateStyleName(styleName)})),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var CSSPropertyOperations={createMarkupForStyles:function(styles){var serialized="";for(var styleName in styles)if(styles.hasOwnProperty(styleName)){var styleValue=styles[styleName];null!=styleValue&&(serialized+=processStyleName(styleName)+":",serialized+=dangerousStyleValue(styleName,styleValue)+";")}return serialized||null},setValueForStyles:function(node,styles){var style=node.style;for(var styleName in styles)if(styles.hasOwnProperty(styleName)){var styleValue=dangerousStyleValue(styleName,styles[styleName]);if("float"===styleName&&(styleName=styleFloatAccessor),styleValue)style[styleName]=styleValue;else{var expansion=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[styleName];if(expansion)for(var individualStyleName in expansion)style[individualStyleName]="";else style[styleName]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations},function(module,exports){"use strict";function prefixKey(prefix,key){return prefix+key.charAt(0).toUpperCase()+key.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(prop){prefixes.forEach(function(prefix){isUnitlessNumber[prefixKey(prefix,prop)]=isUnitlessNumber[prop]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty},function(module,exports,__webpack_require__){"use strict";function camelizeStyleName(string){return camelize(string.replace(msPattern,"ms-"))}var camelize=__webpack_require__(269),msPattern=/^-ms-/;module.exports=camelizeStyleName},function(module,exports){"use strict";function camelize(string){return string.replace(_hyphenPattern,function(_,character){return character.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize},function(module,exports,__webpack_require__){"use strict";function dangerousStyleValue(name,value){var isEmpty=null==value||"boolean"==typeof value||""===value;if(isEmpty)return"";var isNonNumeric=isNaN(value);return isNonNumeric||0===value||isUnitlessNumber.hasOwnProperty(name)&&isUnitlessNumber[name]?""+value:("string"==typeof value&&(value=value.trim()),value+"px")}var CSSProperty=__webpack_require__(267),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue},function(module,exports,__webpack_require__){"use strict";function hyphenateStyleName(string){return hyphenate(string).replace(msPattern,"-ms-")}var hyphenate=__webpack_require__(272),msPattern=/^ms-/;module.exports=hyphenateStyleName},function(module,exports){"use strict";function hyphenate(string){return string.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate},function(module,exports){"use strict";function memoizeStringOnly(callback){var cache={};return function(string){return cache.hasOwnProperty(string)||(cache[string]=callback.call(this,string)),cache[string]}}module.exports=memoizeStringOnly},function(module,exports){"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,
onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(inst,props,context){if(!props.disabled)return props;var nativeProps={};for(var key in props)props.hasOwnProperty(key)&&!mouseListenerNames[key]&&(nativeProps[key]=props[key]);return nativeProps}};module.exports=ReactDOMButton},function(module,exports,__webpack_require__){"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);ReactUpdates.asap(forceUpdateIfMounted,this);var name=props.name;if("radio"===props.type&&null!=name){for(var rootNode=ReactMount.getNode(this._rootNodeID),queryRoot=rootNode;queryRoot.parentNode;)queryRoot=queryRoot.parentNode;for(var group=queryRoot.querySelectorAll("input[name="+JSON.stringify(""+name)+'][type="radio"]'),i=0;i<group.length;i++){var otherNode=group[i];if(otherNode!==rootNode&&otherNode.form===rootNode.form){var otherID=ReactMount.getID(otherNode);otherID?void 0:invariant(!1);var otherInstance=instancesByReactID[otherID];otherInstance?void 0:invariant(!1),ReactUpdates.asap(forceUpdateIfMounted,otherInstance)}}}return returnValue}var ReactDOMIDOperations=__webpack_require__(197),LinkedValueUtils=__webpack_require__(276),ReactMount=__webpack_require__(198),ReactUpdates=__webpack_require__(224),assign=__webpack_require__(209),invariant=__webpack_require__(183),instancesByReactID={},ReactDOMInput={getNativeProps:function(inst,props,context){var value=LinkedValueUtils.getValue(props),checked=LinkedValueUtils.getChecked(props),nativeProps=assign({},props,{defaultChecked:void 0,defaultValue:void 0,value:null!=value?value:inst._wrapperState.initialValue,checked:null!=checked?checked:inst._wrapperState.initialChecked,onChange:inst._wrapperState.onChange});return nativeProps},mountWrapper:function(inst,props){var defaultValue=props.defaultValue;inst._wrapperState={initialChecked:props.defaultChecked||!1,initialValue:null!=defaultValue?defaultValue:null,onChange:_handleChange.bind(inst)}},mountReadyWrapper:function(inst){instancesByReactID[inst._rootNodeID]=inst},unmountWrapper:function(inst){delete instancesByReactID[inst._rootNodeID]},updateWrapper:function(inst){var props=inst._currentElement.props,checked=props.checked;null!=checked&&ReactDOMIDOperations.updatePropertyByID(inst._rootNodeID,"checked",checked||!1);var value=LinkedValueUtils.getValue(props);null!=value&&ReactDOMIDOperations.updatePropertyByID(inst._rootNodeID,"value",""+value)}};module.exports=ReactDOMInput},function(module,exports,__webpack_require__){"use strict";function _assertSingleLink(inputProps){null!=inputProps.checkedLink&&null!=inputProps.valueLink?invariant(!1):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.value||null!=inputProps.onChange?invariant(!1):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.checked||null!=inputProps.onChange?invariant(!1):void 0}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}var ReactPropTypes=__webpack_require__(277),ReactPropTypeLocations=__webpack_require__(235),invariant=__webpack_require__(183),hasReadOnlyValue=(__webpack_require__(195),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),propTypes={value:function(props,propName,componentName){return!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(props,propName,componentName){return!props[propName]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName))var error=propTypes[propName](props,propName,tagName,ReactPropTypeLocations.prop,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;getDeclarationErrorAddendum(owner)}}},getValue:function(inputProps){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.value):inputProps.value},getChecked:function(inputProps){return inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.value):inputProps.checked},executeOnChange:function(inputProps,event){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.requestChange(event.target.value)):inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.requestChange(event.target.checked)):inputProps.onChange?inputProps.onChange.call(void 0,event):void 0}};module.exports=LinkedValueUtils},function(module,exports,__webpack_require__){"use strict";function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,null==props[propName]){var locationName=ReactPropTypeLocationNames[location];return isRequired?new Error("Required "+locationName+" `"+propFullName+"` was not specified in "+("`"+componentName+"`.")):null}return validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location],preciseType=getPreciseType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){if(!ReactElement.isValidElement(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location],expectedClassName=expectedClass.name||ANONYMOUS,actualClassName=getClassName(props[propName]);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(propValue===expectedValues[i])return null;var locationName=ReactPropTypeLocationNames[location],valuesString=JSON.stringify(expectedValues);return new Error("Invalid "+locationName+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(Array.isArray(expectedValues)?validate:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(null==checker(props,propName,componentName,location,propFullName,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null}var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(Array.isArray(arrayOfTypeCheckers)?validate:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(error)return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||ReactElement.isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":propType}function getPreciseType(propValue){var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:"<<anonymous>>"}var ReactElement=__webpack_require__(212),ReactPropTypeLocationNames=__webpack_require__(236),emptyFunction=__webpack_require__(185),getIteratorFn=__webpack_require__(278),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes},function(module,exports){"use strict";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn},function(module,exports,__webpack_require__){"use strict";var ReactChildren=__webpack_require__(280),ReactDOMSelect=__webpack_require__(282),assign=__webpack_require__(209),valueContextKey=(__webpack_require__(195),ReactDOMSelect.valueContextKey),ReactDOMOption={mountWrapper:function(inst,props,context){var selectValue=context[valueContextKey],selected=null;if(null!=selectValue)if(selected=!1,Array.isArray(selectValue)){for(var i=0;i<selectValue.length;i++)if(""+selectValue[i]==""+props.value){selected=!0;break}}else selected=""+selectValue==""+props.value;inst._wrapperState={selected:selected}},getNativeProps:function(inst,props,context){var nativeProps=assign({selected:void 0,children:void 0},props);null!=inst._wrapperState.selected&&(nativeProps.selected=inst._wrapperState.selected);var content="";return ReactChildren.forEach(props.children,function(child){null!=child&&("string"!=typeof child&&"number"!=typeof child||(content+=child))}),content&&(nativeProps.children=content),nativeProps}};module.exports=ReactDOMOption},function(module,exports,__webpack_require__){"use strict";function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(forEachFunction,forEachContext){this.func=forEachFunction,this.context=forEachContext,this.count=0}function forEachSingleChild(bookKeeping,child,name){var func=bookKeeping.func,context=bookKeeping.context;func.call(context,child,bookKeeping.count++)}function forEachChildren(children,forEachFunc,forEachContext){if(null==children)return children;var traverseContext=ForEachBookKeeping.getPooled(forEachFunc,forEachContext);traverseAllChildren(children,forEachSingleChild,traverseContext),ForEachBookKeeping.release(traverseContext)}function MapBookKeeping(mapResult,keyPrefix,mapFunction,mapContext){this.result=mapResult,this.keyPrefix=keyPrefix,this.func=mapFunction,this.context=mapContext,this.count=0}function mapSingleChildIntoContext(bookKeeping,child,childKey){var result=bookKeeping.result,keyPrefix=bookKeeping.keyPrefix,func=bookKeeping.func,context=bookKeeping.context,mappedChild=func.call(context,child,bookKeeping.count++);Array.isArray(mappedChild)?mapIntoWithKeyPrefixInternal(mappedChild,result,childKey,emptyFunction.thatReturnsArgument):null!=mappedChild&&(ReactElement.isValidElement(mappedChild)&&(mappedChild=ReactElement.cloneAndReplaceKey(mappedChild,keyPrefix+(mappedChild!==child?escapeUserProvidedKey(mappedChild.key||"")+"/":"")+childKey)),result.push(mappedChild))}function mapIntoWithKeyPrefixInternal(children,array,prefix,func,context){var escapedPrefix="";null!=prefix&&(escapedPrefix=escapeUserProvidedKey(prefix)+"/");var traverseContext=MapBookKeeping.getPooled(array,escapedPrefix,func,context);traverseAllChildren(children,mapSingleChildIntoContext,traverseContext),MapBookKeeping.release(traverseContext)}function mapChildren(children,func,context){if(null==children)return children;var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,func,context),result}function forEachSingleChildDummy(traverseContext,child,name){return null}function countChildren(children,context){return traverseAllChildren(children,forEachSingleChildDummy,null)}function toArray(children){var result=[];return mapIntoWithKeyPrefixInternal(children,result,null,emptyFunction.thatReturnsArgument),result}var PooledClass=__webpack_require__(226),ReactElement=__webpack_require__(212),emptyFunction=__webpack_require__(185),traverseAllChildren=__webpack_require__(281),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren},function(module,exports,__webpack_require__){"use strict";function userProvidedKeyEscaper(match){return userProvidedKeyEscaperLookup[match]}function getComponentKey(component,index){return component&&null!=component.key?wrapUserProvidedKey(component.key):index.toString(36)}function escapeUserProvidedKey(text){return(""+text).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(key){return"$"+escapeUserProvidedKey(key)}function traverseAllChildrenImpl(children,nameSoFar,callback,traverseContext){var type=typeof children;if("undefined"!==type&&"boolean"!==type||(children=null),null===children||"string"===type||"number"===type||ReactElement.isValidElement(children))return callback(traverseContext,children,""===nameSoFar?SEPARATOR+getComponentKey(children,0):nameSoFar),1;var child,nextName,subtreeCount=0,nextNamePrefix=""===nameSoFar?SEPARATOR:nameSoFar+SUBSEPARATOR;if(Array.isArray(children))for(var i=0;i<children.length;i++)child=children[i],nextName=nextNamePrefix+getComponentKey(child,i),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else{var iteratorFn=getIteratorFn(children);if(iteratorFn){var step,iterator=iteratorFn.call(children);if(iteratorFn!==children.entries)for(var ii=0;!(step=iterator.next()).done;)child=step.value,nextName=nextNamePrefix+getComponentKey(child,ii++),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext);else for(;!(step=iterator.next()).done;){var entry=step.value;entry&&(child=entry[1],nextName=nextNamePrefix+wrapUserProvidedKey(entry[0])+SUBSEPARATOR+getComponentKey(child,0),subtreeCount+=traverseAllChildrenImpl(child,nextName,callback,traverseContext))}}else if("object"===type){String(children);invariant(!1)}}return subtreeCount}function traverseAllChildren(children,callback,traverseContext){return null==children?0:traverseAllChildrenImpl(children,"",callback,traverseContext)}var ReactElement=(__webpack_require__(175),__webpack_require__(212)),ReactInstanceHandles=__webpack_require__(215),getIteratorFn=__webpack_require__(278),invariant=__webpack_require__(183),SEPARATOR=(__webpack_require__(195),ReactInstanceHandles.SEPARATOR),SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g;module.exports=traverseAllChildren},function(module,exports,__webpack_require__){"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var props=this._currentElement.props,value=LinkedValueUtils.getValue(props);null!=value&&updateOptions(this,Boolean(props.multiple),value)}}function updateOptions(inst,multiple,propValue){var selectedValue,i,options=ReactMount.getNode(inst._rootNodeID).options;if(multiple){for(selectedValue={},i=0;i<propValue.length;i++)selectedValue[""+propValue[i]]=!0;for(i=0;i<options.length;i++){var selected=selectedValue.hasOwnProperty(options[i].value);options[i].selected!==selected&&(options[i].selected=selected)}}else{for(selectedValue=""+propValue,i=0;i<options.length;i++)if(options[i].value===selectedValue)return void(options[i].selected=!0);options.length&&(options[0].selected=!0)}}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),returnValue}var LinkedValueUtils=__webpack_require__(276),ReactMount=__webpack_require__(198),ReactUpdates=__webpack_require__(224),assign=__webpack_require__(209),valueContextKey=(__webpack_require__(195),"__ReactDOMSelect_value$"+Math.random().toString(36).slice(2)),ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(inst,props,context){return assign({},props,{onChange:inst._wrapperState.onChange,value:void 0})},mountWrapper:function(inst,props){var value=LinkedValueUtils.getValue(props);inst._wrapperState={pendingUpdate:!1,initialValue:null!=value?value:props.defaultValue,onChange:_handleChange.bind(inst),wasMultiple:Boolean(props.multiple)}},processChildContext:function(inst,props,context){var childContext=assign({},context);return childContext[valueContextKey]=inst._wrapperState.initialValue,childContext},postUpdateWrapper:function(inst){var props=inst._currentElement.props;inst._wrapperState.initialValue=void 0;var wasMultiple=inst._wrapperState.wasMultiple;inst._wrapperState.wasMultiple=Boolean(props.multiple);var value=LinkedValueUtils.getValue(props);null!=value?(inst._wrapperState.pendingUpdate=!1,updateOptions(inst,Boolean(props.multiple),value)):wasMultiple!==Boolean(props.multiple)&&(null!=props.defaultValue?updateOptions(inst,Boolean(props.multiple),props.defaultValue):updateOptions(inst,Boolean(props.multiple),props.multiple?[]:""))}};module.exports=ReactDOMSelect},function(module,exports,__webpack_require__){"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(event){var props=this._currentElement.props,returnValue=LinkedValueUtils.executeOnChange(props,event);return ReactUpdates.asap(forceUpdateIfMounted,this),returnValue}var LinkedValueUtils=__webpack_require__(276),ReactDOMIDOperations=__webpack_require__(197),ReactUpdates=__webpack_require__(224),assign=__webpack_require__(209),invariant=__webpack_require__(183),ReactDOMTextarea=(__webpack_require__(195),{getNativeProps:function(inst,props,context){null!=props.dangerouslySetInnerHTML?invariant(!1):void 0;var nativeProps=assign({},props,{defaultValue:void 0,value:void 0,children:inst._wrapperState.initialValue,onChange:inst._wrapperState.onChange});return nativeProps},mountWrapper:function(inst,props){var defaultValue=props.defaultValue,children=props.children;null!=children&&(null!=defaultValue?invariant(!1):void 0,Array.isArray(children)&&(children.length<=1?void 0:invariant(!1),children=children[0]),defaultValue=""+children),null==defaultValue&&(defaultValue="");var value=LinkedValueUtils.getValue(props);inst._wrapperState={initialValue:""+(null!=value?value:defaultValue),onChange:_handleChange.bind(inst)}},updateWrapper:function(inst){var props=inst._currentElement.props,value=LinkedValueUtils.getValue(props);null!=value&&ReactDOMIDOperations.updatePropertyByID(inst._rootNodeID,"value",""+value)}});module.exports=ReactDOMTextarea},function(module,exports,__webpack_require__){"use strict";function enqueueInsertMarkup(parentID,markup,toIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(markup)-1,content:null,fromIndex:null,toIndex:toIndex})}function enqueueMove(parentID,fromIndex,toIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:fromIndex,toIndex:toIndex})}function enqueueRemove(parentID,fromIndex){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:fromIndex,toIndex:null})}function enqueueSetMarkup(parentID,markup){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:markup,fromIndex:null,toIndex:null})}function enqueueTextContent(parentID,textContent){updateQueue.push({parentID:parentID,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:textContent,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=__webpack_require__(234),ReactMultiChildUpdateTypes=__webpack_require__(186),ReactReconciler=(__webpack_require__(175),__webpack_require__(220)),ReactChildReconciler=__webpack_require__(285),flattenChildren=__webpack_require__(286),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(nestedChildren,transaction,context){return ReactChildReconciler.instantiateChildren(nestedChildren,transaction,context)},_reconcilerUpdateChildren:function(prevChildren,nextNestedChildrenElements,transaction,context){var nextChildren;return nextChildren=flattenChildren(nextNestedChildrenElements),ReactChildReconciler.updateChildren(prevChildren,nextChildren,transaction,context)},mountChildren:function(nestedChildren,transaction,context){var children=this._reconcilerInstantiateChildren(nestedChildren,transaction,context);this._renderedChildren=children;var mountImages=[],index=0;for(var name in children)if(children.hasOwnProperty(name)){var child=children[name],rootID=this._rootNodeID+name,mountImage=ReactReconciler.mountComponent(child,rootID,transaction,context);child._mountIndex=index++,mountImages.push(mountImage)}return mountImages},updateTextContent:function(nextContent){updateDepth++;var errorThrown=!0;try{var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren);for(var name in prevChildren)prevChildren.hasOwnProperty(name)&&this._unmountChild(prevChildren[name]);this.setTextContent(nextContent),errorThrown=!1}finally{updateDepth--,updateDepth||(errorThrown?clearQueue():processQueue())}},updateMarkup:function(nextMarkup){updateDepth++;var errorThrown=!0;try{var prevChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(prevChildren);for(var name in prevChildren)prevChildren.hasOwnProperty(name)&&this._unmountChildByName(prevChildren[name],name);this.setMarkup(nextMarkup),errorThrown=!1}finally{updateDepth--,updateDepth||(errorThrown?clearQueue():processQueue())}},updateChildren:function(nextNestedChildrenElements,transaction,context){updateDepth++;var errorThrown=!0;try{this._updateChildren(nextNestedChildrenElements,transaction,context),errorThrown=!1}finally{updateDepth--,updateDepth||(errorThrown?clearQueue():processQueue())}},_updateChildren:function(nextNestedChildrenElements,transaction,context){var prevChildren=this._renderedChildren,nextChildren=this._reconcilerUpdateChildren(prevChildren,nextNestedChildrenElements,transaction,context);if(this._renderedChildren=nextChildren,nextChildren||prevChildren){var name,lastIndex=0,nextIndex=0;for(name in nextChildren)if(nextChildren.hasOwnProperty(name)){var prevChild=prevChildren&&prevChildren[name],nextChild=nextChildren[name];prevChild===nextChild?(this.moveChild(prevChild,nextIndex,lastIndex),lastIndex=Math.max(prevChild._mountIndex,lastIndex),prevChild._mountIndex=nextIndex):(prevChild&&(lastIndex=Math.max(prevChild._mountIndex,lastIndex),this._unmountChild(prevChild)),this._mountChildByNameAtIndex(nextChild,name,nextIndex,transaction,context)),nextIndex++}for(name in prevChildren)!prevChildren.hasOwnProperty(name)||nextChildren&&nextChildren.hasOwnProperty(name)||this._unmountChild(prevChildren[name])}},unmountChildren:function(){var renderedChildren=this._renderedChildren;ReactChildReconciler.unmountChildren(renderedChildren),this._renderedChildren=null},moveChild:function(child,toIndex,lastIndex){child._mountIndex<lastIndex&&enqueueMove(this._rootNodeID,child._mountIndex,toIndex)},createChild:function(child,mountImage){enqueueInsertMarkup(this._rootNodeID,mountImage,child._mountIndex)},removeChild:function(child){enqueueRemove(this._rootNodeID,child._mountIndex)},setTextContent:function(textContent){enqueueTextContent(this._rootNodeID,textContent)},setMarkup:function(markup){enqueueSetMarkup(this._rootNodeID,markup)},_mountChildByNameAtIndex:function(child,name,index,transaction,context){var rootID=this._rootNodeID+name,mountImage=ReactReconciler.mountComponent(child,rootID,transaction,context);child._mountIndex=index,this.createChild(child,mountImage)},_unmountChild:function(child){this.removeChild(child),child._mountIndex=null}}};module.exports=ReactMultiChild},function(module,exports,__webpack_require__){"use strict";function instantiateChild(childInstances,child,name){var keyUnique=void 0===childInstances[name];null!=child&&keyUnique&&(childInstances[name]=instantiateReactComponent(child,null))}var ReactReconciler=__webpack_require__(220),instantiateReactComponent=__webpack_require__(232),shouldUpdateReactComponent=__webpack_require__(237),traverseAllChildren=__webpack_require__(281),ReactChildReconciler=(__webpack_require__(195),{instantiateChildren:function(nestedChildNodes,transaction,context){if(null==nestedChildNodes)return null;var childInstances={};return traverseAllChildren(nestedChildNodes,instantiateChild,childInstances),childInstances},updateChildren:function(prevChildren,nextChildren,transaction,context){if(!nextChildren&&!prevChildren)return null;var name;for(name in nextChildren)if(nextChildren.hasOwnProperty(name)){var prevChild=prevChildren&&prevChildren[name],prevElement=prevChild&&prevChild._currentElement,nextElement=nextChildren[name];if(null!=prevChild&&shouldUpdateReactComponent(prevElement,nextElement))ReactReconciler.receiveComponent(prevChild,nextElement,transaction,context),nextChildren[name]=prevChild;else{prevChild&&ReactReconciler.unmountComponent(prevChild,name);var nextChildInstance=instantiateReactComponent(nextElement,null);nextChildren[name]=nextChildInstance}}for(name in prevChildren)!prevChildren.hasOwnProperty(name)||nextChildren&&nextChildren.hasOwnProperty(name)||ReactReconciler.unmountComponent(prevChildren[name]);return nextChildren},unmountChildren:function(renderedChildren){for(var name in renderedChildren)if(renderedChildren.hasOwnProperty(name)){var renderedChild=renderedChildren[name];ReactReconciler.unmountComponent(renderedChild)}}});module.exports=ReactChildReconciler},function(module,exports,__webpack_require__){"use strict";function flattenSingleChildIntoContext(traverseContext,child,name){var result=traverseContext,keyUnique=void 0===result[name];keyUnique&&null!=child&&(result[name]=child)}function flattenChildren(children){if(null==children)return children;var result={};return traverseAllChildren(children,flattenSingleChildIntoContext,result),result}var traverseAllChildren=__webpack_require__(281);__webpack_require__(195);module.exports=flattenChildren},function(module,exports){"use strict";function shallowEqual(objA,objB){if(objA===objB)return!0;
if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var bHasOwnProperty=hasOwnProperty.bind(objB),i=0;i<keysA.length;i++)if(!bHasOwnProperty(keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual},function(module,exports,__webpack_require__){"use strict";function findParent(node){var nodeID=ReactMount.getID(node),rootID=ReactInstanceHandles.getReactRootIDFromNodeID(nodeID),container=ReactMount.findReactContainerForID(rootID),parent=ReactMount.getFirstReactDOM(container);return parent}function TopLevelCallbackBookKeeping(topLevelType,nativeEvent){this.topLevelType=topLevelType,this.nativeEvent=nativeEvent,this.ancestors=[]}function handleTopLevelImpl(bookKeeping){handleTopLevelWithoutPath(bookKeeping)}function handleTopLevelWithoutPath(bookKeeping){for(var topLevelTarget=ReactMount.getFirstReactDOM(getEventTarget(bookKeeping.nativeEvent))||window,ancestor=topLevelTarget;ancestor;)bookKeeping.ancestors.push(ancestor),ancestor=findParent(ancestor);for(var i=0;i<bookKeeping.ancestors.length;i++){topLevelTarget=bookKeeping.ancestors[i];var topLevelTargetID=ReactMount.getID(topLevelTarget)||"";ReactEventListener._handleTopLevel(bookKeeping.topLevelType,topLevelTarget,topLevelTargetID,bookKeeping.nativeEvent,getEventTarget(bookKeeping.nativeEvent))}}function scrollValueMonitor(cb){var scrollPosition=getUnboundedScrollPosition(window);cb(scrollPosition)}var EventListener=__webpack_require__(289),ExecutionEnvironment=__webpack_require__(179),PooledClass=__webpack_require__(226),ReactInstanceHandles=__webpack_require__(215),ReactMount=__webpack_require__(198),ReactUpdates=__webpack_require__(224),assign=__webpack_require__(209),getEventTarget=__webpack_require__(251),getUnboundedScrollPosition=__webpack_require__(290);assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(handleTopLevel){ReactEventListener._handleTopLevel=handleTopLevel},setEnabled:function(enabled){ReactEventListener._enabled=!!enabled},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(topLevelType,handlerBaseName,handle){var element=handle;return element?EventListener.listen(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType)):null},trapCapturedEvent:function(topLevelType,handlerBaseName,handle){var element=handle;return element?EventListener.capture(element,handlerBaseName,ReactEventListener.dispatchEvent.bind(null,topLevelType)):null},monitorScrollValue:function(refresh){var callback=scrollValueMonitor.bind(null,refresh);EventListener.listen(window,"scroll",callback)},dispatchEvent:function(topLevelType,nativeEvent){if(ReactEventListener._enabled){var bookKeeping=TopLevelCallbackBookKeeping.getPooled(topLevelType,nativeEvent);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,bookKeeping)}finally{TopLevelCallbackBookKeeping.release(bookKeeping)}}}};module.exports=ReactEventListener},function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(185),EventListener={listen:function(target,eventType,callback){return target.addEventListener?(target.addEventListener(eventType,callback,!1),{remove:function(){target.removeEventListener(eventType,callback,!1)}}):target.attachEvent?(target.attachEvent("on"+eventType,callback),{remove:function(){target.detachEvent("on"+eventType,callback)}}):void 0},capture:function(target,eventType,callback){return target.addEventListener?(target.addEventListener(eventType,callback,!0),{remove:function(){target.removeEventListener(eventType,callback,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener},function(module,exports){"use strict";function getUnboundedScrollPosition(scrollable){return scrollable===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:scrollable.scrollLeft,y:scrollable.scrollTop}}module.exports=getUnboundedScrollPosition},function(module,exports,__webpack_require__){"use strict";var DOMProperty=__webpack_require__(193),EventPluginHub=__webpack_require__(201),ReactComponentEnvironment=__webpack_require__(234),ReactClass=__webpack_require__(292),ReactEmptyComponent=__webpack_require__(238),ReactBrowserEventEmitter=__webpack_require__(199),ReactNativeComponent=__webpack_require__(239),ReactPerf=__webpack_require__(188),ReactRootIndex=__webpack_require__(216),ReactUpdates=__webpack_require__(224),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection},function(module,exports,__webpack_require__){"use strict";function validateMethodOverride(proto,name){var specPolicy=ReactClassInterface.hasOwnProperty(name)?ReactClassInterface[name]:null;ReactClassMixin.hasOwnProperty(name)&&(specPolicy!==SpecPolicy.OVERRIDE_BASE?invariant(!1):void 0),proto.hasOwnProperty(name)&&(specPolicy!==SpecPolicy.DEFINE_MANY&&specPolicy!==SpecPolicy.DEFINE_MANY_MERGED?invariant(!1):void 0)}function mixSpecIntoComponent(Constructor,spec){if(spec){"function"==typeof spec?invariant(!1):void 0,ReactElement.isValidElement(spec)?invariant(!1):void 0;var proto=Constructor.prototype;spec.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(Constructor,spec.mixins);for(var name in spec)if(spec.hasOwnProperty(name)&&name!==MIXINS_KEY){var property=spec[name];if(validateMethodOverride(proto,name),RESERVED_SPEC_KEYS.hasOwnProperty(name))RESERVED_SPEC_KEYS[name](Constructor,property);else{var isReactClassMethod=ReactClassInterface.hasOwnProperty(name),isAlreadyDefined=proto.hasOwnProperty(name),isFunction="function"==typeof property,shouldAutoBind=isFunction&&!isReactClassMethod&&!isAlreadyDefined&&spec.autobind!==!1;if(shouldAutoBind)proto.__reactAutoBindMap||(proto.__reactAutoBindMap={}),proto.__reactAutoBindMap[name]=property,proto[name]=property;else if(isAlreadyDefined){var specPolicy=ReactClassInterface[name];!isReactClassMethod||specPolicy!==SpecPolicy.DEFINE_MANY_MERGED&&specPolicy!==SpecPolicy.DEFINE_MANY?invariant(!1):void 0,specPolicy===SpecPolicy.DEFINE_MANY_MERGED?proto[name]=createMergedResultFunction(proto[name],property):specPolicy===SpecPolicy.DEFINE_MANY&&(proto[name]=createChainedFunction(proto[name],property))}else proto[name]=property}}}}function mixStaticSpecIntoComponent(Constructor,statics){if(statics)for(var name in statics){var property=statics[name];if(statics.hasOwnProperty(name)){var isReserved=name in RESERVED_SPEC_KEYS;isReserved?invariant(!1):void 0;var isInherited=name in Constructor;isInherited?invariant(!1):void 0,Constructor[name]=property}}}function mergeIntoWithNoDuplicateKeys(one,two){one&&two&&"object"==typeof one&&"object"==typeof two?void 0:invariant(!1);for(var key in two)two.hasOwnProperty(key)&&(void 0!==one[key]?invariant(!1):void 0,one[key]=two[key]);return one}function createMergedResultFunction(one,two){return function(){var a=one.apply(this,arguments),b=two.apply(this,arguments);if(null==a)return b;if(null==b)return a;var c={};return mergeIntoWithNoDuplicateKeys(c,a),mergeIntoWithNoDuplicateKeys(c,b),c}}function createChainedFunction(one,two){return function(){one.apply(this,arguments),two.apply(this,arguments)}}function bindAutoBindMethod(component,method){var boundMethod=method.bind(component);return boundMethod}function bindAutoBindMethods(component){for(var autoBindKey in component.__reactAutoBindMap)if(component.__reactAutoBindMap.hasOwnProperty(autoBindKey)){var method=component.__reactAutoBindMap[autoBindKey];component[autoBindKey]=bindAutoBindMethod(component,method)}}var ReactComponent=__webpack_require__(293),ReactElement=__webpack_require__(212),ReactNoopUpdateQueue=(__webpack_require__(235),__webpack_require__(236),__webpack_require__(294)),assign=__webpack_require__(209),emptyObject=__webpack_require__(228),invariant=__webpack_require__(183),keyMirror=__webpack_require__(187),keyOf=__webpack_require__(249),MIXINS_KEY=(__webpack_require__(195),keyOf({mixins:null})),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(Constructor,displayName){Constructor.displayName=displayName},mixins:function(Constructor,mixins){if(mixins)for(var i=0;i<mixins.length;i++)mixSpecIntoComponent(Constructor,mixins[i])},childContextTypes:function(Constructor,childContextTypes){Constructor.childContextTypes=assign({},Constructor.childContextTypes,childContextTypes)},contextTypes:function(Constructor,contextTypes){Constructor.contextTypes=assign({},Constructor.contextTypes,contextTypes)},getDefaultProps:function(Constructor,getDefaultProps){Constructor.getDefaultProps?Constructor.getDefaultProps=createMergedResultFunction(Constructor.getDefaultProps,getDefaultProps):Constructor.getDefaultProps=getDefaultProps},propTypes:function(Constructor,propTypes){Constructor.propTypes=assign({},Constructor.propTypes,propTypes)},statics:function(Constructor,statics){mixStaticSpecIntoComponent(Constructor,statics)},autobind:function(){}},ReactClassMixin={replaceState:function(newState,callback){this.updater.enqueueReplaceState(this,newState),callback&&this.updater.enqueueCallback(this,callback)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(partialProps,callback){this.updater.enqueueSetProps(this,partialProps),callback&&this.updater.enqueueCallback(this,callback)},replaceProps:function(newProps,callback){this.updater.enqueueReplaceProps(this,newProps),callback&&this.updater.enqueueCallback(this,callback)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(spec){var Constructor=function(props,context,updater){this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue,this.state=null;var initialState=this.getInitialState?this.getInitialState():null;"object"!=typeof initialState||Array.isArray(initialState)?invariant(!1):void 0,this.state=initialState};Constructor.prototype=new ReactClassComponent,Constructor.prototype.constructor=Constructor,injectedMixins.forEach(mixSpecIntoComponent.bind(null,Constructor)),mixSpecIntoComponent(Constructor,spec),Constructor.getDefaultProps&&(Constructor.defaultProps=Constructor.getDefaultProps()),Constructor.prototype.render?void 0:invariant(!1);for(var methodName in ReactClassInterface)Constructor.prototype[methodName]||(Constructor.prototype[methodName]=null);return Constructor},injection:{injectMixin:function(mixin){injectedMixins.push(mixin)}}};module.exports=ReactClass},function(module,exports,__webpack_require__){"use strict";function ReactComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=__webpack_require__(294),emptyObject=(__webpack_require__(213),__webpack_require__(228)),invariant=__webpack_require__(183);__webpack_require__(195);ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(partialState,callback){"object"!=typeof partialState&&"function"!=typeof partialState&&null!=partialState?invariant(!1):void 0,this.updater.enqueueSetState(this,partialState),callback&&this.updater.enqueueCallback(this,callback)},ReactComponent.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this),callback&&this.updater.enqueueCallback(this,callback)};module.exports=ReactComponent},function(module,exports,__webpack_require__){"use strict";function warnTDZ(publicInstance,callerName){}var ReactNoopUpdateQueue=(__webpack_require__(195),{isMounted:function(publicInstance){return!1},enqueueCallback:function(publicInstance,callback){},enqueueForceUpdate:function(publicInstance){warnTDZ(publicInstance,"forceUpdate")},enqueueReplaceState:function(publicInstance,completeState){warnTDZ(publicInstance,"replaceState")},enqueueSetState:function(publicInstance,partialState){warnTDZ(publicInstance,"setState")},enqueueSetProps:function(publicInstance,partialProps){warnTDZ(publicInstance,"setProps")},enqueueReplaceProps:function(publicInstance,props){warnTDZ(publicInstance,"replaceProps")}});module.exports=ReactNoopUpdateQueue},function(module,exports,__webpack_require__){"use strict";function ReactReconcileTransaction(forceHTML){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!forceHTML&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=__webpack_require__(225),PooledClass=__webpack_require__(226),ReactBrowserEventEmitter=__webpack_require__(199),ReactDOMFeatureFlags=__webpack_require__(211),ReactInputSelection=__webpack_require__(296),Transaction=__webpack_require__(227),assign=__webpack_require__(209),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var currentlyEnabled=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),currentlyEnabled},close:function(previouslyEnabled){ReactBrowserEventEmitter.setEnabled(previouslyEnabled)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction},function(module,exports,__webpack_require__){"use strict";function isInDocument(node){return containsNode(document.documentElement,node)}var ReactDOMSelection=__webpack_require__(297),containsNode=__webpack_require__(229),focusNode=__webpack_require__(265),getActiveElement=__webpack_require__(299),ReactInputSelection={hasSelectionCapabilities:function(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&("input"===nodeName&&"text"===elem.type||"textarea"===nodeName||"true"===elem.contentEditable)},getSelectionInformation:function(){var focusedElem=getActiveElement();return{focusedElem:focusedElem,selectionRange:ReactInputSelection.hasSelectionCapabilities(focusedElem)?ReactInputSelection.getSelection(focusedElem):null}},restoreSelection:function(priorSelectionInformation){var curFocusedElem=getActiveElement(),priorFocusedElem=priorSelectionInformation.focusedElem,priorSelectionRange=priorSelectionInformation.selectionRange;curFocusedElem!==priorFocusedElem&&isInDocument(priorFocusedElem)&&(ReactInputSelection.hasSelectionCapabilities(priorFocusedElem)&&ReactInputSelection.setSelection(priorFocusedElem,priorSelectionRange),focusNode(priorFocusedElem))},getSelection:function(input){var selection;if("selectionStart"in input)selection={start:input.selectionStart,end:input.selectionEnd};else if(document.selection&&input.nodeName&&"input"===input.nodeName.toLowerCase()){var range=document.selection.createRange();range.parentElement()===input&&(selection={start:-range.moveStart("character",-input.value.length),end:-range.moveEnd("character",-input.value.length)})}else selection=ReactDOMSelection.getOffsets(input);return selection||{start:0,end:0}},setSelection:function(input,offsets){var start=offsets.start,end=offsets.end;if("undefined"==typeof end&&(end=start),"selectionStart"in input)input.selectionStart=start,input.selectionEnd=Math.min(end,input.value.length);else if(document.selection&&input.nodeName&&"input"===input.nodeName.toLowerCase()){var range=input.createTextRange();range.collapse(!0),range.moveStart("character",start),range.moveEnd("character",end-start),range.select()}else ReactDOMSelection.setOffsets(input,offsets)}};module.exports=ReactInputSelection},function(module,exports,__webpack_require__){"use strict";function isCollapsed(anchorNode,anchorOffset,focusNode,focusOffset){return anchorNode===focusNode&&anchorOffset===focusOffset}function getIEOffsets(node){var selection=document.selection,selectedRange=selection.createRange(),selectedLength=selectedRange.text.length,fromStart=selectedRange.duplicate();fromStart.moveToElementText(node),fromStart.setEndPoint("EndToStart",selectedRange);var startOffset=fromStart.text.length,endOffset=startOffset+selectedLength;return{start:startOffset,end:endOffset}}function getModernOffsets(node){var selection=window.getSelection&&window.getSelection();if(!selection||0===selection.rangeCount)return null;var anchorNode=selection.anchorNode,anchorOffset=selection.anchorOffset,focusNode=selection.focusNode,focusOffset=selection.focusOffset,currentRange=selection.getRangeAt(0);try{currentRange.startContainer.nodeType,currentRange.endContainer.nodeType}catch(e){return null}var isSelectionCollapsed=isCollapsed(selection.anchorNode,selection.anchorOffset,selection.focusNode,selection.focusOffset),rangeLength=isSelectionCollapsed?0:currentRange.toString().length,tempRange=currentRange.cloneRange();tempRange.selectNodeContents(node),tempRange.setEnd(currentRange.startContainer,currentRange.startOffset);var isTempRangeCollapsed=isCollapsed(tempRange.startContainer,tempRange.startOffset,tempRange.endContainer,tempRange.endOffset),start=isTempRangeCollapsed?0:tempRange.toString().length,end=start+rangeLength,detectionRange=document.createRange();detectionRange.setStart(anchorNode,anchorOffset),detectionRange.setEnd(focusNode,focusOffset);var isBackward=detectionRange.collapsed;return{start:isBackward?end:start,end:isBackward?start:end}}function setIEOffsets(node,offsets){var start,end,range=document.selection.createRange().duplicate();"undefined"==typeof offsets.end?(start=offsets.start,end=start):offsets.start>offsets.end?(start=offsets.end,end=offsets.start):(start=offsets.start,end=offsets.end),range.moveToElementText(node),range.moveStart("character",start),range.setEndPoint("EndToStart",range),range.moveEnd("character",end-start),range.select()}function setModernOffsets(node,offsets){if(window.getSelection){var selection=window.getSelection(),length=node[getTextContentAccessor()].length,start=Math.min(offsets.start,length),end="undefined"==typeof offsets.end?start:Math.min(offsets.end,length);if(!selection.extend&&start>end){var temp=end;end=start,start=temp}var startMarker=getNodeForCharacterOffset(node,start),endMarker=getNodeForCharacterOffset(node,end);if(startMarker&&endMarker){var range=document.createRange();range.setStart(startMarker.node,startMarker.offset),selection.removeAllRanges(),start>end?(selection.addRange(range),selection.extend(endMarker.node,endMarker.offset)):(range.setEnd(endMarker.node,endMarker.offset),selection.addRange(range))}}}var ExecutionEnvironment=__webpack_require__(179),getNodeForCharacterOffset=__webpack_require__(298),getTextContentAccessor=__webpack_require__(245),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection},function(module,exports){"use strict";function getLeafNode(node){for(;node&&node.firstChild;)node=node.firstChild;return node}function getSiblingNode(node){for(;node;){if(node.nextSibling)return node.nextSibling;node=node.parentNode}}function getNodeForCharacterOffset(root,offset){for(var node=getLeafNode(root),nodeStart=0,nodeEnd=0;node;){if(3===node.nodeType){if(nodeEnd=nodeStart+node.textContent.length,nodeStart<=offset&&nodeEnd>=offset)return{node:node,offset:offset-nodeStart};nodeStart=nodeEnd}node=getLeafNode(getSiblingNode(node))}}module.exports=getNodeForCharacterOffset},function(module,exports){"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement},function(module,exports,__webpack_require__){"use strict";function getSelection(node){if("selectionStart"in node&&ReactInputSelection.hasSelectionCapabilities(node))return{start:node.selectionStart,end:node.selectionEnd};if(window.getSelection){var selection=window.getSelection();return{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}}if(document.selection){var range=document.selection.createRange();return{parentElement:range.parentElement(),text:range.text,top:range.boundingTop,left:range.boundingLeft}}}function constructSelectEvent(nativeEvent,nativeEventTarget){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var currentSelection=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,currentSelection)){lastSelection=currentSelection;var syntheticEvent=SyntheticEvent.getPooled(eventTypes.select,activeElementID,nativeEvent,nativeEventTarget);return syntheticEvent.type="select",syntheticEvent.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(syntheticEvent),syntheticEvent}return null}var EventConstants=__webpack_require__(200),EventPropagators=__webpack_require__(243),ExecutionEnvironment=__webpack_require__(179),ReactInputSelection=__webpack_require__(296),SyntheticEvent=__webpack_require__(247),getActiveElement=__webpack_require__(299),isTextInputElement=__webpack_require__(252),keyOf=__webpack_require__(249),shallowEqual=__webpack_require__(287),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){if(!hasListener)return null;switch(topLevelType){case topLevelTypes.topFocus:(isTextInputElement(topLevelTarget)||"true"===topLevelTarget.contentEditable)&&(activeElement=topLevelTarget,activeElementID=topLevelTargetID,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(nativeEvent,nativeEventTarget);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(nativeEvent,nativeEventTarget)}return null},didPutListener:function(id,registrationName,listener){registrationName===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin},function(module,exports){"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex},function(module,exports,__webpack_require__){"use strict";var EventConstants=__webpack_require__(200),EventListener=__webpack_require__(289),EventPropagators=__webpack_require__(243),ReactMount=__webpack_require__(198),SyntheticClipboardEvent=__webpack_require__(303),SyntheticEvent=__webpack_require__(247),SyntheticFocusEvent=__webpack_require__(304),SyntheticKeyboardEvent=__webpack_require__(305),SyntheticMouseEvent=__webpack_require__(256),SyntheticDragEvent=__webpack_require__(308),SyntheticTouchEvent=__webpack_require__(309),SyntheticUIEvent=__webpack_require__(257),SyntheticWheelEvent=__webpack_require__(310),emptyFunction=__webpack_require__(185),getEventCharCode=__webpack_require__(306),invariant=__webpack_require__(183),keyOf=__webpack_require__(249),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,
topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(topLevelType,topLevelTarget,topLevelTargetID,nativeEvent,nativeEventTarget){var dispatchConfig=topLevelEventsToDispatchConfig[topLevelType];if(!dispatchConfig)return null;var EventConstructor;switch(topLevelType){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:EventConstructor=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(nativeEvent))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:EventConstructor=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:EventConstructor=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===nativeEvent.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:EventConstructor=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:EventConstructor=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:EventConstructor=SyntheticTouchEvent;break;case topLevelTypes.topScroll:EventConstructor=SyntheticUIEvent;break;case topLevelTypes.topWheel:EventConstructor=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:EventConstructor=SyntheticClipboardEvent}EventConstructor?void 0:invariant(!1);var event=EventConstructor.getPooled(dispatchConfig,topLevelTargetID,nativeEvent,nativeEventTarget);return EventPropagators.accumulateTwoPhaseDispatches(event),event},didPutListener:function(id,registrationName,listener){if(registrationName===ON_CLICK_KEY){var node=ReactMount.getNode(id);onClickListeners[id]||(onClickListeners[id]=EventListener.listen(node,"click",emptyFunction))}},willDeleteListener:function(id,registrationName){registrationName===ON_CLICK_KEY&&(onClickListeners[id].remove(),delete onClickListeners[id])}};module.exports=SimpleEventPlugin},function(module,exports,__webpack_require__){"use strict";function SyntheticClipboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticEvent=__webpack_require__(247),ClipboardEventInterface={clipboardData:function(event){return"clipboardData"in event?event.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticFocusEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(257),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticKeyboardEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(257),getEventCharCode=__webpack_require__(306),getEventKey=__webpack_require__(307),getEventModifierState=__webpack_require__(258),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(event){return"keypress"===event.type?getEventCharCode(event):0},keyCode:function(event){return"keydown"===event.type||"keyup"===event.type?event.keyCode:0},which:function(event){return"keypress"===event.type?getEventCharCode(event):"keydown"===event.type||"keyup"===event.type?event.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent},function(module,exports){"use strict";function getEventCharCode(nativeEvent){var charCode,keyCode=nativeEvent.keyCode;return"charCode"in nativeEvent?(charCode=nativeEvent.charCode,0===charCode&&13===keyCode&&(charCode=13)):charCode=keyCode,charCode>=32||13===charCode?charCode:0}module.exports=getEventCharCode},function(module,exports,__webpack_require__){"use strict";function getEventKey(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if("Unidentified"!==key)return key}if("keypress"===nativeEvent.type){var charCode=getEventCharCode(nativeEvent);return 13===charCode?"Enter":String.fromCharCode(charCode)}return"keydown"===nativeEvent.type||"keyup"===nativeEvent.type?translateToKey[nativeEvent.keyCode]||"Unidentified":""}var getEventCharCode=__webpack_require__(306),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey},function(module,exports,__webpack_require__){"use strict";function SyntheticDragEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticMouseEvent=__webpack_require__(256),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticTouchEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticUIEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticUIEvent=__webpack_require__(257),getEventModifierState=__webpack_require__(258),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent},function(module,exports,__webpack_require__){"use strict";function SyntheticWheelEvent(dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget){SyntheticMouseEvent.call(this,dispatchConfig,dispatchMarker,nativeEvent,nativeEventTarget)}var SyntheticMouseEvent=__webpack_require__(256),WheelEventInterface={deltaX:function(event){return"deltaX"in event?event.deltaX:"wheelDeltaX"in event?-event.wheelDeltaX:0},deltaY:function(event){return"deltaY"in event?event.deltaY:"wheelDeltaY"in event?-event.wheelDeltaY:"wheelDelta"in event?-event.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent},function(module,exports,__webpack_require__){"use strict";var DOMProperty=__webpack_require__(193),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig},function(module,exports){"use strict";module.exports="0.14.9"},function(module,exports,__webpack_require__){"use strict";var ReactMount=__webpack_require__(198);module.exports=ReactMount.renderSubtreeIntoContainer},function(module,exports,__webpack_require__){"use strict";var ReactDefaultInjection=__webpack_require__(241),ReactServerRendering=__webpack_require__(315),ReactVersion=__webpack_require__(312);ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer},function(module,exports,__webpack_require__){"use strict";function renderToString(element){ReactElement.isValidElement(element)?void 0:invariant(!1);var transaction;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var id=ReactInstanceHandles.createReactRootID();return transaction=ReactServerRenderingTransaction.getPooled(!1),transaction.perform(function(){var componentInstance=instantiateReactComponent(element,null),markup=componentInstance.mountComponent(id,transaction,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(markup)},null)}finally{ReactServerRenderingTransaction.release(transaction),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(element){ReactElement.isValidElement(element)?void 0:invariant(!1);var transaction;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var id=ReactInstanceHandles.createReactRootID();return transaction=ReactServerRenderingTransaction.getPooled(!0),transaction.perform(function(){var componentInstance=instantiateReactComponent(element,null);return componentInstance.mountComponent(id,transaction,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(transaction),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=__webpack_require__(262),ReactElement=__webpack_require__(212),ReactInstanceHandles=__webpack_require__(215),ReactMarkupChecksum=__webpack_require__(218),ReactServerBatchingStrategy=__webpack_require__(316),ReactServerRenderingTransaction=__webpack_require__(317),ReactUpdates=__webpack_require__(224),emptyObject=__webpack_require__(228),instantiateReactComponent=__webpack_require__(232),invariant=__webpack_require__(183);module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup}},function(module,exports){"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(callback){}};module.exports=ReactServerBatchingStrategy},function(module,exports,__webpack_require__){"use strict";function ReactServerRenderingTransaction(renderToStaticMarkup){this.reinitializeTransaction(),this.renderToStaticMarkup=renderToStaticMarkup,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=__webpack_require__(226),CallbackQueue=__webpack_require__(225),Transaction=__webpack_require__(227),assign=__webpack_require__(209),emptyFunction=__webpack_require__(185),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction},function(module,exports,__webpack_require__){"use strict";var ReactChildren=__webpack_require__(280),ReactComponent=__webpack_require__(293),ReactClass=__webpack_require__(292),ReactDOMFactories=__webpack_require__(319),ReactElement=__webpack_require__(212),ReactPropTypes=(__webpack_require__(320),__webpack_require__(277)),ReactVersion=__webpack_require__(312),assign=__webpack_require__(209),onlyChild=__webpack_require__(322),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(mixin){return mixin},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React},function(module,exports,__webpack_require__){"use strict";function createDOMFactory(tag){return ReactElement.createFactory(tag)}var ReactElement=__webpack_require__(212),mapObject=(__webpack_require__(320),__webpack_require__(321)),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories},function(module,exports,__webpack_require__){"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var name=ReactCurrentOwner.current.getName();if(name)return" Check the render method of `"+name+"`."}return""}function validateExplicitKey(element,parentType){if(element._store&&!element._store.validated&&null==element.key){element._store.validated=!0;getAddendaForKeyUse("uniqueKey",element,parentType)}}function getAddendaForKeyUse(messageType,element,parentType){var addendum=getDeclarationErrorAddendum();if(!addendum){var parentName="string"==typeof parentType?parentType:parentType.displayName||parentType.name;parentName&&(addendum=" Check the top-level render call using <"+parentName+">.")}var memoizer=ownerHasKeyUseWarning[messageType]||(ownerHasKeyUseWarning[messageType]={});if(memoizer[addendum])return null;memoizer[addendum]=!0;var addenda={parentOrOwner:addendum,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return element&&element._owner&&element._owner!==ReactCurrentOwner.current&&(addenda.childOwner=" It was passed a child from "+element._owner.getName()+"."),addenda}function validateChildKeys(node,parentType){if("object"==typeof node)if(Array.isArray(node))for(var i=0;i<node.length;i++){var child=node[i];ReactElement.isValidElement(child)&&validateExplicitKey(child,parentType)}else if(ReactElement.isValidElement(node))node._store&&(node._store.validated=!0);else if(node){var iteratorFn=getIteratorFn(node);if(iteratorFn&&iteratorFn!==node.entries)for(var step,iterator=iteratorFn.call(node);!(step=iterator.next()).done;)ReactElement.isValidElement(step.value)&&validateExplicitKey(step.value,parentType)}}function checkPropTypes(componentName,propTypes,props,location){for(var propName in propTypes)if(propTypes.hasOwnProperty(propName)){var error;try{"function"!=typeof propTypes[propName]?invariant(!1):void 0,error=propTypes[propName](props,propName,componentName,location,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ex){error=ex}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;getDeclarationErrorAddendum()}}}function validatePropTypes(element){var componentClass=element.type;if("function"==typeof componentClass){var name=componentClass.displayName||componentClass.name;componentClass.propTypes&&checkPropTypes(name,componentClass.propTypes,element.props,ReactPropTypeLocations.prop),"function"==typeof componentClass.getDefaultProps}}var ReactElement=__webpack_require__(212),ReactPropTypeLocations=__webpack_require__(235),ReactCurrentOwner=(__webpack_require__(236),__webpack_require__(175)),getIteratorFn=(__webpack_require__(213),__webpack_require__(278)),invariant=__webpack_require__(183),ownerHasKeyUseWarning=(__webpack_require__(195),{}),loggedTypeFailures={},ReactElementValidator={createElement:function(type,props,children){var validType="string"==typeof type||"function"==typeof type,element=ReactElement.createElement.apply(this,arguments);if(null==element)return element;if(validType)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],type);return validatePropTypes(element),element},createFactory:function(type){var validatedFactory=ReactElementValidator.createElement.bind(null,type);return validatedFactory.type=type,validatedFactory},cloneElement:function(element,props,children){for(var newElement=ReactElement.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)validateChildKeys(arguments[i],newElement.type);return validatePropTypes(newElement),newElement}};module.exports=ReactElementValidator},function(module,exports){"use strict";function mapObject(object,callback,context){if(!object)return null;var result={};for(var name in object)hasOwnProperty.call(object,name)&&(result[name]=callback.call(context,object[name],name,object));return result}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject},function(module,exports,__webpack_require__){"use strict";function onlyChild(children){return ReactElement.isValidElement(children)?void 0:invariant(!1),children}var ReactElement=__webpack_require__(212),invariant=__webpack_require__(183);module.exports=onlyChild},function(module,exports,__webpack_require__){"use strict";function deprecated(fnName,newModule,newPackage,ctx,fn){return fn}__webpack_require__(209),__webpack_require__(195);module.exports=deprecated},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(174)},function(module,exports,__webpack_require__){"use strict";Object.assign||(Object.assign=__webpack_require__(326)),Array.isArray||(Array.isArray=__webpack_require__(327))},function(module,exports){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports){function isObjectLike(value){return!!value&&"object"==typeof value}function getNative(object,key){var value=null==object?void 0:object[key];return isNative(value)?value:void 0}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isNative(value){return null!=value&&(isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&reIsHostCtor.test(value))}var arrayTag="[object Array]",funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nativeIsArray=getNative(Array,"isArray"),MAX_SAFE_INTEGER=9007199254740991,isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},function(module,exports){"use strict";module.exports={CONTAINER_HEIGHT_SCALE_FACTOR:"containerHeightScaleFactor"}},function(module,exports,__webpack_require__){(function(global){"use strict";function createInfiniteComputer(data,children){var computer,numberOfChildren=React.Children.count(children);return computer=Array.isArray(data)?new ArrayInfiniteComputer(data,numberOfChildren):new ConstantInfiniteComputer(data,numberOfChildren)}function recomputeApertureStateFromOptionsAndScrollTop(_ref,scrollTop){var preloadBatchSize=_ref.preloadBatchSize,preloadAdditionalHeight=_ref.preloadAdditionalHeight,infiniteComputer=_ref.infiniteComputer;return function(){var blockNumber=0===preloadBatchSize?0:Math.floor(scrollTop/preloadBatchSize),blockStart=preloadBatchSize*blockNumber,blockEnd=blockStart+preloadBatchSize,apertureTop=Math.max(0,blockStart-preloadAdditionalHeight),apertureBottom=Math.min(infiniteComputer.getTotalScrollableHeight(),blockEnd+preloadAdditionalHeight);return{displayIndexStart:infiniteComputer.getDisplayIndexStart(apertureTop),displayIndexEnd:infiniteComputer.getDisplayIndexEnd(apertureBottom)}}()}var ConstantInfiniteComputer=__webpack_require__(330),ArrayInfiniteComputer=__webpack_require__(332),React=global.React||__webpack_require__(172);module.exports={createInfiniteComputer:createInfiniteComputer,recomputeApertureStateFromOptionsAndScrollTop:recomputeApertureStateFromOptionsAndScrollTop}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},InfiniteComputer=__webpack_require__(331),ConstantInfiniteComputer=function(_InfiniteComputer){function ConstantInfiniteComputer(){_classCallCheck(this,ConstantInfiniteComputer),_get(Object.getPrototypeOf(ConstantInfiniteComputer.prototype),"constructor",this).apply(this,arguments)}return _inherits(ConstantInfiniteComputer,_InfiniteComputer),_createClass(ConstantInfiniteComputer,[{key:"getTotalScrollableHeight",value:function(){return this.heightData*this.numberOfChildren}},{key:"getDisplayIndexStart",value:function(windowTop){return Math.floor(windowTop/this.heightData)}},{key:"getDisplayIndexEnd",value:function(windowBottom){var nonZeroIndex=Math.ceil(windowBottom/this.heightData);return nonZeroIndex>0?nonZeroIndex-1:nonZeroIndex}},{key:"getTopSpacerHeight",value:function(displayIndexStart){return displayIndexStart*this.heightData}},{key:"getBottomSpacerHeight",value:function(displayIndexEnd){var nonZeroIndex=displayIndexEnd+1;return Math.max(0,(this.numberOfChildren-nonZeroIndex)*this.heightData)}}]),ConstantInfiniteComputer}(InfiniteComputer);module.exports=ConstantInfiniteComputer},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),InfiniteComputer=function(){function InfiniteComputer(heightData,numberOfChildren){_classCallCheck(this,InfiniteComputer),this.heightData=heightData,this.numberOfChildren=numberOfChildren}return _createClass(InfiniteComputer,[{key:"getTotalScrollableHeight",value:function(){}},{key:"getDisplayIndexStart",value:function(windowTop){}},{key:"getDisplayIndexEnd",value:function(windowBottom){}},{key:"getTopSpacerHeight",value:function(displayIndexStart){}},{key:"getBottomSpacerHeight",value:function(displayIndexEnd){}}]),InfiniteComputer}();module.exports=InfiniteComputer},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=void 0}},InfiniteComputer=__webpack_require__(331),bs=__webpack_require__(333),ArrayInfiniteComputer=function(_InfiniteComputer){function ArrayInfiniteComputer(heightData,numberOfChildren){_classCallCheck(this,ArrayInfiniteComputer),_get(Object.getPrototypeOf(ArrayInfiniteComputer.prototype),"constructor",this).call(this,heightData,numberOfChildren),this.prefixHeightData=this.heightData.reduce(function(acc,next){return 0===acc.length?[next]:(acc.push(acc[acc.length-1]+next),acc)},[])}return _inherits(ArrayInfiniteComputer,_InfiniteComputer),_createClass(ArrayInfiniteComputer,[{key:"maybeIndexToIndex",value:function(index){return"undefined"==typeof index||null===index?this.prefixHeightData.length-1:index}},{key:"getTotalScrollableHeight",value:function(){var length=this.prefixHeightData.length;return 0===length?0:this.prefixHeightData[length-1]}},{key:"getDisplayIndexStart",value:function(windowTop){var foundIndex=bs.binaryIndexSearch(this.prefixHeightData,windowTop,bs.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(foundIndex)}},{key:"getDisplayIndexEnd",value:function(windowBottom){var foundIndex=bs.binaryIndexSearch(this.prefixHeightData,windowBottom,bs.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(foundIndex)}},{key:"getTopSpacerHeight",value:function(displayIndexStart){var previous=displayIndexStart-1;return previous<0?0:this.prefixHeightData[previous]}},{key:"getBottomSpacerHeight",value:function(displayIndexEnd){return displayIndexEnd===-1?0:this.getTotalScrollableHeight()-this.prefixHeightData[displayIndexEnd]}}]),ArrayInfiniteComputer}(InfiniteComputer);module.exports=ArrayInfiniteComputer},function(module,exports){"use strict";var opts={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},binaryIndexSearch=function(array,item,opt){for(var index,middle,middleItem,high=array.length-1,low=0;low<=high;){if(middle=low+Math.floor((high-low)/2),middleItem=array[middle],middleItem===item)return middle;middleItem<item?low=middle+1:middleItem>item&&(high=middle-1)}return opt===opts.CLOSEST_LOWER&&low>0?index=low-1:opt===opts.CLOSEST_HIGHER&&high<array.length-1&&(index=high+1),index};module.exports={binaryIndexSearch:binaryIndexSearch,opts:opts}},function(module,exports){(function(global){function isFinite(value){return"number"==typeof value&&nativeIsFinite(value)}var nativeIsFinite=global.isFinite;module.exports=isFinite}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var React=global.React||__webpack_require__(172);module.exports={preloadType:React.PropTypes.oneOfType([React.PropTypes.number,React.PropTypes.shape({type:React.PropTypes.oneOf(["containerHeightScaleFactor"]).isRequired,amount:React.PropTypes.number.isRequired})])}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var React=global.React||__webpack_require__(172),_isFinite=__webpack_require__(334);module.exports=function(props){var rie="Invariant Violation: ";if(!props.containerHeight&&!props.useWindowAsScrollContainer)throw new Error(rie+"Either containerHeight or useWindowAsScrollContainer must be provided.");if(!_isFinite(props.elementHeight)&&!Array.isArray(props.elementHeight))throw new Error(rie+"You must provide either a number or an array of numbers as the elementHeight.");if(Array.isArray(props.elementHeight)&&React.Children.count(props.children)!==props.elementHeight.length)throw new Error(rie+"There must be as many values provided in the elementHeight prop as there are children.")}}).call(exports,function(){return this}())}]);
//# sourceMappingURL=vgplayer.js.map